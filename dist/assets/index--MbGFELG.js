function B_(t,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function $n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function z_(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),r}var Su={exports:{}},Aa={},Eu={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function q_(){if(kg)return He;kg=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function x(k){return k===null||typeof k!="object"?null:(k=g&&k[g]||k["@@iterator"],typeof k=="function"?k:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,C={};function _(k,$,ee){this.props=k,this.context=$,this.refs=C,this.updater=ee||b}_.prototype.isReactComponent={},_.prototype.setState=function(k,$){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,$,"setState")},_.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function O(){}O.prototype=_.prototype;function A(k,$,ee){this.props=k,this.context=$,this.refs=C,this.updater=ee||b}var E=A.prototype=new O;E.constructor=A,j(E,_.prototype),E.isPureReactComponent=!0;var N=Array.isArray,D=Object.prototype.hasOwnProperty,T={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function I(k,$,ee){var ue,xe={},Ce=null,fe=null;if($!=null)for(ue in $.ref!==void 0&&(fe=$.ref),$.key!==void 0&&(Ce=""+$.key),$)D.call($,ue)&&!L.hasOwnProperty(ue)&&(xe[ue]=$[ue]);var Ee=arguments.length-2;if(Ee===1)xe.children=ee;else if(1<Ee){for(var De=Array(Ee),X=0;X<Ee;X++)De[X]=arguments[X+2];xe.children=De}if(k&&k.defaultProps)for(ue in Ee=k.defaultProps,Ee)xe[ue]===void 0&&(xe[ue]=Ee[ue]);return{$$typeof:t,type:k,key:Ce,ref:fe,props:xe,_owner:T.current}}function J(k,$){return{$$typeof:t,type:k.type,key:$,ref:k.ref,props:k.props,_owner:k._owner}}function Q(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function we(k){var $={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ee){return $[ee]})}var ie=/\/+/g;function be(k,$){return typeof k=="object"&&k!==null&&k.key!=null?we(""+k.key):$.toString(36)}function G(k,$,ee,ue,xe){var Ce=typeof k;(Ce==="undefined"||Ce==="boolean")&&(k=null);var fe=!1;if(k===null)fe=!0;else switch(Ce){case"string":case"number":fe=!0;break;case"object":switch(k.$$typeof){case t:case e:fe=!0}}if(fe)return fe=k,xe=xe(fe),k=ue===""?"."+be(fe,0):ue,N(xe)?(ee="",k!=null&&(ee=k.replace(ie,"$&/")+"/"),G(xe,$,ee,"",function(X){return X})):xe!=null&&(Q(xe)&&(xe=J(xe,ee+(!xe.key||fe&&fe.key===xe.key?"":(""+xe.key).replace(ie,"$&/")+"/")+k)),$.push(xe)),1;if(fe=0,ue=ue===""?".":ue+":",N(k))for(var Ee=0;Ee<k.length;Ee++){Ce=k[Ee];var De=ue+be(Ce,Ee);fe+=G(Ce,$,ee,De,xe)}else if(De=x(k),typeof De=="function")for(k=De.call(k),Ee=0;!(Ce=k.next()).done;)Ce=Ce.value,De=ue+be(Ce,Ee++),fe+=G(Ce,$,ee,De,xe);else if(Ce==="object")throw $=String(k),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return fe}function de(k,$,ee){if(k==null)return k;var ue=[],xe=0;return G(k,ue,"","",function(Ce){return $.call(ee,Ce,xe++)}),ue}function U(k){if(k._status===-1){var $=k._result;$=$(),$.then(function(ee){(k._status===0||k._status===-1)&&(k._status=1,k._result=ee)},function(ee){(k._status===0||k._status===-1)&&(k._status=2,k._result=ee)}),k._status===-1&&(k._status=0,k._result=$)}if(k._status===1)return k._result.default;throw k._result}var ne={current:null},z={transition:null},ce={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:z,ReactCurrentOwner:T};function oe(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:de,forEach:function(k,$,ee){de(k,function(){$.apply(this,arguments)},ee)},count:function(k){var $=0;return de(k,function(){$++}),$},toArray:function(k){return de(k,function($){return $})||[]},only:function(k){if(!Q(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},He.Component=_,He.Fragment=r,He.Profiler=o,He.PureComponent=A,He.StrictMode=i,He.Suspense=m,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,He.act=oe,He.cloneElement=function(k,$,ee){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var ue=j({},k.props),xe=k.key,Ce=k.ref,fe=k._owner;if($!=null){if($.ref!==void 0&&(Ce=$.ref,fe=T.current),$.key!==void 0&&(xe=""+$.key),k.type&&k.type.defaultProps)var Ee=k.type.defaultProps;for(De in $)D.call($,De)&&!L.hasOwnProperty(De)&&(ue[De]=$[De]===void 0&&Ee!==void 0?Ee[De]:$[De])}var De=arguments.length-2;if(De===1)ue.children=ee;else if(1<De){Ee=Array(De);for(var X=0;X<De;X++)Ee[X]=arguments[X+2];ue.children=Ee}return{$$typeof:t,type:k.type,key:xe,ref:Ce,props:ue,_owner:fe}},He.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:l,_context:k},k.Consumer=k},He.createElement=I,He.createFactory=function(k){var $=I.bind(null,k);return $.type=k,$},He.createRef=function(){return{current:null}},He.forwardRef=function(k){return{$$typeof:u,render:k}},He.isValidElement=Q,He.lazy=function(k){return{$$typeof:p,_payload:{_status:-1,_result:k},_init:U}},He.memo=function(k,$){return{$$typeof:h,type:k,compare:$===void 0?null:$}},He.startTransition=function(k){var $=z.transition;z.transition={};try{k()}finally{z.transition=$}},He.unstable_act=oe,He.useCallback=function(k,$){return ne.current.useCallback(k,$)},He.useContext=function(k){return ne.current.useContext(k)},He.useDebugValue=function(){},He.useDeferredValue=function(k){return ne.current.useDeferredValue(k)},He.useEffect=function(k,$){return ne.current.useEffect(k,$)},He.useId=function(){return ne.current.useId()},He.useImperativeHandle=function(k,$,ee){return ne.current.useImperativeHandle(k,$,ee)},He.useInsertionEffect=function(k,$){return ne.current.useInsertionEffect(k,$)},He.useLayoutEffect=function(k,$){return ne.current.useLayoutEffect(k,$)},He.useMemo=function(k,$){return ne.current.useMemo(k,$)},He.useReducer=function(k,$,ee){return ne.current.useReducer(k,$,ee)},He.useRef=function(k){return ne.current.useRef(k)},He.useState=function(k){return ne.current.useState(k)},He.useSyncExternalStore=function(k,$,ee){return ne.current.useSyncExternalStore(k,$,ee)},He.useTransition=function(){return ne.current.useTransition()},He.version="18.3.1",He}var Tg;function wc(){return Tg||(Tg=1,Eu.exports=q_()),Eu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function W_(){if(Ag)return Aa;Ag=1;var t=wc(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,m,h){var p,g={},x=null,b=null;h!==void 0&&(x=""+h),m.key!==void 0&&(x=""+m.key),m.ref!==void 0&&(b=m.ref);for(p in m)i.call(m,p)&&!l.hasOwnProperty(p)&&(g[p]=m[p]);if(u&&u.defaultProps)for(p in m=u.defaultProps,m)g[p]===void 0&&(g[p]=m[p]);return{$$typeof:e,type:u,key:x,ref:b,props:g,_owner:o.current}}return Aa.Fragment=r,Aa.jsx=c,Aa.jsxs=c,Aa}var Rg;function H_(){return Rg||(Rg=1,Su.exports=W_()),Su.exports}var n=H_(),w=wc();const st=$n(w),sv=B_({__proto__:null,default:st},[w]);var Fl={},Pu={exports:{}},rr={},ku={exports:{}},Tu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function G_(){return Og||(Og=1,(function(t){function e(z,ce){var oe=z.length;z.push(ce);e:for(;0<oe;){var k=oe-1>>>1,$=z[k];if(0<o($,ce))z[k]=ce,z[oe]=$,oe=k;else break e}}function r(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var ce=z[0],oe=z.pop();if(oe!==ce){z[0]=oe;e:for(var k=0,$=z.length,ee=$>>>1;k<ee;){var ue=2*(k+1)-1,xe=z[ue],Ce=ue+1,fe=z[Ce];if(0>o(xe,oe))Ce<$&&0>o(fe,xe)?(z[k]=fe,z[Ce]=oe,k=Ce):(z[k]=xe,z[ue]=oe,k=ue);else if(Ce<$&&0>o(fe,oe))z[k]=fe,z[Ce]=oe,k=Ce;else break e}}return ce}function o(z,ce){var oe=z.sortIndex-ce.sortIndex;return oe!==0?oe:z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var m=[],h=[],p=1,g=null,x=3,b=!1,j=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(z){for(var ce=r(h);ce!==null;){if(ce.callback===null)i(h);else if(ce.startTime<=z)i(h),ce.sortIndex=ce.expirationTime,e(m,ce);else break;ce=r(h)}}function N(z){if(C=!1,E(z),!j)if(r(m)!==null)j=!0,U(D);else{var ce=r(h);ce!==null&&ne(N,ce.startTime-z)}}function D(z,ce){j=!1,C&&(C=!1,O(I),I=-1),b=!0;var oe=x;try{for(E(ce),g=r(m);g!==null&&(!(g.expirationTime>ce)||z&&!we());){var k=g.callback;if(typeof k=="function"){g.callback=null,x=g.priorityLevel;var $=k(g.expirationTime<=ce);ce=t.unstable_now(),typeof $=="function"?g.callback=$:g===r(m)&&i(m),E(ce)}else i(m);g=r(m)}if(g!==null)var ee=!0;else{var ue=r(h);ue!==null&&ne(N,ue.startTime-ce),ee=!1}return ee}finally{g=null,x=oe,b=!1}}var T=!1,L=null,I=-1,J=5,Q=-1;function we(){return!(t.unstable_now()-Q<J)}function ie(){if(L!==null){var z=t.unstable_now();Q=z;var ce=!0;try{ce=L(!0,z)}finally{ce?be():(T=!1,L=null)}}else T=!1}var be;if(typeof A=="function")be=function(){A(ie)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,de=G.port2;G.port1.onmessage=ie,be=function(){de.postMessage(null)}}else be=function(){_(ie,0)};function U(z){L=z,T||(T=!0,be())}function ne(z,ce){I=_(function(){z(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){j||b||(j=!0,U(D))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return r(m)},t.unstable_next=function(z){switch(x){case 1:case 2:case 3:var ce=3;break;default:ce=x}var oe=x;x=ce;try{return z()}finally{x=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,ce){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var oe=x;x=z;try{return ce()}finally{x=oe}},t.unstable_scheduleCallback=function(z,ce,oe){var k=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?k+oe:k):oe=k,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=oe+$,z={id:p++,callback:ce,priorityLevel:z,startTime:oe,expirationTime:$,sortIndex:-1},oe>k?(z.sortIndex=oe,e(h,z),r(m)===null&&z===r(h)&&(C?(O(I),I=-1):C=!0,ne(N,oe-k))):(z.sortIndex=$,e(m,z),j||b||(j=!0,U(D))),z},t.unstable_shouldYield=we,t.unstable_wrapCallback=function(z){var ce=x;return function(){var oe=x;x=ce;try{return z.apply(this,arguments)}finally{x=oe}}}})(Tu)),Tu}var Dg;function K_(){return Dg||(Dg=1,ku.exports=G_()),ku.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function Y_(){if(Mg)return rr;Mg=1;var t=wc(),e=K_();function r(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(s,a){c(s,a),c(s+"Capture",a)}function c(s,a){for(o[s]=a,s=0;s<a.length;s++)i.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function x(s){return m.call(g,s)?!0:m.call(p,s)?!1:h.test(s)?g[s]=!0:(p[s]=!0,!1)}function b(s,a,d,f){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function j(s,a,d,f){if(a===null||typeof a>"u"||b(s,a,d,f))return!0;if(f)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function C(s,a,d,f,y,v,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=v,this.removeEmptyString=S}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){_[s]=new C(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];_[a]=new C(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){_[s]=new C(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){_[s]=new C(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){_[s]=new C(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){_[s]=new C(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){_[s]=new C(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){_[s]=new C(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){_[s]=new C(s,5,!1,s.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function A(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(O,A);_[a]=new C(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(O,A);_[a]=new C(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(O,A);_[a]=new C(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){_[s]=new C(s,1,!1,s.toLowerCase(),null,!1,!1)}),_.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){_[s]=new C(s,1,!1,s.toLowerCase(),null,!0,!0)});function E(s,a,d,f){var y=_.hasOwnProperty(a)?_[a]:null;(y!==null?y.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(j(a,d,y,f)&&(d=null),f||y===null?x(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):y.mustUseProperty?s[y.propertyName]=d===null?y.type===3?!1:"":d:(a=y.attributeName,f=y.attributeNamespace,d===null?s.removeAttribute(a):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,f?s.setAttributeNS(f,a,d):s.setAttribute(a,d))))}var N=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),T=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),we=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),z=Symbol.iterator;function ce(s){return s===null||typeof s!="object"?null:(s=z&&s[z]||s["@@iterator"],typeof s=="function"?s:null)}var oe=Object.assign,k;function $(s){if(k===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);k=a&&a[1]||""}return`
`+k+s}var ee=!1;function ue(s,a){if(!s||ee)return"";ee=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Z){var f=Z}Reflect.construct(s,[],a)}else{try{a.call()}catch(Z){f=Z}s.call(a.prototype)}else{try{throw Error()}catch(Z){f=Z}s()}}catch(Z){if(Z&&f&&typeof Z.stack=="string"){for(var y=Z.stack.split(`
`),v=f.stack.split(`
`),S=y.length-1,M=v.length-1;1<=S&&0<=M&&y[S]!==v[M];)M--;for(;1<=S&&0<=M;S--,M--)if(y[S]!==v[M]){if(S!==1||M!==1)do if(S--,M--,0>M||y[S]!==v[M]){var F=`
`+y[S].replace(" at new "," at ");return s.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",s.displayName)),F}while(1<=S&&0<=M);break}}}finally{ee=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?$(s):""}function xe(s){switch(s.tag){case 5:return $(s.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return s=ue(s.type,!1),s;case 11:return s=ue(s.type.render,!1),s;case 1:return s=ue(s.type,!0),s;default:return""}}function Ce(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case L:return"Fragment";case T:return"Portal";case J:return"Profiler";case I:return"StrictMode";case be:return"Suspense";case G:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case we:return(s.displayName||"Context")+".Consumer";case Q:return(s._context.displayName||"Context")+".Provider";case ie:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case de:return a=s.displayName||null,a!==null?a:Ce(s.type)||"Memo";case U:a=s._payload,s=s._init;try{return Ce(s(a))}catch{}}return null}function fe(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(a);case 8:return a===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ee(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function De(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function X(s){var a=De(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,v=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Y(s){s._valueTracker||(s._valueTracker=X(s))}function Ie(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),f="";return s&&(f=De(s)?s.checked?"true":"false":s.value),s=f,s!==d?(a.setValue(s),!0):!1}function _e(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function R(s,a){var d=a.checked;return oe({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function pe(s,a){var d=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;d=Ee(a.value!=null?a.value:d),s._wrapperState={initialChecked:f,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function se(s,a){a=a.checked,a!=null&&E(s,"checked",a,!1)}function B(s,a){se(s,a);var d=Ee(a.value),f=a.type;if(d!=null)f==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Ae(s,a.type,d):a.hasOwnProperty("defaultValue")&&Ae(s,a.type,Ee(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function ae(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function Ae(s,a,d){(a!=="number"||_e(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var te=Array.isArray;function je(s,a,d,f){if(s=s.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<s.length;d++)y=a.hasOwnProperty("$"+s[d].value),s[d].selected!==y&&(s[d].selected=y),y&&f&&(s[d].defaultSelected=!0)}else{for(d=""+Ee(d),a=null,y=0;y<s.length;y++){if(s[y].value===d){s[y].selected=!0,f&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function Le(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(r(91));return oe({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function tt(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(r(92));if(te(d)){if(1<d.length)throw Error(r(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:Ee(d)}}function wt(s,a){var d=Ee(a.value),f=Ee(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),f!=null&&(s.defaultValue=""+f)}function mt(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function $t(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?$t(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var We,or=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,f,y){MSApp.execUnsafeLocalFunction(function(){return s(a,d,f,y)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(We=We||document.createElement("div"),We.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=We.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Wr(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zc=["Webkit","ms","Moz","O"];Object.keys(ns).forEach(function(s){zc.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),ns[a]=ns[s]})});function So(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||ns.hasOwnProperty(s)&&ns[s]?(""+a).trim():a+"px"}function Eo(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var f=d.indexOf("--")===0,y=So(d,a[d],f);d==="float"&&(d="cssFloat"),f?s.setProperty(d,y):s[d]=y}}var qc=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qi(s,a){if(a){if(qc[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(r(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(r(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(r(61))}if(a.style!=null&&typeof a.style!="object")throw Error(r(62))}}function Ji(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wn=null;function Hn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Gn=null,is=null,Es=null;function Kn(s){if(s=ga(s)){if(typeof Gn!="function")throw Error(r(280));var a=s.stateNode;a&&(a=el(a),Gn(s.stateNode,s.type,a))}}function Po(s){is?Es?Es.push(s):Es=[s]:is=s}function ko(){if(is){var s=is,a=Es;if(Es=is=null,Kn(s),a)for(s=0;s<a.length;s++)Kn(a[s])}}function To(s,a){return s(a)}function Ao(){}var cn=!1;function Ro(s,a,d){if(cn)return s(a,d);cn=!0;try{return To(s,a,d)}finally{cn=!1,(is!==null||Es!==null)&&(Ao(),ko())}}function kr(s,a){var d=s.stateNode;if(d===null)return null;var f=el(d);if(f===null)return null;d=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(r(231,a,typeof d));return d}var Ps=!1;if(u)try{var dn={};Object.defineProperty(dn,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",dn,dn),window.removeEventListener("test",dn,dn)}catch{Ps=!1}function Wc(s,a,d,f,y,v,S,M,F){var Z=Array.prototype.slice.call(arguments,3);try{a.apply(d,Z)}catch(he){this.onError(he)}}var un=!1,Yn=null,P=!1,W=null,Ne={onError:function(s){un=!0,Yn=s}};function qe(s,a,d,f,y,v,S,M,F){un=!1,Yn=null,Wc.apply(Ne,arguments)}function Ye(s,a,d,f,y,v,S,M,F){if(qe.apply(this,arguments),un){if(un){var Z=Yn;un=!1,Yn=null}else throw Error(r(198));P||(P=!0,W=Z)}}function rt(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function Oo(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Zm(s){if(rt(s)!==s)throw Error(r(188))}function Xw(s){var a=s.alternate;if(!a){if(a=rt(s),a===null)throw Error(r(188));return a!==s?null:s}for(var d=s,f=a;;){var y=d.return;if(y===null)break;var v=y.alternate;if(v===null){if(f=y.return,f!==null){d=f;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===d)return Zm(y),s;if(v===f)return Zm(y),a;v=v.sibling}throw Error(r(188))}if(d.return!==f.return)d=y,f=v;else{for(var S=!1,M=y.child;M;){if(M===d){S=!0,d=y,f=v;break}if(M===f){S=!0,f=y,d=v;break}M=M.sibling}if(!S){for(M=v.child;M;){if(M===d){S=!0,d=v,f=y;break}if(M===f){S=!0,f=v,d=y;break}M=M.sibling}if(!S)throw Error(r(189))}}if(d.alternate!==f)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?s:a}function eh(s){return s=Xw(s),s!==null?th(s):null}function th(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=th(s);if(a!==null)return a;s=s.sibling}return null}var rh=e.unstable_scheduleCallback,sh=e.unstable_cancelCallback,Zw=e.unstable_shouldYield,ej=e.unstable_requestPaint,xt=e.unstable_now,tj=e.unstable_getCurrentPriorityLevel,Hc=e.unstable_ImmediatePriority,nh=e.unstable_UserBlockingPriority,Do=e.unstable_NormalPriority,rj=e.unstable_LowPriority,ih=e.unstable_IdlePriority,Mo=null,Hr=null;function sj(s){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(Mo,s,void 0,(s.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:aj,nj=Math.log,ij=Math.LN2;function aj(s){return s>>>=0,s===0?32:31-(nj(s)/ij|0)|0}var Io=64,Lo=4194304;function Xi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function $o(s,a){var d=s.pendingLanes;if(d===0)return 0;var f=0,y=s.suspendedLanes,v=s.pingedLanes,S=d&268435455;if(S!==0){var M=S&~y;M!==0?f=Xi(M):(v&=S,v!==0&&(f=Xi(v)))}else S=d&~y,S!==0?f=Xi(S):v!==0&&(f=Xi(v));if(f===0)return 0;if(a!==0&&a!==f&&(a&y)===0&&(y=f&-f,v=a&-a,y>=v||y===16&&(v&4194240)!==0))return a;if((f&4)!==0&&(f|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=f;0<a;)d=31-Tr(a),y=1<<d,f|=s[d],a&=~y;return f}function oj(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lj(s,a){for(var d=s.suspendedLanes,f=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes;0<v;){var S=31-Tr(v),M=1<<S,F=y[S];F===-1?((M&d)===0||(M&f)!==0)&&(y[S]=oj(M,a)):F<=a&&(s.expiredLanes|=M),v&=~M}}function Gc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ah(){var s=Io;return Io<<=1,(Io&4194240)===0&&(Io=64),s}function Kc(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function Zi(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-Tr(a),s[a]=d}function cj(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<d;){var y=31-Tr(d),v=1<<y;a[y]=0,f[y]=-1,s[y]=-1,d&=~v}}function Yc(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var f=31-Tr(d),y=1<<f;y&a|s[f]&a&&(s[f]|=a),d&=~y}}var et=0;function oh(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var lh,Qc,ch,dh,uh,Jc=!1,Fo=[],ks=null,Ts=null,As=null,ea=new Map,ta=new Map,Rs=[],dj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fh(s,a){switch(s){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":ea.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(a.pointerId)}}function ra(s,a,d,f,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:a,domEventName:d,eventSystemFlags:f,nativeEvent:v,targetContainers:[y]},a!==null&&(a=ga(a),a!==null&&Qc(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function uj(s,a,d,f,y){switch(a){case"focusin":return ks=ra(ks,s,a,d,f,y),!0;case"dragenter":return Ts=ra(Ts,s,a,d,f,y),!0;case"mouseover":return As=ra(As,s,a,d,f,y),!0;case"pointerover":var v=y.pointerId;return ea.set(v,ra(ea.get(v)||null,s,a,d,f,y)),!0;case"gotpointercapture":return v=y.pointerId,ta.set(v,ra(ta.get(v)||null,s,a,d,f,y)),!0}return!1}function mh(s){var a=fn(s.target);if(a!==null){var d=rt(a);if(d!==null){if(a=d.tag,a===13){if(a=Oo(d),a!==null){s.blockedOn=a,uh(s.priority,function(){ch(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Uo(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=Zc(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var f=new d.constructor(d.type,d);Wn=f,d.target.dispatchEvent(f),Wn=null}else return a=ga(d),a!==null&&Qc(a),s.blockedOn=d,!1;a.shift()}return!0}function hh(s,a,d){Uo(s)&&d.delete(a)}function fj(){Jc=!1,ks!==null&&Uo(ks)&&(ks=null),Ts!==null&&Uo(Ts)&&(Ts=null),As!==null&&Uo(As)&&(As=null),ea.forEach(hh),ta.forEach(hh)}function sa(s,a){s.blockedOn===a&&(s.blockedOn=null,Jc||(Jc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,fj)))}function na(s){function a(y){return sa(y,s)}if(0<Fo.length){sa(Fo[0],s);for(var d=1;d<Fo.length;d++){var f=Fo[d];f.blockedOn===s&&(f.blockedOn=null)}}for(ks!==null&&sa(ks,s),Ts!==null&&sa(Ts,s),As!==null&&sa(As,s),ea.forEach(a),ta.forEach(a),d=0;d<Rs.length;d++)f=Rs[d],f.blockedOn===s&&(f.blockedOn=null);for(;0<Rs.length&&(d=Rs[0],d.blockedOn===null);)mh(d),d.blockedOn===null&&Rs.shift()}var Qn=N.ReactCurrentBatchConfig,Vo=!0;function mj(s,a,d,f){var y=et,v=Qn.transition;Qn.transition=null;try{et=1,Xc(s,a,d,f)}finally{et=y,Qn.transition=v}}function hj(s,a,d,f){var y=et,v=Qn.transition;Qn.transition=null;try{et=4,Xc(s,a,d,f)}finally{et=y,Qn.transition=v}}function Xc(s,a,d,f){if(Vo){var y=Zc(s,a,d,f);if(y===null)gd(s,a,f,Bo,d),fh(s,f);else if(uj(y,s,a,d,f))f.stopPropagation();else if(fh(s,f),a&4&&-1<dj.indexOf(s)){for(;y!==null;){var v=ga(y);if(v!==null&&lh(v),v=Zc(s,a,d,f),v===null&&gd(s,a,f,Bo,d),v===y)break;y=v}y!==null&&f.stopPropagation()}else gd(s,a,f,null,d)}}var Bo=null;function Zc(s,a,d,f){if(Bo=null,s=Hn(f),s=fn(s),s!==null)if(a=rt(s),a===null)s=null;else if(d=a.tag,d===13){if(s=Oo(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Bo=s,null}function ph(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tj()){case Hc:return 1;case nh:return 4;case Do:case rj:return 16;case ih:return 536870912;default:return 16}default:return 16}}var Os=null,ed=null,zo=null;function gh(){if(zo)return zo;var s,a=ed,d=a.length,f,y="value"in Os?Os.value:Os.textContent,v=y.length;for(s=0;s<d&&a[s]===y[s];s++);var S=d-s;for(f=1;f<=S&&a[d-f]===y[v-f];f++);return zo=y.slice(s,1<f?1-f:void 0)}function qo(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Wo(){return!0}function yh(){return!1}function lr(s){function a(d,f,y,v,S){this._reactName=d,this._targetInst=y,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(d=s[M],this[M]=d?d(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Wo:yh,this.isPropagationStopped=yh,this}return oe(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),a}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=lr(Jn),ia=oe({},Jn,{view:0,detail:0}),pj=lr(ia),rd,sd,aa,Ho=oe({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:id,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==aa&&(aa&&s.type==="mousemove"?(rd=s.screenX-aa.screenX,sd=s.screenY-aa.screenY):sd=rd=0,aa=s),rd)},movementY:function(s){return"movementY"in s?s.movementY:sd}}),xh=lr(Ho),gj=oe({},Ho,{dataTransfer:0}),yj=lr(gj),xj=oe({},ia,{relatedTarget:0}),nd=lr(xj),vj=oe({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),bj=lr(vj),wj=oe({},Jn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),jj=lr(wj),_j=oe({},Jn,{data:0}),vh=lr(_j),Cj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ej(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Sj[s])?!!a[s]:!1}function id(){return Ej}var Pj=oe({},ia,{key:function(s){if(s.key){var a=Cj[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=qo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nj[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:id,charCode:function(s){return s.type==="keypress"?qo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?qo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),kj=lr(Pj),Tj=oe({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bh=lr(Tj),Aj=oe({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:id}),Rj=lr(Aj),Oj=oe({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dj=lr(Oj),Mj=oe({},Ho,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ij=lr(Mj),Lj=[9,13,27,32],ad=u&&"CompositionEvent"in window,oa=null;u&&"documentMode"in document&&(oa=document.documentMode);var $j=u&&"TextEvent"in window&&!oa,wh=u&&(!ad||oa&&8<oa&&11>=oa),jh=" ",_h=!1;function Ch(s,a){switch(s){case"keyup":return Lj.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nh(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xn=!1;function Fj(s,a){switch(s){case"compositionend":return Nh(a);case"keypress":return a.which!==32?null:(_h=!0,jh);case"textInput":return s=a.data,s===jh&&_h?null:s;default:return null}}function Uj(s,a){if(Xn)return s==="compositionend"||!ad&&Ch(s,a)?(s=gh(),zo=ed=Os=null,Xn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return wh&&a.locale!=="ko"?null:a.data;default:return null}}var Vj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sh(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Vj[s.type]:a==="textarea"}function Eh(s,a,d,f){Po(f),a=Jo(a,"onChange"),0<a.length&&(d=new td("onChange","change",null,d,f),s.push({event:d,listeners:a}))}var la=null,ca=null;function Bj(s){Wh(s,0)}function Go(s){var a=si(s);if(Ie(a))return s}function zj(s,a){if(s==="change")return a}var Ph=!1;if(u){var od;if(u){var ld="oninput"in document;if(!ld){var kh=document.createElement("div");kh.setAttribute("oninput","return;"),ld=typeof kh.oninput=="function"}od=ld}else od=!1;Ph=od&&(!document.documentMode||9<document.documentMode)}function Th(){la&&(la.detachEvent("onpropertychange",Ah),ca=la=null)}function Ah(s){if(s.propertyName==="value"&&Go(ca)){var a=[];Eh(a,ca,s,Hn(s)),Ro(Bj,a)}}function qj(s,a,d){s==="focusin"?(Th(),la=a,ca=d,la.attachEvent("onpropertychange",Ah)):s==="focusout"&&Th()}function Wj(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Go(ca)}function Hj(s,a){if(s==="click")return Go(a)}function Gj(s,a){if(s==="input"||s==="change")return Go(a)}function Kj(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Ar=typeof Object.is=="function"?Object.is:Kj;function da(s,a){if(Ar(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),f=Object.keys(a);if(d.length!==f.length)return!1;for(f=0;f<d.length;f++){var y=d[f];if(!m.call(a,y)||!Ar(s[y],a[y]))return!1}return!0}function Rh(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Oh(s,a){var d=Rh(s);s=0;for(var f;d;){if(d.nodeType===3){if(f=s+d.textContent.length,s<=a&&f>=a)return{node:d,offset:a-s};s=f}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Rh(d)}}function Dh(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Dh(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Mh(){for(var s=window,a=_e();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=_e(s.document)}return a}function cd(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function Yj(s){var a=Mh(),d=s.focusedElem,f=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&Dh(d.ownerDocument.documentElement,d)){if(f!==null&&cd(d)){if(a=f.start,s=f.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var y=d.textContent.length,v=Math.min(f.start,y);f=f.end===void 0?v:Math.min(f.end,y),!s.extend&&v>f&&(y=f,f=v,v=y),y=Oh(d,v);var S=Oh(d,f);y&&S&&(s.rangeCount!==1||s.anchorNode!==y.node||s.anchorOffset!==y.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),s.removeAllRanges(),v>f?(s.addRange(a),s.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Qj=u&&"documentMode"in document&&11>=document.documentMode,Zn=null,dd=null,ua=null,ud=!1;function Ih(s,a,d){var f=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ud||Zn==null||Zn!==_e(f)||(f=Zn,"selectionStart"in f&&cd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ua&&da(ua,f)||(ua=f,f=Jo(dd,"onSelect"),0<f.length&&(a=new td("onSelect","select",null,a,d),s.push({event:a,listeners:f}),a.target=Zn)))}function Ko(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var ei={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},fd={},Lh={};u&&(Lh=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function Yo(s){if(fd[s])return fd[s];if(!ei[s])return s;var a=ei[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in Lh)return fd[s]=a[d];return s}var $h=Yo("animationend"),Fh=Yo("animationiteration"),Uh=Yo("animationstart"),Vh=Yo("transitionend"),Bh=new Map,zh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(s,a){Bh.set(s,a),l(a,[s])}for(var md=0;md<zh.length;md++){var hd=zh[md],Jj=hd.toLowerCase(),Xj=hd[0].toUpperCase()+hd.slice(1);Ds(Jj,"on"+Xj)}Ds($h,"onAnimationEnd"),Ds(Fh,"onAnimationIteration"),Ds(Uh,"onAnimationStart"),Ds("dblclick","onDoubleClick"),Ds("focusin","onFocus"),Ds("focusout","onBlur"),Ds(Vh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zj=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function qh(s,a,d){var f=s.type||"unknown-event";s.currentTarget=d,Ye(f,a,void 0,s),s.currentTarget=null}function Wh(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var f=s[d],y=f.event;f=f.listeners;e:{var v=void 0;if(a)for(var S=f.length-1;0<=S;S--){var M=f[S],F=M.instance,Z=M.currentTarget;if(M=M.listener,F!==v&&y.isPropagationStopped())break e;qh(y,M,Z),v=F}else for(S=0;S<f.length;S++){if(M=f[S],F=M.instance,Z=M.currentTarget,M=M.listener,F!==v&&y.isPropagationStopped())break e;qh(y,M,Z),v=F}}}if(P)throw s=W,P=!1,W=null,s}function lt(s,a){var d=a[jd];d===void 0&&(d=a[jd]=new Set);var f=s+"__bubble";d.has(f)||(Hh(a,s,2,!1),d.add(f))}function pd(s,a,d){var f=0;a&&(f|=4),Hh(d,s,f,a)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function ma(s){if(!s[Qo]){s[Qo]=!0,i.forEach(function(d){d!=="selectionchange"&&(Zj.has(d)||pd(d,!1,s),pd(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Qo]||(a[Qo]=!0,pd("selectionchange",!1,a))}}function Hh(s,a,d,f){switch(ph(a)){case 1:var y=mj;break;case 4:y=hj;break;default:y=Xc}d=y.bind(null,a,d,s),y=void 0,!Ps||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),f?y!==void 0?s.addEventListener(a,d,{capture:!0,passive:y}):s.addEventListener(a,d,!0):y!==void 0?s.addEventListener(a,d,{passive:y}):s.addEventListener(a,d,!1)}function gd(s,a,d,f,y){var v=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var M=f.stateNode.containerInfo;if(M===y||M.nodeType===8&&M.parentNode===y)break;if(S===4)for(S=f.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===y||F.nodeType===8&&F.parentNode===y))return;S=S.return}for(;M!==null;){if(S=fn(M),S===null)return;if(F=S.tag,F===5||F===6){f=v=S;continue e}M=M.parentNode}}f=f.return}Ro(function(){var Z=v,he=Hn(d),ge=[];e:{var me=Bh.get(s);if(me!==void 0){var Pe=td,Re=s;switch(s){case"keypress":if(qo(d)===0)break e;case"keydown":case"keyup":Pe=kj;break;case"focusin":Re="focus",Pe=nd;break;case"focusout":Re="blur",Pe=nd;break;case"beforeblur":case"afterblur":Pe=nd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=xh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=yj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=Rj;break;case $h:case Fh:case Uh:Pe=bj;break;case Vh:Pe=Dj;break;case"scroll":Pe=pj;break;case"wheel":Pe=Ij;break;case"copy":case"cut":case"paste":Pe=jj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=bh}var Oe=(a&4)!==0,vt=!Oe&&s==="scroll",H=Oe?me!==null?me+"Capture":null:me;Oe=[];for(var V=Z,K;V!==null;){K=V;var ye=K.stateNode;if(K.tag===5&&ye!==null&&(K=ye,H!==null&&(ye=kr(V,H),ye!=null&&Oe.push(ha(V,ye,K)))),vt)break;V=V.return}0<Oe.length&&(me=new Pe(me,Re,null,d,he),ge.push({event:me,listeners:Oe}))}}if((a&7)===0){e:{if(me=s==="mouseover"||s==="pointerover",Pe=s==="mouseout"||s==="pointerout",me&&d!==Wn&&(Re=d.relatedTarget||d.fromElement)&&(fn(Re)||Re[as]))break e;if((Pe||me)&&(me=he.window===he?he:(me=he.ownerDocument)?me.defaultView||me.parentWindow:window,Pe?(Re=d.relatedTarget||d.toElement,Pe=Z,Re=Re?fn(Re):null,Re!==null&&(vt=rt(Re),Re!==vt||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(Pe=null,Re=Z),Pe!==Re)){if(Oe=xh,ye="onMouseLeave",H="onMouseEnter",V="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=bh,ye="onPointerLeave",H="onPointerEnter",V="pointer"),vt=Pe==null?me:si(Pe),K=Re==null?me:si(Re),me=new Oe(ye,V+"leave",Pe,d,he),me.target=vt,me.relatedTarget=K,ye=null,fn(he)===Z&&(Oe=new Oe(H,V+"enter",Re,d,he),Oe.target=K,Oe.relatedTarget=vt,ye=Oe),vt=ye,Pe&&Re)t:{for(Oe=Pe,H=Re,V=0,K=Oe;K;K=ti(K))V++;for(K=0,ye=H;ye;ye=ti(ye))K++;for(;0<V-K;)Oe=ti(Oe),V--;for(;0<K-V;)H=ti(H),K--;for(;V--;){if(Oe===H||H!==null&&Oe===H.alternate)break t;Oe=ti(Oe),H=ti(H)}Oe=null}else Oe=null;Pe!==null&&Gh(ge,me,Pe,Oe,!1),Re!==null&&vt!==null&&Gh(ge,vt,Re,Oe,!0)}}e:{if(me=Z?si(Z):window,Pe=me.nodeName&&me.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&me.type==="file")var Me=zj;else if(Sh(me))if(Ph)Me=Gj;else{Me=Wj;var $e=qj}else(Pe=me.nodeName)&&Pe.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(Me=Hj);if(Me&&(Me=Me(s,Z))){Eh(ge,Me,d,he);break e}$e&&$e(s,me,Z),s==="focusout"&&($e=me._wrapperState)&&$e.controlled&&me.type==="number"&&Ae(me,"number",me.value)}switch($e=Z?si(Z):window,s){case"focusin":(Sh($e)||$e.contentEditable==="true")&&(Zn=$e,dd=Z,ua=null);break;case"focusout":ua=dd=Zn=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,Ih(ge,d,he);break;case"selectionchange":if(Qj)break;case"keydown":case"keyup":Ih(ge,d,he)}var Fe;if(ad)e:{switch(s){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Xn?Ch(s,d)&&(Ve="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Ve="onCompositionStart");Ve&&(wh&&d.locale!=="ko"&&(Xn||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Xn&&(Fe=gh()):(Os=he,ed="value"in Os?Os.value:Os.textContent,Xn=!0)),$e=Jo(Z,Ve),0<$e.length&&(Ve=new vh(Ve,s,null,d,he),ge.push({event:Ve,listeners:$e}),Fe?Ve.data=Fe:(Fe=Nh(d),Fe!==null&&(Ve.data=Fe)))),(Fe=$j?Fj(s,d):Uj(s,d))&&(Z=Jo(Z,"onBeforeInput"),0<Z.length&&(he=new vh("onBeforeInput","beforeinput",null,d,he),ge.push({event:he,listeners:Z}),he.data=Fe))}Wh(ge,a)})}function ha(s,a,d){return{instance:s,listener:a,currentTarget:d}}function Jo(s,a){for(var d=a+"Capture",f=[];s!==null;){var y=s,v=y.stateNode;y.tag===5&&v!==null&&(y=v,v=kr(s,d),v!=null&&f.unshift(ha(s,v,y)),v=kr(s,a),v!=null&&f.push(ha(s,v,y))),s=s.return}return f}function ti(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Gh(s,a,d,f,y){for(var v=a._reactName,S=[];d!==null&&d!==f;){var M=d,F=M.alternate,Z=M.stateNode;if(F!==null&&F===f)break;M.tag===5&&Z!==null&&(M=Z,y?(F=kr(d,v),F!=null&&S.unshift(ha(d,F,M))):y||(F=kr(d,v),F!=null&&S.push(ha(d,F,M)))),d=d.return}S.length!==0&&s.push({event:a,listeners:S})}var e_=/\r\n?/g,t_=/\u0000|\uFFFD/g;function Kh(s){return(typeof s=="string"?s:""+s).replace(e_,`
`).replace(t_,"")}function Xo(s,a,d){if(a=Kh(a),Kh(s)!==a&&d)throw Error(r(425))}function Zo(){}var yd=null,xd=null;function vd(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var bd=typeof setTimeout=="function"?setTimeout:void 0,r_=typeof clearTimeout=="function"?clearTimeout:void 0,Yh=typeof Promise=="function"?Promise:void 0,s_=typeof queueMicrotask=="function"?queueMicrotask:typeof Yh<"u"?function(s){return Yh.resolve(null).then(s).catch(n_)}:bd;function n_(s){setTimeout(function(){throw s})}function wd(s,a){var d=a,f=0;do{var y=d.nextSibling;if(s.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(f===0){s.removeChild(y),na(a);return}f--}else d!=="$"&&d!=="$?"&&d!=="$!"||f++;d=y}while(d);na(a)}function Ms(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Qh(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var ri=Math.random().toString(36).slice(2),Gr="__reactFiber$"+ri,pa="__reactProps$"+ri,as="__reactContainer$"+ri,jd="__reactEvents$"+ri,i_="__reactListeners$"+ri,a_="__reactHandles$"+ri;function fn(s){var a=s[Gr];if(a)return a;for(var d=s.parentNode;d;){if(a=d[as]||d[Gr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=Qh(s);s!==null;){if(d=s[Gr])return d;s=Qh(s)}return a}s=d,d=s.parentNode}return null}function ga(s){return s=s[Gr]||s[as],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function si(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(r(33))}function el(s){return s[pa]||null}var _d=[],ni=-1;function Is(s){return{current:s}}function ct(s){0>ni||(s.current=_d[ni],_d[ni]=null,ni--)}function it(s,a){ni++,_d[ni]=s.current,s.current=a}var Ls={},Ft=Is(Ls),Jt=Is(!1),mn=Ls;function ii(s,a){var d=s.type.contextTypes;if(!d)return Ls;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var y={},v;for(v in d)y[v]=a[v];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=y),y}function Xt(s){return s=s.childContextTypes,s!=null}function tl(){ct(Jt),ct(Ft)}function Jh(s,a,d){if(Ft.current!==Ls)throw Error(r(168));it(Ft,a),it(Jt,d)}function Xh(s,a,d){var f=s.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return d;f=f.getChildContext();for(var y in f)if(!(y in a))throw Error(r(108,fe(s)||"Unknown",y));return oe({},d,f)}function rl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ls,mn=Ft.current,it(Ft,s),it(Jt,Jt.current),!0}function Zh(s,a,d){var f=s.stateNode;if(!f)throw Error(r(169));d?(s=Xh(s,a,mn),f.__reactInternalMemoizedMergedChildContext=s,ct(Jt),ct(Ft),it(Ft,s)):ct(Jt),it(Jt,d)}var os=null,sl=!1,Cd=!1;function ep(s){os===null?os=[s]:os.push(s)}function o_(s){sl=!0,ep(s)}function $s(){if(!Cd&&os!==null){Cd=!0;var s=0,a=et;try{var d=os;for(et=1;s<d.length;s++){var f=d[s];do f=f(!0);while(f!==null)}os=null,sl=!1}catch(y){throw os!==null&&(os=os.slice(s+1)),rh(Hc,$s),y}finally{et=a,Cd=!1}}return null}var ai=[],oi=0,nl=null,il=0,gr=[],yr=0,hn=null,ls=1,cs="";function pn(s,a){ai[oi++]=il,ai[oi++]=nl,nl=s,il=a}function tp(s,a,d){gr[yr++]=ls,gr[yr++]=cs,gr[yr++]=hn,hn=s;var f=ls;s=cs;var y=32-Tr(f)-1;f&=~(1<<y),d+=1;var v=32-Tr(a)+y;if(30<v){var S=y-y%5;v=(f&(1<<S)-1).toString(32),f>>=S,y-=S,ls=1<<32-Tr(a)+y|d<<y|f,cs=v+s}else ls=1<<v|d<<y|f,cs=s}function Nd(s){s.return!==null&&(pn(s,1),tp(s,1,0))}function Sd(s){for(;s===nl;)nl=ai[--oi],ai[oi]=null,il=ai[--oi],ai[oi]=null;for(;s===hn;)hn=gr[--yr],gr[yr]=null,cs=gr[--yr],gr[yr]=null,ls=gr[--yr],gr[yr]=null}var cr=null,dr=null,ft=!1,Rr=null;function rp(s,a){var d=wr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function sp(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,cr=s,dr=Ms(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,cr=s,dr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=hn!==null?{id:ls,overflow:cs}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=wr(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,cr=s,dr=null,!0):!1;default:return!1}}function Ed(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Pd(s){if(ft){var a=dr;if(a){var d=a;if(!sp(s,a)){if(Ed(s))throw Error(r(418));a=Ms(d.nextSibling);var f=cr;a&&sp(s,a)?rp(f,d):(s.flags=s.flags&-4097|2,ft=!1,cr=s)}}else{if(Ed(s))throw Error(r(418));s.flags=s.flags&-4097|2,ft=!1,cr=s}}}function np(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;cr=s}function al(s){if(s!==cr)return!1;if(!ft)return np(s),ft=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!vd(s.type,s.memoizedProps)),a&&(a=dr)){if(Ed(s))throw ip(),Error(r(418));for(;a;)rp(s,a),a=Ms(a.nextSibling)}if(np(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){dr=Ms(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}dr=null}}else dr=cr?Ms(s.stateNode.nextSibling):null;return!0}function ip(){for(var s=dr;s;)s=Ms(s.nextSibling)}function li(){dr=cr=null,ft=!1}function kd(s){Rr===null?Rr=[s]:Rr.push(s)}var l_=N.ReactCurrentBatchConfig;function ya(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(r(309));var f=d.stateNode}if(!f)throw Error(r(147,s));var y=f,v=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(S){var M=y.refs;S===null?delete M[v]:M[v]=S},a._stringRef=v,a)}if(typeof s!="string")throw Error(r(284));if(!d._owner)throw Error(r(290,s))}return s}function ol(s,a){throw s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function ap(s){var a=s._init;return a(s._payload)}function op(s){function a(H,V){if(s){var K=H.deletions;K===null?(H.deletions=[V],H.flags|=16):K.push(V)}}function d(H,V){if(!s)return null;for(;V!==null;)a(H,V),V=V.sibling;return null}function f(H,V){for(H=new Map;V!==null;)V.key!==null?H.set(V.key,V):H.set(V.index,V),V=V.sibling;return H}function y(H,V){return H=Hs(H,V),H.index=0,H.sibling=null,H}function v(H,V,K){return H.index=K,s?(K=H.alternate,K!==null?(K=K.index,K<V?(H.flags|=2,V):K):(H.flags|=2,V)):(H.flags|=1048576,V)}function S(H){return s&&H.alternate===null&&(H.flags|=2),H}function M(H,V,K,ye){return V===null||V.tag!==6?(V=bu(K,H.mode,ye),V.return=H,V):(V=y(V,K),V.return=H,V)}function F(H,V,K,ye){var Me=K.type;return Me===L?he(H,V,K.props.children,ye,K.key):V!==null&&(V.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===U&&ap(Me)===V.type)?(ye=y(V,K.props),ye.ref=ya(H,V,K),ye.return=H,ye):(ye=Al(K.type,K.key,K.props,null,H.mode,ye),ye.ref=ya(H,V,K),ye.return=H,ye)}function Z(H,V,K,ye){return V===null||V.tag!==4||V.stateNode.containerInfo!==K.containerInfo||V.stateNode.implementation!==K.implementation?(V=wu(K,H.mode,ye),V.return=H,V):(V=y(V,K.children||[]),V.return=H,V)}function he(H,V,K,ye,Me){return V===null||V.tag!==7?(V=_n(K,H.mode,ye,Me),V.return=H,V):(V=y(V,K),V.return=H,V)}function ge(H,V,K){if(typeof V=="string"&&V!==""||typeof V=="number")return V=bu(""+V,H.mode,K),V.return=H,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case D:return K=Al(V.type,V.key,V.props,null,H.mode,K),K.ref=ya(H,null,V),K.return=H,K;case T:return V=wu(V,H.mode,K),V.return=H,V;case U:var ye=V._init;return ge(H,ye(V._payload),K)}if(te(V)||ce(V))return V=_n(V,H.mode,K,null),V.return=H,V;ol(H,V)}return null}function me(H,V,K,ye){var Me=V!==null?V.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Me!==null?null:M(H,V,""+K,ye);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case D:return K.key===Me?F(H,V,K,ye):null;case T:return K.key===Me?Z(H,V,K,ye):null;case U:return Me=K._init,me(H,V,Me(K._payload),ye)}if(te(K)||ce(K))return Me!==null?null:he(H,V,K,ye,null);ol(H,K)}return null}function Pe(H,V,K,ye,Me){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return H=H.get(K)||null,M(V,H,""+ye,Me);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case D:return H=H.get(ye.key===null?K:ye.key)||null,F(V,H,ye,Me);case T:return H=H.get(ye.key===null?K:ye.key)||null,Z(V,H,ye,Me);case U:var $e=ye._init;return Pe(H,V,K,$e(ye._payload),Me)}if(te(ye)||ce(ye))return H=H.get(K)||null,he(V,H,ye,Me,null);ol(V,ye)}return null}function Re(H,V,K,ye){for(var Me=null,$e=null,Fe=V,Ve=V=0,Rt=null;Fe!==null&&Ve<K.length;Ve++){Fe.index>Ve?(Rt=Fe,Fe=null):Rt=Fe.sibling;var Xe=me(H,Fe,K[Ve],ye);if(Xe===null){Fe===null&&(Fe=Rt);break}s&&Fe&&Xe.alternate===null&&a(H,Fe),V=v(Xe,V,Ve),$e===null?Me=Xe:$e.sibling=Xe,$e=Xe,Fe=Rt}if(Ve===K.length)return d(H,Fe),ft&&pn(H,Ve),Me;if(Fe===null){for(;Ve<K.length;Ve++)Fe=ge(H,K[Ve],ye),Fe!==null&&(V=v(Fe,V,Ve),$e===null?Me=Fe:$e.sibling=Fe,$e=Fe);return ft&&pn(H,Ve),Me}for(Fe=f(H,Fe);Ve<K.length;Ve++)Rt=Pe(Fe,H,Ve,K[Ve],ye),Rt!==null&&(s&&Rt.alternate!==null&&Fe.delete(Rt.key===null?Ve:Rt.key),V=v(Rt,V,Ve),$e===null?Me=Rt:$e.sibling=Rt,$e=Rt);return s&&Fe.forEach(function(Gs){return a(H,Gs)}),ft&&pn(H,Ve),Me}function Oe(H,V,K,ye){var Me=ce(K);if(typeof Me!="function")throw Error(r(150));if(K=Me.call(K),K==null)throw Error(r(151));for(var $e=Me=null,Fe=V,Ve=V=0,Rt=null,Xe=K.next();Fe!==null&&!Xe.done;Ve++,Xe=K.next()){Fe.index>Ve?(Rt=Fe,Fe=null):Rt=Fe.sibling;var Gs=me(H,Fe,Xe.value,ye);if(Gs===null){Fe===null&&(Fe=Rt);break}s&&Fe&&Gs.alternate===null&&a(H,Fe),V=v(Gs,V,Ve),$e===null?Me=Gs:$e.sibling=Gs,$e=Gs,Fe=Rt}if(Xe.done)return d(H,Fe),ft&&pn(H,Ve),Me;if(Fe===null){for(;!Xe.done;Ve++,Xe=K.next())Xe=ge(H,Xe.value,ye),Xe!==null&&(V=v(Xe,V,Ve),$e===null?Me=Xe:$e.sibling=Xe,$e=Xe);return ft&&pn(H,Ve),Me}for(Fe=f(H,Fe);!Xe.done;Ve++,Xe=K.next())Xe=Pe(Fe,H,Ve,Xe.value,ye),Xe!==null&&(s&&Xe.alternate!==null&&Fe.delete(Xe.key===null?Ve:Xe.key),V=v(Xe,V,Ve),$e===null?Me=Xe:$e.sibling=Xe,$e=Xe);return s&&Fe.forEach(function(V_){return a(H,V_)}),ft&&pn(H,Ve),Me}function vt(H,V,K,ye){if(typeof K=="object"&&K!==null&&K.type===L&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case D:e:{for(var Me=K.key,$e=V;$e!==null;){if($e.key===Me){if(Me=K.type,Me===L){if($e.tag===7){d(H,$e.sibling),V=y($e,K.props.children),V.return=H,H=V;break e}}else if($e.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===U&&ap(Me)===$e.type){d(H,$e.sibling),V=y($e,K.props),V.ref=ya(H,$e,K),V.return=H,H=V;break e}d(H,$e);break}else a(H,$e);$e=$e.sibling}K.type===L?(V=_n(K.props.children,H.mode,ye,K.key),V.return=H,H=V):(ye=Al(K.type,K.key,K.props,null,H.mode,ye),ye.ref=ya(H,V,K),ye.return=H,H=ye)}return S(H);case T:e:{for($e=K.key;V!==null;){if(V.key===$e)if(V.tag===4&&V.stateNode.containerInfo===K.containerInfo&&V.stateNode.implementation===K.implementation){d(H,V.sibling),V=y(V,K.children||[]),V.return=H,H=V;break e}else{d(H,V);break}else a(H,V);V=V.sibling}V=wu(K,H.mode,ye),V.return=H,H=V}return S(H);case U:return $e=K._init,vt(H,V,$e(K._payload),ye)}if(te(K))return Re(H,V,K,ye);if(ce(K))return Oe(H,V,K,ye);ol(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,V!==null&&V.tag===6?(d(H,V.sibling),V=y(V,K),V.return=H,H=V):(d(H,V),V=bu(K,H.mode,ye),V.return=H,H=V),S(H)):d(H,V)}return vt}var ci=op(!0),lp=op(!1),ll=Is(null),cl=null,di=null,Td=null;function Ad(){Td=di=cl=null}function Rd(s){var a=ll.current;ct(ll),s._currentValue=a}function Od(s,a,d){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===d)break;s=s.return}}function ui(s,a){cl=s,Td=di=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Zt=!0),s.firstContext=null)}function xr(s){var a=s._currentValue;if(Td!==s)if(s={context:s,memoizedValue:a,next:null},di===null){if(cl===null)throw Error(r(308));di=s,cl.dependencies={lanes:0,firstContext:s}}else di=di.next=s;return a}var gn=null;function Dd(s){gn===null?gn=[s]:gn.push(s)}function cp(s,a,d,f){var y=a.interleaved;return y===null?(d.next=d,Dd(a)):(d.next=y.next,y.next=d),a.interleaved=d,ds(s,f)}function ds(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var Fs=!1;function Md(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dp(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function us(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Us(s,a,d){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Qe&2)!==0){var y=f.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),f.pending=a,ds(s,d)}return y=f.interleaved,y===null?(a.next=a,Dd(f)):(a.next=y.next,y.next=a),f.interleaved=a,ds(s,d)}function dl(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var f=a.lanes;f&=s.pendingLanes,d|=f,a.lanes=d,Yc(s,d)}}function up(s,a){var d=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,d===f)){var y=null,v=null;if(d=d.firstBaseUpdate,d!==null){do{var S={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};v===null?y=v=S:v=v.next=S,d=d.next}while(d!==null);v===null?y=v=a:v=v.next=a}else y=v=a;d={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:f.shared,effects:f.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function ul(s,a,d,f){var y=s.updateQueue;Fs=!1;var v=y.firstBaseUpdate,S=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var F=M,Z=F.next;F.next=null,S===null?v=Z:S.next=Z,S=F;var he=s.alternate;he!==null&&(he=he.updateQueue,M=he.lastBaseUpdate,M!==S&&(M===null?he.firstBaseUpdate=Z:M.next=Z,he.lastBaseUpdate=F))}if(v!==null){var ge=y.baseState;S=0,he=Z=F=null,M=v;do{var me=M.lane,Pe=M.eventTime;if((f&me)===me){he!==null&&(he=he.next={eventTime:Pe,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var Re=s,Oe=M;switch(me=a,Pe=d,Oe.tag){case 1:if(Re=Oe.payload,typeof Re=="function"){ge=Re.call(Pe,ge,me);break e}ge=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Oe.payload,me=typeof Re=="function"?Re.call(Pe,ge,me):Re,me==null)break e;ge=oe({},ge,me);break e;case 2:Fs=!0}}M.callback!==null&&M.lane!==0&&(s.flags|=64,me=y.effects,me===null?y.effects=[M]:me.push(M))}else Pe={eventTime:Pe,lane:me,tag:M.tag,payload:M.payload,callback:M.callback,next:null},he===null?(Z=he=Pe,F=ge):he=he.next=Pe,S|=me;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;me=M,M=me.next,me.next=null,y.lastBaseUpdate=me,y.shared.pending=null}}while(!0);if(he===null&&(F=ge),y.baseState=F,y.firstBaseUpdate=Z,y.lastBaseUpdate=he,a=y.shared.interleaved,a!==null){y=a;do S|=y.lane,y=y.next;while(y!==a)}else v===null&&(y.shared.lanes=0);vn|=S,s.lanes=S,s.memoizedState=ge}}function fp(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var f=s[a],y=f.callback;if(y!==null){if(f.callback=null,f=d,typeof y!="function")throw Error(r(191,y));y.call(f)}}}var xa={},Kr=Is(xa),va=Is(xa),ba=Is(xa);function yn(s){if(s===xa)throw Error(r(174));return s}function Id(s,a){switch(it(ba,a),it(va,s),it(Kr,xa),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:nt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=nt(a,s)}ct(Kr),it(Kr,a)}function fi(){ct(Kr),ct(va),ct(ba)}function mp(s){yn(ba.current);var a=yn(Kr.current),d=nt(a,s.type);a!==d&&(it(va,s),it(Kr,d))}function Ld(s){va.current===s&&(ct(Kr),ct(va))}var ht=Is(0);function fl(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var $d=[];function Fd(){for(var s=0;s<$d.length;s++)$d[s]._workInProgressVersionPrimary=null;$d.length=0}var ml=N.ReactCurrentDispatcher,Ud=N.ReactCurrentBatchConfig,xn=0,pt=null,Nt=null,Tt=null,hl=!1,wa=!1,ja=0,c_=0;function Ut(){throw Error(r(321))}function Vd(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!Ar(s[d],a[d]))return!1;return!0}function Bd(s,a,d,f,y,v){if(xn=v,pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ml.current=s===null||s.memoizedState===null?m_:h_,s=d(f,y),wa){v=0;do{if(wa=!1,ja=0,25<=v)throw Error(r(301));v+=1,Tt=Nt=null,a.updateQueue=null,ml.current=p_,s=d(f,y)}while(wa)}if(ml.current=yl,a=Nt!==null&&Nt.next!==null,xn=0,Tt=Nt=pt=null,hl=!1,a)throw Error(r(300));return s}function zd(){var s=ja!==0;return ja=0,s}function Yr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?pt.memoizedState=Tt=s:Tt=Tt.next=s,Tt}function vr(){if(Nt===null){var s=pt.alternate;s=s!==null?s.memoizedState:null}else s=Nt.next;var a=Tt===null?pt.memoizedState:Tt.next;if(a!==null)Tt=a,Nt=s;else{if(s===null)throw Error(r(310));Nt=s,s={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Tt===null?pt.memoizedState=Tt=s:Tt=Tt.next=s}return Tt}function _a(s,a){return typeof a=="function"?a(s):a}function qd(s){var a=vr(),d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var f=Nt,y=f.baseQueue,v=d.pending;if(v!==null){if(y!==null){var S=y.next;y.next=v.next,v.next=S}f.baseQueue=y=v,d.pending=null}if(y!==null){v=y.next,f=f.baseState;var M=S=null,F=null,Z=v;do{var he=Z.lane;if((xn&he)===he)F!==null&&(F=F.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),f=Z.hasEagerState?Z.eagerState:s(f,Z.action);else{var ge={lane:he,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};F===null?(M=F=ge,S=f):F=F.next=ge,pt.lanes|=he,vn|=he}Z=Z.next}while(Z!==null&&Z!==v);F===null?S=f:F.next=M,Ar(f,a.memoizedState)||(Zt=!0),a.memoizedState=f,a.baseState=S,a.baseQueue=F,d.lastRenderedState=f}if(s=d.interleaved,s!==null){y=s;do v=y.lane,pt.lanes|=v,vn|=v,y=y.next;while(y!==s)}else y===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Wd(s){var a=vr(),d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var f=d.dispatch,y=d.pending,v=a.memoizedState;if(y!==null){d.pending=null;var S=y=y.next;do v=s(v,S.action),S=S.next;while(S!==y);Ar(v,a.memoizedState)||(Zt=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),d.lastRenderedState=v}return[v,f]}function hp(){}function pp(s,a){var d=pt,f=vr(),y=a(),v=!Ar(f.memoizedState,y);if(v&&(f.memoizedState=y,Zt=!0),f=f.queue,Hd(xp.bind(null,d,f,s),[s]),f.getSnapshot!==a||v||Tt!==null&&Tt.memoizedState.tag&1){if(d.flags|=2048,Ca(9,yp.bind(null,d,f,y,a),void 0,null),At===null)throw Error(r(349));(xn&30)!==0||gp(d,a,y)}return y}function gp(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function yp(s,a,d,f){a.value=d,a.getSnapshot=f,vp(a)&&bp(s)}function xp(s,a,d){return d(function(){vp(a)&&bp(s)})}function vp(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!Ar(s,d)}catch{return!0}}function bp(s){var a=ds(s,1);a!==null&&Ir(a,s,1,-1)}function wp(s){var a=Yr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:s},a.queue=s,s=s.dispatch=f_.bind(null,pt,s),[a.memoizedState,s]}function Ca(s,a,d,f){return s={tag:s,create:a,destroy:d,deps:f,next:null},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(f=d.next,d.next=s,s.next=f,a.lastEffect=s)),s}function jp(){return vr().memoizedState}function pl(s,a,d,f){var y=Yr();pt.flags|=s,y.memoizedState=Ca(1|a,d,void 0,f===void 0?null:f)}function gl(s,a,d,f){var y=vr();f=f===void 0?null:f;var v=void 0;if(Nt!==null){var S=Nt.memoizedState;if(v=S.destroy,f!==null&&Vd(f,S.deps)){y.memoizedState=Ca(a,d,v,f);return}}pt.flags|=s,y.memoizedState=Ca(1|a,d,v,f)}function _p(s,a){return pl(8390656,8,s,a)}function Hd(s,a){return gl(2048,8,s,a)}function Cp(s,a){return gl(4,2,s,a)}function Np(s,a){return gl(4,4,s,a)}function Sp(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Ep(s,a,d){return d=d!=null?d.concat([s]):null,gl(4,4,Sp.bind(null,a,s),d)}function Gd(){}function Pp(s,a){var d=vr();a=a===void 0?null:a;var f=d.memoizedState;return f!==null&&a!==null&&Vd(a,f[1])?f[0]:(d.memoizedState=[s,a],s)}function kp(s,a){var d=vr();a=a===void 0?null:a;var f=d.memoizedState;return f!==null&&a!==null&&Vd(a,f[1])?f[0]:(s=s(),d.memoizedState=[s,a],s)}function Tp(s,a,d){return(xn&21)===0?(s.baseState&&(s.baseState=!1,Zt=!0),s.memoizedState=d):(Ar(d,a)||(d=ah(),pt.lanes|=d,vn|=d,s.baseState=!0),a)}function d_(s,a){var d=et;et=d!==0&&4>d?d:4,s(!0);var f=Ud.transition;Ud.transition={};try{s(!1),a()}finally{et=d,Ud.transition=f}}function Ap(){return vr().memoizedState}function u_(s,a,d){var f=qs(s);if(d={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null},Rp(s))Op(a,d);else if(d=cp(s,a,d,f),d!==null){var y=Ht();Ir(d,s,f,y),Dp(d,a,f)}}function f_(s,a,d){var f=qs(s),y={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null};if(Rp(s))Op(a,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var S=a.lastRenderedState,M=v(S,d);if(y.hasEagerState=!0,y.eagerState=M,Ar(M,S)){var F=a.interleaved;F===null?(y.next=y,Dd(a)):(y.next=F.next,F.next=y),a.interleaved=y;return}}catch{}finally{}d=cp(s,a,y,f),d!==null&&(y=Ht(),Ir(d,s,f,y),Dp(d,a,f))}}function Rp(s){var a=s.alternate;return s===pt||a!==null&&a===pt}function Op(s,a){wa=hl=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function Dp(s,a,d){if((d&4194240)!==0){var f=a.lanes;f&=s.pendingLanes,d|=f,a.lanes=d,Yc(s,d)}}var yl={readContext:xr,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},m_={readContext:xr,useCallback:function(s,a){return Yr().memoizedState=[s,a===void 0?null:a],s},useContext:xr,useEffect:_p,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,pl(4194308,4,Sp.bind(null,a,s),d)},useLayoutEffect:function(s,a){return pl(4194308,4,s,a)},useInsertionEffect:function(s,a){return pl(4,2,s,a)},useMemo:function(s,a){var d=Yr();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var f=Yr();return a=d!==void 0?d(a):a,f.memoizedState=f.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},f.queue=s,s=s.dispatch=u_.bind(null,pt,s),[f.memoizedState,s]},useRef:function(s){var a=Yr();return s={current:s},a.memoizedState=s},useState:wp,useDebugValue:Gd,useDeferredValue:function(s){return Yr().memoizedState=s},useTransition:function(){var s=wp(!1),a=s[0];return s=d_.bind(null,s[1]),Yr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var f=pt,y=Yr();if(ft){if(d===void 0)throw Error(r(407));d=d()}else{if(d=a(),At===null)throw Error(r(349));(xn&30)!==0||gp(f,a,d)}y.memoizedState=d;var v={value:d,getSnapshot:a};return y.queue=v,_p(xp.bind(null,f,v,s),[s]),f.flags|=2048,Ca(9,yp.bind(null,f,v,d,a),void 0,null),d},useId:function(){var s=Yr(),a=At.identifierPrefix;if(ft){var d=cs,f=ls;d=(f&~(1<<32-Tr(f)-1)).toString(32)+d,a=":"+a+"R"+d,d=ja++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=c_++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},h_={readContext:xr,useCallback:Pp,useContext:xr,useEffect:Hd,useImperativeHandle:Ep,useInsertionEffect:Cp,useLayoutEffect:Np,useMemo:kp,useReducer:qd,useRef:jp,useState:function(){return qd(_a)},useDebugValue:Gd,useDeferredValue:function(s){var a=vr();return Tp(a,Nt.memoizedState,s)},useTransition:function(){var s=qd(_a)[0],a=vr().memoizedState;return[s,a]},useMutableSource:hp,useSyncExternalStore:pp,useId:Ap,unstable_isNewReconciler:!1},p_={readContext:xr,useCallback:Pp,useContext:xr,useEffect:Hd,useImperativeHandle:Ep,useInsertionEffect:Cp,useLayoutEffect:Np,useMemo:kp,useReducer:Wd,useRef:jp,useState:function(){return Wd(_a)},useDebugValue:Gd,useDeferredValue:function(s){var a=vr();return Nt===null?a.memoizedState=s:Tp(a,Nt.memoizedState,s)},useTransition:function(){var s=Wd(_a)[0],a=vr().memoizedState;return[s,a]},useMutableSource:hp,useSyncExternalStore:pp,useId:Ap,unstable_isNewReconciler:!1};function Or(s,a){if(s&&s.defaultProps){a=oe({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function Kd(s,a,d,f){a=s.memoizedState,d=d(f,a),d=d==null?a:oe({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var xl={isMounted:function(s){return(s=s._reactInternals)?rt(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var f=Ht(),y=qs(s),v=us(f,y);v.payload=a,d!=null&&(v.callback=d),a=Us(s,v,y),a!==null&&(Ir(a,s,y,f),dl(a,s,y))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var f=Ht(),y=qs(s),v=us(f,y);v.tag=1,v.payload=a,d!=null&&(v.callback=d),a=Us(s,v,y),a!==null&&(Ir(a,s,y,f),dl(a,s,y))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=Ht(),f=qs(s),y=us(d,f);y.tag=2,a!=null&&(y.callback=a),a=Us(s,y,f),a!==null&&(Ir(a,s,f,d),dl(a,s,f))}};function Mp(s,a,d,f,y,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,v,S):a.prototype&&a.prototype.isPureReactComponent?!da(d,f)||!da(y,v):!0}function Ip(s,a,d){var f=!1,y=Ls,v=a.contextType;return typeof v=="object"&&v!==null?v=xr(v):(y=Xt(a)?mn:Ft.current,f=a.contextTypes,v=(f=f!=null)?ii(s,y):Ls),a=new a(d,v),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=xl,s.stateNode=a,a._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=y,s.__reactInternalMemoizedMaskedChildContext=v),a}function Lp(s,a,d,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,f),a.state!==s&&xl.enqueueReplaceState(a,a.state,null)}function Yd(s,a,d,f){var y=s.stateNode;y.props=d,y.state=s.memoizedState,y.refs={},Md(s);var v=a.contextType;typeof v=="object"&&v!==null?y.context=xr(v):(v=Xt(a)?mn:Ft.current,y.context=ii(s,v)),y.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Kd(s,a,v,d),y.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&xl.enqueueReplaceState(y,y.state,null),ul(s,d,y,f),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308)}function mi(s,a){try{var d="",f=a;do d+=xe(f),f=f.return;while(f);var y=d}catch(v){y=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:a,stack:y,digest:null}}function Qd(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function Jd(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var g_=typeof WeakMap=="function"?WeakMap:Map;function $p(s,a,d){d=us(-1,d),d.tag=3,d.payload={element:null};var f=a.value;return d.callback=function(){Nl||(Nl=!0,fu=f),Jd(s,a)},d}function Fp(s,a,d){d=us(-1,d),d.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var y=a.value;d.payload=function(){return f(y)},d.callback=function(){Jd(s,a)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(d.callback=function(){Jd(s,a),typeof f!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),d}function Up(s,a,d){var f=s.pingCache;if(f===null){f=s.pingCache=new g_;var y=new Set;f.set(a,y)}else y=f.get(a),y===void 0&&(y=new Set,f.set(a,y));y.has(d)||(y.add(d),s=T_.bind(null,s,a,d),a.then(s,s))}function Vp(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Bp(s,a,d,f,y){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=us(-1,1),a.tag=2,Us(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=y,s)}var y_=N.ReactCurrentOwner,Zt=!1;function Wt(s,a,d,f){a.child=s===null?lp(a,null,d,f):ci(a,s.child,d,f)}function zp(s,a,d,f,y){d=d.render;var v=a.ref;return ui(a,y),f=Bd(s,a,d,f,v,y),d=zd(),s!==null&&!Zt?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~y,fs(s,a,y)):(ft&&d&&Nd(a),a.flags|=1,Wt(s,a,f,y),a.child)}function qp(s,a,d,f,y){if(s===null){var v=d.type;return typeof v=="function"&&!vu(v)&&v.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=v,Wp(s,a,v,f,y)):(s=Al(d.type,null,f,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(v=s.child,(s.lanes&y)===0){var S=v.memoizedProps;if(d=d.compare,d=d!==null?d:da,d(S,f)&&s.ref===a.ref)return fs(s,a,y)}return a.flags|=1,s=Hs(v,f),s.ref=a.ref,s.return=a,a.child=s}function Wp(s,a,d,f,y){if(s!==null){var v=s.memoizedProps;if(da(v,f)&&s.ref===a.ref)if(Zt=!1,a.pendingProps=f=v,(s.lanes&y)!==0)(s.flags&131072)!==0&&(Zt=!0);else return a.lanes=s.lanes,fs(s,a,y)}return Xd(s,a,d,f,y)}function Hp(s,a,d){var f=a.pendingProps,y=f.children,v=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(pi,ur),ur|=d;else{if((d&1073741824)===0)return s=v!==null?v.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,it(pi,ur),ur|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:d,it(pi,ur),ur|=f}else v!==null?(f=v.baseLanes|d,a.memoizedState=null):f=d,it(pi,ur),ur|=f;return Wt(s,a,y,d),a.child}function Gp(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Xd(s,a,d,f,y){var v=Xt(d)?mn:Ft.current;return v=ii(a,v),ui(a,y),d=Bd(s,a,d,f,v,y),f=zd(),s!==null&&!Zt?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~y,fs(s,a,y)):(ft&&f&&Nd(a),a.flags|=1,Wt(s,a,d,y),a.child)}function Kp(s,a,d,f,y){if(Xt(d)){var v=!0;rl(a)}else v=!1;if(ui(a,y),a.stateNode===null)bl(s,a),Ip(a,d,f),Yd(a,d,f,y),f=!0;else if(s===null){var S=a.stateNode,M=a.memoizedProps;S.props=M;var F=S.context,Z=d.contextType;typeof Z=="object"&&Z!==null?Z=xr(Z):(Z=Xt(d)?mn:Ft.current,Z=ii(a,Z));var he=d.getDerivedStateFromProps,ge=typeof he=="function"||typeof S.getSnapshotBeforeUpdate=="function";ge||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==f||F!==Z)&&Lp(a,S,f,Z),Fs=!1;var me=a.memoizedState;S.state=me,ul(a,f,S,y),F=a.memoizedState,M!==f||me!==F||Jt.current||Fs?(typeof he=="function"&&(Kd(a,d,he,f),F=a.memoizedState),(M=Fs||Mp(a,d,M,f,me,F,Z))?(ge||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),S.props=f,S.state=F,S.context=Z,f=M):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{S=a.stateNode,dp(s,a),M=a.memoizedProps,Z=a.type===a.elementType?M:Or(a.type,M),S.props=Z,ge=a.pendingProps,me=S.context,F=d.contextType,typeof F=="object"&&F!==null?F=xr(F):(F=Xt(d)?mn:Ft.current,F=ii(a,F));var Pe=d.getDerivedStateFromProps;(he=typeof Pe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==ge||me!==F)&&Lp(a,S,f,F),Fs=!1,me=a.memoizedState,S.state=me,ul(a,f,S,y);var Re=a.memoizedState;M!==ge||me!==Re||Jt.current||Fs?(typeof Pe=="function"&&(Kd(a,d,Pe,f),Re=a.memoizedState),(Z=Fs||Mp(a,d,Z,f,me,Re,F)||!1)?(he||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Re,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Re,F)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||M===s.memoizedProps&&me===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&me===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Re),S.props=f,S.state=Re,S.context=F,f=Z):(typeof S.componentDidUpdate!="function"||M===s.memoizedProps&&me===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&me===s.memoizedState||(a.flags|=1024),f=!1)}return Zd(s,a,d,f,v,y)}function Zd(s,a,d,f,y,v){Gp(s,a);var S=(a.flags&128)!==0;if(!f&&!S)return y&&Zh(a,d,!1),fs(s,a,v);f=a.stateNode,y_.current=a;var M=S&&typeof d.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,s!==null&&S?(a.child=ci(a,s.child,null,v),a.child=ci(a,null,M,v)):Wt(s,a,M,v),a.memoizedState=f.state,y&&Zh(a,d,!0),a.child}function Yp(s){var a=s.stateNode;a.pendingContext?Jh(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Jh(s,a.context,!1),Id(s,a.containerInfo)}function Qp(s,a,d,f,y){return li(),kd(y),a.flags|=256,Wt(s,a,d,f),a.child}var eu={dehydrated:null,treeContext:null,retryLane:0};function tu(s){return{baseLanes:s,cachePool:null,transitions:null}}function Jp(s,a,d){var f=a.pendingProps,y=ht.current,v=!1,S=(a.flags&128)!==0,M;if((M=S)||(M=s!==null&&s.memoizedState===null?!1:(y&2)!==0),M?(v=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(y|=1),it(ht,y&1),s===null)return Pd(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=f.children,s=f.fallback,v?(f=a.mode,v=a.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Rl(S,f,0,null),s=_n(s,f,d,null),v.return=a,s.return=a,v.sibling=s,a.child=v,a.child.memoizedState=tu(d),a.memoizedState=eu,s):ru(a,S));if(y=s.memoizedState,y!==null&&(M=y.dehydrated,M!==null))return x_(s,a,S,f,M,y,d);if(v){v=f.fallback,S=a.mode,y=s.child,M=y.sibling;var F={mode:"hidden",children:f.children};return(S&1)===0&&a.child!==y?(f=a.child,f.childLanes=0,f.pendingProps=F,a.deletions=null):(f=Hs(y,F),f.subtreeFlags=y.subtreeFlags&14680064),M!==null?v=Hs(M,v):(v=_n(v,S,d,null),v.flags|=2),v.return=a,f.return=a,f.sibling=v,a.child=f,f=v,v=a.child,S=s.child.memoizedState,S=S===null?tu(d):{baseLanes:S.baseLanes|d,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=s.childLanes&~d,a.memoizedState=eu,f}return v=s.child,s=v.sibling,f=Hs(v,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=d),f.return=a,f.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=f,a.memoizedState=null,f}function ru(s,a){return a=Rl({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function vl(s,a,d,f){return f!==null&&kd(f),ci(a,s.child,null,d),s=ru(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function x_(s,a,d,f,y,v,S){if(d)return a.flags&256?(a.flags&=-257,f=Qd(Error(r(422))),vl(s,a,S,f)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(v=f.fallback,y=a.mode,f=Rl({mode:"visible",children:f.children},y,0,null),v=_n(v,y,S,null),v.flags|=2,f.return=a,v.return=a,f.sibling=v,a.child=f,(a.mode&1)!==0&&ci(a,s.child,null,S),a.child.memoizedState=tu(S),a.memoizedState=eu,v);if((a.mode&1)===0)return vl(s,a,S,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var M=f.dgst;return f=M,v=Error(r(419)),f=Qd(v,f,void 0),vl(s,a,S,f)}if(M=(S&s.childLanes)!==0,Zt||M){if(f=At,f!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(f.suspendedLanes|S))!==0?0:y,y!==0&&y!==v.retryLane&&(v.retryLane=y,ds(s,y),Ir(f,s,y,-1))}return xu(),f=Qd(Error(r(421))),vl(s,a,S,f)}return y.data==="$?"?(a.flags|=128,a.child=s.child,a=A_.bind(null,s),y._reactRetry=a,null):(s=v.treeContext,dr=Ms(y.nextSibling),cr=a,ft=!0,Rr=null,s!==null&&(gr[yr++]=ls,gr[yr++]=cs,gr[yr++]=hn,ls=s.id,cs=s.overflow,hn=a),a=ru(a,f.children),a.flags|=4096,a)}function Xp(s,a,d){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),Od(s.return,a,d)}function su(s,a,d,f,y){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:d,tailMode:y}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=d,v.tailMode=y)}function Zp(s,a,d){var f=a.pendingProps,y=f.revealOrder,v=f.tail;if(Wt(s,a,f.children,d),f=ht.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Xp(s,d,a);else if(s.tag===19)Xp(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(it(ht,f),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(d=a.child,y=null;d!==null;)s=d.alternate,s!==null&&fl(s)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),su(a,!1,y,d,v);break;case"backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&fl(s)===null){a.child=y;break}s=y.sibling,y.sibling=d,d=y,y=s}su(a,!0,d,null,v);break;case"together":su(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function bl(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function fs(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),vn|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,d=Hs(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=Hs(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function v_(s,a,d){switch(a.tag){case 3:Yp(a),li();break;case 5:mp(a);break;case 1:Xt(a.type)&&rl(a);break;case 4:Id(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,y=a.memoizedProps.value;it(ll,f._currentValue),f._currentValue=y;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(it(ht,ht.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Jp(s,a,d):(it(ht,ht.current&1),s=fs(s,a,d),s!==null?s.sibling:null);it(ht,ht.current&1);break;case 19:if(f=(d&a.childLanes)!==0,(s.flags&128)!==0){if(f)return Zp(s,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),it(ht,ht.current),f)break;return null;case 22:case 23:return a.lanes=0,Hp(s,a,d)}return fs(s,a,d)}var eg,nu,tg,rg;eg=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},nu=function(){},tg=function(s,a,d,f){var y=s.memoizedProps;if(y!==f){s=a.stateNode,yn(Kr.current);var v=null;switch(d){case"input":y=R(s,y),f=R(s,f),v=[];break;case"select":y=oe({},y,{value:void 0}),f=oe({},f,{value:void 0}),v=[];break;case"textarea":y=Le(s,y),f=Le(s,f),v=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Zo)}Qi(d,f);var S;d=null;for(Z in y)if(!f.hasOwnProperty(Z)&&y.hasOwnProperty(Z)&&y[Z]!=null)if(Z==="style"){var M=y[Z];for(S in M)M.hasOwnProperty(S)&&(d||(d={}),d[S]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(o.hasOwnProperty(Z)?v||(v=[]):(v=v||[]).push(Z,null));for(Z in f){var F=f[Z];if(M=y?.[Z],f.hasOwnProperty(Z)&&F!==M&&(F!=null||M!=null))if(Z==="style")if(M){for(S in M)!M.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(d||(d={}),d[S]="");for(S in F)F.hasOwnProperty(S)&&M[S]!==F[S]&&(d||(d={}),d[S]=F[S])}else d||(v||(v=[]),v.push(Z,d)),d=F;else Z==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,M=M?M.__html:void 0,F!=null&&M!==F&&(v=v||[]).push(Z,F)):Z==="children"?typeof F!="string"&&typeof F!="number"||(v=v||[]).push(Z,""+F):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(o.hasOwnProperty(Z)?(F!=null&&Z==="onScroll"&&lt("scroll",s),v||M===F||(v=[])):(v=v||[]).push(Z,F))}d&&(v=v||[]).push("style",d);var Z=v;(a.updateQueue=Z)&&(a.flags|=4)}},rg=function(s,a,d,f){d!==f&&(a.flags|=4)};function Na(s,a){if(!ft)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Vt(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,f=0;if(a)for(var y=s.child;y!==null;)d|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)d|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=f,s.childLanes=d,a}function b_(s,a,d){var f=a.pendingProps;switch(Sd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(a),null;case 1:return Xt(a.type)&&tl(),Vt(a),null;case 3:return f=a.stateNode,fi(),ct(Jt),ct(Ft),Fd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(al(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Rr!==null&&(pu(Rr),Rr=null))),nu(s,a),Vt(a),null;case 5:Ld(a);var y=yn(ba.current);if(d=a.type,s!==null&&a.stateNode!=null)tg(s,a,d,f,y),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(r(166));return Vt(a),null}if(s=yn(Kr.current),al(a)){f=a.stateNode,d=a.type;var v=a.memoizedProps;switch(f[Gr]=a,f[pa]=v,s=(a.mode&1)!==0,d){case"dialog":lt("cancel",f),lt("close",f);break;case"iframe":case"object":case"embed":lt("load",f);break;case"video":case"audio":for(y=0;y<fa.length;y++)lt(fa[y],f);break;case"source":lt("error",f);break;case"img":case"image":case"link":lt("error",f),lt("load",f);break;case"details":lt("toggle",f);break;case"input":pe(f,v),lt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},lt("invalid",f);break;case"textarea":tt(f,v),lt("invalid",f)}Qi(d,v),y=null;for(var S in v)if(v.hasOwnProperty(S)){var M=v[S];S==="children"?typeof M=="string"?f.textContent!==M&&(v.suppressHydrationWarning!==!0&&Xo(f.textContent,M,s),y=["children",M]):typeof M=="number"&&f.textContent!==""+M&&(v.suppressHydrationWarning!==!0&&Xo(f.textContent,M,s),y=["children",""+M]):o.hasOwnProperty(S)&&M!=null&&S==="onScroll"&&lt("scroll",f)}switch(d){case"input":Y(f),ae(f,v,!0);break;case"textarea":Y(f),mt(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Zo)}f=y,a.updateQueue=f,f!==null&&(a.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=$t(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=S.createElement(d,{is:f.is}):(s=S.createElement(d),d==="select"&&(S=s,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):s=S.createElementNS(s,d),s[Gr]=a,s[pa]=f,eg(s,a,!1,!1),a.stateNode=s;e:{switch(S=Ji(d,f),d){case"dialog":lt("cancel",s),lt("close",s),y=f;break;case"iframe":case"object":case"embed":lt("load",s),y=f;break;case"video":case"audio":for(y=0;y<fa.length;y++)lt(fa[y],s);y=f;break;case"source":lt("error",s),y=f;break;case"img":case"image":case"link":lt("error",s),lt("load",s),y=f;break;case"details":lt("toggle",s),y=f;break;case"input":pe(s,f),y=R(s,f),lt("invalid",s);break;case"option":y=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},y=oe({},f,{value:void 0}),lt("invalid",s);break;case"textarea":tt(s,f),y=Le(s,f),lt("invalid",s);break;default:y=f}Qi(d,y),M=y;for(v in M)if(M.hasOwnProperty(v)){var F=M[v];v==="style"?Eo(s,F):v==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&or(s,F)):v==="children"?typeof F=="string"?(d!=="textarea"||F!=="")&&Wr(s,F):typeof F=="number"&&Wr(s,""+F):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?F!=null&&v==="onScroll"&&lt("scroll",s):F!=null&&E(s,v,F,S))}switch(d){case"input":Y(s),ae(s,f,!1);break;case"textarea":Y(s),mt(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Ee(f.value));break;case"select":s.multiple=!!f.multiple,v=f.value,v!=null?je(s,!!f.multiple,v,!1):f.defaultValue!=null&&je(s,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(s.onclick=Zo)}switch(d){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Vt(a),null;case 6:if(s&&a.stateNode!=null)rg(s,a,s.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(d=yn(ba.current),yn(Kr.current),al(a)){if(f=a.stateNode,d=a.memoizedProps,f[Gr]=a,(v=f.nodeValue!==d)&&(s=cr,s!==null))switch(s.tag){case 3:Xo(f.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Xo(f.nodeValue,d,(s.mode&1)!==0)}v&&(a.flags|=4)}else f=(d.nodeType===9?d:d.ownerDocument).createTextNode(f),f[Gr]=a,a.stateNode=f}return Vt(a),null;case 13:if(ct(ht),f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ft&&dr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)ip(),li(),a.flags|=98560,v=!1;else if(v=al(a),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Gr]=a}else li(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vt(a),v=!1}else Rr!==null&&(pu(Rr),Rr=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(ht.current&1)!==0?St===0&&(St=3):xu())),a.updateQueue!==null&&(a.flags|=4),Vt(a),null);case 4:return fi(),nu(s,a),s===null&&ma(a.stateNode.containerInfo),Vt(a),null;case 10:return Rd(a.type._context),Vt(a),null;case 17:return Xt(a.type)&&tl(),Vt(a),null;case 19:if(ct(ht),v=a.memoizedState,v===null)return Vt(a),null;if(f=(a.flags&128)!==0,S=v.rendering,S===null)if(f)Na(v,!1);else{if(St!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(S=fl(s),S!==null){for(a.flags|=128,Na(v,!1),f=S.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=d,d=a.child;d!==null;)v=d,s=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,s=S.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return it(ht,ht.current&1|2),a.child}s=s.sibling}v.tail!==null&&xt()>gi&&(a.flags|=128,f=!0,Na(v,!1),a.lanes=4194304)}else{if(!f)if(s=fl(S),s!==null){if(a.flags|=128,f=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Na(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!ft)return Vt(a),null}else 2*xt()-v.renderingStartTime>gi&&d!==1073741824&&(a.flags|=128,f=!0,Na(v,!1),a.lanes=4194304);v.isBackwards?(S.sibling=a.child,a.child=S):(d=v.last,d!==null?d.sibling=S:a.child=S,v.last=S)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=xt(),a.sibling=null,d=ht.current,it(ht,f?d&1|2:d&1),a):(Vt(a),null);case 22:case 23:return yu(),f=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(ur&1073741824)!==0&&(Vt(a),a.subtreeFlags&6&&(a.flags|=8192)):Vt(a),null;case 24:return null;case 25:return null}throw Error(r(156,a.tag))}function w_(s,a){switch(Sd(a),a.tag){case 1:return Xt(a.type)&&tl(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return fi(),ct(Jt),ct(Ft),Fd(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Ld(a),null;case 13:if(ct(ht),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));li()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ct(ht),null;case 4:return fi(),null;case 10:return Rd(a.type._context),null;case 22:case 23:return yu(),null;case 24:return null;default:return null}}var wl=!1,Bt=!1,j_=typeof WeakSet=="function"?WeakSet:Set,Te=null;function hi(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(f){yt(s,a,f)}else d.current=null}function iu(s,a,d){try{d()}catch(f){yt(s,a,f)}}var sg=!1;function __(s,a){if(yd=Vo,s=Mh(),cd(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var f=d.getSelection&&d.getSelection();if(f&&f.rangeCount!==0){d=f.anchorNode;var y=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{d.nodeType,v.nodeType}catch{d=null;break e}var S=0,M=-1,F=-1,Z=0,he=0,ge=s,me=null;t:for(;;){for(var Pe;ge!==d||y!==0&&ge.nodeType!==3||(M=S+y),ge!==v||f!==0&&ge.nodeType!==3||(F=S+f),ge.nodeType===3&&(S+=ge.nodeValue.length),(Pe=ge.firstChild)!==null;)me=ge,ge=Pe;for(;;){if(ge===s)break t;if(me===d&&++Z===y&&(M=S),me===v&&++he===f&&(F=S),(Pe=ge.nextSibling)!==null)break;ge=me,me=ge.parentNode}ge=Pe}d=M===-1||F===-1?null:{start:M,end:F}}else d=null}d=d||{start:0,end:0}}else d=null;for(xd={focusedElem:s,selectionRange:d},Vo=!1,Te=a;Te!==null;)if(a=Te,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Te=s;else for(;Te!==null;){a=Te;try{var Re=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var Oe=Re.memoizedProps,vt=Re.memoizedState,H=a.stateNode,V=H.getSnapshotBeforeUpdate(a.elementType===a.type?Oe:Or(a.type,Oe),vt);H.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var K=a.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ye){yt(a,a.return,ye)}if(s=a.sibling,s!==null){s.return=a.return,Te=s;break}Te=a.return}return Re=sg,sg=!1,Re}function Sa(s,a,d){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&s)===s){var v=y.destroy;y.destroy=void 0,v!==void 0&&iu(a,d,v)}y=y.next}while(y!==f)}}function jl(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var f=d.create;d.destroy=f()}d=d.next}while(d!==a)}}function au(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function ng(s){var a=s.alternate;a!==null&&(s.alternate=null,ng(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Gr],delete a[pa],delete a[jd],delete a[i_],delete a[a_])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function ig(s){return s.tag===5||s.tag===3||s.tag===4}function ag(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ig(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ou(s,a,d){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Zo));else if(f!==4&&(s=s.child,s!==null))for(ou(s,a,d),s=s.sibling;s!==null;)ou(s,a,d),s=s.sibling}function lu(s,a,d){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(lu(s,a,d),s=s.sibling;s!==null;)lu(s,a,d),s=s.sibling}var Mt=null,Dr=!1;function Vs(s,a,d){for(d=d.child;d!==null;)og(s,a,d),d=d.sibling}function og(s,a,d){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(Mo,d)}catch{}switch(d.tag){case 5:Bt||hi(d,a);case 6:var f=Mt,y=Dr;Mt=null,Vs(s,a,d),Mt=f,Dr=y,Mt!==null&&(Dr?(s=Mt,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):Mt.removeChild(d.stateNode));break;case 18:Mt!==null&&(Dr?(s=Mt,d=d.stateNode,s.nodeType===8?wd(s.parentNode,d):s.nodeType===1&&wd(s,d),na(s)):wd(Mt,d.stateNode));break;case 4:f=Mt,y=Dr,Mt=d.stateNode.containerInfo,Dr=!0,Vs(s,a,d),Mt=f,Dr=y;break;case 0:case 11:case 14:case 15:if(!Bt&&(f=d.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var v=y,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&iu(d,a,S),y=y.next}while(y!==f)}Vs(s,a,d);break;case 1:if(!Bt&&(hi(d,a),f=d.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=d.memoizedProps,f.state=d.memoizedState,f.componentWillUnmount()}catch(M){yt(d,a,M)}Vs(s,a,d);break;case 21:Vs(s,a,d);break;case 22:d.mode&1?(Bt=(f=Bt)||d.memoizedState!==null,Vs(s,a,d),Bt=f):Vs(s,a,d);break;default:Vs(s,a,d)}}function lg(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new j_),a.forEach(function(f){var y=R_.bind(null,s,f);d.has(f)||(d.add(f),f.then(y,y))})}}function Mr(s,a){var d=a.deletions;if(d!==null)for(var f=0;f<d.length;f++){var y=d[f];try{var v=s,S=a,M=S;e:for(;M!==null;){switch(M.tag){case 5:Mt=M.stateNode,Dr=!1;break e;case 3:Mt=M.stateNode.containerInfo,Dr=!0;break e;case 4:Mt=M.stateNode.containerInfo,Dr=!0;break e}M=M.return}if(Mt===null)throw Error(r(160));og(v,S,y),Mt=null,Dr=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(Z){yt(y,a,Z)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)cg(a,s),a=a.sibling}function cg(s,a){var d=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Mr(a,s),Qr(s),f&4){try{Sa(3,s,s.return),jl(3,s)}catch(Oe){yt(s,s.return,Oe)}try{Sa(5,s,s.return)}catch(Oe){yt(s,s.return,Oe)}}break;case 1:Mr(a,s),Qr(s),f&512&&d!==null&&hi(d,d.return);break;case 5:if(Mr(a,s),Qr(s),f&512&&d!==null&&hi(d,d.return),s.flags&32){var y=s.stateNode;try{Wr(y,"")}catch(Oe){yt(s,s.return,Oe)}}if(f&4&&(y=s.stateNode,y!=null)){var v=s.memoizedProps,S=d!==null?d.memoizedProps:v,M=s.type,F=s.updateQueue;if(s.updateQueue=null,F!==null)try{M==="input"&&v.type==="radio"&&v.name!=null&&se(y,v),Ji(M,S);var Z=Ji(M,v);for(S=0;S<F.length;S+=2){var he=F[S],ge=F[S+1];he==="style"?Eo(y,ge):he==="dangerouslySetInnerHTML"?or(y,ge):he==="children"?Wr(y,ge):E(y,he,ge,Z)}switch(M){case"input":B(y,v);break;case"textarea":wt(y,v);break;case"select":var me=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!v.multiple;var Pe=v.value;Pe!=null?je(y,!!v.multiple,Pe,!1):me!==!!v.multiple&&(v.defaultValue!=null?je(y,!!v.multiple,v.defaultValue,!0):je(y,!!v.multiple,v.multiple?[]:"",!1))}y[pa]=v}catch(Oe){yt(s,s.return,Oe)}}break;case 6:if(Mr(a,s),Qr(s),f&4){if(s.stateNode===null)throw Error(r(162));y=s.stateNode,v=s.memoizedProps;try{y.nodeValue=v}catch(Oe){yt(s,s.return,Oe)}}break;case 3:if(Mr(a,s),Qr(s),f&4&&d!==null&&d.memoizedState.isDehydrated)try{na(a.containerInfo)}catch(Oe){yt(s,s.return,Oe)}break;case 4:Mr(a,s),Qr(s);break;case 13:Mr(a,s),Qr(s),y=s.child,y.flags&8192&&(v=y.memoizedState!==null,y.stateNode.isHidden=v,!v||y.alternate!==null&&y.alternate.memoizedState!==null||(uu=xt())),f&4&&lg(s);break;case 22:if(he=d!==null&&d.memoizedState!==null,s.mode&1?(Bt=(Z=Bt)||he,Mr(a,s),Bt=Z):Mr(a,s),Qr(s),f&8192){if(Z=s.memoizedState!==null,(s.stateNode.isHidden=Z)&&!he&&(s.mode&1)!==0)for(Te=s,he=s.child;he!==null;){for(ge=Te=he;Te!==null;){switch(me=Te,Pe=me.child,me.tag){case 0:case 11:case 14:case 15:Sa(4,me,me.return);break;case 1:hi(me,me.return);var Re=me.stateNode;if(typeof Re.componentWillUnmount=="function"){f=me,d=me.return;try{a=f,Re.props=a.memoizedProps,Re.state=a.memoizedState,Re.componentWillUnmount()}catch(Oe){yt(f,d,Oe)}}break;case 5:hi(me,me.return);break;case 22:if(me.memoizedState!==null){fg(ge);continue}}Pe!==null?(Pe.return=me,Te=Pe):fg(ge)}he=he.sibling}e:for(he=null,ge=s;;){if(ge.tag===5){if(he===null){he=ge;try{y=ge.stateNode,Z?(v=y.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(M=ge.stateNode,F=ge.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,M.style.display=So("display",S))}catch(Oe){yt(s,s.return,Oe)}}}else if(ge.tag===6){if(he===null)try{ge.stateNode.nodeValue=Z?"":ge.memoizedProps}catch(Oe){yt(s,s.return,Oe)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===s)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===s)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===s)break e;he===ge&&(he=null),ge=ge.return}he===ge&&(he=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:Mr(a,s),Qr(s),f&4&&lg(s);break;case 21:break;default:Mr(a,s),Qr(s)}}function Qr(s){var a=s.flags;if(a&2){try{e:{for(var d=s.return;d!==null;){if(ig(d)){var f=d;break e}d=d.return}throw Error(r(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(Wr(y,""),f.flags&=-33);var v=ag(s);lu(s,v,y);break;case 3:case 4:var S=f.stateNode.containerInfo,M=ag(s);ou(s,M,S);break;default:throw Error(r(161))}}catch(F){yt(s,s.return,F)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function C_(s,a,d){Te=s,dg(s)}function dg(s,a,d){for(var f=(s.mode&1)!==0;Te!==null;){var y=Te,v=y.child;if(y.tag===22&&f){var S=y.memoizedState!==null||wl;if(!S){var M=y.alternate,F=M!==null&&M.memoizedState!==null||Bt;M=wl;var Z=Bt;if(wl=S,(Bt=F)&&!Z)for(Te=y;Te!==null;)S=Te,F=S.child,S.tag===22&&S.memoizedState!==null?mg(y):F!==null?(F.return=S,Te=F):mg(y);for(;v!==null;)Te=v,dg(v),v=v.sibling;Te=y,wl=M,Bt=Z}ug(s)}else(y.subtreeFlags&8772)!==0&&v!==null?(v.return=y,Te=v):ug(s)}}function ug(s){for(;Te!==null;){var a=Te;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Bt||jl(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Bt)if(d===null)f.componentDidMount();else{var y=a.elementType===a.type?d.memoizedProps:Or(a.type,d.memoizedProps);f.componentDidUpdate(y,d.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&fp(a,v,f);break;case 3:var S=a.updateQueue;if(S!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}fp(a,S,d)}break;case 5:var M=a.stateNode;if(d===null&&a.flags&4){d=M;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&d.focus();break;case"img":F.src&&(d.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Z=a.alternate;if(Z!==null){var he=Z.memoizedState;if(he!==null){var ge=he.dehydrated;ge!==null&&na(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Bt||a.flags&512&&au(a)}catch(me){yt(a,a.return,me)}}if(a===s){Te=null;break}if(d=a.sibling,d!==null){d.return=a.return,Te=d;break}Te=a.return}}function fg(s){for(;Te!==null;){var a=Te;if(a===s){Te=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Te=d;break}Te=a.return}}function mg(s){for(;Te!==null;){var a=Te;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{jl(4,a)}catch(F){yt(a,d,F)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var y=a.return;try{f.componentDidMount()}catch(F){yt(a,y,F)}}var v=a.return;try{au(a)}catch(F){yt(a,v,F)}break;case 5:var S=a.return;try{au(a)}catch(F){yt(a,S,F)}}}catch(F){yt(a,a.return,F)}if(a===s){Te=null;break}var M=a.sibling;if(M!==null){M.return=a.return,Te=M;break}Te=a.return}}var N_=Math.ceil,_l=N.ReactCurrentDispatcher,cu=N.ReactCurrentOwner,br=N.ReactCurrentBatchConfig,Qe=0,At=null,jt=null,It=0,ur=0,pi=Is(0),St=0,Ea=null,vn=0,Cl=0,du=0,Pa=null,er=null,uu=0,gi=1/0,ms=null,Nl=!1,fu=null,Bs=null,Sl=!1,zs=null,El=0,ka=0,mu=null,Pl=-1,kl=0;function Ht(){return(Qe&6)!==0?xt():Pl!==-1?Pl:Pl=xt()}function qs(s){return(s.mode&1)===0?1:(Qe&2)!==0&&It!==0?It&-It:l_.transition!==null?(kl===0&&(kl=ah()),kl):(s=et,s!==0||(s=window.event,s=s===void 0?16:ph(s.type)),s)}function Ir(s,a,d,f){if(50<ka)throw ka=0,mu=null,Error(r(185));Zi(s,d,f),((Qe&2)===0||s!==At)&&(s===At&&((Qe&2)===0&&(Cl|=d),St===4&&Ws(s,It)),tr(s,f),d===1&&Qe===0&&(a.mode&1)===0&&(gi=xt()+500,sl&&$s()))}function tr(s,a){var d=s.callbackNode;lj(s,a);var f=$o(s,s===At?It:0);if(f===0)d!==null&&sh(d),s.callbackNode=null,s.callbackPriority=0;else if(a=f&-f,s.callbackPriority!==a){if(d!=null&&sh(d),a===1)s.tag===0?o_(pg.bind(null,s)):ep(pg.bind(null,s)),s_(function(){(Qe&6)===0&&$s()}),d=null;else{switch(oh(f)){case 1:d=Hc;break;case 4:d=nh;break;case 16:d=Do;break;case 536870912:d=ih;break;default:d=Do}d=_g(d,hg.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function hg(s,a){if(Pl=-1,kl=0,(Qe&6)!==0)throw Error(r(327));var d=s.callbackNode;if(yi()&&s.callbackNode!==d)return null;var f=$o(s,s===At?It:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||a)a=Tl(s,f);else{a=f;var y=Qe;Qe|=2;var v=yg();(At!==s||It!==a)&&(ms=null,gi=xt()+500,wn(s,a));do try{P_();break}catch(M){gg(s,M)}while(!0);Ad(),_l.current=v,Qe=y,jt!==null?a=0:(At=null,It=0,a=St)}if(a!==0){if(a===2&&(y=Gc(s),y!==0&&(f=y,a=hu(s,y))),a===1)throw d=Ea,wn(s,0),Ws(s,f),tr(s,xt()),d;if(a===6)Ws(s,f);else{if(y=s.current.alternate,(f&30)===0&&!S_(y)&&(a=Tl(s,f),a===2&&(v=Gc(s),v!==0&&(f=v,a=hu(s,v))),a===1))throw d=Ea,wn(s,0),Ws(s,f),tr(s,xt()),d;switch(s.finishedWork=y,s.finishedLanes=f,a){case 0:case 1:throw Error(r(345));case 2:jn(s,er,ms);break;case 3:if(Ws(s,f),(f&130023424)===f&&(a=uu+500-xt(),10<a)){if($o(s,0)!==0)break;if(y=s.suspendedLanes,(y&f)!==f){Ht(),s.pingedLanes|=s.suspendedLanes&y;break}s.timeoutHandle=bd(jn.bind(null,s,er,ms),a);break}jn(s,er,ms);break;case 4:if(Ws(s,f),(f&4194240)===f)break;for(a=s.eventTimes,y=-1;0<f;){var S=31-Tr(f);v=1<<S,S=a[S],S>y&&(y=S),f&=~v}if(f=y,f=xt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*N_(f/1960))-f,10<f){s.timeoutHandle=bd(jn.bind(null,s,er,ms),f);break}jn(s,er,ms);break;case 5:jn(s,er,ms);break;default:throw Error(r(329))}}}return tr(s,xt()),s.callbackNode===d?hg.bind(null,s):null}function hu(s,a){var d=Pa;return s.current.memoizedState.isDehydrated&&(wn(s,a).flags|=256),s=Tl(s,a),s!==2&&(a=er,er=d,a!==null&&pu(a)),s}function pu(s){er===null?er=s:er.push.apply(er,s)}function S_(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var f=0;f<d.length;f++){var y=d[f],v=y.getSnapshot;y=y.value;try{if(!Ar(v(),y))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ws(s,a){for(a&=~du,a&=~Cl,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-Tr(a),f=1<<d;s[d]=-1,a&=~f}}function pg(s){if((Qe&6)!==0)throw Error(r(327));yi();var a=$o(s,0);if((a&1)===0)return tr(s,xt()),null;var d=Tl(s,a);if(s.tag!==0&&d===2){var f=Gc(s);f!==0&&(a=f,d=hu(s,f))}if(d===1)throw d=Ea,wn(s,0),Ws(s,a),tr(s,xt()),d;if(d===6)throw Error(r(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,jn(s,er,ms),tr(s,xt()),null}function gu(s,a){var d=Qe;Qe|=1;try{return s(a)}finally{Qe=d,Qe===0&&(gi=xt()+500,sl&&$s())}}function bn(s){zs!==null&&zs.tag===0&&(Qe&6)===0&&yi();var a=Qe;Qe|=1;var d=br.transition,f=et;try{if(br.transition=null,et=1,s)return s()}finally{et=f,br.transition=d,Qe=a,(Qe&6)===0&&$s()}}function yu(){ur=pi.current,ct(pi)}function wn(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,r_(d)),jt!==null)for(d=jt.return;d!==null;){var f=d;switch(Sd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&tl();break;case 3:fi(),ct(Jt),ct(Ft),Fd();break;case 5:Ld(f);break;case 4:fi();break;case 13:ct(ht);break;case 19:ct(ht);break;case 10:Rd(f.type._context);break;case 22:case 23:yu()}d=d.return}if(At=s,jt=s=Hs(s.current,null),It=ur=a,St=0,Ea=null,du=Cl=vn=0,er=Pa=null,gn!==null){for(a=0;a<gn.length;a++)if(d=gn[a],f=d.interleaved,f!==null){d.interleaved=null;var y=f.next,v=d.pending;if(v!==null){var S=v.next;v.next=y,f.next=S}d.pending=f}gn=null}return s}function gg(s,a){do{var d=jt;try{if(Ad(),ml.current=yl,hl){for(var f=pt.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}hl=!1}if(xn=0,Tt=Nt=pt=null,wa=!1,ja=0,cu.current=null,d===null||d.return===null){St=1,Ea=a,jt=null;break}e:{var v=s,S=d.return,M=d,F=a;if(a=It,M.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Z=F,he=M,ge=he.tag;if((he.mode&1)===0&&(ge===0||ge===11||ge===15)){var me=he.alternate;me?(he.updateQueue=me.updateQueue,he.memoizedState=me.memoizedState,he.lanes=me.lanes):(he.updateQueue=null,he.memoizedState=null)}var Pe=Vp(S);if(Pe!==null){Pe.flags&=-257,Bp(Pe,S,M,v,a),Pe.mode&1&&Up(v,Z,a),a=Pe,F=Z;var Re=a.updateQueue;if(Re===null){var Oe=new Set;Oe.add(F),a.updateQueue=Oe}else Re.add(F);break e}else{if((a&1)===0){Up(v,Z,a),xu();break e}F=Error(r(426))}}else if(ft&&M.mode&1){var vt=Vp(S);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),Bp(vt,S,M,v,a),kd(mi(F,M));break e}}v=F=mi(F,M),St!==4&&(St=2),Pa===null?Pa=[v]:Pa.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var H=$p(v,F,a);up(v,H);break e;case 1:M=F;var V=v.type,K=v.stateNode;if((v.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Bs===null||!Bs.has(K)))){v.flags|=65536,a&=-a,v.lanes|=a;var ye=Fp(v,M,a);up(v,ye);break e}}v=v.return}while(v!==null)}vg(d)}catch(Me){a=Me,jt===d&&d!==null&&(jt=d=d.return);continue}break}while(!0)}function yg(){var s=_l.current;return _l.current=yl,s===null?yl:s}function xu(){(St===0||St===3||St===2)&&(St=4),At===null||(vn&268435455)===0&&(Cl&268435455)===0||Ws(At,It)}function Tl(s,a){var d=Qe;Qe|=2;var f=yg();(At!==s||It!==a)&&(ms=null,wn(s,a));do try{E_();break}catch(y){gg(s,y)}while(!0);if(Ad(),Qe=d,_l.current=f,jt!==null)throw Error(r(261));return At=null,It=0,St}function E_(){for(;jt!==null;)xg(jt)}function P_(){for(;jt!==null&&!Zw();)xg(jt)}function xg(s){var a=jg(s.alternate,s,ur);s.memoizedProps=s.pendingProps,a===null?vg(s):jt=a,cu.current=null}function vg(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=b_(d,a,ur),d!==null){jt=d;return}}else{if(d=w_(d,a),d!==null){d.flags&=32767,jt=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{St=6,jt=null;return}}if(a=a.sibling,a!==null){jt=a;return}jt=a=s}while(a!==null);St===0&&(St=5)}function jn(s,a,d){var f=et,y=br.transition;try{br.transition=null,et=1,k_(s,a,d,f)}finally{br.transition=y,et=f}return null}function k_(s,a,d,f){do yi();while(zs!==null);if((Qe&6)!==0)throw Error(r(327));d=s.finishedWork;var y=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0;var v=d.lanes|d.childLanes;if(cj(s,v),s===At&&(jt=At=null,It=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Sl||(Sl=!0,_g(Do,function(){return yi(),null})),v=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||v){v=br.transition,br.transition=null;var S=et;et=1;var M=Qe;Qe|=4,cu.current=null,__(s,d),cg(d,s),Yj(xd),Vo=!!yd,xd=yd=null,s.current=d,C_(d),ej(),Qe=M,et=S,br.transition=v}else s.current=d;if(Sl&&(Sl=!1,zs=s,El=y),v=s.pendingLanes,v===0&&(Bs=null),sj(d.stateNode),tr(s,xt()),a!==null)for(f=s.onRecoverableError,d=0;d<a.length;d++)y=a[d],f(y.value,{componentStack:y.stack,digest:y.digest});if(Nl)throw Nl=!1,s=fu,fu=null,s;return(El&1)!==0&&s.tag!==0&&yi(),v=s.pendingLanes,(v&1)!==0?s===mu?ka++:(ka=0,mu=s):ka=0,$s(),null}function yi(){if(zs!==null){var s=oh(El),a=br.transition,d=et;try{if(br.transition=null,et=16>s?16:s,zs===null)var f=!1;else{if(s=zs,zs=null,El=0,(Qe&6)!==0)throw Error(r(331));var y=Qe;for(Qe|=4,Te=s.current;Te!==null;){var v=Te,S=v.child;if((Te.flags&16)!==0){var M=v.deletions;if(M!==null){for(var F=0;F<M.length;F++){var Z=M[F];for(Te=Z;Te!==null;){var he=Te;switch(he.tag){case 0:case 11:case 15:Sa(8,he,v)}var ge=he.child;if(ge!==null)ge.return=he,Te=ge;else for(;Te!==null;){he=Te;var me=he.sibling,Pe=he.return;if(ng(he),he===Z){Te=null;break}if(me!==null){me.return=Pe,Te=me;break}Te=Pe}}}var Re=v.alternate;if(Re!==null){var Oe=Re.child;if(Oe!==null){Re.child=null;do{var vt=Oe.sibling;Oe.sibling=null,Oe=vt}while(Oe!==null)}}Te=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,Te=S;else e:for(;Te!==null;){if(v=Te,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Sa(9,v,v.return)}var H=v.sibling;if(H!==null){H.return=v.return,Te=H;break e}Te=v.return}}var V=s.current;for(Te=V;Te!==null;){S=Te;var K=S.child;if((S.subtreeFlags&2064)!==0&&K!==null)K.return=S,Te=K;else e:for(S=V;Te!==null;){if(M=Te,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:jl(9,M)}}catch(Me){yt(M,M.return,Me)}if(M===S){Te=null;break e}var ye=M.sibling;if(ye!==null){ye.return=M.return,Te=ye;break e}Te=M.return}}if(Qe=y,$s(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(Mo,s)}catch{}f=!0}return f}finally{et=d,br.transition=a}}return!1}function bg(s,a,d){a=mi(d,a),a=$p(s,a,1),s=Us(s,a,1),a=Ht(),s!==null&&(Zi(s,1,a),tr(s,a))}function yt(s,a,d){if(s.tag===3)bg(s,s,d);else for(;a!==null;){if(a.tag===3){bg(a,s,d);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Bs===null||!Bs.has(f))){s=mi(d,s),s=Fp(a,s,1),a=Us(a,s,1),s=Ht(),a!==null&&(Zi(a,1,s),tr(a,s));break}}a=a.return}}function T_(s,a,d){var f=s.pingCache;f!==null&&f.delete(a),a=Ht(),s.pingedLanes|=s.suspendedLanes&d,At===s&&(It&d)===d&&(St===4||St===3&&(It&130023424)===It&&500>xt()-uu?wn(s,0):du|=d),tr(s,a)}function wg(s,a){a===0&&((s.mode&1)===0?a=1:(a=Lo,Lo<<=1,(Lo&130023424)===0&&(Lo=4194304)));var d=Ht();s=ds(s,a),s!==null&&(Zi(s,a,d),tr(s,d))}function A_(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),wg(s,d)}function R_(s,a){var d=0;switch(s.tag){case 13:var f=s.stateNode,y=s.memoizedState;y!==null&&(d=y.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(a),wg(s,d)}var jg;jg=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||Jt.current)Zt=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return Zt=!1,v_(s,a,d);Zt=(s.flags&131072)!==0}else Zt=!1,ft&&(a.flags&1048576)!==0&&tp(a,il,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;bl(s,a),s=a.pendingProps;var y=ii(a,Ft.current);ui(a,d),y=Bd(null,a,f,s,y,d);var v=zd();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Xt(f)?(v=!0,rl(a)):v=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Md(a),y.updater=xl,a.stateNode=y,y._reactInternals=a,Yd(a,f,s,d),a=Zd(null,a,f,!0,v,d)):(a.tag=0,ft&&v&&Nd(a),Wt(null,a,y,d),a=a.child),a;case 16:f=a.elementType;e:{switch(bl(s,a),s=a.pendingProps,y=f._init,f=y(f._payload),a.type=f,y=a.tag=D_(f),s=Or(f,s),y){case 0:a=Xd(null,a,f,s,d);break e;case 1:a=Kp(null,a,f,s,d);break e;case 11:a=zp(null,a,f,s,d);break e;case 14:a=qp(null,a,f,Or(f.type,s),d);break e}throw Error(r(306,f,""))}return a;case 0:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:Or(f,y),Xd(s,a,f,y,d);case 1:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:Or(f,y),Kp(s,a,f,y,d);case 3:e:{if(Yp(a),s===null)throw Error(r(387));f=a.pendingProps,v=a.memoizedState,y=v.element,dp(s,a),ul(a,f,null,d);var S=a.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){y=mi(Error(r(423)),a),a=Qp(s,a,f,d,y);break e}else if(f!==y){y=mi(Error(r(424)),a),a=Qp(s,a,f,d,y);break e}else for(dr=Ms(a.stateNode.containerInfo.firstChild),cr=a,ft=!0,Rr=null,d=lp(a,null,f,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(li(),f===y){a=fs(s,a,d);break e}Wt(s,a,f,d)}a=a.child}return a;case 5:return mp(a),s===null&&Pd(a),f=a.type,y=a.pendingProps,v=s!==null?s.memoizedProps:null,S=y.children,vd(f,y)?S=null:v!==null&&vd(f,v)&&(a.flags|=32),Gp(s,a),Wt(s,a,S,d),a.child;case 6:return s===null&&Pd(a),null;case 13:return Jp(s,a,d);case 4:return Id(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=ci(a,null,f,d):Wt(s,a,f,d),a.child;case 11:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:Or(f,y),zp(s,a,f,y,d);case 7:return Wt(s,a,a.pendingProps,d),a.child;case 8:return Wt(s,a,a.pendingProps.children,d),a.child;case 12:return Wt(s,a,a.pendingProps.children,d),a.child;case 10:e:{if(f=a.type._context,y=a.pendingProps,v=a.memoizedProps,S=y.value,it(ll,f._currentValue),f._currentValue=S,v!==null)if(Ar(v.value,S)){if(v.children===y.children&&!Jt.current){a=fs(s,a,d);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var M=v.dependencies;if(M!==null){S=v.child;for(var F=M.firstContext;F!==null;){if(F.context===f){if(v.tag===1){F=us(-1,d&-d),F.tag=2;var Z=v.updateQueue;if(Z!==null){Z=Z.shared;var he=Z.pending;he===null?F.next=F:(F.next=he.next,he.next=F),Z.pending=F}}v.lanes|=d,F=v.alternate,F!==null&&(F.lanes|=d),Od(v.return,d,a),M.lanes|=d;break}F=F.next}}else if(v.tag===10)S=v.type===a.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(r(341));S.lanes|=d,M=S.alternate,M!==null&&(M.lanes|=d),Od(S,d,a),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===a){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Wt(s,a,y.children,d),a=a.child}return a;case 9:return y=a.type,f=a.pendingProps.children,ui(a,d),y=xr(y),f=f(y),a.flags|=1,Wt(s,a,f,d),a.child;case 14:return f=a.type,y=Or(f,a.pendingProps),y=Or(f.type,y),qp(s,a,f,y,d);case 15:return Wp(s,a,a.type,a.pendingProps,d);case 17:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:Or(f,y),bl(s,a),a.tag=1,Xt(f)?(s=!0,rl(a)):s=!1,ui(a,d),Ip(a,f,y),Yd(a,f,y,d),Zd(null,a,f,!0,s,d);case 19:return Zp(s,a,d);case 22:return Hp(s,a,d)}throw Error(r(156,a.tag))};function _g(s,a){return rh(s,a)}function O_(s,a,d,f){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(s,a,d,f){return new O_(s,a,d,f)}function vu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function D_(s){if(typeof s=="function")return vu(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ie)return 11;if(s===de)return 14}return 2}function Hs(s,a){var d=s.alternate;return d===null?(d=wr(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function Al(s,a,d,f,y,v){var S=2;if(f=s,typeof s=="function")vu(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case L:return _n(d.children,y,v,a);case I:S=8,y|=8;break;case J:return s=wr(12,d,a,y|2),s.elementType=J,s.lanes=v,s;case be:return s=wr(13,d,a,y),s.elementType=be,s.lanes=v,s;case G:return s=wr(19,d,a,y),s.elementType=G,s.lanes=v,s;case ne:return Rl(d,y,v,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Q:S=10;break e;case we:S=9;break e;case ie:S=11;break e;case de:S=14;break e;case U:S=16,f=null;break e}throw Error(r(130,s==null?s:typeof s,""))}return a=wr(S,d,a,y),a.elementType=s,a.type=f,a.lanes=v,a}function _n(s,a,d,f){return s=wr(7,s,f,a),s.lanes=d,s}function Rl(s,a,d,f){return s=wr(22,s,f,a),s.elementType=ne,s.lanes=d,s.stateNode={isHidden:!1},s}function bu(s,a,d){return s=wr(6,s,null,a),s.lanes=d,s}function wu(s,a,d){return a=wr(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function M_(s,a,d,f,y){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kc(0),this.expirationTimes=Kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kc(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function ju(s,a,d,f,y,v,S,M,F){return s=new M_(s,a,d,M,F),a===1?(a=1,v===!0&&(a|=8)):a=0,v=wr(3,null,null,a),s.current=v,v.stateNode=s,v.memoizedState={element:f,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Md(v),s}function I_(s,a,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:f==null?null:""+f,children:s,containerInfo:a,implementation:d}}function Cg(s){if(!s)return Ls;s=s._reactInternals;e:{if(rt(s)!==s||s.tag!==1)throw Error(r(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Xt(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(r(171))}if(s.tag===1){var d=s.type;if(Xt(d))return Xh(s,d,a)}return a}function Ng(s,a,d,f,y,v,S,M,F){return s=ju(d,f,!0,s,y,v,S,M,F),s.context=Cg(null),d=s.current,f=Ht(),y=qs(d),v=us(f,y),v.callback=a??null,Us(d,v,y),s.current.lanes=y,Zi(s,y,f),tr(s,f),s}function Ol(s,a,d,f){var y=a.current,v=Ht(),S=qs(y);return d=Cg(d),a.context===null?a.context=d:a.pendingContext=d,a=us(v,S),a.payload={element:s},f=f===void 0?null:f,f!==null&&(a.callback=f),s=Us(y,a,S),s!==null&&(Ir(s,y,S,v),dl(s,y,S)),S}function Dl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Sg(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function _u(s,a){Sg(s,a),(s=s.alternate)&&Sg(s,a)}function L_(){return null}var Eg=typeof reportError=="function"?reportError:function(s){console.error(s)};function Cu(s){this._internalRoot=s}Ml.prototype.render=Cu.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));Ol(s,a,null,null)},Ml.prototype.unmount=Cu.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;bn(function(){Ol(null,s,null,null)}),a[as]=null}};function Ml(s){this._internalRoot=s}Ml.prototype.unstable_scheduleHydration=function(s){if(s){var a=dh();s={blockedOn:null,target:s,priority:a};for(var d=0;d<Rs.length&&a!==0&&a<Rs[d].priority;d++);Rs.splice(d,0,s),d===0&&mh(s)}};function Nu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Il(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Pg(){}function $_(s,a,d,f,y){if(y){if(typeof f=="function"){var v=f;f=function(){var Z=Dl(S);v.call(Z)}}var S=Ng(a,f,s,0,null,!1,!1,"",Pg);return s._reactRootContainer=S,s[as]=S.current,ma(s.nodeType===8?s.parentNode:s),bn(),S}for(;y=s.lastChild;)s.removeChild(y);if(typeof f=="function"){var M=f;f=function(){var Z=Dl(F);M.call(Z)}}var F=ju(s,0,!1,null,null,!1,!1,"",Pg);return s._reactRootContainer=F,s[as]=F.current,ma(s.nodeType===8?s.parentNode:s),bn(function(){Ol(a,F,d,f)}),F}function Ll(s,a,d,f,y){var v=d._reactRootContainer;if(v){var S=v;if(typeof y=="function"){var M=y;y=function(){var F=Dl(S);M.call(F)}}Ol(a,S,s,y)}else S=$_(d,a,s,y,f);return Dl(S)}lh=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=Xi(a.pendingLanes);d!==0&&(Yc(a,d|1),tr(a,xt()),(Qe&6)===0&&(gi=xt()+500,$s()))}break;case 13:bn(function(){var f=ds(s,1);if(f!==null){var y=Ht();Ir(f,s,1,y)}}),_u(s,1)}},Qc=function(s){if(s.tag===13){var a=ds(s,134217728);if(a!==null){var d=Ht();Ir(a,s,134217728,d)}_u(s,134217728)}},ch=function(s){if(s.tag===13){var a=qs(s),d=ds(s,a);if(d!==null){var f=Ht();Ir(d,s,a,f)}_u(s,a)}},dh=function(){return et},uh=function(s,a){var d=et;try{return et=s,a()}finally{et=d}},Gn=function(s,a,d){switch(a){case"input":if(B(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var f=d[a];if(f!==s&&f.form===s.form){var y=el(f);if(!y)throw Error(r(90));Ie(f),B(f,y)}}}break;case"textarea":wt(s,d);break;case"select":a=d.value,a!=null&&je(s,!!d.multiple,a,!1)}},To=gu,Ao=bn;var F_={usingClientEntryPoint:!1,Events:[ga,si,el,Po,ko,gu]},Ta={findFiberByHostInstance:fn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U_={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=eh(s),s===null?null:s.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||L_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{Mo=$l.inject(U_),Hr=$l}catch{}}return rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F_,rr.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nu(a))throw Error(r(200));return I_(s,a,null,d)},rr.createRoot=function(s,a){if(!Nu(s))throw Error(r(299));var d=!1,f="",y=Eg;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=ju(s,1,!1,null,null,d,!1,f,y),s[as]=a.current,ma(s.nodeType===8?s.parentNode:s),new Cu(a)},rr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=eh(a),s=s===null?null:s.stateNode,s},rr.flushSync=function(s){return bn(s)},rr.hydrate=function(s,a,d){if(!Il(a))throw Error(r(200));return Ll(null,s,a,!0,d)},rr.hydrateRoot=function(s,a,d){if(!Nu(s))throw Error(r(405));var f=d!=null&&d.hydratedSources||null,y=!1,v="",S=Eg;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),a=Ng(a,null,s,1,d??null,y,!1,v,S),s[as]=a.current,ma(s),f)for(s=0;s<f.length;s++)d=f[s],y=d._getVersion,y=y(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,y]:a.mutableSourceEagerHydrationData.push(d,y);return new Ml(a)},rr.render=function(s,a,d){if(!Il(a))throw Error(r(200));return Ll(null,s,a,!1,d)},rr.unmountComponentAtNode=function(s){if(!Il(s))throw Error(r(40));return s._reactRootContainer?(bn(function(){Ll(null,null,s,!1,function(){s._reactRootContainer=null,s[as]=null})}),!0):!1},rr.unstable_batchedUpdates=gu,rr.unstable_renderSubtreeIntoContainer=function(s,a,d,f){if(!Il(d))throw Error(r(200));if(s==null||s._reactInternals===void 0)throw Error(r(38));return Ll(s,a,d,!1,f)},rr.version="18.3.1-next-f1338f8080-20240426",rr}var Ig;function nv(){if(Ig)return Pu.exports;Ig=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Pu.exports=Y_(),Pu.exports}var Lg;function Q_(){if(Lg)return Fl;Lg=1;var t=nv();return Fl.createRoot=t.createRoot,Fl.hydrateRoot=t.hydrateRoot,Fl}var J_=Q_();const X_=$n(J_);var Au,$g;function Z_(){if($g)return Au;$g=1;var t=typeof Element<"u",e=typeof Map=="function",r=typeof Set=="function",i=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function o(l,c){if(l===c)return!0;if(l&&c&&typeof l=="object"&&typeof c=="object"){if(l.constructor!==c.constructor)return!1;var u,m,h;if(Array.isArray(l)){if(u=l.length,u!=c.length)return!1;for(m=u;m--!==0;)if(!o(l[m],c[m]))return!1;return!0}var p;if(e&&l instanceof Map&&c instanceof Map){if(l.size!==c.size)return!1;for(p=l.entries();!(m=p.next()).done;)if(!c.has(m.value[0]))return!1;for(p=l.entries();!(m=p.next()).done;)if(!o(m.value[1],c.get(m.value[0])))return!1;return!0}if(r&&l instanceof Set&&c instanceof Set){if(l.size!==c.size)return!1;for(p=l.entries();!(m=p.next()).done;)if(!c.has(m.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(c)){if(u=l.length,u!=c.length)return!1;for(m=u;m--!==0;)if(l[m]!==c[m])return!1;return!0}if(l.constructor===RegExp)return l.source===c.source&&l.flags===c.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof c.valueOf=="function")return l.valueOf()===c.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof c.toString=="function")return l.toString()===c.toString();if(h=Object.keys(l),u=h.length,u!==Object.keys(c).length)return!1;for(m=u;m--!==0;)if(!Object.prototype.hasOwnProperty.call(c,h[m]))return!1;if(t&&l instanceof Element)return!1;for(m=u;m--!==0;)if(!((h[m]==="_owner"||h[m]==="__v"||h[m]==="__o")&&l.$$typeof)&&!o(l[h[m]],c[h[m]]))return!1;return!0}return l!==l&&c!==c}return Au=function(c,u){try{return o(c,u)}catch(m){if((m.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw m}},Au}var eC=Z_();const tC=$n(eC);var Ru,Fg;function rC(){if(Fg)return Ru;Fg=1;var t=function(e,r,i,o,l,c,u,m){if(!e){var h;if(r===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[i,o,l,c,u,m],g=0;h=new Error(r.replace(/%s/g,function(){return p[g++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return Ru=t,Ru}var sC=rC();const Ug=$n(sC);var Ou,Vg;function nC(){return Vg||(Vg=1,Ou=function(e,r,i,o){var l=i?i.call(o,e,r):void 0;if(l!==void 0)return!!l;if(e===r)return!0;if(typeof e!="object"||!e||typeof r!="object"||!r)return!1;var c=Object.keys(e),u=Object.keys(r);if(c.length!==u.length)return!1;for(var m=Object.prototype.hasOwnProperty.bind(r),h=0;h<c.length;h++){var p=c[h];if(!m(p))return!1;var g=e[p],x=r[p];if(l=i?i.call(o,g,x,p):void 0,l===!1||l===void 0&&g!==x)return!1}return!0}),Ou}var iC=nC();const aC=$n(iC);var iv=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(iv||{}),Du={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Bg=Object.values(iv),sm={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},oC=Object.entries(sm).reduce((t,[e,r])=>(t[r]=e,t),{}),Fr="data-rh",Ii={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Li=(t,e)=>{for(let r=t.length-1;r>=0;r-=1){const i=t[r];if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}return null},lC=t=>{let e=Li(t,"title");const r=Li(t,Ii.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),r&&e)return r.replace(/%s/g,()=>e);const i=Li(t,Ii.DEFAULT_TITLE);return e||i||void 0},cC=t=>Li(t,Ii.ON_CHANGE_CLIENT_STATE)||(()=>{}),Mu=(t,e)=>e.filter(r=>typeof r[t]<"u").map(r=>r[t]).reduce((r,i)=>({...r,...i}),{}),dC=(t,e)=>e.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,i)=>{if(!r.length){const o=Object.keys(i);for(let l=0;l<o.length;l+=1){const u=o[l].toLowerCase();if(t.indexOf(u)!==-1&&i[u])return r.concat(i)}}return r},[]),uC=t=>console&&typeof console.warn=="function"&&console.warn(t),Ra=(t,e,r)=>{const i={};return r.filter(o=>Array.isArray(o[t])?!0:(typeof o[t]<"u"&&uC(`Helmet: ${t} should be of type "Array". Instead found type "${typeof o[t]}"`),!1)).map(o=>o[t]).reverse().reduce((o,l)=>{const c={};l.filter(m=>{let h;const p=Object.keys(m);for(let x=0;x<p.length;x+=1){const b=p[x],j=b.toLowerCase();e.indexOf(j)!==-1&&!(h==="rel"&&m[h].toLowerCase()==="canonical")&&!(j==="rel"&&m[j].toLowerCase()==="stylesheet")&&(h=j),e.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(h=b)}if(!h||!m[h])return!1;const g=m[h].toLowerCase();return i[h]||(i[h]={}),c[h]||(c[h]={}),i[h][g]?!1:(c[h][g]=!0,!0)}).reverse().forEach(m=>o.push(m));const u=Object.keys(c);for(let m=0;m<u.length;m+=1){const h=u[m],p={...i[h],...c[h]};i[h]=p}return o},[]).reverse()},fC=(t,e)=>{if(Array.isArray(t)&&t.length){for(let r=0;r<t.length;r+=1)if(t[r][e])return!0}return!1},mC=t=>({baseTag:dC(["href"],t),bodyAttributes:Mu("bodyAttributes",t),defer:Li(t,Ii.DEFER),encode:Li(t,Ii.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Mu("htmlAttributes",t),linkTags:Ra("link",["rel","href"],t),metaTags:Ra("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Ra("noscript",["innerHTML"],t),onChangeClientState:cC(t),scriptTags:Ra("script",["src","innerHTML"],t),styleTags:Ra("style",["cssText"],t),title:lC(t),titleAttributes:Mu("titleAttributes",t),prioritizeSeoTags:fC(t,Ii.PRIORITIZE_SEO_TAGS)}),av=t=>Array.isArray(t)?t.join(""):t,hC=(t,e)=>{const r=Object.keys(t);for(let i=0;i<r.length;i+=1)if(e[r[i]]&&e[r[i]].includes(t[r[i]]))return!0;return!1},Iu=(t,e)=>Array.isArray(t)?t.reduce((r,i)=>(hC(i,e)?r.priority.push(i):r.default.push(i),r),{priority:[],default:[]}):{default:t,priority:[]},zg=(t,e)=>({...t,[e]:void 0}),pC=["noscript","script","style"],hf=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),ov=t=>Object.keys(t).reduce((e,r)=>{const i=typeof t[r]<"u"?`${r}="${t[r]}"`:`${r}`;return e?`${e} ${i}`:i},""),gC=(t,e,r,i)=>{const o=ov(r),l=av(e);return o?`<${t} ${Fr}="true" ${o}>${hf(l,i)}</${t}>`:`<${t} ${Fr}="true">${hf(l,i)}</${t}>`},yC=(t,e,r=!0)=>e.reduce((i,o)=>{const l=o,c=Object.keys(l).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,p)=>{const g=typeof l[p]>"u"?p:`${p}="${hf(l[p],r)}"`;return h?`${h} ${g}`:g},""),u=l.innerHTML||l.cssText||"",m=pC.indexOf(t)===-1;return`${i}<${t} ${Fr}="true" ${c}${m?"/>":`>${u}</${t}>`}`},""),lv=(t,e={})=>Object.keys(t).reduce((r,i)=>{const o=sm[i];return r[o||i]=t[i],r},e),xC=(t,e,r)=>{const i={key:e,[Fr]:!0},o=lv(r,i);return[st.createElement("title",o,e)]},Zl=(t,e)=>e.map((r,i)=>{const o={key:i,[Fr]:!0};return Object.keys(r).forEach(l=>{const u=sm[l]||l;if(u==="innerHTML"||u==="cssText"){const m=r.innerHTML||r.cssText;o.dangerouslySetInnerHTML={__html:m}}else o[u]=r[l]}),st.createElement(t,o)}),Nr=(t,e,r=!0)=>{switch(t){case"title":return{toComponent:()=>xC(t,e.title,e.titleAttributes),toString:()=>gC(t,e.title,e.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>lv(e),toString:()=>ov(e)};default:return{toComponent:()=>Zl(t,e),toString:()=>yC(t,e,r)}}},vC=({metaTags:t,linkTags:e,scriptTags:r,encode:i})=>{const o=Iu(t,Du.meta),l=Iu(e,Du.link),c=Iu(r,Du.script);return{priorityMethods:{toComponent:()=>[...Zl("meta",o.priority),...Zl("link",l.priority),...Zl("script",c.priority)],toString:()=>`${Nr("meta",o.priority,i)} ${Nr("link",l.priority,i)} ${Nr("script",c.priority,i)}`},metaTags:o.default,linkTags:l.default,scriptTags:c.default}},bC=t=>{const{baseTag:e,bodyAttributes:r,encode:i=!0,htmlAttributes:o,noscriptTags:l,styleTags:c,title:u="",titleAttributes:m,prioritizeSeoTags:h}=t;let{linkTags:p,metaTags:g,scriptTags:x}=t,b={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:b,linkTags:p,metaTags:g,scriptTags:x}=vC(t)),{priority:b,base:Nr("base",e,i),bodyAttributes:Nr("bodyAttributes",r,i),htmlAttributes:Nr("htmlAttributes",o,i),link:Nr("link",p,i),meta:Nr("meta",g,i),noscript:Nr("noscript",l,i),script:Nr("script",x,i),style:Nr("style",c,i),title:Nr("title",{title:u,titleAttributes:m},i)}},pf=bC,Ul=[],cv=!!(typeof window<"u"&&window.document&&window.document.createElement),gf=class{instances=[];canUseDOM=cv;context;value={setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Ul:this.instances,add:t=>{(this.canUseDOM?Ul:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Ul:this.instances).indexOf(t);(this.canUseDOM?Ul:this.instances).splice(e,1)}}};constructor(t,e){this.context=t,this.canUseDOM=e||!1,e||(t.helmet=pf({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},wC={},dv=st.createContext(wC),uv=class fv extends w.Component{static canUseDOM=cv;helmetData;constructor(e){super(e),this.helmetData=new gf(this.props.context||{},fv.canUseDOM)}render(){return st.createElement(dv.Provider,{value:this.helmetData.value},this.props.children)}},xi=(t,e)=>{const r=document.head||document.querySelector("head"),i=r.querySelectorAll(`${t}[${Fr}]`),o=[].slice.call(i),l=[];let c;return e&&e.length&&e.forEach(u=>{const m=document.createElement(t);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h))if(h==="innerHTML")m.innerHTML=u.innerHTML;else if(h==="cssText")m.styleSheet?m.styleSheet.cssText=u.cssText:m.appendChild(document.createTextNode(u.cssText));else{const p=h,g=typeof u[p]>"u"?"":u[p];m.setAttribute(h,g)}m.setAttribute(Fr,"true"),o.some((h,p)=>(c=p,m.isEqualNode(h)))?o.splice(c,1):l.push(m)}),o.forEach(u=>u.parentNode?.removeChild(u)),l.forEach(u=>r.appendChild(u)),{oldTags:o,newTags:l}},yf=(t,e)=>{const r=document.getElementsByTagName(t)[0];if(!r)return;const i=r.getAttribute(Fr),o=i?i.split(","):[],l=[...o],c=Object.keys(e);for(const u of c){const m=e[u]||"";r.getAttribute(u)!==m&&r.setAttribute(u,m),o.indexOf(u)===-1&&o.push(u);const h=l.indexOf(u);h!==-1&&l.splice(h,1)}for(let u=l.length-1;u>=0;u-=1)r.removeAttribute(l[u]);o.length===l.length?r.removeAttribute(Fr):r.getAttribute(Fr)!==c.join(",")&&r.setAttribute(Fr,c.join(","))},jC=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=av(t)),yf("title",e)},qg=(t,e)=>{const{baseTag:r,bodyAttributes:i,htmlAttributes:o,linkTags:l,metaTags:c,noscriptTags:u,onChangeClientState:m,scriptTags:h,styleTags:p,title:g,titleAttributes:x}=t;yf("body",i),yf("html",o),jC(g,x);const b={baseTag:xi("base",r),linkTags:xi("link",l),metaTags:xi("meta",c),noscriptTags:xi("noscript",u),scriptTags:xi("script",h),styleTags:xi("style",p)},j={},C={};Object.keys(b).forEach(_=>{const{newTags:O,oldTags:A}=b[_];O.length&&(j[_]=O),A.length&&(C[_]=b[_].oldTags)}),e&&e(),m(t,j,C)},Oa=null,_C=t=>{Oa&&cancelAnimationFrame(Oa),t.defer?Oa=requestAnimationFrame(()=>{qg(t,()=>{Oa=null})}):(qg(t),Oa=null)},CC=_C,Wg=class extends w.Component{rendered=!1;shouldComponentUpdate(t){return!aC(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:e}=this.props.context;let r=null;const i=mC(t.get().map(o=>{const l={...o.props};return delete l.context,l}));uv.canUseDOM?CC(i):pf&&(r=pf(i)),e(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},NC=class extends w.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(t){return!tC(zg(this.props,"helmetData"),zg(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,r,i){return{...e,[t.type]:[...e[t.type]||[],{...r,...this.mapNestedChildrenToProps(t,i)}]}}mapObjectTypeChildren(t,e,r,i){switch(t.type){case"title":return{...e,[t.type]:i,titleAttributes:{...r}};case"body":return{...e,bodyAttributes:{...r}};case"html":return{...e,htmlAttributes:{...r}};default:return{...e,[t.type]:{...r}}}}mapArrayTypeChildrenToProps(t,e){let r={...e};return Object.keys(t).forEach(i=>{r={...r,[i]:t[i]}}),r}warnOnInvalidChildren(t,e){return Ug(Bg.some(r=>t.type===r),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Bg.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),Ug(!e||typeof e=="string"||Array.isArray(e)&&!e.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let r={};return st.Children.forEach(t,i=>{if(!i||!i.props)return;const{children:o,...l}=i.props,c=Object.keys(l).reduce((m,h)=>(m[oC[h]||h]=l[h],m),{});let{type:u}=i;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(i,o),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(o,e);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(i,r,c,o);break;default:e=this.mapObjectTypeChildren(i,e,c,o);break}}),this.mapArrayTypeChildrenToProps(r,e)}render(){const{children:t,...e}=this.props;let r={...e},{helmetData:i}=e;if(t&&(r=this.mapChildrenToProps(t,r)),i&&!(i instanceof gf)){const o=i;i=new gf(o.context,!0),delete r.helmetData}return i?st.createElement(Wg,{...r,context:i.value}):st.createElement(dv.Consumer,null,o=>st.createElement(Wg,{...r,context:o}))}};const mv=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),jc=w.createContext({}),_c=w.createContext(null),Cc=typeof document<"u",nm=Cc?w.useLayoutEffect:w.useEffect,hv=w.createContext({strict:!1}),im=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),SC="framerAppearId",pv="data-"+im(SC);function EC(t,e,r,i){const{visualElement:o}=w.useContext(jc),l=w.useContext(hv),c=w.useContext(_c),u=w.useContext(mv).reducedMotion,m=w.useRef();i=i||l.renderer,!m.current&&i&&(m.current=i(t,{visualState:e,parent:o,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=m.current;w.useInsertionEffect(()=>{h&&h.update(r,c)});const p=w.useRef(!!(r[pv]&&!window.HandoffComplete));return nm(()=>{h&&(h.render(),p.current&&h.animationState&&h.animationState.animateChanges())}),w.useEffect(()=>{h&&(h.updateFeatures(),!p.current&&h.animationState&&h.animationState.animateChanges(),p.current&&(p.current=!1,window.HandoffComplete=!0))}),h}function Ri(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function PC(t,e,r){return w.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),r&&(typeof r=="function"?r(i):Ri(r)&&(r.current=i))},[e])}function ro(t){return typeof t=="string"||Array.isArray(t)}function Nc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const am=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],om=["initial",...am];function Sc(t){return Nc(t.animate)||om.some(e=>ro(t[e]))}function gv(t){return!!(Sc(t)||t.variants)}function kC(t,e){if(Sc(t)){const{initial:r,animate:i}=t;return{initial:r===!1||ro(r)?r:void 0,animate:ro(i)?i:void 0}}return t.inherit!==!1?e:{}}function TC(t){const{initial:e,animate:r}=kC(t,w.useContext(jc));return w.useMemo(()=>({initial:e,animate:r}),[Hg(e),Hg(r)])}function Hg(t){return Array.isArray(t)?t.join(" "):t}const Gg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},so={};for(const t in Gg)so[t]={isEnabled:e=>Gg[t].some(r=>!!e[r])};function AC(t){for(const e in t)so[e]={...so[e],...t[e]}}const lm=w.createContext({}),yv=w.createContext({}),RC=Symbol.for("motionComponentSymbol");function OC({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:i,Component:o}){t&&AC(t);function l(u,m){let h;const p={...w.useContext(mv),...u,layoutId:DC(u)},{isStatic:g}=p,x=TC(u),b=i(u,g);if(!g&&Cc){x.visualElement=EC(o,b,p,e);const j=w.useContext(yv),C=w.useContext(hv).strict;x.visualElement&&(h=x.visualElement.loadFeatures(p,C,t,j))}return w.createElement(jc.Provider,{value:x},h&&x.visualElement?w.createElement(h,{visualElement:x.visualElement,...p}):null,r(o,u,PC(b,x.visualElement,m),b,g,x.visualElement))}const c=w.forwardRef(l);return c[RC]=o,c}function DC({layoutId:t}){const e=w.useContext(lm).id;return e&&t!==void 0?e+"-"+t:t}function MC(t){function e(i,o={}){return OC(t(i,o))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(i,o)=>(r.has(o)||r.set(o,e(o)),r.get(o))})}const IC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cm(t){return typeof t!="string"||t.includes("-")?!1:!!(IC.indexOf(t)>-1||/[A-Z]/.test(t))}const nc={};function LC(t){Object.assign(nc,t)}const go=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fn=new Set(go);function xv(t,{layout:e,layoutId:r}){return Fn.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!nc[t]||t==="opacity")}const nr=t=>!!(t&&t.getVelocity),$C={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FC=go.length;function UC(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},i,o){let l="";for(let c=0;c<FC;c++){const u=go[c];if(t[u]!==void 0){const m=$C[u]||u;l+=`${m}(${t[u]}) `}}return e&&!t.z&&(l+="translateZ(0)"),l=l.trim(),o?l=o(t,i?"":l):r&&i&&(l="none"),l}const vv=t=>e=>typeof e=="string"&&e.startsWith(t),bv=vv("--"),xf=vv("var(--"),VC=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,BC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,rn=(t,e,r)=>Math.min(Math.max(r,t),e),Un={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ha={...Un,transform:t=>rn(0,1,t)},Vl={...Un,default:1},Ga=t=>Math.round(t*1e5)/1e5,Ec=/(-)?([\d]*\.?[\d])+/g,wv=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,zC=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function yo(t){return typeof t=="string"}const xo=t=>({test:e=>yo(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Js=xo("deg"),es=xo("%"),Ue=xo("px"),qC=xo("vh"),WC=xo("vw"),Kg={...es,parse:t=>es.parse(t)/100,transform:t=>es.transform(t*100)},Yg={...Un,transform:Math.round},jv={borderWidth:Ue,borderTopWidth:Ue,borderRightWidth:Ue,borderBottomWidth:Ue,borderLeftWidth:Ue,borderRadius:Ue,radius:Ue,borderTopLeftRadius:Ue,borderTopRightRadius:Ue,borderBottomRightRadius:Ue,borderBottomLeftRadius:Ue,width:Ue,maxWidth:Ue,height:Ue,maxHeight:Ue,size:Ue,top:Ue,right:Ue,bottom:Ue,left:Ue,padding:Ue,paddingTop:Ue,paddingRight:Ue,paddingBottom:Ue,paddingLeft:Ue,margin:Ue,marginTop:Ue,marginRight:Ue,marginBottom:Ue,marginLeft:Ue,rotate:Js,rotateX:Js,rotateY:Js,rotateZ:Js,scale:Vl,scaleX:Vl,scaleY:Vl,scaleZ:Vl,skew:Js,skewX:Js,skewY:Js,distance:Ue,translateX:Ue,translateY:Ue,translateZ:Ue,x:Ue,y:Ue,z:Ue,perspective:Ue,transformPerspective:Ue,opacity:Ha,originX:Kg,originY:Kg,originZ:Ue,zIndex:Yg,fillOpacity:Ha,strokeOpacity:Ha,numOctaves:Yg};function dm(t,e,r,i){const{style:o,vars:l,transform:c,transformOrigin:u}=t;let m=!1,h=!1,p=!0;for(const g in e){const x=e[g];if(bv(g)){l[g]=x;continue}const b=jv[g],j=BC(x,b);if(Fn.has(g)){if(m=!0,c[g]=j,!p)continue;x!==(b.default||0)&&(p=!1)}else g.startsWith("origin")?(h=!0,u[g]=j):o[g]=j}if(e.transform||(m||i?o.transform=UC(t.transform,r,p,i):o.transform&&(o.transform="none")),h){const{originX:g="50%",originY:x="50%",originZ:b=0}=u;o.transformOrigin=`${g} ${x} ${b}`}}const um=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _v(t,e,r){for(const i in e)!nr(e[i])&&!xv(i,r)&&(t[i]=e[i])}function HC({transformTemplate:t},e,r){return w.useMemo(()=>{const i=um();return dm(i,e,{enableHardwareAcceleration:!r},t),Object.assign({},i.vars,i.style)},[e])}function GC(t,e,r){const i=t.style||{},o={};return _v(o,i,t),Object.assign(o,HC(t,e,r)),t.transformValues?t.transformValues(o):o}function KC(t,e,r){const i={},o=GC(t,e,r);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=o,i}const YC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ic(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||YC.has(t)}let Cv=t=>!ic(t);function QC(t){t&&(Cv=e=>e.startsWith("on")?!ic(e):t(e))}try{QC(require("@emotion/is-prop-valid").default)}catch{}function JC(t,e,r){const i={};for(const o in t)o==="values"&&typeof t.values=="object"||(Cv(o)||r===!0&&ic(o)||!e&&!ic(o)||t.draggable&&o.startsWith("onDrag"))&&(i[o]=t[o]);return i}function Qg(t,e,r){return typeof t=="string"?t:Ue.transform(e+r*t)}function XC(t,e,r){const i=Qg(e,t.x,t.width),o=Qg(r,t.y,t.height);return`${i} ${o}`}const ZC={offset:"stroke-dashoffset",array:"stroke-dasharray"},eN={offset:"strokeDashoffset",array:"strokeDasharray"};function tN(t,e,r=1,i=0,o=!0){t.pathLength=1;const l=o?ZC:eN;t[l.offset]=Ue.transform(-i);const c=Ue.transform(e),u=Ue.transform(r);t[l.array]=`${c} ${u}`}function fm(t,{attrX:e,attrY:r,attrScale:i,originX:o,originY:l,pathLength:c,pathSpacing:u=1,pathOffset:m=0,...h},p,g,x){if(dm(t,h,p,x),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:j,dimensions:C}=t;b.transform&&(C&&(j.transform=b.transform),delete b.transform),C&&(o!==void 0||l!==void 0||j.transform)&&(j.transformOrigin=XC(C,o!==void 0?o:.5,l!==void 0?l:.5)),e!==void 0&&(b.x=e),r!==void 0&&(b.y=r),i!==void 0&&(b.scale=i),c!==void 0&&tN(b,c,u,m,!1)}const Nv=()=>({...um(),attrs:{}}),mm=t=>typeof t=="string"&&t.toLowerCase()==="svg";function rN(t,e,r,i){const o=w.useMemo(()=>{const l=Nv();return fm(l,e,{enableHardwareAcceleration:!1},mm(i),t.transformTemplate),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};_v(l,t.style,t),o.style={...l,...o.style}}return o}function sN(t=!1){return(r,i,o,{latestValues:l},c)=>{const m=(cm(r)?rN:KC)(i,l,c,r),p={...JC(i,typeof r=="string",t),...m,ref:o},{children:g}=i,x=w.useMemo(()=>nr(g)?g.get():g,[g]);return w.createElement(r,{...p,children:x})}}function Sv(t,{style:e,vars:r},i,o){Object.assign(t.style,e,o&&o.getProjectionStyles(i));for(const l in r)t.style.setProperty(l,r[l])}const Ev=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Pv(t,e,r,i){Sv(t,e,void 0,i);for(const o in e.attrs)t.setAttribute(Ev.has(o)?o:im(o),e.attrs[o])}function hm(t,e){const{style:r}=t,i={};for(const o in r)(nr(r[o])||e.style&&nr(e.style[o])||xv(o,t))&&(i[o]=r[o]);return i}function kv(t,e){const r=hm(t,e);for(const i in t)if(nr(t[i])||nr(e[i])){const o=go.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function pm(t,e,r,i={},o={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,i,o)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,i,o)),e}function Tv(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const ac=t=>Array.isArray(t),nN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),iN=t=>ac(t)?t[t.length-1]||0:t;function ec(t){const e=nr(t)?t.get():t;return nN(e)?e.toValue():e}function aN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},i,o,l){const c={latestValues:oN(i,o,l,t),renderState:e()};return r&&(c.mount=u=>r(i,u,c)),c}const Av=t=>(e,r)=>{const i=w.useContext(jc),o=w.useContext(_c),l=()=>aN(t,e,i,o);return r?l():Tv(l)};function oN(t,e,r,i){const o={},l=i(t,{});for(const x in l)o[x]=ec(l[x]);let{initial:c,animate:u}=t;const m=Sc(t),h=gv(t);e&&h&&!m&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let p=r?r.initial===!1:!1;p=p||c===!1;const g=p?u:c;return g&&typeof g!="boolean"&&!Nc(g)&&(Array.isArray(g)?g:[g]).forEach(b=>{const j=pm(t,b);if(!j)return;const{transitionEnd:C,transition:_,...O}=j;for(const A in O){let E=O[A];if(Array.isArray(E)){const N=p?E.length-1:0;E=E[N]}E!==null&&(o[A]=E)}for(const A in C)o[A]=C[A]}),o}const bt=t=>t;class Jg{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function lN(t){let e=new Jg,r=new Jg,i=0,o=!1,l=!1;const c=new WeakSet,u={schedule:(m,h=!1,p=!1)=>{const g=p&&o,x=g?e:r;return h&&c.add(m),x.add(m)&&g&&o&&(i=e.order.length),m},cancel:m=>{r.remove(m),c.delete(m)},process:m=>{if(o){l=!0;return}if(o=!0,[e,r]=[r,e],r.clear(),i=e.order.length,i)for(let h=0;h<i;h++){const p=e.order[h];p(m),c.has(p)&&(u.schedule(p),t())}o=!1,l&&(l=!1,u.process(m))}};return u}const Bl=["prepare","read","update","preRender","render","postRender"],cN=40;function dN(t,e){let r=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=Bl.reduce((g,x)=>(g[x]=lN(()=>r=!0),g),{}),c=g=>l[g].process(o),u=()=>{const g=performance.now();r=!1,o.delta=i?1e3/60:Math.max(Math.min(g-o.timestamp,cN),1),o.timestamp=g,o.isProcessing=!0,Bl.forEach(c),o.isProcessing=!1,r&&e&&(i=!1,t(u))},m=()=>{r=!0,i=!0,o.isProcessing||t(u)};return{schedule:Bl.reduce((g,x)=>{const b=l[x];return g[x]=(j,C=!1,_=!1)=>(r||m(),b.schedule(j,C,_)),g},{}),cancel:g=>Bl.forEach(x=>l[x].cancel(g)),state:o,steps:l}}const{schedule:ot,cancel:js,state:zt,steps:Lu}=dN(typeof requestAnimationFrame<"u"?requestAnimationFrame:bt,!0),uN={useVisualState:Av({scrapeMotionValuesFromProps:kv,createRenderState:Nv,onMount:(t,e,{renderState:r,latestValues:i})=>{ot.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),ot.render(()=>{fm(r,i,{enableHardwareAcceleration:!1},mm(e.tagName),t.transformTemplate),Pv(e,r)})}})},fN={useVisualState:Av({scrapeMotionValuesFromProps:hm,createRenderState:um})};function mN(t,{forwardMotionProps:e=!1},r,i){return{...cm(t)?uN:fN,preloadedFeatures:r,useRender:sN(e),createVisualElement:i,Component:t}}function ys(t,e,r,i={passive:!0}){return t.addEventListener(e,r,i),()=>t.removeEventListener(e,r)}const Rv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Pc(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const hN=t=>e=>Rv(e)&&t(e,Pc(e));function xs(t,e,r,i){return ys(t,e,hN(r),i)}const pN=(t,e)=>r=>e(t(r)),tn=(...t)=>t.reduce(pN);function Ov(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const Xg=Ov("dragHorizontal"),Zg=Ov("dragVertical");function Dv(t){let e=!1;if(t==="y")e=Zg();else if(t==="x")e=Xg();else{const r=Xg(),i=Zg();r&&i?e=()=>{r(),i()}:(r&&r(),i&&i())}return e}function Mv(){const t=Dv(!0);return t?(t(),!1):!0}class on{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ey(t,e){const r="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),o=(l,c)=>{if(l.pointerType==="touch"||Mv())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&ot.update(()=>u[i](l,c))};return xs(t.current,r,o,{passive:!t.getProps()[i]})}class gN extends on{mount(){this.unmount=tn(ey(this.node,!0),ey(this.node,!1))}unmount(){}}class yN extends on{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tn(ys(this.node.current,"focus",()=>this.onFocus()),ys(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Iv=(t,e)=>e?t===e?!0:Iv(t,e.parentElement):!1;function $u(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,Pc(r))}class xN extends on{constructor(){super(...arguments),this.removeStartListeners=bt,this.removeEndListeners=bt,this.removeAccessibleListeners=bt,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),l=xs(window,"pointerup",(u,m)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:p,globalTapTarget:g}=this.node.getProps();ot.update(()=>{!g&&!Iv(this.node.current,u.target)?p&&p(u,m):h&&h(u,m)})},{passive:!(i.onTap||i.onPointerUp)}),c=xs(window,"pointercancel",(u,m)=>this.cancelPress(u,m),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=tn(l,c),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=l=>{if(l.key!=="Enter"||this.isPressing)return;const c=u=>{u.key!=="Enter"||!this.checkPressEnd()||$u("up",(m,h)=>{const{onTap:p}=this.node.getProps();p&&ot.update(()=>p(m,h))})};this.removeEndListeners(),this.removeEndListeners=ys(this.node.current,"keyup",c),$u("down",(u,m)=>{this.startPress(u,m)})},r=ys(this.node.current,"keydown",e),i=()=>{this.isPressing&&$u("cancel",(l,c)=>this.cancelPress(l,c))},o=ys(this.node.current,"blur",i);this.removeAccessibleListeners=tn(r,o)}}startPress(e,r){this.isPressing=!0;const{onTapStart:i,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&ot.update(()=>i(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Mv()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&ot.update(()=>i(e,r))}mount(){const e=this.node.getProps(),r=xs(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=ys(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=tn(r,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const vf=new WeakMap,Fu=new WeakMap,vN=t=>{const e=vf.get(t.target);e&&e(t)},bN=t=>{t.forEach(vN)};function wN({root:t,...e}){const r=t||document;Fu.has(r)||Fu.set(r,{});const i=Fu.get(r),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(bN,{root:t,...e})),i[o]}function jN(t,e,r){const i=wN(e);return vf.set(t,r),i.observe(t),()=>{vf.delete(t),i.unobserve(t)}}const _N={some:0,all:1};class CN extends on{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:i,amount:o="some",once:l}=e,c={root:r?r.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:_N[o]},u=m=>{const{isIntersecting:h}=m;if(this.isInView===h||(this.isInView=h,l&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),x=h?p:g;x&&x(m)};return jN(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(NN(e,r))&&this.startObserver()}unmount(){}}function NN({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const SN={inView:{Feature:CN},tap:{Feature:xN},focus:{Feature:yN},hover:{Feature:gN}};function Lv(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function EN(t){const e={};return t.values.forEach((r,i)=>e[i]=r.get()),e}function PN(t){const e={};return t.values.forEach((r,i)=>e[i]=r.getVelocity()),e}function kc(t,e,r){const i=t.getProps();return pm(i,e,r!==void 0?r:i.custom,EN(t),PN(t))}let gm=bt;const Mn=t=>t*1e3,vs=t=>t/1e3,kN={current:!1},$v=t=>Array.isArray(t)&&typeof t[0]=="number";function Fv(t){return!!(!t||typeof t=="string"&&Uv[t]||$v(t)||Array.isArray(t)&&t.every(Fv))}const za=([t,e,r,i])=>`cubic-bezier(${t}, ${e}, ${r}, ${i})`,Uv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:za([0,.65,.55,1]),circOut:za([.55,0,1,.45]),backIn:za([.31,.01,.66,-.59]),backOut:za([.33,1.53,.69,.99])};function Vv(t){if(t)return $v(t)?za(t):Array.isArray(t)?t.map(Vv):Uv[t]}function TN(t,e,r,{delay:i=0,duration:o,repeat:l=0,repeatType:c="loop",ease:u,times:m}={}){const h={[e]:r};m&&(h.offset=m);const p=Vv(u);return Array.isArray(p)&&(h.easing=p),t.animate(h,{delay:i,duration:o,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"})}function AN(t,{repeat:e,repeatType:r="loop"}){const i=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[i]}const Bv=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,RN=1e-7,ON=12;function DN(t,e,r,i,o){let l,c,u=0;do c=e+(r-e)/2,l=Bv(c,i,o)-t,l>0?r=c:e=c;while(Math.abs(l)>RN&&++u<ON);return c}function vo(t,e,r,i){if(t===e&&r===i)return bt;const o=l=>DN(l,0,1,t,r);return l=>l===0||l===1?l:Bv(o(l),e,i)}const MN=vo(.42,0,1,1),IN=vo(0,0,.58,1),zv=vo(.42,0,.58,1),LN=t=>Array.isArray(t)&&typeof t[0]!="number",qv=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Wv=t=>e=>1-t(1-e),ym=t=>1-Math.sin(Math.acos(t)),Hv=Wv(ym),$N=qv(ym),Gv=vo(.33,1.53,.69,.99),xm=Wv(Gv),FN=qv(xm),UN=t=>(t*=2)<1?.5*xm(t):.5*(2-Math.pow(2,-10*(t-1))),VN={linear:bt,easeIn:MN,easeInOut:zv,easeOut:IN,circIn:ym,circInOut:$N,circOut:Hv,backIn:xm,backInOut:FN,backOut:Gv,anticipate:UN},ty=t=>{if(Array.isArray(t)){gm(t.length===4);const[e,r,i,o]=t;return vo(e,r,i,o)}else if(typeof t=="string")return VN[t];return t},vm=(t,e)=>r=>!!(yo(r)&&zC.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),Kv=(t,e,r)=>i=>{if(!yo(i))return i;const[o,l,c,u]=i.match(Ec);return{[t]:parseFloat(o),[e]:parseFloat(l),[r]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},BN=t=>rn(0,255,t),Uu={...Un,transform:t=>Math.round(BN(t))},On={test:vm("rgb","red"),parse:Kv("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:i=1})=>"rgba("+Uu.transform(t)+", "+Uu.transform(e)+", "+Uu.transform(r)+", "+Ga(Ha.transform(i))+")"};function zN(t){let e="",r="",i="",o="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),i=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),i=t.substring(3,4),o=t.substring(4,5),e+=e,r+=r,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const bf={test:vm("#"),parse:zN,transform:On.transform},Oi={test:vm("hsl","hue"),parse:Kv("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:i=1})=>"hsla("+Math.round(t)+", "+es.transform(Ga(e))+", "+es.transform(Ga(r))+", "+Ga(Ha.transform(i))+")"},Gt={test:t=>On.test(t)||bf.test(t)||Oi.test(t),parse:t=>On.test(t)?On.parse(t):Oi.test(t)?Oi.parse(t):bf.parse(t),transform:t=>yo(t)?t:t.hasOwnProperty("red")?On.transform(t):Oi.transform(t)},gt=(t,e,r)=>-r*t+r*e+t;function Vu(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function qN({hue:t,saturation:e,lightness:r,alpha:i}){t/=360,e/=100,r/=100;let o=0,l=0,c=0;if(!e)o=l=c=r;else{const u=r<.5?r*(1+e):r+e-r*e,m=2*r-u;o=Vu(m,u,t+1/3),l=Vu(m,u,t),c=Vu(m,u,t-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:i}}const Bu=(t,e,r)=>{const i=t*t;return Math.sqrt(Math.max(0,r*(e*e-i)+i))},WN=[bf,On,Oi],HN=t=>WN.find(e=>e.test(t));function ry(t){const e=HN(t);let r=e.parse(t);return e===Oi&&(r=qN(r)),r}const Yv=(t,e)=>{const r=ry(t),i=ry(e),o={...r};return l=>(o.red=Bu(r.red,i.red,l),o.green=Bu(r.green,i.green,l),o.blue=Bu(r.blue,i.blue,l),o.alpha=gt(r.alpha,i.alpha,l),On.transform(o))};function GN(t){var e,r;return isNaN(t)&&yo(t)&&(((e=t.match(Ec))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(wv))===null||r===void 0?void 0:r.length)||0)>0}const Qv={regex:VC,countKey:"Vars",token:"${v}",parse:bt},Jv={regex:wv,countKey:"Colors",token:"${c}",parse:Gt.parse},Xv={regex:Ec,countKey:"Numbers",token:"${n}",parse:Un.parse};function zu(t,{regex:e,countKey:r,token:i,parse:o}){const l=t.tokenised.match(e);l&&(t["num"+r]=l.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...l.map(o)))}function oc(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&zu(r,Qv),zu(r,Jv),zu(r,Xv),r}function Zv(t){return oc(t).values}function e0(t){const{values:e,numColors:r,numVars:i,tokenised:o}=oc(t),l=e.length;return c=>{let u=o;for(let m=0;m<l;m++)m<i?u=u.replace(Qv.token,c[m]):m<i+r?u=u.replace(Jv.token,Gt.transform(c[m])):u=u.replace(Xv.token,Ga(c[m]));return u}}const KN=t=>typeof t=="number"?0:t;function YN(t){const e=Zv(t);return e0(t)(e.map(KN))}const sn={test:GN,parse:Zv,createTransformer:e0,getAnimatableNone:YN},t0=(t,e)=>r=>`${r>0?e:t}`;function r0(t,e){return typeof t=="number"?r=>gt(t,e,r):Gt.test(t)?Yv(t,e):t.startsWith("var(")?t0(t,e):n0(t,e)}const s0=(t,e)=>{const r=[...t],i=r.length,o=t.map((l,c)=>r0(l,e[c]));return l=>{for(let c=0;c<i;c++)r[c]=o[c](l);return r}},QN=(t,e)=>{const r={...t,...e},i={};for(const o in r)t[o]!==void 0&&e[o]!==void 0&&(i[o]=r0(t[o],e[o]));return o=>{for(const l in i)r[l]=i[l](o);return r}},n0=(t,e)=>{const r=sn.createTransformer(e),i=oc(t),o=oc(e);return i.numVars===o.numVars&&i.numColors===o.numColors&&i.numNumbers>=o.numNumbers?tn(s0(i.values,o.values),r):t0(t,e)},no=(t,e,r)=>{const i=e-t;return i===0?1:(r-t)/i},sy=(t,e)=>r=>gt(t,e,r);function JN(t){return typeof t=="number"?sy:typeof t=="string"?Gt.test(t)?Yv:n0:Array.isArray(t)?s0:typeof t=="object"?QN:sy}function XN(t,e,r){const i=[],o=r||JN(t[0]),l=t.length-1;for(let c=0;c<l;c++){let u=o(t[c],t[c+1]);if(e){const m=Array.isArray(e)?e[c]||bt:e;u=tn(m,u)}i.push(u)}return i}function i0(t,e,{clamp:r=!0,ease:i,mixer:o}={}){const l=t.length;if(gm(l===e.length),l===1)return()=>e[0];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=XN(e,i,o),u=c.length,m=h=>{let p=0;if(u>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const g=no(t[p],t[p+1],h);return c[p](g)};return r?h=>m(rn(t[0],t[l-1],h)):m}function ZN(t,e){const r=t[t.length-1];for(let i=1;i<=e;i++){const o=no(0,e,i);t.push(gt(r,1,o))}}function e1(t){const e=[0];return ZN(e,t.length-1),e}function t1(t,e){return t.map(r=>r*e)}function r1(t,e){return t.map(()=>e||zv).splice(0,t.length-1)}function lc({duration:t=300,keyframes:e,times:r,ease:i="easeInOut"}){const o=LN(i)?i.map(ty):ty(i),l={done:!1,value:e[0]},c=t1(r&&r.length===e.length?r:e1(e),t),u=i0(c,e,{ease:Array.isArray(o)?o:r1(e,o)});return{calculatedDuration:t,next:m=>(l.value=u(m),l.done=m>=t,l)}}function a0(t,e){return e?t*(1e3/e):0}const s1=5;function o0(t,e,r){const i=Math.max(e-s1,0);return a0(r-t(i),e-i)}const qu=.001,n1=.01,i1=10,a1=.05,o1=1;function l1({duration:t=800,bounce:e=.25,velocity:r=0,mass:i=1}){let o,l,c=1-e;c=rn(a1,o1,c),t=rn(n1,i1,vs(t)),c<1?(o=h=>{const p=h*c,g=p*t,x=p-r,b=wf(h,c),j=Math.exp(-g);return qu-x/b*j},l=h=>{const g=h*c*t,x=g*r+r,b=Math.pow(c,2)*Math.pow(h,2)*t,j=Math.exp(-g),C=wf(Math.pow(h,2),c);return(-o(h)+qu>0?-1:1)*((x-b)*j)/C}):(o=h=>{const p=Math.exp(-h*t),g=(h-r)*t+1;return-qu+p*g},l=h=>{const p=Math.exp(-h*t),g=(r-h)*(t*t);return p*g});const u=5/t,m=d1(o,l,u);if(t=Mn(t),isNaN(m))return{stiffness:100,damping:10,duration:t};{const h=Math.pow(m,2)*i;return{stiffness:h,damping:c*2*Math.sqrt(i*h),duration:t}}}const c1=12;function d1(t,e,r){let i=r;for(let o=1;o<c1;o++)i=i-t(i)/e(i);return i}function wf(t,e){return t*Math.sqrt(1-e*e)}const u1=["duration","bounce"],f1=["stiffness","damping","mass"];function ny(t,e){return e.some(r=>t[r]!==void 0)}function m1(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!ny(t,f1)&&ny(t,u1)){const r=l1(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function l0({keyframes:t,restDelta:e,restSpeed:r,...i}){const o=t[0],l=t[t.length-1],c={done:!1,value:o},{stiffness:u,damping:m,mass:h,duration:p,velocity:g,isResolvedFromDuration:x}=m1({...i,velocity:-vs(i.velocity||0)}),b=g||0,j=m/(2*Math.sqrt(u*h)),C=l-o,_=vs(Math.sqrt(u/h)),O=Math.abs(C)<5;r||(r=O?.01:2),e||(e=O?.005:.5);let A;if(j<1){const E=wf(_,j);A=N=>{const D=Math.exp(-j*_*N);return l-D*((b+j*_*C)/E*Math.sin(E*N)+C*Math.cos(E*N))}}else if(j===1)A=E=>l-Math.exp(-_*E)*(C+(b+_*C)*E);else{const E=_*Math.sqrt(j*j-1);A=N=>{const D=Math.exp(-j*_*N),T=Math.min(E*N,300);return l-D*((b+j*_*C)*Math.sinh(T)+E*C*Math.cosh(T))/E}}return{calculatedDuration:x&&p||null,next:E=>{const N=A(E);if(x)c.done=E>=p;else{let D=b;E!==0&&(j<1?D=o0(A,E,N):D=0);const T=Math.abs(D)<=r,L=Math.abs(l-N)<=e;c.done=T&&L}return c.value=c.done?l:N,c}}}function iy({keyframes:t,velocity:e=0,power:r=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:c,min:u,max:m,restDelta:h=.5,restSpeed:p}){const g=t[0],x={done:!1,value:g},b=I=>u!==void 0&&I<u||m!==void 0&&I>m,j=I=>u===void 0?m:m===void 0||Math.abs(u-I)<Math.abs(m-I)?u:m;let C=r*e;const _=g+C,O=c===void 0?_:c(_);O!==_&&(C=O-g);const A=I=>-C*Math.exp(-I/i),E=I=>O+A(I),N=I=>{const J=A(I),Q=E(I);x.done=Math.abs(J)<=h,x.value=x.done?O:Q};let D,T;const L=I=>{b(x.value)&&(D=I,T=l0({keyframes:[x.value,j(x.value)],velocity:o0(E,I,x.value),damping:o,stiffness:l,restDelta:h,restSpeed:p}))};return L(0),{calculatedDuration:null,next:I=>{let J=!1;return!T&&D===void 0&&(J=!0,N(I),L(I)),D!==void 0&&I>D?T.next(I-D):(!J&&N(I),x)}}}const h1=t=>{const e=({timestamp:r})=>t(r);return{start:()=>ot.update(e,!0),stop:()=>js(e),now:()=>zt.isProcessing?zt.timestamp:performance.now()}},ay=2e4;function oy(t){let e=0;const r=50;let i=t.next(e);for(;!i.done&&e<ay;)e+=r,i=t.next(e);return e>=ay?1/0:e}const p1={decay:iy,inertia:iy,tween:lc,keyframes:lc,spring:l0};function cc({autoplay:t=!0,delay:e=0,driver:r=h1,keyframes:i,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",onPlay:m,onStop:h,onComplete:p,onUpdate:g,...x}){let b=1,j=!1,C,_;const O=()=>{_=new Promise(k=>{C=k})};O();let A;const E=p1[o]||lc;let N;E!==lc&&typeof i[0]!="number"&&(N=i0([0,100],i,{clamp:!1}),i=[0,100]);const D=E({...x,keyframes:i});let T;u==="mirror"&&(T=E({...x,keyframes:[...i].reverse(),velocity:-(x.velocity||0)}));let L="idle",I=null,J=null,Q=null;D.calculatedDuration===null&&l&&(D.calculatedDuration=oy(D));const{calculatedDuration:we}=D;let ie=1/0,be=1/0;we!==null&&(ie=we+c,be=ie*(l+1)-c);let G=0;const de=k=>{if(J===null)return;b>0&&(J=Math.min(J,k)),b<0&&(J=Math.min(k-be/b,J)),I!==null?G=I:G=Math.round(k-J)*b;const $=G-e*(b>=0?1:-1),ee=b>=0?$<0:$>be;G=Math.max($,0),L==="finished"&&I===null&&(G=be);let ue=G,xe=D;if(l){const De=Math.min(G,be)/ie;let X=Math.floor(De),Y=De%1;!Y&&De>=1&&(Y=1),Y===1&&X--,X=Math.min(X,l+1),!!(X%2)&&(u==="reverse"?(Y=1-Y,c&&(Y-=c/ie)):u==="mirror"&&(xe=T)),ue=rn(0,1,Y)*ie}const Ce=ee?{done:!1,value:i[0]}:xe.next(ue);N&&(Ce.value=N(Ce.value));let{done:fe}=Ce;!ee&&we!==null&&(fe=b>=0?G>=be:G<=0);const Ee=I===null&&(L==="finished"||L==="running"&&fe);return g&&g(Ce.value),Ee&&z(),Ce},U=()=>{A&&A.stop(),A=void 0},ne=()=>{L="idle",U(),C(),O(),J=Q=null},z=()=>{L="finished",p&&p(),U(),C()},ce=()=>{if(j)return;A||(A=r(de));const k=A.now();m&&m(),I!==null?J=k-I:(!J||L==="finished")&&(J=k),L==="finished"&&O(),Q=J,I=null,L="running",A.start()};t&&ce();const oe={then(k,$){return _.then(k,$)},get time(){return vs(G)},set time(k){k=Mn(k),G=k,I!==null||!A||b===0?I=k:J=A.now()-k/b},get duration(){const k=D.calculatedDuration===null?oy(D):D.calculatedDuration;return vs(k)},get speed(){return b},set speed(k){k===b||!A||(b=k,oe.time=vs(G))},get state(){return L},play:ce,pause:()=>{L="paused",I=G},stop:()=>{j=!0,L!=="idle"&&(L="idle",h&&h(),ne())},cancel:()=>{Q!==null&&de(Q),ne()},complete:()=>{L="finished"},sample:k=>(J=0,de(k))};return oe}function g1(t){let e;return()=>(e===void 0&&(e=t()),e)}const y1=g1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),x1=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),zl=10,v1=2e4,b1=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Fv(e.ease);function w1(t,e,{onUpdate:r,onComplete:i,...o}){if(!(y1()&&x1.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let c=!1,u,m,h=!1;const p=()=>{m=new Promise(E=>{u=E})};p();let{keyframes:g,duration:x=300,ease:b,times:j}=o;if(b1(e,o)){const E=cc({...o,repeat:0,delay:0});let N={done:!1,value:g[0]};const D=[];let T=0;for(;!N.done&&T<v1;)N=E.sample(T),D.push(N.value),T+=zl;j=void 0,g=D,x=T-zl,b="linear"}const C=TN(t.owner.current,e,g,{...o,duration:x,ease:b,times:j}),_=()=>{h=!1,C.cancel()},O=()=>{h=!0,ot.update(_),u(),p()};return C.onfinish=()=>{h||(t.set(AN(g,o)),i&&i(),O())},{then(E,N){return m.then(E,N)},attachTimeline(E){return C.timeline=E,C.onfinish=null,bt},get time(){return vs(C.currentTime||0)},set time(E){C.currentTime=Mn(E)},get speed(){return C.playbackRate},set speed(E){C.playbackRate=E},get duration(){return vs(x)},play:()=>{c||(C.play(),js(_))},pause:()=>C.pause(),stop:()=>{if(c=!0,C.playState==="idle")return;const{currentTime:E}=C;if(E){const N=cc({...o,autoplay:!1});t.setWithVelocity(N.sample(E-zl).value,N.sample(E).value,zl)}O()},complete:()=>{h||C.finish()},cancel:O}}function j1({keyframes:t,delay:e,onUpdate:r,onComplete:i}){const o=()=>(r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:bt,pause:bt,stop:bt,then:l=>(l(),Promise.resolve()),cancel:bt,complete:bt});return e?cc({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const _1={type:"spring",stiffness:500,damping:25,restSpeed:10},C1=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),N1={type:"keyframes",duration:.8},S1={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},E1=(t,{keyframes:e})=>e.length>2?N1:Fn.has(t)?t.startsWith("scale")?C1(e[1]):_1:S1,jf=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(sn.test(e)||e==="0")&&!e.startsWith("url(")),P1=new Set(["brightness","contrast","saturate","opacity"]);function k1(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=r.match(Ec)||[];if(!i)return t;const o=r.replace(i,"");let l=P1.has(e)?1:0;return i!==r&&(l*=100),e+"("+l+o+")"}const T1=/([a-z-]*)\(.*?\)/g,_f={...sn,getAnimatableNone:t=>{const e=t.match(T1);return e?e.map(k1).join(" "):t}},A1={...jv,color:Gt,backgroundColor:Gt,outlineColor:Gt,fill:Gt,stroke:Gt,borderColor:Gt,borderTopColor:Gt,borderRightColor:Gt,borderBottomColor:Gt,borderLeftColor:Gt,filter:_f,WebkitFilter:_f},bm=t=>A1[t];function c0(t,e){let r=bm(t);return r!==_f&&(r=sn),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const d0=t=>/^0[^.\s]+$/.test(t);function R1(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||d0(t)}function O1(t,e,r,i){const o=jf(e,r);let l;Array.isArray(r)?l=[...r]:l=[null,r];const c=i.from!==void 0?i.from:t.get();let u;const m=[];for(let h=0;h<l.length;h++)l[h]===null&&(l[h]=h===0?c:l[h-1]),R1(l[h])&&m.push(h),typeof l[h]=="string"&&l[h]!=="none"&&l[h]!=="0"&&(u=l[h]);if(o&&m.length&&u)for(let h=0;h<m.length;h++){const p=m[h];l[p]=c0(e,u)}return l}function D1({when:t,delay:e,delayChildren:r,staggerChildren:i,staggerDirection:o,repeat:l,repeatType:c,repeatDelay:u,from:m,elapsed:h,...p}){return!!Object.keys(p).length}function wm(t,e){return t[e]||t.default||t}const M1={skipAnimations:!1},jm=(t,e,r,i={})=>o=>{const l=wm(i,t)||{},c=l.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Mn(c);const m=O1(e,t,r,l),h=m[0],p=m[m.length-1],g=jf(t,h),x=jf(t,p);let b={keyframes:m,velocity:e.getVelocity(),ease:"easeOut",...l,delay:-u,onUpdate:j=>{e.set(j),l.onUpdate&&l.onUpdate(j)},onComplete:()=>{o(),l.onComplete&&l.onComplete()}};if(D1(l)||(b={...b,...E1(t,b)}),b.duration&&(b.duration=Mn(b.duration)),b.repeatDelay&&(b.repeatDelay=Mn(b.repeatDelay)),!g||!x||kN.current||l.type===!1||M1.skipAnimations)return j1(b);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const j=w1(e,t,b);if(j)return j}return cc(b)};function dc(t){return!!(nr(t)&&t.add)}const u0=t=>/^\-?\d*\.?\d+$/.test(t);function _m(t,e){t.indexOf(e)===-1&&t.push(e)}function Cm(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Nm{constructor(){this.subscriptions=[]}add(e){return _m(this.subscriptions,e),()=>Cm(this.subscriptions,e)}notify(e,r,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,r,i);else for(let l=0;l<o;l++){const c=this.subscriptions[l];c&&c(e,r,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const I1=t=>!isNaN(parseFloat(t));class L1{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,o=!0)=>{this.prev=this.current,this.current=i;const{delta:l,timestamp:c}=zt;this.lastUpdated!==c&&(this.timeDelta=l,this.lastUpdated=c,ot.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ot.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=I1(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Nm);const i=this.events[e].add(r);return e==="change"?()=>{i(),ot.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,i){this.set(r),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?a0(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Vi(t,e){return new L1(t,e)}const f0=t=>e=>e.test(t),$1={test:t=>t==="auto",parse:t=>t},m0=[Un,Ue,es,Js,WC,qC,$1],Da=t=>m0.find(f0(t)),F1=[...m0,Gt,sn],U1=t=>F1.find(f0(t));function V1(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Vi(r))}function B1(t,e){const r=kc(t,e);let{transitionEnd:i={},transition:o={},...l}=r?t.makeTargetAnimatable(r,!1):{};l={...l,...i};for(const c in l){const u=iN(l[c]);V1(t,c,u)}}function z1(t,e,r){var i,o;const l=Object.keys(e).filter(u=>!t.hasValue(u)),c=l.length;if(c)for(let u=0;u<c;u++){const m=l[u],h=e[m];let p=null;Array.isArray(h)&&(p=h[0]),p===null&&(p=(o=(i=r[m])!==null&&i!==void 0?i:t.readValue(m))!==null&&o!==void 0?o:e[m]),p!=null&&(typeof p=="string"&&(u0(p)||d0(p))?p=parseFloat(p):!U1(p)&&sn.test(h)&&(p=c0(m,h)),t.addValue(m,Vi(p,{owner:t})),r[m]===void 0&&(r[m]=p),p!==null&&t.setBaseTarget(m,p))}}function q1(t,e){return e?(e[t]||e.default||e).from:void 0}function W1(t,e,r){const i={};for(const o in t){const l=q1(o,e);if(l!==void 0)i[o]=l;else{const c=r.getValue(o);c&&(i[o]=c.get())}}return i}function H1({protectedKeys:t,needsAnimating:e},r){const i=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,i}function G1(t,e){const r=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==r)return!0}else return r!==e}function h0(t,e,{delay:r=0,transitionOverride:i,type:o}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...u}=t.makeTargetAnimatable(e);const m=t.getValue("willChange");i&&(l=i);const h=[],p=o&&t.animationState&&t.animationState.getState()[o];for(const g in u){const x=t.getValue(g),b=u[g];if(!x||b===void 0||p&&H1(p,g))continue;const j={delay:r,elapsed:0,...wm(l||{},g)};if(window.HandoffAppearAnimations){const O=t.getProps()[pv];if(O){const A=window.HandoffAppearAnimations(O,g,x,ot);A!==null&&(j.elapsed=A,j.isHandoff=!0)}}let C=!j.isHandoff&&!G1(x,b);if(j.type==="spring"&&(x.getVelocity()||j.velocity)&&(C=!1),x.animation&&(C=!1),C)continue;x.start(jm(g,x,b,t.shouldReduceMotion&&Fn.has(g)?{type:!1}:j));const _=x.animation;dc(m)&&(m.add(g),_.then(()=>m.remove(g))),h.push(_)}return c&&Promise.all(h).then(()=>{c&&B1(t,c)}),h}function Cf(t,e,r={}){const i=kc(t,e,r.custom);let{transition:o=t.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(o=r.transitionOverride);const l=i?()=>Promise.all(h0(t,i,r)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:g}=o;return K1(t,e,h+m,p,g,r)}:()=>Promise.resolve(),{when:u}=o;if(u){const[m,h]=u==="beforeChildren"?[l,c]:[c,l];return m().then(()=>h())}else return Promise.all([l(),c(r.delay)])}function K1(t,e,r=0,i=0,o=1,l){const c=[],u=(t.variantChildren.size-1)*i,m=o===1?(h=0)=>h*i:(h=0)=>u-h*i;return Array.from(t.variantChildren).sort(Y1).forEach((h,p)=>{h.notify("AnimationStart",e),c.push(Cf(h,e,{...l,delay:r+m(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(c)}function Y1(t,e){return t.sortNodePosition(e)}function Q1(t,e,r={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(l=>Cf(t,l,r));i=Promise.all(o)}else if(typeof e=="string")i=Cf(t,e,r);else{const o=typeof e=="function"?kc(t,e,r.custom):e;i=Promise.all(h0(t,o,r))}return i.then(()=>t.notify("AnimationComplete",e))}const J1=[...am].reverse(),X1=am.length;function Z1(t){return e=>Promise.all(e.map(({animation:r,options:i})=>Q1(t,r,i)))}function eS(t){let e=Z1(t);const r=rS();let i=!0;const o=(m,h)=>{const p=kc(t,h);if(p){const{transition:g,transitionEnd:x,...b}=p;m={...m,...b,...x}}return m};function l(m){e=m(t)}function c(m,h){const p=t.getProps(),g=t.getVariantContext(!0)||{},x=[],b=new Set;let j={},C=1/0;for(let O=0;O<X1;O++){const A=J1[O],E=r[A],N=p[A]!==void 0?p[A]:g[A],D=ro(N),T=A===h?E.isActive:null;T===!1&&(C=O);let L=N===g[A]&&N!==p[A]&&D;if(L&&i&&t.manuallyAnimateOnMount&&(L=!1),E.protectedKeys={...j},!E.isActive&&T===null||!N&&!E.prevProp||Nc(N)||typeof N=="boolean")continue;let J=tS(E.prevProp,N)||A===h&&E.isActive&&!L&&D||O>C&&D,Q=!1;const we=Array.isArray(N)?N:[N];let ie=we.reduce(o,{});T===!1&&(ie={});const{prevResolvedValues:be={}}=E,G={...be,...ie},de=U=>{J=!0,b.has(U)&&(Q=!0,b.delete(U)),E.needsAnimating[U]=!0};for(const U in G){const ne=ie[U],z=be[U];if(j.hasOwnProperty(U))continue;let ce=!1;ac(ne)&&ac(z)?ce=!Lv(ne,z):ce=ne!==z,ce?ne!==void 0?de(U):b.add(U):ne!==void 0&&b.has(U)?de(U):E.protectedKeys[U]=!0}E.prevProp=N,E.prevResolvedValues=ie,E.isActive&&(j={...j,...ie}),i&&t.blockInitialAnimation&&(J=!1),J&&(!L||Q)&&x.push(...we.map(U=>({animation:U,options:{type:A,...m}})))}if(b.size){const O={};b.forEach(A=>{const E=t.getBaseTarget(A);E!==void 0&&(O[A]=E)}),x.push({animation:O})}let _=!!x.length;return i&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(_=!1),i=!1,_?e(x):Promise.resolve()}function u(m,h,p){var g;if(r[m].isActive===h)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(b=>{var j;return(j=b.animationState)===null||j===void 0?void 0:j.setActive(m,h)}),r[m].isActive=h;const x=c(p,m);for(const b in r)r[b].protectedKeys={};return x}return{animateChanges:c,setActive:u,setAnimateFunction:l,getState:()=>r}}function tS(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Lv(e,t):!1}function Cn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rS(){return{animate:Cn(!0),whileInView:Cn(),whileHover:Cn(),whileTap:Cn(),whileDrag:Cn(),whileFocus:Cn(),exit:Cn()}}class sS extends on{constructor(e){super(e),e.animationState||(e.animationState=eS(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Nc(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let nS=0;class iS extends on{constructor(){super(...arguments),this.id=nS++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:i}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const l=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});r&&!e&&l.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const aS={animation:{Feature:sS},exit:{Feature:iS}},ly=(t,e)=>Math.abs(t-e);function oS(t,e){const r=ly(t.x,e.x),i=ly(t.y,e.y);return Math.sqrt(r**2+i**2)}class p0{constructor(e,r,{transformPagePoint:i,contextWindow:o,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Hu(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=oS(g.offset,{x:0,y:0})>=3;if(!x&&!b)return;const{point:j}=g,{timestamp:C}=zt;this.history.push({...j,timestamp:C});const{onStart:_,onMove:O}=this.handlers;x||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Wu(x,this.transformPagePoint),ot.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:b,onSessionEnd:j,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Hu(g.type==="pointercancel"?this.lastMoveEventInfo:Wu(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,_),j&&j(g,_)},!Rv(e))return;this.dragSnapToOrigin=l,this.handlers=r,this.transformPagePoint=i,this.contextWindow=o||window;const c=Pc(e),u=Wu(c,this.transformPagePoint),{point:m}=u,{timestamp:h}=zt;this.history=[{...m,timestamp:h}];const{onSessionStart:p}=r;p&&p(e,Hu(u,this.history)),this.removeListeners=tn(xs(this.contextWindow,"pointermove",this.handlePointerMove),xs(this.contextWindow,"pointerup",this.handlePointerUp),xs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),js(this.updatePoint)}}function Wu(t,e){return e?{point:e(t.point)}:t}function cy(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Hu({point:t},e){return{point:t,delta:cy(t,g0(e)),offset:cy(t,lS(e)),velocity:cS(e,.1)}}function lS(t){return t[0]}function g0(t){return t[t.length-1]}function cS(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,i=null;const o=g0(t);for(;r>=0&&(i=t[r],!(o.timestamp-i.timestamp>Mn(e)));)r--;if(!i)return{x:0,y:0};const l=vs(o.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const c={x:(o.x-i.x)/l,y:(o.y-i.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function hr(t){return t.max-t.min}function Nf(t,e=0,r=.01){return Math.abs(t-e)<=r}function dy(t,e,r,i=.5){t.origin=i,t.originPoint=gt(e.min,e.max,t.origin),t.scale=hr(r)/hr(e),(Nf(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=gt(r.min,r.max,t.origin)-t.originPoint,(Nf(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Ka(t,e,r,i){dy(t.x,e.x,r.x,i?i.originX:void 0),dy(t.y,e.y,r.y,i?i.originY:void 0)}function uy(t,e,r){t.min=r.min+e.min,t.max=t.min+hr(e)}function dS(t,e,r){uy(t.x,e.x,r.x),uy(t.y,e.y,r.y)}function fy(t,e,r){t.min=e.min-r.min,t.max=t.min+hr(e)}function Ya(t,e,r){fy(t.x,e.x,r.x),fy(t.y,e.y,r.y)}function uS(t,{min:e,max:r},i){return e!==void 0&&t<e?t=i?gt(e,t,i.min):Math.max(t,e):r!==void 0&&t>r&&(t=i?gt(r,t,i.max):Math.min(t,r)),t}function my(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function fS(t,{top:e,left:r,bottom:i,right:o}){return{x:my(t.x,r,o),y:my(t.y,e,i)}}function hy(t,e){let r=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,i]=[i,r]),{min:r,max:i}}function mS(t,e){return{x:hy(t.x,e.x),y:hy(t.y,e.y)}}function hS(t,e){let r=.5;const i=hr(t),o=hr(e);return o>i?r=no(e.min,e.max-i,t.min):i>o&&(r=no(t.min,t.max-o,e.min)),rn(0,1,r)}function pS(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Sf=.35;function gS(t=Sf){return t===!1?t=0:t===!0&&(t=Sf),{x:py(t,"left","right"),y:py(t,"top","bottom")}}function py(t,e,r){return{min:gy(t,e),max:gy(t,r)}}function gy(t,e){return typeof t=="number"?t:t[e]||0}const yy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Di=()=>({x:yy(),y:yy()}),xy=()=>({min:0,max:0}),_t=()=>({x:xy(),y:xy()});function Cr(t){return[t("x"),t("y")]}function y0({top:t,left:e,right:r,bottom:i}){return{x:{min:e,max:r},y:{min:t,max:i}}}function yS({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function xS(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}function Gu(t){return t===void 0||t===1}function Ef({scale:t,scaleX:e,scaleY:r}){return!Gu(t)||!Gu(e)||!Gu(r)}function En(t){return Ef(t)||x0(t)||t.z||t.rotate||t.rotateX||t.rotateY}function x0(t){return vy(t.x)||vy(t.y)}function vy(t){return t&&t!=="0%"}function uc(t,e,r){const i=t-r,o=e*i;return r+o}function by(t,e,r,i,o){return o!==void 0&&(t=uc(t,o,i)),uc(t,r,i)+e}function Pf(t,e=0,r=1,i,o){t.min=by(t.min,e,r,i,o),t.max=by(t.max,e,r,i,o)}function v0(t,{x:e,y:r}){Pf(t.x,e.translate,e.scale,e.originPoint),Pf(t.y,r.translate,r.scale,r.originPoint)}function vS(t,e,r,i=!1){const o=r.length;if(!o)return;e.x=e.y=1;let l,c;for(let u=0;u<o;u++){l=r[u],c=l.projectionDelta;const m=l.instance;m&&m.style&&m.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Mi(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,v0(t,c)),i&&En(l.latestValues)&&Mi(t,l.latestValues))}e.x=wy(e.x),e.y=wy(e.y)}function wy(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Zs(t,e){t.min=t.min+e,t.max=t.max+e}function jy(t,e,[r,i,o]){const l=e[o]!==void 0?e[o]:.5,c=gt(t.min,t.max,l);Pf(t,e[r],e[i],c,e.scale)}const bS=["x","scaleX","originX"],wS=["y","scaleY","originY"];function Mi(t,e){jy(t.x,e,bS),jy(t.y,e,wS)}function b0(t,e){return y0(xS(t.getBoundingClientRect(),e))}function jS(t,e,r){const i=b0(t,r),{scroll:o}=e;return o&&(Zs(i.x,o.offset.x),Zs(i.y,o.offset.y)),i}const w0=({current:t})=>t?t.ownerDocument.defaultView:null,_S=new WeakMap;class CS{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_t(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Pc(p,"page").point)},l=(p,g)=>{const{drag:x,dragPropagation:b,onDragStart:j}=this.getProps();if(x&&!b&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Dv(x),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cr(_=>{let O=this.getAxisMotionValue(_).get()||0;if(es.test(O)){const{projection:A}=this.visualElement;if(A&&A.layout){const E=A.layout.layoutBox[_];E&&(O=hr(E)*(parseFloat(O)/100))}}this.originPoint[_]=O}),j&&ot.update(()=>j(p,g),!1,!0);const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},c=(p,g)=>{const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:j,onDrag:C}=this.getProps();if(!x&&!this.openGlobalLock)return;const{offset:_}=g;if(b&&this.currentDirection===null){this.currentDirection=NS(_),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",g.point,_),this.updateAxis("y",g.point,_),this.visualElement.render(),C&&C(p,g)},u=(p,g)=>this.stop(p,g),m=()=>Cr(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new p0(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:u,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:w0(this.visualElement)})}stop(e,r){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ot.update(()=>l(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,i){const{drag:o}=this.getProps();if(!i||!ql(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=uS(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:i}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,l=this.constraints;r&&Ri(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&o?this.constraints=fS(o.layoutBox,r):this.constraints=!1,this.elastic=gS(i),l!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Cr(c=>{this.getAxisMotionValue(c)&&(this.constraints[c]=pS(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Ri(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=jS(i,o.root,this.visualElement.getTransformPagePoint());let c=mS(o.layout.layoutBox,l);if(r){const u=r(yS(c));this.hasMutatedConstraints=!!u,u&&(c=y0(u))}return c}startAnimation(e){const{drag:r,dragMomentum:i,dragElastic:o,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),m=this.constraints||{},h=Cr(p=>{if(!ql(p,r,this.currentDirection))return;let g=m&&m[p]||{};c&&(g={min:0,max:0});const x=o?200:1e6,b=o?40:1e7,j={type:"inertia",velocity:i?e[p]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...l,...g};return this.startAxisValueAnimation(p,j)});return Promise.all(h).then(u)}startAxisValueAnimation(e,r){const i=this.getAxisMotionValue(e);return i.start(jm(e,i,0,r))}stopAnimation(){Cr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Cr(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),o=i[r];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Cr(r=>{const{drag:i}=this.getProps();if(!ql(r,i,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(r);if(o&&o.layout){const{min:c,max:u}=o.layout.layoutBox[r];l.set(e[r]-gt(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:i}=this.visualElement;if(!Ri(r)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Cr(c=>{const u=this.getAxisMotionValue(c);if(u){const m=u.get();o[c]=hS({min:m,max:m},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Cr(c=>{if(!ql(c,e,null))return;const u=this.getAxisMotionValue(c),{min:m,max:h}=this.constraints[c];u.set(gt(m,h,o[c]))})}addListeners(){if(!this.visualElement.current)return;_S.set(this.visualElement,this);const e=this.visualElement.current,r=xs(e,"pointerdown",m=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(m)}),i=()=>{const{dragConstraints:m}=this.getProps();Ri(m)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),i();const c=ys(window,"resize",()=>this.scalePositionWithinConstraints()),u=o.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:h})=>{this.isDragging&&h&&(Cr(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=m[p].translate,g.set(g.get()+m[p].translate))}),this.visualElement.render())}));return()=>{c(),r(),l(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:c=Sf,dragMomentum:u=!0}=e;return{...e,drag:r,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:u}}}function ql(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function NS(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class SS extends on{constructor(e){super(e),this.removeGroupControls=bt,this.removeListeners=bt,this.controls=new CS(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bt}unmount(){this.removeGroupControls(),this.removeListeners()}}const _y=t=>(e,r)=>{t&&ot.update(()=>t(e,r))};class ES extends on{constructor(){super(...arguments),this.removePointerDownListener=bt}onPointerDown(e){this.session=new p0(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:w0(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:_y(e),onStart:_y(r),onMove:i,onEnd:(l,c)=>{delete this.session,o&&ot.update(()=>o(l,c))}}}mount(){this.removePointerDownListener=xs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function PS(){const t=w.useContext(_c);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=t,o=w.useId();return w.useEffect(()=>i(o),[]),!e&&r?[!1,()=>r&&r(o)]:[!0]}const tc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Cy(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ma={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ue.test(t))t=parseFloat(t);else return t;const r=Cy(t,e.target.x),i=Cy(t,e.target.y);return`${r}% ${i}%`}},kS={correct:(t,{treeScale:e,projectionDelta:r})=>{const i=t,o=sn.parse(t);if(o.length>5)return i;const l=sn.createTransformer(t),c=typeof o[0]!="number"?1:0,u=r.x.scale*e.x,m=r.y.scale*e.y;o[0+c]/=u,o[1+c]/=m;const h=gt(u,m,.5);return typeof o[2+c]=="number"&&(o[2+c]/=h),typeof o[3+c]=="number"&&(o[3+c]/=h),l(o)}};class TS extends st.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:i,layoutId:o}=this.props,{projection:l}=e;LC(AS),l&&(r.group&&r.group.add(l),i&&i.register&&o&&i.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),tc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:i,drag:o,isPresent:l}=this.props,c=i.projection;return c&&(c.isPresent=l,o||e.layoutDependency!==r||r===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||ot.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:i}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function j0(t){const[e,r]=PS(),i=w.useContext(lm);return st.createElement(TS,{...t,layoutGroup:i,switchLayoutGroup:w.useContext(yv),isPresent:e,safeToRemove:r})}const AS={borderRadius:{...Ma,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ma,borderTopRightRadius:Ma,borderBottomLeftRadius:Ma,borderBottomRightRadius:Ma,boxShadow:kS},_0=["TopLeft","TopRight","BottomLeft","BottomRight"],RS=_0.length,Ny=t=>typeof t=="string"?parseFloat(t):t,Sy=t=>typeof t=="number"||Ue.test(t);function OS(t,e,r,i,o,l){o?(t.opacity=gt(0,r.opacity!==void 0?r.opacity:1,DS(i)),t.opacityExit=gt(e.opacity!==void 0?e.opacity:1,0,MS(i))):l&&(t.opacity=gt(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,i));for(let c=0;c<RS;c++){const u=`border${_0[c]}Radius`;let m=Ey(e,u),h=Ey(r,u);if(m===void 0&&h===void 0)continue;m||(m=0),h||(h=0),m===0||h===0||Sy(m)===Sy(h)?(t[u]=Math.max(gt(Ny(m),Ny(h),i),0),(es.test(h)||es.test(m))&&(t[u]+="%")):t[u]=h}(e.rotate||r.rotate)&&(t.rotate=gt(e.rotate||0,r.rotate||0,i))}function Ey(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const DS=C0(0,.5,Hv),MS=C0(.5,.95,bt);function C0(t,e,r){return i=>i<t?0:i>e?1:r(no(t,e,i))}function Py(t,e){t.min=e.min,t.max=e.max}function jr(t,e){Py(t.x,e.x),Py(t.y,e.y)}function ky(t,e,r,i,o){return t-=e,t=uc(t,1/r,i),o!==void 0&&(t=uc(t,1/o,i)),t}function IS(t,e=0,r=1,i=.5,o,l=t,c=t){if(es.test(e)&&(e=parseFloat(e),e=gt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=gt(l.min,l.max,i);t===l&&(u-=e),t.min=ky(t.min,e,r,u,o),t.max=ky(t.max,e,r,u,o)}function Ty(t,e,[r,i,o],l,c){IS(t,e[r],e[i],e[o],e.scale,l,c)}const LS=["x","scaleX","originX"],$S=["y","scaleY","originY"];function Ay(t,e,r,i){Ty(t.x,e,LS,r?r.x:void 0,i?i.x:void 0),Ty(t.y,e,$S,r?r.y:void 0,i?i.y:void 0)}function Ry(t){return t.translate===0&&t.scale===1}function N0(t){return Ry(t.x)&&Ry(t.y)}function FS(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function S0(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Oy(t){return hr(t.x)/hr(t.y)}class US{constructor(){this.members=[]}add(e){_m(this.members,e),e.scheduleRender()}remove(e){if(Cm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(o=>e===o);if(r===0)return!1;let i;for(let o=r;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(e,r){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,r&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:i}=e;r.onExitComplete&&r.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Dy(t,e,r){let i="";const o=t.x.translate/e.x,l=t.y.translate/e.y;if((o||l)&&(i=`translate3d(${o}px, ${l}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:m,rotateX:h,rotateY:p}=r;m&&(i+=`rotate(${m}deg) `),h&&(i+=`rotateX(${h}deg) `),p&&(i+=`rotateY(${p}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(i+=`scale(${c}, ${u})`),i||"none"}const VS=(t,e)=>t.depth-e.depth;class BS{constructor(){this.children=[],this.isDirty=!1}add(e){_m(this.children,e),this.isDirty=!0}remove(e){Cm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(VS),this.isDirty=!1,this.children.forEach(e)}}function zS(t,e){const r=performance.now(),i=({timestamp:o})=>{const l=o-r;l>=e&&(js(i),t(l-e))};return ot.read(i,!0),()=>js(i)}function qS(t){window.MotionDebug&&window.MotionDebug.record(t)}function WS(t){return t instanceof SVGElement&&t.tagName!=="svg"}function HS(t,e,r){const i=nr(t)?t:Vi(t);return i.start(jm("",i,e,r)),i.animation}const My=["","X","Y","Z"],GS={visibility:"hidden"},Iy=1e3;let KS=0;const Pn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function E0({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(c={},u=e?.()){this.id=KS++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Pn.totalNodes=Pn.resolvedTargetDeltas=Pn.recalculatedProjection=0,this.nodes.forEach(JS),this.nodes.forEach(rE),this.nodes.forEach(sE),this.nodes.forEach(XS),qS(Pn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new BS)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Nm),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const m=this.eventHandlers.get(c);m&&m.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=WS(c),this.instance=c;const{layoutId:m,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||m)&&(this.isLayoutDirty=!0),t){let g;const x=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=zS(x,250),tc.hasAnimatedSinceResize&&(tc.hasAnimatedSinceResize=!1,this.nodes.forEach($y))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&p&&(m||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:x,hasRelativeTargetChanged:b,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||p.getDefaultTransition()||lE,{onLayoutAnimationStart:_,onLayoutAnimationComplete:O}=p.getProps(),A=!this.targetLayout||!S0(this.targetLayout,j)||b,E=!x&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||x&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,E);const N={...wm(C,"layout"),onPlay:_,onComplete:O};(p.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else x||$y(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,js(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nE),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:m}=this.options;if(u===void 0&&!m)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ly);return}this.isUpdating||this.nodes.forEach(eE),this.isUpdating=!1,this.nodes.forEach(tE),this.nodes.forEach(YS),this.nodes.forEach(QS),this.clearAllSnapshots();const u=performance.now();zt.delta=rn(0,1e3/60,u-zt.timestamp),zt.timestamp=u,zt.isProcessing=!0,Lu.update.process(zt),Lu.preRender.process(zt),Lu.render.process(zt),zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(ZS),this.sharedNodes.forEach(iE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:c,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!N0(this.projectionDelta),m=this.getTransformTemplate(),h=m?m(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;c&&(u||En(this.latestValues)||p)&&(o(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let m=this.removeElementScroll(u);return c&&(m=this.removeTransform(m)),cE(m),{animationId:this.root.animationId,measuredBox:u,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return _t();const u=c.measureViewportBox(),{scroll:m}=this.root;return m&&(Zs(u.x,m.offset.x),Zs(u.y,m.offset.y)),u}removeElementScroll(c){const u=_t();jr(u,c);for(let m=0;m<this.path.length;m++){const h=this.path[m],{scroll:p,options:g}=h;if(h!==this.root&&p&&g.layoutScroll){if(p.isRoot){jr(u,c);const{scroll:x}=this.root;x&&(Zs(u.x,-x.offset.x),Zs(u.y,-x.offset.y))}Zs(u.x,p.offset.x),Zs(u.y,p.offset.y)}}return u}applyTransform(c,u=!1){const m=_t();jr(m,c);for(let h=0;h<this.path.length;h++){const p=this.path[h];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Mi(m,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),En(p.latestValues)&&Mi(m,p.latestValues)}return En(this.latestValues)&&Mi(m,this.latestValues),m}removeTransform(c){const u=_t();jr(u,c);for(let m=0;m<this.path.length;m++){const h=this.path[m];if(!h.instance||!En(h.latestValues))continue;Ef(h.latestValues)&&h.updateSnapshot();const p=_t(),g=h.measurePageBox();jr(p,g),Ay(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return En(this.latestValues)&&Ay(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var u;const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==m;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:x}=this.options;if(!(!this.layout||!(g||x))){if(this.resolvedRelativeTargetAt=zt.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),Ya(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),jr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=_t(),this.targetWithTransforms=_t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jr(this.target,this.layout.layoutBox),v0(this.target,this.targetDelta)):jr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),Ya(this.relativeTargetOrigin,this.target,b.target),jr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Pn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ef(this.parent.latestValues)||x0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const u=this.getLead(),m=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(h=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===zt.timestamp&&(h=!1),h)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;jr(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,b=this.treeScale.y;vS(this.layoutCorrected,this.treeScale,this.path,m),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:j}=u;if(!j){this.projectionTransform&&(this.projectionDelta=Di(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Di(),this.projectionDeltaWithTransform=Di());const C=this.projectionTransform;Ka(this.projectionDelta,this.layoutCorrected,j,this.latestValues),this.projectionTransform=Dy(this.projectionDelta,this.treeScale),(this.projectionTransform!==C||this.treeScale.x!==x||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j)),Pn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(c,u=!1){const m=this.snapshot,h=m?m.latestValues:{},p={...this.latestValues},g=Di();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=_t(),b=m?m.source:void 0,j=this.layout?this.layout.source:void 0,C=b!==j,_=this.getStack(),O=!_||_.members.length<=1,A=!!(C&&!O&&this.options.crossfade===!0&&!this.path.some(oE));this.animationProgress=0;let E;this.mixTargetDelta=N=>{const D=N/1e3;Fy(g.x,c.x,D),Fy(g.y,c.y,D),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ya(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aE(this.relativeTarget,this.relativeTargetOrigin,x,D),E&&FS(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=_t()),jr(E,this.relativeTarget)),C&&(this.animationValues=p,OS(p,h,this.latestValues,D,A,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(js(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ot.update(()=>{tc.hasAnimatedSinceResize=!0,this.currentAnimation=HS(0,Iy,{...c,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Iy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:m,layout:h,latestValues:p}=c;if(!(!u||!m||!h)){if(this!==c&&this.layout&&h&&P0(this.options.animationType,this.layout.layoutBox,h.layoutBox)){m=this.target||_t();const g=hr(this.layout.layoutBox.x);m.x.min=c.target.x.min,m.x.max=m.x.min+g;const x=hr(this.layout.layoutBox.y);m.y.min=c.target.y.min,m.y.max=m.y.min+x}jr(u,m),Mi(u,p),Ka(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new US),this.sharedNodes.get(c).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:u}=this.options;return u?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:u}=this.options;return u?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:m}={}){const h=this.getStack();h&&h.promote(this,m),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:m}=c;if((m.rotate||m.rotateX||m.rotateY||m.rotateZ)&&(u=!0),!u)return;const h={};for(let p=0;p<My.length;p++){const g="rotate"+My[p];m[g]&&(h[g]=m[g],c.setStaticValue(g,0))}c.render();for(const p in h)c.setStaticValue(p,h[p]);c.scheduleRender()}getProjectionStyles(c){var u,m;if(!this.instance||this.isSVG)return;if(!this.isVisible)return GS;const h={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=ec(c?.pointerEvents)||"",h.transform=p?p(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=ec(c?.pointerEvents)||""),this.hasProjected&&!En(this.latestValues)&&(C.transform=p?p({},""):"none",this.hasProjected=!1),C}const x=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=Dy(this.projectionDeltaWithTransform,this.treeScale,x),p&&(h.transform=p(x,h.transform));const{x:b,y:j}=this.projectionDelta;h.transformOrigin=`${b.origin*100}% ${j.origin*100}% 0`,g.animationValues?h.opacity=g===this?(m=(u=x.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&m!==void 0?m:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:h.opacity=g===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const C in nc){if(x[C]===void 0)continue;const{correct:_,applyTo:O}=nc[C],A=h.transform==="none"?x[C]:_(x[C],g);if(O){const E=O.length;for(let N=0;N<E;N++)h[O[N]]=A}else h[C]=A}return this.options.layoutId&&(h.pointerEvents=g===this?ec(c?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Ly),this.root.sharedNodes.clear()}}}function YS(t){t.updateLayout()}function QS(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=t.layout,{animationType:l}=t.options,c=r.source!==t.layout.source;l==="size"?Cr(g=>{const x=c?r.measuredBox[g]:r.layoutBox[g],b=hr(x);x.min=i[g].min,x.max=x.min+b}):P0(l,r.layoutBox,i)&&Cr(g=>{const x=c?r.measuredBox[g]:r.layoutBox[g],b=hr(i[g]);x.max=x.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const u=Di();Ka(u,i,r.layoutBox);const m=Di();c?Ka(m,t.applyTransform(o,!0),r.measuredBox):Ka(m,i,r.layoutBox);const h=!N0(u);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:x,layout:b}=g;if(x&&b){const j=_t();Ya(j,r.layoutBox,x.layoutBox);const C=_t();Ya(C,i,b.layoutBox),S0(j,C)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=j,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:r,delta:m,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function JS(t){Pn.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function XS(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ZS(t){t.clearSnapshot()}function Ly(t){t.clearMeasurements()}function eE(t){t.isLayoutDirty=!1}function tE(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $y(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function rE(t){t.resolveTargetDelta()}function sE(t){t.calcProjection()}function nE(t){t.resetRotation()}function iE(t){t.removeLeadSnapshot()}function Fy(t,e,r){t.translate=gt(e.translate,0,r),t.scale=gt(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function Uy(t,e,r,i){t.min=gt(e.min,r.min,i),t.max=gt(e.max,r.max,i)}function aE(t,e,r,i){Uy(t.x,e.x,r.x,i),Uy(t.y,e.y,r.y,i)}function oE(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const lE={duration:.45,ease:[.4,0,.1,1]},Vy=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),By=Vy("applewebkit/")&&!Vy("chrome/")?Math.round:bt;function zy(t){t.min=By(t.min),t.max=By(t.max)}function cE(t){zy(t.x),zy(t.y)}function P0(t,e,r){return t==="position"||t==="preserve-aspect"&&!Nf(Oy(e),Oy(r),.2)}const dE=E0({attachResizeListener:(t,e)=>ys(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ku={current:void 0},k0=E0({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ku.current){const t=new dE({});t.mount(window),t.setOptions({layoutScroll:!0}),Ku.current=t}return Ku.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uE={pan:{Feature:ES},drag:{Feature:SS,ProjectionNode:k0,MeasureLayout:j0}},fE=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function mE(t){const e=fE.exec(t);if(!e)return[,];const[,r,i]=e;return[r,i]}function kf(t,e,r=1){const[i,o]=mE(t);if(!i)return;const l=window.getComputedStyle(e).getPropertyValue(i);if(l){const c=l.trim();return u0(c)?parseFloat(c):c}else return xf(o)?kf(o,e,r+1):o}function hE(t,{...e},r){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(o=>{const l=o.get();if(!xf(l))return;const c=kf(l,i);c&&o.set(c)});for(const o in e){const l=e[o];if(!xf(l))continue;const c=kf(l,i);c&&(e[o]=c,r||(r={}),r[o]===void 0&&(r[o]=l))}return{target:e,transitionEnd:r}}const pE=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),T0=t=>pE.has(t),gE=t=>Object.keys(t).some(T0),qy=t=>t===Un||t===Ue,Wy=(t,e)=>parseFloat(t.split(", ")[e]),Hy=(t,e)=>(r,{transform:i})=>{if(i==="none"||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/);if(o)return Wy(o[1],e);{const l=i.match(/^matrix\((.+)\)$/);return l?Wy(l[1],t):0}},yE=new Set(["x","y","z"]),xE=go.filter(t=>!yE.has(t));function vE(t){const e=[];return xE.forEach(r=>{const i=t.getValue(r);i!==void 0&&(e.push([r,i.get()]),i.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Bi={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Hy(4,13),y:Hy(5,14)};Bi.translateX=Bi.x;Bi.translateY=Bi.y;const bE=(t,e,r)=>{const i=e.measureViewportBox(),o=e.current,l=getComputedStyle(o),{display:c}=l,u={};c==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(h=>{u[h]=Bi[h](i,l)}),e.render();const m=e.measureViewportBox();return r.forEach(h=>{const p=e.getValue(h);p&&p.jump(u[h]),t[h]=Bi[h](m,l)}),t},wE=(t,e,r={},i={})=>{e={...e},i={...i};const o=Object.keys(e).filter(T0);let l=[],c=!1;const u=[];if(o.forEach(m=>{const h=t.getValue(m);if(!t.hasValue(m))return;let p=r[m],g=Da(p);const x=e[m];let b;if(ac(x)){const j=x.length,C=x[0]===null?1:0;p=x[C],g=Da(p);for(let _=C;_<j&&x[_]!==null;_++)b?gm(Da(x[_])===b):b=Da(x[_])}else b=Da(x);if(g!==b)if(qy(g)&&qy(b)){const j=h.get();typeof j=="string"&&h.set(parseFloat(j)),typeof x=="string"?e[m]=parseFloat(x):Array.isArray(x)&&b===Ue&&(e[m]=x.map(parseFloat))}else g?.transform&&b?.transform&&(p===0||x===0)?p===0?h.set(b.transform(p)):e[m]=g.transform(x):(c||(l=vE(t),c=!0),u.push(m),i[m]=i[m]!==void 0?i[m]:e[m],h.jump(x))}),u.length){const m=u.indexOf("height")>=0?window.pageYOffset:null,h=bE(e,t,u);return l.length&&l.forEach(([p,g])=>{t.getValue(p).set(g)}),t.render(),Cc&&m!==null&&window.scrollTo({top:m}),{target:h,transitionEnd:i}}else return{target:e,transitionEnd:i}};function jE(t,e,r,i){return gE(e)?wE(t,e,r,i):{target:e,transitionEnd:i}}const _E=(t,e,r,i)=>{const o=hE(t,e,i);return e=o.target,i=o.transitionEnd,jE(t,e,r,i)},Tf={current:null},A0={current:!1};function CE(){if(A0.current=!0,!!Cc)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Tf.current=t.matches;t.addListener(e),e()}else Tf.current=!1}function NE(t,e,r){const{willChange:i}=e;for(const o in e){const l=e[o],c=r[o];if(nr(l))t.addValue(o,l),dc(i)&&i.add(o);else if(nr(c))t.addValue(o,Vi(l,{owner:t})),dc(i)&&i.remove(o);else if(c!==l)if(t.hasValue(o)){const u=t.getValue(o);!u.hasAnimated&&u.set(l)}else{const u=t.getStaticValue(o);t.addValue(o,Vi(u!==void 0?u:l,{owner:t}))}}for(const o in r)e[o]===void 0&&t.removeValue(o);return e}const Gy=new WeakMap,R0=Object.keys(so),SE=R0.length,Ky=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],EE=om.length;class PE{constructor({parent:e,props:r,presenceContext:i,reducedMotionConfig:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ot.render(this.render,!1,!0);const{latestValues:u,renderState:m}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=m,this.parent=e,this.props=r,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=c,this.isControllingVariants=Sc(r),this.isVariantNode=gv(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(r,{});for(const g in p){const x=p[g];u[g]!==void 0&&nr(x)&&(x.set(u[g],!1),dc(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,Gy.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),A0.current||CE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Gy.delete(this.current),this.projection&&this.projection.unmount(),js(this.notifyUpdate),js(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const i=Fn.has(e),o=r.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&ot.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),l=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),l()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},i,o,l){let c,u;for(let m=0;m<SE;m++){const h=R0[m],{isEnabled:p,Feature:g,ProjectionNode:x,MeasureLayout:b}=so[h];x&&(c=x),p(r)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),b&&(u=b))}if((this.type==="html"||this.type==="svg")&&!this.projection&&c){this.projection=new c(this.latestValues,this.parent&&this.parent.projection);const{layoutId:m,layout:h,drag:p,dragConstraints:g,layoutScroll:x,layoutRoot:b}=r;this.projection.setOptions({layoutId:m,layout:h,alwaysMeasureLayout:!!p||g&&Ri(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:l,layoutScroll:x,layoutRoot:b})}return u}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let i=0;i<Ky.length;i++){const o=Ky[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l=e["on"+o];l&&(this.propEventSubscriptions[o]=this.on(o,l))}this.prevMotionValues=NE(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const r={};for(let i=0;i<EE;i++){const o=om[i],l=this.props[o];(ro(l)||l===!1)&&(r[o]=l)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&r!==void 0&&(i=Vi(r,{owner:this}),this.addValue(e,i)),i}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:i}=this.props,o=typeof i=="string"||typeof i=="object"?(r=pm(this.props,i))===null||r===void 0?void 0:r[e]:void 0;if(i&&o!==void 0)return o;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!nr(l)?l:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Nm),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class O0 extends PE{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:i}){delete r[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...i},{transformValues:o},l){let c=W1(i,e||{},this);if(o&&(r&&(r=o(r)),i&&(i=o(i)),c&&(c=o(c))),l){z1(this,i,c);const u=_E(this,i,c,r);r=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:r,...i}}}function kE(t){return window.getComputedStyle(t)}class TE extends O0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(Fn.has(r)){const i=bm(r);return i&&i.default||0}else{const i=kE(e),o=(bv(r)?i.getPropertyValue(r):i[r])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:r}){return b0(e,r)}build(e,r,i,o){dm(e,r,i,o.transformTemplate)}scrapeMotionValuesFromProps(e,r){return hm(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nr(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,i,o){Sv(e,r,i,o)}}class AE extends O0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Fn.has(r)){const i=bm(r);return i&&i.default||0}return r=Ev.has(r)?r:im(r),e.getAttribute(r)}measureInstanceViewportBox(){return _t()}scrapeMotionValuesFromProps(e,r){return kv(e,r)}build(e,r,i,o){fm(e,r,i,this.isSVGTag,o.transformTemplate)}renderInstance(e,r,i,o){Pv(e,r,i,o)}mount(e){this.isSVGTag=mm(e.tagName),super.mount(e)}}const RE=(t,e)=>cm(t)?new AE(e,{enableHardwareAcceleration:!1}):new TE(e,{enableHardwareAcceleration:!0}),OE={layout:{ProjectionNode:k0,MeasureLayout:j0}},DE={...aS,...SN,...uE,...OE},le=MC((t,e)=>mN(t,e,DE,RE));function D0(){const t=w.useRef(!1);return nm(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function ME(){const t=D0(),[e,r]=w.useState(0),i=w.useCallback(()=>{t.current&&r(e+1)},[e]);return[w.useCallback(()=>ot.postRender(i),[i]),e]}class IE extends w.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function LE({children:t,isPresent:e}){const r=w.useId(),i=w.useRef(null),o=w.useRef({width:0,height:0,top:0,left:0});return w.useInsertionEffect(()=>{const{width:l,height:c,top:u,left:m}=o.current;if(e||!i.current||!l||!c)return;i.current.dataset.motionPopId=r;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${u}px !important;
            left: ${m}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),w.createElement(IE,{isPresent:e,childRef:i,sizeRef:o},w.cloneElement(t,{ref:i}))}const Yu=({children:t,initial:e,isPresent:r,onExitComplete:i,custom:o,presenceAffectsLayout:l,mode:c})=>{const u=Tv($E),m=w.useId(),h=w.useMemo(()=>({id:m,initial:e,isPresent:r,custom:o,onExitComplete:p=>{u.set(p,!0);for(const g of u.values())if(!g)return;i&&i()},register:p=>(u.set(p,!1),()=>u.delete(p))}),l?void 0:[r]);return w.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[r]),w.useEffect(()=>{!r&&!u.size&&i&&i()},[r]),c==="popLayout"&&(t=w.createElement(LE,{isPresent:r},t)),w.createElement(_c.Provider,{value:h},t)};function $E(){return new Map}function FE(t){return w.useEffect(()=>()=>t(),[])}const kn=t=>t.key||"";function UE(t,e){t.forEach(r=>{const i=kn(r);e.set(i,r)})}function VE(t){const e=[];return w.Children.forEach(t,r=>{w.isValidElement(r)&&e.push(r)}),e}const Vr=({children:t,custom:e,initial:r=!0,onExitComplete:i,exitBeforeEnter:o,presenceAffectsLayout:l=!0,mode:c="sync"})=>{const u=w.useContext(lm).forceRender||ME()[0],m=D0(),h=VE(t);let p=h;const g=w.useRef(new Map).current,x=w.useRef(p),b=w.useRef(new Map).current,j=w.useRef(!0);if(nm(()=>{j.current=!1,UE(h,b),x.current=p}),FE(()=>{j.current=!0,b.clear(),g.clear()}),j.current)return w.createElement(w.Fragment,null,p.map(A=>w.createElement(Yu,{key:kn(A),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:l,mode:c},A)));p=[...p];const C=x.current.map(kn),_=h.map(kn),O=C.length;for(let A=0;A<O;A++){const E=C[A];_.indexOf(E)===-1&&!g.has(E)&&g.set(E,void 0)}return c==="wait"&&g.size&&(p=[]),g.forEach((A,E)=>{if(_.indexOf(E)!==-1)return;const N=b.get(E);if(!N)return;const D=C.indexOf(E);let T=A;if(!T){const L=()=>{g.delete(E);const I=Array.from(b.keys()).filter(J=>!_.includes(J));if(I.forEach(J=>b.delete(J)),x.current=h.filter(J=>{const Q=kn(J);return Q===E||I.includes(Q)}),!g.size){if(m.current===!1)return;u(),i&&i()}};T=w.createElement(Yu,{key:kn(N),isPresent:!1,onExitComplete:L,custom:e,presenceAffectsLayout:l,mode:c},N),g.set(E,T)}p.splice(D,0,T)}),p=p.map(A=>{const E=A.key;return g.has(E)?A:w.createElement(Yu,{key:kn(A),isPresent:!0,presenceAffectsLayout:l,mode:c},A)}),w.createElement(w.Fragment,null,g.size?p:p.map(A=>w.cloneElement(A)))};function M0(t){var e,r,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=M0(t[e]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}function I0(){for(var t,e,r=0,i="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=M0(t))&&(i&&(i+=" "),i+=e);return i}function BE(){for(var t=0,e,r,i="";t<arguments.length;)(e=arguments[t++])&&(r=L0(e))&&(i&&(i+=" "),i+=r);return i}function L0(t){if(typeof t=="string")return t;for(var e,r="",i=0;i<t.length;i++)t[i]&&(e=L0(t[i]))&&(r&&(r+=" "),r+=e);return r}var Sm="-";function zE(t){var e=WE(t),r=t.conflictingClassGroups,i=t.conflictingClassGroupModifiers,o=i===void 0?{}:i;function l(u){var m=u.split(Sm);return m[0]===""&&m.length!==1&&m.shift(),$0(m,e)||qE(u)}function c(u,m){var h=r[u]||[];return m&&o[u]?[].concat(h,o[u]):h}return{getClassGroupId:l,getConflictingClassGroupIds:c}}function $0(t,e){if(t.length===0)return e.classGroupId;var r=t[0],i=e.nextPart.get(r),o=i?$0(t.slice(1),i):void 0;if(o)return o;if(e.validators.length!==0){var l=t.join(Sm);return e.validators.find(function(c){var u=c.validator;return u(l)})?.classGroupId}}var Yy=/^\[(.+)\]$/;function qE(t){if(Yy.test(t)){var e=Yy.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function WE(t){var e=t.theme,r=t.prefix,i={nextPart:new Map,validators:[]},o=GE(Object.entries(t.classGroups),r);return o.forEach(function(l){var c=l[0],u=l[1];Af(u,i,c,e)}),i}function Af(t,e,r,i){t.forEach(function(o){if(typeof o=="string"){var l=o===""?e:Qy(e,o);l.classGroupId=r;return}if(typeof o=="function"){if(HE(o)){Af(o(i),e,r,i);return}e.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(function(c){var u=c[0],m=c[1];Af(m,Qy(e,u),r,i)})})}function Qy(t,e){var r=t;return e.split(Sm).forEach(function(i){r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r}function HE(t){return t.isThemeGetter}function GE(t,e){return e?t.map(function(r){var i=r[0],o=r[1],l=o.map(function(c){return typeof c=="string"?e+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(function(u){var m=u[0],h=u[1];return[e+m,h]})):c});return[i,l]}):t}function KE(t){if(t<1)return{get:function(){},set:function(){}};var e=0,r=new Map,i=new Map;function o(l,c){r.set(l,c),e++,e>t&&(e=0,i=r,r=new Map)}return{get:function(c){var u=r.get(c);if(u!==void 0)return u;if((u=i.get(c))!==void 0)return o(c,u),u},set:function(c,u){r.has(c)?r.set(c,u):o(c,u)}}}var F0="!";function YE(t){var e=t.separator||":",r=e.length===1,i=e[0],o=e.length;return function(c){for(var u=[],m=0,h=0,p,g=0;g<c.length;g++){var x=c[g];if(m===0){if(x===i&&(r||c.slice(g,g+o)===e)){u.push(c.slice(h,g)),h=g+o;continue}if(x==="/"){p=g;continue}}x==="["?m++:x==="]"&&m--}var b=u.length===0?c:c.substring(h),j=b.startsWith(F0),C=j?b.substring(1):b,_=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:j,baseClassName:C,maybePostfixModifierPosition:_}}}function QE(t){if(t.length<=1)return t;var e=[],r=[];return t.forEach(function(i){var o=i[0]==="[";o?(e.push.apply(e,r.sort().concat([i])),r=[]):r.push(i)}),e.push.apply(e,r.sort()),e}function JE(t){return{cache:KE(t.cacheSize),splitModifiers:YE(t),...zE(t)}}var XE=/\s+/;function ZE(t,e){var r=e.splitModifiers,i=e.getClassGroupId,o=e.getConflictingClassGroupIds,l=new Set;return t.trim().split(XE).map(function(c){var u=r(c),m=u.modifiers,h=u.hasImportantModifier,p=u.baseClassName,g=u.maybePostfixModifierPosition,x=i(g?p.substring(0,g):p),b=!!g;if(!x){if(!g)return{isTailwindClass:!1,originalClassName:c};if(x=i(p),!x)return{isTailwindClass:!1,originalClassName:c};b=!1}var j=QE(m).join(":"),C=h?j+F0:j;return{isTailwindClass:!0,modifierId:C,classGroupId:x,originalClassName:c,hasPostfixModifier:b}}).reverse().filter(function(c){if(!c.isTailwindClass)return!0;var u=c.modifierId,m=c.classGroupId,h=c.hasPostfixModifier,p=u+m;return l.has(p)?!1:(l.add(p),o(m,h).forEach(function(g){return l.add(u+g)}),!0)}).reverse().map(function(c){return c.originalClassName}).join(" ")}function e2(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,o,l,c=u;function u(h){var p=e[0],g=e.slice(1),x=g.reduce(function(b,j){return j(b)},p());return i=JE(x),o=i.cache.get,l=i.cache.set,c=m,m(h)}function m(h){var p=o(h);if(p)return p;var g=ZE(h,i);return l(h,g),g}return function(){return c(BE.apply(null,arguments))}}function dt(t){var e=function(i){return i[t]||[]};return e.isThemeGetter=!0,e}var U0=/^\[(?:([a-z-]+):)?(.+)\]$/i,t2=/^\d+\/\d+$/,r2=new Set(["px","full","screen"]),s2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,n2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,i2=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Lr(t){return Dn(t)||r2.has(t)||t2.test(t)||Rf(t)}function Rf(t){return Vn(t,"length",u2)}function a2(t){return Vn(t,"size",V0)}function o2(t){return Vn(t,"position",V0)}function l2(t){return Vn(t,"url",f2)}function Wl(t){return Vn(t,"number",Dn)}function Dn(t){return!Number.isNaN(Number(t))}function c2(t){return t.endsWith("%")&&Dn(t.slice(0,-1))}function Ia(t){return Jy(t)||Vn(t,"number",Jy)}function Ke(t){return U0.test(t)}function La(){return!0}function Ks(t){return s2.test(t)}function d2(t){return Vn(t,"",m2)}function Vn(t,e,r){var i=U0.exec(t);return i?i[1]?i[1]===e:r(i[2]):!1}function u2(t){return n2.test(t)}function V0(){return!1}function f2(t){return t.startsWith("url(")}function Jy(t){return Number.isInteger(Number(t))}function m2(t){return i2.test(t)}function h2(){var t=dt("colors"),e=dt("spacing"),r=dt("blur"),i=dt("brightness"),o=dt("borderColor"),l=dt("borderRadius"),c=dt("borderSpacing"),u=dt("borderWidth"),m=dt("contrast"),h=dt("grayscale"),p=dt("hueRotate"),g=dt("invert"),x=dt("gap"),b=dt("gradientColorStops"),j=dt("gradientColorStopPositions"),C=dt("inset"),_=dt("margin"),O=dt("opacity"),A=dt("padding"),E=dt("saturate"),N=dt("scale"),D=dt("sepia"),T=dt("skew"),L=dt("space"),I=dt("translate"),J=function(){return["auto","contain","none"]},Q=function(){return["auto","hidden","clip","visible","scroll"]},we=function(){return["auto",Ke,e]},ie=function(){return[Ke,e]},be=function(){return["",Lr]},G=function(){return["auto",Dn,Ke]},de=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},U=function(){return["solid","dashed","dotted","double","none"]},ne=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},z=function(){return["start","end","center","between","around","evenly","stretch"]},ce=function(){return["","0",Ke]},oe=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},k=function(){return[Dn,Wl]},$=function(){return[Dn,Ke]};return{cacheSize:500,theme:{colors:[La],spacing:[Lr],blur:["none","",Ks,Ke],brightness:k(),borderColor:[t],borderRadius:["none","","full",Ks,Ke],borderSpacing:ie(),borderWidth:be(),contrast:k(),grayscale:ce(),hueRotate:$(),invert:ce(),gap:ie(),gradientColorStops:[t],gradientColorStopPositions:[c2,Rf],inset:we(),margin:we(),opacity:k(),padding:ie(),saturate:k(),scale:k(),sepia:ce(),skew:$(),space:ie(),translate:ie()},classGroups:{aspect:[{aspect:["auto","square","video",Ke]}],container:["container"],columns:[{columns:[Ks]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(de(),[Ke])}],overflow:[{overflow:Q()}],"overflow-x":[{"overflow-x":Q()}],"overflow-y":[{"overflow-y":Q()}],overscroll:[{overscroll:J()}],"overscroll-x":[{"overscroll-x":J()}],"overscroll-y":[{"overscroll-y":J()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ia]}],basis:[{basis:we()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ke]}],grow:[{grow:ce()}],shrink:[{shrink:ce()}],order:[{order:["first","last","none",Ia]}],"grid-cols":[{"grid-cols":[La]}],"col-start-end":[{col:["auto",{span:["full",Ia]},Ke]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[La]}],"row-start-end":[{row:["auto",{span:[Ia]},Ke]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ke]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal"].concat(z())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(z(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(z(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[A]}],px:[{px:[A]}],py:[{py:[A]}],ps:[{ps:[A]}],pe:[{pe:[A]}],pt:[{pt:[A]}],pr:[{pr:[A]}],pb:[{pb:[A]}],pl:[{pl:[A]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ke,e]}],"min-w":[{"min-w":["min","max","fit",Ke,Lr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ks]},Ks,Ke]}],h:[{h:[Ke,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ke,Lr]}],"max-h":[{"max-h":[Ke,e,"min","max","fit"]}],"font-size":[{text:["base",Ks,Rf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wl]}],"font-family":[{font:[La]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ke]}],"line-clamp":[{"line-clamp":["none",Dn,Wl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ke,Lr]}],"list-image":[{"list-image":["none",Ke]}],"list-style-type":[{list:["none","disc","decimal",Ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[O]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[O]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(U(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Lr]}],"underline-offset":[{"underline-offset":["auto",Ke,Lr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:ie()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[O]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(de(),[o2])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},l2]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[O]}],"border-style":[{border:[].concat(U(),["hidden"])}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[O]}],"divide-style":[{divide:U()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:[""].concat(U())}],"outline-offset":[{"outline-offset":[Ke,Lr]}],"outline-w":[{outline:[Lr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[O]}],"ring-offset-w":[{"ring-offset":[Lr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ks,d2]}],"shadow-color":[{shadow:[La]}],opacity:[{opacity:[O]}],"mix-blend":[{"mix-blend":ne()}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[m]}],"drop-shadow":[{"drop-shadow":["","none",Ks,Ke]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[g]}],saturate:[{saturate:[E]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[m]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[O]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ke]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",Ke]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Ia,Ke]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ke]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ie()}],"scroll-mx":[{"scroll-mx":ie()}],"scroll-my":[{"scroll-my":ie()}],"scroll-ms":[{"scroll-ms":ie()}],"scroll-me":[{"scroll-me":ie()}],"scroll-mt":[{"scroll-mt":ie()}],"scroll-mr":[{"scroll-mr":ie()}],"scroll-mb":[{"scroll-mb":ie()}],"scroll-ml":[{"scroll-ml":ie()}],"scroll-p":[{"scroll-p":ie()}],"scroll-px":[{"scroll-px":ie()}],"scroll-py":[{"scroll-py":ie()}],"scroll-ps":[{"scroll-ps":ie()}],"scroll-pe":[{"scroll-pe":ie()}],"scroll-pt":[{"scroll-pt":ie()}],"scroll-pr":[{"scroll-pr":ie()}],"scroll-pb":[{"scroll-pb":ie()}],"scroll-pl":[{"scroll-pl":ie()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Lr,Wl]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var p2=e2(h2);function Bn(...t){return p2(I0(t))}var Tc=nv();const g2=$n(Tc);function Pt(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}function Xy(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function B0(...t){return e=>{let r=!1;const i=t.map(o=>{const l=Xy(o,e);return!r&&typeof l=="function"&&(r=!0),l});if(r)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():Xy(t[o],null)}}}}function Br(...t){return w.useCallback(B0(...t),t)}function bo(t,e=[]){let r=[];function i(l,c){const u=w.createContext(c),m=r.length;r=[...r,c];const h=g=>{const{scope:x,children:b,...j}=g,C=x?.[t]?.[m]||u,_=w.useMemo(()=>j,Object.values(j));return n.jsx(C.Provider,{value:_,children:b})};h.displayName=l+"Provider";function p(g,x){const b=x?.[t]?.[m]||u,j=w.useContext(b);if(j)return j;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${l}\``)}return[h,p]}const o=()=>{const l=r.map(c=>w.createContext(c));return function(u){const m=u?.[t]||l;return w.useMemo(()=>({[`__scope${t}`]:{...u,[t]:m}}),[u,m])}};return o.scopeName=t,[i,y2(o,...e)]}function y2(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const i=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const c=i.reduce((u,{useScope:m,scopeName:h})=>{const g=m(l)[`__scope${h}`];return{...u,...g}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return r.scopeName=e.scopeName,r}function fc(t){const e=v2(t),r=w.forwardRef((i,o)=>{const{children:l,...c}=i,u=w.Children.toArray(l),m=u.find(w2);if(m){const h=m.props.children,p=u.map(g=>g===m?w.Children.count(h)>1?w.Children.only(null):w.isValidElement(h)?h.props.children:null:g);return n.jsx(e,{...c,ref:o,children:w.isValidElement(h)?w.cloneElement(h,void 0,p):null})}return n.jsx(e,{...c,ref:o,children:l})});return r.displayName=`${t}.Slot`,r}var x2=fc("Slot");function v2(t){const e=w.forwardRef((r,i)=>{const{children:o,...l}=r;if(w.isValidElement(o)){const c=_2(o),u=j2(l,o.props);return o.type!==w.Fragment&&(u.ref=i?B0(i,c):c),w.cloneElement(o,u)}return w.Children.count(o)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var z0=Symbol("radix.slottable");function b2(t){const e=({children:r})=>n.jsx(n.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=z0,e}function w2(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===z0}function j2(t,e){const r={...e};for(const i in e){const o=t[i],l=e[i];/^on[A-Z]/.test(i)?o&&l?r[i]=(...u)=>{const m=l(...u);return o(...u),m}:o&&(r[i]=o):i==="style"?r[i]={...o,...l}:i==="className"&&(r[i]=[o,l].filter(Boolean).join(" "))}return{...t,...r}}function _2(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function C2(t){const e=t+"CollectionProvider",[r,i]=bo(e),[o,l]=r(e,{collectionRef:{current:null},itemMap:new Map}),c=C=>{const{scope:_,children:O}=C,A=st.useRef(null),E=st.useRef(new Map).current;return n.jsx(o,{scope:_,itemMap:E,collectionRef:A,children:O})};c.displayName=e;const u=t+"CollectionSlot",m=fc(u),h=st.forwardRef((C,_)=>{const{scope:O,children:A}=C,E=l(u,O),N=Br(_,E.collectionRef);return n.jsx(m,{ref:N,children:A})});h.displayName=u;const p=t+"CollectionItemSlot",g="data-radix-collection-item",x=fc(p),b=st.forwardRef((C,_)=>{const{scope:O,children:A,...E}=C,N=st.useRef(null),D=Br(_,N),T=l(p,O);return st.useEffect(()=>(T.itemMap.set(N,{ref:N,...E}),()=>void T.itemMap.delete(N))),n.jsx(x,{[g]:"",ref:D,children:A})});b.displayName=p;function j(C){const _=l(t+"CollectionConsumer",C);return st.useCallback(()=>{const A=_.collectionRef.current;if(!A)return[];const E=Array.from(A.querySelectorAll(`[${g}]`));return Array.from(_.itemMap.values()).sort((T,L)=>E.indexOf(T.ref.current)-E.indexOf(L.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:c,Slot:h,ItemSlot:b},j,i]}var N2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Lt=N2.reduce((t,e)=>{const r=fc(`Primitive.${e}`),i=w.forwardRef((o,l)=>{const{asChild:c,...u}=o,m=c?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(m,{...u,ref:l})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function q0(t,e){t&&Tc.flushSync(()=>t.dispatchEvent(e))}function _s(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...r)=>e.current?.(...r),[])}function S2(t,e=globalThis?.document){const r=_s(t);w.useEffect(()=>{const i=o=>{o.key==="Escape"&&r(o)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[r,e])}var E2="DismissableLayer",Of="dismissableLayer.update",P2="dismissableLayer.pointerDownOutside",k2="dismissableLayer.focusOutside",Zy,W0=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Em=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...m}=t,h=w.useContext(W0),[p,g]=w.useState(null),x=p?.ownerDocument??globalThis?.document,[,b]=w.useState({}),j=Br(e,L=>g(L)),C=Array.from(h.layers),[_]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),O=C.indexOf(_),A=p?C.indexOf(p):-1,E=h.layersWithOutsidePointerEventsDisabled.size>0,N=A>=O,D=A2(L=>{const I=L.target,J=[...h.branches].some(Q=>Q.contains(I));!N||J||(o?.(L),c?.(L),L.defaultPrevented||u?.())},x),T=R2(L=>{const I=L.target;[...h.branches].some(Q=>Q.contains(I))||(l?.(L),c?.(L),L.defaultPrevented||u?.())},x);return S2(L=>{A===h.layers.size-1&&(i?.(L),!L.defaultPrevented&&u&&(L.preventDefault(),u()))},x),w.useEffect(()=>{if(p)return r&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Zy=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),ex(),()=>{r&&h.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=Zy)}},[p,x,r,h]),w.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),ex())},[p,h]),w.useEffect(()=>{const L=()=>b({});return document.addEventListener(Of,L),()=>document.removeEventListener(Of,L)},[]),n.jsx(Lt.div,{...m,ref:j,style:{pointerEvents:E?N?"auto":"none":void 0,...t.style},onFocusCapture:Pt(t.onFocusCapture,T.onFocusCapture),onBlurCapture:Pt(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Pt(t.onPointerDownCapture,D.onPointerDownCapture)})});Em.displayName=E2;var T2="DismissableLayerBranch",H0=w.forwardRef((t,e)=>{const r=w.useContext(W0),i=w.useRef(null),o=Br(e,i);return w.useEffect(()=>{const l=i.current;if(l)return r.branches.add(l),()=>{r.branches.delete(l)}},[r.branches]),n.jsx(Lt.div,{...t,ref:o})});H0.displayName=T2;function A2(t,e=globalThis?.document){const r=_s(t),i=w.useRef(!1),o=w.useRef(()=>{});return w.useEffect(()=>{const l=u=>{if(u.target&&!i.current){let m=function(){G0(P2,r,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=m,e.addEventListener("click",o.current,{once:!0})):m()}else e.removeEventListener("click",o.current);i.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",o.current)}},[e,r]),{onPointerDownCapture:()=>i.current=!0}}function R2(t,e=globalThis?.document){const r=_s(t),i=w.useRef(!1);return w.useEffect(()=>{const o=l=>{l.target&&!i.current&&G0(k2,r,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function ex(){const t=new CustomEvent(Of);document.dispatchEvent(t)}function G0(t,e,r,{discrete:i}){const o=r.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&o.addEventListener(t,e,{once:!0}),i?q0(o,l):o.dispatchEvent(l)}var O2=Em,D2=H0,Pr=globalThis?.document?w.useLayoutEffect:()=>{},M2="Portal",Pm=w.forwardRef((t,e)=>{const{container:r,...i}=t,[o,l]=w.useState(!1);Pr(()=>l(!0),[]);const c=r||o&&globalThis?.document?.body;return c?g2.createPortal(n.jsx(Lt.div,{...i,ref:e}),c):null});Pm.displayName=M2;function I2(t,e){return w.useReducer((r,i)=>e[r][i]??r,t)}var Ac=t=>{const{present:e,children:r}=t,i=L2(e),o=typeof r=="function"?r({present:i.isPresent}):w.Children.only(r),l=Br(i.ref,$2(o));return typeof r=="function"||i.isPresent?w.cloneElement(o,{ref:l}):null};Ac.displayName="Presence";function L2(t){const[e,r]=w.useState(),i=w.useRef(null),o=w.useRef(t),l=w.useRef("none"),c=t?"mounted":"unmounted",[u,m]=I2(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const h=Hl(i.current);l.current=u==="mounted"?h:"none"},[u]),Pr(()=>{const h=i.current,p=o.current;if(p!==t){const x=l.current,b=Hl(h);t?m("MOUNT"):b==="none"||h?.display==="none"?m("UNMOUNT"):m(p&&x!==b?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,m]),Pr(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,g=b=>{const C=Hl(i.current).includes(CSS.escape(b.animationName));if(b.target===e&&C&&(m("ANIMATION_END"),!o.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},x=b=>{b.target===e&&(l.current=Hl(i.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else m("ANIMATION_END")},[e,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:w.useCallback(h=>{i.current=h?getComputedStyle(h):null,r(h)},[])}}function Hl(t){return t?.animationName||"none"}function $2(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var F2=sv[" useInsertionEffect ".trim().toString()]||Pr;function K0({prop:t,defaultProp:e,onChange:r=()=>{},caller:i}){const[o,l,c]=U2({defaultProp:e,onChange:r}),u=t!==void 0,m=u?t:o;{const p=w.useRef(t!==void 0);w.useEffect(()=>{const g=p.current;g!==u&&console.warn(`${i} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,i])}const h=w.useCallback(p=>{if(u){const g=V2(p)?p(t):p;g!==t&&c.current?.(g)}else l(p)},[u,t,l,c]);return[m,h]}function U2({defaultProp:t,onChange:e}){const[r,i]=w.useState(t),o=w.useRef(r),l=w.useRef(e);return F2(()=>{l.current=e},[e]),w.useEffect(()=>{o.current!==r&&(l.current?.(r),o.current=r)},[r,o]),[r,i,l]}function V2(t){return typeof t=="function"}var B2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),z2="VisuallyHidden",Rc=w.forwardRef((t,e)=>n.jsx(Lt.span,{...t,ref:e,style:{...B2,...t.style}}));Rc.displayName=z2;var q2=Rc,km="ToastProvider",[Tm,W2,H2]=C2("Toast"),[Y0]=bo("Toast",[H2]),[G2,Oc]=Y0(km),Q0=t=>{const{__scopeToast:e,label:r="Notification",duration:i=5e3,swipeDirection:o="right",swipeThreshold:l=50,children:c}=t,[u,m]=w.useState(null),[h,p]=w.useState(0),g=w.useRef(!1),x=w.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${km}\`. Expected non-empty \`string\`.`),n.jsx(Tm.Provider,{scope:e,children:n.jsx(G2,{scope:e,label:r,duration:i,swipeDirection:o,swipeThreshold:l,toastCount:h,viewport:u,onViewportChange:m,onToastAdd:w.useCallback(()=>p(b=>b+1),[]),onToastRemove:w.useCallback(()=>p(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:x,children:c})})};Q0.displayName=km;var J0="ToastViewport",K2=["F8"],Df="toast.viewportPause",Mf="toast.viewportResume",X0=w.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:i=K2,label:o="Notifications ({hotkey})",...l}=t,c=Oc(J0,r),u=W2(r),m=w.useRef(null),h=w.useRef(null),p=w.useRef(null),g=w.useRef(null),x=Br(e,g,c.onViewportChange),b=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=c.toastCount>0;w.useEffect(()=>{const _=O=>{i.length!==0&&i.every(E=>O[E]||O.code===E)&&g.current?.focus()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[i]),w.useEffect(()=>{const _=m.current,O=g.current;if(j&&_&&O){const A=()=>{if(!c.isClosePausedRef.current){const T=new CustomEvent(Df);O.dispatchEvent(T),c.isClosePausedRef.current=!0}},E=()=>{if(c.isClosePausedRef.current){const T=new CustomEvent(Mf);O.dispatchEvent(T),c.isClosePausedRef.current=!1}},N=T=>{!_.contains(T.relatedTarget)&&E()},D=()=>{_.contains(document.activeElement)||E()};return _.addEventListener("focusin",A),_.addEventListener("focusout",N),_.addEventListener("pointermove",A),_.addEventListener("pointerleave",D),window.addEventListener("blur",A),window.addEventListener("focus",E),()=>{_.removeEventListener("focusin",A),_.removeEventListener("focusout",N),_.removeEventListener("pointermove",A),_.removeEventListener("pointerleave",D),window.removeEventListener("blur",A),window.removeEventListener("focus",E)}}},[j,c.isClosePausedRef]);const C=w.useCallback(({tabbingDirection:_})=>{const A=u().map(E=>{const N=E.ref.current,D=[N,...oP(N)];return _==="forwards"?D:D.reverse()});return(_==="forwards"?A.reverse():A).flat()},[u]);return w.useEffect(()=>{const _=g.current;if(_){const O=A=>{const E=A.altKey||A.ctrlKey||A.metaKey;if(A.key==="Tab"&&!E){const D=document.activeElement,T=A.shiftKey;if(A.target===_&&T){h.current?.focus();return}const J=C({tabbingDirection:T?"backwards":"forwards"}),Q=J.findIndex(we=>we===D);Qu(J.slice(Q+1))?A.preventDefault():T?h.current?.focus():p.current?.focus()}};return _.addEventListener("keydown",O),()=>_.removeEventListener("keydown",O)}},[u,C]),n.jsxs(D2,{ref:m,role:"region","aria-label":o.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&n.jsx(If,{ref:h,onFocusFromOutsideViewport:()=>{const _=C({tabbingDirection:"forwards"});Qu(_)}}),n.jsx(Tm.Slot,{scope:r,children:n.jsx(Lt.ol,{tabIndex:-1,...l,ref:x})}),j&&n.jsx(If,{ref:p,onFocusFromOutsideViewport:()=>{const _=C({tabbingDirection:"backwards"});Qu(_)}})]})});X0.displayName=J0;var Z0="ToastFocusProxy",If=w.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:i,...o}=t,l=Oc(Z0,r);return n.jsx(Rc,{tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:c=>{const u=c.relatedTarget;!l.viewport?.contains(u)&&i()}})});If.displayName=Z0;var wo="Toast",Y2="toast.swipeStart",Q2="toast.swipeMove",J2="toast.swipeCancel",X2="toast.swipeEnd",eb=w.forwardRef((t,e)=>{const{forceMount:r,open:i,defaultOpen:o,onOpenChange:l,...c}=t,[u,m]=K0({prop:i,defaultProp:o??!0,onChange:l,caller:wo});return n.jsx(Ac,{present:r||u,children:n.jsx(tP,{open:u,...c,ref:e,onClose:()=>m(!1),onPause:_s(t.onPause),onResume:_s(t.onResume),onSwipeStart:Pt(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pt(t.onSwipeMove,h=>{const{x:p,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:Pt(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pt(t.onSwipeEnd,h=>{const{x:p,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),m(!1)})})})});eb.displayName=wo;var[Z2,eP]=Y0(wo,{onClose(){}}),tP=w.forwardRef((t,e)=>{const{__scopeToast:r,type:i="foreground",duration:o,open:l,onClose:c,onEscapeKeyDown:u,onPause:m,onResume:h,onSwipeStart:p,onSwipeMove:g,onSwipeCancel:x,onSwipeEnd:b,...j}=t,C=Oc(wo,r),[_,O]=w.useState(null),A=Br(e,G=>O(G)),E=w.useRef(null),N=w.useRef(null),D=o||C.duration,T=w.useRef(0),L=w.useRef(D),I=w.useRef(0),{onToastAdd:J,onToastRemove:Q}=C,we=_s(()=>{_?.contains(document.activeElement)&&C.viewport?.focus(),c()}),ie=w.useCallback(G=>{!G||G===1/0||(window.clearTimeout(I.current),T.current=new Date().getTime(),I.current=window.setTimeout(we,G))},[we]);w.useEffect(()=>{const G=C.viewport;if(G){const de=()=>{ie(L.current),h?.()},U=()=>{const ne=new Date().getTime()-T.current;L.current=L.current-ne,window.clearTimeout(I.current),m?.()};return G.addEventListener(Df,U),G.addEventListener(Mf,de),()=>{G.removeEventListener(Df,U),G.removeEventListener(Mf,de)}}},[C.viewport,D,m,h,ie]),w.useEffect(()=>{l&&!C.isClosePausedRef.current&&ie(D)},[l,D,C.isClosePausedRef,ie]),w.useEffect(()=>(J(),()=>Q()),[J,Q]);const be=w.useMemo(()=>_?ob(_):null,[_]);return C.viewport?n.jsxs(n.Fragment,{children:[be&&n.jsx(rP,{__scopeToast:r,role:"status","aria-live":i==="foreground"?"assertive":"polite",children:be}),n.jsx(Z2,{scope:r,onClose:we,children:Tc.createPortal(n.jsx(Tm.ItemSlot,{scope:r,children:n.jsx(O2,{asChild:!0,onEscapeKeyDown:Pt(u,()=>{C.isFocusedToastEscapeKeyDownRef.current||we(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(Lt.li,{tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":C.swipeDirection,...j,ref:A,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Pt(t.onKeyDown,G=>{G.key==="Escape"&&(u?.(G.nativeEvent),G.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,we()))}),onPointerDown:Pt(t.onPointerDown,G=>{G.button===0&&(E.current={x:G.clientX,y:G.clientY})}),onPointerMove:Pt(t.onPointerMove,G=>{if(!E.current)return;const de=G.clientX-E.current.x,U=G.clientY-E.current.y,ne=!!N.current,z=["left","right"].includes(C.swipeDirection),ce=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,oe=z?ce(0,de):0,k=z?0:ce(0,U),$=G.pointerType==="touch"?10:2,ee={x:oe,y:k},ue={originalEvent:G,delta:ee};ne?(N.current=ee,Gl(Q2,g,ue,{discrete:!1})):tx(ee,C.swipeDirection,$)?(N.current=ee,Gl(Y2,p,ue,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(de)>$||Math.abs(U)>$)&&(E.current=null)}),onPointerUp:Pt(t.onPointerUp,G=>{const de=N.current,U=G.target;if(U.hasPointerCapture(G.pointerId)&&U.releasePointerCapture(G.pointerId),N.current=null,E.current=null,de){const ne=G.currentTarget,z={originalEvent:G,delta:de};tx(de,C.swipeDirection,C.swipeThreshold)?Gl(X2,b,z,{discrete:!0}):Gl(J2,x,z,{discrete:!0}),ne.addEventListener("click",ce=>ce.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),rP=t=>{const{__scopeToast:e,children:r,...i}=t,o=Oc(wo,e),[l,c]=w.useState(!1),[u,m]=w.useState(!1);return iP(()=>c(!0)),w.useEffect(()=>{const h=window.setTimeout(()=>m(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:n.jsx(Pm,{asChild:!0,children:n.jsx(Rc,{...i,children:l&&n.jsxs(n.Fragment,{children:[o.label," ",r]})})})},sP="ToastTitle",tb=w.forwardRef((t,e)=>{const{__scopeToast:r,...i}=t;return n.jsx(Lt.div,{...i,ref:e})});tb.displayName=sP;var nP="ToastDescription",rb=w.forwardRef((t,e)=>{const{__scopeToast:r,...i}=t;return n.jsx(Lt.div,{...i,ref:e})});rb.displayName=nP;var sb="ToastAction",nb=w.forwardRef((t,e)=>{const{altText:r,...i}=t;return r.trim()?n.jsx(ab,{altText:r,asChild:!0,children:n.jsx(Am,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${sb}\`. Expected non-empty \`string\`.`),null)});nb.displayName=sb;var ib="ToastClose",Am=w.forwardRef((t,e)=>{const{__scopeToast:r,...i}=t,o=eP(ib,r);return n.jsx(ab,{asChild:!0,children:n.jsx(Lt.button,{type:"button",...i,ref:e,onClick:Pt(t.onClick,o.onClose)})})});Am.displayName=ib;var ab=w.forwardRef((t,e)=>{const{__scopeToast:r,altText:i,...o}=t;return n.jsx(Lt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...o,ref:e})});function ob(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),aP(i)){const o=i.ariaHidden||i.hidden||i.style.display==="none",l=i.dataset.radixToastAnnounceExclude==="";if(!o)if(l){const c=i.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...ob(i))}}),e}function Gl(t,e,r,{discrete:i}){const o=r.originalEvent.currentTarget,l=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&o.addEventListener(t,e,{once:!0}),i?q0(o,l):o.dispatchEvent(l)}var tx=(t,e,r=0)=>{const i=Math.abs(t.x),o=Math.abs(t.y),l=i>o;return e==="left"||e==="right"?l&&i>r:!l&&o>r};function iP(t=()=>{}){const e=_s(t);Pr(()=>{let r=0,i=0;return r=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(i)}},[e])}function aP(t){return t.nodeType===t.ELEMENT_NODE}function oP(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Qu(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var lP=Q0,lb=X0,cb=eb,db=tb,ub=rb,fb=nb,mb=Am;const rx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,sx=I0,hb=(t,e)=>r=>{var i;if(e?.variants==null)return sx(t,r?.class,r?.className);const{variants:o,defaultVariants:l}=e,c=Object.keys(o).map(h=>{const p=r?.[h],g=l?.[h];if(p===null)return null;const x=rx(p)||rx(g);return o[h][x]}),u=r&&Object.entries(r).reduce((h,p)=>{let[g,x]=p;return x===void 0||(h[g]=x),h},{}),m=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((h,p)=>{let{class:g,className:x,...b}=p;return Object.entries(b).every(j=>{let[C,_]=j;return Array.isArray(_)?_.includes({...l,...u}[C]):{...l,...u}[C]===_})?[...h,g,x]:h},[]);return sx(t,c,m,r?.class,r?.className)};var cP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ke=(t,e)=>{const r=w.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:u,...m},h)=>w.createElement("svg",{ref:h,...cP,width:o,height:o,stroke:i,strokeWidth:c?Number(l)*24/Number(o):l,className:`lucide lucide-${dP(t)}`,...m},[...e.map(([p,g])=>w.createElement(p,g)),...(Array.isArray(u)?u:[u])||[]]));return r.displayName=`${t}`,r},ps=ke("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),An=ke("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),nx=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),io=ke("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),uP=ke("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),ix=ke("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),rc=ke("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ax=ke("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),fP=ke("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),mP=ke("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),mc=ke("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),pb=ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Qt=ke("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ao=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),gb=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Rm=ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Om=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),hP=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),bs=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ox=ke("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),pP=ke("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),qt=ke("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),yb=ke("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Cs=ke("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),jo=ke("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Dm=ke("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),xb=ke("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),gP=ke("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),lx=ke("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),yP=ke("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),vb=ke("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),$a=ke("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),xP=ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),bb=ke("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),vP=ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),bP=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),wP=ke("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),jP=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),qa=ke("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),_P=ke("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),pr=ke("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Ju=ke("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Qa=ke("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),CP=ke("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ws=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Sr=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),gs=ke("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Dc=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),wb=ke("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),NP=ke("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),jb=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),SP=ke("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Xu=ke("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Er=ke("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),oo=ke("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Ja=ke("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),EP=ke("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),$i=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Xa=ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),lo=ke("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),co=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),PP=ke("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),kP=ke("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),TP=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),AP=ke("Users2",[["path",{d:"M14 19a6 6 0 0 0-12 0",key:"vej9p1"}],["circle",{cx:"8",cy:"9",r:"4",key:"143rtg"}],["path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8",key:"hqbn22"}]]),Mc=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ur=ke("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ir=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),RP=lP,_b=st.forwardRef(({className:t,...e},r)=>n.jsx(lb,{ref:r,className:Bn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));_b.displayName=lb.displayName;const OP=hb("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Cb=st.forwardRef(({className:t,variant:e,...r},i)=>n.jsx(cb,{ref:i,className:Bn(OP({variant:e}),t),...r}));Cb.displayName=cb.displayName;const DP=st.forwardRef(({className:t,...e},r)=>n.jsx(fb,{ref:r,className:Bn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));DP.displayName=fb.displayName;const Nb=st.forwardRef(({className:t,...e},r)=>n.jsx(mb,{ref:r,className:Bn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),...e,children:n.jsx(ir,{className:"h-4 w-4"})}));Nb.displayName=mb.displayName;const Sb=st.forwardRef(({className:t,...e},r)=>n.jsx(db,{ref:r,className:Bn("text-sm font-semibold",t),...e}));Sb.displayName=db.displayName;const Eb=st.forwardRef(({className:t,...e},r)=>n.jsx(ub,{ref:r,className:Bn("text-sm opacity-90",t),...e}));Eb.displayName=ub.displayName;const MP=1;let Zu=0;function IP(){return Zu=(Zu+1)%Number.MAX_VALUE,Zu.toString()}const Kt={state:{toasts:[]},listeners:[],getState:()=>Kt.state,setState:t=>{typeof t=="function"?Kt.state=t(Kt.state):Kt.state={...Kt.state,...t},Kt.listeners.forEach(e=>e(Kt.state))},subscribe:t=>(Kt.listeners.push(t),()=>{Kt.listeners=Kt.listeners.filter(e=>e!==t)})},re=({...t})=>{const e=IP(),r=o=>Kt.setState(l=>({...l,toasts:l.toasts.map(c=>c.id===e?{...c,...o}:c)})),i=()=>Kt.setState(o=>({...o,toasts:o.toasts.filter(l=>l.id!==e)}));return Kt.setState(o=>({...o,toasts:[{...t,id:e,dismiss:i},...o.toasts].slice(0,MP)})),{id:e,dismiss:i,update:r}};function LP(){const[t,e]=w.useState(Kt.getState());return w.useEffect(()=>Kt.subscribe(i=>{e(i)}),[]),w.useEffect(()=>{const r=[];return t.toasts.forEach(i=>{if(i.duration===1/0)return;const o=setTimeout(()=>{i.dismiss()},i.duration||5e3);r.push(o)}),()=>{r.forEach(i=>clearTimeout(i))}},[t.toasts]),{toast:re,toasts:t.toasts}}function $P(){const{toasts:t}=LP();return n.jsxs(RP,{children:[t.map(({id:e,title:r,description:i,action:o,dismiss:l,...c})=>n.jsxs(Cb,{...c,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(Sb,{children:r}),i&&n.jsx(Eb,{children:i})]}),o,n.jsx(Nb,{})]},e)),n.jsx(_b,{})]})}const FP="modulepreload",UP=function(t){return"/"+t},cx={},Hi=function(e,r,i){let o=Promise.resolve();if(r&&r.length>0){let h=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var c=h;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),m=u?.nonce||u?.getAttribute("nonce");o=h(r.map(p=>{if(p=UP(p),p in cx)return;cx[p]=!0;const g=p.endsWith(".css"),x=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":FP,g||(b.as="script"),b.crossOrigin="",b.href=p,m&&b.setAttribute("nonce",m),document.head.appendChild(b),g)return new Promise((j,C)=>{b.addEventListener("load",j),b.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return o.then(u=>{for(const m of u||[])m.status==="rejected"&&l(m.reason);return e().catch(l)})},VP=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Hi(async()=>{const{default:i}=await Promise.resolve().then(()=>Gi);return{default:i}},void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)};class Mm extends Error{constructor(e,r="FunctionsError",i){super(e),this.name=r,this.context=i}}class dx extends Mm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ux extends Mm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fx extends Mm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Lf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Lf||(Lf={}));var BP=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};class zP{constructor(e,{headers:r={},customFetch:i,region:o=Lf.Any}={}){this.url=e,this.headers=r,this.region=o,this.fetch=VP(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var i;return BP(this,void 0,void 0,function*(){try{const{headers:o,method:l,body:c,signal:u}=r;let m={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${e}`);h&&h!=="any"&&(m["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let g;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=c):typeof c=="string"?(m["Content-Type"]="text/plain",g=c):typeof FormData<"u"&&c instanceof FormData?g=c:(m["Content-Type"]="application/json",g=JSON.stringify(c)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:g,signal:u}).catch(_=>{throw _.name==="AbortError"?_:new dx(_)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new ux(x);if(!x.ok)throw new fx(x);let j=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return j==="application/json"?C=yield x.json():j==="application/octet-stream"?C=yield x.blob():j==="text/event-stream"?C=x:j==="multipart/form-data"?C=yield x.formData():C=yield x.text(),{data:C,error:null,response:x}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new dx(o)}:{data:null,error:o,response:o instanceof fx||o instanceof ux?o.context:void 0}}})}}var Ot={},vi={},bi={},wi={},ji={},_i={},qP=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zi=qP();const WP=zi.fetch,Pb=zi.fetch.bind(zi),kb=zi.Headers,HP=zi.Request,GP=zi.Response,Gi=Object.freeze(Object.defineProperty({__proto__:null,Headers:kb,Request:HP,Response:GP,default:Pb,fetch:WP},Symbol.toStringTag,{value:"Module"})),KP=z_(Gi);var Kl={},mx;function Tb(){if(mx)return Kl;mx=1,Object.defineProperty(Kl,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Kl.default=t,Kl}var hx;function Ab(){if(hx)return _i;hx=1;var t=_i&&_i.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(_i,"__esModule",{value:!0});const e=t(KP),r=t(Tb());class i{constructor(l){var c,u;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(c=l.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=l.signal,this.isMaybeSingle=(u=l.isMaybeSingle)!==null&&u!==void 0?u:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,c){return this.headers=new Headers(this.headers),this.headers.set(l,c),this}then(l,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let m=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var p,g,x,b;let j=null,C=null,_=null,O=h.status,A=h.statusText;if(h.ok){if(this.method!=="HEAD"){const T=await h.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?C=T:C=JSON.parse(T))}const N=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),D=(x=h.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");N&&D&&D.length>1&&(_=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(j={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,_=null,O=406,A="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const N=await h.text();try{j=JSON.parse(N),Array.isArray(j)&&h.status===404&&(C=[],j=null,O=200,A="OK")}catch{h.status===404&&N===""?(O=204,A="No Content"):j={message:N}}if(j&&this.isMaybeSingle&&(!((b=j?.details)===null||b===void 0)&&b.includes("0 rows"))&&(j=null,O=200,A="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:C,count:_,status:O,statusText:A}});return this.shouldThrowOnError||(m=m.catch(h=>{var p,g,x;return{error:{message:`${(p=h?.name)!==null&&p!==void 0?p:"FetchError"}: ${h?.message}`,details:`${(g=h?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(x=h?.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),m.then(l,c)}returns(){return this}overrideTypes(){return this}}return _i.default=i,_i}var px;function Rb(){if(px)return ji;px=1;var t=ji&&ji.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ji,"__esModule",{value:!0});const e=t(Ab());class r extends e.default{select(o){let l=!1;const c=(o??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:c,foreignTable:u,referencedTable:m=u}={}){const h=m?`${m}.order`:"order",p=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${p?`${p},`:""}${o}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:c=l}={}){const u=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${o}`),this}range(o,l,{foreignTable:c,referencedTable:u=c}={}){const m=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(h,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:c=!1,buffers:u=!1,wal:m=!1,format:h="text"}={}){var p;const g=[o?"analyze":null,l?"verbose":null,c?"settings":null,u?"buffers":null,m?"wal":null].filter(Boolean).join("|"),x=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${x}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return ji.default=r,ji}var gx;function Im(){if(gx)return wi;gx=1;var t=wi&&wi.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(wi,"__esModule",{value:!0});const e=t(Rb());class r extends e.default{eq(o,l){return this.url.searchParams.append(o,`eq.${l}`),this}neq(o,l){return this.url.searchParams.append(o,`neq.${l}`),this}gt(o,l){return this.url.searchParams.append(o,`gt.${l}`),this}gte(o,l){return this.url.searchParams.append(o,`gte.${l}`),this}lt(o,l){return this.url.searchParams.append(o,`lt.${l}`),this}lte(o,l){return this.url.searchParams.append(o,`lte.${l}`),this}like(o,l){return this.url.searchParams.append(o,`like.${l}`),this}likeAllOf(o,l){return this.url.searchParams.append(o,`like(all).{${l.join(",")}}`),this}likeAnyOf(o,l){return this.url.searchParams.append(o,`like(any).{${l.join(",")}}`),this}ilike(o,l){return this.url.searchParams.append(o,`ilike.${l}`),this}ilikeAllOf(o,l){return this.url.searchParams.append(o,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(o,l){return this.url.searchParams.append(o,`ilike(any).{${l.join(",")}}`),this}is(o,l){return this.url.searchParams.append(o,`is.${l}`),this}in(o,l){const c=Array.from(new Set(l)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(o,`in.(${c})`),this}contains(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cs.{${l.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(l)}`),this}containedBy(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cd.{${l.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(l)}`),this}rangeGt(o,l){return this.url.searchParams.append(o,`sr.${l}`),this}rangeGte(o,l){return this.url.searchParams.append(o,`nxl.${l}`),this}rangeLt(o,l){return this.url.searchParams.append(o,`sl.${l}`),this}rangeLte(o,l){return this.url.searchParams.append(o,`nxr.${l}`),this}rangeAdjacent(o,l){return this.url.searchParams.append(o,`adj.${l}`),this}overlaps(o,l){return typeof l=="string"?this.url.searchParams.append(o,`ov.${l}`):this.url.searchParams.append(o,`ov.{${l.join(",")}}`),this}textSearch(o,l,{config:c,type:u}={}){let m="";u==="plain"?m="pl":u==="phrase"?m="ph":u==="websearch"&&(m="w");const h=c===void 0?"":`(${c})`;return this.url.searchParams.append(o,`${m}fts${h}.${l}`),this}match(o){return Object.entries(o).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(o,l,c){return this.url.searchParams.append(o,`not.${l}.${c}`),this}or(o,{foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.or`:"or";return this.url.searchParams.append(u,`(${o})`),this}filter(o,l,c){return this.url.searchParams.append(o,`${l}.${c}`),this}}return wi.default=r,wi}var yx;function Ob(){if(yx)return bi;yx=1;var t=bi&&bi.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(bi,"__esModule",{value:!0});const e=t(Im());class r{constructor(o,{headers:l={},schema:c,fetch:u}){this.url=o,this.headers=new Headers(l),this.schema=c,this.fetch=u}select(o,{head:l=!1,count:c}={}){const u=l?"HEAD":"GET";let m=!1;const h=(o??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",h),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:c=!0}={}){var u;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const h=o.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:c=!1,count:u,defaultToNull:m=!0}={}){var h;const p="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),u&&this.headers.append("Prefer",`count=${u}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(g.length>0){const x=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(o,{count:l}={}){var c;const u="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:o}={}){var l;const c="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return bi.default=r,bi}var xx;function YP(){if(xx)return vi;xx=1;var t=vi&&vi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(vi,"__esModule",{value:!0});const e=t(Ob()),r=t(Im());class i{constructor(l,{headers:c={},schema:u,fetch:m}={}){this.url=l,this.headers=new Headers(c),this.schemaName=u,this.fetch=m}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new i(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:u=!1,get:m=!1,count:h}={}){var p;let g;const x=new URL(`${this.url}/rpc/${l}`);let b;u||m?(g=u?"HEAD":"GET",Object.entries(c).filter(([C,_])=>_!==void 0).map(([C,_])=>[C,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([C,_])=>{x.searchParams.append(C,_)})):(g="POST",b=c);const j=new Headers(this.headers);return h&&j.set("Prefer",`count=${h}`),new r.default({method:g,url:x,headers:j,schema:this.schemaName,body:b,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return vi.default=i,vi}var vx;function QP(){if(vx)return Ot;vx=1;var t=Ot&&Ot.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.PostgrestError=Ot.PostgrestBuilder=Ot.PostgrestTransformBuilder=Ot.PostgrestFilterBuilder=Ot.PostgrestQueryBuilder=Ot.PostgrestClient=void 0;const e=t(YP());Ot.PostgrestClient=e.default;const r=t(Ob());Ot.PostgrestQueryBuilder=r.default;const i=t(Im());Ot.PostgrestFilterBuilder=i.default;const o=t(Rb());Ot.PostgrestTransformBuilder=o.default;const l=t(Ab());Ot.PostgrestBuilder=l.default;const c=t(Tb());return Ot.PostgrestError=c.default,Ot.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default},Ot}var JP=QP();const XP=$n(JP),{PostgrestClient:ZP,PostgrestQueryBuilder:hD,PostgrestFilterBuilder:pD,PostgrestTransformBuilder:gD,PostgrestBuilder:yD,PostgrestError:xD}=XP;class ek{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const i=this.getWebSocketConstructor();return new i(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const tk="2.15.5",rk=`realtime-js/${tk}`,sk="1.0.0",$f=1e4,nk=1e3,ik=100;var Za;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Za||(Za={}));var Et;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Et||(Et={}));var $r;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})($r||($r={}));var Ff;(function(t){t.websocket="websocket"})(Ff||(Ff={}));var Rn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Rn||(Rn={}));class ak{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,r,i)}_decodeBroadcast(e,r,i){const o=r.getUint8(1),l=r.getUint8(2);let c=this.HEADER_LENGTH+2;const u=i.decode(e.slice(c,c+o));c=c+o;const m=i.decode(e.slice(c,c+l));c=c+l;const h=JSON.parse(i.decode(e.slice(c,e.byteLength)));return{ref:null,topic:u,event:m,payload:h}}}class Db{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var at;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(at||(at={}));const bx=(t,e,r={})=>{var i;const o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((l,c)=>(l[c]=ok(c,t,e,o),l),{})},ok=(t,e,r,i)=>{const o=e.find(u=>u.name===t),l=o?.type,c=r[t];return l&&!i.includes(l)?Mb(l,c):Uf(c)},Mb=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return uk(e,r)}switch(t){case at.bool:return lk(e);case at.float4:case at.float8:case at.int2:case at.int4:case at.int8:case at.numeric:case at.oid:return ck(e);case at.json:case at.jsonb:return dk(e);case at.timestamp:return fk(e);case at.abstime:case at.date:case at.daterange:case at.int4range:case at.int8range:case at.money:case at.reltime:case at.text:case at.time:case at.timestamptz:case at.timetz:case at.tsrange:case at.tstzrange:return Uf(e);default:return Uf(e)}},Uf=t=>t,lk=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ck=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},dk=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},uk=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,i=t[r];if(t[0]==="{"&&i==="}"){let l;const c=t.slice(1,r);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(u=>Mb(e,u))}return t},fk=t=>typeof t=="string"?t.replace(" ","T"):t,Ib=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ef{constructor(e,r,i={},o=$f){this.channel=e,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var i;return this._hasReceived(e)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(wx||(wx={}));class eo{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=eo.syncState(this.state,o,l,c),this.pendingDiffs.forEach(m=>{this.state=eo.syncDiff(this.state,m,l,c)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=eo.syncDiff(this.state,o,l,c),u())}),this.onJoin((o,l,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:c})}),this.onLeave((o,l,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,i,o){const l=this.cloneDeep(e),c=this.transformState(r),u={},m={};return this.map(l,(h,p)=>{c[h]||(m[h]=p)}),this.map(c,(h,p)=>{const g=l[h];if(g){const x=p.map(_=>_.presence_ref),b=g.map(_=>_.presence_ref),j=p.filter(_=>b.indexOf(_.presence_ref)<0),C=g.filter(_=>x.indexOf(_.presence_ref)<0);j.length>0&&(u[h]=j),C.length>0&&(m[h]=C)}else u[h]=p}),this.syncDiff(l,{joins:u,leaves:m},i,o)}static syncDiff(e,r,i,o){const{joins:l,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(u,m)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(m),p.length>0){const g=e[u].map(b=>b.presence_ref),x=p.filter(b=>g.indexOf(b.presence_ref)<0);e[u].unshift(...x)}i(u,p,m)}),this.map(c,(u,m)=>{let h=e[u];if(!h)return;const p=m.map(g=>g.presence_ref);h=h.filter(g=>p.indexOf(g.presence_ref)<0),e[u]=h,o(u,h,m),h.length===0&&delete e[u]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(i=>r(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,i)=>{const o=e[i];return"metas"in o?r[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[i]=o,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(jx||(jx={}));var to;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(to||(to={}));var hs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(hs||(hs={}));class Lm{constructor(e,r={config:{}},i){this.topic=e,this.params=r,this.socket=i,this.bindings={},this.state=Et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ef(this,$r.join,this.params,this.timeout),this.rejoinTimer=new Db(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Et.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this._on($r.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new eo(this),this.broadcastEndpointURL=Ib(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Et.closed){const{config:{broadcast:c,presence:u,private:m}}=this.params,h=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&o!==void 0?o:[],p=!!this.bindings[to.PRESENCE]&&this.bindings[to.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,g={},x={broadcast:c,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:h,private:m};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(hs.CHANNEL_ERROR,b)),this._onClose(()=>e?.(hs.CLOSED)),this.updateJoinPayload(Object.assign({config:x},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var j;if(this.socket.setAuth(),b===void 0){e?.(hs.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,_=(j=C?.length)!==null&&j!==void 0?j:0,O=[];for(let A=0;A<_;A++){const E=C[A],{filter:{event:N,schema:D,table:T,filter:L}}=E,I=b&&b[A];if(I&&I.event===N&&I.schema===D&&I.table===T&&I.filter===L)O.push(Object.assign(Object.assign({},E),{id:I.id}));else{this.unsubscribe(),this.state=Et.errored,e?.(hs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,e&&e(hs.SUBSCRIBED);return}}).receive("error",b=>{this.state=Et.errored,e?.(hs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(hs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,i){return this.state===Et.joined&&e===to.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,i)}async send(e,r={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:c}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=h.body)===null||o===void 0?void 0:o.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,u,m;const h=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),h.receive("ok",()=>l("ok")),h.receive("error",()=>l("error")),h.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Et.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($r.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new ef(this,$r.leave,{},e),i.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Et.closed,this.bindings={}}async _fetchWithTimeout(e,r,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),c=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(l),c}_push(e,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ef(this,e,r,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ik){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,i){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,i){var o,l;const c=e.toLocaleLowerCase(),{close:u,error:m,leave:h,join:p}=$r;if(i&&[u,m,h,p].indexOf(c)>=0&&i!==this._joinRef())return;let x=this._onMessage(c,r,i);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var j,C,_;return((j=b.filter)===null||j===void 0?void 0:j.event)==="*"||((_=(C=b.filter)===null||C===void 0?void 0:C.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===c}).map(b=>b.callback(x,i)):(l=this.bindings[c])===null||l===void 0||l.filter(b=>{var j,C,_,O,A,E;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const N=b.id,D=(j=b.filter)===null||j===void 0?void 0:j.event;return N&&((C=r.ids)===null||C===void 0?void 0:C.includes(N))&&(D==="*"||D?.toLocaleLowerCase()===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const N=(A=(O=b?.filter)===null||O===void 0?void 0:O.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return N==="*"||N===((E=r?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof x=="object"&&"ids"in x){const j=x.data,{schema:C,table:_,commit_timestamp:O,type:A,errors:E}=j;x=Object.assign(Object.assign({},{schema:C,table:_,commit_timestamp:O,eventType:A,new:{},old:{},errors:E}),this._getPayloadRecords(j))}b.callback(x,i)})}_isClosed(){return this.state===Et.closed}_isJoined(){return this.state===Et.joined}_isJoining(){return this.state===Et.joining}_isLeaving(){return this.state===Et.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,i){const o=e.toLocaleLowerCase(),l={type:o,filter:r,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,r){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Lm.isEqual(o.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const i in e)if(e[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($r.close,{},e)}_onError(e){this._on($r.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Et.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=bx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=bx(e.columns,e.old_record)),r}}const tf=()=>{},Yl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mk=[1e3,2e3,5e3,1e4],hk=1e4,pk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gk{constructor(e,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=$f,this.transport=null,this.heartbeatIntervalMs=Yl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tf,this.ref=0,this.reconnectTimer=null,this.logger=tf,this.conn=null,this.sendBuffer=[],this.serializer=new ak,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...c)=>Hi(async()=>{const{default:u}=await Promise.resolve().then(()=>Gi);return{default:u}},void 0).then(({default:u})=>u(...c)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...c)=>l(...c)},!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Ff.websocket}`,this.httpEndpoint=Ib(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ek.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sk}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,i){this.logger(e,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Za.connecting:return Rn.Connecting;case Za.open:return Rn.Open;case Za.closing:return Rn.Closing;default:return Rn.Closed}}isConnected(){return this.connectionState()===Rn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new Lm(`realtime:${e}`,r,this);return this.channels.push(l),l}}push(e){const{topic:r,event:i,payload:o,ref:l}=e,c=()=>{this.encode(e,u=>{var m;(m=this.conn)===null||m===void 0||m.send(u)})};this.log("push",`${r} ${i} (${l})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(nk,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Yl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:c}=r,u=c?`(${c})`:"",m=l.status||"";this.log("receive",`${m} ${i} ${o} ${u}`.trim(),l),this.channels.filter(h=>h._isMember(i)).forEach(h=>h._trigger(o,l,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger($r.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${e}${i}${o}`}_workerObjectUrl(e){let r;if(e)r=e;else{const i=new Blob([pk],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const o={access_token:r,version:rk};r&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push($r.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(r)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Db(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,i,o,l,c,u,m,h,p;if(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:$f,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:Yl.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:tf,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e?.reconnectAfterMs)!==null&&m!==void 0?m:(g=>mk[g-1]||hk),this.encode=(h=e?.encode)!==null&&h!==void 0?h:((g,x)=>x(JSON.stringify(g))),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class $m extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ct(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class yk extends $m{constructor(e,r,i){super(e),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Vf extends $m{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var xk=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};const Lb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Hi(async()=>{const{default:i}=await Promise.resolve().then(()=>Gi);return{default:i}},void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)},vk=()=>xk(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hi(()=>Promise.resolve().then(()=>Gi),void 0)).Response:Response}),Bf=t=>{if(Array.isArray(t))return t.map(r=>Bf(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,i])=>{const o=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=Bf(i)}),e},bk=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var zn=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};const rf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wk=(t,e,r)=>zn(void 0,void 0,void 0,function*(){const i=yield vk();t instanceof i&&!r?.noResolveJson?t.json().then(o=>{const l=t.status||500,c=o?.statusCode||l+"";e(new yk(rf(o),l,c))}).catch(o=>{e(new Vf(rf(o),o))}):e(new Vf(rf(t),t))}),jk=(t,e,r,i)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"||!i?o:(bk(i)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(i)):o.body=i,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),r))};function _o(t,e,r,i,o,l){return zn(this,void 0,void 0,function*(){return new Promise((c,u)=>{t(r,jk(e,i,o,l)).then(m=>{if(!m.ok)throw m;return i?.noResolveJson?m:m.json()}).then(m=>c(m)).catch(m=>wk(m,u,i))})})}function hc(t,e,r,i){return zn(this,void 0,void 0,function*(){return _o(t,"GET",e,r,i)})}function Xr(t,e,r,i,o){return zn(this,void 0,void 0,function*(){return _o(t,"POST",e,i,o,r)})}function zf(t,e,r,i,o){return zn(this,void 0,void 0,function*(){return _o(t,"PUT",e,i,o,r)})}function _k(t,e,r,i){return zn(this,void 0,void 0,function*(){return _o(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function $b(t,e,r,i,o){return zn(this,void 0,void 0,function*(){return _o(t,"DELETE",e,i,o,r)})}var Ck=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};class Nk{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return Ck(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ct(e))return{data:null,error:e};throw e}})}}var Sk=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};class Ek{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}asStream(){return new Nk(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.execute().then(e,r)}execute(){return Sk(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ct(e))return{data:null,error:e};throw e}})}}var sr=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};const Pk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_x={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class kk{constructor(e,r={},i,o){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=i,this.fetch=Lb(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,i,o){return sr(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},_x),o);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const m=c.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",this.encodeMetadata(m))):(l=i,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,m&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),o?.headers&&(u=Object.assign(Object.assign({},u),o.headers));const h=this._removeEmptyFolders(r),p=this._getFinalPath(h),g=yield(e=="PUT"?zf:Xr)(this.fetch,`${this.url}/object/${p}`,l,Object.assign({headers:u},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:h,id:g.Id,fullPath:g.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ct(l))return{data:null,error:l};throw l}})}upload(e,r,i){return sr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,i)})}uploadToSignedUrl(e,r,i,o){return sr(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),u=new URL(this.url+`/object/upload/sign/${c}`);u.searchParams.set("token",r);try{let m;const h=Object.assign({upsert:_x.upsert},o),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",h.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",h.cacheControl)):(m=i,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);const g=yield zf(this.fetch,u.toString(),m,{headers:p});return{data:{path:l,fullPath:g.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Ct(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,r){return sr(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const l=yield Xr(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),c=new URL(this.url+l.url),u=c.searchParams.get("token");if(!u)throw new $m("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:u},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i))return{data:null,error:i};throw i}})}update(e,r,i){return sr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,i)})}move(e,r,i){return sr(this,void 0,void 0,function*(){try{return{data:yield Xr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}})}copy(e,r,i){return sr(this,void 0,void 0,function*(){try{return{data:{path:(yield Xr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}})}createSignedUrl(e,r,i){return sr(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield Xr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}})}createSignedUrls(e,r,i){return sr(this,void 0,void 0,function*(){try{const o=yield Xr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}})}download(e,r){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(r?.transform||{}),c=l?`?${l}`:"",u=this._getFinalPath(e),m=()=>hc(this.fetch,`${this.url}/${o}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new Ek(m,this.shouldThrowOnError)}info(e){return sr(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const i=yield hc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Bf(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i))return{data:null,error:i};throw i}})}exists(e){return sr(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield _k(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i)&&i instanceof Vf){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,r){const i=this._getFinalPath(e),o=[],l=r?.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&o.push(l);const u=typeof r?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(r?.transform||{});m!==""&&o.push(m);let h=o.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${i}${h}`)}}}remove(e){return sr(this,void 0,void 0,function*(){try{return{data:yield $b(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}list(e,r,i){return sr(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Pk),r),{prefix:e||""});return{data:yield Xr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}})}listV2(e,r){return sr(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield Xr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Tk="2.12.2",Ak={"X-Client-Info":`storage-js/${Tk}`};var Ci=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};class Rk{constructor(e,r={},i,o){this.shouldThrowOnError=!1;const l=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},Ak),r),this.fetch=Lb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ci(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ct(e))return{data:null,error:e};throw e}})}getBucket(e){return Ci(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Ci(this,void 0,void 0,function*(){try{return{data:yield Xr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return Ci(this,void 0,void 0,function*(){try{return{data:yield zf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Ci(this,void 0,void 0,function*(){try{return{data:yield Xr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ci(this,void 0,void 0,function*(){try{return{data:yield $b(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}}class Ok extends Rk{constructor(e,r={},i,o){super(e,r,i,o)}from(e){return new kk(this.url,this.headers,e,this.fetch)}}const Dk="2.58.0";let Wa="";typeof Deno<"u"?Wa="deno":typeof document<"u"?Wa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wa="react-native":Wa="node";const Mk={"X-Client-Info":`supabase-js-${Wa}/${Dk}`},Ik={headers:Mk},Lk={schema:"public"},$k={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fk={};var Uk=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};const Vk=t=>{let e;return t?e=t:typeof fetch>"u"?e=Pb:e=fetch,(...r)=>e(...r)},Bk=()=>typeof Headers>"u"?kb:Headers,zk=(t,e,r)=>{const i=Vk(r),o=Bk();return(l,c)=>Uk(void 0,void 0,void 0,function*(){var u;const m=(u=yield e())!==null&&u!==void 0?u:t;let h=new o(c?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${m}`),i(l,Object.assign(Object.assign({},c),{headers:h}))})};var qk=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};function Wk(t){return t.endsWith("/")?t:t+"/"}function Hk(t,e){var r,i;const{db:o,auth:l,realtime:c,global:u}=t,{db:m,auth:h,realtime:p,global:g}=e,x={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},h),l),realtime:Object.assign(Object.assign({},p),c),storage:{},global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(r=g?.headers)!==null&&r!==void 0?r:{}),(i=u?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>qk(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}function Gk(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wk(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Fb="2.72.0",Ti=30*1e3,qf=3,sf=qf*Ti,Kk="http://localhost:9999",Yk="supabase.auth.token",Qk={"X-Client-Info":`gotrue-js/${Fb}`},Wf="X-Supabase-Api-Version",Ub={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xk=600*1e3;class Fm extends Error{constructor(e,r,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function ze(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Zk extends Fm{constructor(e,r,i){super(e,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function eT(t){return ze(t)&&t.name==="AuthApiError"}class Vb extends Fm{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class ln extends Fm{constructor(e,r,i,o){super(e,i,o),this.name=r,this.status=i}}class Xs extends ln{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tT(t){return ze(t)&&t.name==="AuthSessionMissingError"}class Fa extends ln{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ql extends ln{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jl extends ln{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rT(t){return ze(t)&&t.name==="AuthImplicitGrantRedirectError"}class Cx extends ln{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hf extends ln{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function nf(t){return ze(t)&&t.name==="AuthRetryableFetchError"}class Nx extends ln{constructor(e,r,i){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Gf extends ln{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const pc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sx=` 	
\r=`.split(""),sT=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Sx.length;e+=1)t[Sx[e].charCodeAt(0)]=-2;for(let e=0;e<pc.length;e+=1)t[pc[e].charCodeAt(0)]=e;return t})();function Ex(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(pc[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(pc[i]),e.queuedBits-=6}}function Bb(t,e,r){const i=sT[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Px(t){const e=[],r=c=>{e.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=c=>{aT(c,i,r)};for(let c=0;c<t.length;c+=1)Bb(t.charCodeAt(c),o,l);return e.join("")}function nT(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function iT(t,e){for(let r=0;r<t.length;r+=1){let i=t.charCodeAt(r);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}nT(i,e)}}function aT(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function oT(t){const e=[],r={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)Bb(t.charCodeAt(o),r,i);return new Uint8Array(e)}function lT(t){const e=[];return iT(t,r=>e.push(r)),new Uint8Array(e)}function cT(t){const e=[],r={queue:0,queuedBits:0},i=o=>{e.push(o)};return t.forEach(o=>Ex(o,r,i)),Ex(null,r,i),e.join("")}function dT(t){return Math.round(Date.now()/1e3)+t}function uT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const _r=()=>typeof window<"u"&&typeof document<"u",Nn={tested:!1,writable:!1},zb=()=>{if(!_r())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Nn.tested)return Nn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Nn.tested=!0,Nn.writable=!0}catch{Nn.tested=!0,Nn.writable=!1}return Nn.writable};function fT(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return r.searchParams.forEach((i,o)=>{e[o]=i}),e}const qb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Hi(async()=>{const{default:i}=await Promise.resolve().then(()=>Gi);return{default:i}},void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)},mT=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ai=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Sn=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ys=async(t,e)=>{await t.removeItem(e)};class Ic{constructor(){this.promise=new Ic.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Ic.promiseConstructor=Promise;function af(t){const e=t.split(".");if(e.length!==3)throw new Gf("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Jk.test(e[i]))throw new Gf("JWT not in base64url format");return{header:JSON.parse(Px(e[0])),payload:JSON.parse(Px(e[1])),signature:oT(e[2]),raw:{header:e[0],payload:e[1]}}}async function hT(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function pT(t,e){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){i(c);return}}catch(c){if(!e(l,c)){o(c);return}}})()})}function gT(t){return("0"+t.toString(16)).substr(-2)}function yT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let o="";for(let l=0;l<56;l++)o+=r.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,gT).join("")}async function xT(t){const r=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function vT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await xT(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ni(t,e,r=!1){const i=yT();let o=i;r&&(o+="/PASSWORD_RECOVERY"),await Ai(t,`${e}-code-verifier`,o);const l=await vT(i);return[l,i===l?"plain":"s256"]}const bT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wT(t){const e=t.headers.get(Wf);if(!e||!e.match(bT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function jT(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function _T(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const CT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Si(t){if(!CT.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function of(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kx(t){return JSON.parse(JSON.stringify(t))}var NT=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(r[i[o]]=t[i[o]]);return r};const Tn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ST=[502,503,504];async function Tx(t){var e;if(!mT(t))throw new Hf(Tn(t),0);if(ST.includes(t.status))throw new Hf(Tn(t),t.status);let r;try{r=await t.json()}catch(l){throw new Vb(Tn(l),l)}let i;const o=wT(t);if(o&&o.getTime()>=Ub["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Nx(Tn(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Xs}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Nx(Tn(r),t.status,r.weak_password.reasons);throw new Zk(Tn(r),t.status||500,i)}const ET=(t,e,r,i)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};async function Ge(t,e,r,i){var o;const l=Object.assign({},i?.headers);l[Wf]||(l[Wf]=Ub["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const c=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(c.redirect_to=i.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",m=await PT(t,e,r+u,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function PT(t,e,r,i,o,l){const c=ET(e,i,o,l);let u;try{u=await t(r,Object.assign({},c))}catch(m){throw console.error(m),new Hf(Tn(m),0)}if(u.ok||await Tx(u),i?.noResolveJson)return u;try{return await u.json()}catch(m){await Tx(m)}}function Jr(t){var e;let r=null;RT(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=dT(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:i},error:null}}function Ax(t){const e=Jr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function en(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function kT(t){return{data:t,error:null}}function TT(t){const{action_link:e,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l}=t,c=NT(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l},m=Object.assign({},c);return{data:{properties:u,user:m},error:null}}function AT(t){return t}function RT(t){return t.access_token&&t.refresh_token&&t.expires_in}const lf=["global","local","others"];var OT=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(r[i[o]]=t[i[o]]);return r};class DT{constructor({url:e="",headers:r={},fetch:i}){this.url=e,this.headers=r,this.fetch=qb(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=lf[0]){if(lf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lf.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ze(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,r={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:en})}catch(i){if(ze(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:r}=e,i=OT(e,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:TT,redirectTo:r?.redirectTo})}catch(r){if(ze(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:en})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,i,o,l,c,u,m;try{const h={nextPage:null,lastPage:0,total:0},p=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:AT});if(p.error)throw p.error;const g=await p.json(),x=(c=p.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(m=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(j=>{const C=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);h[`${_}Page`]=C}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(ze(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Si(e);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:en})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Si(e);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:en})}catch(i){if(ze(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,r=!1){Si(e);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:en})}catch(i){if(ze(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Si(e.userId);try{const{data:r,error:i}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Si(e.userId),Si(e.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}}function Rx(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function MT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ei={debug:!!(globalThis&&zb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class IT extends Wb{}async function LT(t,e,r){Ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Ei.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await r()}finally{Ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new IT(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ei.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Hb(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function $T(t){return parseInt(t,16)}function FT(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function UT(t){var e;const{chainId:r,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:c,notBefore:u,requestId:m,resources:h,scheme:p,uri:g,version:x}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=Hb(t.address),j=p?`${p}://${i}`:i,C=t.statement?`${t.statement}
`:"",_=`${j} wants you to sign in with your Ethereum account:
${b}

${C}`;let O=`URI: ${g}
Version: ${x}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(o&&(O+=`
Expiration Time: ${o.toISOString()}`),u&&(O+=`
Not Before: ${u.toISOString()}`),m&&(O+=`
Request ID: ${m}`),h){let A=`
Resources:`;for(const E of h){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);A+=`
- ${E}`}O+=A}return`${_}
${O}`}MT();const VT={url:Kk,storageKey:Yk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ox(t,e,r){return await r()}const Pi={};class uo{constructor(e){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=uo.nextInstanceID,uo.nextInstanceID+=1,this.instanceID>0&&_r()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},VT),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new DT({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=qb(o.fetch),this.lock=o.lock||Ox,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:_r()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=LT:this.lock=Ox,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:zb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rx(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Rx(this.memoryStorage)),_r()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Pi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Pi[this.storageKey]=Object.assign(Object.assign({},Pi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Pi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Pi[this.storageKey]=Object.assign(Object.assign({},Pi[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Fb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=fT(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),_r()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(r,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),rT(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:u}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ze(r)?{error:r}:{error:new Vb("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,i,o;try{const l=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Jr}),{data:c,error:u}=l;if(u||!c)return{data:{user:null,session:null},error:u};const m=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(l){if(ze(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var r,i,o;try{let l;if("email"in e){const{email:p,password:g,options:x}=e;let b=null,j=null;this.flowType==="pkce"&&([b,j]=await Ni(this.storage,this.storageKey)),l=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:p,password:g,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:b,code_challenge_method:j},xform:Jr})}else if("phone"in e){const{phone:p,password:g,options:x}=e;l=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(i=x?.data)!==null&&i!==void 0?i:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Jr})}else throw new Ql("You must provide either an email or phone number and a password");const{data:c,error:u}=l;if(u||!c)return{data:{user:null,session:null},error:u};const m=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(l){if(ze(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let r;if("email"in e){const{email:l,password:c,options:u}=e;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Ax})}else if("phone"in e){const{phone:l,password:c,options:u}=e;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Ax})}else throw new Ql("You must provide either an email or phone number and a password");const{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Fa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,i,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,i,o,l,c,u,m,h,p,g,x;let b,j;if("message"in e)b=e.message,j=e.signature;else{const{chain:C,wallet:_,statement:O,options:A}=e;let E;if(_r())if(typeof _=="object")E=_;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")E=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=_}const N=new URL((r=A?.url)!==null&&r!==void 0?r:window.location.href),D=await E.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=Hb(D[0]);let L=(i=A?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!L){const J=await E.request({method:"eth_chainId"});L=$T(J)}const I={domain:N.host,address:T,statement:O,uri:N.href,version:"1",chainId:L,nonce:(o=A?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(c=(l=A?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(u=A?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(m=A?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(h=A?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=A?.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=UT(I),j=await E.request({method:"personal_sign",params:[FT(b),T]})}try{const{data:C,error:_}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:j},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Jr});if(_)throw _;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Fa}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:_})}catch(C){if(ze(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(e){var r,i,o,l,c,u,m,h,p,g,x,b;let j,C;if("message"in e)j=e.message,C=e.signature;else{const{chain:_,wallet:O,statement:A,options:E}=e;let N;if(_r())if(typeof O=="object")N=O;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))N=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=O}const D=new URL((r=E?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const T=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),A?{statement:A}:null));let L;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")L=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)L=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)j=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),C=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${D.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(o=(i=E?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=E?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((c=E?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((u=E?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((m=E?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((g=(p=E?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...E.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const T=await N.signMessage(new TextEncoder().encode(j),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=T}}try{const{data:_,error:O}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:cT(C)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Jr});if(O)throw O;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Fa}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:O})}catch(_){if(ze(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const r=await Sn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{const{data:l,error:c}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Jr});if(await Ys(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Fa}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:c})}catch(l){if(ze(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:r,provider:i,token:o,access_token:l,nonce:c}=e,u=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Jr}),{data:m,error:h}=u;return h?{data:{user:null,session:null},error:h}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Fa}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:h})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,i,o,l,c;try{if("email"in e){const{email:u,options:m}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Ni(this.storage,this.storageKey));const{error:g}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=m?.data)!==null&&r!==void 0?r:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:u,options:m}=e,{data:h,error:p}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(c=m?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:p}}throw new Ql("You must provide either an email or phone number.")}catch(u){if(ze(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var r,i;try{let o,l;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:u}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Jr});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const m=c.session,h=c.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(o){if(ze(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var r,i,o;try{let l=null,c=null;return this.flowType==="pkce"&&([l,c]=await Ni(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:kT})}catch(l){if(ze(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new Xs;const{error:o}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(ze(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:l}=e,{error:c}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:i,type:o,options:l}=e,{data:c,error:u}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new Ql("You must provide either an email or phone number and a type")}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Sn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<sf:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const c=await Sn(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=of()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(m,h,p)=>(!c&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,h,p))})}return{data:{session:e},error:null}}const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:en}):await this._useSession(async r=>{var i,o,l;const{data:c,error:u}=r;if(u)throw u;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xs}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:en})})}catch(r){if(ze(r))return tT(r)&&(await this._removeSession(),await Ys(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Xs;const c=o.session;let u=null,m=null;this.flowType==="pkce"&&e.email!=null&&([u,m]=await Ni(this.storage,this.storageKey));const{data:h,error:p}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:m}),jwt:c.access_token,xform:en});if(p)throw p;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(i){if(ze(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xs;const r=Date.now()/1e3;let i=r,o=!0,l=null;const{payload:c}=af(e.access_token);if(c.exp&&(i=c.exp,o=i<=r),o){const{session:u,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!u)return{data:{user:null,session:null},error:null};l=u}else{const{data:u,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(r){if(ze(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){const{data:c,error:u}=r;if(u)throw u;e=(i=c.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Xs;const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!_r())throw new Jl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Cx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Cx("No code detected.");const{data:A,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:c,expires_in:u,expires_at:m,token_type:h}=e;if(!l||!u||!c||!h)throw new Jl("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(u);let x=p+g;m&&(x=parseInt(m));const b=x-p;b*1e3<=Ti&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const j=x-g;p-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,x,p):p-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,x,p);const{data:C,error:_}=await this._getUser(l);if(_)throw _;const O={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:g,expires_at:x,refresh_token:c,token_type:h,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:O,redirectType:e.type},error:null}}catch(i){if(ze(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Sn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return{error:l};const c=(i=o.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:u}=await this.admin.signOut(c,e);if(u&&!(eT(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Ys(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=uT(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{const{data:{session:l},error:c}=r;if(c)throw c;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Ni(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(ze(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:i,error:o}=await this._useSession(async l=>{var c,u,m,h,p;const{data:g,error:x}=l;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return _r()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(ze(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;const{data:l,error:c}=r;if(c)throw c;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await pT(async o=>(o>0&&await hT(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Jr})),(o,l)=>{const c=200*Math.pow(2,o);return l&&nf(l)&&Date.now()+c-i<Ti})}catch(i){if(this._debug(r,"error",i),ze(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),_r()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Sn(this.storage,this.storageKey);if(o&&this.userStorage){let c=await Sn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await Ai(this.userStorage,this.storageKey+"-user",c)),o.user=(e=c?.user)!==null&&e!==void 0?e:of()}else if(o&&!o.user&&!o.user){const c=await Sn(this.storage,this.storageKey+"-user");c&&c?.user?(o.user=c.user,await Ys(this.storage,this.storageKey+"-user"),await Ai(this.storage,this.storageKey,o)):o.user=of()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<sf;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${sf}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),nf(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:u}=await this._getUser(o.access_token);!u&&c?.user?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new Xs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ic;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Xs;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const u={session:l.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(l){if(this._debug(o,"error",l),ze(l)){const c={session:null,error:l};return nf(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,r)}catch(m){l.push(m)}});if(await Promise.all(c),l.length>0){for(let u=0;u<l.length;u+=1)console.error(l[u]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Ai(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const l=kx(o);await Ai(this.storage,this.storageKey,l)}else{const o=kx(r);await Ai(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Ys(this.storage,this.storageKey),await Ys(this.storage,this.storageKey+"-code-verifier"),await Ys(this.storage,this.storageKey+"-user"),this.userStorage&&await Ys(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_r()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ti);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/Ti);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ti}ms, refresh threshold is ${qf} ticks`),o<=qf&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Wb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_r()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){const o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,c]=await Ni(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(u.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;return l?{data:null,error:l}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;const{data:l,error:c}=r;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:m,error:h}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return{data:null,error:l};const{data:c,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:u})})}catch(r){if(ze(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;return l?{data:null,error:l}:await Ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(ze(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const i=e?.factors||[],o=i.filter(c=>c.factor_type==="totp"&&c.status==="verified"),l=i.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:i,totp:o,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,i;const{data:{session:o},error:l}=e;if(l)return{data:null,error:l};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=af(o.access_token);let u=null;c.aal&&(u=c.aal);let m=u;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(m="aal2");const p=c.amr||[];return{data:{currentLevel:u,nextLevel:m,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,r={keys:[]}){let i=r.keys.find(u=>u.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(u=>u.kid===e),i&&this.jwks_cached_at+Xk>o)return i;const{data:l,error:c}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(u=>u.kid===e),!i)?null:i}async getClaims(e,r={}){try{let i=e;if(!i){const{data:b,error:j}=await this.getSession();if(j||!b.session)return{data:null,error:j};i=b.session.access_token}const{header:o,payload:l,signature:c,raw:{header:u,payload:m}}=af(i);r?.allowExpired||jT(l.exp);const h=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!h){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:l,header:o,signature:c},error:null}}const p=_T(o.alg),g=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,c,lT(`${u}.${m}`)))throw new Gf("Invalid JWT signature");return{data:{claims:l,header:o,signature:c},error:null}}catch(i){if(ze(i))return{data:null,error:i};throw i}}}uo.nextInstanceID=0;const BT=uo;class zT extends BT{constructor(e){super(e)}}var qT=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};class WT{constructor(e,r,i){var o,l,c;this.supabaseUrl=e,this.supabaseKey=r;const u=Gk(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const m=`sb-${u.hostname.split(".")[0]}-auth-token`,h={db:Lk,realtime:Fk,auth:Object.assign(Object.assign({},$k),{storageKey:m}),global:Ik},p=Hk(i??{},h);this.storageKey=(o=p.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=p.global.headers)!==null&&l!==void 0?l:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=p.auth)!==null&&c!==void 0?c:{},this.headers,p.global.fetch),this.fetch=zk(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new ZP(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Ok(this.storageUrl.href,this.headers,this.fetch,i?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new zP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},i={}){return this.rest.rpc(e,r,i)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return qT(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:l,storageKey:c,flowType:u,lock:m,debug:h},p,g){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zT({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),p),storageKey:c,autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:l,flowType:u,lock:m,debug:h,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new gk(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(e,r,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const HT=(t,e,r)=>new WT(t,e,r);function GT(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}GT()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const KT="https://qcwnlbpultscerwdnzbm.supabase.co",YT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFjd25sYnB1bHRzY2Vyd2RuemJtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzOTU0NzUsImV4cCI6MjA3Mzk3MTQ3NX0.-2FMT_IxLPwnJXY3rm2sL6GwTklKJCAo2J50BdUbQFo",q=HT(KT,YT,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"papuenvios-auth",flowType:"pkce",debug:!1},db:{schema:"public"},global:{headers:{"x-client-info":"papuenvios-web"}}}),Um=1e4,QT=3e4,Gb=async(t,e=Um,r="op")=>{let i;const o=new Promise((l,c)=>{i=setTimeout(()=>c(new Error(`${r} timed out after ${e}ms`)),e)});try{return await Promise.race([t,o])}finally{clearTimeout(i)}},Kf=new Map,JT=t=>{if(!t)return null;const e=Kf.get(t);return e?Date.now()-e.ts>QT?(Kf.delete(t),null):e.role:null},Kb=(t,e)=>{t&&Kf.set(t,{role:e,ts:Date.now()})},Yb=async(t,{timeoutMs:e=Um}={})=>{if(!t)return null;try{const r=await Gb(q.from("user_profiles").select("id, user_id, email, role, is_enabled, full_name, avatar_url, created_at, updated_at").eq("id",t).single(),e,"getUserProfile");if(r?.error)return console.warn("[supabase] getUserProfile error:",r.error),null;const i=r?.data??r;return i?.role&&Kb(t,i.role),i??null}catch(r){return console.warn("[supabase] getUserProfile failed:",r.message||r),null}},Yf=async(t,{timeoutMs:e=Um}={})=>{if(!t)return null;const r=JT(t);if(r)return r;const o=(await Yb(t,{timeoutMs:e}))?.role??null;return o&&Kb(t,o),o},XT=Object.freeze(Object.defineProperty({__proto__:null,getUserProfile:Yb,getUserRole:Yf,supabase:q,withTimeout:Gb},Symbol.toStringTag,{value:"Module"})),ZT=async(t,e="Query")=>{try{const{data:r,error:i}=await t();if(i)throw i;return{data:r,error:null}}catch(r){return console.error(`[${e}] Error:`,r),{data:null,error:r}}},Qb=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),gc=()=>new Date().toISOString(),eA=["jtheoden@gmail.com","jtheoden@googlemail.com"],tA={PAYMENT_PROOF:5*1024*1024},rA=["image/jpeg","image/png","image/jpg","image/webp"],Dx={PROFILE_FETCH:5e3,INIT_AUTH:1e4,DEFAULT_QUERY:1e4,CAROUSEL_SLIDE:5e3},In={PRODUCT_PROFIT_MARGIN:40,COMBO_PROFIT_MARGIN:35,MIN_STOCK_ALERT:10,DISPLAY_ORDER:0},ut={PENDING:"pending",PROCESSING:"processing",SHIPPED:"shipped",DELIVERED:"delivered",COMPLETED:"completed",CANCELLED:"cancelled"},Yt={PENDING:"pending",VALIDATED:"validated",REJECTED:"rejected"},Mx=async()=>{try{const{data:t,error:e}=await q.from("products").select(`
        *,
        category:product_categories(id, name_es, name_en, slug)
      `).eq("is_active",!0).order("created_at",{ascending:!1});if(e)throw e;const r=(t||[]).map(u=>u.id),{data:i}=await q.from("inventory").select("product_id, quantity, available_quantity, expiry_date").in("product_id",r).eq("is_active",!0).order("created_at",{ascending:!1}),o={},l={};return(i||[]).forEach(u=>{o[u.product_id]||(o[u.product_id]=0),o[u.product_id]+=u.available_quantity||0,!l[u.product_id]&&u.expiry_date&&(l[u.product_id]=u.expiry_date)}),{data:(t||[]).map(u=>({...u,stock:o[u.id]||0,expiry_date:l[u.id]||null})),error:null}}catch(t){return console.error("Error fetching products:",t),{data:null,error:t}}},sA=async t=>{try{console.log("📝 createProduct called with:",t);const{data:e,error:r}=await q.from("products").insert([{sku:t.sku||`SKU-${Date.now()}`,name_es:t.name,name_en:t.name,description_es:t.description_es||"",description_en:t.description_en||"",category_id:t.category_id,base_price:parseFloat(t.basePrice),base_currency_id:t.base_currency_id,profit_margin:parseFloat(t.profitMargin||In.PRODUCT_PROFIT_MARGIN),min_stock_alert:t.min_stock_alert?parseInt(t.min_stock_alert):In.MIN_STOCK_ALERT,image_url:t.image||null,image_file:t.image||null,is_active:!0}]).select().single();if(r)throw r;if(console.log("✅ Product created:",e),t.stock&&parseInt(t.stock)>0){console.log("📦 Creating inventory with stock:",t.stock);const i={product_id:e.id,quantity:parseInt(t.stock),batch_number:`BATCH-${Date.now()}`,is_active:!0};t.expiryDate&&(i.expiry_date=t.expiryDate);const{error:o}=await q.from("inventory").insert([i]);o?console.error("❌ Error creating inventory:",o):console.log("✅ Inventory created successfully")}else console.log("⚠️ No stock to create, stock value:",t.stock);return{data:e,error:null}}catch(e){return console.error("❌ Error creating product:",e),{data:null,error:e}}},nA=async(t,e)=>{try{console.log("📝 updateProduct called for:",t,"with data:",e);const r={name_es:e.name,name_en:e.name,description_es:e.description_es||"",description_en:e.description_en||"",category_id:e.category_id,base_price:parseFloat(e.basePrice),profit_margin:parseFloat(e.profitMargin||In.PRODUCT_PROFIT_MARGIN),min_stock_alert:e.min_stock_alert!==void 0?parseInt(e.min_stock_alert):In.MIN_STOCK_ALERT,updated_at:gc()};e.image&&(r.image_url=e.image,r.image_file=e.image),console.log("📤 Sending update to products table:",r);const{data:i,error:o}=await q.from("products").update(r).eq("id",t).select().single();if(o)throw o;if(console.log("✅ Product updated:",i),e.stock!==void 0||e.expiryDate!==void 0){const{data:l}=await q.from("inventory").select("id").eq("product_id",t).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1),c=l&&l.length>0?l[0]:null;if(c){const u={updated_at:gc()};e.stock!==void 0&&(u.quantity=parseInt(e.stock)),e.expiryDate!==void 0&&(u.expiry_date=e.expiryDate||null);const{error:m}=await q.from("inventory").update(u).eq("id",c.id);m&&console.error("Error updating inventory:",m)}else if(e.stock!==void 0&&parseInt(e.stock)>0){const u={product_id:t,quantity:parseInt(e.stock),batch_number:`BATCH-${Date.now()}`,is_active:!0};e.expiryDate&&(u.expiry_date=e.expiryDate);const{error:m}=await q.from("inventory").insert([u]);m&&console.error("Error creating inventory:",m)}}return{data:i,error:null}}catch(r){return console.error("Error updating product:",r),{data:null,error:r}}},iA=async()=>{try{const{data:t,error:e}=await q.from("product_categories").select("id, slug, name_es, name_en, description_es, description_en, display_order, is_active").eq("is_active",!0).order("display_order",{ascending:!0});if(e)throw e;return{data:t||[],error:null}}catch(t){return console.error("Error fetching categories:",t),{data:null,error:t}}},aA=async t=>{try{const{data:e,error:r}=await q.from("product_categories").insert([{name_es:t.es,name_en:t.en,description_es:t.description_es||"",description_en:t.description_en||"",slug:Qb(t.es),is_active:!0,display_order:In.DISPLAY_ORDER}]).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error creating category:",e),{data:null,error:e}}},oA=async(t,e)=>{try{const{data:r,error:i}=await q.from("product_categories").update({name_es:e.es,name_en:e.en,description_es:e.description_es||"",description_en:e.description_en||"",slug:Qb(e.es),updated_at:gc()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error updating category:",r),{data:null,error:r}}},lA=async t=>{try{const{error:e}=await q.from("product_categories").update({is_active:!1}).eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error deleting category:",e),{data:null,error:e}}},cA=async(t=!1)=>ZT(async()=>{let e=q.from("combo_products").select(`
          *,
          items:combo_items(
            quantity,
            product:products(id, name_es, name_en, base_price)
          )
        `);return t||(e=e.eq("is_active",!0)),await e.order("created_at",{ascending:!1})},"Get combos"),dA=async t=>{try{let e=0;if(t.productsWithQuantities&&t.productsWithQuantities.length>0){const o=t.productsWithQuantities.map(c=>c.productId),{data:l}=await q.from("products").select("id, base_price").in("id",o);l&&(e=t.productsWithQuantities.reduce((c,u)=>{const m=l.find(h=>h.id===u.productId);return m?c+parseFloat(m.base_price)*u.quantity:c},0))}const{data:r,error:i}=await q.from("combo_products").insert([{name_es:t.name,name_en:t.name,description_es:t.description||"",description_en:t.description||"",image_url:t.image||null,base_total_price:e,profit_margin:parseFloat(t.profitMargin||In.COMBO_PROFIT_MARGIN),is_active:!0}]).select().single();if(i)throw i;if(t.productsWithQuantities&&t.productsWithQuantities.length>0){const o=t.productsWithQuantities.map(c=>({combo_id:r.id,product_id:c.productId,quantity:c.quantity})),{error:l}=await q.from("combo_items").insert(o);if(l)throw l}return{data:r,error:null}}catch(e){return console.error("Error creating combo:",e),{data:null,error:e}}},uA=async(t,e)=>{try{let r;if(e.productsWithQuantities&&e.productsWithQuantities.length>0){const c=e.productsWithQuantities.map(m=>m.productId),{data:u}=await q.from("products").select("id, base_price").in("id",c);u&&(r=e.productsWithQuantities.reduce((m,h)=>{const p=u.find(g=>g.id===h.productId);return p?m+parseFloat(p.base_price)*h.quantity:m},0))}const i={name_es:e.name,name_en:e.name,description_es:e.description||"",description_en:e.description||"",profit_margin:parseFloat(e.profitMargin||In.COMBO_PROFIT_MARGIN),updated_at:gc()};e.image&&(i.image_url=e.image),r!==void 0&&(i.base_total_price=r);const{data:o,error:l}=await q.from("combo_products").update(i).eq("id",t).select().single();if(l)throw l;if(e.productsWithQuantities&&(await q.from("combo_items").delete().eq("combo_id",t),e.productsWithQuantities.length>0)){const c=e.productsWithQuantities.map(m=>({combo_id:t,product_id:m.productId,quantity:m.quantity})),{error:u}=await q.from("combo_items").insert(c);if(u)throw u}return{data:o,error:null}}catch(r){return console.error("Error updating combo:",r),{data:null,error:r}}},Jb=async(t=!1)=>{try{let e=q.from("testimonials").select("*").order("created_at",{ascending:!1});t||(e=e.eq("is_visible",!0));const{data:r,error:i}=await e;if(i)throw i;if(r&&r.length>0){const o=[...new Set(r.map(u=>u.user_id))],{data:l}=await q.from("user_profiles").select("user_id, full_name, avatar_url").in("user_id",o),c={};l&&l.forEach(u=>{c[u.user_id]=u}),r.forEach(u=>{const m=c[u.user_id];u.user_name=m?.full_name||"Usuario",u.user_avatar=m?.avatar_url||u.user_photo})}return{data:r,error:null}}catch(e){return console.error("Error fetching testimonials:",e),{data:null,error:e}}},fA=async t=>{try{const{data:e,error:r}=await q.from("testimonials").insert([{user_id:t.user_id,order_id:t.order_id||null,rating:t.rating,comment:t.comment,user_photo:t.user_photo||null,is_visible:!1,is_featured:!1}]).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error creating testimonial:",e),{data:null,error:e}}},mA=async(t,e)=>{try{const{data:r,error:i}=await q.from("testimonials").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error updating testimonial:",r),{data:null,error:r}}},hA=async(t,e)=>{try{const{data:r,error:i}=await q.from("testimonials").update({is_visible:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error toggling testimonial visibility:",r),{data:null,error:r}}},pA=async(t,e)=>{try{const{data:r,error:i}=await q.from("testimonials").update({is_featured:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error toggling testimonial featured status:",r),{data:null,error:r}}},gA=async t=>{try{const{data:e,error:r}=await q.from("testimonials").select("*").eq("user_id",t).maybeSingle();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching user testimonial:",e),{data:null,error:e}}},Xb=async(t=!1)=>{try{let e=q.from("carousel_slides").select("*").order("display_order",{ascending:!0});t&&(e=e.eq("is_active",!0));const{data:r,error:i}=await e;if(i)throw i;return{data:r,error:null}}catch(e){return console.error("Error fetching carousel slides:",e),{data:null,error:e}}},yA=async t=>{try{const{data:e}=await q.from("carousel_slides").select("display_order").order("display_order",{ascending:!1}).limit(1),r=e&&e.length>0?e[0].display_order+1:0,{data:i,error:o}=await q.from("carousel_slides").insert([{title_es:t.title_es||"",title_en:t.title_en||"",subtitle_es:t.subtitle_es||null,subtitle_en:t.subtitle_en||null,image_url:t.image_url||null,image_file:t.image_file||null,link_url:t.link_url||null,display_order:t.display_order??r,is_active:t.is_active??!0}]).select().single();if(o)throw o;return{data:i,error:null}}catch(e){return console.error("Error creating carousel slide:",e),{data:null,error:e}}},Ix=async(t,e)=>{try{const{data:r,error:i}=await q.from("carousel_slides").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error updating carousel slide:",r),{data:null,error:r}}},xA=async t=>{try{const{error:e}=await q.from("carousel_slides").delete().eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error hard deleting carousel slide:",e),{data:null,error:e}}},vA=async()=>{try{const{data:t,error:e}=await q.from("carousel_slides").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(e)throw e;return{data:t,error:null}}catch(t){return console.error("Error fetching active carousel slides:",t),{data:null,error:t}}},Zb=w.createContext(),Ua=(t,e)=>{const[r,i]=w.useState(()=>{try{const l=window.localStorage.getItem(t);return l?JSON.parse(l):e}catch(l){return console.log(l),e}});return[r,l=>{try{const c=l instanceof Function?l(r):l;i(c),window.localStorage.setItem(t,JSON.stringify(c))}catch(c){console.log(c)}}]},bA=({children:t})=>{const[e,r]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[u,m]=w.useState([]),[h,p]=w.useState([]),[g,x]=w.useState(!0),[b,j]=w.useState(null),[C,_]=Ua("cart",[]),[O,A]=Ua("zelleAccounts",[{id:1,email:"payment1@example.com",name:"Main Sales",forProducts:!0,forRemittances:!1,active:!0,payments:{weekly:12,monthly:50,yearly:600,total:1500}},{id:2,email:"remit@example.com",name:"Remittances Only",forProducts:!1,forRemittances:!0,active:!0,payments:{weekly:5,monthly:20,yearly:250,total:400}}]),[E,N]=Ua("financialSettings",{usdToLocal:36.5,currencies:[{code:"USD",name:"US Dollar",rate:1,symbol:"$"},{code:"EUR",name:"Euro",rate:.92,symbol:"€"}],productProfit:40,comboProfit:35,remittanceProfit:5,shippingType:"undetermined",shippingFixedAmount:0,shippingFreeThreshold:100}),[D,T]=Ua("notificationSettings",{whatsapp:"",whatsappGroup:"",adminEmail:""}),[L,I]=Ua("visualSettings",{logo:"",favicon:"",companyName:"PapuEnvíos",primaryColor:"#2563eb",secondaryColor:"#9333ea",useGradient:!0,headerBgColor:"#ffffff",headerTextColor:"#1f2937",headingColor:"#1f2937",useHeadingGradient:!0,buttonBgColor:"#2563eb",buttonTextColor:"#ffffff",buttonHoverBgColor:"#1d4ed8",destructiveBgColor:"#dc2626",destructiveTextColor:"#ffffff",destructiveHoverBgColor:"#b91c1c",accentColor:"#9333ea",pageBgColor:"#f9fafb",cardBgColor:"#ffffff"}),J=async()=>{try{j(null);const{data:k,error:$}=await Mx();if($)throw $;r(k||[])}catch(k){console.error("Error refreshing products:",k),j(k.message)}},Q=async()=>{try{j(null);const{data:k,error:$}=await iA();if($)throw $;c(k||[])}catch(k){console.error("Error refreshing categories:",k),j(k.message)}},we=async(k=!1)=>{try{const{data:$,error:ee}=await cA(k);if(ee)throw ee;const{data:ue}=await Mx(),xe={};(ue||[]).forEach(fe=>{xe[fe.id]=fe});const Ce=($||[]).map(fe=>{const Ee={},De=fe.items?.map(Y=>(Ee[Y.product.id]=Y.quantity,Y.product.id))||[];let X=!1;for(const Y of De){const Ie=xe[Y],_e=Ee[Y]||1,R=Ie?.stock||0;if(R===0||R<_e){X=!0;break}}return X&&fe.is_active&&q.from("combo_products").update({is_active:!1}).eq("id",fe.id).then(()=>console.log(`Combo ${fe.id} auto-deactivated due to insufficient stock`)),{id:fe.id,name:fe.name_es,description:fe.description_es,image:fe.image_url,products:De,productQuantities:Ee,items:fe.items||[],profitMargin:fe.profit_margin,baseTotalPrice:fe.base_total_price,is_active:X?!1:fe.is_active}});o(Ce)}catch($){console.error("Error refreshing combos:",$)}},ie=async(k=!1)=>{try{j(null);const{data:$,error:ee}=await Jb(k);if(ee)throw ee;m($||[])}catch($){console.error("Error refreshing testimonials:",$),j($)}},be=async(k=!1)=>{try{j(null);const{data:$,error:ee}=await Xb(k);if(ee)throw ee;p($||[])}catch($){console.error("Error refreshing carousel slides:",$),j($)}};w.useEffect(()=>{(async()=>{x(!0),await Promise.all([J(),Q(),we(),ie(!1),be(!1)]),x(!1)})()},[]);const G=k=>r($=>[...$,k]),de=k=>r($=>$.map(ee=>ee.id===k.id?k:ee)),U=k=>{_($=>$.find(ue=>ue.id===k.id)?$.map(ue=>ue.id===k.id?{...ue,quantity:ue.quantity+1}:ue):[...$,{...k,quantity:1}])},ne=k=>_($=>$.filter(ee=>ee.id!==k)),oe={products:e,addProduct:G,updateProduct:de,refreshProducts:J,combos:i,setCombos:o,refreshCombos:we,cart:C,addToCart:U,removeFromCart:ne,updateCartQuantity:(k,$)=>{if($<=0){ne(k);return}_(ee=>ee.map(ue=>ue.id===k?{...ue,quantity:$}:ue))},clearCart:()=>_([]),categories:l,setCategories:c,refreshCategories:Q,testimonials:u,setTestimonials:m,refreshTestimonials:ie,carouselSlides:h,setCarouselSlides:p,refreshCarouselSlides:be,zelleAccounts:O,setZelleAccounts:A,financialSettings:E,setFinancialSettings:N,notificationSettings:D,setNotificationSettings:T,visualSettings:L,setVisualSettings:I,loading:g,error:b,exchangeRate:E.currencies.find(k=>k.code==="USD")?.rate||1};return n.jsx(Zb.Provider,{value:oe,children:t})},ar=()=>{const t=w.useContext(Zb);if(t===void 0)throw new Error("useBusiness must be used within a BusinessProvider");return t},wA=()=>{const{visualSettings:t}=ar();return n.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center z-50",style:{background:t.useGradient?`linear-gradient(to bottom right, ${t.primaryColor}, ${t.secondaryColor})`:t.primaryColor},children:n.jsxs("div",{className:"text-center",children:[n.jsx(le.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"mb-8",children:n.jsxs("div",{className:"relative",children:[n.jsxs(le.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-24 h-24 mx-auto mb-4 relative",children:[n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white/20"}),n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white border-t-transparent animate-spin"})]}),n.jsxs(le.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"flex justify-center space-x-4 mb-6",children:[n.jsx(le.div,{animate:{y:[0,-10,0]},transition:{duration:1.5,repeat:1/0,delay:0},children:n.jsx(Er,{className:"w-8 h-8 text-white"})}),n.jsx(le.div,{animate:{y:[0,-10,0]},transition:{duration:1.5,repeat:1/0,delay:.2},children:n.jsx(qt,{className:"w-8 h-8 text-white"})}),n.jsx(le.div,{animate:{y:[0,-10,0]},transition:{duration:1.5,repeat:1/0,delay:.4},children:n.jsx(xb,{className:"w-8 h-8 text-white"})})]})]})}),n.jsx(le.h1,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},className:"text-4xl font-bold text-white mb-4",children:t.companyName||"PapuEnvíos"}),n.jsx(le.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},className:"text-xl text-white/80 mb-8",children:"Cargando tu plataforma de comercio digital..."}),n.jsx(le.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:2,delay:1},className:"w-64 h-2 rounded-full mx-auto overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.2)"},children:n.jsx(le.div,{initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"h-full w-1/3",style:{background:t.useGradient?`linear-gradient(to right, transparent, ${t.secondaryColor}, transparent)`:`linear-gradient(to right, transparent, ${t.primaryColor}, transparent)`}})})]})})};class jA extends st.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r)}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:n.jsxs("div",{className:"glass-effect p-8 rounded-2xl text-center max-w-lg",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-600 mb-4",children:this.state.error?.message||"An unexpected error occurred"}),n.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Reload Page"})]})}):this.props.children}}var cf={exports:{}},df={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx;function _A(){if(Lx)return df;Lx=1;var t=wc();function e(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var r=typeof Object.is=="function"?Object.is:e,i=t.useState,o=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function u(g,x){var b=x(),j=i({inst:{value:b,getSnapshot:x}}),C=j[0].inst,_=j[1];return l(function(){C.value=b,C.getSnapshot=x,m(C)&&_({inst:C})},[g,b,x]),o(function(){return m(C)&&_({inst:C}),g(function(){m(C)&&_({inst:C})})},[g]),c(b),b}function m(g){var x=g.getSnapshot;g=g.value;try{var b=x();return!r(g,b)}catch{return!0}}function h(g,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return df.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,df}var $x;function CA(){return $x||($x=1,cf.exports=_A()),cf.exports}var NA=CA();function SA(){return NA.useSyncExternalStore(EA,()=>!0,()=>!1)}function EA(){return()=>{}}var Vm="Avatar",[PA]=bo(Vm),[kA,ew]=PA(Vm),tw=w.forwardRef((t,e)=>{const{__scopeAvatar:r,...i}=t,[o,l]=w.useState("idle");return n.jsx(kA,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:l,children:n.jsx(Lt.span,{...i,ref:e})})});tw.displayName=Vm;var rw="AvatarImage",sw=w.forwardRef((t,e)=>{const{__scopeAvatar:r,src:i,onLoadingStatusChange:o=()=>{},...l}=t,c=ew(rw,r),u=TA(i,l),m=_s(h=>{o(h),c.onImageLoadingStatusChange(h)});return Pr(()=>{u!=="idle"&&m(u)},[u,m]),u==="loaded"?n.jsx(Lt.img,{...l,ref:e,src:i}):null});sw.displayName=rw;var nw="AvatarFallback",iw=w.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:i,...o}=t,l=ew(nw,r),[c,u]=w.useState(i===void 0);return w.useEffect(()=>{if(i!==void 0){const m=window.setTimeout(()=>u(!0),i);return()=>window.clearTimeout(m)}},[i]),c&&l.imageLoadingStatus!=="loaded"?n.jsx(Lt.span,{...o,ref:e}):null});iw.displayName=nw;function Fx(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function TA(t,{referrerPolicy:e,crossOrigin:r}){const i=SA(),o=w.useRef(null),l=i?(o.current||(o.current=new window.Image),o.current):null,[c,u]=w.useState(()=>Fx(l,t));return Pr(()=>{u(Fx(l,t))},[l,t]),Pr(()=>{const m=g=>()=>{u(g)};if(!l)return;const h=m("loaded"),p=m("error");return l.addEventListener("load",h),l.addEventListener("error",p),e&&(l.referrerPolicy=e),typeof r=="string"&&(l.crossOrigin=r),()=>{l.removeEventListener("load",h),l.removeEventListener("error",p)}},[l,r,e]),c}var AA=tw,RA=sw,OA=iw,DA=sv[" useId ".trim().toString()]||(()=>{}),MA=0;function IA(t){const[e,r]=w.useState(DA());return Pr(()=>{r(i=>i??String(MA++))},[t]),e?`radix-${e}`:""}const LA=["top","right","bottom","left"],nn=Math.min,fr=Math.max,yc=Math.round,Xl=Math.floor,ts=t=>({x:t,y:t}),$A={left:"right",right:"left",bottom:"top",top:"bottom"},FA={start:"end",end:"start"};function Qf(t,e,r){return fr(t,nn(e,r))}function Ns(t,e){return typeof t=="function"?t(e):t}function Ss(t){return t.split("-")[0]}function Ki(t){return t.split("-")[1]}function Bm(t){return t==="x"?"y":"x"}function zm(t){return t==="y"?"height":"width"}const UA=new Set(["top","bottom"]);function Zr(t){return UA.has(Ss(t))?"y":"x"}function qm(t){return Bm(Zr(t))}function VA(t,e,r){r===void 0&&(r=!1);const i=Ki(t),o=qm(t),l=zm(o);let c=o==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=xc(c)),[c,xc(c)]}function BA(t){const e=xc(t);return[Jf(t),e,Jf(e)]}function Jf(t){return t.replace(/start|end/g,e=>FA[e])}const Ux=["left","right"],Vx=["right","left"],zA=["top","bottom"],qA=["bottom","top"];function WA(t,e,r){switch(t){case"top":case"bottom":return r?e?Vx:Ux:e?Ux:Vx;case"left":case"right":return e?zA:qA;default:return[]}}function HA(t,e,r,i){const o=Ki(t);let l=WA(Ss(t),r==="start",i);return o&&(l=l.map(c=>c+"-"+o),e&&(l=l.concat(l.map(Jf)))),l}function xc(t){return t.replace(/left|right|bottom|top/g,e=>$A[e])}function GA(t){return{top:0,right:0,bottom:0,left:0,...t}}function aw(t){return typeof t!="number"?GA(t):{top:t,right:t,bottom:t,left:t}}function vc(t){const{x:e,y:r,width:i,height:o}=t;return{width:i,height:o,top:r,left:e,right:e+i,bottom:r+o,x:e,y:r}}function Bx(t,e,r){let{reference:i,floating:o}=t;const l=Zr(e),c=qm(e),u=zm(c),m=Ss(e),h=l==="y",p=i.x+i.width/2-o.width/2,g=i.y+i.height/2-o.height/2,x=i[u]/2-o[u]/2;let b;switch(m){case"top":b={x:p,y:i.y-o.height};break;case"bottom":b={x:p,y:i.y+i.height};break;case"right":b={x:i.x+i.width,y:g};break;case"left":b={x:i.x-o.width,y:g};break;default:b={x:i.x,y:i.y}}switch(Ki(e)){case"start":b[c]-=x*(r&&h?-1:1);break;case"end":b[c]+=x*(r&&h?-1:1);break}return b}const KA=async(t,e,r)=>{const{placement:i="bottom",strategy:o="absolute",middleware:l=[],platform:c}=r,u=l.filter(Boolean),m=await(c.isRTL==null?void 0:c.isRTL(e));let h=await c.getElementRects({reference:t,floating:e,strategy:o}),{x:p,y:g}=Bx(h,i,m),x=i,b={},j=0;for(let C=0;C<u.length;C++){const{name:_,fn:O}=u[C],{x:A,y:E,data:N,reset:D}=await O({x:p,y:g,initialPlacement:i,placement:x,strategy:o,middlewareData:b,rects:h,platform:c,elements:{reference:t,floating:e}});p=A??p,g=E??g,b={...b,[_]:{...b[_],...N}},D&&j<=50&&(j++,typeof D=="object"&&(D.placement&&(x=D.placement),D.rects&&(h=D.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:o}):D.rects),{x:p,y:g}=Bx(h,x,m)),C=-1)}return{x:p,y:g,placement:x,strategy:o,middlewareData:b}};async function fo(t,e){var r;e===void 0&&(e={});const{x:i,y:o,platform:l,rects:c,elements:u,strategy:m}=t,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:g="floating",altBoundary:x=!1,padding:b=0}=Ns(e,t),j=aw(b),_=u[x?g==="floating"?"reference":"floating":g],O=vc(await l.getClippingRect({element:(r=await(l.isElement==null?void 0:l.isElement(_)))==null||r?_:_.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(u.floating)),boundary:h,rootBoundary:p,strategy:m})),A=g==="floating"?{x:i,y:o,width:c.floating.width,height:c.floating.height}:c.reference,E=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u.floating)),N=await(l.isElement==null?void 0:l.isElement(E))?await(l.getScale==null?void 0:l.getScale(E))||{x:1,y:1}:{x:1,y:1},D=vc(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:A,offsetParent:E,strategy:m}):A);return{top:(O.top-D.top+j.top)/N.y,bottom:(D.bottom-O.bottom+j.bottom)/N.y,left:(O.left-D.left+j.left)/N.x,right:(D.right-O.right+j.right)/N.x}}const YA=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:i,placement:o,rects:l,platform:c,elements:u,middlewareData:m}=e,{element:h,padding:p=0}=Ns(t,e)||{};if(h==null)return{};const g=aw(p),x={x:r,y:i},b=qm(o),j=zm(b),C=await c.getDimensions(h),_=b==="y",O=_?"top":"left",A=_?"bottom":"right",E=_?"clientHeight":"clientWidth",N=l.reference[j]+l.reference[b]-x[b]-l.floating[j],D=x[b]-l.reference[b],T=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h));let L=T?T[E]:0;(!L||!await(c.isElement==null?void 0:c.isElement(T)))&&(L=u.floating[E]||l.floating[j]);const I=N/2-D/2,J=L/2-C[j]/2-1,Q=nn(g[O],J),we=nn(g[A],J),ie=Q,be=L-C[j]-we,G=L/2-C[j]/2+I,de=Qf(ie,G,be),U=!m.arrow&&Ki(o)!=null&&G!==de&&l.reference[j]/2-(G<ie?Q:we)-C[j]/2<0,ne=U?G<ie?G-ie:G-be:0;return{[b]:x[b]+ne,data:{[b]:de,centerOffset:G-de-ne,...U&&{alignmentOffset:ne}},reset:U}}}),QA=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,i;const{placement:o,middlewareData:l,rects:c,initialPlacement:u,platform:m,elements:h}=e,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:x,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:C=!0,..._}=Ns(t,e);if((r=l.arrow)!=null&&r.alignmentOffset)return{};const O=Ss(o),A=Zr(u),E=Ss(u)===u,N=await(m.isRTL==null?void 0:m.isRTL(h.floating)),D=x||(E||!C?[xc(u)]:BA(u)),T=j!=="none";!x&&T&&D.push(...HA(u,C,j,N));const L=[u,...D],I=await fo(e,_),J=[];let Q=((i=l.flip)==null?void 0:i.overflows)||[];if(p&&J.push(I[O]),g){const G=VA(o,c,N);J.push(I[G[0]],I[G[1]])}if(Q=[...Q,{placement:o,overflows:J}],!J.every(G=>G<=0)){var we,ie;const G=(((we=l.flip)==null?void 0:we.index)||0)+1,de=L[G];if(de&&(!(g==="alignment"?A!==Zr(de):!1)||Q.every(z=>Zr(z.placement)===A?z.overflows[0]>0:!0)))return{data:{index:G,overflows:Q},reset:{placement:de}};let U=(ie=Q.filter(ne=>ne.overflows[0]<=0).sort((ne,z)=>ne.overflows[1]-z.overflows[1])[0])==null?void 0:ie.placement;if(!U)switch(b){case"bestFit":{var be;const ne=(be=Q.filter(z=>{if(T){const ce=Zr(z.placement);return ce===A||ce==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(ce=>ce>0).reduce((ce,oe)=>ce+oe,0)]).sort((z,ce)=>z[1]-ce[1])[0])==null?void 0:be[0];ne&&(U=ne);break}case"initialPlacement":U=u;break}if(o!==U)return{reset:{placement:U}}}return{}}}};function zx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function qx(t){return LA.some(e=>t[e]>=0)}const JA=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:i="referenceHidden",...o}=Ns(t,e);switch(i){case"referenceHidden":{const l=await fo(e,{...o,elementContext:"reference"}),c=zx(l,r.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:qx(c)}}}case"escaped":{const l=await fo(e,{...o,altBoundary:!0}),c=zx(l,r.floating);return{data:{escapedOffsets:c,escaped:qx(c)}}}default:return{}}}}},ow=new Set(["left","top"]);async function XA(t,e){const{placement:r,platform:i,elements:o}=t,l=await(i.isRTL==null?void 0:i.isRTL(o.floating)),c=Ss(r),u=Ki(r),m=Zr(r)==="y",h=ow.has(c)?-1:1,p=l&&m?-1:1,g=Ns(e,t);let{mainAxis:x,crossAxis:b,alignmentAxis:j}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof j=="number"&&(b=u==="end"?j*-1:j),m?{x:b*p,y:x*h}:{x:x*h,y:b*p}}const ZA=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,i;const{x:o,y:l,placement:c,middlewareData:u}=e,m=await XA(e,t);return c===((r=u.offset)==null?void 0:r.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:o+m.x,y:l+m.y,data:{...m,placement:c}}}}},eR=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:i,placement:o}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:u={fn:_=>{let{x:O,y:A}=_;return{x:O,y:A}}},...m}=Ns(t,e),h={x:r,y:i},p=await fo(e,m),g=Zr(Ss(o)),x=Bm(g);let b=h[x],j=h[g];if(l){const _=x==="y"?"top":"left",O=x==="y"?"bottom":"right",A=b+p[_],E=b-p[O];b=Qf(A,b,E)}if(c){const _=g==="y"?"top":"left",O=g==="y"?"bottom":"right",A=j+p[_],E=j-p[O];j=Qf(A,j,E)}const C=u.fn({...e,[x]:b,[g]:j});return{...C,data:{x:C.x-r,y:C.y-i,enabled:{[x]:l,[g]:c}}}}}},tR=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:i,placement:o,rects:l,middlewareData:c}=e,{offset:u=0,mainAxis:m=!0,crossAxis:h=!0}=Ns(t,e),p={x:r,y:i},g=Zr(o),x=Bm(g);let b=p[x],j=p[g];const C=Ns(u,e),_=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(m){const E=x==="y"?"height":"width",N=l.reference[x]-l.floating[E]+_.mainAxis,D=l.reference[x]+l.reference[E]-_.mainAxis;b<N?b=N:b>D&&(b=D)}if(h){var O,A;const E=x==="y"?"width":"height",N=ow.has(Ss(o)),D=l.reference[g]-l.floating[E]+(N&&((O=c.offset)==null?void 0:O[g])||0)+(N?0:_.crossAxis),T=l.reference[g]+l.reference[E]+(N?0:((A=c.offset)==null?void 0:A[g])||0)-(N?_.crossAxis:0);j<D?j=D:j>T&&(j=T)}return{[x]:b,[g]:j}}}},rR=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,i;const{placement:o,rects:l,platform:c,elements:u}=e,{apply:m=()=>{},...h}=Ns(t,e),p=await fo(e,h),g=Ss(o),x=Ki(o),b=Zr(o)==="y",{width:j,height:C}=l.floating;let _,O;g==="top"||g==="bottom"?(_=g,O=x===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(O=g,_=x==="end"?"top":"bottom");const A=C-p.top-p.bottom,E=j-p.left-p.right,N=nn(C-p[_],A),D=nn(j-p[O],E),T=!e.middlewareData.shift;let L=N,I=D;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(I=E),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(L=A),T&&!x){const Q=fr(p.left,0),we=fr(p.right,0),ie=fr(p.top,0),be=fr(p.bottom,0);b?I=j-2*(Q!==0||we!==0?Q+we:fr(p.left,p.right)):L=C-2*(ie!==0||be!==0?ie+be:fr(p.top,p.bottom))}await m({...e,availableWidth:I,availableHeight:L});const J=await c.getDimensions(u.floating);return j!==J.width||C!==J.height?{reset:{rects:!0}}:{}}}};function Lc(){return typeof window<"u"}function Yi(t){return lw(t)?(t.nodeName||"").toLowerCase():"#document"}function mr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ss(t){var e;return(e=(lw(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lw(t){return Lc()?t instanceof Node||t instanceof mr(t).Node:!1}function zr(t){return Lc()?t instanceof Element||t instanceof mr(t).Element:!1}function rs(t){return Lc()?t instanceof HTMLElement||t instanceof mr(t).HTMLElement:!1}function Wx(t){return!Lc()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof mr(t).ShadowRoot}const sR=new Set(["inline","contents"]);function Co(t){const{overflow:e,overflowX:r,overflowY:i,display:o}=qr(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+r)&&!sR.has(o)}const nR=new Set(["table","td","th"]);function iR(t){return nR.has(Yi(t))}const aR=[":popover-open",":modal"];function $c(t){return aR.some(e=>{try{return t.matches(e)}catch{return!1}})}const oR=["transform","translate","scale","rotate","perspective"],lR=["transform","translate","scale","rotate","perspective","filter"],cR=["paint","layout","strict","content"];function Wm(t){const e=Hm(),r=zr(t)?qr(t):t;return oR.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||lR.some(i=>(r.willChange||"").includes(i))||cR.some(i=>(r.contain||"").includes(i))}function dR(t){let e=an(t);for(;rs(e)&&!qi(e);){if(Wm(e))return e;if($c(e))return null;e=an(e)}return null}function Hm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const uR=new Set(["html","body","#document"]);function qi(t){return uR.has(Yi(t))}function qr(t){return mr(t).getComputedStyle(t)}function Fc(t){return zr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function an(t){if(Yi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Wx(t)&&t.host||ss(t);return Wx(e)?e.host:e}function cw(t){const e=an(t);return qi(e)?t.ownerDocument?t.ownerDocument.body:t.body:rs(e)&&Co(e)?e:cw(e)}function mo(t,e,r){var i;e===void 0&&(e=[]),r===void 0&&(r=!0);const o=cw(t),l=o===((i=t.ownerDocument)==null?void 0:i.body),c=mr(o);if(l){const u=Xf(c);return e.concat(c,c.visualViewport||[],Co(o)?o:[],u&&r?mo(u):[])}return e.concat(o,mo(o,[],r))}function Xf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function dw(t){const e=qr(t);let r=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=rs(t),l=o?t.offsetWidth:r,c=o?t.offsetHeight:i,u=yc(r)!==l||yc(i)!==c;return u&&(r=l,i=c),{width:r,height:i,$:u}}function Gm(t){return zr(t)?t:t.contextElement}function Fi(t){const e=Gm(t);if(!rs(e))return ts(1);const r=e.getBoundingClientRect(),{width:i,height:o,$:l}=dw(e);let c=(l?yc(r.width):r.width)/i,u=(l?yc(r.height):r.height)/o;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const fR=ts(0);function uw(t){const e=mr(t);return!Hm()||!e.visualViewport?fR:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function mR(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==mr(t)?!1:e}function Ln(t,e,r,i){e===void 0&&(e=!1),r===void 0&&(r=!1);const o=t.getBoundingClientRect(),l=Gm(t);let c=ts(1);e&&(i?zr(i)&&(c=Fi(i)):c=Fi(t));const u=mR(l,r,i)?uw(l):ts(0);let m=(o.left+u.x)/c.x,h=(o.top+u.y)/c.y,p=o.width/c.x,g=o.height/c.y;if(l){const x=mr(l),b=i&&zr(i)?mr(i):i;let j=x,C=Xf(j);for(;C&&i&&b!==j;){const _=Fi(C),O=C.getBoundingClientRect(),A=qr(C),E=O.left+(C.clientLeft+parseFloat(A.paddingLeft))*_.x,N=O.top+(C.clientTop+parseFloat(A.paddingTop))*_.y;m*=_.x,h*=_.y,p*=_.x,g*=_.y,m+=E,h+=N,j=mr(C),C=Xf(j)}}return vc({width:p,height:g,x:m,y:h})}function Uc(t,e){const r=Fc(t).scrollLeft;return e?e.left+r:Ln(ss(t)).left+r}function fw(t,e){const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-Uc(t,r),o=r.top+e.scrollTop;return{x:i,y:o}}function hR(t){let{elements:e,rect:r,offsetParent:i,strategy:o}=t;const l=o==="fixed",c=ss(i),u=e?$c(e.floating):!1;if(i===c||u&&l)return r;let m={scrollLeft:0,scrollTop:0},h=ts(1);const p=ts(0),g=rs(i);if((g||!g&&!l)&&((Yi(i)!=="body"||Co(c))&&(m=Fc(i)),rs(i))){const b=Ln(i);h=Fi(i),p.x=b.x+i.clientLeft,p.y=b.y+i.clientTop}const x=c&&!g&&!l?fw(c,m):ts(0);return{width:r.width*h.x,height:r.height*h.y,x:r.x*h.x-m.scrollLeft*h.x+p.x+x.x,y:r.y*h.y-m.scrollTop*h.y+p.y+x.y}}function pR(t){return Array.from(t.getClientRects())}function gR(t){const e=ss(t),r=Fc(t),i=t.ownerDocument.body,o=fr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),l=fr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let c=-r.scrollLeft+Uc(t);const u=-r.scrollTop;return qr(i).direction==="rtl"&&(c+=fr(e.clientWidth,i.clientWidth)-o),{width:o,height:l,x:c,y:u}}const Hx=25;function yR(t,e){const r=mr(t),i=ss(t),o=r.visualViewport;let l=i.clientWidth,c=i.clientHeight,u=0,m=0;if(o){l=o.width,c=o.height;const p=Hm();(!p||p&&e==="fixed")&&(u=o.offsetLeft,m=o.offsetTop)}const h=Uc(i);if(h<=0){const p=i.ownerDocument,g=p.body,x=getComputedStyle(g),b=p.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,j=Math.abs(i.clientWidth-g.clientWidth-b);j<=Hx&&(l-=j)}else h<=Hx&&(l+=h);return{width:l,height:c,x:u,y:m}}const xR=new Set(["absolute","fixed"]);function vR(t,e){const r=Ln(t,!0,e==="fixed"),i=r.top+t.clientTop,o=r.left+t.clientLeft,l=rs(t)?Fi(t):ts(1),c=t.clientWidth*l.x,u=t.clientHeight*l.y,m=o*l.x,h=i*l.y;return{width:c,height:u,x:m,y:h}}function Gx(t,e,r){let i;if(e==="viewport")i=yR(t,r);else if(e==="document")i=gR(ss(t));else if(zr(e))i=vR(e,r);else{const o=uw(t);i={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return vc(i)}function mw(t,e){const r=an(t);return r===e||!zr(r)||qi(r)?!1:qr(r).position==="fixed"||mw(r,e)}function bR(t,e){const r=e.get(t);if(r)return r;let i=mo(t,[],!1).filter(u=>zr(u)&&Yi(u)!=="body"),o=null;const l=qr(t).position==="fixed";let c=l?an(t):t;for(;zr(c)&&!qi(c);){const u=qr(c),m=Wm(c);!m&&u.position==="fixed"&&(o=null),(l?!m&&!o:!m&&u.position==="static"&&!!o&&xR.has(o.position)||Co(c)&&!m&&mw(t,c))?i=i.filter(p=>p!==c):o=u,c=an(c)}return e.set(t,i),i}function wR(t){let{element:e,boundary:r,rootBoundary:i,strategy:o}=t;const c=[...r==="clippingAncestors"?$c(e)?[]:bR(e,this._c):[].concat(r),i],u=c[0],m=c.reduce((h,p)=>{const g=Gx(e,p,o);return h.top=fr(g.top,h.top),h.right=nn(g.right,h.right),h.bottom=nn(g.bottom,h.bottom),h.left=fr(g.left,h.left),h},Gx(e,u,o));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function jR(t){const{width:e,height:r}=dw(t);return{width:e,height:r}}function _R(t,e,r){const i=rs(e),o=ss(e),l=r==="fixed",c=Ln(t,!0,l,e);let u={scrollLeft:0,scrollTop:0};const m=ts(0);function h(){m.x=Uc(o)}if(i||!i&&!l)if((Yi(e)!=="body"||Co(o))&&(u=Fc(e)),i){const b=Ln(e,!0,l,e);m.x=b.x+e.clientLeft,m.y=b.y+e.clientTop}else o&&h();l&&!i&&o&&h();const p=o&&!i&&!l?fw(o,u):ts(0),g=c.left+u.scrollLeft-m.x-p.x,x=c.top+u.scrollTop-m.y-p.y;return{x:g,y:x,width:c.width,height:c.height}}function uf(t){return qr(t).position==="static"}function Kx(t,e){if(!rs(t)||qr(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return ss(t)===r&&(r=r.ownerDocument.body),r}function hw(t,e){const r=mr(t);if($c(t))return r;if(!rs(t)){let o=an(t);for(;o&&!qi(o);){if(zr(o)&&!uf(o))return o;o=an(o)}return r}let i=Kx(t,e);for(;i&&iR(i)&&uf(i);)i=Kx(i,e);return i&&qi(i)&&uf(i)&&!Wm(i)?r:i||dR(t)||r}const CR=async function(t){const e=this.getOffsetParent||hw,r=this.getDimensions,i=await r(t.floating);return{reference:_R(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function NR(t){return qr(t).direction==="rtl"}const SR={convertOffsetParentRelativeRectToViewportRelativeRect:hR,getDocumentElement:ss,getClippingRect:wR,getOffsetParent:hw,getElementRects:CR,getClientRects:pR,getDimensions:jR,getScale:Fi,isElement:zr,isRTL:NR};function pw(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function ER(t,e){let r=null,i;const o=ss(t);function l(){var u;clearTimeout(i),(u=r)==null||u.disconnect(),r=null}function c(u,m){u===void 0&&(u=!1),m===void 0&&(m=1),l();const h=t.getBoundingClientRect(),{left:p,top:g,width:x,height:b}=h;if(u||e(),!x||!b)return;const j=Xl(g),C=Xl(o.clientWidth-(p+x)),_=Xl(o.clientHeight-(g+b)),O=Xl(p),E={rootMargin:-j+"px "+-C+"px "+-_+"px "+-O+"px",threshold:fr(0,nn(1,m))||1};let N=!0;function D(T){const L=T[0].intersectionRatio;if(L!==m){if(!N)return c();L?c(!1,L):i=setTimeout(()=>{c(!1,1e-7)},1e3)}L===1&&!pw(h,t.getBoundingClientRect())&&c(),N=!1}try{r=new IntersectionObserver(D,{...E,root:o.ownerDocument})}catch{r=new IntersectionObserver(D,E)}r.observe(t)}return c(!0),l}function PR(t,e,r,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:m=!1}=i,h=Gm(t),p=o||l?[...h?mo(h):[],...mo(e)]:[];p.forEach(O=>{o&&O.addEventListener("scroll",r,{passive:!0}),l&&O.addEventListener("resize",r)});const g=h&&u?ER(h,r):null;let x=-1,b=null;c&&(b=new ResizeObserver(O=>{let[A]=O;A&&A.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var E;(E=b)==null||E.observe(e)})),r()}),h&&!m&&b.observe(h),b.observe(e));let j,C=m?Ln(t):null;m&&_();function _(){const O=Ln(t);C&&!pw(C,O)&&r(),C=O,j=requestAnimationFrame(_)}return r(),()=>{var O;p.forEach(A=>{o&&A.removeEventListener("scroll",r),l&&A.removeEventListener("resize",r)}),g?.(),(O=b)==null||O.disconnect(),b=null,m&&cancelAnimationFrame(j)}}const kR=ZA,TR=eR,AR=QA,RR=rR,OR=JA,Yx=YA,DR=tR,MR=(t,e,r)=>{const i=new Map,o={platform:SR,...r},l={...o.platform,_c:i};return KA(t,e,{...o,platform:l})};var IR=typeof document<"u",LR=function(){},sc=IR?w.useLayoutEffect:LR;function bc(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,i,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(i=r;i--!==0;)if(!bc(t[i],e[i]))return!1;return!0}if(o=Object.keys(t),r=o.length,r!==Object.keys(e).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(e,o[i]))return!1;for(i=r;i--!==0;){const l=o[i];if(!(l==="_owner"&&t.$$typeof)&&!bc(t[l],e[l]))return!1}return!0}return t!==t&&e!==e}function gw(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Qx(t,e){const r=gw(t);return Math.round(e*r)/r}function ff(t){const e=w.useRef(t);return sc(()=>{e.current=t}),e}function $R(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:i=[],platform:o,elements:{reference:l,floating:c}={},transform:u=!0,whileElementsMounted:m,open:h}=t,[p,g]=w.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[x,b]=w.useState(i);bc(x,i)||b(i);const[j,C]=w.useState(null),[_,O]=w.useState(null),A=w.useCallback(z=>{z!==T.current&&(T.current=z,C(z))},[]),E=w.useCallback(z=>{z!==L.current&&(L.current=z,O(z))},[]),N=l||j,D=c||_,T=w.useRef(null),L=w.useRef(null),I=w.useRef(p),J=m!=null,Q=ff(m),we=ff(o),ie=ff(h),be=w.useCallback(()=>{if(!T.current||!L.current)return;const z={placement:e,strategy:r,middleware:x};we.current&&(z.platform=we.current),MR(T.current,L.current,z).then(ce=>{const oe={...ce,isPositioned:ie.current!==!1};G.current&&!bc(I.current,oe)&&(I.current=oe,Tc.flushSync(()=>{g(oe)}))})},[x,e,r,we,ie]);sc(()=>{h===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,g(z=>({...z,isPositioned:!1})))},[h]);const G=w.useRef(!1);sc(()=>(G.current=!0,()=>{G.current=!1}),[]),sc(()=>{if(N&&(T.current=N),D&&(L.current=D),N&&D){if(Q.current)return Q.current(N,D,be);be()}},[N,D,be,Q,J]);const de=w.useMemo(()=>({reference:T,floating:L,setReference:A,setFloating:E}),[A,E]),U=w.useMemo(()=>({reference:N,floating:D}),[N,D]),ne=w.useMemo(()=>{const z={position:r,left:0,top:0};if(!U.floating)return z;const ce=Qx(U.floating,p.x),oe=Qx(U.floating,p.y);return u?{...z,transform:"translate("+ce+"px, "+oe+"px)",...gw(U.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ce,top:oe}},[r,u,U.floating,p.x,p.y]);return w.useMemo(()=>({...p,update:be,refs:de,elements:U,floatingStyles:ne}),[p,be,de,U,ne])}const FR=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:i,padding:o}=typeof t=="function"?t(r):t;return i&&e(i)?i.current!=null?Yx({element:i.current,padding:o}).fn(r):{}:i?Yx({element:i,padding:o}).fn(r):{}}}},UR=(t,e)=>({...kR(t),options:[t,e]}),VR=(t,e)=>({...TR(t),options:[t,e]}),BR=(t,e)=>({...DR(t),options:[t,e]}),zR=(t,e)=>({...AR(t),options:[t,e]}),qR=(t,e)=>({...RR(t),options:[t,e]}),WR=(t,e)=>({...OR(t),options:[t,e]}),HR=(t,e)=>({...FR(t),options:[t,e]});var GR="Arrow",yw=w.forwardRef((t,e)=>{const{children:r,width:i=10,height:o=5,...l}=t;return n.jsx(Lt.svg,{...l,ref:e,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});yw.displayName=GR;var KR=yw;function YR(t){const[e,r]=w.useState(void 0);return Pr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const l=o[0];let c,u;if("borderBoxSize"in l){const m=l.borderBoxSize,h=Array.isArray(m)?m[0]:m;c=h.inlineSize,u=h.blockSize}else c=t.offsetWidth,u=t.offsetHeight;r({width:c,height:u})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else r(void 0)},[t]),e}var Km="Popper",[xw,vw]=bo(Km),[QR,bw]=xw(Km),ww=t=>{const{__scopePopper:e,children:r}=t,[i,o]=w.useState(null);return n.jsx(QR,{scope:e,anchor:i,onAnchorChange:o,children:r})};ww.displayName=Km;var jw="PopperAnchor",_w=w.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:i,...o}=t,l=bw(jw,r),c=w.useRef(null),u=Br(e,c),m=w.useRef(null);return w.useEffect(()=>{const h=m.current;m.current=i?.current||c.current,h!==m.current&&l.onAnchorChange(m.current)}),i?null:n.jsx(Lt.div,{...o,ref:u})});_w.displayName=jw;var Ym="PopperContent",[JR,XR]=xw(Ym),Cw=w.forwardRef((t,e)=>{const{__scopePopper:r,side:i="bottom",sideOffset:o=0,align:l="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:m=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:x=!1,updatePositionStrategy:b="optimized",onPlaced:j,...C}=t,_=bw(Ym,r),[O,A]=w.useState(null),E=Br(e,fe=>A(fe)),[N,D]=w.useState(null),T=YR(N),L=T?.width??0,I=T?.height??0,J=i+(l!=="center"?"-"+l:""),Q=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},we=Array.isArray(h)?h:[h],ie=we.length>0,be={padding:Q,boundary:we.filter(e4),altBoundary:ie},{refs:G,floatingStyles:de,placement:U,isPositioned:ne,middlewareData:z}=$R({strategy:"fixed",placement:J,whileElementsMounted:(...fe)=>PR(...fe,{animationFrame:b==="always"}),elements:{reference:_.anchor},middleware:[UR({mainAxis:o+I,alignmentAxis:c}),m&&VR({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?BR():void 0,...be}),m&&zR({...be}),qR({...be,apply:({elements:fe,rects:Ee,availableWidth:De,availableHeight:X})=>{const{width:Y,height:Ie}=Ee.reference,_e=fe.floating.style;_e.setProperty("--radix-popper-available-width",`${De}px`),_e.setProperty("--radix-popper-available-height",`${X}px`),_e.setProperty("--radix-popper-anchor-width",`${Y}px`),_e.setProperty("--radix-popper-anchor-height",`${Ie}px`)}}),N&&HR({element:N,padding:u}),t4({arrowWidth:L,arrowHeight:I}),x&&WR({strategy:"referenceHidden",...be})]}),[ce,oe]=Ew(U),k=_s(j);Pr(()=>{ne&&k?.()},[ne,k]);const $=z.arrow?.x,ee=z.arrow?.y,ue=z.arrow?.centerOffset!==0,[xe,Ce]=w.useState();return Pr(()=>{O&&Ce(window.getComputedStyle(O).zIndex)},[O]),n.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:ne?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:n.jsx(JR,{scope:r,placedSide:ce,onArrowChange:D,arrowX:$,arrowY:ee,shouldHideArrow:ue,children:n.jsx(Lt.div,{"data-side":ce,"data-align":oe,...C,ref:E,style:{...C.style,animation:ne?void 0:"none"}})})})});Cw.displayName=Ym;var Nw="PopperArrow",ZR={top:"bottom",right:"left",bottom:"top",left:"right"},Sw=w.forwardRef(function(e,r){const{__scopePopper:i,...o}=e,l=XR(Nw,i),c=ZR[l.placedSide];return n.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:n.jsx(KR,{...o,ref:r,style:{...o.style,display:"block"}})})});Sw.displayName=Nw;function e4(t){return t!==null}var t4=t=>({name:"transformOrigin",options:t,fn(e){const{placement:r,rects:i,middlewareData:o}=e,c=o.arrow?.centerOffset!==0,u=c?0:t.arrowWidth,m=c?0:t.arrowHeight,[h,p]=Ew(r),g={start:"0%",center:"50%",end:"100%"}[p],x=(o.arrow?.x??0)+u/2,b=(o.arrow?.y??0)+m/2;let j="",C="";return h==="bottom"?(j=c?g:`${x}px`,C=`${-m}px`):h==="top"?(j=c?g:`${x}px`,C=`${i.floating.height+m}px`):h==="right"?(j=`${-m}px`,C=c?g:`${b}px`):h==="left"&&(j=`${i.floating.width+m}px`,C=c?g:`${b}px`),{data:{x:j,y:C}}}});function Ew(t){const[e,r="center"]=t.split("-");return[e,r]}var r4=ww,s4=_w,n4=Cw,i4=Sw,[Vc]=bo("Tooltip",[vw]),Bc=vw(),Pw="TooltipProvider",a4=700,Zf="tooltip.open",[o4,Qm]=Vc(Pw),kw=t=>{const{__scopeTooltip:e,delayDuration:r=a4,skipDelayDuration:i=300,disableHoverableContent:o=!1,children:l}=t,c=w.useRef(!0),u=w.useRef(!1),m=w.useRef(0);return w.useEffect(()=>{const h=m.current;return()=>window.clearTimeout(h)},[]),n.jsx(o4,{scope:e,isOpenDelayedRef:c,delayDuration:r,onOpen:w.useCallback(()=>{window.clearTimeout(m.current),c.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>c.current=!0,i)},[i]),isPointerInTransitRef:u,onPointerInTransitChange:w.useCallback(h=>{u.current=h},[]),disableHoverableContent:o,children:l})};kw.displayName=Pw;var ho="Tooltip",[l4,No]=Vc(ho),Tw=t=>{const{__scopeTooltip:e,children:r,open:i,defaultOpen:o,onOpenChange:l,disableHoverableContent:c,delayDuration:u}=t,m=Qm(ho,t.__scopeTooltip),h=Bc(e),[p,g]=w.useState(null),x=IA(),b=w.useRef(0),j=c??m.disableHoverableContent,C=u??m.delayDuration,_=w.useRef(!1),[O,A]=K0({prop:i,defaultProp:o??!1,onChange:L=>{L?(m.onOpen(),document.dispatchEvent(new CustomEvent(Zf))):m.onClose(),l?.(L)},caller:ho}),E=w.useMemo(()=>O?_.current?"delayed-open":"instant-open":"closed",[O]),N=w.useCallback(()=>{window.clearTimeout(b.current),b.current=0,_.current=!1,A(!0)},[A]),D=w.useCallback(()=>{window.clearTimeout(b.current),b.current=0,A(!1)},[A]),T=w.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{_.current=!0,A(!0),b.current=0},C)},[C,A]);return w.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),n.jsx(r4,{...h,children:n.jsx(l4,{scope:e,contentId:x,open:O,stateAttribute:E,trigger:p,onTriggerChange:g,onTriggerEnter:w.useCallback(()=>{m.isOpenDelayedRef.current?T():N()},[m.isOpenDelayedRef,T,N]),onTriggerLeave:w.useCallback(()=>{j?D():(window.clearTimeout(b.current),b.current=0)},[D,j]),onOpen:N,onClose:D,disableHoverableContent:j,children:r})})};Tw.displayName=ho;var em="TooltipTrigger",Aw=w.forwardRef((t,e)=>{const{__scopeTooltip:r,...i}=t,o=No(em,r),l=Qm(em,r),c=Bc(r),u=w.useRef(null),m=Br(e,u,o.onTriggerChange),h=w.useRef(!1),p=w.useRef(!1),g=w.useCallback(()=>h.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),n.jsx(s4,{asChild:!0,...c,children:n.jsx(Lt.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...i,ref:m,onPointerMove:Pt(t.onPointerMove,x=>{x.pointerType!=="touch"&&!p.current&&!l.isPointerInTransitRef.current&&(o.onTriggerEnter(),p.current=!0)}),onPointerLeave:Pt(t.onPointerLeave,()=>{o.onTriggerLeave(),p.current=!1}),onPointerDown:Pt(t.onPointerDown,()=>{o.open&&o.onClose(),h.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:Pt(t.onFocus,()=>{h.current||o.onOpen()}),onBlur:Pt(t.onBlur,o.onClose),onClick:Pt(t.onClick,o.onClose)})})});Aw.displayName=em;var Jm="TooltipPortal",[c4,d4]=Vc(Jm,{forceMount:void 0}),Rw=t=>{const{__scopeTooltip:e,forceMount:r,children:i,container:o}=t,l=No(Jm,e);return n.jsx(c4,{scope:e,forceMount:r,children:n.jsx(Ac,{present:r||l.open,children:n.jsx(Pm,{asChild:!0,container:o,children:i})})})};Rw.displayName=Jm;var Wi="TooltipContent",Ow=w.forwardRef((t,e)=>{const r=d4(Wi,t.__scopeTooltip),{forceMount:i=r.forceMount,side:o="top",...l}=t,c=No(Wi,t.__scopeTooltip);return n.jsx(Ac,{present:i||c.open,children:c.disableHoverableContent?n.jsx(Dw,{side:o,...l,ref:e}):n.jsx(u4,{side:o,...l,ref:e})})}),u4=w.forwardRef((t,e)=>{const r=No(Wi,t.__scopeTooltip),i=Qm(Wi,t.__scopeTooltip),o=w.useRef(null),l=Br(e,o),[c,u]=w.useState(null),{trigger:m,onClose:h}=r,p=o.current,{onPointerInTransitChange:g}=i,x=w.useCallback(()=>{u(null),g(!1)},[g]),b=w.useCallback((j,C)=>{const _=j.currentTarget,O={x:j.clientX,y:j.clientY},A=p4(O,_.getBoundingClientRect()),E=g4(O,A),N=y4(C.getBoundingClientRect()),D=v4([...E,...N]);u(D),g(!0)},[g]);return w.useEffect(()=>()=>x(),[x]),w.useEffect(()=>{if(m&&p){const j=_=>b(_,p),C=_=>b(_,m);return m.addEventListener("pointerleave",j),p.addEventListener("pointerleave",C),()=>{m.removeEventListener("pointerleave",j),p.removeEventListener("pointerleave",C)}}},[m,p,b,x]),w.useEffect(()=>{if(c){const j=C=>{const _=C.target,O={x:C.clientX,y:C.clientY},A=m?.contains(_)||p?.contains(_),E=!x4(O,c);A?x():E&&(x(),h())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[m,p,c,h,x]),n.jsx(Dw,{...t,ref:l})}),[f4,m4]=Vc(ho,{isInside:!1}),h4=b2("TooltipContent"),Dw=w.forwardRef((t,e)=>{const{__scopeTooltip:r,children:i,"aria-label":o,onEscapeKeyDown:l,onPointerDownOutside:c,...u}=t,m=No(Wi,r),h=Bc(r),{onClose:p}=m;return w.useEffect(()=>(document.addEventListener(Zf,p),()=>document.removeEventListener(Zf,p)),[p]),w.useEffect(()=>{if(m.trigger){const g=x=>{x.target?.contains(m.trigger)&&p()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[m.trigger,p]),n.jsx(Em,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:g=>g.preventDefault(),onDismiss:p,children:n.jsxs(n4,{"data-state":m.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(h4,{children:i}),n.jsx(f4,{scope:r,isInside:!0,children:n.jsx(q2,{id:m.contentId,role:"tooltip",children:o||i})})]})})});Ow.displayName=Wi;var Mw="TooltipArrow",Iw=w.forwardRef((t,e)=>{const{__scopeTooltip:r,...i}=t,o=Bc(r);return m4(Mw,r).isInside?null:n.jsx(i4,{...o,...i,ref:e})});Iw.displayName=Mw;function p4(t,e){const r=Math.abs(e.top-t.y),i=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),l=Math.abs(e.left-t.x);switch(Math.min(r,i,o,l)){case l:return"left";case o:return"right";case r:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function g4(t,e,r=5){const i=[];switch(e){case"top":i.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":i.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":i.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":i.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return i}function y4(t){const{top:e,right:r,bottom:i,left:o}=t;return[{x:o,y:e},{x:r,y:e},{x:r,y:i},{x:o,y:i}]}function x4(t,e){const{x:r,y:i}=t;let o=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const u=e[l],m=e[c],h=u.x,p=u.y,g=m.x,x=m.y;p>i!=x>i&&r<(g-h)*(i-p)/(x-p)+h&&(o=!o)}return o}function v4(t){const e=t.slice();return e.sort((r,i)=>r.x<i.x?-1:r.x>i.x?1:r.y<i.y?-1:r.y>i.y?1:0),b4(e)}function b4(t){if(t.length<=1)return t.slice();const e=[];for(let i=0;i<t.length;i++){const o=t[i];for(;e.length>=2;){const l=e[e.length-1],c=e[e.length-2];if((l.x-c.x)*(o.y-c.y)>=(l.y-c.y)*(o.x-c.x))e.pop();else break}e.push(o)}e.pop();const r=[];for(let i=t.length-1;i>=0;i--){const o=t[i];for(;r.length>=2;){const l=r[r.length-1],c=r[r.length-2];if((l.x-c.x)*(o.y-c.y)>=(l.y-c.y)*(o.x-c.x))r.pop();else break}r.push(o)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var w4=kw,j4=Tw,_4=Aw,C4=Rw,N4=Ow,S4=Iw;function E4({user:t,className:e}){if(!t)return null;const r="https://api.dicebear.com/7.x/avataaars/svg?seed="+encodeURIComponent(t.email),i=t.user_metadata?.name||t.email,o=t.user_metadata?.avatar_url||r;return n.jsx(w4,{children:n.jsxs(j4,{children:[n.jsx(_4,{asChild:!0,children:n.jsxs(AA,{className:`relative inline-flex h-8 w-8 ${e}`,children:[n.jsx(RA,{src:o,className:"h-full w-full rounded-full object-cover",alt:i}),n.jsx(OA,{className:"flex h-full w-full items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:i.charAt(0).toUpperCase()})]})}),n.jsx(C4,{children:n.jsxs(N4,{className:"rounded-md bg-white px-3 py-1.5 text-sm text-gray-900 shadow-md dark:bg-gray-800 dark:text-gray-100",sideOffset:5,children:[i,n.jsx(S4,{className:"fill-current text-white dark:text-gray-800"})]})})]})})}const P4=hb("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ve=st.forwardRef(({className:t,variant:e,size:r,asChild:i=!1,...o},l)=>{const c=i?x2:"button";return n.jsx(c,{className:Bn(P4({variant:e,size:r,className:t})),ref:l,...o})});ve.displayName="Button";const Lw=w.createContext(),k4={es:{nav:{home:"Inicio",products:"Productos",remittances:"Remesas",admin:"Administración",dashboard:"Panel de Control",settings:"Configuración",cart:"Carrito",userPanel:"Mi Panel",userManagement:"Gestión de Usuarios"},home:{hero:{cta:{products:"Ver Productos"}},features:{title:"Funcionalidades Principales",subtitle:"Todo lo que necesitas para hacer crecer tu negocio digital",products:{title:"Venta de Productos",description:"Plataforma completa para vendedores independientes con cálculo automático de precios"},remittances:{title:"Remesas a Cuba",description:"Envía dinero a Cuba desde USA y España de forma rápida y segura"},analytics:{title:"Panel de Ganancias",description:"Visualiza tus ganancias diarias y mensuales en tiempo real"},vendors:{title:"Gestión de Vendedores",description:"Herramientas completas para que vendedores independientes gestionen su inventario"}},testimonials:{title:"Lo que dicen nuestros clientes",subtitle:"Experiencias reales de usuarios satisfechos con nuestra plataforma."}},products:{title:"Catálogo de Productos",subtitle:"Descubre productos y combos para enviar a Cuba con precios competitivos",searchPlaceholder:"Buscar productos...",categories:{all:"Todas las Categorías"},exchangeRate:"Tasa de Cambio Actual",addToCart:"Agregar al Carrito",vendor:"Vendedor",noProducts:"No se encontraron productos",noProductsDesc:"Intenta con otros términos de búsqueda o categorías",addProduct:"Agregar Producto",addedToCart:"Producto agregado",addedToCartDesc:"se agregó al carrito exitosamente",detail:{previous:"Anterior",next:"Siguiente",backToProducts:"← Volver a Productos",backToCombos:"← Volver a Combos",continueToProducts:"Continuar a Productos →",continueToCombos:"Continuar a Combos →",price:"Precio",basePrice:"Precio Base",category:"Categoría",description:"Descripción",stock:"Stock Disponible",expiryDate:"Fecha de Vencimiento",currency:"Moneda",includedProducts:"Productos Incluidos",profitMargin:"Margen de Ganancia",comboDetails:"Detalles del Combo",productDetails:"Detalles del Producto",inStock:"En Stock",outOfStock:"Agotado",units:"unidades"}},remittances:{title:"Remesas a Cuba",subtitle:"Envía dinero a Cuba desde USA y España de forma rápida y segura",calculator:"Calculadora de Remesas",amount:"Cantidad a Enviar (USD)",country:"País de Destino",selectCountry:"Seleccionar país...",currentRate:"Tasa Actual",popular:"Popular",rate:"Tasa",fee:"Comisión",time:"Tiempo",youReceive:"Recibes",send:"Enviar Remesa",sendNew:"Nueva Remesa",myRemittances:"Mis Remesas",howItWorks:"¿Cómo Funciona?",step1:{title:"Selecciona el País",description:"Elige el país de destino y la cantidad a enviar"},step2:{title:"Confirma los Datos",description:"Verifica la información del destinatario"},step3:{title:"Recibe Confirmación",description:"El dinero llega en el tiempo estimado"},recipient:{title:"Datos del Destinatario",deliveryMethod:"Método de Entrega",cash:"Efectivo",transfer:"Transferencia",currency:"Moneda",fullName:"Nombre Completo",phone:"Teléfono",city:"Ciudad",address:"Dirección",idNumber:"Carnet de Identidad",notes:"Notas adicionales",bankName:"Nombre del Banco",accountNumber:"Número de Cuenta",confirm:"Confirmar y Enviar"},status:{paymentPending:"Pendiente de Pago",paymentProofUploaded:"Comprobante Enviado",paymentValidated:"Pago Validado",paymentRejected:"Pago Rechazado",processing:"En Proceso",delivered:"Entregado",completed:"Completado",cancelled:"Cancelado"},alert:{pending:"Pendiente de validación",delivered:"Entregada",overdue:"Entrega vencida",hoursLeft:"Quedan {hours} horas",daysLeft:"Quedan {days} días"},admin:{title:"Gestión de Remesas",types:"Tipos de Remesas",newType:"Nuevo Tipo",editType:"Editar Tipo",typeName:"Nombre del Tipo",originCurrency:"Moneda de Origen",deliveryCurrency:"Moneda de Entrega",exchangeRate:"Tasa de Cambio",commissionPercent:"Comisión (%)",commissionFixed:"Comisión Fija",minAmount:"Monto Mínimo",maxAmount:"Monto Máximo",maxDeliveryDays:"Días Máximos de Entrega",warningDays:"Días para Alerta",active:"Activo",description:"Descripción",pendingValidation:"Pendientes de Validación",inProgress:"En Progreso",urgent:"Urgentes",total:"Total",validate:"Validar",reject:"Rechazar",process:"Procesar",confirmDelivery:"Confirmar Entrega",complete:"Completar",viewDetails:"Ver Detalles",rejectReason:"Razón del rechazo",validationNotes:"Notas de validación",deliveryNotes:"Notas de entrega"},user:{trackYourRemittances:"Consulte el estado de sus envíos de dinero",noRemittances:"No tiene remesas registradas",noRemittancesDesc:"Envíe su primera remesa de forma rápida y segura",remittanceNumber:"Número de Remesa",amountSent:"Enviado",toDeliver:"A Entregar",method:"Método",uploadProof:"Subir Comprobante",reUploadProof:"Reenviar Comprobante",cancel:"Cancelar",cancelRemittance:"Cancelar Remesa",cancelReason:"Razón (opcional)",paymentProof:"Comprobante de pago",paymentReference:"Referencia de pago",uploadFile:"Subir archivo",additionalNotes:"Notas adicionales",viewProof:"Ver Comprobante"},wizard:{step1Title:"Tipo y Monto de Remesa",step2Title:"Datos del Destinatario",step3Title:"Confirmar Remesa",step4Title:"Comprobante de Pago",selectType:"Seleccione el tipo de remesa",amountToSend:"Monto a enviar",limits:"Límites",calculationSummary:"Resumen del Cálculo",youSend:"Monto a enviar",commission:"Comisión",recipientReceives:"Destinatario recibirá",confirmAndCreate:"Confirmar Remesa",remittanceCreated:"Remesa Creada",uploadLater:"Subir Después",sendProof:"Enviar Comprobante",importantNote:"Importante",proofNote:"Su remesa será procesada una vez validemos el comprobante de pago. Recibirá una notificación cuando esto ocurra."}},vendor:{title:"Gestión de la Plataforma",subtitle:"Gestiona productos, categorías, combos y más.",tabs:{inventory:"Inventario",categories:"Categorías",combos:"Combos",management:"Gestión"},actions:{addProduct:"Agregar Producto",createCombo:"Crear Combo"},addProduct:{title:"Agregar Nuevo Producto",editTitle:"Editar Producto",cancel:"Cancelar",name:"Nombre del Producto",namePlaceholder:"Ej: iPhone 15 Pro Max",description:"Descripción",descriptionPlaceholder:"Describe las características principales...",category:"Categoría",basePrice:"Precio Base",currency:"Moneda",image:"Imagen del Producto",upload:"Subir archivo",finalPrice:"Precio Final",save:"Guardar Producto"},inventory:{product:"Producto",stock:"Existencias",price:"Precio Final",expiryDate:"Fecha de Caducidad"},categories:{manage:"Gestionar Categorías",new:"Nueva categoría",name_es:"Nombre (ES)",name_en:"Nombre (EN)",id:"ID"},combos:{title:"Gestión de Combos",new:"Crear Nuevo Combo",edit:"Editar Combo",name:"Nombre del Combo",profitMargin:"Margen de Ganancia (%)",shipping:"Envío",free:"Gratis",discount:"Descuento (%)",paid:"Pagado",shippingCost:"Costo de Envío",products:"Productos en el Combo",addProduct:"Agregar Producto",basePrice:"Precio Base Total",finalPrice:"Precio Final",coverImage:"Imagen de Portada",save:"Guardar Combo"},management:{title:"Gestión General",payments:"Gestión de Pagos",testimonials:"Gestión de Testimonios",users:"Gestión de Usuarios",show:"Mostrar",hide:"Ocultar",activate:"Activar",deactivate:"Desactivar",delete:"Eliminar"},validation:{error:"Error de Validación",fillFields:"Por favor completa todos los campos requeridos"},productAdded:"Producto agregado exitosamente",productUpdated:"Producto actualizado exitosamente",categoryAdded:"Categoría agregada",categoryRemoved:"Categoría eliminada",comboAdded:"Combo creado exitosamente",comboUpdated:"Combo actualizado exitosamente"},dashboard:{title:"Panel de Control",subtitle:"Visualización completa de ganancias y métricas del negocio",privateAccess:"Acceso Privado",adminOnly:"Esta sección es solo para administradores.",refresh:"Actualizar",stats:{dailyRevenue:"Ingresos Diarios",monthlyRevenue:"Ingresos Mensuales",dailyProfit:"Ganancia Diaria",monthlyProfit:"Ganancia Mensual",totalProducts:"Total de Productos",totalCombos:"Total de Combos",pendingOrders:"Pedidos Pendientes",completedOrders:"Pedidos Completados",totalUsers:"Total de Usuarios",activeProducts:"Productos Activos",siteVisits:"Visitas al Sitio"},profitBreakdown:"Desglose de Ganancias",dailyBreakdown:"Desglose Diario",monthlyBreakdown:"Desglose Mensual",grossRevenue:"Ingresos Brutos",costs:"Costos",netProfit:"Ganancia Neta",profitMargin:"Margen de Ganancia",orderSummary:"Resumen de Pedidos",pending:"Pendientes",completed:"Completados",overviewTab:"Resumen General",ordersTab:"Historial de Órdenes",orderStatus:{paymentPending:"Pago Pendiente",paymentValidated:"Pago Validado",processing:"En Procesamiento",shipped:"Enviado",delivered:"Entregado",cancelled:"Cancelado",totalActive:"Total Activas"},analyticsTitle:"Análisis y Estadísticas",selectCurrency:"Seleccionar Moneda",expirationWarning:{title:"Alerta de Caducidad",description:"Hay {count} producto(s) próximos a caducar en los siguientes 30 días."},visits:{title:"Visitas al Sitio",weekly:"Semanal",monthly:"Mensual",yearly:"Anual",total:"Total",thisWeek:"Esta Semana",thisMonth:"Este Mes",thisYear:"Este Año",allTime:"Histórico"}},settings:{title:"Ajustes Generales",subtitle:"Gestiona la configuración clave de tu plataforma.",financial:{title:"Ajustes Financieros",usdToLocal:"USD a Moneda Nacional",productProfit:"Ganancia Productos (%)",comboProfit:"Ganancia Combos (%)",remittanceProfit:"Ganancia Remesas (%)",save:"Guardar Ajustes",currencies:"Gestión de Monedas",addCurrency:"Agregar Moneda",code:"Código (ej: USD, EUR, CUP)",nameES:"Nombre (Español)",nameEN:"Nombre (Inglés)",rate:"Tasa vs USD",symbol:"Símbolo",active:"Activa",updateCurrency:"Actualizar Moneda",currencyCreated:"Moneda creada",currencyUpdated:"Moneda actualizada",currencyDeleted:"Moneda eliminada"},zelle:{title:"Cuentas Zelle",add:"Agregar Cuenta Zelle",email:"Email",name:"Nombre",assignTo:"Asignar a",products:"Venta de Productos",remittances:"Remesas",active:"Activa"},visual:{title:"Ajustes Visuales",logo:"Logo del Sitio",favicon:"Favicon",slides:"Diapositivas de Portada",addSlide:"Agregar Diapositiva",image:"Imagen (URL o Archivo)",imageType:"Tipo de Imagen",url:"URL",upload:"Subir",mainText:"Texto Principal",secondaryText:"Texto Secundario",text_es:"Texto (ES)",text_en:"Texto (EN)",linkUrl:"Enlace (URL)",order:"Orden",active:"Activa",save:"Guardar Ajustes"},notifications:{title:"Ajustes de Notificación",whatsapp:"Número de WhatsApp para Notificaciones",adminEmail:"Email de Administración para Notificaciones",save:"Guardar Ajustes"},saveSuccess:"Ajustes guardados exitosamente"},cart:{title:"Tu Carrito de Compras",empty:"Tu carrito está vacío.",browse:"Explorar productos",summary:"Resumen del Pedido",subtotal:"Subtotal",shipping:"Envío",free:"Gratis",total:"Total",checkout:"Proceder al Pago",payment:{title:"Realizar Pago",instructionsTitle:"Instrucciones de Pago",instructions:"Copia el ID de la compra y pégalo en la descripción de la transferencia Zelle. Envía el comprobante a info@papuenvios.com o súbelo directamente aquí. El pago estará sujeto a validación.",accountInfo:"Datos de la Cuenta Zelle",purchaseId:"ID de la Compra",copy:"Copiado",amount:"Monto a Pagar",uploadProof:"Subir Comprobante de Pago",confirm:"Confirmar Pago",recipientTitle:"Datos de Entrega/Destinatario"}},auth:{login:"Iniciar Sesión",loginTitle:"Bienvenido de Nuevo",loginSubtitle:"Inicia sesión para acceder a tu cuenta.",email:"Correo Electrónico",password:"Contraseña",loginWithGoogle:"Iniciar Sesión con Google",or:"O",loginSuccess:"¡Inicio de sesión exitoso!",loginError:"Credenciales inválidas. Por favor, intenta de nuevo.",logoutSuccess:"Sesión cerrada exitosamente.",loginRequired:"Inicio de Sesión Requerido",loginToCheckout:"Por favor, inicia sesión para continuar con el pago."},userPanel:{title:"Mi Panel de Usuario",welcome:"Bienvenido, {name}",myOrders:"Mis Pedidos",noOrders:"Aún no tienes pedidos.",status:{pending:"Pendiente",validated:"Validado",rejected:"Rechazado"}},adminOrders:{title:"Historial de Órdenes",subtitle:"Gestión completa de todas las órdenes del sistema",stats:{total:"Total",pending:"Pendientes",validated:"Validadas",rejected:"Rechazadas",completed:"Completadas",revenue:"Ingresos"},filters:{title:"Filtros de Búsqueda",clear:"Limpiar Filtros",search:"Buscar",searchPlaceholder:"Orden, usuario, email o producto...",status:"Estado de la Orden",allStatuses:"Todos los Estados",orderType:"Tipo de Orden",allTypes:"Todos",startDate:"Fecha Inicio",endDate:"Fecha Fin",apply:"Aplicar Filtros"},table:{order:"Orden",user:"Usuario",date:"Fecha",type:"Tipo",items:"Items",total:"Total",paymentStatus:{label:"Estado Pago",pending:"Pago Pendiente",validated:"Pago Validado (Listo para Procesar)",rejected:"Pago Rechazado"},orderStatus:{label:"Estado Orden",pending:"Pendiente",processing:"En Procesamiento",shipped:"Enviado",delivered:"Entregado",completed:"Completado",cancelled:"Cancelado"},actions:"Acciones"},types:{products:"Productos",remittance:"Remesa",mixed:"Mixto"},actions:{view:"Ver",start:"Iniciar",ship:"Enviar",proof:"Evidencia",complete:"Completar",cancel:"Cancelar",processing:"Procesando...",loading:"Cargando...",completing:"Completando..."},messages:{noOrders:"No se encontraron órdenes",retry:"Reintentar",confirmStart:"¿Iniciar procesamiento de la orden {orderNumber}?",confirmComplete:"¿Marcar la orden {orderNumber} como completada?",confirmCancel:"¿Está seguro de cancelar esta orden? Esta acción liberará el inventario reservado.",enterTracking:"Ingrese número de tracking (opcional) para la orden {orderNumber}:",enterCancelReason:"Ingrese razón de cancelación para la orden {orderNumber}:",cancelReasonRequired:"Debe especificar una razón para cancelar",startSuccess:'Orden movida a estado "En Procesamiento"',shipSuccess:'Orden marcada como "Enviada"',deliverSuccess:'Evidencia de entrega subida exitosamente. Orden marcada como "Entregada"',completeSuccess:"Orden completada exitosamente",cancelSuccess:"Orden cancelada exitosamente",error:"Error",selectImage:"Seleccione una imagen de evidencia",invalidImage:"Por favor seleccione una imagen válida",imageTooLarge:"El archivo es muy grande. Máximo 5MB"},deliveryModal:{title:"Subir Evidencia de Entrega",orderLabel:"Orden:",customerLabel:"Cliente:",selectPhoto:"Seleccionar Foto de Evidencia",clickToUpload:"Click para subir",dragHere:"o arrastra aquí",fileTypes:"PNG, JPG, JPEG (MAX. 5MB)",imageLoaded:'Imagen cargada. Haga click en "Subir Evidencia" para confirmar.',note:"Nota:",noteText:'Al subir la evidencia, la orden se marcará automáticamente como "Entregada". El cliente podrá ver la foto de evidencia.',cancel:"Cancelar",submit:"Subir Evidencia",uploading:"Subiendo..."},days:{singular:"día",plural:"días"},modals:{confirm:"Confirmar",cancel:"Cancelar",submit:"Enviar",startTitle:"Iniciar Procesamiento",completeTitle:"Completar Orden",cancelTitle:"Cancelar Orden",trackingTitle:"Número de Tracking",cancelReasonTitle:"Razón de Cancelación"}},users:{management:"Gestión de Usuarios",managementDescription:"Administra roles y permisos de usuarios de la plataforma",fetchError:"Error al cargar usuarios",roleUpdated:"Rol actualizado",roleUpdatedSuccess:"El rol del usuario se actualizó correctamente",roleUpdateError:"Error al actualizar rol",userEnabled:"Usuario habilitado",userDisabled:"Usuario deshabilitado",statusUpdateSuccess:"El estado del usuario se actualizó correctamente",statusUpdateError:"Error al actualizar estado",cannotModifySuperAdmin:"No se puede modificar al super administrador",superAdmin:"Super Admin",noUsers:"No hay usuarios",enable:"Habilitar",disable:"Deshabilitar",delete:"Eliminar",deleteUser:"Eliminar usuario",enableUser:"Activar usuario",disableUser:"Desactivar usuario",userDeleted:"Usuario eliminado",userDeletedSuccess:"El usuario ha sido eliminado exitosamente.",deleteError:"Error al eliminar",confirmDelete:"¿Estás seguro de que deseas eliminar a {email}? Esta acción no se puede deshacer.",protected:"Protegido",refresh:"Actualizar",loadingUsers:"Cargando usuarios...",noUsersFound:"No se encontraron usuarios",total:"Total",rolesPermissions:{title:"Roles y Permisos",userDesc:"Acceso básico al sistema",adminDesc:"Gestión de productos, combos e inventario",superAdminDesc:"Acceso total + gestión de usuarios"},securityNote:{title:"Nota de seguridad",superAdminProtected:"Los Super Admins están protegidos y no pueden ser editados ni eliminados",onlySuperAdminManage:"Solo Super Admins pueden gestionar roles y eliminar usuarios",deletionPermanent:"La eliminación de usuarios es permanente y no se puede deshacer"},roles:{user:"Usuario",admin:"Administrador",super_admin:"Super Administrador"},table:{email:"Correo Electrónico",name:"Nombre",role:"Rol",status:"Estado",actions:"Acciones",active:"Activo",inactive:"Inactivo",createdAt:"Fecha de Registro"}}},en:{nav:{home:"Home",products:"Products",remittances:"Remittances",admin:"Administration",dashboard:"Control Panel",settings:"Settings",cart:"Cart",userPanel:"My Panel",userManagement:"User Management"},home:{hero:{cta:{products:"View Products"}},features:{title:"Key Features",subtitle:"Everything you need to grow your digital business",products:{title:"Product Sales",description:"Complete platform for independent vendors with automatic price calculation"},remittances:{title:"Remittances to Cuba",description:"Send money to Cuba from USA and Spain quickly and securely"},analytics:{title:"Profit Dashboard",description:"View your daily and monthly profits in real-time"},vendors:{title:"Vendor Management",description:"Complete tools for independent vendors to manage their inventory"}},testimonials:{title:"What our customers say",subtitle:"Real experiences from users satisfied with our platform."}},products:{title:"Product Catalog",subtitle:"Discover exclusive products and combos to send to Cuba with competitive prices",searchPlaceholder:"Search products...",categories:{all:"All Categories"},exchangeRate:"Current Exchange Rate",addToCart:"Add to Cart",vendor:"Vendor",noProducts:"No products found",noProductsDesc:"Try different search terms or categories",addProduct:"Add Product",addedToCart:"Product added",addedToCartDesc:"was successfully added to cart",detail:{previous:"Previous",next:"Next",backToProducts:"← Back to Products",backToCombos:"← Back to Combos",continueToProducts:"Continue to Products →",continueToCombos:"Continue to Combos →",price:"Price",basePrice:"Base Price",category:"Category",description:"Description",stock:"Available Stock",expiryDate:"Expiry Date",currency:"Currency",includedProducts:"Included Products",profitMargin:"Profit Margin",comboDetails:"Combo Details",productDetails:"Product Details",inStock:"In Stock",outOfStock:"Out of Stock",units:"units"}},remittances:{title:"Remittances to Cuba",subtitle:"Send money to Cuba from USA and Spain quickly and securely",calculator:"Remittance Calculator",amount:"Amount to Send (USD)",country:"Destination Country",selectCountry:"Select country...",currentRate:"Current Rate",popular:"Popular",rate:"Rate",fee:"Fee",time:"Time",youReceive:"You Receive",send:"Send Remittance",sendNew:"New Remittance",myRemittances:"My Remittances",howItWorks:"How It Works?",step1:{title:"Select Country",description:"Choose destination country and amount to send"},step2:{title:"Confirm Details",description:"Verify recipient information"},step3:{title:"Receive Confirmation",description:"Money arrives within estimated time"},recipient:{title:"Recipient Details",deliveryMethod:"Delivery Method",cash:"Cash",transfer:"Transfer",currency:"Currency",fullName:"Full Name",phone:"Phone",city:"City",address:"Address",idNumber:"ID Number",notes:"Additional notes",bankName:"Bank Name",accountNumber:"Account Number",confirm:"Confirm & Send"},status:{paymentPending:"Payment Pending",paymentProofUploaded:"Proof Sent",paymentValidated:"Payment Validated",paymentRejected:"Payment Rejected",processing:"Processing",delivered:"Delivered",completed:"Completed",cancelled:"Cancelled"},alert:{pending:"Pending validation",delivered:"Delivered",overdue:"Delivery overdue",hoursLeft:"{hours} hours left",daysLeft:"{days} days left"},admin:{title:"Remittance Management",types:"Remittance Types",newType:"New Type",editType:"Edit Type",typeName:"Type Name",originCurrency:"Origin Currency",deliveryCurrency:"Delivery Currency",exchangeRate:"Exchange Rate",commissionPercent:"Commission (%)",commissionFixed:"Fixed Commission",minAmount:"Minimum Amount",maxAmount:"Maximum Amount",maxDeliveryDays:"Max Delivery Days",warningDays:"Warning Days",active:"Active",description:"Description",pendingValidation:"Pending Validation",inProgress:"In Progress",urgent:"Urgent",total:"Total",validate:"Validate",reject:"Reject",process:"Process",confirmDelivery:"Confirm Delivery",complete:"Complete",viewDetails:"View Details",rejectReason:"Rejection reason",validationNotes:"Validation notes",deliveryNotes:"Delivery notes"},user:{trackYourRemittances:"Track your money transfers status",noRemittances:"No remittances registered",noRemittancesDesc:"Send your first remittance quickly and securely",remittanceNumber:"Remittance Number",amountSent:"Sent",toDeliver:"To Deliver",method:"Method",uploadProof:"Upload Proof",reUploadProof:"Re-upload Proof",cancel:"Cancel",cancelRemittance:"Cancel Remittance",cancelReason:"Reason (optional)",paymentProof:"Payment proof",paymentReference:"Payment reference",uploadFile:"Upload file",additionalNotes:"Additional notes",viewProof:"View Proof"},wizard:{step1Title:"Type and Amount",step2Title:"Recipient Details",step3Title:"Confirm Remittance",step4Title:"Payment Proof",selectType:"Select remittance type",amountToSend:"Amount to send",limits:"Limits",calculationSummary:"Calculation Summary",youSend:"Amount to send",commission:"Commission",recipientReceives:"Recipient will receive",confirmAndCreate:"Confirm Remittance",remittanceCreated:"Remittance Created",uploadLater:"Upload Later",sendProof:"Send Proof",importantNote:"Important",proofNote:"Your remittance will be processed once we validate the payment proof. You will receive a notification when this happens."}},vendor:{title:"Platform Management",subtitle:"Manage products, categories, combos, and more.",tabs:{inventory:"Inventory",categories:"Categories",combos:"Combos",management:"Management"},actions:{addProduct:"Add Product",createCombo:"Create Combo"},addProduct:{title:"Add New Product",editTitle:"Edit Product",cancel:"Cancel",name:"Product Name",namePlaceholder:"Ex: iPhone 15 Pro Max",description:"Description",descriptionPlaceholder:"Describe main features...",category:"Category",basePrice:"Base Price",currency:"Currency",image:"Product Image",upload:"Upload file",finalPrice:"Final Price",save:"Save Product"},inventory:{product:"Product",stock:"Stock",price:"Final Price",expiryDate:"Expiry Date"},categories:{manage:"Manage Categories",new:"New category",name_es:"Name (ES)",name_en:"Name (EN)",id:"ID"},combos:{title:"Combo Management",new:"Create New Combo",edit:"Edit Combo",name:"Combo Name",profitMargin:"Profit Margin (%)",shipping:"Shipping",free:"Free",discount:"Discount (%)",paid:"Paid",shippingCost:"Shipping Cost",products:"Products in Combo",addProduct:"Add Product",basePrice:"Total Base Price",finalPrice:"Final Price",coverImage:"Cover Image",save:"Save Combo"},management:{title:"General Management",payments:"Payment Management",testimonials:"Testimonial Management",users:"User Management",show:"Show",hide:"Hide",activate:"Activate",deactivate:"Deactivate",delete:"Delete"},validation:{error:"Validation Error",fillFields:"Please fill all required fields"},productAdded:"Product added successfully",productUpdated:"Product updated successfully",categoryAdded:"Category added",categoryRemoved:"Category removed",comboAdded:"Combo created successfully",comboUpdated:"Combo updated successfully"},dashboard:{title:"Control Panel",subtitle:"Complete visualization of profits and business metrics",privateAccess:"Private Access",adminOnly:"This section is for administrators only.",refresh:"Refresh",stats:{dailyRevenue:"Daily Revenue",monthlyRevenue:"Monthly Revenue",dailyProfit:"Daily Profit",monthlyProfit:"Monthly Profit",totalProducts:"Total Products",totalCombos:"Total Combos",pendingOrders:"Pending Orders",completedOrders:"Completed Orders",totalUsers:"Total Users",activeProducts:"Active Products",siteVisits:"Site Visits"},profitBreakdown:"Profit Breakdown",dailyBreakdown:"Daily Breakdown",monthlyBreakdown:"Monthly Breakdown",grossRevenue:"Gross Revenue",costs:"Costs",netProfit:"Net Profit",profitMargin:"Profit Margin",orderSummary:"Order Summary",pending:"Pending",completed:"Completed",overviewTab:"Overview",ordersTab:"Order History",orderStatus:{paymentPending:"Payment Pending",paymentValidated:"Payment Validated",processing:"Processing",shipped:"Shipped",delivered:"Delivered",cancelled:"Cancelled",totalActive:"Total Active"},analyticsTitle:"Analytics & Statistics",selectCurrency:"Select Currency",expirationWarning:{title:"Expiration Alert",description:"There are {count} product(s) nearing expiration in the next 30 days."},visits:{title:"Site Visits",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly",total:"Total",thisWeek:"This Week",thisMonth:"This Month",thisYear:"This Year",allTime:"All Time"}},settings:{title:"General Settings",subtitle:"Manage the key settings of your platform.",financial:{title:"Financial Settings",usdToLocal:"USD to Local Currency",productProfit:"Product Profit (%)",comboProfit:"Combo Profit (%)",remittanceProfit:"Remittance Profit (%)",save:"Save Settings",currencies:"Currency Management",addCurrency:"Add Currency",code:"Code (e.g: USD, EUR, CUP)",nameES:"Name (Spanish)",nameEN:"Name (English)",rate:"Rate vs USD",symbol:"Symbol",active:"Active",updateCurrency:"Update Currency",currencyCreated:"Currency created",currencyUpdated:"Currency updated",currencyDeleted:"Currency deleted"},zelle:{title:"Zelle Accounts",add:"Add Zelle Account",email:"Email",name:"Name",assignTo:"Assign to",products:"Product Sales",remittances:"Remittances",active:"Active"},visual:{title:"Visual Settings",logo:"Site Logo",favicon:"Favicon",slides:"Homepage Slides",addSlide:"Add Slide",image:"Image (URL or File)",imageType:"Image Type",url:"URL",upload:"Upload",mainText:"Main Text",secondaryText:"Secondary Text",text_es:"Text (ES)",text_en:"Text (EN)",active:"Active",save:"Save Settings"},notifications:{title:"Notification Settings",whatsapp:"WhatsApp Number for Notifications",adminEmail:"Admin Email for Notifications",save:"Save Settings"},saveSuccess:"Settings saved successfully"},cart:{title:"Your Shopping Cart",empty:"Your cart is empty.",browse:"Browse products",summary:"Order Summary",subtotal:"Subtotal",shipping:"Shipping",free:"Free",total:"Total",checkout:"Proceed to Checkout",payment:{title:"Make Payment",instructionsTitle:"Payment Instructions",instructions:"Copy the purchase ID and paste it into the Zelle transfer description. Send the receipt to info@papuenvios.com or upload it directly here. The payment will be subject to validation.",accountInfo:"Zelle Account Details",purchaseId:"Purchase ID",copy:"Copied",amount:"Amount to Pay",uploadProof:"Upload Payment Proof",confirm:"Confirm Payment",recipientTitle:"Delivery/Recipient Details"}},auth:{login:"Login",loginTitle:"Welcome Back",loginSubtitle:"Log in to access your account.",email:"Email",password:"Password",loginWithGoogle:"Login with Google",or:"Or",loginSuccess:"Login successful!",loginError:"Invalid credentials. Please try again.",logoutSuccess:"Logged out successfully.",loginRequired:"Login Required",loginToCheckout:"Please log in to continue to checkout."},userPanel:{title:"My User Panel",welcome:"Welcome, {name}",myOrders:"My Orders",noOrders:"You have no orders yet.",status:{pending:"Pending",validated:"Validated",rejected:"Rejected"}},adminOrders:{title:"Order History",subtitle:"Complete management of all system orders",stats:{total:"Total",pending:"Pending",validated:"Validated",rejected:"Rejected",completed:"Completed",revenue:"Revenue"},filters:{title:"Search Filters",clear:"Clear Filters",search:"Search",searchPlaceholder:"Order, user, email or product...",status:"Order Status",allStatuses:"All Statuses",orderType:"Order Type",allTypes:"All",startDate:"Start Date",endDate:"End Date",apply:"Apply Filters"},table:{order:"Order",user:"User",date:"Date",type:"Type",items:"Items",total:"Total",paymentStatus:{label:"Payment Status",pending:"Payment Pending",validated:"Payment Validated (Ready to Process)",rejected:"Payment Rejected"},orderStatus:{label:"Order Status",pending:"Pending",processing:"Processing",shipped:"Shipped",delivered:"Delivered",completed:"Completed",cancelled:"Cancelled"},actions:"Actions"},types:{products:"Products",remittance:"Remittance",mixed:"Mixed"},actions:{view:"View",start:"Start",ship:"Ship",proof:"Proof",complete:"Complete",cancel:"Cancel",processing:"Processing...",loading:"Loading...",completing:"Completing..."},messages:{noOrders:"No orders found",retry:"Retry",confirmStart:"Start processing order {orderNumber}?",confirmComplete:"Mark order {orderNumber} as completed?",confirmCancel:"Are you sure you want to cancel this order? This action will release reserved inventory.",enterTracking:"Enter tracking number (optional) for order {orderNumber}:",enterCancelReason:"Enter cancellation reason for order {orderNumber}:",cancelReasonRequired:"You must specify a reason for cancellation",startSuccess:'Order moved to "Processing" status',shipSuccess:'Order marked as "Shipped"',deliverSuccess:'Delivery proof uploaded successfully. Order marked as "Delivered"',completeSuccess:"Order completed successfully",cancelSuccess:"Order cancelled successfully",error:"Error",selectImage:"Select proof image",invalidImage:"Please select a valid image",imageTooLarge:"File is too large. Maximum 5MB"},deliveryModal:{title:"Upload Delivery Proof",orderLabel:"Order:",customerLabel:"Customer:",selectPhoto:"Select Proof Photo",clickToUpload:"Click to upload",dragHere:"or drag here",fileTypes:"PNG, JPG, JPEG (MAX. 5MB)",imageLoaded:'Image loaded. Click "Upload Proof" to confirm.',note:"Note:",noteText:'When uploading proof, the order will be automatically marked as "Delivered". The customer will be able to see the proof photo.',cancel:"Cancel",submit:"Upload Proof",uploading:"Uploading..."},days:{singular:"day",plural:"days"},modals:{confirm:"Confirm",cancel:"Cancel",submit:"Submit",startTitle:"Start Processing",completeTitle:"Complete Order",cancelTitle:"Cancel Order",trackingTitle:"Tracking Number",cancelReasonTitle:"Cancellation Reason"}},users:{management:"User Management",managementDescription:"Manage platform user roles and permissions",fetchError:"Error loading users",roleUpdated:"Role updated",roleUpdatedSuccess:"User role was updated successfully",roleUpdateError:"Error updating role",userEnabled:"User enabled",userDisabled:"User disabled",statusUpdateSuccess:"User status was updated successfully",statusUpdateError:"Error updating status",cannotModifySuperAdmin:"Cannot modify super administrator",superAdmin:"Super Admin",noUsers:"No users",enable:"Enable",disable:"Disable",delete:"Delete",deleteUser:"Delete user",enableUser:"Enable user",disableUser:"Disable user",userDeleted:"User deleted",userDeletedSuccess:"User has been deleted successfully.",deleteError:"Error deleting",confirmDelete:"Are you sure you want to delete {email}? This action cannot be undone.",protected:"Protected",refresh:"Refresh",loadingUsers:"Loading users...",noUsersFound:"No users found",total:"Total",rolesPermissions:{title:"Roles & Permissions",userDesc:"Basic system access",adminDesc:"Product, combo and inventory management",superAdminDesc:"Full access + user management"},securityNote:{title:"Security Note",superAdminProtected:"Super Admins are protected and cannot be edited or deleted",onlySuperAdminManage:"Only Super Admins can manage roles and delete users",deletionPermanent:"User deletion is permanent and cannot be undone"},roles:{user:"User",admin:"Administrator",super_admin:"Super Administrator"},table:{email:"Email",name:"Name",role:"Role",status:"Status",actions:"Actions",active:"Active",inactive:"Inactive",createdAt:"Registration Date"}}}},T4=({children:t})=>{const[e,r]=w.useState("es"),i=(o,l={})=>{const c=o.split(".");let u=k4[e];for(const m of c)u=u?.[m];return typeof u=="string"?Object.entries(l).reduce((m,[h,p])=>m.replace(`{${h}}`,p),u):u||o};return n.jsx(Lw.Provider,{value:{language:e,setLanguage:r,t:i},children:t})},kt=()=>{const t=w.useContext(Lw);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},$w=()=>{const[t,e]=w.useState(null);w.useEffect(()=>{try{const u=localStorage.getItem("visualSettings");u&&e(JSON.parse(u))}catch(u){console.error("Error loading visual settings:",u)}},[]);const r=t?.primaryColor||"#2563eb",i=t?.secondaryColor||"#9333ea",o=t?.useGradient!==void 0?t.useGradient:!0,l=t?.pageBgColor||"#f9fafb",c=o?{background:`linear-gradient(to right, ${r}, ${i})`}:{backgroundColor:l};return n.jsx("div",{className:"min-h-screen flex items-center justify-center",style:c,children:n.jsx(le.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.3,ease:[0,.71,.2,1.01],scale:{type:"spring",damping:5,stiffness:100,restDelta:.001}},className:"p-8 rounded-2xl shadow-xl",style:{backgroundColor:t?.cardBgColor||"#ffffff"},children:n.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[n.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:`${r} transparent transparent transparent`}}),n.jsx("p",{className:"font-medium",style:{color:t?.textPrimaryColor||"#4b5563"},children:"Authenticating..."})]})})})},Fw=w.createContext(),A4=({children:t})=>{const[e,r]=w.useState(null),[i,o]=w.useState(null),[l,c]=w.useState(!0),[u,m]=w.useState(!0),h=w.useRef(!0),p=async E=>{try{const{data:N,error:D}=await Promise.race([q.from("user_profiles").select("role, is_enabled, avatar_url, full_name, email").eq("id",E).single(),new Promise((T,L)=>setTimeout(()=>L(new Error("Profile fetch timeout")),Dx.PROFILE_FETCH))]);return D?(console.warn("[Auth] Profile fetch error:",D),null):N}catch(N){return console.warn("[Auth] Profile fetch failed:",N.message),null}},g=async E=>{if(!E?.user){r(null),o(null),c(!0);return}const N=E.user.id;console.log("[Auth] Updating user state for:",E.user.email);const D=await p(N);if(!D){console.warn("[Auth] Profile not found, using session data as fallback"),r(E.user),o("user"),c(!0);return}if(D.is_enabled===!1){console.warn("[Auth] Account is disabled"),r(null),o(null),c(!1);try{await q.auth.signOut(),re({title:"Cuenta deshabilitada",description:"Tu cuenta ha sido deshabilitada. Contacta al soporte.",variant:"destructive"})}catch(T){console.error("[Auth] Error signing out disabled user:",T)}return}r({...E.user,profile:D}),o(D.role||"user"),c(!0),console.log("[Auth] User state updated successfully. Role:",D.role),x(N,E.user,D)},x=async(E,N,D)=>{try{const T=N.user_metadata?.avatar_url||N.user_metadata?.picture,L=N.user_metadata?.full_name||N.user_metadata?.name,I={};if(T&&T!==D.avatar_url&&(I.avatar_url=T),L&&L!==D.full_name&&(I.full_name=L),Object.keys(I).length>0){const{error:J}=await q.from("user_profiles").update(I).eq("id",E);J&&console.warn("[Auth] Metadata sync error (non-critical):",J)}}catch(T){console.warn("[Auth] Metadata sync failed (non-critical):",T)}};w.useEffect(()=>{h.current=!0;const E=setTimeout(()=>{h.current&&u&&(console.warn("[Auth] Init timeout - clearing loading state"),m(!1))},Dx.INIT_AUTH),N=async()=>{console.log("[Auth] Initializing..."),m(!0);try{const{data:{session:T},error:L}=await q.auth.getSession();if(L){console.error("[Auth] getSession error:",L),m(!1);return}T&&await g(T)}catch(T){console.error("[Auth] Init error:",T)}finally{clearTimeout(E),h.current&&m(!1)}},{data:D}=q.auth.onAuthStateChange(async(T,L)=>{if(console.log("[Auth] State change:",T),!!h.current){if(T==="SIGNED_OUT"){r(null),o(null),c(!0);return}L&&await g(L)}});return N(),()=>{h.current=!1,clearTimeout(E),D?.subscription&&D.subscription.unsubscribe()}},[]);const b=async(E,N)=>{try{const{data:D,error:T}=await q.auth.signInWithPassword({email:E,password:N});if(T)throw T;return D?.session?(await g(D.session),!0):!1}catch(D){return console.error("[Auth] login error",D),re({title:"Error de inicio de sesión",description:D.message||String(D),variant:"destructive"}),!1}},j=async()=>{try{await q.auth.signOut();const{data:E,error:N}=await q.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(N)throw N;E?.url&&window.location.replace(E.url)}catch(E){console.error("[Auth] signInWithGoogle error",E),re({title:"Error",description:E.message||String(E),variant:"destructive"})}},C=async()=>{try{const{error:E}=await q.auth.signOut();if(E)throw E;r(null),o(null),c(!0)}catch(E){console.error("[Auth] logout error",E),re({title:"Error al cerrar sesión",description:E.message||String(E),variant:"destructive"})}},_=E=>E?i?i==="super_admin"||i==="admin"&&E!=="super_admin"?!0:i===E:!1:!0,O=eA.includes(e?.email),A={user:e,loading:u,isAuthenticated:!!e&&l,userRole:i,isEnabled:l,isSuperAdmin:i==="super_admin"||O,isAdmin:i==="admin"||i==="super_admin"||O,checkRole:_,login:b,signInWithGoogle:j,logout:C,supabaseClient:q};return n.jsx(Fw.Provider,{value:A,children:u?n.jsx($w,{}):t})},Dt=()=>{const t=w.useContext(Fw);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},R4=async()=>{const t=new Date().toISOString().slice(0,10).replace(/-/g,""),e=Date.now().toString().slice(-5),r=Math.floor(Math.random()*100).toString().padStart(2,"0"),i=`${e}${r}`.slice(0,5),o=`ORD-${t}-${i}`,{data:l}=await q.from("orders").select("order_number").eq("order_number",o).maybeSingle();if(l){const c=(Date.now()%1e3).toString().padStart(3,"0");return`ORD-${t}-${e.slice(-2)}${c}`}return o},O4=async(t,e)=>{try{const i={order_number:await R4(),user_id:t.userId,order_type:t.orderType||"product",status:"pending",subtotal:t.subtotal,discount_amount:t.discountAmount||0,shipping_cost:t.shippingCost||0,tax_amount:t.taxAmount||0,total_amount:t.totalAmount,currency_id:t.currencyId,shipping_address:t.shippingAddress||null,recipient_info:t.recipientInfo||null,delivery_instructions:t.deliveryInstructions||"",payment_method:t.paymentMethod||"zelle",payment_status:"pending",payment_reference:t.paymentReference||"",payment_proof_url:t.paymentProofUrl||null,shipping_zone_id:t.shippingZoneId||null,zelle_account_id:t.zelleAccountId||null,notes:t.notes||"",offer_id:t.offerId||null},{data:o,error:l}=await q.from("orders").insert(i).select().single();if(l)throw l;const c=e.map(h=>({order_id:o.id,item_type:h.itemType,item_id:h.itemId,item_name_es:h.nameEs,item_name_en:h.nameEn,quantity:h.quantity,unit_price:h.unitPrice,total_price:h.totalPrice,inventory_id:h.inventoryId||null,remittance_amount:h.remittanceAmount||null,exchange_rate:h.exchangeRate||null,recipient_data:h.recipientData||null})),{data:u,error:m}=await q.from("order_items").insert(c).select();if(m)throw m;for(const h of e)h.itemType==="product"&&h.inventoryId&&await D4(h.inventoryId,h.quantity);return{success:!0,order:{...o,items:u}}}catch(r){return console.error("Error creating order:",r),{success:!1,error:r.message}}},D4=async(t,e)=>{try{const{data:r,error:i}=await q.from("inventory").select("reserved_quantity").eq("id",t).single();if(i)throw i;const o=(r.reserved_quantity||0)+e,{error:l}=await q.from("inventory").update({reserved_quantity:o}).eq("id",t);if(l)throw l;return await q.from("inventory_movements").insert({inventory_id:t,movement_type:"reserved",quantity_change:-e,reference_type:"order",notes:"Reserved for order"}),{success:!0}}catch(r){return console.error("Error reserving inventory:",r),{success:!1,error:r.message}}},Uw=async(t,e)=>{try{const{data:r,error:i}=await q.from("inventory").select("reserved_quantity").eq("id",t).single();if(i)throw i;const o=Math.max(0,(r.reserved_quantity||0)-e),{error:l}=await q.from("inventory").update({reserved_quantity:o}).eq("id",t);if(l)throw l;return await q.from("inventory_movements").insert({inventory_id:t,movement_type:"released",quantity_change:e,reference_type:"order",notes:"Released from rejected/cancelled order"}),{success:!0}}catch(r){return console.error("Error releasing inventory:",r),{success:!1,error:r.message}}},Jx=async(t,e)=>{try{const{data:r,error:i}=await q.from("inventory").select("quantity, reserved_quantity").eq("id",t).single();if(i)throw i;const o=r.quantity-e,l=Math.max(0,(r.reserved_quantity||0)-e),{error:c}=await q.from("inventory").update({quantity:o,reserved_quantity:l}).eq("id",t);if(c)throw c;return await q.from("inventory_movements").insert({inventory_id:t,movement_type:"sold",quantity_change:-e,reference_type:"order",notes:"Sold - payment validated"}),{success:!0}}catch(r){return console.error("Error reducing inventory:",r),{success:!1,error:r.message}}},M4=async(t,e={})=>{try{let r=q.from("orders").select(`
        *,
        order_items (*),
        currencies (code, symbol),
        shipping_zones (province_name, shipping_cost)
      `).eq("user_id",t).order("created_at",{ascending:!1});e.status&&(r=r.eq("status",e.status)),e.payment_status&&(r=r.eq("payment_status",e.payment_status));const{data:i,error:o}=await r;if(o)throw o;return{success:!0,orders:i||[]}}catch(r){return console.error("Error fetching user orders:",r),{success:!1,error:r.message,orders:[]}}},I4=async t=>{try{const{data:e,error:r}=await q.from("orders").select(`
        *,
        order_items (*),
        currencies (code, symbol),
        shipping_zones (province_name, shipping_cost)
      `).eq("id",t).single();if(r)throw r;if(e&&e.user_id){const{data:i,error:o}=await q.from("user_profiles").select("user_id, full_name, email").eq("user_id",e.user_id).single();!o&&i&&(e.user_profiles=i)}return{success:!0,order:e}}catch(e){return console.error("Error fetching order:",e),{success:!1,error:e.message}}},Vw=async(t={})=>{try{let e=q.from("orders").select(`
        *,
        order_items (*),
        currencies (code, symbol),
        shipping_zones (province_name, shipping_cost)
      `).order("created_at",{ascending:!1});t.status&&(e=e.eq("status",t.status)),t.payment_status&&(e=e.eq("payment_status",t.payment_status)),t.order_type&&(e=e.eq("order_type",t.order_type));const{data:r,error:i}=await e;if(i)throw i;if(r&&r.length>0){const o=[...new Set(r.map(u=>u.user_id))],{data:l,error:c}=await q.from("user_profiles").select("user_id, full_name, email").in("user_id",o);if(!c&&l){const u={};l.forEach(m=>{u[m.user_id]=m}),r.forEach(m=>{m.user_profiles=u[m.user_id]||null})}}return{success:!0,orders:r||[]}}catch(e){return console.error("Error fetching all orders:",e),{success:!1,error:e.message,orders:[]}}},L4=async()=>{try{const{data:t,error:e}=await q.rpc("get_pending_orders_count");if(e)throw e;return{success:!0,count:t||0}}catch(t){return console.error("Error fetching pending orders count:",t),{success:!1,count:0}}},$4=async(t,e)=>{try{const{data:r,error:i}=await q.from("orders").select("*, order_items (*)").eq("id",t).single();if(i)throw i;const{data:o,error:l}=await q.from("orders").update({payment_status:"validated",status:"processing",validated_by:e,validated_at:new Date().toISOString()}).eq("id",t).select().single();if(l)throw l;for(const c of r.order_items)if(c.item_type==="product"&&c.inventory_id)await Jx(c.inventory_id,c.quantity);else if(c.item_type==="combo"&&c.item_id){const{data:u}=await q.from("combo_items").select("product_id, quantity").eq("combo_id",c.item_id);if(u)for(const m of u){const{data:h}=await q.from("products").select("inventory_id").eq("id",m.product_id).single();h?.inventory_id&&await Jx(h.inventory_id,c.quantity*m.quantity)}}return await q.from("order_status_history").insert({order_id:t,previous_status:r.status,new_status:"processing",changed_by:e,notes:"Payment validated by admin"}),{success:!0,order:o}}catch(r){return console.error("Error validating payment:",r),{success:!1,error:r.message}}},F4=async(t,e,r)=>{try{const{data:i,error:o}=await q.from("orders").select("*, order_items (*)").eq("id",t).single();if(o)throw o;const{data:l,error:c}=await q.from("orders").update({payment_status:"rejected",status:"cancelled",validated_by:e,validated_at:new Date().toISOString(),rejection_reason:r}).eq("id",t).select().single();if(c)throw c;for(const u of i.order_items)u.item_type==="product"&&u.inventory_id&&await Uw(u.inventory_id,u.quantity);return await q.from("order_status_history").insert({order_id:t,previous_status:i.status,new_status:"cancelled",changed_by:e,notes:`Payment rejected: ${r}`}),{success:!0,order:l}}catch(i){return console.error("Error rejecting payment:",i),{success:!1,error:i.message}}},U4=async(t,e)=>{try{let r="jpg";t.name?r=t.name.split(".").pop():t.type&&(r={"image/jpeg":"jpg","image/jpg":"jpg","image/png":"png","image/webp":"webp","image/gif":"gif"}[t.type]||"jpg");const o=`payment-proofs/${`payment-proof-${e}-${Date.now()}.${r}`}`,{data:l,error:c}=await q.storage.from("order-documents").upload(o,t,{cacheControl:"3600",upsert:!1});if(c)throw c;const{data:u}=q.storage.from("order-documents").getPublicUrl(o),{error:m}=await q.from("orders").update({payment_proof_url:u.publicUrl}).eq("id",e);if(m)throw m;return{success:!0,url:u.publicUrl}}catch(r){return console.error("Error uploading payment proof:",r),{success:!1,error:r.message}}},V4=async(t,e)=>{try{const{data:r,error:i}=await q.from("orders").select("id, order_number, status, payment_status").eq("id",t).single();if(i)throw i;if(r.payment_status!=="validated")return{success:!1,error:"Payment must be validated before processing"};const{data:o,error:l}=await q.from("orders").update({status:"processing",processing_started_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t).select().single();if(l)throw l;return{success:!0,order:o}}catch(r){return console.error("Error starting order processing:",r),{success:!1,error:r.message}}},B4=async(t,e,r="")=>{try{const{data:i,error:o}=await q.from("orders").select("id, order_number, status").eq("id",t).single();if(o)throw o;if(i.status!=="processing")return{success:!1,error:"Order must be in processing status"};const l={status:"shipped",shipped_at:new Date().toISOString(),updated_at:new Date().toISOString()};r&&(l.notes=i.notes?`${i.notes}

Tracking: ${r}`:`Tracking: ${r}`);const{data:c,error:u}=await q.from("orders").update(l).eq("id",t).select().single();if(u)throw u;return{success:!0,order:c}}catch(i){return console.error("Error marking order as shipped:",i),{success:!1,error:i.message}}},z4=async(t,e,r)=>{try{const{data:i,error:o}=await q.from("orders").select("id, order_number, status").eq("id",t).single();if(o)throw o;if(i.status!=="shipped")return{success:!1,error:"Order must be in shipped status"};const l=`delivery-proof-${t}-${Date.now()}.jpg`,{data:c,error:u}=await q.storage.from("payment-proofs").upload(l,e,{cacheControl:"3600",upsert:!1});if(u)throw u;const{data:m}=q.storage.from("payment-proofs").getPublicUrl(l),{data:h,error:p}=await q.from("orders").update({status:"delivered",delivered_at:new Date().toISOString(),delivery_proof_url:m.publicUrl,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(p)throw p;return{success:!0,order:h}}catch(i){return console.error("Error marking order as delivered:",i),{success:!1,error:i.message}}},q4=async t=>{try{const{data:e,error:r}=await q.from("orders").select("id, order_number, status").eq("id",t).single();if(r)throw r;if(e.status!=="delivered")return{success:!1,error:"Order must be in delivered status"};const{data:i,error:o}=await q.from("orders").update({status:"completed",completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t).select().single();if(o)throw o;return{success:!0,order:i}}catch(e){return console.error("Error completing order:",e),{success:!1,error:e.message}}},W4=t=>{if(!t||t.status!=="processing"||!t.processing_started_at)return null;const e=new Date,r=new Date(t.processing_started_at),i=Math.abs(e-r);return Math.ceil(i/(1e3*60*60*24))},H4=async(t,e,r)=>{try{const{data:i,error:o}=await q.from("orders").select("*, order_items(*)").eq("id",t).single();if(o)throw o;for(const u of i.order_items)u.inventory_id&&await Uw(u.inventory_id,u.quantity);const{data:l,error:c}=await q.from("orders").update({status:"cancelled",rejection_reason:r,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(c)throw c;return{success:!0,order:l}}catch(i){return console.error("Error cancelling order:",i),{success:!1,error:i.message}}},G4=({currentPage:t,onNavigate:e})=>{const[r,i]=w.useState(!1),[o,l]=w.useState(!1),[c,u]=w.useState(0),{language:m,setLanguage:h,t:p}=kt(),{cart:g,visualSettings:x}=ar(),{user:b,isAdmin:j,userRole:C}=Dt(),_=[{id:"home",icon:Er,label:p("nav.home")},{id:"products",icon:Er,label:p("nav.products")},{id:"remittances",icon:qt,label:p("nav.remittances")}],O=[{id:"dashboard",icon:rc,label:p("nav.dashboard")},{id:"admin",icon:yP,label:p("nav.admin")},{id:"user-management",icon:Mc,label:p("nav.userManagement")},{id:"settings",icon:jb,label:p("nav.settings")}],{logout:A}=Dt(),E=()=>{A(),re({title:p("auth.logoutSuccess")}),e("home")},N=()=>{e("login")},D=L=>{e(L),l(!1),i(!1)};w.useEffect(()=>{if(C==="admin"||C==="super_admin"){T();const L=setInterval(T,3e4);return()=>clearInterval(L)}},[C]);const T=async()=>{try{const L=await L4();L.success&&u(L.count||0)}catch(L){console.error("Error loading pending orders:",L)}};return n.jsx(le.header,{initial:{y:-100},animate:{y:0},className:"fixed top-0 left-0 right-0 z-40 backdrop-blur-md shadow-sm",style:{backgroundColor:x.headerBgColor||"rgba(255, 255, 255, 0.8)",color:x.headerTextColor||"#1f2937"},children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsxs(le.div,{whileHover:{scale:1.05},className:"flex items-center space-x-2 cursor-pointer",onClick:()=>D("home"),children:[x.logo?n.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:n.jsx("img",{src:x.logo,alt:x.companyName||"Logo",className:"max-w-full max-h-full object-contain"})}):n.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:x.useGradient?`linear-gradient(to right, ${x.primaryColor||"#2563eb"}, ${x.secondaryColor||"#9333ea"})`:x.primaryColor||"#2563eb"},children:n.jsx(Er,{className:"w-5 h-5 text-white"})}),n.jsx("span",{className:"text-xl font-bold",style:{backgroundImage:x.useGradient?`linear-gradient(to right, ${x.primaryColor||"#2563eb"}, ${x.secondaryColor||"#9333ea"})`:`linear-gradient(to right, ${x.primaryColor||"#2563eb"}, ${x.primaryColor||"#2563eb"})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:x.companyName||"PapuEnvíos"})]}),n.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[_.map(L=>n.jsxs(ve,{variant:t===L.id?"default":"ghost",size:"sm",onClick:()=>D(L.id),className:"flex items-center space-x-2",style:t===L.id?{background:x.useGradient?`linear-gradient(to right, ${x.primaryColor||"#2563eb"}, ${x.secondaryColor||"#9333ea"})`:x.buttonBgColor||"#2563eb",color:x.buttonTextColor||"#ffffff",border:"none"}:{color:x.headerTextColor||"#1f2937"},children:[n.jsx(L.icon,{className:"w-4 h-4"}),n.jsx("span",{children:L.label})]},L.id)),j&&n.jsxs("div",{className:"relative",children:[n.jsxs(ve,{variant:O.some(L=>t===L.id)?"default":"ghost",size:"sm",onClick:()=>l(!o),className:"flex items-center space-x-2",style:O.some(L=>t===L.id)?{background:x.useGradient?`linear-gradient(to right, ${x.primaryColor||"#2563eb"}, ${x.secondaryColor||"#9333ea"})`:x.buttonBgColor||"#2563eb",color:x.buttonTextColor||"#ffffff",border:"none"}:{color:x.headerTextColor||"#1f2937"},children:[n.jsx(SP,{className:"w-4 h-4"}),n.jsx("span",{children:"Admin"}),n.jsx(gb,{className:`w-3 h-3 transition-transform ${o?"rotate-180":""}`})]}),n.jsx(Vr,{children:o&&n.jsx(le.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-56 rounded-xl shadow-xl overflow-hidden backdrop-blur-md",style:{backgroundColor:x.headerBgColor||"rgba(255, 255, 255, 0.95)",color:x.headerTextColor||"#1f2937"},children:O.map(L=>{const J=x.headerBgColor==="#ffffff"||!x.headerBgColor?`${x.primaryColor}15`:`${x.headerBgColor}40`,Q=t===L.id?{backgroundColor:J,color:x.primaryColor||"#2563eb"}:{};return n.jsxs(ve,{variant:"ghost",size:"sm",onClick:()=>D(L.id),className:"w-full justify-start flex items-center space-x-2 rounded-none hover:opacity-100",style:{...Q,color:x.headerTextColor||"#1f2937"},onMouseEnter:we=>{t!==L.id&&(we.currentTarget.style.backgroundColor=J)},onMouseLeave:we=>{t!==L.id&&(we.currentTarget.style.backgroundColor="transparent")},children:[n.jsx(L.icon,{className:"w-4 h-4"}),n.jsx("span",{children:L.label})]},L.id)})})})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>h(m==="es"?"en":"es"),className:"hidden sm:flex items-center space-x-2",style:{borderColor:x.primaryColor||"#2563eb",color:x.primaryColor||"#2563eb"},children:[n.jsx(xb,{className:"w-4 h-4"}),n.jsx("span",{children:m.toUpperCase()})]}),C!=="admin"&&C!=="super_admin"&&n.jsx(ve,{variant:"ghost",size:"icon",onClick:()=>e("cart"),children:n.jsxs("div",{className:"relative",children:[n.jsx(oo,{className:"w-5 h-5"}),g.length>0&&n.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:g.reduce((L,I)=>L+I.quantity,0)})]})}),b?n.jsxs(n.Fragment,{children:[n.jsx(ve,{variant:"ghost",size:"icon",onClick:()=>e("user-panel"),className:"relative",children:n.jsxs("div",{className:"relative",children:[n.jsx(E4,{user:b}),(C==="admin"||C==="super_admin")&&c>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold shadow-lg",children:c})]})}),n.jsx(ve,{variant:"ghost",size:"icon",onClick:E,children:n.jsx(vP,{className:"w-5 h-5"})})]}):n.jsx(ve,{variant:"ghost",size:"icon",onClick:N,children:n.jsx(bb,{className:"w-5 h-5"})}),n.jsx(ve,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>i(!r),children:r?n.jsx(ir,{className:"w-5 h-5"}):n.jsx(jP,{className:"w-5 h-5"})})]})]}),n.jsx(Vr,{children:r&&n.jsx(le.nav,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-white/20 py-4",children:n.jsxs("div",{className:"flex flex-col space-y-2",children:[_.map(L=>n.jsxs(ve,{variant:t===L.id?"default":"ghost",size:"sm",onClick:()=>D(L.id),className:"flex items-center space-x-2 justify-start",style:t===L.id?{background:x.useGradient?`linear-gradient(to right, ${x.primaryColor||"#2563eb"}, ${x.secondaryColor||"#9333ea"})`:x.buttonBgColor||"#2563eb",color:x.buttonTextColor||"#ffffff",border:"none"}:{color:x.headerTextColor||"#1f2937"},children:[n.jsx(L.icon,{className:"w-4 h-4"}),n.jsx("span",{children:L.label})]},L.id)),j&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"pt-2 pb-1 px-2 text-xs font-semibold uppercase opacity-70",style:{color:x.headerTextColor||"#6b7280"},children:"Administración"}),O.map(L=>n.jsxs(ve,{variant:t===L.id?"default":"ghost",size:"sm",onClick:()=>D(L.id),className:"flex items-center space-x-2 justify-start",style:t===L.id?{background:x.useGradient?`linear-gradient(to right, ${x.primaryColor||"#2563eb"}, ${x.secondaryColor||"#9333ea"})`:x.buttonBgColor||"#2563eb",color:x.buttonTextColor||"#ffffff",border:"none"}:{color:x.headerTextColor||"#1f2937"},children:[n.jsx(L.icon,{className:"w-4 h-4"}),n.jsx("span",{children:L.label})]},L.id))]})]})})})]})})},Je=t=>t?{background:t.useGradient?`linear-gradient(to right, ${t.primaryColor||"#2563eb"}, ${t.secondaryColor||"#9333ea"})`:t.buttonBgColor||t.primaryColor||"#2563eb",color:t.buttonTextColor||"#ffffff",border:"none"}:{},Ze=t=>t?t.useHeadingGradient||t.useGradient?{backgroundImage:`linear-gradient(to right, ${t.primaryColor||"#2563eb"}, ${t.secondaryColor||"#9333ea"})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}:{color:t.headingColor||t.primaryColor||"#1f2937"}:{},Be=(t,e="primary")=>{if(!t)return{};const r={primary:{color:t.textPrimaryColor||"#1f2937"},secondary:{color:t.textSecondaryColor||"#6b7280"},muted:{color:t.textMutedColor||"#9ca3af"}};return r[e]||r.primary},Bw=(t,e="default")=>{if(!t)return{};const r={default:{backgroundColor:t.pillBgColor||"#e5e7eb",color:t.pillTextColor||"#374151"},success:{backgroundColor:`${t.successColor||"#10b981"}20`,color:t.successColor||"#10b981",borderColor:t.successColor||"#10b981"},warning:{backgroundColor:`${t.warningColor||"#f59e0b"}20`,color:t.warningColor||"#f59e0b",borderColor:t.warningColor||"#f59e0b"},error:{backgroundColor:`${t.errorColor||"#ef4444"}20`,color:t.errorColor||"#ef4444",borderColor:t.errorColor||"#ef4444"},info:{backgroundColor:`${t.primaryColor||"#2563eb"}20`,color:t.primaryColor||"#2563eb",borderColor:t.primaryColor||"#2563eb"}};return r[e]||r.default},mf=(t,e)=>{if(!e)return{};const i={validated:"success",pending:"warning",rejected:"error",cancelled:"default",processing:"info",completed:"success"}[t]||"default";return Bw(e,i)},K4=(t,e="info")=>{if(!t)return{};const r={success:{backgroundColor:`${t.successColor||"#10b981"}10`,borderColor:t.successColor||"#10b981",color:t.successColor||"#10b981"},warning:{backgroundColor:`${t.warningColor||"#f59e0b"}10`,borderColor:t.warningColor||"#f59e0b",color:t.warningColor||"#f59e0b"},error:{backgroundColor:`${t.errorColor||"#ef4444"}10`,borderColor:t.errorColor||"#ef4444",color:t.errorColor||"#ef4444"},info:{backgroundColor:`${t.primaryColor||"#2563eb"}10`,borderColor:t.primaryColor||"#2563eb",color:t.primaryColor||"#2563eb"}};return r[e]||r.info},Xx=({onNavigate:t})=>{const{t:e,language:r}=kt(),{visualSettings:i}=ar(),{isAdmin:o}=Dt(),[l,c]=w.useState([]),[u,m]=w.useState([]),h=[{icon:Er,title:e("home.features.products.title"),description:e("home.features.products.description"),action:()=>t("products")},{icon:qt,title:e("home.features.remittances.title"),description:e("home.features.remittances.description"),action:()=>t("remittances")},{icon:Xa,title:e("home.features.analytics.title"),description:e("home.features.analytics.description"),action:()=>t("dashboard"),admin:!0},{icon:Mc,title:e("home.features.vendors.title"),description:e("home.features.vendors.description"),action:()=>t("admin"),admin:!0}].filter(j=>!j.admin||o),[p,g]=w.useState(0);w.useEffect(()=>{(async()=>{const C=await Jb(!1);C.data&&m(C.data)})()},[]),w.useEffect(()=>{(async()=>{try{const{data:C,error:_}=await vA();if(_)throw _;c(C||[])}catch(C){console.error("Error loading carousel slides:",C),c([])}})()},[]);const x=()=>{g(j=>j===l.length-1?0:j+1)},b=()=>{g(j=>j===0?l.length-1:j-1)};return w.useEffect(()=>{if(l.length>1){const j=setInterval(x,5e3);return()=>clearInterval(j)}},[l.length]),n.jsxs("div",{className:"min-h-screen",children:[n.jsx("section",{className:"relative h-[60vh] md:h-[80vh] w-full overflow-hidden",children:l.length>0?n.jsxs(n.Fragment,{children:[n.jsx(Vr,{initial:!1,children:n.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},style:{backgroundImage:`url(${l[p]?.image_url||l[p]?.image_file})`},className:"absolute inset-0 bg-cover bg-center",children:n.jsx("div",{className:"absolute inset-0 bg-black/50"})},p)}),n.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-center text-white p-4",children:[n.jsx(le.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-4xl md:text-6xl font-bold mb-4",children:r==="es"?l[p]?.title_es:l[p]?.title_en},`main-${p}`),n.jsx(le.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-lg md:text-xl max-w-2xl mx-auto mb-8",children:r==="es"?l[p]?.subtitle_es:l[p]?.subtitle_en},`secondary-${p}`),n.jsx(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"flex flex-col sm:flex-row gap-4 justify-center",children:n.jsxs(ve,{size:"lg",onClick:()=>t("products"),className:"px-8 py-3 text-lg",style:{background:i.useGradient?`linear-gradient(to right, ${i.primaryColor||"#2563eb"}, ${i.secondaryColor||"#9333ea"})`:i.buttonBgColor||"#2563eb",color:i.buttonTextColor||"#ffffff",border:"none"},children:[n.jsx(Er,{className:"w-5 h-5 mr-2"}),e("home.hero.cta.products")]})})]}),l.length>1&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:b,className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-white/20 rounded-full hover:bg-white/40 transition-colors",children:n.jsx(Rm,{className:"h-6 w-6 text-white"})}),n.jsx("button",{onClick:x,className:"absolute right-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-white/20 rounded-full hover:bg-white/40 transition-colors",children:n.jsx(Om,{className:"h-6 w-6 text-white"})}),n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-20 flex gap-2",children:l.map((j,C)=>n.jsx("div",{onClick:()=>g(C),className:`w-3 h-3 rounded-full cursor-pointer transition-colors ${p===C?"bg-white":"bg-white/50"}`},C))})]})]}):n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:i.useGradient?`linear-gradient(to right, ${i.primaryColor||"#2563eb"}, ${i.secondaryColor||"#9333ea"})`:i.primaryColor||"#2563eb"},children:n.jsxs("div",{className:"text-center text-white p-4",children:[n.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:e("home.hero.title")}),n.jsx("p",{className:"text-lg md:text-xl max-w-2xl mx-auto mb-8",children:e("home.hero.subtitle")}),n.jsxs(ve,{size:"lg",onClick:()=>t("products"),className:"px-8 py-3 text-lg",style:{backgroundColor:i.cardBgColor||"#ffffff",color:i.primaryColor||"#2563eb",border:"none"},children:[n.jsx(Er,{className:"w-5 h-5 mr-2"}),e("home.hero.cta.products")]})]})})}),n.jsx("section",{className:"py-20 px-4",children:n.jsxs("div",{className:"container mx-auto",children:[n.jsxs(le.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[n.jsx("h2",{className:"text-4xl font-bold mb-4",style:Ze(i),children:e("home.features.title")}),n.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e("home.features.subtitle")})]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:h.map((j,C)=>n.jsxs(le.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:C*.1},className:"glass-effect p-6 rounded-2xl hover-lift cursor-pointer group",onClick:j.action,children:[n.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",style:{background:i.useGradient?`linear-gradient(to right, ${i.primaryColor||"#2563eb"}, ${i.secondaryColor||"#9333ea"})`:i.primaryColor||"#2563eb"},children:n.jsx(j.icon,{className:"w-6 h-6 text-white"})}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:j.title}),n.jsx("p",{className:"text-gray-600",children:j.description})]},C))})]})}),n.jsx("section",{className:"py-20 px-4 bg-slate-100/50",children:n.jsxs("div",{className:"container mx-auto",children:[n.jsxs(le.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[n.jsx("h2",{className:"text-4xl font-bold mb-4",style:Ze(i),children:e("home.testimonials.title")}),n.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e("home.testimonials.subtitle")})]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.length>0?u.map(j=>n.jsxs(le.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.5},className:"glass-effect p-6 rounded-2xl",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("img",{className:"w-12 h-12 rounded-full mr-4 object-cover",alt:j.user_name||"User",src:j.user_avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(j.user_name||"U")}&background=random`}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:j.user_name}),n.jsxs("div",{className:"flex",children:[[...Array(j.rating)].map((C,_)=>n.jsx(Ja,{className:"w-4 h-4 text-yellow-400 fill-current"},_)),[...Array(5-j.rating)].map((C,_)=>n.jsx(Ja,{className:"w-4 h-4 text-gray-300"},_))]})]})]}),n.jsxs("p",{className:"text-gray-600 italic",children:['"',j.comment,'"']})]},j.id)):n.jsx("p",{className:"text-gray-500 col-span-full text-center",children:r==="es"?"Aún no hay testimonios disponibles":"No testimonials available yet"})})]})})]})},tm="product-images",Y4=async(t,e)=>{try{const r=t.name.split(".").pop(),i=`${e}.${r}`,{error:o}=await q.storage.from(tm).upload(i,t,{cacheControl:"3600",upsert:!0});if(o)throw o;const{data:{publicUrl:l}}=q.storage.from(tm).getPublicUrl(i);return{publicUrl:l}}catch(r){throw console.error("Error uploading image:",r),r}},Q4=async t=>{try{const{error:e}=await q.storage.from(tm).remove([t]);if(e)throw e}catch(e){throw console.error("Error deleting image:",e),e}},zw={product:{maxSizeMB:2,maxWidth:800,maxHeight:800,aspectRatio:1,quality:.85,formats:["image/jpeg","image/png","image/webp"]},combo:{maxSizeMB:2,maxWidth:800,maxHeight:800,aspectRatio:1,quality:.85,formats:["image/jpeg","image/png","image/webp"]},carousel:{maxSizeMB:3,maxWidth:1920,maxHeight:1080,aspectRatio:16/9,quality:.9,formats:["image/jpeg","image/png","image/webp"]},carouselMobile:{maxSizeMB:1.5,maxWidth:800,maxHeight:1200,aspectRatio:2/3,quality:.85,formats:["image/jpeg","image/png","image/webp"]},logo:{maxSizeMB:2,maxWidth:400,maxHeight:400,aspectRatio:1,quality:.95,formats:["image/png","image/svg+xml","image/webp"]},payment_proof:{maxSizeMB:5,maxWidth:2e3,maxHeight:2e3,aspectRatio:null,quality:.85,formats:["image/jpeg","image/png","image/webp"]}},qw=(t,e="product")=>{const r=zw[e],i=[];if(!t)return i.push("No se seleccionó ningún archivo"),{valid:!1,errors:i};r.formats.includes(t.type)||i.push(`Formato no válido. Use: ${r.formats.map(l=>l.split("/")[1]).join(", ")}`);const o=t.size/(1024*1024);return o>r.maxSizeMB&&i.push(`Tamaño muy grande (${o.toFixed(2)}MB). Máximo: ${r.maxSizeMB}MB`),{valid:i.length===0,errors:i,sizeMB:o.toFixed(2)}},J4=t=>new Promise((e,r)=>{const i=new FileReader;i.onload=o=>{const l=new Image;l.onload=()=>e(l),l.onerror=r,l.src=o.target.result},i.onerror=r,i.readAsDataURL(t)}),Ww=async(t,e="product")=>{const r=zw[e],i=qw(t,e);if(!i.valid)throw new Error(i.errors.join(`
`));try{if(t.type==="image/svg+xml"){const T=await new Promise((I,J)=>{const Q=new FileReader;Q.onloadend=()=>I(Q.result),Q.onerror=J,Q.readAsDataURL(t)}),L=t.size/(1024*1024);return{success:!0,base64:T,blob:t,metadata:{originalSize:L.toFixed(2)+"MB",finalSize:L.toFixed(2)+"MB",compression:"0%",originalDimensions:"Vector",finalDimensions:"Vector",format:"SVG",quality:"100%"}}}const o=await J4(t);let{width:l,height:c}=o;const u=l/c,m=r.aspectRatio;let h=l,p=c,g=0,x=0;m&&Math.abs(u-m)>.01&&(u>m?(h=c*m,g=(l-h)/2):(p=l/m,x=(c-p)/2));let b=h,j=p;if(b>r.maxWidth){const T=r.maxWidth/b;b=r.maxWidth,j=j*T}if(j>r.maxHeight){const T=r.maxHeight/j;j=r.maxHeight,b=b*T}const C=document.createElement("canvas");C.width=b,C.height=j;const _=C.getContext("2d");_.imageSmoothingEnabled=!0,_.imageSmoothingQuality="high",_.drawImage(o,g,x,h,p,0,0,b,j);const O=await new Promise(T=>{C.toBlob(T,"image/jpeg",r.quality)}),A=await new Promise(T=>{const L=new FileReader;L.onloadend=()=>T(L.result),L.readAsDataURL(O)}),E=t.size/(1024*1024),N=O.size/(1024*1024),D=((1-N/E)*100).toFixed(1);return{success:!0,base64:A,blob:O,metadata:{originalSize:E.toFixed(2)+"MB",finalSize:N.toFixed(2)+"MB",compression:D+"%",originalDimensions:`${o.width}x${o.height}`,finalDimensions:`${b}x${j}`,format:"JPEG",quality:r.quality*100+"%"}}}catch(o){throw console.error("Error processing image:",o),new Error("Error al procesar la imagen: "+o.message)}},po=async(t,e="product",r=null)=>{try{r&&r({stage:"validating",progress:10});const i=qw(t,e);if(!i.valid)return{success:!1,errors:i.errors};r&&r({stage:"processing",progress:50});const o=await Ww(t,e);return r&&r({stage:"complete",progress:100}),o}catch(i){return{success:!1,errors:[i.message]}}},X4=({onNavigate:t})=>{const{t:e,language:r}=kt(),{user:i,isAdmin:o}=Dt(),{products:l,combos:c,categories:u,addToCart:m,financialSettings:h,refreshProducts:p,visualSettings:g}=ar(),[x,b]=w.useState(""),[j,C]=w.useState("all"),[_,O]=w.useState([]),[A,E]=w.useState([]),[N,D]=w.useState(!1),[T,L]=w.useState(0),[I,J]=w.useState(null),[Q,we]=w.useState(null),[ie,be]=w.useState([]),[G,de]=w.useState(null),[U,ne]=w.useState({}),z=w.useRef(null),[ce,oe]=w.useState(!1),[k,$]=w.useState(!1),ee=w.useCallback(async(Y,Ie)=>{const _e=Y.target.files[0];if(_e)try{D(!0),L(0);const R=await po(_e,"product",ae=>L(ae.progress));if(!R.success){re({title:"Error de validación",description:R.errors.join(`
`),variant:"destructive"});return}we(R.base64);const pe=`product-${Ie}-${Date.now()}.jpg`,{publicUrl:se}=await Y4(R.blob,pe),{error:B}=await q.from("products").update({image_url:se}).eq("id",Ie);if(B)throw B;await p(),re({title:e("products.imageUploaded"),description:`${e("products.imageUploadedSuccess")} (${R.metadata.compression} compresión)`})}catch(R){console.error("Error uploading image:",R),re({title:e("products.imageUploadError"),description:R.message,variant:"destructive"})}finally{D(!1),L(0),we(null)}},[e,p]),ue=w.useCallback(async(Y,Ie)=>{if(Ie)try{const _e=Ie.split("/").pop();await Q4(_e);const{error:R}=await q.from("products").update({image_url:null}).eq("id",Y);if(R)throw R;await p(),re({title:e("products.imageDeleted"),description:e("products.imageDeletedSuccess")})}catch(_e){console.error("Error deleting image:",_e),re({title:e("products.imageDeleteError"),description:_e.message,variant:"destructive"})}},[e,p]);w.useEffect(()=>{(async()=>{try{const{data:Ie,error:_e}=await q.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(_e)throw _e;be(Ie||[]);const R=Ie?.find(ae=>ae.is_base);R&&de(R.id);const{data:pe,error:se}=await q.from("exchange_rates").select("*").eq("is_active",!0);if(se)throw se;const B={};(pe||[]).forEach(ae=>{B[`${ae.from_currency_id}-${ae.to_currency_id}`]=ae.rate}),ne(B)}catch(Ie){console.error("Error loading currencies:",Ie)}})()},[]),w.useEffect(()=>{let Y=l;o||(Y=Y.filter(_e=>(_e.stock!==void 0?_e.stock:0)>0)),x&&(Y=Y.filter(_e=>(_e.name_es||_e.name||"").toLowerCase().includes(x.toLowerCase())||(_e.name_en||"").toLowerCase().includes(x.toLowerCase()))),j!=="all"&&(Y=Y.filter(_e=>_e.category?.id===j||_e.category_id===j)),O(Y);let Ie=c||[];o||(Ie=Ie.filter(_e=>_e.is_active!==!1)),x&&(Ie=Ie.filter(_e=>_e.name.toLowerCase().includes(x.toLowerCase()))),E(Ie)},[l,c,x,j,o]);const xe=Y=>{m(Y),re({title:e("products.addedToCart"),description:`${Y.name_es||Y.name} ${e("products.addedToCartDesc")}`})},Ce=Y=>{if(z.current){const _e=Y==="left"?z.current.scrollLeft-400:z.current.scrollLeft+400;z.current.scrollTo({left:_e,behavior:"smooth"})}},fe=()=>{if(z.current){const{scrollLeft:Y,scrollWidth:Ie,clientWidth:_e}=z.current;oe(Y>0),$(Y<Ie-_e-10)}};w.useEffect(()=>{fe();const Y=z.current;if(Y)return Y.addEventListener("scroll",fe),()=>Y.removeEventListener("scroll",fe)},[A]);const Ee=(Y,Ie,_e)=>{if(!Y||!Ie||!_e||Ie===_e)return Y;const R=`${Ie}-${_e}`,pe=U[R];return pe?parseFloat(Y)*pe:Y},De=Y=>{if(!Y||!G)return"0.00";const Ie=parseFloat(Y.final_price||Y.base_price||0),_e=Y.base_currency_id;return _e?Ee(Ie,_e,G).toFixed(2):Ie.toFixed(2)},X=Y=>{if(!Y||!G)return"0.00";let Ie=0;(Y.products||[]).forEach(pe=>{const se=l.find(B=>B.id===pe);if(se){const B=parseFloat(se.base_price||0),ae=se.base_currency_id,Ae=Y.productQuantities?.[pe]||1;let te=B;ae&&ae!==G&&(te=Ee(B,ae,G)),Ie+=te*Ae}});const _e=parseFloat(Y.profitMargin||h.comboProfit)/100;return(Ie*(1+_e)).toFixed(2)};return n.jsx("div",{className:"min-h-screen py-8 px-4",children:n.jsxs("div",{className:"container mx-auto",children:[n.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[n.jsx("h1",{className:"text-4xl font-bold mb-4",style:Ze(g),children:e("products.title")}),n.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e("products.subtitle")})]}),n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect p-6 rounded-2xl mb-8",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Dc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:e("products.searchPlaceholder"),value:x,onChange:Y=>b(Y.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Dm,{className:"w-5 h-5 text-gray-400"}),n.jsxs("select",{value:j,onChange:Y=>C(Y.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:e("products.categories.all")}),u.map(Y=>n.jsx("option",{value:Y.id,children:r==="es"?Y.name_es:Y.name_en},Y.id))]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:r==="es"?"Moneda:":"Currency:"}),n.jsx("select",{value:G||"",onChange:Y=>de(Y.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:ie.map(Y=>n.jsxs("option",{value:Y.id,children:[Y.code," (",Y.symbol,")"]},Y.id))})]})]})}),A.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-4",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",style:Ze(g),children:"🎁 Combos Especiales"}),A.length>3&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ve,{variant:"outline",size:"sm",onClick:()=>Ce("left"),disabled:!ce,className:"rounded-full w-10 h-10 p-0",children:n.jsx(Rm,{className:"w-5 h-5"})}),n.jsx(ve,{variant:"outline",size:"sm",onClick:()=>Ce("right"),disabled:!k,className:"rounded-full w-10 h-10 p-0",children:n.jsx(Om,{className:"w-5 h-5"})})]})]})}),n.jsx("style",{children:`
              .combos-carousel::-webkit-scrollbar {
                display: none;
              }
            `}),n.jsx("div",{ref:z,className:"combos-carousel flex gap-6 mb-12 overflow-x-auto pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:A.map((Y,Ie)=>{const R=(()=>{let se=0;(Y.products||[]).forEach(te=>{const je=l.find(Le=>Le.id===te);if(je){const Le=parseFloat(je.base_price||0),tt=Ee(Le,je.base_currency_id,G),wt=Y.productQuantities?.[te]||1,mt=parseFloat(h.productProfit||40)/100,$t=tt*(1+mt);se+=$t*wt}});const B=parseFloat(X(Y)),ae=se-B,Ae=se>0?(ae/se*100).toFixed(0):0;return{savings:ae.toFixed(2),percent:Ae}})(),pe=ie.find(se=>se.id===G)?.symbol||"$";return n.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:Ie*.1},className:"glass-effect rounded-2xl overflow-hidden hover-lift group border-2 border-purple-200 cursor-pointer flex-shrink-0",style:{width:"300px"},onClick:()=>t("product-detail",{itemId:Y.id,itemType:"combo"}),children:[n.jsxs("div",{className:"aspect-square bg-gradient-to-br from-purple-100 to-pink-100 relative",children:[Y.image?n.jsx("img",{src:Y.image,alt:Y.name,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:n.jsx(pr,{className:"w-20 h-20 text-purple-300"})}),R.savings>0&&n.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-2 rounded-lg shadow-lg animate-pulse",children:n.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[n.jsx("span",{className:"text-[10px] opacity-90",children:r==="es"?"AHORRA":"SAVE"}),n.jsxs("span",{className:"text-sm",children:[pe,R.savings]}),n.jsxs("span",{className:"text-[10px] bg-white bg-opacity-20 px-2 rounded-full mt-0.5",children:["-",R.percent,"%"]})]})}),n.jsx("div",{className:"absolute top-2 right-2 bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"COMBO"})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"font-bold text-lg mb-2",children:Y.name}),n.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[Y.products?.length||0," productos incluidos"]}),n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[ie.find(se=>se.id===G)?.symbol||"$",X(Y)]}),n.jsx("p",{className:"text-xs text-gray-500",children:ie.find(se=>se.id===G)?.code||"USD"})]})}),n.jsxs(ve,{onClick:se=>{se.stopPropagation(),xe({...Y,type:"combo"})},className:"w-full",style:{background:g.useGradient?`linear-gradient(to right, ${g.primaryColor||"#2563eb"}, ${g.secondaryColor||"#9333ea"})`:g.buttonBgColor||"#2563eb",color:g.buttonTextColor||"#ffffff",border:"none"},children:[n.jsx(oo,{className:"w-4 h-4 mr-2"}),e("products.addToCart")]})]})]},`combo-${Y.id}`)})})]}),_.length>0&&n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-4",children:n.jsx("h2",{className:"text-2xl font-bold mb-4",style:Ze(g),children:"📦 Productos"})}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:_.map((Y,Ie)=>n.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:Ie*.1},className:"glass-effect rounded-2xl overflow-hidden hover-lift group cursor-pointer",onClick:()=>t("product-detail",{itemId:Y.id,itemType:"product"}),children:[n.jsxs("div",{className:"aspect-square bg-gray-100 relative group",children:[Q&&I===Y.id?n.jsx("img",{className:"w-full h-full object-cover",alt:e("products.preview"),src:Q}):n.jsx("img",{className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",alt:Y.name_es||Y.name,src:Y.image_url||"https://images.unsplash.com/photo-1646193186132-7976c1670e81"}),o&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center z-10",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("label",{className:"cursor-pointer",children:[n.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:_e=>{_e.stopPropagation(),J(Y.id),ee(_e,Y.id)}}),n.jsx(ve,{variant:"secondary",size:"sm",className:"bg-white hover:bg-gray-100",onClick:_e=>_e.stopPropagation(),children:n.jsx(co,{className:"w-4 h-4"})})]}),Y.image_url&&n.jsx(ve,{variant:"destructive",size:"sm",onClick:_e=>{_e.stopPropagation(),ue(Y.id,Y.image_url)},children:n.jsx(ir,{className:"w-4 h-4"})})]})}),N&&I===Y.id&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10",children:n.jsx("div",{className:"w-full max-w-[80%] bg-white rounded-lg p-4",children:n.jsx("div",{className:"h-2 bg-gray-200 rounded",children:n.jsx("div",{className:"h-full rounded transition-all duration-300",style:{width:`${T}%`,background:g.useGradient?`linear-gradient(to right, ${g.primaryColor}, ${g.secondaryColor})`:g.primaryColor}})})})})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:Y.name_es||Y.name}),Y.category&&n.jsx("p",{className:"text-sm text-gray-500 mb-2",children:r==="es"?Y.category.name_es:Y.category.name_en}),n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"text-xl font-bold text-green-600",children:[ie.find(_e=>_e.id===G)?.symbol||"$",De(Y)]}),n.jsx("p",{className:"text-xs text-gray-500",children:ie.find(_e=>_e.id===G)?.code||"USD"})]})}),n.jsxs(ve,{onClick:_e=>{_e.stopPropagation(),xe(Y)},className:"w-full",style:{background:g.useGradient?`linear-gradient(to right, ${g.primaryColor||"#2563eb"}, ${g.secondaryColor||"#9333ea"})`:g.buttonBgColor||"#2563eb",color:g.buttonTextColor||"#ffffff",border:"none"},children:[n.jsx(oo,{className:"w-4 h-4 mr-2"}),e("products.addToCart")]})]})]},Y.id))}),_.length===0&&n.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[n.jsx(pr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:e("products.noProducts")}),n.jsx("p",{className:"text-gray-500",children:e("products.noProductsDesc")})]})]})})},Z4=({product:t,selectedCurrency:e,currencySymbol:r,currencyCode:i,convertPrice:o,quantity:l=1})=>{const[c,u]=w.useState(!1),{language:m}=kt(),{visualSettings:h}=ar(),p=()=>{const x=parseFloat(t.final_price||t.base_price||0),b=t.base_currency_id;return!b||b===e?x.toFixed(2):o(x,b,e).toFixed(2)},g=()=>(parseFloat(p())*l).toFixed(2);return n.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-gray-200 last:border-0",children:[n.jsx(le.div,{className:"flex-shrink-0 cursor-pointer relative",onClick:()=>u(!c),whileHover:{scale:1.05},whileTap:{scale:.95},children:n.jsx(le.div,{animate:{width:c?"120px":"60px",height:c?"120px":"60px"},transition:{duration:.3,ease:"easeInOut"},className:"rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:n.jsx("img",{src:t.image_url||"https://images.unsplash.com/photo-1646193186132-7976c1670e81",alt:t.name_es||t.name,className:"w-full h-full object-cover"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800",children:t.name_es||t.name}),t.category&&n.jsx("p",{className:"text-xs text-gray-500",children:m==="es"?t.category.name_es:t.category.name_en}),n.jsx("p",{className:"text-sm font-semibold",style:Ze(h),children:m==="es"?`Cantidad: ${l}`:`Quantity: ${l}`})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[r,p()," ",m==="es"?"c/u":"each"]}),n.jsxs("p",{className:"font-semibold text-gray-800",children:["Total:"," ",r,g()]}),n.jsx("p",{className:"text-xs text-gray-500",children:i})]})]})},eO=({onNavigate:t,itemId:e,itemType:r})=>{const{t:i,language:o}=kt(),{products:l,combos:c,categories:u,addToCart:m,financialSettings:h,visualSettings:p}=ar(),{isAdmin:g}=Dt(),[x,b]=w.useState(null),[j,C]=w.useState(0),[_,O]=w.useState([]),[A,E]=w.useState(!1),[N,D]=w.useState([]),[T,L]=w.useState(null),[I,J]=w.useState({});w.useEffect(()=>{(async()=>{try{const{data:$,error:ee}=await q.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(ee)throw ee;D($||[]);const ue=$?.find(Ee=>Ee.is_base);ue&&L(ue.id);const{data:xe,error:Ce}=await q.from("exchange_rates").select("*").eq("is_active",!0);if(Ce)throw Ce;const fe={};(xe||[]).forEach(Ee=>{fe[`${Ee.from_currency_id}-${Ee.to_currency_id}`]=Ee.rate}),J(fe)}catch($){console.error("Error loading currencies:",$)}})()},[]),w.useEffect(()=>{const k=r==="combo"?c:l;O(k);const $=k.findIndex(ee=>ee.id===e);$!==-1&&(C($),b(k[$]))},[e,r,l,c]);const Q=(k,$,ee)=>{if(!k||!$||!ee||$===ee)return k;const ue=`${$}-${ee}`,xe=I[ue];return xe?parseFloat(k)*xe:k},we=(k,$)=>{if(!k||!T)return"0.00";if($){const ee=parseFloat(k.final_price||k.base_price||0),ue=k.base_currency_id;return ue?Q(ee,ue,T).toFixed(2):ee.toFixed(2)}else{let ee=0;(k.products||[]).forEach(xe=>{const Ce=l.find(fe=>fe.id===xe);if(Ce){const fe=parseFloat(Ce.base_price||0),Ee=Ce.base_currency_id,De=k.productQuantities?.[xe]||1;let X=fe;Ee&&Ee!==T&&(X=Q(fe,Ee,T)),ee+=X*De}});const ue=parseFloat(k.profitMargin||h.comboProfit)/100;return(ee*(1+ue)).toFixed(2)}},ie=()=>{if(j>0){const k=_[j-1];C(j-1),b(k),E(!1)}else E(!0)},be=()=>{if(j<_.length-1){const k=_[j+1];C(j+1),b(k),E(!1)}else E(!0)},G=()=>{const k=!x?.products;if(k&&j===_.length-1){if(c.length>0){const $=c[0];O(c),C(0),b($),E(!1)}}else if(k&&j===0){if(c.length>0){const $=c[c.length-1];O(c),C(c.length-1),b($),E(!1)}}else if(!k&&j===_.length-1){if(l.length>0){const $=l[0];O(l),C(0),b($),E(!1)}}else if(!k&&j===0&&l.length>0){const $=l[l.length-1];O(l),C(l.length-1),b($),E(!1)}},de=()=>{const k=parseFloat(we(x,ne)),$=N.find(ue=>ue.id===T),ee={...x,displayed_price:k,displayed_currency_code:$?.code||"USD",displayed_currency_id:T};m(ee),re({title:i("products.addedToCart"),description:`${x.name_es||x.name} ${i("products.addedToCartDesc")}`})},U=k=>{const $=u.find(ee=>ee.id===k);return $?o==="es"?$.name_es||$.es:$.name_en||$.en:""};if(!x)return n.jsx("div",{className:"min-h-screen py-8 px-4 flex items-center justify-center",children:n.jsx("p",{className:"text-gray-500",children:i("products.noProducts")})});const ne=!x.products,z=we(x,ne),ce=N.find(k=>k.id===T)?.symbol||"$",oe=N.find(k=>k.id===T)?.code||"USD";return n.jsx("div",{className:"min-h-screen py-8 px-4",children:n.jsxs("div",{className:"container mx-auto max-w-6xl",children:[n.jsx(le.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:()=>t("products"),className:"mb-6 flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:i(ne?"products.detail.backToProducts":"products.detail.backToCombos")}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[n.jsxs(le.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"relative",children:[n.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-gray-100 relative",children:[x.image_url||x.image?n.jsx("img",{src:x.image_url||x.image,alt:x.name_es||x.name,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:n.jsx(pr,{className:"w-24 h-24 text-gray-300"})}),!ne&&n.jsx("div",{className:"absolute top-4 right-4 bg-purple-600 text-white text-sm font-bold px-4 py-2 rounded-full",children:"COMBO"})]}),n.jsxs("div",{className:"flex items-center justify-between mt-6",children:[n.jsxs(ve,{onClick:ie,variant:"outline",size:"lg",disabled:j===0&&r==="combo"&&l.length===0,className:"flex items-center gap-2",children:[n.jsx(Rm,{className:"w-5 h-5"}),i("products.detail.previous")]}),n.jsxs(ve,{onClick:be,variant:"outline",size:"lg",disabled:j===_.length-1&&r==="combo"&&l.length===0,className:"flex items-center gap-2",children:[i("products.detail.next"),n.jsx(Om,{className:"w-5 h-5"})]})]}),A&&(()=>{const k=!x?.products;return n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4",children:n.jsxs(ve,{onClick:G,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",size:"lg",children:[k&&(j===_.length-1||j===0)&&i("products.detail.continueToCombos"),!k&&(j===_.length-1||j===0)&&i("products.detail.continueToProducts"),n.jsx(io,{className:"w-5 h-5 ml-2"})]})})})()]}),n.jsxs(le.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",style:Ze(p),children:x.name_es||x.name}),ne&&(x.category_id||x.category)&&n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-4",children:[n.jsx(EP,{className:"w-4 h-4"}),n.jsx("span",{children:U(x.category_id||x.category)})]})]}),n.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-sm text-gray-600",children:o==="es"?"Mostrar en:":"Display in:"}),n.jsx("select",{value:T||"",onChange:k=>L(k.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:N.map(k=>n.jsxs("option",{value:k.id,children:[k.code," (",k.symbol,")"]},k.id))})]}),n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsxs("span",{className:"text-4xl font-bold",style:Ze(p),children:[ce,z]}),n.jsx("span",{className:"text-gray-500",children:oe})]})]}),(x.description_es||x.description_en||x.description)&&n.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[n.jsx("h3",{className:"font-semibold text-lg mb-2",children:i("products.detail.description")}),n.jsx("p",{className:"text-gray-600",children:o==="es"?x.description_es||x.description:x.description_en||x.description})]}),ne&&n.jsxs("div",{className:"space-y-4",children:[x.stock!==void 0&&n.jsxs("div",{className:"flex items-center justify-between glass-effect p-4 rounded-xl",children:[n.jsxs("span",{className:"text-gray-600",children:[i("products.detail.stock"),":"]}),n.jsx("span",{className:`font-semibold ${x.stock>0?"text-green-600":"text-red-600"}`,children:x.stock>0?`${x.stock} ${i("products.detail.units")}`:i("products.detail.outOfStock")})]}),x.expiryDate&&n.jsxs("div",{className:"flex items-center justify-between glass-effect p-4 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(Calendar,{className:"w-4 h-4"}),n.jsxs("span",{children:[i("products.detail.expiryDate"),":"]})]}),n.jsx("span",{className:"font-semibold",children:x.expiryDate})]})]}),!ne&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"glass-effect p-6 rounded-xl bg-gradient-to-r from-purple-50 to-pink-50",children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",style:Ze(p),children:o==="es"?"💰 ¡Ahorra con este combo!":"💰 Save with this combo!"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-white bg-opacity-50 p-3 rounded-lg space-y-1",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:o==="es"?"Comprando por separado:":"Buying separately:"}),(x.products||[]).map(k=>{const $=l.find(De=>De.id===k);if(!$)return null;const ee=parseFloat($.base_price||0),ue=Q(ee,$.base_currency_id,T),xe=x.productQuantities?.[k]||1,Ce=parseFloat(h.productProfit||40)/100,Ee=ue*(1+Ce)*xe;return n.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[n.jsxs("span",{children:[$.name_es||$.name," × ",xe]}),n.jsxs("span",{children:[ce,Ee.toFixed(2)]})]},k)}),n.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-300",children:[n.jsx("span",{className:"font-semibold text-gray-700",children:"Total:"}),n.jsxs("span",{className:"text-lg font-semibold line-through text-gray-500",children:[ce,(()=>{let k=0;return(x.products||[]).forEach($=>{const ee=l.find(ue=>ue.id===$);if(ee){const ue=parseFloat(ee.base_price||0),xe=Q(ue,ee.base_currency_id,T),Ce=x.productQuantities?.[$]||1,fe=parseFloat(h.productProfit||40)/100,Ee=xe*(1+fe);k+=Ee*Ce}}),k.toFixed(2)})()]})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-purple-200",children:[n.jsx("span",{className:"text-lg font-bold",style:Ze(p),children:o==="es"?"Precio del combo:":"Combo price:"}),n.jsxs("span",{className:"text-2xl font-bold",style:Ze(p),children:[ce,z]})]}),n.jsx("div",{className:"text-center pt-2",children:n.jsxs("span",{className:"inline-block bg-green-100 px-4 py-2 rounded-full text-sm font-semibold",style:Ze(p),children:[o==="es"?"¡Ahorras ":"You save ",ce,(()=>{let k=0;return(x.products||[]).forEach(ee=>{const ue=l.find(xe=>xe.id===ee);if(ue){const xe=parseFloat(ue.base_price||0),Ce=Q(xe,ue.base_currency_id,T),fe=x.productQuantities?.[ee]||1,Ee=parseFloat(h.productProfit||40)/100,De=Ce*(1+Ee);k+=De*fe}}),(k-parseFloat(z)).toFixed(2)})(),"!"]})})]})]}),n.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:i("products.detail.includedProducts")}),n.jsx("div",{className:"space-y-3",children:x.products?.map(k=>{const $=l.find(ue=>ue.id===k),ee=x.productQuantities?.[k]||1;return $?n.jsx(Z4,{product:$,selectedCurrency:T,currencySymbol:ce,currencyCode:oe,convertPrice:Q,quantity:ee},k):null})})]}),g&&x.profitMargin&&n.jsxs("div",{className:"flex items-center justify-between glass-effect p-4 rounded-xl border-2 border-purple-200",children:[n.jsxs("span",{className:"text-gray-600",children:[i("products.detail.profitMargin"),":"]}),n.jsxs("span",{className:"font-semibold text-purple-600",children:[x.profitMargin,"%"]})]})]}),n.jsxs(ve,{onClick:de,size:"lg",className:"w-full text-lg py-6",style:Je(p),children:[n.jsx(oo,{className:"w-5 h-5 mr-2"}),i("products.addToCart")]})]})]})]})})},tO=({onNavigate:t})=>{const{t:e}=kt(),{user:r}=Dt(),i=[{icon:Xa,title:"Tasas Competitivas",description:"Las mejores tasas de cambio del mercado"},{icon:bs,title:"Entrega Rápida",description:"Entrega en 24-72 horas"},{icon:Qt,title:"Seguro y Confiable",description:"Tus remesas están protegidas"}];return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-16",children:[n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[n.jsx("h1",{className:`${Ze()} text-4xl md:text-5xl mb-4`,children:e("remittances.title")}),n.jsx("p",{className:"text-xl text-gray-600 mb-8",children:e("remittances.subtitle")}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[n.jsxs("button",{onClick:()=>t(r?"send-remittance":"login"),className:`${Je()} flex items-center justify-center gap-2 px-8 py-4 text-lg`,children:[n.jsx(wb,{className:"h-6 w-6"}),e("remittances.send")]}),r&&n.jsxs("button",{onClick:()=>t("my-remittances"),className:"flex items-center justify-center gap-2 px-8 py-4 text-lg border-2 border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors font-semibold",children:[n.jsx(Cs,{className:"h-6 w-6"}),e("remittances.myRemittances")]})]})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:i.map((o,l)=>n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"glass-effect p-6 rounded-xl text-center hover:shadow-lg transition-shadow",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:n.jsx(o.icon,{className:"h-8 w-8 text-blue-600"})}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:o.title}),n.jsx("p",{className:"text-gray-600",children:o.description})]},l))}),n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-effect p-8 rounded-xl",children:[n.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:e("remittances.howItWorks")}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{step:"1",...e("remittances.step1")},{step:"2",...e("remittances.step2")},{step:"3",...e("remittances.step3")}].map((o,l)=>n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-600 text-white rounded-full font-bold text-xl",children:o.step}),l<2&&n.jsx(io,{className:"h-6 w-6 text-blue-400 mx-4 hidden md:block"})]}),n.jsx("h3",{className:"text-lg font-bold mb-2",children:o.title}),n.jsx("p",{className:"text-gray-600",children:o.description})]},l))})]}),!r&&n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-center mt-12",children:[n.jsx("p",{className:"text-gray-600 mb-4",children:"¿Listo para enviar tu primera remesa?"}),n.jsxs("button",{onClick:()=>t("login"),className:`${Je()} inline-flex items-center gap-2`,children:["Iniciar Sesión",n.jsx(io,{className:"h-5 w-5"})]})]})]})})},rO=()=>({adminPhone:"+53XXXXXXXXX",supportPhone:"+53XXXXXXXXX",businessName:"PapuEnvíos"}),sO=t=>{if(!t)return"";let e=t.replace(/\D/g,"");return e.startsWith("1")?e=e.substring(1):e.startsWith("53")||e.startsWith("0")&&(e=e.substring(1)),e},Ui=(t,e="")=>{const r=sO(t),i=encodeURIComponent(e);return`https://wa.me/${r}?text=${i}`},nO=(t,e,r="es")=>{if(!e){console.error("Admin WhatsApp number not configured"),alert("Número de WhatsApp del administrador no configurado. Contacte al soporte.");return}const i=t.order_items?.map((c,u)=>`${u+1}. ${c.item_name_es||c.item_name_en} (x${c.quantity})`).join(`
   `)||"Sin items",o={es:`🆕 *Nueva Orden Registrada*

📋 *Orden:* ${t.order_number}
👤 *Cliente:* ${t.user_name||t.user_profile?.full_name||"N/A"}
📧 *Email:* ${t.user_email||t.user_profile?.email||"N/A"}

📦 *Items:*
   ${i}

💰 *Total:* ${t.total_amount} ${t.currency?.code||t.currencies?.code||"USD"}
💳 *Método de Pago:* ${t.payment_method||"N/A"}
📍 *Provincia:* ${t.shipping_zone?.province_name||t.shipping_address||"N/A"}

🔗 *Ver en sistema:*
${window.location.origin}/dashboard?tab=orders

_Mensaje desde PapuEnvíos_`,en:`🆕 *New Order Registered*

📋 *Order:* ${t.order_number}
👤 *Customer:* ${t.user_name||t.user_profile?.full_name||"N/A"}
📧 *Email:* ${t.user_email||t.user_profile?.email||"N/A"}

📦 *Items:*
   ${i}

💰 *Total:* ${t.total_amount} ${t.currency?.code||t.currencies?.code||"USD"}
💳 *Payment Method:* ${t.payment_method||"N/A"}
📍 *Province:* ${t.shipping_zone?.province_name||t.shipping_address||"N/A"}

🔗 *View in system:*
${window.location.origin}/dashboard?tab=orders

_Message from PapuEnvíos_`},l=Ui(e,o[r]||o.es);window.open(l,"_blank")},iO=(t,e,r="es")=>{if(!e){console.error("Admin WhatsApp number not configured"),alert("Número de WhatsApp del administrador no configurado. Contacte al soporte.");return}const i=rO(),o=t.remittance_types||t.remittance_type,l={es:`💸 *Nuevo Comprobante de Remesa - ${i.businessName}*

📋 *Remesa:* ${t.remittance_number}
💰 *Monto:* ${t.amount} ${t.currency}
🔄 *Tipo:* ${o?.name||"N/A"}
💵 *A entregar:* ${t.amount_to_deliver?.toFixed(2)} ${t.delivery_currency}

👤 *Destinatario:*
   Nombre: ${t.recipient_name}
   Teléfono: ${t.recipient_phone}
   Ciudad: ${t.recipient_city||"N/A"}

📝 *Referencia:* ${t.payment_reference||"N/A"}
📎 *Comprobante:* ${t.payment_proof_url?"Adjunto":"No disponible"}

🔗 *Ver en sistema:*
${window.location.origin}/dashboard?tab=remittances

_Mensaje desde PapuEnvíos_`,en:`💸 *New Remittance Payment Proof - ${i.businessName}*

📋 *Remittance:* ${t.remittance_number}
💰 *Amount:* ${t.amount} ${t.currency}
🔄 *Type:* ${o?.name||"N/A"}
💵 *To deliver:* ${t.amount_to_deliver?.toFixed(2)} ${t.delivery_currency}

👤 *Recipient:*
   Name: ${t.recipient_name}
   Phone: ${t.recipient_phone}
   City: ${t.recipient_city||"N/A"}

📝 *Reference:* ${t.payment_reference||"N/A"}
📎 *Proof:* ${t.payment_proof_url?"Attached":"Not available"}

🔗 *View in system:*
${window.location.origin}/dashboard?tab=remittances

_Message from PapuEnvíos_`},c=Ui(e,l[r]||l.es);window.open(c,"_blank")},Se={PAYMENT_PENDING:"payment_pending",PAYMENT_PROOF_UPLOADED:"payment_proof_uploaded",PAYMENT_VALIDATED:"payment_validated",PAYMENT_REJECTED:"payment_rejected",PROCESSING:"processing",DELIVERED:"delivered",COMPLETED:"completed",CANCELLED:"cancelled"},Va={CASH:"cash",TRANSFER:"transfer",CARD:"card"},aO=async()=>{try{const{data:t,error:e}=await q.from("remittance_types").select("*").order("display_order",{ascending:!0});if(e)throw e;return{success:!0,types:t||[]}}catch(t){return console.error("Error fetching remittance types:",t),{success:!1,types:[],error:t.message}}},oO=async()=>{try{const{data:t,error:e}=await q.from("remittance_types").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(e)throw e;return{success:!0,types:t||[]}}catch(t){return console.error("Error fetching active remittance types:",t),{success:!1,types:[],error:t.message}}},lO=async t=>{try{if(!t.name||!t.currency_code||!t.delivery_currency)throw new Error("Nombre y monedas son requeridos");if(!t.exchange_rate||t.exchange_rate<=0)throw new Error("Tasa de cambio debe ser mayor a 0");if(!t.min_amount||t.min_amount<=0)throw new Error("Monto mínimo debe ser mayor a 0");if(t.max_amount&&t.max_amount<t.min_amount)throw new Error("Monto máximo debe ser mayor al mínimo");const{data:e,error:r}=await q.from("remittance_types").insert([t]).select().single();if(r)throw r;return{success:!0,type:e}}catch(e){return console.error("Error creating remittance type:",e),{success:!1,error:e.message}}},Zx=async(t,e)=>{try{if(e.exchange_rate&&e.exchange_rate<=0)throw new Error("Tasa de cambio debe ser mayor a 0");if(e.min_amount&&e.min_amount<=0)throw new Error("Monto mínimo debe ser mayor a 0");if(e.max_amount&&e.min_amount&&e.max_amount<e.min_amount)throw new Error("Monto máximo debe ser mayor al mínimo");const{data:r,error:i}=await q.from("remittance_types").update(e).eq("id",t).select().single();if(i)throw i;return{success:!0,type:r}}catch(r){return console.error("Error updating remittance type:",r),{success:!1,error:r.message}}},cO=async t=>{try{const{data:e,error:r}=await q.from("remittances").select("id").eq("remittance_type_id",t).limit(1);if(r)throw r;if(e&&e.length>0)throw new Error("No se puede eliminar. Existen remesas asociadas a este tipo.");const{error:i}=await q.from("remittance_types").delete().eq("id",t);if(i)throw i;return{success:!0}}catch(e){return console.error("Error deleting remittance type:",e),{success:!1,error:e.message}}},Hw=async(t,e)=>{try{const{data:r,error:i}=await q.from("remittance_types").select("*").eq("id",t).eq("is_active",!0).single();if(i)throw i;if(!r)throw new Error("Tipo de remesa no encontrado");if(e<r.min_amount)throw new Error(`Monto mínimo: ${r.min_amount} ${r.currency_code}`);if(r.max_amount&&e>r.max_amount)throw new Error(`Monto máximo: ${r.max_amount} ${r.currency_code}`);const o=e*(r.commission_percentage||0)/100,l=r.commission_fixed||0,c=o+l,u=e*r.exchange_rate-c*r.exchange_rate;return{success:!0,calculation:{amount:e,exchangeRate:r.exchange_rate,commissionPercentage:r.commission_percentage||0,commissionFixed:r.commission_fixed||0,totalCommission:c,amountToDeliver:u,currency:r.currency_code,deliveryCurrency:r.delivery_currency,deliveryMethod:r.delivery_method}}}catch(r){return console.error("Error calculating remittance:",r),{success:!1,error:r.message}}},dO=async t=>{try{const{remittance_type_id:e,amount:r,recipient_name:i,recipient_phone:o,recipient_address:l,recipient_city:c,recipient_id_number:u,notes:m}=t;if(!e||!r||!i||!o)throw new Error("Datos incompletos. Verifique tipo, monto, nombre y teléfono del destinatario.");const{data:h,error:p}=await q.from("remittance_types").select("*").eq("id",e).eq("is_active",!0).single();if(p)throw p;if(!h)throw new Error("Tipo de remesa no válido o inactivo");if(r<h.min_amount)throw new Error(`Monto mínimo: ${h.min_amount} ${h.currency_code}`);if(h.max_amount&&r>h.max_amount)throw new Error(`Monto máximo: ${h.max_amount} ${h.currency_code}`);const g=await Hw(e,r);if(!g.success)throw new Error(g.error);const{data:{user:x},error:b}=await q.auth.getUser();if(b)throw b;if(!x)throw new Error("Usuario no autenticado");const{data:j,error:C}=await q.from("remittances").insert([{user_id:x.id,remittance_type_id:e,amount:r,exchange_rate:h.exchange_rate,commission:g.calculation.totalCommission,amount_to_deliver:g.calculation.amountToDeliver,currency:h.currency_code,delivery_currency:h.delivery_currency,delivery_method:h.delivery_method,recipient_name:i,recipient_phone:o,recipient_address:l,recipient_city:c,recipient_id_number:u,notes:m,status:Se.PAYMENT_PENDING,max_delivery_date:new Date(Date.now()+h.max_delivery_days*24*60*60*1e3).toISOString()}]).select().single();if(C)throw C;return{success:!0,remittance:j}}catch(e){return console.error("Error creating remittance:",e),{success:!1,error:e.message}}},Gw=async(t,e,r,i="")=>{try{if(!e)throw new Error("Archivo de comprobante es requerido");if(!r)throw new Error("Referencia de pago es requerida");const{data:o,error:l}=await q.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(l)throw l;if(!o)throw new Error("Remesa no encontrada");if(o.status!==Se.PAYMENT_PENDING)throw new Error('Solo se puede subir comprobante en estado "Pendiente de Pago"');const{data:{user:c},error:u}=await q.auth.getUser();if(u)throw u;if(o.user_id!==c.id)throw new Error("No tiene permisos para modificar esta remesa");const m=e.name.split(".").pop(),h=`${o.remittance_number}.${m}`,p=`${c.id}/${h}`,{data:g,error:x}=await q.storage.from("remittance-proofs").upload(p,e,{upsert:!0});if(x)throw x;const{data:{publicUrl:b}}=q.storage.from("remittance-proofs").getPublicUrl(p),{data:j,error:C}=await q.from("remittances").update({payment_proof_url:b,payment_reference:r,payment_proof_notes:i,payment_proof_uploaded_at:new Date().toISOString(),status:Se.PAYMENT_PROOF_UPLOADED}).eq("id",t).select("*, remittance_types(*)").single();if(C)throw C;try{const{data:_}=await q.from("system_settings").select("value").eq("key","whatsapp_admin_phone").single();_?.value&&iO(j,_.value,"es")}catch(_){console.error("Error sending WhatsApp notification:",_)}return{success:!0,remittance:j}}catch(o){return console.error("Error uploading payment proof:",o),{success:!1,error:o.message}}},uO=async(t={})=>{try{const{data:{user:e},error:r}=await q.auth.getUser();if(r)throw r;if(!e)throw new Error("Usuario no autenticado");let i=q.from("remittances").select("*, remittance_types(*)").eq("user_id",e.id);t.status&&(i=i.eq("status",t.status)),t.startDate&&(i=i.gte("created_at",t.startDate)),t.endDate&&(i=i.lte("created_at",t.endDate)),i=i.order("created_at",{ascending:!1});const{data:o,error:l}=await i;if(l)throw l;return{success:!0,remittances:o||[]}}catch(e){return console.error("Error fetching my remittances:",e),{success:!1,remittances:[],error:e.message}}},fO=async t=>{try{const{data:e,error:r}=await q.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(r)throw r;if(!e)throw new Error("Remesa no encontrada");const{data:i,error:o}=await q.from("remittance_status_history").select("*").eq("remittance_id",t).order("changed_at",{ascending:!0});return o&&console.error("Error fetching history:",o),{success:!0,remittance:{...e,history:i||[]}}}catch(e){return console.error("Error fetching remittance details:",e),{success:!1,error:e.message}}},mO=async(t,e="")=>{try{const{data:r,error:i}=await q.from("remittances").select("*").eq("id",t).single();if(i)throw i;if(!r)throw new Error("Remesa no encontrada");if([Se.DELIVERED,Se.COMPLETED,Se.CANCELLED].includes(r.status))throw new Error("No se puede cancelar una remesa en este estado");const{data:{user:o},error:l}=await q.auth.getUser();if(l)throw l;if(r.user_id!==o.id)throw new Error("No tiene permisos para cancelar esta remesa");const{data:c,error:u}=await q.from("remittances").update({status:Se.CANCELLED,cancelled_at:new Date().toISOString(),cancellation_reason:e}).eq("id",t).select("*, remittance_types(*)").single();if(u)throw u;return{success:!0,remittance:c}}catch(r){return console.error("Error cancelling remittance:",r),{success:!1,error:r.message}}},hO=async(t={})=>{try{let e=q.from("remittances").select("*, remittance_types(*), user_profiles!remittances_user_id_fkey(*)");t.status&&(e=e.eq("status",t.status)),t.startDate&&(e=e.gte("created_at",t.startDate)),t.endDate&&(e=e.lte("created_at",t.endDate)),t.search&&(e=e.or(`remittance_number.ilike.%${t.search}%,recipient_name.ilike.%${t.search}%,recipient_phone.ilike.%${t.search}%`));const r=t.orderBy||"created_at",i=t.ascending!==void 0?t.ascending:!1;e=e.order(r,{ascending:i});const{data:o,error:l}=await e;if(l)throw l;return{success:!0,remittances:o||[]}}catch(e){return console.error("Error fetching all remittances:",e),{success:!1,remittances:[],error:e.message}}},pO=async(t,e="")=>{try{const{data:r,error:i}=await q.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(i)throw i;if(!r)throw new Error("Remesa no encontrada");if(r.status!==Se.PAYMENT_PROOF_UPLOADED)throw new Error("Solo se puede validar pago cuando hay comprobante subido");const{data:o,error:l}=await q.from("remittances").update({status:Se.PAYMENT_VALIDATED,payment_validated_at:new Date().toISOString(),payment_validation_notes:e}).eq("id",t).select("*, remittance_types(*)").single();if(l)throw l;return{success:!0,remittance:o}}catch(r){return console.error("Error validating payment:",r),{success:!1,error:r.message}}},gO=async(t,e)=>{try{if(!e)throw new Error("Debe proporcionar una razón para el rechazo");const{data:r,error:i}=await q.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(i)throw i;if(!r)throw new Error("Remesa no encontrada");if(r.status!==Se.PAYMENT_PROOF_UPLOADED)throw new Error("Solo se puede rechazar pago cuando hay comprobante subido");const{data:o,error:l}=await q.from("remittances").update({status:Se.PAYMENT_REJECTED,payment_rejected_at:new Date().toISOString(),payment_rejection_reason:e}).eq("id",t).select("*, remittance_types(*)").single();if(l)throw l;return{success:!0,remittance:o}}catch(r){return console.error("Error rejecting payment:",r),{success:!1,error:r.message}}},yO=async(t,e="")=>{try{const{data:r,error:i}=await q.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(i)throw i;if(!r)throw new Error("Remesa no encontrada");if(r.status!==Se.PAYMENT_VALIDATED)throw new Error("Solo se puede procesar remesa con pago validado");const{data:o,error:l}=await q.from("remittances").update({status:Se.PROCESSING,processing_started_at:new Date().toISOString(),processing_notes:e}).eq("id",t).select("*, remittance_types(*)").single();if(l)throw l;return{success:!0,remittance:o}}catch(r){return console.error("Error starting processing:",r),{success:!1,error:r.message}}},xO=async(t,e=null,r="")=>{try{const{data:i,error:o}=await q.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(o)throw o;if(!i)throw new Error("Remesa no encontrada");if(i.status!==Se.PROCESSING)throw new Error("Solo se puede confirmar entrega de remesa en procesamiento");let l=null;if(e){const{data:{user:m},error:h}=await q.auth.getUser();if(h)throw h;const p=e.name.split(".").pop(),x=`delivery/${`${i.remittance_number}_delivery.${p}`}`,{error:b}=await q.storage.from("remittance-proofs").upload(x,e,{upsert:!0});if(b)throw b;const{data:{publicUrl:j}}=q.storage.from("remittance-proofs").getPublicUrl(x);l=j}const{data:c,error:u}=await q.from("remittances").update({status:Se.DELIVERED,delivered_at:new Date().toISOString(),delivery_proof_url:l,delivery_notes:r}).eq("id",t).select("*, remittance_types(*)").single();if(u)throw u;return{success:!0,remittance:c}}catch(i){return console.error("Error confirming delivery:",i),{success:!1,error:i.message}}},vO=async(t,e="")=>{try{const{data:r,error:i}=await q.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(i)throw i;if(!r)throw new Error("Remesa no encontrada");if(r.status!==Se.DELIVERED)throw new Error("Solo se puede completar remesa ya entregada");const{data:o,error:l}=await q.from("remittances").update({status:Se.COMPLETED,completed_at:new Date().toISOString(),completion_notes:e}).eq("id",t).select("*, remittance_types(*)").single();if(l)throw l;return{success:!0,remittance:o}}catch(r){return console.error("Error completing remittance:",r),{success:!1,error:r.message}}},rm=t=>{if(!t.payment_validated_at||!t.max_delivery_date)return{level:"info",message:"Pendiente de validación"};const e=new Date;new Date(t.payment_validated_at);const i=(new Date(t.max_delivery_date)-e)/(1e3*60*60);return[Se.DELIVERED,Se.COMPLETED].includes(t.status)?{level:"success",message:"Entregada"}:i<0?{level:"error",message:"Entrega vencida"}:i<24?{level:"error",message:`Quedan ${Math.round(i)} horas`}:i<48?{level:"warning",message:`Quedan ${Math.round(i/24)} días`}:{level:"info",message:`Quedan ${Math.round(i/24)} días`}},bO=({onNavigate:t})=>{const{t:e}=kt(),{user:r}=Dt(),[i,o]=w.useState(1),[l,c]=w.useState([]),[u,m]=w.useState(!0),[h,p]=w.useState(!1),[g,x]=w.useState(!1),[b,j]=w.useState(null),[C,_]=w.useState(""),[O,A]=w.useState(null),[E,N]=w.useState({name:"",phone:"",address:"",city:"",id_number:"",notes:""}),[D,T]=w.useState({file:null,reference:"",notes:""}),[L,I]=w.useState(null);w.useEffect(()=>{J()},[]);const J=async()=>{m(!0);const U=await oO();U.success?c(U.types):re({title:e("common.error"),description:U.error,variant:"destructive"}),m(!1)},Q=U=>{j(U),_(""),A(null)},we=async()=>{if(!b||!C){re({title:e("common.error"),description:"Por favor seleccione un tipo y monto",variant:"destructive"});return}p(!0);const U=await Hw(b.id,parseFloat(C));U.success?(A(U.calculation),o(2)):re({title:e("common.error"),description:U.error,variant:"destructive"}),p(!1)},ie=()=>{if(!E.name||!E.phone){re({title:e("common.error"),description:"Por favor complete nombre y teléfono del destinatario",variant:"destructive"});return}o(3)},be=async()=>{x(!0);const U={remittance_type_id:b.id,amount:parseFloat(C),recipient_name:E.name,recipient_phone:E.phone,recipient_address:E.address,recipient_city:E.city,recipient_id_number:E.id_number,notes:E.notes},ne=await dO(U);ne.success?(I(ne.remittance),re({title:e("common.success"),description:"Remesa creada exitosamente"}),o(4)):re({title:e("common.error"),description:ne.error,variant:"destructive"}),x(!1)},G=async U=>{if(U.preventDefault(),!D.file||!D.reference){re({title:e("common.error"),description:"Por favor suba el comprobante y la referencia de pago",variant:"destructive"});return}x(!0);const ne=await Gw(L.id,D.file,D.reference,D.notes);ne.success?(re({title:e("common.success"),description:"Comprobante enviado. Recibirá notificación cuando se valide el pago."}),setTimeout(()=>{t&&t("myRemittances")},2e3)):re({title:e("common.error"),description:ne.error,variant:"destructive"}),x(!1)},de=()=>n.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(U=>n.jsxs(st.Fragment,{children:[n.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all ${i>=U?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-400"}`,children:i>U?n.jsx(ao,{className:"h-5 w-5"}):n.jsx("span",{className:"font-semibold",children:U})}),U<4&&n.jsx("div",{className:`h-0.5 w-16 transition-all ${i>U?"bg-blue-600":"bg-gray-300"}`})]},U))});return u?n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[n.jsx("h1",{className:`${Ze()} text-3xl mb-2 text-center`,children:"Enviar Remesa"}),n.jsx("p",{className:"text-gray-600 text-center mb-8",children:"Envía dinero de forma rápida y segura"}),de(),n.jsxs(Vr,{mode:"wait",children:[i===1&&n.jsxs(le.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[n.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx(qt,{className:"h-6 w-6 text-blue-600"}),"Tipo y Monto de Remesa"]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccione el tipo de remesa *"}),l.map(U=>n.jsx("div",{onClick:()=>Q(U),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${b?.id===U.id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg",children:U.name}),U.description&&n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:U.description}),n.jsxs("div",{className:"mt-2 text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Tasa: "}),n.jsxs("span",{className:"font-semibold",children:["1 ",U.currency_code," = ",U.exchange_rate," ",U.delivery_currency]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Límites"}),n.jsxs("p",{className:"text-sm font-semibold",children:[U.min_amount," - ",U.max_amount||"∞"]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:U.currency_code})]})]})},U.id))]}),b&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Monto a enviar (",b.currency_code,") *"]}),n.jsxs("div",{className:"relative",children:[n.jsx(qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"number",step:"0.01",value:C,onChange:U=>_(U.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg",placeholder:`Ej: ${b.min_amount}`})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Monto mínimo: ",b.min_amount," ",b.currency_code,b.max_amount&&` • Máximo: ${b.max_amount} ${b.currency_code}`]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:we,disabled:!b||!C||h,className:`${Je()} flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:[h?"Calculando...":"Continuar",n.jsx(io,{className:"h-5 w-5"})]})})]},"step1"),i===2&&O&&n.jsxs(le.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[n.jsxs("div",{className:"glass-effect p-6 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50",children:[n.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[n.jsx(mP,{className:"h-5 w-5 text-blue-600"}),"Resumen del Cálculo"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Monto a enviar"}),n.jsxs("p",{className:"text-2xl font-bold",children:[O.amount," ",O.currency]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Comisión"}),n.jsxs("p",{className:"text-xl font-semibold text-red-600",children:["-",O.totalCommission.toFixed(2)," ",O.currency]})]}),n.jsxs("div",{className:"col-span-2 pt-4 border-t-2 border-blue-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Destinatario recibirá"}),n.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[O.amountToDeliver.toFixed(2)," ",O.deliveryCurrency]})]})]})]}),n.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx(TP,{className:"h-6 w-6 text-blue-600"}),"Datos del Destinatario"]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre completo *"}),n.jsx("input",{type:"text",value:E.name,onChange:U=>N({...E,name:U.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Juan Pérez",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono *"}),n.jsx("input",{type:"tel",value:E.phone,onChange:U=>N({...E,phone:U.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+53 5555 5555",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ciudad"}),n.jsx("input",{type:"text",value:E.city,onChange:U=>N({...E,city:U.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"La Habana"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección"}),n.jsx("input",{type:"text",value:E.address,onChange:U=>N({...E,address:U.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Calle 23, entre L y M, Vedado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Carnet de Identidad"}),n.jsx("input",{type:"text",value:E.id_number,onChange:U=>N({...E,id_number:U.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12345678901"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas adicionales"}),n.jsx("textarea",{value:E.notes,onChange:U=>N({...E,notes:U.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Información adicional..."})]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("button",{onClick:()=>o(1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(nx,{className:"h-5 w-5"}),"Atrás"]}),n.jsxs("button",{onClick:ie,className:`${Je()} flex items-center gap-2`,children:["Continuar",n.jsx(io,{className:"h-5 w-5"})]})]})]},"step2"),i===3&&n.jsxs(le.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[n.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[n.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[n.jsx(jo,{className:"h-6 w-6 text-blue-600"}),"Confirmar Remesa"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Tipo de Remesa"}),n.jsx("p",{className:"text-gray-700",children:b.name})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Monto a Enviar"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[O.amount," ",O.currency]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Destinatario Recibirá"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[O.amountToDeliver.toFixed(2)," ",O.deliveryCurrency]})]}),n.jsxs("div",{className:"pt-4 border-t",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Datos del Destinatario"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Nombre:"})," ",E.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",E.phone]}),E.city&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Ciudad:"})," ",E.city]}),E.address&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Dirección:"})," ",E.address]})]})]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("button",{onClick:()=>o(2),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(nx,{className:"h-5 w-5"}),"Atrás"]}),n.jsxs("button",{onClick:be,disabled:g,className:`${Je()} flex items-center gap-2 disabled:opacity-50`,children:[g?"Creando...":"Confirmar Remesa",n.jsx(Qt,{className:"h-5 w-5"})]})]})]},"step3"),i===4&&L&&n.jsxs(le.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[n.jsxs("div",{className:"glass-effect p-6 rounded-xl text-center",children:[n.jsx(Qt,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Remesa Creada"}),n.jsxs("p",{className:"text-gray-600 mb-4",children:["Número de remesa: ",n.jsx("span",{className:"font-bold",children:L.remittance_number})]})]}),n.jsxs("form",{onSubmit:G,className:"glass-effect p-6 rounded-xl",children:[n.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx(co,{className:"h-6 w-6 text-blue-600"}),"Subir Comprobante de Pago"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comprobante de pago *"}),n.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:U=>T({...D,file:U.target.files[0]}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia de pago *"}),n.jsx("input",{type:"text",value:D.reference,onChange:U=>T({...D,reference:U.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: ZELLE123456",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas adicionales"}),n.jsx("textarea",{value:D.notes,onChange:U=>T({...D,notes:U.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Detalles adicionales del pago..."})]})]}),n.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ps,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("p",{className:"font-semibold mb-1",children:"Importante:"}),n.jsx("p",{children:"Su remesa será procesada una vez validemos el comprobante de pago. Recibirá una notificación cuando esto ocurra."})]})]})}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{type:"button",onClick:()=>{t&&t("myRemittances")},className:"flex-1 px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Subir Después"}),n.jsx("button",{type:"submit",disabled:g,className:`flex-1 ${Je()} disabled:opacity-50`,children:g?"Enviando...":"Enviar Comprobante"})]})]})]},"step4")]})]})},Kw=w.createContext(),Xm=()=>{const t=w.useContext(Kw);if(!t)throw new Error("useModal must be used within ModalProvider");return t},wO=({children:t})=>{const[e,r]=w.useState({isOpen:!1,title:"",message:"",type:"info",input:!1,inputLabel:"",inputPlaceholder:"",confirmText:"Confirmar",cancelText:"Cancelar",required:!1,resolve:null}),i=c=>new Promise(u=>{r({isOpen:!0,title:c.title||"Confirmación",message:c.message||"",type:c.type||"info",input:c.input||!1,inputLabel:c.inputLabel||"",inputPlaceholder:c.inputPlaceholder||"",confirmText:c.confirmText||"Confirmar",cancelText:c.cancelText||"Cancelar",required:c.required||!1,resolve:u})}),o=c=>{e.resolve&&e.resolve(e.input?c:!0),r(u=>({...u,isOpen:!1}))},l=()=>{e.resolve&&e.resolve(!1),r(c=>({...c,isOpen:!1}))};return n.jsxs(Kw.Provider,{value:{showModal:i},children:[t,n.jsx(jO,{...e,onConfirm:o,onCancel:l})]})},jO=({isOpen:t,title:e,message:r,type:i,input:o,inputLabel:l,inputPlaceholder:c,confirmText:u,cancelText:m,required:h,onConfirm:p,onCancel:g})=>{const[x,b]=w.useState(""),j={danger:An,success:Qt,info:lx},C={danger:"text-red-600",success:"text-green-600",info:"text-blue-600"},_={danger:"bg-red-600 hover:bg-red-700",success:"bg-green-600 hover:bg-green-700",info:"bg-blue-600 hover:bg-blue-700"},O=j[i]||lx,A=E=>{E.preventDefault(),!(o&&h&&!x.trim())&&(p(o?x:!0),b(""))};return n.jsx(Vr,{children:t&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:g,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),n.jsx(le.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",onClick:E=>E.stopPropagation(),children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[n.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full bg-${i==="danger"?"red":i==="success"?"green":"blue"}-100 flex items-center justify-center`,children:n.jsx(O,{className:`h-6 w-6 ${C[i]}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e}),n.jsx("p",{className:"text-gray-600",children:r})]}),n.jsx("button",{onClick:g,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(ir,{className:"h-5 w-5"})})]}),n.jsxs("form",{onSubmit:A,children:[o&&n.jsxs("div",{className:"mb-6",children:[l&&n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[l," ",h&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:x,onChange:E=>b(E.target.value),placeholder:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",rows:"3",autoFocus:!0})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",onClick:()=>{g(),b("")},className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:m}),n.jsx("button",{type:"submit",disabled:o&&h&&!x.trim(),className:`flex-1 px-6 py-3 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${_[i]}`,children:u})]})]})]})})]})})},_O=({onNavigate:t})=>{const{t:e}=kt(),{user:r}=Dt(),{showModal:i}=Xm(),[o,l]=w.useState([]),[c,u]=w.useState(!0),[m,h]=w.useState(null),[p,g]=w.useState(!1),[x,b]=w.useState({file:null,reference:"",notes:""});w.useEffect(()=>{j()},[]);const j=async()=>{u(!0);const T=await uO({});T.success?l(T.remittances):re({title:e("common.error"),description:T.error,variant:"destructive"}),u(!1)},C=async T=>{const L=await fO(T.id);L.success?h(L.remittance):re({title:e("common.error"),description:L.error,variant:"destructive"})},_=T=>{h(T),g(!0),b({file:null,reference:"",notes:""})},O=async T=>{if(T.preventDefault(),!x.file||!x.reference){re({title:e("common.error"),description:"Por favor complete todos los campos requeridos",variant:"destructive"});return}const L=await Gw(m.id,x.file,x.reference,x.notes);L.success?(re({title:e("common.success"),description:"Comprobante subido exitosamente"}),g(!1),j()):re({title:e("common.error"),description:L.error,variant:"destructive"})},A=async T=>{const L=await i({title:"Cancelar Remesa",message:`¿Está seguro que desea cancelar la remesa ${T.remittance_number}?`,input:!0,inputLabel:"Razón (opcional)",inputPlaceholder:"Motivo de la cancelación...",confirmText:"Cancelar Remesa",cancelText:e("common.back"),type:"danger"});if(L===!1)return;const I=await mO(T.id,L||"");I.success?(re({title:e("common.success"),description:"Remesa cancelada"}),j()):re({title:e("common.error"),description:I.error,variant:"destructive"})},E=T=>({[Se.PAYMENT_PENDING]:bs,[Se.PAYMENT_PROOF_UPLOADED]:co,[Se.PAYMENT_VALIDATED]:Qt,[Se.PAYMENT_REJECTED]:Ur,[Se.PROCESSING]:pr,[Se.DELIVERED]:lo,[Se.COMPLETED]:Qt,[Se.CANCELLED]:Ur})[T]||bs,N=T=>({[Se.PAYMENT_PENDING]:"text-gray-600",[Se.PAYMENT_PROOF_UPLOADED]:"text-yellow-600",[Se.PAYMENT_VALIDATED]:"text-blue-600",[Se.PAYMENT_REJECTED]:"text-red-600",[Se.PROCESSING]:"text-purple-600",[Se.DELIVERED]:"text-green-600",[Se.COMPLETED]:"text-emerald-600",[Se.CANCELLED]:"text-gray-500"})[T]||"text-gray-600",D=T=>({[Se.PAYMENT_PENDING]:"Pendiente de Pago",[Se.PAYMENT_PROOF_UPLOADED]:"Comprobante Enviado",[Se.PAYMENT_VALIDATED]:"Pago Validado",[Se.PAYMENT_REJECTED]:"Pago Rechazado",[Se.PROCESSING]:"En Proceso",[Se.DELIVERED]:"Entregado",[Se.COMPLETED]:"Completado",[Se.CANCELLED]:"Cancelado"})[T]||T;return c?n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:`${Ze()} text-3xl mb-2`,children:"Mis Remesas"}),n.jsx("p",{className:"text-gray-600",children:"Consulte el estado de sus envíos de dinero"})]}),n.jsxs("button",{onClick:()=>t&&t("sendRemittance"),className:`${Je()} flex items-center gap-2`,children:[n.jsx(qt,{className:"h-5 w-5"}),"Nueva Remesa"]})]}),o.length===0?n.jsxs("div",{className:"text-center py-12 glass-effect rounded-xl",children:[n.jsx(qt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No tiene remesas registradas"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Envíe su primera remesa de forma rápida y segura"}),n.jsxs("button",{onClick:()=>t&&t("sendRemittance"),className:`${Je()} inline-flex items-center gap-2`,children:[n.jsx(qt,{className:"h-5 w-5"}),"Enviar Remesa"]})]}):n.jsx("div",{className:"space-y-4",children:o.map(T=>{const L=E(T.status),I=rm(T);return n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold gradient-text",children:T.remittance_number}),n.jsx("p",{className:"text-sm text-gray-600",children:T.remittance_types?.name})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(L,{className:`h-5 w-5 ${N(T.status)}`}),n.jsx("span",{className:"text-sm font-medium",children:D(T.status)})]})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Enviado"}),n.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[T.amount," ",T.currency]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"A Entregar"}),n.jsxs("p",{className:"text-lg font-bold text-green-600",children:[T.amount_to_deliver?.toFixed(2)," ",T.delivery_currency]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Destinatario"}),n.jsx("p",{className:"font-semibold",children:T.recipient_name})]})]}),[Se.PAYMENT_VALIDATED,Se.PROCESSING].includes(T.status)&&n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:`p-3 rounded-lg ${I.level==="error"?"bg-red-50 border border-red-200":I.level==="warning"?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bs,{className:`h-4 w-4 ${I.level==="error"?"text-red-600":I.level==="warning"?"text-yellow-600":"text-blue-600"}`}),n.jsx("span",{className:`text-sm font-medium ${I.level==="error"?"text-red-800":I.level==="warning"?"text-yellow-800":"text-blue-800"}`,children:I.message})]})})}),T.status===Se.PAYMENT_REJECTED&&T.payment_rejection_reason&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(ps,{className:"h-4 w-4 text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-red-800 mb-1",children:"Razón del rechazo:"}),n.jsx("p",{className:"text-sm text-red-700",children:T.payment_rejection_reason})]})]})}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[n.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(mc,{className:"h-4 w-4"}),new Date(T.created_at).toLocaleDateString("es-CU")]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>C(T),className:"flex items-center gap-1 px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[n.jsx(Cs,{className:"h-4 w-4"}),"Ver Detalles"]}),T.status===Se.PAYMENT_PENDING&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>_(T),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[n.jsx(co,{className:"h-4 w-4"}),"Subir Comprobante"]}),n.jsxs("button",{onClick:()=>A(T),className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[n.jsx(Ur,{className:"h-4 w-4"}),"Cancelar"]})]}),T.status===Se.PAYMENT_REJECTED&&n.jsxs("button",{onClick:()=>_(T),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[n.jsx(Sr,{className:"h-4 w-4"}),"Reenviar Comprobante"]})]})]})]},T.id)})}),p&&m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>g(!1),children:n.jsxs(le.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl p-6 max-w-md w-full",onClick:T=>T.stopPropagation(),children:[n.jsx("h2",{className:"text-2xl font-bold gradient-text mb-4",children:"Subir Comprobante de Pago"}),n.jsxs("form",{onSubmit:O,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remesa"}),n.jsx("p",{className:"font-semibold",children:m.remittance_number}),n.jsxs("p",{className:"text-sm text-gray-600",children:[m.amount," ",m.currency]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comprobante de pago *"}),n.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:T=>b({...x,file:T.target.files[0]}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia de pago *"}),n.jsx("input",{type:"text",value:x.reference,onChange:T=>b({...x,reference:T.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: ZELLE123456",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas adicionales"}),n.jsx("textarea",{value:x.notes,onChange:T=>b({...x,notes:T.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Detalles adicionales..."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:e("common.cancel")}),n.jsx("button",{type:"submit",className:`flex-1 ${Je()}`,children:"Enviar"})]})]})]})}),m&&!p&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>h(null),children:n.jsxs(le.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[n.jsx("h2",{className:"text-2xl font-bold gradient-text mb-6",children:"Detalles de Remesa"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Número"}),n.jsx("p",{className:"font-semibold",children:m.remittance_number})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Estado"}),n.jsx("p",{className:"font-semibold",children:D(m.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Tipo"}),n.jsx("p",{className:"font-semibold",children:m.remittance_types?.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Método de Entrega"}),n.jsx("p",{className:"font-semibold capitalize",children:m.delivery_method})]})]}),n.jsxs("div",{className:"pt-4 border-t",children:[n.jsx("h3",{className:"font-bold mb-3",children:"Destinatario"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:"Nombre:"})," ",m.recipient_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:"Teléfono:"})," ",m.recipient_phone]}),m.recipient_city&&n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:"Ciudad:"})," ",m.recipient_city]}),m.recipient_address&&n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-600",children:"Dirección:"})," ",m.recipient_address]})]})]}),m.payment_proof_url&&n.jsxs("div",{className:"pt-4 border-t",children:[n.jsx("h3",{className:"font-bold mb-3",children:"Comprobante de Pago"}),n.jsxs("a",{href:m.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:underline",children:[n.jsx(jo,{className:"h-4 w-4"}),"Ver Comprobante"]})]}),n.jsx("div",{className:"pt-4 border-t",children:n.jsx("button",{onClick:()=>h(null),className:"w-full py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cerrar"})})]})]})})]})},Yw=(t,e,r="es")=>e===Yt.VALIDATED?r==="es"?"Validado":"Validated":e===Yt.REJECTED?r==="es"?"Rechazado":"Rejected":e===Yt.PENDING?r==="es"?"Pendiente":"Pending":t===ut.PROCESSING?r==="es"?"En proceso":"Processing":t===ut.COMPLETED?r==="es"?"Completado":"Completed":r==="es"?"Pendiente":"Pending",CO=(t,e)=>e===Yt.VALIDATED||t===ut.COMPLETED?n.jsx(Qt,{className:"h-4 w-4"}):e===Yt.REJECTED||t===ut.CANCELLED?n.jsx(Ur,{className:"h-4 w-4"}):n.jsx(bs,{className:"h-4 w-4"}),NO=()=>{const{t}=kt(),{user:e}=Dt(),[r,i]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null),[m,h]=w.useState(null),[p,g]=w.useState(null),[x,b]=w.useState({searchQuery:"",combined_status:"",order_type:"",startDate:"",endDate:"",userId:"",productId:""}),[j,C]=w.useState(!1),[_,O]=w.useState(null),[A,E]=w.useState(!1),[N,D]=w.useState(!1),[T,L]=w.useState(null),[I,J]=w.useState(null),[Q,we]=w.useState({show:!1,title:"",message:"",onConfirm:null}),[ie,be]=w.useState({show:!1,title:"",message:"",defaultValue:"",onConfirm:null}),[G,de]=w.useState(null);w.useEffect(()=>{U()},[]);const U=async()=>{l(!0),u(null);try{const B={};if(x.combined_status)switch(x.combined_status){case"payment_pending":B.payment_status=Yt.PENDING;break;case"payment_validated":B.payment_status=Yt.VALIDATED,B.status=ut.PENDING;break;case"processing":B.status=ut.PROCESSING;break;case"shipped":B.status=ut.SHIPPED;break;case"delivered":B.status=ut.DELIVERED;break;case"completed":B.status=ut.COMPLETED;break;case"cancelled":B.status=ut.CANCELLED;break;case"rejected":B.payment_status=Yt.REJECTED;break}x.order_type&&(B.order_type=x.order_type);const ae=await Vw(B);ae.success?i(ae.orders||[]):u(ae.error||"Error loading orders")}catch(B){console.error("Error loading orders:",B),u("Error loading orders")}finally{l(!1)}},ne=w.useMemo(()=>{let B=[...r];if(x.searchQuery){const ae=x.searchQuery.toLowerCase();B=B.filter(Ae=>{const te=Ae.order_number?.toLowerCase()||"",je=Ae.user_name?.toLowerCase()||"",Le=Ae.user_email?.toLowerCase()||"",tt=Ae.order_items?.map(wt=>(wt.item_name_es||"").toLowerCase()).join(" ")||"";return te.includes(ae)||je.includes(ae)||Le.includes(ae)||tt.includes(ae)})}if(x.startDate){const ae=new Date(x.startDate);ae.setHours(0,0,0,0),B=B.filter(Ae=>new Date(Ae.created_at)>=ae)}if(x.endDate){const ae=new Date(x.endDate);ae.setHours(23,59,59,999),B=B.filter(Ae=>new Date(Ae.created_at)<=ae)}return x.userId&&(B=B.filter(ae=>ae.user_id===x.userId)),x.productId&&(B=B.filter(ae=>ae.order_items?.some(Ae=>Ae.item_id===x.productId))),B},[r,x]),z=w.useMemo(()=>({total:ne.length,pending:ne.filter(B=>B.payment_status===Yt.PENDING).length,validated:ne.filter(B=>B.payment_status===Yt.VALIDATED).length,rejected:ne.filter(B=>B.payment_status===Yt.REJECTED).length,completed:ne.filter(B=>B.status===ut.COMPLETED).length,totalRevenue:ne.filter(B=>B.payment_status===Yt.VALIDATED).reduce((B,ae)=>B+(ae.total_amount||0),0)}),[ne]),ce=()=>{b({searchQuery:"",combined_status:"",order_type:"",startDate:"",endDate:"",userId:"",productId:""}),U()},oe=(B,ae)=>{b(Ae=>({...Ae,[B]:ae}))},k=()=>{U()},$=B=>{O(B),E(!0)},ee=async B=>{X(t("adminOrders.modals.startTitle"),t("adminOrders.messages.confirmStart").replace("{orderNumber}",B.order_number),async()=>{g(B.id);try{const ae=await V4(B.id,e.id);ae.success?(R(t("adminOrders.messages.startSuccess"),"success"),U()):R(`${t("adminOrders.messages.error")}: ${ae.error}`,"error")}catch(ae){console.error("Error starting processing:",ae),R(t("adminOrders.messages.error"),"error")}finally{g(null)}})},ue=async B=>{Ie(t("adminOrders.modals.trackingTitle"),t("adminOrders.messages.enterTracking").replace("{orderNumber}",B.order_number),"",async ae=>{g(B.id);try{const Ae=await B4(B.id,e.id,ae);Ae.success?(R(t("adminOrders.messages.shipSuccess"),"success"),U()):R(`${t("adminOrders.messages.error")}: ${Ae.error}`,"error")}catch(Ae){console.error("Error marking as shipped:",Ae),R(t("adminOrders.messages.error"),"error")}finally{g(null)}})},xe=B=>{O(B),D(!0)},Ce=B=>{const ae=B.target.files[0];if(!ae)return;if(!ae.type.startsWith("image/")){R(t("adminOrders.messages.invalidImage"),"error");return}if(ae.size>5*1024*1024){R(t("adminOrders.messages.imageTooLarge"),"error");return}L(ae);const Ae=new FileReader;Ae.onloadend=()=>{J(Ae.result)},Ae.readAsDataURL(ae)},fe=async()=>{if(!T||!_){R(t("adminOrders.messages.selectImage"),"error");return}g(_.id);try{const B=await z4(_.id,T,e.id);B.success?(R(t("adminOrders.messages.deliverSuccess"),"success"),D(!1),L(null),J(null),O(null),U()):R(`${t("adminOrders.messages.error")}: ${B.error}`,"error")}catch(B){console.error("Error uploading delivery proof:",B),R(t("adminOrders.messages.error"),"error")}finally{g(null)}},Ee=async B=>{X(t("adminOrders.modals.completeTitle"),t("adminOrders.messages.confirmComplete").replace("{orderNumber}",B.order_number),async()=>{g(B.id);try{const ae=await q4(B.id);ae.success?(R(t("adminOrders.messages.completeSuccess"),"success"),U()):R(`${t("adminOrders.messages.error")}: ${ae.error}`,"error")}catch(ae){console.error("Error completing order:",ae),R(t("adminOrders.messages.error"),"error")}finally{g(null)}})},De=async B=>{Ie(t("adminOrders.modals.cancelReasonTitle"),t("adminOrders.messages.enterCancelReason").replace("{orderNumber}",B.order_number),"",async ae=>{if(!ae||ae.trim()===""){R(t("adminOrders.messages.cancelReasonRequired"),"error");return}X(t("adminOrders.modals.cancelTitle"),t("adminOrders.messages.confirmCancel"),async()=>{g(B.id);try{const Ae=await H4(B.id,e.id,ae);Ae.success?(R(t("adminOrders.messages.cancelSuccess"),"success"),U()):R(`${t("adminOrders.messages.error")}: ${Ae.error}`,"error")}catch(Ae){console.error("Error cancelling order:",Ae),R(t("adminOrders.messages.error"),"error")}finally{g(null)}})})},X=(B,ae,Ae)=>{we({show:!0,title:B,message:ae,onConfirm:Ae})},Y=()=>{we({show:!1,title:"",message:"",onConfirm:null})},Ie=(B,ae,Ae,te)=>{be({show:!0,title:B,message:ae,defaultValue:Ae,onConfirm:te})},_e=()=>{be({show:!1,title:"",message:"",defaultValue:"",onConfirm:null})},R=(B,ae="success")=>{de({message:B,type:ae}),setTimeout(()=>de(null),4e3)},pe=B=>B?new Date(B).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",se=(B,ae="USD")=>B?new Intl.NumberFormat("en-US",{style:"currency",currency:ae}).format(B):"0.00";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("adminOrders.title")}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t("adminOrders.subtitle")})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>C(!j),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${j?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[n.jsx(Dm,{className:"h-4 w-4"}),t("adminOrders.filters.title").replace(" de Búsqueda",""),j?n.jsx(hP,{className:"h-4 w-4"}):n.jsx(gb,{className:"h-4 w-4"})]}),n.jsxs("button",{onClick:U,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[n.jsx(Sr,{className:`h-4 w-4 ${o?"animate-spin":""}`}),t("dashboard.refresh")]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[n.jsx(ki,{label:t("adminOrders.stats.total"),value:z.total,icon:jo,color:"blue"}),n.jsx(ki,{label:t("adminOrders.stats.pending"),value:z.pending,icon:bs,color:"yellow"}),n.jsx(ki,{label:t("adminOrders.stats.validated"),value:z.validated,icon:Qt,color:"green"}),n.jsx(ki,{label:t("adminOrders.stats.rejected"),value:z.rejected,icon:Ur,color:"red"}),n.jsx(ki,{label:t("adminOrders.stats.completed"),value:z.completed,icon:pr,color:"purple"}),n.jsx(ki,{label:t("adminOrders.stats.revenue"),value:se(z.totalRevenue),icon:qt,color:"green",isAmount:!0})]}),n.jsx(Vr,{children:j&&n.jsxs(le.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t("adminOrders.filters.title")}),n.jsxs("button",{onClick:ce,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900",children:[n.jsx(ir,{className:"h-4 w-4"}),t("adminOrders.filters.clear")]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"lg:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Dc,{className:"h-4 w-4 inline mr-2"}),t("adminOrders.filters.search")]}),n.jsx("input",{type:"text",placeholder:t("adminOrders.filters.searchPlaceholder"),value:x.searchQuery,onChange:B=>oe("searchQuery",B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"lg:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("adminOrders.filters.status")}),n.jsxs("select",{value:x.combined_status,onChange:B=>oe("combined_status",B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:t("adminOrders.filters.allStatuses")}),n.jsxs("option",{value:"payment_pending",children:["🟡 ",t("adminOrders.table.paymentStatus.pending")]}),n.jsxs("option",{value:"payment_validated",children:["✅ ",t("adminOrders.table.paymentStatus.validated")]}),n.jsxs("option",{value:"processing",children:["🔵 ",t("adminOrders.table.orderStatus.processing")]}),n.jsxs("option",{value:"shipped",children:["🟣 ",t("adminOrders.table.orderStatus.shipped")]}),n.jsxs("option",{value:"delivered",children:["🟢 ",t("adminOrders.table.orderStatus.delivered")]}),n.jsxs("option",{value:"completed",children:["✅ ",t("adminOrders.table.orderStatus.completed")]}),n.jsxs("option",{value:"cancelled",children:["❌ ",t("adminOrders.table.orderStatus.cancelled")]}),n.jsxs("option",{value:"rejected",children:["🔴 ",t("adminOrders.table.paymentStatus.rejected")]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("adminOrders.filters.orderType")}),n.jsxs("select",{value:x.order_type,onChange:B=>oe("order_type",B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:t("adminOrders.filters.allTypes")}),n.jsx("option",{value:"product",children:t("adminOrders.types.products")}),n.jsx("option",{value:"remittance",children:t("adminOrders.types.remittance")}),n.jsx("option",{value:"mixed",children:t("adminOrders.types.mixed")})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(mc,{className:"h-4 w-4 inline mr-2"}),t("adminOrders.filters.startDate")]}),n.jsx("input",{type:"date",value:x.startDate,onChange:B=>oe("startDate",B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(mc,{className:"h-4 w-4 inline mr-2"}),t("adminOrders.filters.endDate")]}),n.jsx("input",{type:"date",value:x.endDate,onChange:B=>oe("endDate",B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:n.jsx("button",{onClick:k,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("adminOrders.filters.apply")})})]})}),n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:o?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(Sr,{className:"h-8 w-8 animate-spin text-blue-600"})}):c?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-red-600",children:[n.jsx(Ur,{className:"h-12 w-12 mb-4"}),n.jsx("p",{children:c}),n.jsx("button",{onClick:U,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:t("adminOrders.messages.retry")})]}):ne.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[n.jsx(pr,{className:"h-12 w-12 mb-4"}),n.jsx("p",{children:t("adminOrders.messages.noOrders")})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.order")}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.user")}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.date")}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.type")}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.items")}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.total")}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.paymentStatus.label")}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.orderStatus.label")}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.actions")})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ne.map(B=>n.jsx(SO,{order:B,onViewDetails:$,onStartProcessing:ee,onMarkAsShipped:ue,onUploadDeliveryProof:xe,onCompleteOrder:Ee,onCancelOrder:De,formatDate:pe,formatCurrency:se,actionLoading:p,t},B.id))})]})})}),A&&_&&n.jsx(EO,{order:_,onClose:()=>{E(!1),O(null)},formatDate:pe,formatCurrency:se}),N&&_&&n.jsx(PO,{order:_,onClose:()=>{D(!1),O(null),L(null),J(null)},onFileChange:Ce,onSubmit:fe,preview:I,loading:p===_.id,t}),n.jsx(kO,{show:Q.show,title:Q.title,message:Q.message,onConfirm:()=>{Q.onConfirm&&Q.onConfirm(),Y()},onCancel:Y,t}),n.jsx(TO,{show:ie.show,title:ie.title,message:ie.message,defaultValue:ie.defaultValue,onConfirm:B=>{ie.onConfirm&&ie.onConfirm(B),_e()},onCancel:_e,t}),G&&n.jsx(AO,{message:G.message,type:G.type,onClose:()=>de(null)})]})},ki=({label:t,value:e,icon:r,color:i,isAmount:o})=>{const l={blue:"bg-blue-50 text-blue-700 border-blue-200",green:"bg-green-50 text-green-700 border-green-200",yellow:"bg-yellow-50 text-yellow-700 border-yellow-200",red:"bg-red-50 text-red-700 border-red-200",purple:"bg-purple-50 text-purple-700 border-purple-200"};return n.jsxs("div",{className:`rounded-lg border p-4 ${l[i]}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:t}),n.jsx(r,{className:"h-4 w-4"})]}),n.jsx("div",{className:`text-2xl font-bold ${o?"text-lg":""}`,children:e})]})},SO=({order:t,onViewDetails:e,onStartProcessing:r,onMarkAsShipped:i,onUploadDeliveryProof:o,onCompleteOrder:l,onCancelOrder:c,formatDate:u,formatCurrency:m,actionLoading:h,t:p})=>{const g=t.status===ut.PROCESSING?W4(t):null,x=()=>{const b=h===t.id;return t.payment_status===Yt.VALIDATED&&t.status===ut.PENDING?n.jsxs("button",{onClick:()=>r(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(CP,{className:"h-3 w-3"}),p(b?"adminOrders.actions.processing":"adminOrders.actions.start")]}):t.status===ut.PROCESSING?n.jsxs("button",{onClick:()=>i(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-xs font-medium rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(lo,{className:"h-3 w-3"}),p(b?"adminOrders.actions.processing":"adminOrders.actions.ship")]}):t.status===ut.SHIPPED?n.jsxs("button",{onClick:()=>o(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(pb,{className:"h-3 w-3"}),p(b?"adminOrders.actions.loading":"adminOrders.actions.proof")]}):t.status===ut.DELIVERED?n.jsxs("button",{onClick:()=>l(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ao,{className:"h-3 w-3"}),p(b?"adminOrders.actions.completing":"adminOrders.actions.complete")]}):t.status===ut.COMPLETED||t.status===ut.CANCELLED?n.jsx("span",{className:"text-xs text-gray-500 italic",children:t.status===ut.COMPLETED?p("adminOrders.table.orderStatus.completed"):p("adminOrders.table.orderStatus.cancelled")}):n.jsx("span",{className:"text-xs text-gray-400",children:"-"})};return n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.order_number})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm text-gray-900",children:t.user_name||"N/A"}),n.jsx("div",{className:"text-xs text-gray-500",children:t.user_email||""})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-900",children:u(t.created_at)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[t.order_type==="product"?n.jsx(pr,{className:"h-3 w-3"}):t.order_type==="remittance"?n.jsx(qt,{className:"h-3 w-3"}):n.jsx(Er,{className:"h-3 w-3"}),t.order_type==="product"?p("adminOrders.types.products"):t.order_type==="remittance"?p("adminOrders.types.remittance"):p("adminOrders.types.mixed")]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"text-sm text-gray-900",children:[t.order_items?.length||0," items"]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm font-semibold text-gray-900",children:m(t.total_amount,t.currencies?.code)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${t.payment_status===Yt.VALIDATED?"bg-green-100 text-green-700":t.payment_status===Yt.REJECTED?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[CO(t.status,t.payment_status),Yw(t.status,t.payment_status,"es")]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${t.status===ut.COMPLETED?"bg-green-100 text-green-700":t.status===ut.CANCELLED?"bg-red-100 text-red-700":t.status===ut.SHIPPED?"bg-purple-100 text-purple-700":t.status===ut.DELIVERED?"bg-teal-100 text-teal-700":"bg-blue-100 text-blue-700"}`,children:t.status}),g!==null&&n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${g>5?"bg-red-100 text-red-700":g>3?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:[n.jsx(bs,{className:"h-3 w-3"}),g," ",p(g===1?"adminOrders.days.singular":"adminOrders.days.plural")]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>e(t),className:"text-blue-600 hover:text-blue-900 inline-flex items-center gap-1",title:p("adminOrders.actions.view"),children:n.jsx(Cs,{className:"h-4 w-4"})}),x(),t.status!==ut.COMPLETED&&t.status!==ut.CANCELLED&&n.jsx("button",{onClick:()=>c(t),disabled:h===t.id,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:p("adminOrders.actions.cancel"),children:n.jsx(uP,{className:"h-4 w-4"})})]})})]})},EO=({order:t,onClose:e,formatDate:r,formatCurrency:i})=>n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(le.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Detalles de Orden: ",t.order_number]}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(ir,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Qs,{label:"Número de Orden",value:t.order_number}),n.jsx(Qs,{label:"Fecha",value:r(t.created_at)}),n.jsx(Qs,{label:"Usuario",value:t.user_name||"N/A"}),n.jsx(Qs,{label:"Email",value:t.user_email||"N/A"}),n.jsx(Qs,{label:"Tipo de Orden",value:t.order_type}),n.jsx(Qs,{label:"Estado de Pago",value:Yw(t.status,t.payment_status,"es")}),n.jsx(Qs,{label:"Estado de Orden",value:t.status}),n.jsx(Qs,{label:"Método de Pago",value:t.payment_method})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Items de la Orden"}),n.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Producto"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Cantidad"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Precio Unit."}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Total"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:t.order_items?.map((o,l)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:o.item_name_es||o.item_name_en}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:o.quantity}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:i(o.unit_price,t.currencies?.code)}),n.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:i(o.total_price,t.currencies?.code)})]},l))})]})})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsx("span",{className:"font-medium",children:i(t.subtotal,t.currencies?.code)})]}),t.shipping_cost>0&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Envío:"}),n.jsx("span",{className:"font-medium",children:i(t.shipping_cost,t.currencies?.code)})]}),t.discount_amount>0&&n.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[n.jsx("span",{children:"Descuento:"}),n.jsxs("span",{className:"font-medium",children:["-",i(t.discount_amount,t.currencies?.code)]})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:i(t.total_amount,t.currencies?.code)})]})]}),t.shipping_address&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Información de Envío"}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Dirección:"})," ",t.shipping_address]}),t.recipient_info&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Destinatario:"})," ",t.recipient_info.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",t.recipient_info.phone]})]}),t.delivery_instructions&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Instrucciones:"})," ",t.delivery_instructions]})]})]}),t.payment_proof_url&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Comprobante de Pago"}),n.jsx("img",{src:t.payment_proof_url,alt:"Comprobante de pago",className:"max-w-full h-auto rounded-lg border border-gray-200"})]}),t.notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Notas"}),n.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-4",children:t.notes})]}),t.rejection_reason&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("h4",{className:"text-lg font-semibold text-red-900 mb-2",children:"Razón de Rechazo"}),n.jsx("p",{className:"text-sm text-red-700",children:t.rejection_reason})]})]}),n.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end",children:n.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cerrar"})})]})}),Qs=({label:t,value:e})=>n.jsxs("div",{children:[n.jsx("dt",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:t}),n.jsx("dd",{className:"text-sm text-gray-900 font-medium",children:e})]}),PO=({order:t,onClose:e,onFileChange:r,onSubmit:i,preview:o,loading:l,t:c})=>n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(le.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[n.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-lg",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["📸 ",c("adminOrders.deliveryModal.title")]}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:l,children:n.jsx(ir,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:c("adminOrders.deliveryModal.orderLabel")})," ",t.order_number]}),n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:c("adminOrders.deliveryModal.customerLabel")})," ",t.user_name]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:c("adminOrders.deliveryModal.selectPhoto")}),n.jsx("div",{className:"flex items-center justify-center w-full",children:n.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[o?n.jsx("img",{src:o,alt:"Preview",className:"max-h-44 rounded-lg object-contain"}):n.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[n.jsx(gP,{className:"h-12 w-12 text-gray-400 mb-3"}),n.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[n.jsx("span",{className:"font-semibold",children:c("adminOrders.deliveryModal.clickToUpload")})," ",c("adminOrders.deliveryModal.dragHere")]}),n.jsx("p",{className:"text-xs text-gray-500",children:c("adminOrders.deliveryModal.fileTypes")})]}),n.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:r,disabled:l})]})})]}),o&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-green-700",children:["✅ ",c("adminOrders.deliveryModal.imageLoaded")]})}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-xs text-yellow-800",children:[n.jsx("strong",{children:c("adminOrders.deliveryModal.note")})," ",c("adminOrders.deliveryModal.noteText")]})})]}),n.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[n.jsx("button",{onClick:e,disabled:l,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:c("adminOrders.deliveryModal.cancel")}),n.jsx("button",{onClick:i,disabled:l||!o,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2",children:l?n.jsxs(n.Fragment,{children:[n.jsx(Sr,{className:"h-4 w-4 animate-spin"}),c("adminOrders.deliveryModal.uploading")]}):n.jsxs(n.Fragment,{children:[n.jsx(pb,{className:"h-4 w-4"}),c("adminOrders.deliveryModal.submit")]})})]})]})}),kO=({show:t,title:e,message:r,onConfirm:i,onCancel:o,t:l})=>t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(le.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 rounded-t-lg",children:n.jsx("h3",{className:"text-xl font-bold text-white",children:e})}),n.jsx("div",{className:"p-6",children:n.jsx("p",{className:"text-gray-700 text-base",children:r})}),n.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[n.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:l("adminOrders.modals.cancel")}),n.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:l("adminOrders.modals.confirm")})]})]})}):null,TO=({show:t,title:e,message:r,defaultValue:i,onConfirm:o,onCancel:l,t:c})=>{const[u,m]=w.useState(i||"");if(w.useEffect(()=>{t&&m(i||"")},[t,i]),!t)return null;const h=()=>{o(u)},p=g=>{g.key==="Enter"&&h()};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(le.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4 rounded-t-lg",children:n.jsx("h3",{className:"text-xl font-bold text-white",children:e})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("p",{className:"text-gray-700 text-base",children:r}),n.jsx("input",{type:"text",value:u,onChange:g=>m(g.target.value),onKeyPress:p,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",autoFocus:!0})]}),n.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[n.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:c("adminOrders.modals.cancel")}),n.jsx("button",{onClick:h,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:c("adminOrders.modals.submit")})]})]})})},AO=({message:t,type:e,onClose:r})=>{if(!t)return null;const i={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500",warning:"bg-yellow-500"},o={success:"✅",error:"❌",info:"ℹ️",warning:"⚠️"};return n.jsx(le.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 right-4 z-50 max-w-md",children:n.jsxs("div",{className:`${i[e]} text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3`,children:[n.jsx("span",{className:"text-2xl",children:o[e]}),n.jsx("p",{className:"flex-1 font-medium",children:t}),n.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 transition-colors",children:n.jsx(ir,{className:"h-5 w-5"})})]})})},RO=()=>{const{t}=kt(),{showModal:e}=Xm(),[r,i]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState(!0),[m,h]=w.useState(""),[p,g]=w.useState("all"),[x,b]=w.useState(null);w.useEffect(()=>{j()},[]),w.useEffect(()=>{C()},[r,m,p]);const j=async()=>{u(!0);const I=await hO({});I.success?i(I.remittances):re({title:t("common.error"),description:I.error,variant:"destructive"}),u(!1)},C=()=>{let I=[...r];m&&(I=I.filter(J=>J.remittance_number?.toLowerCase().includes(m.toLowerCase())||J.recipient_name?.toLowerCase().includes(m.toLowerCase())||J.recipient_phone?.includes(m))),p!=="all"&&(p==="pending_validation"?I=I.filter(J=>J.status===Se.PAYMENT_PROOF_UPLOADED):p==="in_progress"?I=I.filter(J=>[Se.PAYMENT_VALIDATED,Se.PROCESSING].includes(J.status)):p==="urgent"?I=I.filter(J=>{const Q=rm(J);return Q.level==="error"||Q.level==="warning"}):I=I.filter(J=>J.status===p)),l(I)},_=async I=>{const J=await e({title:"Validar Pago",message:`¿Confirma que el pago de ${I.amount} ${I.currency} es válido?`,input:!0,inputLabel:"Notas (opcional)",inputPlaceholder:"Añadir notas sobre la validación...",confirmText:"Validar Pago",cancelText:t("common.cancel"),type:"success"});if(J===!1)return;const Q=await pO(I.id,J||"");Q.success?(re({title:t("common.success"),description:"Pago validado correctamente"}),j(),b(null)):re({title:t("common.error"),description:Q.error,variant:"destructive"})},O=async I=>{const J=await e({title:"Rechazar Pago",message:`¿Por qué se rechaza el pago de ${I.remittance_number}?`,input:!0,inputLabel:"Razón del rechazo *",inputPlaceholder:"Ej: Comprobante ilegible, datos incorrectos...",confirmText:"Rechazar",cancelText:t("common.cancel"),type:"danger",required:!0});if(!J)return;const Q=await gO(I.id,J);Q.success?(re({title:t("common.success"),description:"Pago rechazado"}),j(),b(null)):re({title:t("common.error"),description:Q.error,variant:"destructive"})},A=async I=>{if(!await e({title:"Iniciar Procesamiento",message:`Iniciar procesamiento de remesa ${I.remittance_number}?`,confirmText:"Iniciar",cancelText:t("common.cancel")}))return;const Q=await yO(I.id,"");Q.success?(re({title:t("common.success"),description:"Procesamiento iniciado"}),j(),b(null)):re({title:t("common.error"),description:Q.error,variant:"destructive"})},E=async I=>{const J=await e({title:"Confirmar Entrega",message:`Confirmar entrega de ${I.amount_to_deliver} ${I.delivery_currency} a ${I.recipient_name}?`,input:!0,inputLabel:"Notas de entrega",inputPlaceholder:"Detalles de la entrega...",confirmText:"Confirmar Entrega",cancelText:t("common.cancel"),type:"success"});if(J===!1)return;const Q=await xO(I.id,null,J||"");Q.success?(re({title:t("common.success"),description:"Entrega confirmada"}),j(),b(null)):re({title:t("common.error"),description:Q.error,variant:"destructive"})},N=async I=>{if(!await e({title:"Completar Remesa",message:`¿Marcar remesa ${I.remittance_number} como completada?`,confirmText:"Completar",cancelText:t("common.cancel"),type:"success"}))return;const Q=await vO(I.id,"");Q.success?(re({title:t("common.success"),description:"Remesa completada"}),j(),b(null)):re({title:t("common.error"),description:Q.error,variant:"destructive"})},D=I=>{const J={[Se.PAYMENT_PENDING]:{bg:"bg-gray-100",text:"text-gray-700",label:"Pendiente de Pago"},[Se.PAYMENT_PROOF_UPLOADED]:{bg:"bg-yellow-100",text:"text-yellow-700",label:"Revisar Comprobante"},[Se.PAYMENT_VALIDATED]:{bg:"bg-blue-100",text:"text-blue-700",label:"Pago Validado"},[Se.PAYMENT_REJECTED]:{bg:"bg-red-100",text:"text-red-700",label:"Pago Rechazado"},[Se.PROCESSING]:{bg:"bg-purple-100",text:"text-purple-700",label:"En Proceso"},[Se.DELIVERED]:{bg:"bg-green-100",text:"text-green-700",label:"Entregado"},[Se.COMPLETED]:{bg:"bg-emerald-100",text:"text-emerald-700",label:"Completado"},[Se.CANCELLED]:{bg:"bg-gray-100",text:"text-gray-500",label:"Cancelado"}},Q=J[I]||J[Se.PAYMENT_PENDING];return n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${Q.bg} ${Q.text}`,children:Q.label})},T=I=>{const J=rm(I),Q={success:"bg-green-100 text-green-700",info:"bg-blue-100 text-blue-700",warning:"bg-yellow-100 text-yellow-700",error:"bg-red-100 text-red-700"};return n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Q[J.level]}`,children:J.message})},L=I=>{switch(I.status){case Se.PAYMENT_PROOF_UPLOADED:return n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>_(I),className:"flex items-center gap-1 px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[n.jsx(Qt,{className:"h-4 w-4"}),"Validar"]}),n.jsxs("button",{onClick:()=>O(I),className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[n.jsx(Ur,{className:"h-4 w-4"}),"Rechazar"]})]});case Se.PAYMENT_VALIDATED:return n.jsxs("button",{onClick:()=>A(I),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[n.jsx(pr,{className:"h-4 w-4"}),"Procesar"]});case Se.PROCESSING:return n.jsxs("button",{onClick:()=>E(I),className:"flex items-center gap-1 px-3 py-1 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[n.jsx(lo,{className:"h-4 w-4"}),"Confirmar Entrega"]});case Se.DELIVERED:return n.jsxs("button",{onClick:()=>N(I),className:"flex items-center gap-1 px-3 py-1 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm",children:[n.jsx(Qt,{className:"h-4 w-4"}),"Completar"]});default:return null}};return c?n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"glass-effect p-4 rounded-xl",children:n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"md:col-span-2 relative",children:[n.jsx(Dc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"text",value:m,onChange:I=>h(I.target.value),placeholder:"Buscar por número, destinatario o teléfono...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Dm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsxs("select",{value:p,onChange:I=>g(I.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[n.jsx("option",{value:"all",children:"Todos los estados"}),n.jsx("option",{value:"pending_validation",children:"Pendientes de Validación"}),n.jsx("option",{value:"in_progress",children:"En Progreso"}),n.jsx("option",{value:"urgent",children:"Urgentes"}),n.jsx("option",{value:Se.COMPLETED,children:"Completadas"}),n.jsx("option",{value:Se.CANCELLED,children:"Canceladas"})]})]})]})}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Pendientes Validación",value:r.filter(I=>I.status===Se.PAYMENT_PROOF_UPLOADED).length,color:"bg-yellow-100 text-yellow-700"},{label:"En Proceso",value:r.filter(I=>[Se.PAYMENT_VALIDATED,Se.PROCESSING].includes(I.status)).length,color:"bg-blue-100 text-blue-700"},{label:"Completadas",value:r.filter(I=>I.status===Se.COMPLETED).length,color:"bg-green-100 text-green-700"},{label:"Total",value:r.length,color:"bg-gray-100 text-gray-700"}].map((I,J)=>n.jsxs("div",{className:"glass-effect p-4 rounded-xl",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:I.label}),n.jsx("p",{className:`text-2xl font-bold ${I.color}`,children:I.value})]},J))}),o.length===0?n.jsxs("div",{className:"text-center py-12 glass-effect rounded-xl",children:[n.jsx(pr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No se encontraron remesas"})]}):n.jsx("div",{className:"space-y-4",children:o.map(I=>n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold gradient-text",children:I.remittance_number}),n.jsx("p",{className:"text-sm text-gray-600",children:I.remittance_types?.name})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[D(I.status),[Se.PAYMENT_VALIDATED,Se.PROCESSING].includes(I.status)&&T(I)]})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Monto Enviado"}),n.jsxs("p",{className:"font-semibold",children:[I.amount," ",I.currency]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"A Entregar"}),n.jsxs("p",{className:"font-semibold",children:[I.amount_to_deliver?.toFixed(2)," ",I.delivery_currency]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Método"}),n.jsx("p",{className:"font-semibold capitalize",children:I.delivery_method})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Destinatario"}),n.jsx("p",{className:"font-semibold",children:I.recipient_name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Teléfono"}),n.jsx("p",{className:"font-semibold",children:I.recipient_phone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Ciudad"}),n.jsx("p",{className:"font-semibold",children:I.recipient_city||"N/A"})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(mc,{className:"h-4 w-4"}),new Date(I.created_at).toLocaleDateString("es-CU")]}),I.payment_proof_url&&n.jsxs("a",{href:I.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-600 hover:underline",children:[n.jsx(jo,{className:"h-4 w-4"}),"Ver Comprobante"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>b(I),className:"flex items-center gap-1 px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[n.jsx(Cs,{className:"h-4 w-4"}),"Ver Detalles"]}),L(I)]})]})]},I.id))}),x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>b(null),children:n.jsxs(le.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:I=>I.stopPropagation(),children:[n.jsx("h2",{className:"text-2xl font-bold gradient-text mb-4",children:"Detalles de Remesa"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Número"}),n.jsx("p",{className:"font-semibold",children:x.remittance_number})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Estado"}),D(x.status)]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Tipo"}),n.jsx("p",{className:"font-semibold",children:x.remittance_types?.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Fecha de Creación"}),n.jsx("p",{className:"font-semibold",children:new Date(x.created_at).toLocaleString("es-CU")})]})]}),n.jsx("div",{className:"pt-4 border-t",children:n.jsx("button",{onClick:()=>b(null),className:"w-full py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cerrar"})})]})]})})]})},OO=()=>{const{t}=kt(),{isSuperAdmin:e}=Dt(),{showModal:r}=Xm(),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,m]=w.useState(!1),[h,p]=w.useState(null),[g,x]=w.useState({name:"",currency_code:"USD",delivery_currency:"CUP",exchange_rate:"",commission_percentage:"0",commission_fixed:"0",min_amount:"",max_amount:"",delivery_method:Va.CASH,max_delivery_days:"3",warning_days:"2",description:"",icon:"dollar-sign",is_active:!0,display_order:0});w.useEffect(()=>{b()},[]);const b=async()=>{c(!0);const N=await aO();N.success?o(N.types):re({title:t("common.error"),description:N.error,variant:"destructive"}),c(!1)},j=()=>{p(null),x({name:"",currency_code:"USD",delivery_currency:"CUP",exchange_rate:"",commission_percentage:"0",commission_fixed:"0",min_amount:"",max_amount:"",delivery_method:Va.CASH,max_delivery_days:"3",warning_days:"2",description:"",icon:"dollar-sign",is_active:!0,display_order:i.length}),m(!0)},C=N=>{p(N),x({name:N.name,currency_code:N.currency_code,delivery_currency:N.delivery_currency,exchange_rate:N.exchange_rate.toString(),commission_percentage:(N.commission_percentage||0).toString(),commission_fixed:(N.commission_fixed||0).toString(),min_amount:N.min_amount.toString(),max_amount:N.max_amount?N.max_amount.toString():"",delivery_method:N.delivery_method,max_delivery_days:N.max_delivery_days.toString(),warning_days:N.warning_days.toString(),description:N.description||"",icon:N.icon||"dollar-sign",is_active:N.is_active,display_order:N.display_order}),m(!0)},_=()=>{m(!1),p(null)},O=async N=>{if(N.preventDefault(),!g.name||!g.exchange_rate||!g.min_amount){re({title:t("common.error"),description:"Por favor complete todos los campos requeridos",variant:"destructive"});return}const D={name:g.name,currency_code:g.currency_code,delivery_currency:g.delivery_currency,exchange_rate:parseFloat(g.exchange_rate),commission_percentage:parseFloat(g.commission_percentage)||0,commission_fixed:parseFloat(g.commission_fixed)||0,min_amount:parseFloat(g.min_amount),max_amount:g.max_amount?parseFloat(g.max_amount):null,delivery_method:g.delivery_method,max_delivery_days:parseInt(g.max_delivery_days),warning_days:parseInt(g.warning_days),description:g.description,icon:g.icon,is_active:g.is_active,display_order:g.display_order};let T;h?T=await Zx(h.id,D):T=await lO(D),T.success?(re({title:t("common.success"),description:h?"Tipo de remesa actualizado":"Tipo de remesa creado"}),b(),_()):re({title:t("common.error"),description:T.error,variant:"destructive"})},A=async N=>{if(!window.confirm(`¿Está seguro que desea eliminar "${N.name}"? Esta acción no se puede deshacer.`))return;const T=await cO(N.id);T.success?(re({title:t("common.success"),description:"Tipo de remesa eliminado"}),b()):re({title:t("common.error"),description:T.error,variant:"destructive"})},E=async N=>{const D=await Zx(N.id,{is_active:!N.is_active});D.success?(re({title:t("common.success"),description:N.is_active?"Tipo desactivado":"Tipo activado"}),b()):re({title:t("common.error"),description:D.error,variant:"destructive"})};return l?n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:`${Ze()} text-2xl mb-2`,children:"Configuración de Tipos de Remesas"}),n.jsx("p",{className:"text-gray-600",children:"Administre los tipos de remesas disponibles para sus clientes"})]}),n.jsxs("button",{onClick:j,className:`${Je()} flex items-center gap-2`,children:[n.jsx(ws,{className:"h-5 w-5"}),"Nuevo Tipo"]})]}),u&&n.jsxs(le.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl mb-6 border-2 border-blue-200",children:[n.jsx("h3",{className:"text-xl font-bold mb-4 gradient-text",children:h?"Editar Tipo de Remesa":"Nuevo Tipo de Remesa"}),n.jsxs("form",{onSubmit:O,className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre *"}),n.jsx("input",{type:"text",value:g.name,onChange:N=>x({...g,name:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Dólares a CUP (Efectivo)",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Moneda de Origen *"}),n.jsxs("select",{value:g.currency_code,onChange:N=>x({...g,currency_code:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"USD",children:"USD - Dólar Estadounidense"}),n.jsx("option",{value:"EUR",children:"EUR - Euro"}),n.jsx("option",{value:"CAD",children:"CAD - Dólar Canadiense"}),n.jsx("option",{value:"GBP",children:"GBP - Libra Esterlina"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Moneda de Entrega *"}),n.jsxs("select",{value:g.delivery_currency,onChange:N=>x({...g,delivery_currency:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"CUP",children:"CUP - Peso Cubano"}),n.jsx("option",{value:"USD",children:"USD - Dólar (Efectivo)"}),n.jsx("option",{value:"MLC",children:"MLC - Moneda Libremente Convertible"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tasa de Cambio *"}),n.jsxs("div",{className:"relative",children:[n.jsx(qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"number",step:"0.01",value:g.exchange_rate,onChange:N=>x({...g,exchange_rate:N.target.value}),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"320.00",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comisión (%)"}),n.jsx("input",{type:"number",step:"0.01",value:g.commission_percentage,onChange:N=>x({...g,commission_percentage:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"2.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comisión Fija"}),n.jsx("input",{type:"number",step:"0.01",value:g.commission_fixed,onChange:N=>x({...g,commission_fixed:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"5.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto Mínimo *"}),n.jsx("input",{type:"number",step:"0.01",value:g.min_amount,onChange:N=>x({...g,min_amount:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10.00",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto Máximo"}),n.jsx("input",{type:"number",step:"0.01",value:g.max_amount,onChange:N=>x({...g,max_amount:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1000.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Entrega *"}),n.jsxs("select",{value:g.delivery_method,onChange:N=>x({...g,delivery_method:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:Va.CASH,children:"Efectivo"}),n.jsx("option",{value:Va.TRANSFER,children:"Transferencia"}),n.jsx("option",{value:Va.CARD,children:"Tarjeta"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Días Máximos de Entrega *"}),n.jsx("input",{type:"number",value:g.max_delivery_days,onChange:N=>x({...g,max_delivery_days:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Días para Alerta *"}),n.jsx("input",{type:"number",value:g.warning_days,onChange:N=>x({...g,warning_days:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",required:!0})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),n.jsx("textarea",{value:g.description,onChange:N=>x({...g,description:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Descripción del tipo de remesa..."})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:g.is_active,onChange:N=>x({...g,is_active:N.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tipo activo y disponible para clientes"})]})}),n.jsxs("div",{className:"md:col-span-2 flex gap-3 justify-end",children:[n.jsxs("button",{type:"button",onClick:_,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[n.jsx(ir,{className:"h-4 w-4"}),t("common.cancel")]}),n.jsxs("button",{type:"submit",className:`${Je()} flex items-center gap-2`,children:[n.jsx(gs,{className:"h-4 w-4"}),t("common.save")]})]})]})]}),i.length===0?n.jsxs("div",{className:"text-center py-12 glass-effect rounded-xl",children:[n.jsx(ps,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"No hay tipos de remesas configurados"}),n.jsxs("button",{onClick:j,className:`${Je()} inline-flex items-center gap-2`,children:[n.jsx(ws,{className:"h-5 w-5"}),"Crear Primer Tipo"]})]}):n.jsx("div",{className:"grid gap-4",children:i.map(N=>n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`glass-effect p-6 rounded-xl ${N.is_active?"":"opacity-60"}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"text-lg font-bold gradient-text",children:N.name}),!N.is_active&&n.jsx("span",{className:"px-2 py-1 bg-gray-200 text-gray-600 text-xs rounded-full",children:"Inactivo"})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Conversión"}),n.jsxs("p",{className:"font-semibold",children:["1 ",N.currency_code," = ",N.exchange_rate," ",N.delivery_currency]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Límites"}),n.jsxs("p",{className:"font-semibold",children:[N.min_amount," - ",N.max_amount||"∞"," ",N.currency_code]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Comisión"}),n.jsxs("p",{className:"font-semibold",children:[N.commission_percentage,"% + ",N.commission_fixed," ",N.currency_code]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Entrega"}),n.jsx("p",{className:"font-semibold capitalize",children:N.delivery_method})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tiempo Máximo"}),n.jsxs("p",{className:"font-semibold",children:[N.max_delivery_days," días"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Alerta"}),n.jsxs("p",{className:"font-semibold",children:[N.warning_days," días"]})]})]}),N.description&&n.jsx("p",{className:"text-sm text-gray-600 mt-3",children:N.description})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx("button",{onClick:()=>E(N),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:N.is_active?"Desactivar":"Activar",children:N.is_active?n.jsx(Cs,{className:"h-5 w-5 text-green-600"}):n.jsx(yb,{className:"h-5 w-5 text-gray-400"})}),n.jsx("button",{onClick:()=>C(N),className:"p-2 hover:bg-blue-50 text-blue-600 rounded-lg transition-colors",title:"Editar",children:n.jsx(Qa,{className:"h-5 w-5"})}),e&&n.jsx("button",{onClick:()=>A(N),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",title:"Eliminar",children:n.jsx($i,{className:"h-5 w-5"})})]})]})},N.id))})]})},DO=({onNavigate:t})=>{const{t:e}=kt(),{products:r,combos:i,financialSettings:o,visualSettings:l}=ar(),{user:c,isAdmin:u,isSuperAdmin:m}=Dt(),[h,p]=w.useState("overview"),[g,x]=w.useState({totalProducts:0,totalCombos:0,totalUsers:0,pendingOrders:0,completedOrders:0,dailyRevenue:0,monthlyRevenue:0,loading:!0}),[b,j]=w.useState({weekly:0,monthly:0,yearly:0,total:0,loading:!0}),[C,_]=w.useState([]),[O,A]=w.useState(null),[E,N]=w.useState(1),D=de=>{if(!de.expiryDate)return!1;const U=new Date,z=new Date(de.expiryDate)-U,ce=Math.ceil(z/(1e3*60*60*24));return ce<=30&&ce>0},T=r.filter(D);w.useEffect(()=>{(async()=>{const{data:U}=await q.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(U){_(U);const ne=U.find(z=>z.is_base);ne&&(A(ne.id),N(1))}})()},[]),w.useEffect(()=>{if(O&&C.length>0){const de=C.find(U=>U.id===O);de&&N(de.exchange_rate||1)}},[O,C]);const L=async()=>{try{j(ne=>({...ne,loading:!0}));const{data:de,error:U}=await q.from("site_visits").select("visit_time");if(U){console.warn("Visit tracking not configured:",U.message),j({weekly:0,monthly:0,yearly:0,total:0,loading:!1,unavailable:!0});return}if(de){const ne=new Date,z=new Date(ne-10080*60*1e3),ce=new Date(ne-720*60*60*1e3),oe=new Date(ne-365*24*60*60*1e3),k=de.filter(xe=>new Date(xe.visit_time)>=z).length,$=de.filter(xe=>new Date(xe.visit_time)>=ce).length,ee=de.filter(xe=>new Date(xe.visit_time)>=oe).length,ue=de.length;j({weekly:k,monthly:$,yearly:ee,total:ue,loading:!1,unavailable:!1})}}catch(de){console.error("Error fetching visit stats:",de),j({weekly:0,monthly:0,yearly:0,total:0,loading:!1,unavailable:!0})}},I=async()=>{try{x(B=>({...B,loading:!0}));const[de,U,ne,z]=await Promise.all([q.from("products").select("id",{count:"exact",head:!0}),q.from("combo_products").select("id",{count:"exact",head:!0}),q.from("user_profiles").select("id",{count:"exact",head:!0}),q.from("orders").select("id, status, payment_status, total_amount, created_at")]),ce=de.count||0,oe=U.count||0,k=ne.count||0,$=z.data||[],ee=$.filter(B=>B.payment_status==="pending").length,ue=$.filter(B=>B.payment_status==="validated"&&B.status==="pending").length,xe=$.filter(B=>B.status==="processing").length,Ce=$.filter(B=>B.status==="shipped").length,fe=$.filter(B=>B.status==="delivered").length,Ee=$.filter(B=>B.status==="completed").length,De=$.filter(B=>B.status==="cancelled").length,X=ee+ue+xe+Ce+fe,Y=ee+ue,Ie=new Date,_e=new Date(Ie-1440*60*1e3),R=new Date(Ie-720*60*60*1e3),pe=$.filter(B=>new Date(B.created_at)>=_e&&["delivered","completed","processing"].includes(B.status)).reduce((B,ae)=>B+(parseFloat(ae.total_amount)||0),0),se=$.filter(B=>new Date(B.created_at)>=R&&["delivered","completed","processing"].includes(B.status)).reduce((B,ae)=>B+(parseFloat(ae.total_amount)||0),0);x({totalProducts:ce,totalCombos:oe,totalUsers:k,pendingOrders:Y,completedOrders:Ee,paymentPending:ee,paymentValidated:ue,processing:xe,shipped:Ce,delivered:fe,cancelled:De,totalActive:X,dailyRevenue:pe,monthlyRevenue:se,loading:!1})}catch(de){console.error("Error fetching dashboard stats:",de),x(U=>({...U,loading:!1}))}};w.useEffect(()=>{c&&(u||m)&&(I(),L())},[c,u,m]);const J=g.dailyRevenue*(o.productProfit/100),Q=g.monthlyRevenue*(o.productProfit/100),we=C.find(de=>de.id===O),ie=we?.symbol||"$",be=we?.code||"USD",G=de=>(de*E).toFixed(2);return!c||!u&&!m?n.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 px-4",children:n.jsxs(le.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-effect p-8 rounded-2xl max-w-md w-full text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-500 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(AP,{className:"w-8 h-8 text-white"})}),n.jsx("h2",{className:"text-2xl font-bold mb-2",style:Ze(l),children:e("dashboard.privateAccess")}),n.jsx("p",{className:"text-gray-600",children:e("dashboard.adminOnly")})]})}):n.jsx("div",{className:"min-h-screen py-8 px-4",children:n.jsxs("div",{className:"container mx-auto",children:[n.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"flex justify-between items-start mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold mb-2",style:Ze(l),children:e("dashboard.title")}),n.jsx("p",{className:"text-xl text-gray-600",children:e("dashboard.subtitle")})]}),h==="overview"&&n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[e("dashboard.selectCurrency"),":"]}),n.jsx("select",{value:O||"",onChange:de=>A(de.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:C.map(de=>n.jsxs("option",{value:de.id,children:[de.code," (",de.symbol,")"]},de.id))})]}),n.jsxs("button",{onClick:()=>{I(),L()},disabled:g.loading,className:"flex items-center gap-2 px-4 py-2 bg-white rounded-xl shadow hover:shadow-md transition-shadow",children:[n.jsx(Sr,{className:`w-4 h-4 ${g.loading?"animate-spin":""}`}),n.jsx("span",{className:"text-sm font-medium",children:e("dashboard.refresh")})]})]})]}),n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex items-center gap-4 mb-8 border-b border-gray-200",children:[n.jsxs("button",{onClick:()=>p("overview"),className:`flex items-center gap-2 px-6 py-3 font-medium transition-all ${h==="overview"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[n.jsx(rc,{className:"h-5 w-5"}),e("dashboard.overviewTab")]}),n.jsxs("button",{onClick:()=>p("orders"),className:`flex items-center gap-2 px-6 py-3 font-medium transition-all ${h==="orders"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[n.jsx(vb,{className:"h-5 w-5"}),e("dashboard.ordersTab")]}),n.jsxs("button",{onClick:()=>p("remittances"),className:`flex items-center gap-2 px-6 py-3 font-medium transition-all ${h==="remittances"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[n.jsx(wb,{className:"h-5 w-5"}),"Remesas"]}),n.jsxs("button",{onClick:()=>p("remittance-types"),className:`flex items-center gap-2 px-6 py-3 font-medium transition-all ${h==="remittance-types"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[n.jsx(jb,{className:"h-5 w-5"}),"Tipos de Remesas"]})]}),h==="overview"&&n.jsxs(n.Fragment,{children:[T.length>0&&n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-lg mb-8",role:"alert",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"py-1",children:n.jsx(An,{className:"h-6 w-6 text-yellow-500 mr-4"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold",children:e("dashboard.expirationWarning.title")}),n.jsx("p",{className:"text-sm",children:e("dashboard.expirationWarning.description",{count:T.length})})]})]})}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[{title:e("dashboard.stats.dailyRevenue"),value:g.dailyRevenue,icon:qt,color:"from-green-500 to-emerald-600"},{title:e("dashboard.stats.monthlyRevenue"),value:g.monthlyRevenue,icon:Xa,color:"from-blue-500 to-cyan-600"},{title:e("dashboard.stats.dailyProfit"),value:J,icon:rc,color:"from-purple-500 to-pink-600"},{title:e("dashboard.stats.monthlyProfit"),value:Q,icon:Xa,color:"from-orange-500 to-red-600"}].map((de,U)=>n.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:U*.1},className:"glass-effect p-6 rounded-2xl hover-lift",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${de.color} rounded-xl flex items-center justify-center`,children:n.jsx(de.icon,{className:"w-6 h-6 text-white"})})}),n.jsxs("h3",{className:"text-2xl font-bold mb-1",children:[ie,G(de.value)," ",be]}),n.jsx("p",{className:"text-gray-600 text-sm",children:de.title})]},U))}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[{title:e("dashboard.stats.totalProducts"),value:g.totalProducts,icon:pr},{title:e("dashboard.stats.totalCombos"),value:g.totalCombos,icon:Mc},{title:e("dashboard.stats.pendingOrders"),value:g.pendingOrders,icon:rc},{title:e("dashboard.stats.totalUsers"),value:g.totalUsers,icon:Cs}].map((de,U)=>n.jsx(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4+U*.1},className:"glass-effect p-6 rounded-2xl hover-lift",children:n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center mr-3",children:n.jsx(de.icon,{className:"w-5 h-5 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold",children:de.value}),n.jsx("p",{className:"text-gray-600 text-sm",children:de.title})]})]})},U))}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"glass-effect p-8 rounded-2xl",children:[n.jsx("h3",{className:"text-2xl font-semibold mb-6",children:e("dashboard.profitBreakdown")}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold mb-2",children:e("dashboard.dailyBreakdown")}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[e("dashboard.grossRevenue"),":"]}),n.jsxs("span",{className:"font-semibold",children:[ie,G(g.dailyRevenue)," ",be]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[e("dashboard.costs"),":"]}),n.jsxs("span",{className:"font-semibold text-red-600",children:["-",ie,G(g.dailyRevenue-J)," ",be]})]}),n.jsxs("div",{className:"flex justify-between border-t pt-2 mt-1",children:[n.jsxs("span",{children:[e("dashboard.netProfit"),":"]}),n.jsxs("span",{className:"font-bold text-green-600",children:[ie,G(J)," ",be]})]}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[n.jsxs("span",{children:[e("dashboard.profitMargin"),":"]}),n.jsxs("span",{children:[o.productProfit,"%"]})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold mb-2",children:e("dashboard.monthlyBreakdown")}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[e("dashboard.grossRevenue"),":"]}),n.jsxs("span",{className:"font-semibold",children:[ie,G(g.monthlyRevenue)," ",be]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[e("dashboard.costs"),":"]}),n.jsxs("span",{className:"font-semibold text-red-600",children:["-",ie,G(g.monthlyRevenue-Q)," ",be]})]}),n.jsxs("div",{className:"flex justify-between border-t pt-2 mt-1",children:[n.jsxs("span",{children:[e("dashboard.netProfit"),":"]}),n.jsxs("span",{className:"font-bold text-green-600",children:[ie,G(Q)," ",be]})]}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[n.jsxs("span",{children:[e("dashboard.profitMargin"),":"]}),n.jsxs("span",{children:[o.productProfit,"%"]})]})]})]})]})]}),n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"glass-effect p-8 rounded-2xl",children:[n.jsxs("h3",{className:"text-2xl font-semibold mb-6",children:["📦 ",e("dashboard.orderSummary")]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center bg-yellow-50 p-3 rounded-lg border-l-4 border-yellow-500",children:[n.jsxs("span",{className:"font-semibold",children:["🟡 ",e("dashboard.orderStatus.paymentPending")]}),n.jsx("span",{className:"text-lg font-bold text-yellow-600",children:g.paymentPending||0})]}),n.jsxs("div",{className:"flex justify-between items-center bg-green-50 p-3 rounded-lg border-l-4 border-green-500",children:[n.jsxs("span",{className:"font-semibold",children:["✅ ",e("dashboard.orderStatus.paymentValidated")]}),n.jsx("span",{className:"text-lg font-bold text-green-600",children:g.paymentValidated||0})]}),n.jsxs("div",{className:"flex justify-between items-center bg-blue-50 p-3 rounded-lg border-l-4 border-blue-500",children:[n.jsxs("span",{className:"font-semibold",children:["🔵 ",e("dashboard.orderStatus.processing")]}),n.jsx("span",{className:"text-lg font-bold text-blue-600",children:g.processing||0})]}),n.jsxs("div",{className:"flex justify-between items-center bg-purple-50 p-3 rounded-lg border-l-4 border-purple-500",children:[n.jsxs("span",{className:"font-semibold",children:["🟣 ",e("dashboard.orderStatus.shipped")]}),n.jsx("span",{className:"text-lg font-bold text-purple-600",children:g.shipped||0})]}),n.jsxs("div",{className:"flex justify-between items-center bg-teal-50 p-3 rounded-lg border-l-4 border-teal-500",children:[n.jsxs("span",{className:"font-semibold",children:["🟢 ",e("dashboard.orderStatus.delivered")]}),n.jsx("span",{className:"text-lg font-bold text-teal-600",children:g.delivered||0})]}),n.jsxs("div",{className:"flex justify-between items-center bg-green-100 p-3 rounded-lg border-l-4 border-green-600",children:[n.jsxs("span",{className:"font-semibold",children:["✅ ",e("dashboard.completed")]}),n.jsx("span",{className:"text-lg font-bold text-green-700",children:g.completedOrders||0})]}),n.jsxs("div",{className:"flex justify-between items-center bg-red-50 p-3 rounded-lg border-l-4 border-red-500",children:[n.jsxs("span",{className:"font-semibold",children:["❌ ",e("dashboard.orderStatus.cancelled")]}),n.jsx("span",{className:"text-lg font-bold text-red-600",children:g.cancelled||0})]}),n.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg border-t-2 border-gray-300 mt-2",children:[n.jsxs("span",{className:"font-bold",children:["📊 ",e("dashboard.orderStatus.totalActive")]}),n.jsx("span",{className:"text-xl font-bold text-gray-800",children:g.totalActive||0})]})]})]})]}),n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"mt-8",children:[n.jsx("h2",{className:"text-3xl font-bold mb-6",style:Ze(l),children:e("dashboard.analyticsTitle")}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"glass-effect p-8 rounded-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold",children:e("dashboard.visits.title")}),n.jsx(Cs,{className:"w-8 h-8 text-blue-500"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.thisWeek")}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:b.weekly})]}),n.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.thisMonth")}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b.monthly})]}),n.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.thisYear")}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:b.yearly})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border-2 border-green-500",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.allTime")}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.total})]})]})]}),n.jsxs("div",{className:"glass-effect p-8 rounded-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold",children:e("dashboard.stats.siteVisits")}),n.jsx(Xa,{className:"w-8 h-8 text-green-500"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:e("dashboard.visits.weekly")}),n.jsx("p",{className:"text-xs text-gray-500",children:e("dashboard.visits.thisWeek")})]}),n.jsx("p",{className:"text-xl font-bold text-blue-600",children:b.weekly})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:e("dashboard.visits.monthly")}),n.jsx("p",{className:"text-xs text-gray-500",children:e("dashboard.visits.thisMonth")})]}),n.jsx("p",{className:"text-xl font-bold text-purple-600",children:b.monthly})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-2 border-green-500",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:e("dashboard.visits.total")}),n.jsx("p",{className:"text-xs text-gray-500",children:e("dashboard.visits.allTime")})]}),n.jsx("p",{className:"text-xl font-bold text-green-600",children:b.total})]})]})]})]})]})]}),h==="orders"&&n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:n.jsx(NO,{})}),h==="remittances"&&n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:n.jsx(RO,{})}),h==="remittance-types"&&n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:n.jsx(OO,{})})]})})},MO=()=>{const{t,language:e}=kt(),{products:r,refreshProducts:i,financialSettings:o,categories:l,refreshCategories:c,combos:u,refreshCombos:m,testimonials:h,refreshTestimonials:p,visualSettings:g}=ar(),[x,b]=w.useState([]),[j,C]=w.useState(null),[_,O]=w.useState(null),[A,E]=w.useState({});w.useEffect(()=>{const R=async()=>{const{data:se}=await q.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(se){b(se);const ae=se.find(Ae=>Ae.is_base);ae&&(C(ae.id),O(ae.id))}const{data:B}=await q.from("exchange_rates").select("*").eq("is_active",!0);if(B){const ae={};B.forEach(Ae=>{ae[`${Ae.from_currency_id}-${Ae.to_currency_id}`]=Ae.rate}),E(ae)}},pe=async()=>{await p(!0),await m(!0)};R(),pe()},[]);const[N,D]=w.useState("inventory"),[T,L]=w.useState(null),[I,J]=w.useState(null),[Q,we]=w.useState({dbId:null,es:"",en:"",description_es:"",description_en:""}),[ie,be]=w.useState(null),G=(R,pe,se,B=null)=>{R==="product"?L(ae=>({...ae,[pe]:se})):R==="combo"&&J(B?ae=>({...ae,[pe]:{...ae[pe],[B]:se}}):ae=>({...ae,[pe]:se}))},de=()=>{L({id:null,name:"",description_es:"",description_en:"",basePrice:"",base_currency_id:j||"",category:"",stock:"",min_stock_alert:"",expiryDate:"",image:""}),be(null)},U=R=>{L({id:R.id,name:R.name_es||R.name,description_es:R.description_es||"",description_en:R.description_en||"",basePrice:R.base_price||R.basePrice||"",profitMargin:R.profit_margin||40,base_currency_id:R.base_currency_id||j||"",category:R.category?.id||R.category_id||"",stock:R.stock||"",min_stock_alert:R.min_stock_alert||"",expiryDate:R.expiry_date||R.expiryDate||"",image:R.image_url||R.image_file||R.image||"",sku:R.sku||""}),be(R.image_url||R.image_file||R.image||null)},ne=async R=>{const pe=R.target.files?.[0];if(pe)try{const se=await po(pe,"product");if(!se.success){re({title:"Error de validación",description:se.errors.join(`
`),variant:"destructive"});return}be(se.base64),L(B=>({...B,image:se.base64})),re({title:"Imagen optimizada",description:`${se.metadata.originalDimensions} → ${se.metadata.finalDimensions} (${se.metadata.compression} compresión)`})}catch(se){console.error("Error processing product image:",se),re({title:"Error al procesar imagen",description:se.message,variant:"destructive"})}},z=async()=>{if(!T.name||!T.basePrice||!T.category){re({title:t("vendor.validation.error"),description:t("vendor.validation.fillFields"),variant:"destructive"});return}if(!T.base_currency_id){re({title:"Error",description:e==="es"?"Debe seleccionar una moneda":"You must select a currency",variant:"destructive"});return}try{if(!l.find(se=>se.id===T.category)){re({title:"Error",description:"Categoría no válida",variant:"destructive"});return}const pe={name:T.name,description_es:T.description_es||"",description_en:T.description_en||"",basePrice:parseFloat(T.basePrice),stock:parseInt(T.stock||0,10),min_stock_alert:parseInt(T.min_stock_alert||10,10),profitMargin:parseFloat(T.profitMargin||40),category_id:T.category,base_currency_id:T.base_currency_id,image:T.image||"",sku:T.sku||`SKU-${Date.now()}`,slug:T.name.toLowerCase().replace(/\s+/g,"-"),expiryDate:T.expiryDate||null};if(console.log("💾 Saving product with data:",pe),console.log("📦 Stock value:",pe.stock,typeof pe.stock),console.log("🏷️ Category ID:",pe.category_id,typeof pe.category_id),console.log("📅 Expiry Date:",pe.expiryDate,typeof pe.expiryDate),T.id){const{error:se}=await nA(T.id,pe);if(se)throw se;re({title:t("vendor.productUpdated")})}else{const{error:se}=await sA(pe);if(se)throw se;re({title:t("vendor.productAdded")})}await i(),L(null),be(null)}catch(R){console.error("Error saving product:",R),re({title:"Error",description:R.message,variant:"destructive"})}},ce=async()=>{if(!Q.es||!Q.en){re({title:"Error",description:e==="es"?"Por favor complete los campos de nombre en ambos idiomas":"Please complete the name fields in both languages",variant:"destructive"});return}try{if(Q.dbId){const{error:R}=await oA(Q.dbId,{es:Q.es,en:Q.en,description_es:Q.description_es,description_en:Q.description_en});if(R)throw R;re({title:e==="es"?"Categoría actualizada":"Category Updated",description:e==="es"?"La categoría se actualizó exitosamente":"The category was successfully updated"})}else{const{error:R}=await aA({es:Q.es,en:Q.en,description_es:Q.description_es,description_en:Q.description_en});if(R)throw R;re({title:e==="es"?"Categoría creada":"Category Created",description:e==="es"?"La categoría se creó exitosamente":"The category was successfully created"})}await c(),we({dbId:null,es:"",en:"",description_es:"",description_en:""})}catch(R){console.error("Error saving category:",R),re({title:"Error",description:R.message||(e==="es"?"Error al guardar la categoría":"Error saving category"),variant:"destructive"})}},oe=R=>{we({dbId:R.id,es:R.name_es||R.es,en:R.name_en||R.en,description_es:R.description_es||"",description_en:R.description_en||""})},k=async R=>{if(confirm(e==="es"?"¿Está seguro de que desea eliminar esta categoría?":"Are you sure you want to delete this category?"))try{const{error:se}=await lA(R);if(se)throw se;await c(),re({title:e==="es"?"Categoría eliminada":"Category Deleted",description:e==="es"?"La categoría se eliminó exitosamente":"The category was successfully deleted"})}catch(se){console.error("Error deleting category:",se),re({title:"Error",description:se.message||(e==="es"?"Error al eliminar la categoría":"Error deleting category"),variant:"destructive"})}},[$,ee]=w.useState(null),ue=()=>{J({id:null,name:"",profitMargin:"",shipping:{type:"paid",value:0},products:[],productQuantities:{},image:""}),ee(null)},xe=R=>{const pe={},se=[];R.items&&R.items.length>0&&R.items.forEach(B=>{se.push(B.product.id),pe[B.product.id]=B.quantity||1}),J({...R,products:se,productQuantities:pe}),ee(R.image_url||R.image||null)},Ce=async R=>{const pe=R.target.files?.[0];if(pe)try{const se=await po(pe,"combo");if(!se.success){re({title:"Error de validación",description:se.errors.join(`
`),variant:"destructive"});return}ee(se.base64),J(B=>({...B,image:se.base64})),re({title:"Imagen optimizada",description:`${se.metadata.originalDimensions} → ${se.metadata.finalDimensions} (${se.metadata.compression} compresión)`})}catch(se){console.error("Error processing combo image:",se),re({title:"Error al procesar imagen",description:se.message,variant:"destructive"})}},fe=R=>{J(pe=>{const se=pe.products.includes(R),B=se?pe.products.filter(Ae=>Ae!==R):[...pe.products,R],ae={...pe.productQuantities};return se?delete ae[R]:ae[R]=1,{...pe,products:B,productQuantities:ae}})},Ee=(R,pe)=>{J(se=>({...se,productQuantities:{...se.productQuantities,[R]:parseInt(pe)||1}}))},De=async()=>{if(!I.name){re({title:t("vendor.validation.error"),description:t("vendor.validation.fillFields"),variant:"destructive"});return}try{const R=(I.products||[]).map(se=>({productId:se,quantity:I.productQuantities[se]||1})),pe={name:I.name,description:I.description||"",image:I.image||"",productsWithQuantities:R,profitMargin:parseFloat(I.profitMargin||o.comboProfit),slug:I.name.toLowerCase().replace(/\s+/g,"-")};if(I.id){const{error:se}=await uA(I.id,pe);if(se)throw se;re({title:t("vendor.comboUpdated")})}else{const{error:se}=await dA(pe);if(se)throw se;re({title:t("vendor.comboAdded")})}await m(!0),J(null),ee(null)}catch(R){console.error("Error saving combo:",R),re({title:"Error",description:R.message,variant:"destructive"})}},X=(R,pe,se)=>{if(!R||!pe||!se||pe===se)return R;const B=`${pe}-${se}`,ae=A[B];return ae?parseFloat(R)*ae:R},Y=R=>{if(!R||!_)return{base:0,final:0};let pe=0;(R.products||[]).forEach(ae=>{const Ae=r.find(te=>te.id===ae);if(Ae){const te=parseFloat(Ae.base_price||0),je=Ae.base_currency_id,Le=R.productQuantities?.[ae]||1;let tt=te;je&&je!==_&&(tt=X(te,je,_)),pe+=tt*Le}});const se=parseFloat(R.profitMargin||o.comboProfit)/100,B=pe*(1+se);return{base:pe.toFixed(2),final:B.toFixed(2)}},Ie=async(R,pe)=>{try{const{error:se}=await hA(R,!pe);if(se)throw se;re({title:e==="es"?"Actualizado":"Updated",description:e==="es"?`Testimonio ${pe?"oculto":"visible"}`:`Testimonial ${pe?"hidden":"visible"}`}),await p(!0)}catch(se){console.error("Error toggling testimonial visibility:",se),re({title:"Error",description:se.message||(e==="es"?"Error al actualizar testimonio":"Error updating testimonial"),variant:"destructive"})}},_e=async(R,pe)=>{try{const{error:se}=await pA(R,!pe);if(se)throw se;re({title:e==="es"?"Actualizado":"Updated",description:e==="es"?`Testimonio ${pe?"normal":"destacado"}`:`Testimonial ${pe?"unfeatured":"featured"}`}),await p(!0)}catch(se){console.error("Error toggling testimonial featured status:",se),re({title:"Error",description:se.message||(e==="es"?"Error al destacar testimonio":"Error featuring testimonial"),variant:"destructive"})}};return n.jsxs("div",{className:"container mx-auto py-8 px-4",children:[n.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold mb-4",style:Ze(g),children:t("vendor.title")}),n.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:t("vendor.subtitle")})]}),n.jsxs("div",{className:"flex justify-center mb-8 border-b",children:[n.jsxs(ve,{variant:N==="inventory"?"default":"ghost",onClick:()=>D("inventory"),className:"rounded-b-none",style:N==="inventory"?Je(g):{},children:[n.jsx(pr,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.inventory")]}),n.jsxs(ve,{variant:N==="categories"?"default":"ghost",onClick:()=>D("categories"),className:"rounded-b-none",style:N==="categories"?Je(g):{},children:[n.jsx(vb,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.categories")]}),n.jsxs(ve,{variant:N==="combos"?"default":"ghost",onClick:()=>D("combos"),className:"rounded-b-none",style:N==="combos"?Je(g):{},children:[n.jsx(fP,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.combos")]}),n.jsxs(ve,{variant:N==="management"?"default":"ghost",onClick:()=>D("management"),className:"rounded-b-none",style:N==="management"?Je(g):{},children:[n.jsx(NP,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.management")]})]}),N==="inventory"&&n.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},children:[n.jsx("div",{className:"flex justify-end mb-6",children:n.jsxs(ve,{onClick:de,style:Je(g),children:[n.jsx(ws,{className:"mr-2 h-4 w-4"}),t("vendor.actions.addProduct")]})}),T&&n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl mb-12",children:[n.jsx("h2",{className:"text-2xl font-semibold mb-6",children:T.id?t("vendor.addProduct.editTitle"):t("vendor.addProduct.title")}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("vendor.addProduct.name")," *"]}),n.jsx("input",{type:"text",value:T.name,onChange:R=>G("product","name",R.target.value),placeholder:t("vendor.addProduct.namePlaceholder"),className:"w-full input-style",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("vendor.addProduct.category")," *"]}),n.jsxs("select",{value:T.category,onChange:R=>G("product","category",R.target.value),className:"w-full input-style",required:!0,children:[n.jsx("option",{value:"",children:e==="es"?"Seleccionar categoría":"Select category"}),l.map(R=>n.jsx("option",{value:R.id,children:e==="es"?R.name_es:R.name_en},R.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripción (Español)":"Description (Spanish)"}),n.jsx("textarea",{value:T.description_es,onChange:R=>G("product","description_es",R.target.value),placeholder:e==="es"?"Descripción del producto en español":"Product description in Spanish",rows:3,className:"w-full input-style"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripción (Inglés)":"Description (English)"}),n.jsx("textarea",{value:T.description_en,onChange:R=>G("product","description_en",R.target.value),placeholder:e==="es"?"Descripción del producto en inglés":"Product description in English",rows:3,className:"w-full input-style"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("vendor.addProduct.basePrice")," *"]}),n.jsx("input",{type:"number",step:"0.01",value:T.basePrice,onChange:R=>G("product","basePrice",R.target.value),placeholder:"0.00",className:"w-full input-style",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.addProduct.currency")}),n.jsx("select",{value:T.base_currency_id,onChange:R=>G("product","base_currency_id",R.target.value),className:"w-full input-style",children:x.map(R=>n.jsxs("option",{value:R.id,children:[R.code," - ",e==="es"?R.name_es:R.name_en]},R.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.inventory.stock")}),n.jsx("input",{type:"number",value:T.stock,onChange:R=>G("product","stock",R.target.value),placeholder:"0",className:"w-full input-style"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Alerta de Stock Mínimo":"Minimum Stock Alert"}),n.jsx("input",{type:"number",value:T.min_stock_alert,onChange:R=>G("product","min_stock_alert",R.target.value),placeholder:"10",className:"w-full input-style"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.inventory.expiryDate")}),n.jsx("input",{type:"date",value:T.expiryDate,onChange:R=>G("product","expiryDate",R.target.value),className:"w-full input-style"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.addProduct.image")}),ie&&n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Vista Previa:":"Preview:"}),n.jsx("div",{className:"aspect-square max-w-sm mx-auto rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:n.jsx("img",{src:ie,alt:"Preview",className:"w-full h-full object-cover"})})]}),n.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:ne,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Recomendado: imagen cuadrada (1:1), máx 5MB":"Recommended: square image (1:1), max 5MB"})]})]}),n.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[n.jsx(ve,{variant:"outline",onClick:()=>L(null),children:t("vendor.addProduct.cancel")}),n.jsxs(ve,{onClick:z,style:Je(g),children:[n.jsx(gs,{className:"w-4 h-4 mr-2"}),t("vendor.addProduct.save")]})]})]}),n.jsx("div",{className:"glass-effect rounded-2xl overflow-hidden",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-4",children:t("vendor.inventory.product")}),n.jsx("th",{className:"p-4",children:e==="es"?"Categoría":"Category"}),n.jsx("th",{className:"p-4",children:e==="es"?"Moneda":"Currency"}),n.jsx("th",{className:"p-4",children:t("vendor.inventory.stock")}),n.jsx("th",{className:"p-4",children:t("vendor.inventory.price")}),n.jsx("th",{className:"p-4",children:t("vendor.inventory.expiryDate")}),n.jsx("th",{})]})}),n.jsx("tbody",{children:r.map(R=>{const pe=x.find(Le=>Le.id===R.base_currency_id),se=R.stock!==void 0?R.stock:0,B=R.min_stock_alert||10,ae=se===0,Ae=se>0&&se<=B,je=(Le=>{if(!Le)return null;const tt=new Date,wt=new Date(Le),mt=Math.ceil((wt-tt)/(1e3*60*60*24)),$t=mt/30;return mt<0?{status:"expired",color:"bg-red-50",icon:ps,iconColor:"text-red-600",days:mt}:$t<=1?{status:"critical",color:"bg-pink-50",icon:ps,iconColor:"text-red-500",days:mt}:$t<=3?{status:"warning",color:"bg-yellow-50",icon:An,iconColor:"text-yellow-600",days:mt}:{status:"ok",color:"",icon:null,iconColor:"",days:mt}})(R.expiry_date||R.expiryDate);return n.jsxs("tr",{className:`border-b last:border-none ${je?.color||""} ${ae?"opacity-60":""}`,children:[n.jsx("td",{className:`p-4 font-medium ${ae?"line-through text-gray-400":""}`,children:R.name_es||R.name||"Sin nombre"}),n.jsx("td",{className:"p-4 text-gray-600",children:R.category?e==="es"?R.category.name_es:R.category.name_en:"Sin categoría"}),n.jsx("td",{className:"p-4 text-center",children:n.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:pe?.code||"USD"})}),n.jsx("td",{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:ae?"line-through text-gray-400":"",children:se}),ae&&n.jsx(ps,{className:"h-4 w-4 text-red-600",title:e==="es"?"Sin stock":"Out of stock"}),Ae&&n.jsx(An,{className:"h-4 w-4 text-orange-500",title:e==="es"?"Stock bajo":"Low stock"})]})}),n.jsxs("td",{className:"p-4",children:[pe?.symbol||"$",R.final_price?Number(R.final_price).toFixed(2):R.base_price?Number(R.base_price).toFixed(2):"0.00"]}),n.jsx("td",{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:R.expiry_date||R.expiryDate?new Date(R.expiry_date||R.expiryDate).toLocaleDateString():"N/A"}),je?.icon&&n.jsx(je.icon,{className:`h-4 w-4 ${je.iconColor}`,title:je.status==="expired"?e==="es"?"Expirado":"Expired":e==="es"?`${je.days} días restantes`:`${je.days} days left`})]})}),n.jsx("td",{className:"p-4 text-right",children:n.jsx(ve,{variant:"ghost",size:"icon",onClick:()=>U(R),children:n.jsx(Qa,{className:"h-4 w-4"})})})]},R.id)})})]})})]}),N==="categories"&&n.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"glass-effect p-8 rounded-2xl mb-8",children:[n.jsx("h2",{className:"text-2xl font-semibold mb-6",children:Q.dbId?e==="es"?"Editar Categoría":"Edit Category":e==="es"?"Nueva Categoría":"New Category"}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Nombre (Español) *":"Name (Spanish) *"}),n.jsx("input",{type:"text",value:Q.es,onChange:R=>we({...Q,es:R.target.value}),placeholder:e==="es"?"Ej: Electrónica":"Ex: Electronics",className:"input-style w-full",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Nombre (Inglés) *":"Name (English) *"}),n.jsx("input",{type:"text",value:Q.en,onChange:R=>we({...Q,en:R.target.value}),placeholder:e==="es"?"Ej: Electronics":"Ex: Electronics",className:"input-style w-full",required:!0})]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripción (Español)":"Description (Spanish)"}),n.jsx("textarea",{value:Q.description_es,onChange:R=>we({...Q,description_es:R.target.value}),placeholder:e==="es"?"Descripción opcional...":"Optional description...",className:"input-style w-full",rows:"3"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripción (Inglés)":"Description (English)"}),n.jsx("textarea",{value:Q.description_en,onChange:R=>we({...Q,description_en:R.target.value}),placeholder:e==="es"?"Descripción opcional...":"Optional description...",className:"input-style w-full",rows:"3"})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ve,{onClick:ce,style:Je(g),children:Q.dbId?n.jsxs(n.Fragment,{children:[n.jsx(gs,{className:"mr-2 h-4 w-4"}),e==="es"?"Actualizar Categoría":"Update Category"]}):n.jsxs(n.Fragment,{children:[n.jsx(ws,{className:"mr-2 h-4 w-4"}),e==="es"?"Crear Categoría":"Create Category"]})}),Q.dbId&&n.jsxs(ve,{variant:"outline",onClick:()=>we({dbId:null,es:"",en:"",description_es:"",description_en:""}),children:[n.jsx(ir,{className:"mr-2 h-4 w-4"}),e==="es"?"Cancelar":"Cancel"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:e==="es"?"Categorías Existentes":"Existing Categories"}),l.length===0?n.jsx("p",{className:"text-gray-500 text-center py-8",children:e==="es"?"No hay categorías aún":"No categories yet"}):n.jsx("ul",{className:"space-y-2",children:l.map(R=>n.jsxs("li",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("span",{className:"font-semibold",children:e==="es"?R.name_es||R.es:R.name_en||R.en}),n.jsxs("span",{className:"text-gray-500 text-sm",children:["(",R.slug,")"]})]}),(R.description_es||R.description_en)&&n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e==="es"?R.description_es:R.description_en})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ve,{variant:"ghost",size:"icon",onClick:()=>oe(R),children:n.jsx(Qa,{className:"h-4 w-4"})}),n.jsx(ve,{variant:"destructive",size:"icon",onClick:()=>k(R.id),style:{backgroundColor:g.destructiveBgColor||"#dc2626",color:g.destructiveTextColor||"#ffffff"},onMouseEnter:pe=>pe.currentTarget.style.backgroundColor=g.destructiveHoverBgColor||"#b91c1c",onMouseLeave:pe=>pe.currentTarget.style.backgroundColor=g.destructiveBgColor||"#dc2626",children:n.jsx($i,{className:"h-4 w-4"})})]})]},R.id))})]})]}),N==="combos"&&n.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:e==="es"?"Moneda:":"Currency:"}),n.jsx("select",{value:_||"",onChange:R=>O(R.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:x.map(R=>n.jsxs("option",{value:R.id,children:[R.code," (",R.symbol,")"]},R.id))})]}),n.jsxs(ve,{onClick:ue,style:Je(g),children:[n.jsx(ws,{className:"mr-2 h-4 w-4"}),t("vendor.combos.new")]})]}),I&&n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl mb-12",children:[n.jsx("h2",{className:"text-2xl font-semibold mb-6",children:I.id?t("vendor.combos.edit"):t("vendor.combos.new")}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("input",{type:"text",value:I.name,onChange:R=>G("combo","name",R.target.value),placeholder:t("vendor.combos.name"),className:"w-full input-style mb-4"}),n.jsx("input",{type:"number",value:I.profitMargin,onChange:R=>G("combo","profitMargin",R.target.value),placeholder:`${t("vendor.combos.profitMargin")} (def: ${o.comboProfit}%)`,className:"w-full input-style mb-4"}),$&&n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Vista Previa:":"Preview:"}),n.jsx("div",{className:"aspect-square max-w-sm mx-auto rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:n.jsx("img",{src:$,alt:"Preview",className:"w-full h-full object-cover"})})]}),n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.combos.coverImage")}),n.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:Ce,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 mb-4"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:t("vendor.combos.products")}),n.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2 p-2 border rounded-lg",children:r.map(R=>{const pe=R.stock!==void 0?R.stock:0,se=R.min_stock_alert||10,B=pe===0,ae=pe>0&&pe<=se,Ae=I.productQuantities[R.id]||1,te=I.products.includes(R.id)&&pe<Ae;return n.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${B?"bg-red-50 border border-red-200":ae||te?"bg-yellow-50 border border-yellow-200":"border border-transparent"}`,children:[n.jsx("input",{type:"checkbox",id:`p-${R.id}`,checked:I.products.includes(R.id),onChange:()=>fe(R.id),disabled:B,className:"flex-shrink-0"}),n.jsx("label",{htmlFor:`p-${R.id}`,className:`cursor-pointer flex-1 ${B?"text-gray-400 line-through":""}`,children:R.name_es||R.name}),B&&n.jsx(ps,{className:"h-4 w-4 text-red-600 flex-shrink-0",title:e==="es"?"Sin stock":"Out of stock"}),ae&&!B&&n.jsx(An,{className:"h-4 w-4 text-orange-500 flex-shrink-0",title:e==="es"?`Stock: ${pe}`:`Stock: ${pe}`}),te&&n.jsx(An,{className:"h-4 w-4 text-orange-600 flex-shrink-0",title:e==="es"?`Insuficiente: ${pe} disponible, ${Ae} requerido`:`Insufficient: ${pe} available, ${Ae} required`}),I.products.includes(R.id)&&n.jsx("input",{type:"number",min:"1",value:I.productQuantities[R.id]||1,onChange:je=>Ee(R.id,je.target.value),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Cant."})]},R.id)})})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"glass-effect p-3 rounded-lg text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:[t("vendor.combos.basePrice"),":"]}),n.jsxs("span",{className:"font-semibold",children:[x.find(R=>R.id===_)?.symbol||"$",Y(I).base," ",x.find(R=>R.id===_)?.code||"USD"]})]}),n.jsxs("div",{className:"flex justify-between font-semibold",children:[n.jsxs("span",{children:[t("vendor.combos.finalPrice"),":"]}),n.jsxs("span",{className:"text-blue-600",children:[x.find(R=>R.id===_)?.symbol||"$",Y(I).final," ",x.find(R=>R.id===_)?.code||"USD"]})]})]})})]}),n.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[n.jsx(ve,{variant:"outline",onClick:()=>J(null),children:t("vendor.addProduct.cancel")}),n.jsxs(ve,{onClick:De,style:Je(g),children:[n.jsx(gs,{className:"w-4 h-4 mr-2"}),t("vendor.combos.save")]})]})]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(R=>{const pe=(R.products||[]).reduce((je,Le)=>{const tt=R.productQuantities?.[Le]||1;return je+tt},0),se=[];(R.products||[]).forEach(je=>{const Le=r.find(mt=>mt.id===je),tt=R.productQuantities?.[je]||1,wt=Le?.stock||0;wt===0?se.push({productName:Le?.name_es||Le?.name||"Unknown",issue:"out_of_stock",required:tt,available:0}):wt<tt&&se.push({productName:Le?.name_es||Le?.name||"Unknown",issue:"insufficient",required:tt,available:wt})});const B=R.is_active===!1||se.length>0,ae=Y(R),Ae=x.find(je=>je.id===_)?.symbol||"$",te=x.find(je=>je.id===_)?.code||"USD";return n.jsxs("div",{className:`glass-effect p-4 rounded-lg relative ${B?"border-2 border-red-300":""}`,children:[B&&n.jsxs("div",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded flex items-center gap-1",children:[n.jsx(ps,{className:"h-3 w-3"}),e==="es"?"DESACTIVADO":"DEACTIVATED"]}),n.jsx(ve,{variant:"ghost",size:"icon",onClick:()=>xe(R),className:"absolute top-2 right-2",children:n.jsx(Qa,{className:"h-4 w-4"})}),n.jsx("h3",{className:`font-bold pr-8 ${B?"line-through text-gray-500 mt-8":""}`,children:R.name_es||R.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[pe," ",e==="es"?"elementos":"items"," (",R.products?.length||0," ",e==="es"?"productos":"products",")"]}),B&&se.length>0&&n.jsxs("div",{className:"mt-2 p-2 bg-red-100 border border-red-300 rounded text-xs",children:[n.jsx("p",{className:"font-semibold text-red-800 mb-1",children:e==="es"?"Problemas de stock:":"Stock issues:"}),n.jsx("ul",{className:"space-y-1",children:se.map((je,Le)=>n.jsxs("li",{className:"flex items-start gap-1 text-red-700",children:[n.jsx(An,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsxs("strong",{children:[je.productName,":"]})," ",je.issue==="out_of_stock"?e==="es"?"Sin stock":"Out of stock":`Insuf. (Req: ${je.required}, ${e==="es"?"Disp:":"Avail:"} ${je.available})`]})]},Le))})]}),n.jsxs("div",{className:"mt-2 space-y-1",children:[n.jsxs("p",{className:`text-sm ${B?"text-gray-400 line-through":"text-gray-500"}`,children:["Base:"," ",Ae,ae.base," ",te]}),n.jsxs("p",{className:`text-lg font-bold ${B?"text-gray-400 line-through":"text-green-600"}`,children:["Final:"," ",Ae,ae.final," ",te]})]})]},R.id)})})]}),N==="management"&&n.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold mb-4",children:t("vendor.management.testimonials")}),n.jsx("div",{className:"glass-effect p-4 rounded-lg space-y-2",children:h.length===0?n.jsx("p",{className:"text-gray-500 text-center py-4",children:e==="es"?"No hay testimonios aún":"No testimonials yet"}):h.map(R=>n.jsxs("div",{className:"flex justify-between items-center p-3 border-b hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs("p",{className:"font-semibold",children:[e==="es"?"Usuario":"User"," #",R.user_id?.substring(0,8)]}),R.is_featured&&n.jsx(ao,{className:"w-4 h-4 text-purple-500",title:e==="es"?"Destacado":"Featured"}),n.jsx("span",{className:"text-yellow-500",children:"★".repeat(R.rating)})]}),n.jsxs("p",{className:"text-sm italic text-gray-600",children:['"',R.comment,'"']}),R.user_photo&&n.jsx("img",{src:R.user_photo,alt:"User",className:"w-8 h-8 rounded-full mt-2"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ve,{size:"sm",variant:R.is_featured?"default":"outline",onClick:()=>_e(R.id,R.is_featured),title:e==="es"?"Destacar/Quitar destaque":"Feature/Unfeature",children:R.is_featured?n.jsxs(n.Fragment,{children:[n.jsx(ao,{className:"mr-2 h-4 w-4"}),e==="es"?"Destacado":"Featured"]}):n.jsxs(n.Fragment,{children:[n.jsx(ir,{className:"mr-2 h-4 w-4"}),"Normal"]})}),n.jsx(ve,{size:"sm",variant:R.is_visible?"default":"outline",onClick:()=>Ie(R.id,R.is_visible),children:R.is_visible?n.jsxs(n.Fragment,{children:[n.jsx(Cs,{className:"mr-2 h-4 w-4"}),t("vendor.management.hide")]}):n.jsxs(n.Fragment,{children:[n.jsx(yb,{className:"mr-2 h-4 w-4"}),t("vendor.management.show")]})})]})]},R.id))})]})})]})},IO=({onNavigate:t})=>{const{t:e}=kt(),{user:r,isAdmin:i,isSuperAdmin:o,userRole:l}=Dt();return console.log("AdminPage Access Check:",{user:r?.email,isAdmin:i,isSuperAdmin:o,userRole:l}),!r||!i&&!o?n.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 px-4",children:n.jsxs(le.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-effect p-8 rounded-2xl max-w-md w-full text-center",children:[n.jsx("h2",{className:"text-2xl font-bold gradient-text mb-2",children:e("dashboard.privateAccess")}),n.jsx("p",{className:"text-gray-600",children:e("dashboard.adminOnly")})]})}):n.jsx("div",{children:n.jsx(MO,{onNavigate:t})})},Qw=async()=>{try{const{data:t,error:e}=await q.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(e)throw e;return{data:t||[],error:null}}catch(t){return console.error("Error fetching currencies:",t),{data:[],error:t}}},LO=async t=>{try{const{data:e,error:r}=await q.from("currencies").insert([{code:t.code.toUpperCase(),name_es:t.name_es,name_en:t.name_en,symbol:t.symbol,is_base:t.is_base||!1,is_active:!0}]).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error creating currency:",e),{data:null,error:e}}},$O=async(t,e)=>{try{const{data:r,error:i}=await q.from("currencies").update({name_es:e.name_es,name_en:e.name_en,symbol:e.symbol,is_base:e.is_base!==void 0?e.is_base:!1,is_active:e.is_active!==void 0?e.is_active:!0,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error updating currency:",r),{data:null,error:r}}},FO=async t=>{try{const{error:e}=await q.from("currencies").update({is_active:!1}).eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error deleting currency:",e),{data:!1,error:e}}},UO=async(t,e)=>{try{if(t===e)return{data:1,error:null};const{data:r,error:i}=await q.from("currencies").select("id, code").in("code",[t,e]).eq("is_active",!0);if(i)throw i;if(!r||r.length!==2)throw new Error("One or both currencies not found");const o=r.find(p=>p.code===t),l=r.find(p=>p.code===e),{data:c,error:u}=await q.from("exchange_rates").select("rate").eq("from_currency_id",o.id).eq("to_currency_id",l.id).eq("is_active",!0).order("effective_date",{ascending:!1}).limit(1).maybeSingle();if(u)throw u;if(c)return{data:parseFloat(c.rate),error:null};const{data:m,error:h}=await q.from("exchange_rates").select("rate").eq("from_currency_id",l.id).eq("to_currency_id",o.id).eq("is_active",!0).order("effective_date",{ascending:!1}).limit(1).maybeSingle();if(h)throw h;return m?{data:1/parseFloat(m.rate),error:null}:(console.warn(`No exchange rate found for ${t} to ${e}, using 1:1`),{data:1,error:null})}catch(r){return console.error("Error getting exchange rate:",r),{data:null,error:r}}},ev=async(t,e,r)=>{try{const{data:i,error:o}=await UO(e,r);if(o)throw o;return{data:t*i,error:null}}catch(i){return console.error("Error converting currency:",i),{data:null,error:i}}},VO=async()=>{try{const t=await fetch("https://api.exchangerate-api.com/v4/latest/USD");if(!t.ok)throw new Error("Failed to fetch exchange rates");const e=await t.json();return{data:{EUR:1/(e.rates.EUR||1),GBP:1/(e.rates.GBP||1),CAD:1/(e.rates.CAD||1),MXN:1/(e.rates.MXN||1),USD:1},error:null}}catch(t){return console.error("Error fetching official rates:",t),{data:null,error:t}}},BO=async()=>{try{const{data:t,error:e}=await q.from("exchange_rates").select(`
        id,
        rate,
        effective_date,
        is_active,
        from_currency:from_currency_id(id, code, name_es, name_en, symbol),
        to_currency:to_currency_id(id, code, name_es, name_en, symbol)
      `).eq("is_active",!0).order("effective_date",{ascending:!1});if(e)throw e;return{data:t||[],error:null}}catch(t){return console.error("Error fetching exchange rates:",t),{data:[],error:t}}},tv=async t=>{try{const{data:e,error:r}=await q.from("exchange_rates").upsert({from_currency_id:t.fromCurrencyId,to_currency_id:t.toCurrencyId,rate:parseFloat(t.rate),effective_date:t.effectiveDate||new Date().toISOString().split("T")[0],is_active:!0},{onConflict:"from_currency_id,to_currency_id,effective_date"}).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error saving exchange rate:",e),{data:null,error:e}}},zO=async t=>{try{const{error:e}=await q.from("exchange_rates").update({is_active:!1}).eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error deleting exchange rate:",e),{data:!1,error:e}}},qO=async()=>{try{const{data:t,error:e}=await q.from("shipping_zones").select("*").eq("is_active",!0).order("province_name",{ascending:!0});if(e)throw e;return{success:!0,zones:t||[]}}catch(t){return console.error("Error fetching active shipping zones:",t),{success:!1,error:t.message,zones:[]}}},WO=async()=>{try{const{data:t,error:e}=await q.from("shipping_zones").select("*").order("province_name",{ascending:!0});if(e)throw e;return{success:!0,zones:t||[]}}catch(t){return console.error("Error fetching all shipping zones:",t),{success:!1,error:t.message,zones:[]}}},HO=async t=>{try{const{data:e,error:r}=await q.from("shipping_zones").select("*").eq("province_name",t).eq("is_active",!0).single();if(r)throw r;return{success:!0,zone:e}}catch(e){return console.error("Error fetching shipping zone by province:",e),{success:!1,error:e.message}}},GO=async(t,e=0)=>{try{const r=await HO(t);if(!r.success)return{success:!1,error:"Province not found",cost:0,freeShipping:!1};const i=r.zone;return i.free_shipping?{success:!0,cost:0,freeShipping:!0,zone:i}:{success:!0,cost:parseFloat(i.shipping_cost),freeShipping:!1,zone:i}}catch(r){return console.error("Error calculating shipping cost:",r),{success:!1,error:r.message,cost:0,freeShipping:!1}}},KO=async t=>{try{const e={province_name:t.provinceName,shipping_cost:parseFloat(t.shippingCost||0),is_active:t.isActive!==void 0?t.isActive:!0,free_shipping:t.freeShipping||!1},{data:r,error:i}=await q.from("shipping_zones").insert(e).select().single();if(i)throw i;return{success:!0,zone:r}}catch(e){return console.error("Error creating shipping zone:",e),{success:!1,error:e.message}}},YO=async(t,e)=>{try{const r={};e.provinceName!==void 0&&(r.province_name=e.provinceName),e.shippingCost!==void 0&&(r.shipping_cost=parseFloat(e.shippingCost)),e.isActive!==void 0&&(r.is_active=e.isActive),e.freeShipping!==void 0&&(r.free_shipping=e.freeShipping),e.deliveryDays!==void 0&&(r.delivery_days=parseInt(e.deliveryDays)),e.transportCost!==void 0&&(r.transport_cost=parseFloat(e.transportCost)),e.deliveryNote!==void 0&&(r.delivery_note=e.deliveryNote),r.updated_at=new Date().toISOString();const{data:i,error:o}=await q.from("shipping_zones").update(r).eq("id",t).select().single();if(o)throw o;return{success:!0,zone:i}}catch(r){return console.error("Error updating shipping zone:",r),{success:!1,error:r.message}}},Jw=[{id:"pinar_del_rio",name:"Pinar del Río",municipalities:["Consolación del Sur","Guane","La Palma","Los Palacios","Mantua","Minas de Matahambre","Pinar del Río","San Juan y Martínez","San Luis","Sandino","Viñales"]},{id:"artemisa",name:"Artemisa",municipalities:["Alquízar","Artemisa","Bahía Honda","Bauta","Caimito","Candelaria","Guanajay","Güira de Melena","Mariel","San Antonio de los Baños","San Cristóbal"]},{id:"la_habana",name:"La Habana",municipalities:["Arroyo Naranjo","Boyeros","Centro Habana","Cerro","Cotorro","Diez de Octubre","Guanabacoa","Habana del Este","Habana Vieja","La Lisa","Marianao","Playa","Plaza de la Revolución","Regla","San Miguel del Padrón"]},{id:"mayabeque",name:"Mayabeque",municipalities:["Batabanó","Bejucal","Güines","Jaruco","Madruga","Melena del Sur","Nueva Paz","Quivicán","San José de las Lajas","San Nicolás","Santa Cruz del Norte"]},{id:"matanzas",name:"Matanzas",municipalities:["Calimete","Cárdenas","Ciénaga de Zapata","Colón","Jagüey Grande","Jovellanos","Limonar","Los Arabos","Martí","Matanzas","Pedro Betancourt","Perico","Unión de Reyes"]},{id:"cienfuegos",name:"Cienfuegos",municipalities:["Abreus","Aguada de Pasajeros","Cienfuegos","Cruces","Cumanayagua","Palmira","Rodas","Santa Isabel de las Lajas"]},{id:"villa_clara",name:"Villa Clara",municipalities:["Caibarién","Camajuaní","Cifuentes","Corralillo","Encrucijada","Manicaragua","Placetas","Quemado de Güines","Ranchuelo","Remedios","Sagua la Grande","Santa Clara","Santo Domingo"]},{id:"sancti_spiritus",name:"Sancti Spíritus",municipalities:["Cabaiguán","Fomento","Jatibonico","La Sierpe","Sancti Spíritus","Taguasco","Trinidad","Yaguajay"]},{id:"ciego_de_avila",name:"Ciego de Ávila",municipalities:["Baraguá","Bolivia","Chambas","Ciego de Ávila","Ciro Redondo","Florencia","Majagua","Morón","Primero de Enero","Venezuela"]},{id:"camaguey",name:"Camagüey",municipalities:["Camagüey","Carlos Manuel de Céspedes","Esmeralda","Florida","Guáimaro","Jimagüayú","Minas","Najasa","Nuevitas","Santa Cruz del Sur","Sibanicú","Sierra de Cubitas","Vertientes"]},{id:"las_tunas",name:"Las Tunas",municipalities:["Amancio","Colombia","Jesús Menéndez","Jobabo","Las Tunas","Majibacoa","Manatí","Puerto Padre"]},{id:"holguin",name:"Holguín",municipalities:["Antilla","Báguanos","Banes","Cacocum","Calixto García","Cueto","Frank País","Gibara","Holguín","Mayarí","Moa","Rafael Freyre","Sagua de Tánamo","Urbano Noris"]},{id:"granma",name:"Granma",municipalities:["Bartolomé Masó","Bayamo","Buey Arriba","Campechuela","Cauto Cristo","Guisa","Jiguaní","Manzanillo","Media Luna","Niquero","Pilón","Río Cauto","Yara"]},{id:"santiago_de_cuba",name:"Santiago de Cuba",municipalities:["Contramaestre","Guamá","Mella","Palma Soriano","San Luis","Santiago de Cuba","Segundo Frente","Songo-La Maya","Tercer Frente"]},{id:"guantanamo",name:"Guantánamo",municipalities:["Baracoa","Caimanera","El Salvador","Guantánamo","Imías","Maisí","Manuel Tames","Niceto Pérez","San Antonio del Sur","Yateras"]},{id:"isla_de_la_juventud",name:"Isla de la Juventud",municipalities:["Isla de la Juventud"]}],QO=t=>{const e=Jw.find(r=>r.name===t);return e?e.municipalities:[]},JO=()=>Jw.map(t=>t.name),XO=()=>{const{t,language:e}=kt(),{financialSettings:r,setFinancialSettings:i,notificationSettings:o,setNotificationSettings:l,visualSettings:c,setVisualSettings:u,zelleAccounts:m,setZelleAccounts:h}=ar(),{user:p,isAdmin:g}=Dt(),[x,b]=w.useState("financiero"),[j,C]=w.useState(r),[_,O]=w.useState(o),[A,E]=w.useState(c),[N,D]=w.useState({companyName:c.companyName||"PapuEnvíos",logo:c.logo||"",primaryColor:c.primaryColor||"#2563eb",secondaryColor:c.secondaryColor||"#9333ea",useGradient:c.useGradient!==void 0?c.useGradient:!0,headerBgColor:c.headerBgColor||"#ffffff",headerTextColor:c.headerTextColor||"#1f2937",headingColor:c.headingColor||"#1f2937",useHeadingGradient:c.useHeadingGradient!==void 0?c.useHeadingGradient:!0,buttonBgColor:c.buttonBgColor||"#2563eb",buttonTextColor:c.buttonTextColor||"#ffffff",buttonHoverBgColor:c.buttonHoverBgColor||"#1d4ed8",destructiveBgColor:c.destructiveBgColor||"#dc2626",destructiveTextColor:c.destructiveTextColor||"#ffffff",destructiveHoverBgColor:c.destructiveHoverBgColor||"#b91c1c",accentColor:c.accentColor||"#9333ea",pageBgColor:c.pageBgColor||"#f9fafb",cardBgColor:c.cardBgColor||"#ffffff"}),[T,L]=w.useState(c.logo||""),[I,J]=w.useState([]),[Q,we]=w.useState(null),[ie,be]=w.useState(null),[G,de]=w.useState(!1),[U,ne]=w.useState({code:"",name_es:"",name_en:"",symbol:"",is_base:!1}),[z,ce]=w.useState({}),[oe,k]=w.useState([]),[$,ee]=w.useState(!1),[ue,xe]=w.useState(null),[Ce,fe]=w.useState(null),[Ee,De]=w.useState({}),[X,Y]=w.useState([]),[Ie,_e]=w.useState(!1),[R,pe]=w.useState(null),[se,B]=w.useState([]),[ae,Ae]=w.useState(!1),[te,je]=w.useState(null),[Le,tt]=w.useState([]),[wt,mt]=w.useState(!1),[$t,nt]=w.useState(!1),[We,or]=w.useState({fromCurrencyId:"",toCurrencyId:"",rate:"",effectiveDate:new Date().toISOString().split("T")[0]});w.useEffect(()=>{ns(),Wr(),cn(),Wn(),Gn(),Kn()},[]);const Wr=async()=>{de(!0);try{const{data:P,error:W}=await VO();if(W)throw W;be(P)}catch(P){console.error("Error loading official rates:",P)}finally{de(!1)}};if(!p||!g)return n.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 px-4",children:n.jsxs(le.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-effect p-8 rounded-2xl max-w-md w-full text-center",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",style:Ze(c),children:t("dashboard.privateAccess")}),n.jsx("p",{className:"text-gray-600",children:t("dashboard.adminOnly")})]})});const ns=async()=>{try{const{data:P,error:W}=await Qw();if(W)throw W;J(P||[])}catch(P){console.error("Error loading currencies:",P),re({title:"Error",description:e==="es"?"Error al cargar monedas":"Error loading currencies",variant:"destructive"})}},zc=()=>{i(j),re({title:t("settings.saveSuccess")})},So=async()=>{if(!U.code||!U.name_es||!U.name_en||!U.symbol){re({title:"Error",description:e==="es"?"Por favor complete todos los campos":"Please fill all fields",variant:"destructive"});return}try{const{supabase:P}=await Hi(async()=>{const{supabase:Ne}=await Promise.resolve().then(()=>XT);return{supabase:Ne}},void 0);U.is_base&&await P.from("currencies").update({is_base:!1}).eq("is_base",!0).neq("id",Q?.id||"00000000-0000-0000-0000-000000000000");let W;if(Q){const{data:Ne,error:qe}=await $O(Q.id,U);if(qe)throw qe;W=Ne,re({title:e==="es"?"Moneda actualizada":"Currency Updated",description:e==="es"?"La moneda se actualizó exitosamente":"Currency was updated successfully"})}else{const{data:Ne,error:qe}=await LO(U);if(qe)throw qe;W=Ne,re({title:e==="es"?"Moneda creada":"Currency Created",description:e==="es"?"La moneda se creó exitosamente":"Currency was created successfully"})}ne({code:"",name_es:"",name_en:"",symbol:"",is_base:!1}),we(null),await ns()}catch(P){console.error("Error saving currency:",P),re({title:"Error",description:P.message,variant:"destructive"})}},Eo=async P=>{we(P),ne({code:P.code,name_es:P.name_es,name_en:P.name_en,symbol:P.symbol,is_base:P.is_base||!1})},qc=async P=>{if(confirm(e==="es"?"¿Está seguro de que desea eliminar esta moneda? Esto también eliminará sus tasas de cambio.":"Are you sure you want to delete this currency? This will also remove its exchange rates."))try{await q.from("exchange_rates").update({is_active:!1}).or(`from_currency_id.eq.${P},to_currency_id.eq.${P}`);const{error:Ne}=await FO(P);if(Ne)throw Ne;re({title:e==="es"?"Moneda eliminada":"Currency Deleted",description:e==="es"?"La moneda y sus tasas de cambio se eliminaron exitosamente":"Currency and its exchange rates were deleted successfully"}),await ns()}catch(Ne){console.error("Error deleting currency:",Ne),re({title:"Error",description:Ne.message,variant:"destructive"})}},Qi=()=>{we(null),ne({code:"",name_es:"",name_en:"",symbol:"",is_base:!1})},Ji=()=>{l(_),re({title:t("settings.saveSuccess")})},Wn=async()=>{_e(!0);try{const P=await WO();if(P.success){const W=JO(),Ne=P.zones.map(rt=>rt.province_name),qe=W.filter(rt=>!Ne.includes(rt)),Ye=[...P.zones,...qe.map(rt=>({id:`temp-${rt}`,province_name:rt,shipping_cost:0,is_active:!1,free_shipping:!1,is_new:!0}))];Y(Ye.sort((rt,Oo)=>rt.province_name.localeCompare(Oo.province_name)))}}catch(P){console.error("Error loading shipping zones:",P),re({title:e==="es"?"Error al cargar zonas":"Error loading zones",description:P.message,variant:"destructive"})}finally{_e(!1)}},Hn=async(P,W)=>{pe(P);try{const Ne=X.find(qe=>qe.id===P);Ne.is_new?(await KO({provinceName:Ne.province_name,shippingCost:W.shipping_cost??Ne.shipping_cost,isActive:W.is_active??Ne.is_active??!0,freeShipping:W.free_shipping??Ne.free_shipping??!1})).success&&(await Wn(),re({title:e==="es"?"✅ Zona creada":"✅ Zone created"})):(await YO(P,{shippingCost:W.shipping_cost,isActive:W.is_active,freeShipping:W.free_shipping})).success&&(Y(Ye=>Ye.map(rt=>rt.id===P?{...rt,...W}:rt)),re({title:e==="es"?"✅ Zona actualizada":"✅ Zone updated"}))}catch(Ne){console.error("Error updating shipping zone:",Ne),re({title:e==="es"?"Error al guardar":"Save error",description:Ne.message,variant:"destructive"})}finally{pe(null)}},Gn=async()=>{Ae(!0);try{const P=await getRemittanceConfigs();P.success&&B(P.configs)}catch(P){console.error("Error loading remittance configs:",P),re({title:e==="es"?"Error al cargar configuración":"Error loading config",description:P.message,variant:"destructive"})}finally{Ae(!1)}},is=async(P,W)=>{je(P);try{const qe={...se.find(rt=>rt.id===P),...W};(await saveRemittanceConfig(qe)).success&&(await Gn(),re({title:e==="es"?"✅ Configuración guardada":"✅ Configuration saved"}))}catch(Ne){console.error("Error updating remittance config:",Ne),re({title:e==="es"?"Error al guardar":"Save error",description:Ne.message,variant:"destructive"})}finally{je(null)}},Es=async(P,W)=>{const qe=se.find(Ye=>Ye.id===P).paymentMethods.map(Ye=>Ye.id===W?{...Ye,enabled:!Ye.enabled}:Ye);await is(P,{paymentMethods:qe})},Kn=async()=>{mt(!0);try{const{data:P,error:W}=await BO();!W&&P&&tt(P)}catch(P){console.error("Error loading exchange rates:",P)}finally{mt(!1)}},Po=async()=>{if(!We.fromCurrencyId||!We.toCurrencyId||!We.rate){re({title:e==="es"?"Datos incompletos":"Incomplete data",description:e==="es"?"Por favor complete todos los campos":"Please fill all fields",variant:"destructive"});return}if(We.fromCurrencyId===We.toCurrencyId){re({title:"Error",description:e==="es"?"Las monedas deben ser diferentes":"Currencies must be different",variant:"destructive"});return}try{const P=await tv(We);if(P.error)throw P.error;const W={fromCurrencyId:We.toCurrencyId,toCurrencyId:We.fromCurrencyId,rate:(1/parseFloat(We.rate)).toString(),effectiveDate:We.effectiveDate},Ne=await tv(W);if(Ne.error)throw Ne.error;await Kn(),nt(!1),or({fromCurrencyId:"",toCurrencyId:"",rate:"",effectiveDate:new Date().toISOString().split("T")[0]}),re({title:e==="es"?"✅ Tasas guardadas":"✅ Rates saved",description:e==="es"?"La tasa de cambio y su inversa se guardaron correctamente":"Exchange rate and its inverse saved successfully"})}catch(P){console.error("Error saving rate:",P),re({title:e==="es"?"Error al guardar":"Save error",description:P.message,variant:"destructive"})}},ko=async P=>{if(confirm(e==="es"?"¿Eliminar esta tasa?":"Delete this rate?"))try{const W=await zO(P);if(W.error)throw W.error;await Kn(),re({title:e==="es"?"✅ Tasa eliminada":"✅ Rate deleted"})}catch(W){console.error("Error deleting rate:",W),re({title:"Error",description:W.message,variant:"destructive"})}},To=async P=>{const W=P.target.files?.[0];if(W)try{const Ne=await po(W,"logo");if(!Ne.success){re({title:e==="es"?"Error de validación":"Validation error",description:Ne.errors.join(`
`),variant:"destructive"});return}L(Ne.base64),D(qe=>({...qe,logo:Ne.base64})),re({title:e==="es"?"Logo cargado":"Logo uploaded",description:e==="es"?`${Ne.metadata.originalDimensions} → ${Ne.metadata.finalDimensions}`:`${Ne.metadata.originalDimensions} → ${Ne.metadata.finalDimensions}`})}catch(Ne){console.error("Error processing logo:",Ne),re({title:e==="es"?"Error al procesar imagen":"Error processing image",description:Ne.message,variant:"destructive"})}},Ao=()=>{u({...c,...N}),document.title=N.companyName,re({title:t("settings.saveSuccess"),description:e==="es"?"Personalización guardada. Recarga la página para ver todos los cambios.":"Customization saved. Reload the page to see all changes."})},cn=async()=>{ee(!0);try{const{data:P,error:W}=await Xb();if(W)throw W;k(P||[])}catch(P){console.error("Error loading carousel slides:",P),re({title:"Error al cargar diapositivas",description:P.message,variant:"destructive"})}finally{ee(!1)}},Ro=async()=>{try{const{data:P,error:W}=await yA({title_es:"",title_en:"",subtitle_es:"",subtitle_en:"",image_url:"",link_url:"",is_active:!1});if(W)throw W;await cn(),re({title:e==="es"?"Diapositiva creada":"Slide created",description:e==="es"?"Nueva diapositiva agregada exitosamente":"New slide added successfully"})}catch(P){console.error("Error creating slide:",P),re({title:"Error",description:P.message,variant:"destructive"})}},kr=async(P,W)=>{try{xe(P),fe(null);const{error:Ne}=await Ix(P,W);if(Ne)throw Ne;k(qe=>qe.map(Ye=>Ye.id===P?{...Ye,...W}:Ye)),xe(null),fe(P),setTimeout(()=>fe(null),1500)}catch(Ne){console.error("Error updating slide:",Ne),xe(null),re({title:"Error al actualizar",description:Ne.message,variant:"destructive"})}},Ps=(P,W,Ne)=>{k(Ye=>Ye.map(rt=>rt.id===P?{...rt,[W]:Ne}:rt)),Ee[P]&&clearTimeout(Ee[P]);const qe=setTimeout(()=>{kr(P,{[W]:Ne})},800);De(Ye=>({...Ye,[P]:qe}))},dn=async P=>{if(confirm(e==="es"?"¿Eliminar esta diapositiva?":"Delete this slide?"))try{const{error:W}=await xA(P);if(W)throw W;await cn(),ce(Ne=>{const qe={...Ne};return delete qe[P],qe}),re({title:e==="es"?"Diapositiva eliminada":"Slide deleted",description:e==="es"?"La diapositiva fue eliminada exitosamente":"Slide was deleted successfully"})}catch(W){console.error("Error deleting slide:",W),re({title:"Error",description:W.message,variant:"destructive"})}},Wc=async(P,W)=>{try{xe(P),fe(null);const{error:Ne}=await Ix(P,{display_order:parseInt(W)});if(Ne)throw Ne;k(qe=>qe.map(Ye=>Ye.id===P?{...Ye,display_order:parseInt(W)}:Ye).sort((Ye,rt)=>(Ye.display_order??0)-(rt.display_order??0))),xe(null),fe(P),setTimeout(()=>fe(null),1500)}catch(Ne){console.error("Error updating slide order:",Ne),xe(null),re({title:"Error",description:Ne.message,variant:"destructive"})}},un=async(P,W)=>{const Ne=W.target.files?.[0];if(Ne)try{const qe=await po(Ne,"carousel");if(!qe.success){re({title:"Error de validación",description:qe.errors.join(`
`),variant:"destructive"});return}await kr(P,{image_url:qe.base64}),ce(Ye=>({...Ye,[P]:qe.base64})),re({title:"Imagen optimizada",description:`${qe.metadata.originalDimensions} → ${qe.metadata.finalDimensions} (${qe.metadata.compression} compresión)`})}catch(qe){console.error("Error processing slide image:",qe),re({title:"Error al procesar imagen",description:qe.message,variant:"destructive"})}},Yn=[{id:"financiero",label:e==="es"?"Financiero":"Financial",icon:qt,color:"#2563eb"},{id:"envios",label:e==="es"?"Envíos":"Shipping",icon:lo,color:"#f59e0b"},{id:"remesas",label:e==="es"?"Remesas":"Remittances",icon:ix,color:"#06b6d4"},{id:"visual",label:"Visual",icon:Ju,color:"#9333ea"},{id:"contenido",label:e==="es"?"Contenido":"Content",icon:ax,color:"#10b981"}];return n.jsx("div",{className:"min-h-screen py-8 px-4",children:n.jsxs("div",{className:"container mx-auto max-w-7xl",children:[n.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[n.jsx("h1",{className:"text-4xl font-bold mb-4",style:Ze(c),children:t("settings.title")}),n.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:t("settings.subtitle")})]}),n.jsx("div",{className:"flex gap-2 mb-8 border-b pb-2",children:Yn.map(P=>n.jsxs("button",{onClick:()=>b(P.id),className:`flex items-center gap-2 px-6 py-3 rounded-t-lg font-medium transition-all ${x===P.id?"bg-white shadow-md border-b-2":"bg-gray-50 hover:bg-gray-100 text-gray-600"}`,style:x===P.id?{borderBottomColor:P.color,color:P.color}:{},children:[n.jsx(P.icon,{className:"h-5 w-5"}),P.label]},P.id))}),n.jsxs("div",{className:"space-y-12",children:[x==="financiero"&&n.jsxs(n.Fragment,{children:[n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[n.jsx(qt,{className:"mr-3 text-blue-600"}),t("settings.financial.title")]}),n.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("input",{type:"number",value:j.usdToLocal,onChange:P=>C({...j,usdToLocal:parseFloat(P.target.value)}),placeholder:t("settings.financial.usdToLocal"),className:"input-style"}),n.jsx("input",{type:"number",value:j.productProfit,onChange:P=>C({...j,productProfit:parseFloat(P.target.value)}),placeholder:t("settings.financial.productProfit"),className:"input-style"}),n.jsx("input",{type:"number",value:j.comboProfit,onChange:P=>C({...j,comboProfit:parseFloat(P.target.value)}),placeholder:t("settings.financial.comboProfit"),className:"input-style"}),n.jsx("input",{type:"number",value:j.remittanceProfit,onChange:P=>C({...j,remittanceProfit:parseFloat(P.target.value)}),placeholder:t("settings.financial.remittanceProfit"),className:"input-style"})]}),n.jsxs("div",{className:"border-t pt-6 mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:e==="es"?"Configuración de Envío":"Shipping Configuration"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Tipo de Envío":"Shipping Type"}),n.jsxs("select",{value:j.shippingType||"undetermined",onChange:P=>C({...j,shippingType:P.target.value}),className:"input-style w-full",children:[n.jsx("option",{value:"free",children:e==="es"?"Gratis":"Free"}),n.jsx("option",{value:"fixed",children:e==="es"?"Tarifa Fija":"Fixed Rate"}),n.jsx("option",{value:"undetermined",children:e==="es"?"Por Determinar (según ubicación)":"To Be Determined (based on location)"}),n.jsx("option",{value:"calculated",children:e==="es"?"Calculado (con umbral gratis)":"Calculated (with free threshold)"})]})]}),j.shippingType==="fixed"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Costo Fijo de Envío ($)":"Fixed Shipping Cost ($)"}),n.jsx("input",{type:"number",step:"0.01",value:j.shippingFixedAmount||0,onChange:P=>C({...j,shippingFixedAmount:parseFloat(P.target.value)}),placeholder:"0.00",className:"input-style w-full"})]}),(j.shippingType==="calculated"||j.shippingType==="undetermined")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Umbral para Envío Gratis ($)":"Free Shipping Threshold ($)"}),n.jsx("input",{type:"number",step:"0.01",value:j.shippingFreeThreshold||100,onChange:P=>C({...j,shippingFreeThreshold:parseFloat(P.target.value)}),placeholder:"100.00",className:"input-style w-full"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Pedidos superiores a este monto tendrán envío gratis":"Orders above this amount will have free shipping"})]})]}),n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-sm text-gray-700",children:[j.shippingType==="free"&&(e==="es"?"✓ Envío gratis: No se cobrará envío en ningún pedido":"✓ Free shipping: No shipping charge on any order"),j.shippingType==="fixed"&&(e==="es"?"✓ Tarifa fija: Se cobrará el mismo monto de envío en todos los pedidos":"✓ Fixed rate: Same shipping amount will be charged on all orders"),j.shippingType==="undetermined"&&(e==="es"?'⚠ Por determinar: El costo de envío se mostrará como "Por determinar" y se calculará según la ubicación del destinatario':'⚠ To be determined: Shipping cost will show as "To be determined" and will be calculated based on recipient location'),j.shippingType==="calculated"&&(e==="es"?"⚠ Calculado: Envío gratis si el pedido supera el umbral, de lo contrario se determinará según ubicación":"⚠ Calculated: Free shipping if order exceeds threshold, otherwise determined by location")]})})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-xl font-semibold",children:t("settings.financial.currencies")}),n.jsxs(ve,{onClick:Wr,disabled:G,variant:"outline",size:"sm",children:[n.jsx(qt,{className:"w-4 h-4 mr-2"}),G?e==="es"?"Cargando...":"Loading...":e==="es"?"Cargar Tasas Oficiales":"Load Official Rates"]})]}),ie&&n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:[n.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:e==="es"?"Tasas Oficiales (Referencia)":"Official Rates (Reference)"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm",children:Object.entries(ie).map(([P,W])=>n.jsxs("div",{className:"bg-white p-2 rounded flex justify-between",children:[n.jsxs("span",{className:"font-bold",children:[P,":"]}),n.jsx("span",{className:"font-mono",children:Number(W).toFixed(4)})]},P))}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:e==="es"?"Tasas de referencia. Configure las tasas de cambio en la sección de Exchange Rates.":"Reference rates. Configure exchange rates in the Exchange Rates section."})]}),n.jsx("div",{className:"space-y-2 mb-6",children:I.map(P=>n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[n.jsx("span",{className:"font-bold w-16",children:P.code}),n.jsx("span",{className:"flex-1",children:e==="es"?P.name_es:P.name_en}),n.jsx("span",{className:"w-12 text-center",children:P.symbol}),P.is_base&&n.jsx("span",{className:"text-xs text-white px-2 py-1 rounded font-semibold",style:{background:c.useGradient?`linear-gradient(to right, ${c.primaryColor}, ${c.secondaryColor})`:c.primaryColor},children:"Base"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ve,{variant:"outline",size:"icon",onClick:()=>Eo(P),children:n.jsx(Qa,{className:"h-4 w-4"})}),n.jsx(ve,{variant:"destructive",size:"icon",onClick:()=>qc(P.id),children:n.jsx($i,{className:"h-4 w-4"})})]})]},P.id))}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"text-lg font-semibold mb-3",children:Q?e==="es"?"Editar Moneda":"Edit Currency":e==="es"?"Nueva Moneda":"New Currency"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.code")}),n.jsx("input",{value:U.code,onChange:P=>ne({...U,code:P.target.value.toUpperCase()}),placeholder:"USD",className:"input-style w-full",maxLength:3,disabled:Q!==null})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.nameES")}),n.jsx("input",{value:U.name_es,onChange:P=>ne({...U,name_es:P.target.value}),placeholder:"Dólar",className:"input-style w-full"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.nameEN")}),n.jsx("input",{value:U.name_en,onChange:P=>ne({...U,name_en:P.target.value}),placeholder:"Dollar",className:"input-style w-full"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.symbol")}),n.jsx("input",{value:U.symbol,onChange:P=>ne({...U,symbol:P.target.value}),placeholder:"$",className:"input-style w-full",maxLength:3})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:U.is_base,onChange:P=>ne({...U,is_base:P.target.checked}),className:"rounded"}),n.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Moneda Base":"Base Currency"})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e==="es"?'La moneda base se usa como referencia. Configure las tasas de cambio en la sección "Tasas de Cambio".':'The base currency is used as reference. Configure exchange rates in the "Exchange Rates" section.'})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ve,{onClick:So,className:"flex-1",style:Je(c),children:Q?n.jsxs(n.Fragment,{children:[n.jsx(gs,{className:"h-4 w-4 mr-2"}),t("settings.financial.updateCurrency")]}):n.jsxs(n.Fragment,{children:[n.jsx(ws,{className:"h-4 w-4 mr-2"}),t("settings.financial.addCurrency")]})}),Q&&n.jsx(ve,{variant:"outline",onClick:Qi,children:e==="es"?"Cancelar":"Cancel"})]})]})]}),n.jsx("div",{className:"mt-6 text-right",children:n.jsxs(ve,{onClick:zc,style:Je(c),children:[n.jsx(gs,{className:"mr-2 h-4 w-4"}),t("settings.financial.save")]})})]}),n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"glass-effect p-6 rounded-2xl",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-2xl font-bold",style:Ze(c),children:e==="es"?"Tasas de Cambio":"Exchange Rates"}),n.jsxs(ve,{onClick:()=>nt(!$t),style:Je(c),children:[n.jsx(ws,{className:"h-4 w-4 mr-2"}),e==="es"?"Nueva Tasa":"New Rate"]})]}),n.jsx("p",{className:"text-gray-600 mb-6",children:e==="es"?"Configure las tasas de cambio entre diferentes monedas. Las tasas se usan para convertir precios y totales.":"Configure exchange rates between different currencies. Rates are used to convert prices and totals."}),$t&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[n.jsx("h4",{className:"text-lg font-semibold mb-3",children:e==="es"?"Nueva Tasa de Cambio":"New Exchange Rate"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:e==="es"?"Desde Moneda":"From Currency"}),n.jsxs("select",{value:We.fromCurrencyId,onChange:P=>or({...We,fromCurrencyId:P.target.value}),className:"input-style w-full",children:[n.jsx("option",{value:"",children:e==="es"?"Seleccionar...":"Select..."}),I.map(P=>n.jsxs("option",{value:P.id,children:[P.code," - ",e==="es"?P.name_es:P.name_en]},P.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:e==="es"?"Hacia Moneda":"To Currency"}),n.jsxs("select",{value:We.toCurrencyId,onChange:P=>or({...We,toCurrencyId:P.target.value}),className:"input-style w-full",children:[n.jsx("option",{value:"",children:e==="es"?"Seleccionar...":"Select..."}),I.map(P=>n.jsxs("option",{value:P.id,children:[P.code," - ",e==="es"?P.name_es:P.name_en]},P.id))]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-sm font-medium",children:e==="es"?"Tasa":"Rate"}),ie&&We.toCurrencyId&&(()=>{const P=I.find(Ne=>Ne.id===We.toCurrencyId),W=I.find(Ne=>Ne.id===We.fromCurrencyId);return P&&W&&ie[P.code]?n.jsxs("span",{className:"text-xs text-blue-600",children:["Ref: ",ie[P.code].toFixed(6)]}):null})()]}),n.jsx("input",{type:"number",step:"0.000001",value:We.rate,onChange:P=>or({...We,rate:P.target.value}),placeholder:"1.0",className:"input-style w-full"}),ie&&We.toCurrencyId&&(()=>{const P=I.find(W=>W.id===We.toCurrencyId);return P&&ie[P.code]?n.jsx("button",{type:"button",onClick:()=>or({...We,rate:ie[P.code].toString()}),className:"text-xs text-blue-600 hover:text-blue-800 underline mt-1",children:e==="es"?"Usar tasa oficial":"Use official rate"}):null})()]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:e==="es"?"Fecha Efectiva":"Effective Date"}),n.jsx("input",{type:"date",value:We.effectiveDate,onChange:P=>or({...We,effectiveDate:P.target.value}),className:"input-style w-full"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ve,{onClick:Po,className:"flex-1",style:Je(c),children:[n.jsx(gs,{className:"h-4 w-4 mr-2"}),e==="es"?"Guardar Tasa":"Save Rate"]}),n.jsx(ve,{variant:"outline",onClick:()=>{nt(!1),or({fromCurrencyId:"",toCurrencyId:"",rate:"",effectiveDate:new Date().toISOString().split("T")[0]})},children:e==="es"?"Cancelar":"Cancel"})]})]}),wt?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):Le.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:e==="es"?"No hay tasas de cambio configuradas. Cree una nueva tasa usando el botón de arriba.":"No exchange rates configured. Create a new rate using the button above."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left py-2 px-3",children:e==="es"?"Desde":"From"}),n.jsx("th",{className:"text-left py-2 px-3",children:e==="es"?"Hacia":"To"}),n.jsx("th",{className:"text-right py-2 px-3",children:e==="es"?"Tasa":"Rate"}),n.jsx("th",{className:"text-left py-2 px-3",children:e==="es"?"Fecha":"Date"}),n.jsx("th",{className:"text-center py-2 px-3",children:e==="es"?"Acciones":"Actions"})]})}),n.jsx("tbody",{children:Le.map(P=>n.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[n.jsxs("td",{className:"py-2 px-3",children:[n.jsx("span",{className:"font-bold",children:P.from_currency.code}),n.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e==="es"?P.from_currency.name_es:P.from_currency.name_en})]}),n.jsxs("td",{className:"py-2 px-3",children:[n.jsx("span",{className:"font-bold",children:P.to_currency.code}),n.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e==="es"?P.to_currency.name_es:P.to_currency.name_en})]}),n.jsx("td",{className:"text-right py-2 px-3 font-mono",children:Number(P.rate).toFixed(6)}),n.jsx("td",{className:"py-2 px-3 text-sm text-gray-600",children:new Date(P.effective_date).toLocaleDateString(e==="es"?"es-ES":"en-US")}),n.jsx("td",{className:"py-2 px-3",children:n.jsx("div",{className:"flex justify-center",children:n.jsx(ve,{variant:"destructive",size:"icon",onClick:()=>ko(P.id),children:n.jsx($i,{className:"h-4 w-4"})})})})]},P.id))})]})})]})]}),x==="visual"&&n.jsx(n.Fragment,{children:n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[n.jsx(Ju,{className:"mr-3 text-purple-600"}),t("settings.visual.title")]}),n.jsxs("div",{className:"mb-8 pb-8 border-b",children:[n.jsxs("h3",{className:"text-xl font-semibold mb-6 flex items-center",children:[n.jsx(Ju,{className:"mr-3 text-indigo-600"}),e==="es"?"Personalización de Apariencia":"Appearance Customization"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:e==="es"?"Logo de la Empresa":"Company Logo"}),T&&n.jsx("div",{className:"mb-4 flex justify-center",children:n.jsx("div",{className:"relative w-40 h-40 rounded-lg overflow-hidden border-2 border-gray-300 bg-white p-2 flex items-center justify-center",children:n.jsx("img",{src:T,alt:"Logo preview",className:"max-w-full max-h-full object-contain"})})}),n.jsx("input",{type:"file",accept:"image/png,image/svg+xml,image/webp",onChange:To,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Recomendado: PNG o SVG con fondo transparente, 200x200px, máx 2MB":"Recommended: PNG or SVG with transparent background, 200x200px, max 2MB"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Nombre de la Empresa":"Company Name"}),n.jsx("input",{type:"text",value:N.companyName,onChange:P=>D(W=>({...W,companyName:P.target.value})),placeholder:"PapuEnvíos",className:"w-full input-style"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Se mostrará en el encabezado y en el título de la página":"Will be displayed in the header and page title"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color Primario":"Primary Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.primaryColor,onChange:P=>D(W=>({...W,primaryColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.primaryColor,onChange:P=>D(W=>({...W,primaryColor:P.target.value})),placeholder:"#2563eb",className:"flex-1 input-style font-mono text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color Secundario":"Secondary Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.secondaryColor,onChange:P=>D(W=>({...W,secondaryColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.secondaryColor,onChange:P=>D(W=>({...W,secondaryColor:P.target.value})),placeholder:"#9333ea",className:"flex-1 input-style font-mono text-sm"})]})]})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:N.useGradient,onChange:P=>D(W=>({...W,useGradient:P.target.checked})),className:"rounded w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Usar gradiente en elementos de marca":"Use gradient in brand elements"})]})}),n.jsxs("div",{className:"border-t pt-6 mt-6",children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:e==="es"?"Colores del Encabezado":"Header Colors"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Fondo":"Background Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.headerBgColor,onChange:P=>D(W=>({...W,headerBgColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.headerBgColor,onChange:P=>D(W=>({...W,headerBgColor:P.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Texto":"Text Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.headerTextColor,onChange:P=>D(W=>({...W,headerTextColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.headerTextColor,onChange:P=>D(W=>({...W,headerTextColor:P.target.value})),placeholder:"#1f2937",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),n.jsxs("div",{className:"border-t pt-6 mt-6",children:[n.jsx("h4",{className:"text-lg font-semibold mb-2",children:e==="es"?"Títulos y Encabezados":"Headings and Titles"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e==="es"?"Colores para títulos principales de páginas y secciones":"Colors for main page and section titles"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Títulos":"Heading Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.headingColor,onChange:P=>D(W=>({...W,headingColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.headingColor,onChange:P=>D(W=>({...W,headingColor:P.target.value})),placeholder:"#1f2937",className:"flex-1 input-style font-mono text-sm"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Color sólido cuando el gradiente está desactivado":"Solid color when gradient is disabled"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:N.useHeadingGradient,onChange:P=>D(W=>({...W,useHeadingGradient:P.target.checked})),className:"rounded w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Usar gradiente de marca en títulos":"Use brand gradient in headings"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Aplica el gradiente de colores primario y secundario a los títulos principales":"Applies the primary and secondary color gradient to main headings"})]})]})]}),n.jsxs("div",{className:"border-t pt-6 mt-6",children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:e==="es"?"Colores de Botones":"Button Colors"}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo del Botón":"Button Background"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.buttonBgColor,onChange:P=>D(W=>({...W,buttonBgColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.buttonBgColor,onChange:P=>D(W=>({...W,buttonBgColor:P.target.value})),placeholder:"#2563eb",className:"flex-1 input-style font-mono text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Texto del Botón":"Button Text"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.buttonTextColor,onChange:P=>D(W=>({...W,buttonTextColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.buttonTextColor,onChange:P=>D(W=>({...W,buttonTextColor:P.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Hover del Botón":"Button Hover"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.buttonHoverBgColor,onChange:P=>D(W=>({...W,buttonHoverBgColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.buttonHoverBgColor,onChange:P=>D(W=>({...W,buttonHoverBgColor:P.target.value})),placeholder:"#1d4ed8",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),n.jsxs("div",{className:"border-t pt-6 mt-6",children:[n.jsx("h4",{className:"text-lg font-semibold mb-2",children:e==="es"?"Botones Destructivos (Eliminar)":"Destructive Buttons (Delete)"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e==="es"?"Colores para acciones peligrosas como eliminar elementos":"Colors for dangerous actions like deleting items"}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo":"Background"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.destructiveBgColor,onChange:P=>D(W=>({...W,destructiveBgColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.destructiveBgColor,onChange:P=>D(W=>({...W,destructiveBgColor:P.target.value})),placeholder:"#dc2626",className:"flex-1 input-style font-mono text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Texto":"Text"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.destructiveTextColor,onChange:P=>D(W=>({...W,destructiveTextColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.destructiveTextColor,onChange:P=>D(W=>({...W,destructiveTextColor:P.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hover"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.destructiveHoverBgColor,onChange:P=>D(W=>({...W,destructiveHoverBgColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.destructiveHoverBgColor,onChange:P=>D(W=>({...W,destructiveHoverBgColor:P.target.value})),placeholder:"#b91c1c",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),n.jsxs("div",{className:"border-t pt-6 mt-6",children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:e==="es"?"Colores Adicionales":"Additional Colors"}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Acento":"Accent Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.accentColor,onChange:P=>D(W=>({...W,accentColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.accentColor,onChange:P=>D(W=>({...W,accentColor:P.target.value})),placeholder:"#9333ea",className:"flex-1 input-style font-mono text-sm"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Para badges, enlaces y elementos destacados":"For badges, links and highlighted elements"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo de Página":"Page Background"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.pageBgColor,onChange:P=>D(W=>({...W,pageBgColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.pageBgColor,onChange:P=>D(W=>({...W,pageBgColor:P.target.value})),placeholder:"#f9fafb",className:"flex-1 input-style font-mono text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo de Tarjetas":"Card Background"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:N.cardBgColor,onChange:P=>D(W=>({...W,cardBgColor:P.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),n.jsx("input",{type:"text",value:N.cardBgColor,onChange:P=>D(W=>({...W,cardBgColor:P.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),n.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:e==="es"?"Vista Previa:":"Preview:"}),n.jsx("div",{className:"mb-4 p-4 rounded-lg shadow-md",style:{backgroundColor:N.headerBgColor},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[T?n.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:n.jsx("img",{src:T,alt:"Logo preview",className:"max-w-full max-h-full object-contain"})}):n.jsx("div",{className:"w-6 h-6 rounded flex items-center justify-center",style:{background:N.useGradient?`linear-gradient(to right, ${N.primaryColor}, ${N.secondaryColor})`:N.primaryColor},children:n.jsx(Er,{className:"w-4 h-4 text-white"})}),n.jsx("span",{className:"text-lg font-bold",style:{backgroundImage:N.useGradient?`linear-gradient(to right, ${N.primaryColor}, ${N.secondaryColor})`:`linear-gradient(to right, ${N.primaryColor}, ${N.primaryColor})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:N.companyName||"PapuEnvíos"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"text-sm",style:{color:N.headerTextColor},children:e==="es"?"Menú":"Menu"})})]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsx("div",{className:"px-6 py-3 rounded-lg font-semibold transition-colors",style:{backgroundColor:N.buttonBgColor,color:N.buttonTextColor},onMouseEnter:P=>P.currentTarget.style.backgroundColor=N.buttonHoverBgColor,onMouseLeave:P=>P.currentTarget.style.backgroundColor=N.buttonBgColor,children:e==="es"?"Botón Estándar":"Standard Button"}),n.jsx("div",{className:"px-6 py-3 rounded-lg font-semibold text-white",style:{background:N.useGradient?`linear-gradient(to right, ${N.primaryColor}, ${N.secondaryColor})`:N.primaryColor},children:e==="es"?"Botón con Gradiente":"Gradient Button"}),n.jsx("div",{className:"px-6 py-3 rounded-lg font-semibold transition-colors",style:{backgroundColor:N.destructiveBgColor,color:N.destructiveTextColor},onMouseEnter:P=>P.currentTarget.style.backgroundColor=N.destructiveHoverBgColor,onMouseLeave:P=>P.currentTarget.style.backgroundColor=N.destructiveBgColor,children:e==="es"?"Botón Eliminar":"Delete Button"})]}),n.jsxs("div",{className:"flex gap-4 flex-wrap items-center",children:[n.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:`${N.accentColor}20`,color:N.accentColor},children:e==="es"?"Badge de Acento":"Accent Badge"}),n.jsx("span",{className:"font-semibold bg-clip-text text-transparent",style:{backgroundImage:N.useGradient?`linear-gradient(to right, ${N.primaryColor}, ${N.secondaryColor})`:`linear-gradient(to right, ${N.primaryColor}, ${N.primaryColor})`},children:e==="es"?"Texto con Gradiente":"Gradient Text"})]})]})]}),n.jsx("div",{className:"text-right",children:n.jsxs(ve,{onClick:Ao,style:Je(c),children:[n.jsx(gs,{className:"mr-2 h-4 w-4"}),e==="es"?"Guardar Personalización":"Save Customization"]})})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-xl font-semibold",children:t("settings.visual.slides")}),n.jsxs(ve,{onClick:Ro,style:Je(c),children:[n.jsx(ws,{className:"mr-2 h-4 w-4"}),t("settings.visual.addSlide")]})]}),n.jsx("div",{className:"space-y-4",children:$?n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:e==="es"?"Cargando diapositivas...":"Loading slides..."})}):oe.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:e==="es"?"No hay diapositivas. Agrega una para comenzar.":"No slides. Add one to get started."})}):oe.map(P=>n.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[ue===P.id&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 mb-2 bg-blue-50 p-2 rounded",children:[n.jsx(Sr,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{className:"font-medium",children:e==="es"?"Guardando...":"Saving..."})]}),Ce===P.id&&ue!==P.id&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 mb-2 bg-green-50 p-2 rounded",children:[n.jsx(ao,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:e==="es"?"Guardado ✓":"Saved ✓"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("settings.visual.order")}),n.jsx("input",{type:"number",value:P.display_order??0,onChange:W=>Wc(P.id,W.target.value),className:"w-full input-style",min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("settings.visual.linkUrl")}),n.jsx("input",{type:"url",value:P.link_url||"",onChange:W=>kr(P.id,{link_url:W.target.value}),placeholder:"https://...",className:"w-full input-style"})]})]}),(P.image_url||z[P.id])&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Vista Previa:":"Preview:"}),n.jsx("div",{className:"relative w-full aspect-[16/9] max-w-2xl rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:n.jsx("img",{src:z[P.id]||P.image_url,alt:"Preview",className:"w-full h-full object-cover"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("settings.visual.image")}),n.jsx("input",{type:"url",value:P.image_url||"",onChange:W=>kr(P.id,{image_url:W.target.value}),placeholder:"https://... or upload below",className:"w-full input-style mb-2"}),n.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:W=>un(P.id,W),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Recomendado: 1920x1080px (16:9), máx 5MB":"Recommended: 1920x1080px (16:9), max 5MB"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.mainText")," (ES)"]}),n.jsx("input",{type:"text",value:P.title_es||"",onChange:W=>Ps(P.id,"title_es",W.target.value),placeholder:"Título principal en español",className:"w-full input-style"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.mainText")," (EN)"]}),n.jsx("input",{type:"text",value:P.title_en||"",onChange:W=>Ps(P.id,"title_en",W.target.value),placeholder:"Main title in English",className:"w-full input-style"})]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.secondaryText")," (ES)"]}),n.jsx("input",{type:"text",value:P.subtitle_es||"",onChange:W=>Ps(P.id,"subtitle_es",W.target.value),placeholder:"Subtítulo en español",className:"w-full input-style"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.secondaryText")," (EN)"]}),n.jsx("input",{type:"text",value:P.subtitle_en||"",onChange:W=>Ps(P.id,"subtitle_en",W.target.value),placeholder:"Subtitle in English",className:"w-full input-style"})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",id:`slide-active-${P.id}`,checked:P.is_active??!0,onChange:W=>kr(P.id,{is_active:W.target.checked})}),n.jsx("label",{htmlFor:`slide-active-${P.id}`,className:"text-sm font-medium",children:t("settings.visual.active")})]}),n.jsxs(ve,{variant:"destructive",size:"sm",onClick:()=>dn(P.id),children:[n.jsx($i,{className:"h-4 w-4 mr-2"}),e==="es"?"Eliminar":"Delete"]})]})]},P.id))})]})]})}),x==="envios"&&n.jsx(n.Fragment,{children:n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[n.jsx(lo,{className:"mr-3",style:{color:c.primaryColor||"#2563eb"}}),e==="es"?"Zonas de Envío":"Shipping Zones"]}),n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:e==="es"?"Configura el costo de envío por provincia. Las provincias con costo $0 no aparecerán en el selector de envío.":"Configure shipping cost by province. Provinces with $0 cost will not appear in the shipping selector."}),Ie?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx(Sr,{className:"h-6 w-6 animate-spin",style:{color:c.primaryColor}})}):n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:X.map(P=>n.jsxs("div",{className:"p-4 border rounded-lg",style:{borderColor:P.is_active?c.primaryColor||"#2563eb":"#e5e7eb",backgroundColor:P.is_active?`${c.primaryColor||"#2563eb"}08`:"transparent"},children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wP,{className:"h-4 w-4",style:{color:c.primaryColor}}),n.jsx("span",{className:"font-medium",children:P.province_name})]}),R===P.id&&n.jsx(Sr,{className:"h-4 w-4 animate-spin",style:{color:c.primaryColor}})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:P.free_shipping||!1,onChange:W=>Hn(P.id,{...P,free_shipping:W.target.checked,shipping_cost:W.target.checked?0:P.shipping_cost,is_active:!0}),className:"rounded"}),n.jsx("span",{className:"text-sm",children:e==="es"?"Envío Gratis":"Free Shipping"})]}),!P.free_shipping&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:e==="es"?"Costo de envío ($)":"Shipping cost ($)"}),n.jsx("input",{type:"number",min:"0",step:"0.01",value:P.shipping_cost||0,onChange:W=>{const Ne=parseFloat(W.target.value)||0;Y(qe=>qe.map(Ye=>Ye.id===P.id?{...Ye,shipping_cost:Ne}:Ye))},onBlur:W=>{const Ne=parseFloat(W.target.value)||0;Ne!==P.shipping_cost&&Hn(P.id,{...P,shipping_cost:Ne,is_active:Ne>0})},className:"input-style w-full text-sm",placeholder:"0.00"})]}),n.jsx("div",{className:"flex items-center gap-2 text-xs",children:P.free_shipping?n.jsx("span",{className:"px-2 py-1 rounded",style:{backgroundColor:`${c.successColor||"#10b981"}20`,color:c.successColor||"#10b981"},children:e==="es"?"✓ Gratis":"✓ Free"}):P.shipping_cost>0?n.jsx("span",{className:"px-2 py-1 rounded",style:{backgroundColor:`${c.primaryColor||"#2563eb"}20`,color:c.primaryColor||"#2563eb"},children:e==="es"?"✓ Activo":"✓ Active"}):n.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-500",children:e==="es"?"No disponible":"Not available"})})]})]},P.id))})]})}),x==="remesas"&&n.jsx(n.Fragment,{children:n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[n.jsx(ix,{className:"mr-3",style:{color:c.primaryColor||"#2563eb"}}),e==="es"?"Configuración de Remesas":"Remittance Configuration"]}),n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:e==="es"?"Configure las monedas y métodos de pago disponibles para las remesas.":"Configure available currencies and payment methods for remittances."}),ae?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Sr,{className:"animate-spin h-6 w-6 text-gray-400"})}):n.jsx("div",{className:"space-y-6",children:se.map(P=>n.jsxs("div",{className:"border rounded-lg p-6",style:{borderColor:c.borderColor||"#e5e7eb"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:c.useGradient?`linear-gradient(to right, ${c.primaryColor||"#2563eb"}, ${c.secondaryColor||"#9333ea"})`:c.primaryColor||"#2563eb"},children:n.jsx("span",{className:"text-white font-bold text-sm",children:P.currency})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:P.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[P.currency==="MN"&&(e==="es"?"Moneda Nacional":"National Currency"),P.currency==="USD"&&(e==="es"?"Dólar Estadounidense":"US Dollar"),P.currency==="MLC"&&(e==="es"?"Moneda Libremente Convertible":"Freely Convertible Currency")]})]})]}),te===P.id&&n.jsx(Sr,{className:"animate-spin h-5 w-5 text-gray-400"})]}),n.jsxs("label",{className:"flex items-center gap-2 mb-4 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:P.enabled!==!1,onChange:W=>is(P.id,{enabled:W.target.checked}),className:"rounded"}),n.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Habilitar esta moneda":"Enable this currency"})]}),P.enabled!==!1&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-3",children:e==="es"?"Métodos de Pago Disponibles:":"Available Payment Methods:"}),n.jsx("div",{className:"space-y-2",children:P.paymentMethods?.map(W=>n.jsxs("label",{className:"flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",style:{borderColor:c.borderColor||"#e5e7eb"},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:W.enabled!==!1,onChange:()=>Es(P.id,W.id),className:"rounded"}),n.jsx(pP,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm font-medium",children:W.name})]}),W.enabled!==!1?n.jsx("span",{className:"text-xs px-2 py-1 rounded",style:{backgroundColor:`${c.successColor||"#10b981"}20`,color:c.successColor||"#10b981"},children:e==="es"?"✓ Activo":"✓ Active"}):n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-500",children:e==="es"?"Desactivado":"Disabled"})]},W.id))})]}),n.jsx("div",{className:"mt-4 pt-4 border-t",style:{borderColor:c.borderColor||"#e5e7eb"},children:n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[n.jsx("span",{children:e==="es"?"Métodos activos:":"Active methods:"}),n.jsxs("span",{className:"font-semibold",children:[P.paymentMethods?.filter(W=>W.enabled!==!1).length||0," / ",P.paymentMethods?.length||0]})]})})]},P.id))})]})}),x==="contenido"&&n.jsx(n.Fragment,{children:n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[n.jsx(ax,{className:"mr-3 text-green-600"}),t("settings.notifications.title")]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:t("settings.notifications.whatsapp")}),n.jsx("input",{type:"tel",value:_.whatsapp,onChange:P=>O({..._,whatsapp:P.target.value}),placeholder:"+1234567890",className:"w-full input-style"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Número de WhatsApp para soporte individual":"WhatsApp number for individual support"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Grupo de WhatsApp":"WhatsApp Group"}),n.jsx("input",{type:"text",value:_.whatsappGroup,onChange:P=>O({..._,whatsappGroup:P.target.value}),placeholder:"https://chat.whatsapp.com/xxxxx",className:"w-full input-style"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"URL del grupo de WhatsApp para notificaciones de pedidos":"WhatsApp group URL for order notifications"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:t("settings.notifications.adminEmail")}),n.jsx("input",{type:"email",value:_.adminEmail,onChange:P=>O({..._,adminEmail:P.target.value}),placeholder:"admin@example.com",className:"w-full input-style"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Email para recibir notificaciones de nuevos pedidos":"Email to receive new order notifications"})]})]}),n.jsx("div",{className:"mt-6 text-right",children:n.jsxs(ve,{onClick:Ji,style:Je(c),children:[n.jsx(gs,{className:"mr-2 h-4 w-4"}),t("settings.notifications.save")]})})]})})]})]})})},ZO=({onNavigate:t})=>{const{t:e,language:r}=kt(),{cart:i,updateCartQuantity:o,removeFromCart:l,clearCart:c,financialSettings:u,zelleAccounts:m,visualSettings:h,businessInfo:p,notificationSettings:g}=ar(),{isAuthenticated:x,user:b}=Dt(),[j,C]=w.useState("cart"),[_,O]=w.useState({fullName:"",phone:"",province:"",municipality:"",address:""}),[A,E]=w.useState(null),[N,D]=w.useState(null),[T,L]=w.useState(!1),[I,J]=w.useState(!1),[Q,we]=w.useState([]),[ie,be]=w.useState([]),[G,de]=w.useState(0),[U,ne]=w.useState("USD"),[z,ce]=w.useState([]),[oe,k]=w.useState(null),[$,ee]=w.useState(null),[ue,xe]=w.useState(null),Ce=w.useCallback(te=>{if(te.displayed_price&&te.displayed_currency_code)return te.displayed_currency_code===U,parseFloat(te.displayed_price);if(te.calculated_price_usd)return parseFloat(te.calculated_price_usd);if(te.products){const je=parseFloat(te.baseTotalPrice||0),Le=parseFloat(te.profitMargin||u.comboProfit||35)/100;return je*(1+Le)}else{const je=parseFloat(te.base_price||te.basePrice||0),Le=parseFloat(u.productProfit||40)/100;return je*(1+Le)}},[U,u.comboProfit,u.productProfit]),fe=w.useMemo(()=>i.reduce((te,je)=>te+Ce(je)*je.quantity,0),[i,Ce]);w.useEffect(()=>{Ee(),De()},[]),w.useEffect(()=>{if(_.province){const te=QO(_.province);be(te),O(je=>({...je,municipality:""}))}else be([])},[_.province]),w.useEffect(()=>{_.province&&Y(_.province)},[_.province,fe]),w.useEffect(()=>{X()},[U,fe,G]);const Ee=async()=>{try{const te=await qO();if(console.log("Shipping zones loaded:",te),te.success){const je=(te.zones||[]).filter(Le=>{const tt=parseFloat(Le.shipping_cost||0);return Le.free_shipping===!0||tt>0});we(je),console.log("Zones set:",je.length)}}catch(te){console.error("Error loading shipping zones:",te)}},De=async()=>{try{const{data:te,error:je}=await Qw();!je&&te&&ce(te)}catch(te){console.error("Error loading currencies:",te)}},X=async()=>{if(U==="USD"){k(fe),ee(G),xe(fe+G);return}try{const{data:te,error:je}=await ev(fe,"USD",U),{data:Le,error:tt}=await ev(G,"USD",U);!je&&!tt?(k(te),ee(Le),xe(te+Le)):(k(fe),ee(G),xe(fe+G))}catch(te){console.error("Error converting currency:",te),k(fe),ee(G),xe(fe+G)}},Y=async te=>{try{const je=await GO(te,fe);je.success&&de(je.cost)}catch(je){console.error("Error calculating shipping:",je),de(0)}},Ie=(fe+G).toFixed(2),_e=`PO-${Date.now()}`,R=m.find(te=>te.forProducts&&te.active),pe=()=>{if(!x){re({title:e("auth.loginRequired"),description:e("auth.loginToCheckout"),variant:"destructive"});return}C("recipient")},se=()=>{C("payment")},B=te=>{navigator.clipboard.writeText(te),re({title:`${te} ${e("cart.payment.copy")}!`})},ae=async te=>{const je=te.target.files?.[0];if(je){if(!rA.includes(je.type)){re({title:r==="es"?"Tipo de archivo inválido":"Invalid file type",description:r==="es"?"Solo se permiten imágenes JPG, PNG o WebP":"Only JPG, PNG or WebP images are allowed",variant:"destructive"});return}if(je.size>tA.PAYMENT_PROOF){re({title:r==="es"?"Archivo muy grande":"File too large",description:r==="es"?"El tamaño máximo es 5MB":"Maximum size is 5MB",variant:"destructive"});return}L(!0);try{const Le=await Ww(je,"payment_proof");if(!Le.success)throw new Error(Le.error||"Error processing image");D(Le.base64),E(Le.blob),re({title:r==="es"?"✅ Comprobante cargado":"✅ Proof uploaded",description:r==="es"?"La imagen se ha cargado correctamente":"Image uploaded successfully"})}catch(Le){console.error("Error uploading payment proof:",Le),re({title:r==="es"?"Error al cargar":"Upload error",description:Le.message,variant:"destructive"})}finally{L(!1)}}},Ae=async()=>{if(!A){re({title:r==="es"?"Comprobante requerido":"Proof required",description:r==="es"?"Por favor sube el comprobante de pago":"Please upload payment proof",variant:"destructive"});return}if(!b){re({title:r==="es"?"Error de autenticación":"Authentication error",description:r==="es"?"Por favor inicia sesión para continuar":"Please log in to continue",variant:"destructive"});return}J(!0);try{const te=z.find(nt=>nt.code===U);if(!te)throw new Error("Currency not found");const je=Q.find(nt=>nt.province_name===_.province);console.log("Creating order with:",{userId:b.id,currencyId:te.id,shippingZoneId:je?.id,zelleAccountId:m?.[0]?.id});const Le=i.map(nt=>({itemType:nt.type||"product",itemId:nt.id,nameEs:nt.name_es||nt.name,nameEn:nt.name_en||nt.name,quantity:nt.quantity,unitPrice:Ce(nt),totalPrice:Ce(nt)*nt.quantity,inventoryId:nt.inventory_id||null})),tt={userId:b.id,orderType:"product",subtotal:fe,shippingCost:G,totalAmount:fe+G,currencyId:te.id,recipientInfo:JSON.stringify(_),paymentMethod:"zelle",shippingZoneId:je?.id||null,zelleAccountId:null},wt=await O4(tt,Le);if(!wt.success)throw new Error(wt.error||"Error creating order");const mt=wt.order,$t=await U4(A,mt.id);if($t.success||console.error("Error uploading payment proof:",$t.error),p?.whatsapp){const nt={...mt,order_items:Le.map(We=>({item_name_es:r==="es"?We.name:We.nameEn||We.name,item_name_en:We.nameEn||We.name,quantity:We.quantity})),user_name:_.fullName};nO(nt,p.whatsapp,r)}re({title:r==="es"?"✅ Pedido confirmado":"✅ Order confirmed",description:r==="es"?`Tu pedido ${mt.order_number} ha sido creado. Recibirás una notificación cuando sea validado.`:`Your order ${mt.order_number} has been created. You'll receive a notification when it's validated.`}),c(),t("user-panel")}catch(te){console.error("Error confirming payment:",te),re({title:r==="es"?"Error al procesar":"Processing error",description:te.message||(r==="es"?"No se pudo procesar tu pedido. Por favor intenta de nuevo.":"Could not process your order. Please try again."),variant:"destructive"})}finally{J(!1)}};return j==="recipient"?n.jsx("div",{className:"container mx-auto max-w-2xl py-8 px-4",children:n.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",style:Ze(h),children:r==="es"?"Datos de Entrega":"Delivery Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-2",children:[r==="es"?"Nombre completo":"Full name"," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:r==="es"?"Ingrese el nombre completo del destinatario":"Enter recipient full name",value:_.fullName,onChange:te=>O({..._,fullName:te.target.value}),className:"input-style w-full",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-2",children:[r==="es"?"Teléfono":"Phone"," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"tel",placeholder:r==="es"?"Ej: +53 5 234 5678":"Ex: +53 5 234 5678",value:_.phone,onChange:te=>O({..._,phone:te.target.value}),className:"input-style w-full",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-2",children:[r==="es"?"Provincia":"Province"," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:_.province,onChange:te=>O({..._,province:te.target.value}),className:"input-style w-full",required:!0,children:[n.jsx("option",{value:"",children:r==="es"?"Seleccione una provincia":"Select a province"}),Q.map(te=>n.jsxs("option",{value:te.province_name,children:[te.province_name,te.free_shipping||parseFloat(te.shipping_cost)===0?` - ${r==="es"?"Envío Gratis":"Free Shipping"}`:` - $${parseFloat(te.shipping_cost).toFixed(2)}`]},te.id))]})]}),_.province&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-2",children:[r==="es"?"Municipio":"Municipality"," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:_.municipality,onChange:te=>O({..._,municipality:te.target.value}),className:"input-style w-full",required:!0,children:[n.jsx("option",{value:"",children:r==="es"?"Seleccione un municipio":"Select a municipality"}),ie.map(te=>n.jsx("option",{value:te,children:te},te))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-2",children:[r==="es"?"Dirección completa":"Full address"," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:r==="es"?"Calle, número, entre calles, edificio, apartamento, etc.":"Street, number, between streets, building, apartment, etc.",value:_.address,onChange:te=>O({..._,address:te.target.value}),className:"input-style w-full min-h-[100px]",required:!0})]}),_.province&&n.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:r==="es"?"Costo de envío":"Shipping cost"}),n.jsx("p",{className:"text-lg font-bold",style:{color:h.primaryColor},children:G===0?r==="es"?"¡Envío Gratis!":"Free Shipping!":`$${G.toFixed(2)}`})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx(ve,{variant:"outline",onClick:()=>C("cart"),className:"flex-1",children:r==="es"?"Atrás":"Back"}),n.jsx(ve,{onClick:se,style:Je(h),className:"flex-1",disabled:!_.fullName||!_.phone||!_.province||!_.municipality||!_.address,children:r==="es"?"Continuar al Pago":"Continue to Payment"})]})]})}):j==="payment"?n.jsx("div",{className:"container mx-auto max-w-2xl py-8 px-4",children:n.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",style:Ze(h),children:e("cart.payment.title")}),n.jsxs("div",{className:"p-4 rounded-lg mb-6",style:K4(h,"info"),children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:e("cart.payment.instructionsTitle")}),n.jsx("p",{className:"text-sm",children:e("cart.payment.instructions")})]}),R?n.jsxs("div",{className:"mb-6 space-y-2",children:[n.jsx("h3",{className:"font-semibold",children:e("cart.payment.accountInfo")}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",R.email]}),n.jsxs("p",{children:[n.jsxs("strong",{children:[e("settings.zelle.name"),":"]})," ",R.name]})]}):n.jsx("p",{className:"text-red-500",children:"No Zelle account available."}),n.jsxs("div",{className:"mb-6 space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{children:[e("cart.payment.purchaseId"),": ",n.jsx("strong",{className:"font-mono",children:_e})]}),n.jsxs(ve,{onClick:()=>B(_e),variant:"outline",children:[n.jsx(ox,{className:"mr-2 h-4 w-4"}),e("cart.payment.copy")]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{children:[e("cart.payment.amount"),": ",n.jsxs("strong",{className:"text-2xl",style:{color:h.successColor||"#10b981"},children:["$",Ie]})]}),n.jsxs(ve,{onClick:()=>B(Ie),variant:"outline",children:[n.jsx(ox,{className:"mr-2 h-4 w-4"}),e("cart.payment.copy")]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("label",{className:"block text-sm font-medium mb-2",children:[e("cart.payment.uploadProof")," ",n.jsx("span",{className:"text-red-500",children:"*"})]}),N?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2",style:{borderColor:h.successColor||"#10b981"},children:[n.jsx("img",{src:N,alt:"Payment proof",className:"w-full h-64 object-contain bg-gray-50"}),n.jsx("div",{className:"absolute top-2 right-2 p-2 rounded-full",style:{backgroundColor:h.successColor||"#10b981"},children:n.jsx(Qt,{className:"h-5 w-5 text-white"})})]}),n.jsxs(ve,{variant:"outline",onClick:()=>{E(null),D(null)},className:"w-full",children:[n.jsx(ir,{className:"mr-2 h-4 w-4"}),r==="es"?"Cambiar imagen":"Change image"]})]}):n.jsxs("label",{className:"cursor-pointer",children:[n.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",onChange:ae,className:"hidden",disabled:T}),n.jsx("div",{className:"flex justify-center px-6 py-8 border-2 border-dashed rounded-lg hover:border-gray-400 transition-colors",style:{borderColor:h.borderColor||"#d1d5db"},children:n.jsxs("div",{className:"space-y-2 text-center",children:[n.jsx(co,{className:"mx-auto h-12 w-12",style:{color:T?h.primaryColor:"#9ca3af"}}),n.jsx("div",{className:"text-sm",children:T?n.jsx("p",{className:"font-medium",style:{color:h.primaryColor},children:r==="es"?"Procesando imagen...":"Processing image..."}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"font-medium",style:{color:h.primaryColor},children:r==="es"?"Haz clic para subir":"Click to upload"}),n.jsx("p",{className:"text-gray-500",children:r==="es"?"JPG, PNG o WebP (máx. 5MB)":"JPG, PNG or WebP (max 5MB)"})]})})]})})]})]}),p?.whatsapp&&n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[n.jsx("p",{className:"text-sm text-gray-700 mb-3",children:r==="es"?"¿Tienes dudas sobre el pago? Contáctanos por WhatsApp":"Questions about payment? Contact us via WhatsApp"}),n.jsxs(ve,{variant:"outline",className:"w-full border-green-600 text-green-600 hover:bg-green-50",onClick:()=>{const te=r==="es"?`Hola! Tengo una consulta sobre mi pago. Total: ${z.find(je=>je.code===U)?.symbol||"$"}${ue!==null?ue.toFixed(2):(fe+G).toFixed(2)} ${U}`:`Hello! I have a question about my payment. Total: ${z.find(je=>je.code===U)?.symbol||"$"}${ue!==null?ue.toFixed(2):(fe+G).toFixed(2)} ${U}`;window.open(Ui(p.whatsapp,te),"_blank")},children:[n.jsx(qa,{className:"mr-2 h-5 w-5"}),r==="es"?"Contactar por WhatsApp":"Contact via WhatsApp"]})]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ve,{variant:"outline",onClick:()=>C("recipient"),className:"flex-1",disabled:I,children:r==="es"?"Atrás":"Back"}),n.jsx(ve,{onClick:Ae,className:"flex-1",size:"lg",style:Je(h),disabled:!A||T||I,children:I?r==="es"?"Procesando...":"Processing...":e("cart.payment.confirm")})]})]})}):n.jsx("div",{className:"min-h-screen py-8 px-4",children:n.jsxs("div",{className:"container mx-auto",children:[n.jsx(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:n.jsx("h1",{className:"text-4xl font-bold mb-4",style:Ze(h),children:e("cart.title")})}),i.length===0?n.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[n.jsx(oo,{className:"w-24 h-24 text-gray-300 mx-auto mb-6"}),n.jsx("h2",{className:"text-2xl font-semibold text-gray-600 mb-4",children:e("cart.empty")}),n.jsx(ve,{onClick:()=>t("products"),style:Je(h),children:e("cart.browse")})]}):n.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2 space-y-4",children:i.map(te=>{const je=Ce(te),Le=je*te.quantity,tt=r==="es"?te.name_es||te.name||"Producto":te.name_en||te.name||"Product",wt=te.image_url||te.image||"https://images.unsplash.com/photo-1635865165118-917ed9e20936",mt=!!te.products,$t=U==="USD"?1:oe!==null?oe/fe:1,nt=je*$t,We=Le*$t,or=z.find(Wr=>Wr.code===U)?.symbol||"$";return n.jsx(le.div,{layout:!0,className:"glass-effect p-4 rounded-2xl",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("img",{className:"w-24 h-24 rounded-lg object-cover flex-shrink-0",alt:tt,src:wt}),n.jsxs("div",{className:"flex-grow min-w-0",children:[n.jsxs("h3",{className:"font-semibold text-gray-800 mb-1",children:[tt,mt&&n.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"COMBO"})]}),n.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[r==="es"?"Precio unitario: ":"Unit price: ",n.jsxs("span",{className:"font-semibold",style:{color:h.accentColor||"#9333ea"},children:[or,nt.toFixed(2)," ",U]})]}),n.jsxs("p",{className:"text-base font-bold text-gray-900",children:["Subtotal: ",or,We.toFixed(2)," ",U]})]}),n.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[n.jsx(ve,{size:"icon",variant:"outline",onClick:()=>o(te.id,te.quantity-1),className:"h-8 w-8",children:n.jsx(_P,{className:"h-4 w-4"})}),n.jsx("span",{className:"w-8 text-center font-semibold",children:te.quantity}),n.jsx(ve,{size:"icon",variant:"outline",onClick:()=>o(te.id,te.quantity+1),className:"h-8 w-8",children:n.jsx(ws,{className:"h-4 w-4"})})]}),n.jsx(ve,{size:"icon",variant:"ghost",onClick:()=>l(te.id),className:"flex-shrink-0",children:n.jsx(ir,{className:"h-5 w-5 text-red-500"})})]})},te.id)})}),n.jsx("div",{className:"lg:col-span-1",children:n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-2xl space-y-6",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:e("cart.summary")}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:r==="es"?"Moneda":"Currency"}),n.jsx("select",{value:U,onChange:te=>ne(te.target.value),className:"input-style w-full",children:z.length>0?z.map(te=>n.jsxs("option",{value:te.code,children:[te.code," - ",r==="es"?te.name_es:te.name_en]},te.code)):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"USD",children:"USD - Dólar Estadounidense"}),n.jsx("option",{value:"EUR",children:"EUR - Euro"}),n.jsx("option",{value:"CUP",children:"CUP - Peso Cubano"})]})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:e("cart.subtotal")}),n.jsxs("span",{className:"font-semibold",children:[z.find(te=>te.code===U)?.symbol||"$",oe!==null?oe.toFixed(2):fe.toFixed(2)," ",U]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:e("cart.shipping")}),n.jsx("span",{className:"text-sm font-semibold",children:($!==null?$:G)===0?r==="es"?"Gratis":"Free":`${z.find(te=>te.code===U)?.symbol||"$"}${($!==null?$:G).toFixed(2)} ${U}`})]}),n.jsx("div",{className:"border-t my-2"}),n.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[n.jsx("span",{children:e("cart.total")}),n.jsxs("span",{style:{color:h.primaryColor||"#2563eb"},children:[z.find(te=>te.code===U)?.symbol||"$",ue!==null?ue.toFixed(2):(fe+G).toFixed(2)," ",U]})]})]}),n.jsx(ve,{onClick:pe,className:"w-full",size:"lg",style:Je(h),children:e("cart.checkout")})]})})]})]})})},eD=({onNavigate:t})=>{const{t:e}=kt(),{login:r,signInWithGoogle:i,userRole:o}=Dt(),{visualSettings:l}=ar(),[c,u]=w.useState(""),[m,h]=w.useState(""),p=async()=>{try{console.log("Attempting login with:",{email:c});const x=await r(c,m);console.log("Login attempt result:",x),x&&(console.log("Login successful"),re({title:"Login Successful",description:"Welcome back!",variant:"default"}),setTimeout(()=>{t(o==="admin"||o==="super_admin"?"dashboard":"products")},100))}catch(x){console.error("Login error:",x),re({title:"Login Error",description:x.message||"An unexpected error occurred",variant:"destructive"})}},g=async()=>{try{re({title:"Connecting to Google...",description:"Please wait while we redirect you.",variant:"default"}),await i();const x=re({title:"Redirecting...",description:"Please complete the sign in process with Google.",variant:"default"});setTimeout(()=>{x.dismiss()},2e3)}catch(x){console.error("Google login error:",x),re({title:"Login Error",description:x.message||"Failed to sign in with Google",variant:"destructive"})}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs(le.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-2xl",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold",style:Ze(l),children:e("auth.loginTitle")}),n.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:e("auth.loginSubtitle")})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx(bP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"email",autoComplete:"email",required:!0,value:c,onChange:x=>u(x.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("auth.email")})]}),n.jsxs("div",{className:"relative",children:[n.jsx(xP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"password",autoComplete:"current-password",required:!0,value:m,onChange:x=>h(x.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("auth.password")})]}),n.jsx("div",{children:n.jsxs(ve,{onClick:p,className:"w-full group relative flex justify-center py-3 px-4",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.buttonBgColor||"#2563eb",color:l.buttonTextColor||"#ffffff",border:"none"},children:[n.jsx(bb,{className:"w-5 h-5 mr-2"}),e("auth.login")]})}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-300"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-white text-gray-500",children:e("auth.or")})})]}),n.jsx("div",{children:n.jsxs(ve,{onClick:g,variant:"outline",className:"w-full group relative flex justify-center py-3 px-4",style:{borderColor:l.primaryColor||"#2563eb",color:l.primaryColor||"#2563eb"},children:[n.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:n.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 126 21.2 172.9 56.9L368.7 128C338.8 102.3 298.2 88 248 88c-86.5 0-157.2 70.2-157.2 156.8s70.7 156.8 157.2 156.8c99.9 0 133-67.8 138.3-103.3H248v-67.3h239.1c1.3 12.2 2.2 24.2 2.2 36.8z"})}),e("auth.loginWithGoogle")]})}),n.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Admin: admin@test.com / test123 ",n.jsx("br",{}),"User: user@test.com / test123"]})]})]})})},tD=({onNavigate:t})=>{const{user:e,userRole:r}=Dt(),{t:i,language:o}=kt(),{visualSettings:l,businessInfo:c}=ar(),[u,m]=w.useState([]),[h,p]=w.useState(!0),[g,x]=w.useState(null),[b,j]=w.useState(!1),[C,_]=w.useState(!1),[O,A]=w.useState(null),[E,N]=w.useState(0),[D,T]=w.useState(""),[L,I]=w.useState(!1),[J,Q]=w.useState(!1),[we,ie]=w.useState(!1),[be,G]=w.useState(""),[de,U]=w.useState(null);w.useEffect(()=>{if(!e){t("login");return}z(),r!=="admin"&&r!=="super_admin"&&ne()},[e,r]);const ne=async()=>{if(e?.id)try{const X=await gA(e.id);X.data&&(A(X.data),N(X.data.rating),T(X.data.comment||""))}catch(X){console.error("Error loading testimonial:",X)}},z=async()=>{if(e?.id){console.log("[UserPanel] Loading orders for role:",r),p(!0);try{if(r==="admin"||r==="super_admin"){console.log("[UserPanel] Loading pending orders for admin");const X=await Vw({payment_status:"pending"});console.log("[UserPanel] Admin orders result:",X),X.success&&m(X.orders)}else{console.log("[UserPanel] Loading user orders for regular user");const X=await M4(e.id);console.log("[UserPanel] User orders result:",X),X.success&&m(X.orders)}}catch(X){console.error("Error loading orders:",X)}finally{p(!1)}}},ce=async X=>{_(!0),j(!0);try{const Y=await I4(X);console.log("[UserPanel] Order details loaded:",Y),Y.success&&(x(Y.order),console.log("[UserPanel] Selected order payment_status:",Y.order?.payment_status),console.log("[UserPanel] Payment proof URL:",Y.order?.payment_proof_url),console.log("[UserPanel] Current userRole:",r))}catch(Y){console.error("Error loading order details:",Y)}finally{_(!1)}},oe=async X=>{U(X),Q(!0)},k=async()=>{_(!0),Q(!1);try{(await $4(de,e.id)).success&&(await z(),j(!1),x(null))}catch(X){console.error("Error validating payment:",X)}finally{_(!1),U(null)}},$=async X=>{U(X),G(""),ie(!0)},ee=async()=>{if(be.trim()){_(!0),ie(!1);try{(await F4(de,e.id,be)).success&&(await z(),j(!1),x(null))}catch(X){console.error("Error rejecting payment:",X)}finally{_(!1),U(null),G("")}}},ue=async()=>{if(E===0){alert(o==="es"?"Por favor selecciona una calificación":"Please select a rating");return}I(!0);try{const X={user_id:e.id,rating:E,comment:D.trim()};let Y;O?Y=await mA(O.id,{rating:E,comment:D.trim()}):Y=await fA(X),Y.data&&(A(Y.data),alert(o==="es"?"¡Gracias por tu testimonio! Será revisado por nuestro equipo.":"Thank you for your testimonial! It will be reviewed by our team."))}catch(X){console.error("Error saving testimonial:",X),alert(o==="es"?"Error al guardar el testimonio":"Error saving testimonial")}finally{I(!1)}},xe=(X,Y)=>Y==="validated"||X==="completed"?n.jsx(Qt,{className:"h-5 w-5",style:{color:l.successColor||"#10b981"}}):Y==="rejected"||X==="cancelled"?n.jsx(Ur,{className:"h-5 w-5",style:{color:l.errorColor||"#ef4444"}}):Y==="pending"||X==="pending"?n.jsx(bs,{className:"h-5 w-5",style:{color:l.warningColor||"#f59e0b"}}):n.jsx(bs,{className:"h-5 w-5",style:{color:l.textSecondaryColor||"#6b7280"}}),Ce=(X,Y)=>Y==="validated"?o==="es"?"Validado":"Validated":Y==="rejected"?o==="es"?"Rechazado":"Rejected":Y==="pending"?o==="es"?"Pendiente":"Pending":X==="processing"?o==="es"?"En proceso":"Processing":X==="completed"?o==="es"?"Completado":"Completed":o==="es"?"Pendiente":"Pending",fe=X=>{switch(X){case"product":return n.jsx(pr,{className:"h-4 w-4"});case"combo":return n.jsx(Er,{className:"h-4 w-4"});case"remittance":return n.jsx(qt,{className:"h-4 w-4"});default:return n.jsx(pr,{className:"h-4 w-4"})}},Ee=X=>{switch(X){case"product":return o==="es"?"Producto":"Product";case"combo":return"Combo";case"remittance":return o==="es"?"Remesa":"Remittance";default:return X}};if(!e)return null;const De=e?.profile?.full_name||e?.user_metadata?.full_name||e?.user_metadata?.name||"Usuario";return n.jsxs("div",{className:"min-h-screen py-8 px-4",children:[n.jsxs("div",{className:"container mx-auto max-w-6xl",children:[n.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[n.jsx("h1",{className:"text-4xl font-bold mb-4",style:Ze(l),children:i("userPanel.title")}),n.jsx("p",{className:"text-xl",style:Be(l,"secondary"),children:o==="es"?`Bienvenido, ${De}`:`Welcome, ${De}`})]}),c?.whatsapp&&n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:n.jsxs("div",{className:"p-4 rounded-xl border flex items-center justify-between bg-white",style:{borderColor:"#10b981"},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:n.jsx(qa,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",style:Be(l,"primary"),children:o==="es"?"¿Necesitas ayuda?":"Need help?"}),n.jsx("p",{className:"text-sm",style:Be(l,"muted"),children:o==="es"?"Ante dudas contactar a soporte vía WhatsApp":"Contact support via WhatsApp for any questions"})]})]}),n.jsxs(ve,{onClick:()=>{const X=o==="es"?`Hola! Soy ${De}. Necesito ayuda con mi cuenta.`:`Hello! I'm ${De}. I need help with my account.`;window.open(Ui(c.whatsapp,X),"_blank")},className:"bg-green-600 hover:bg-green-700 text-white",children:[n.jsx(qa,{className:"h-4 w-4 mr-2"}),o==="es"?"Contactar":"Contact"]})]})}),n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-8 rounded-2xl bg-white shadow-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-2xl font-semibold flex items-center",style:Be(l,"primary"),children:[n.jsx("div",{className:"p-2 rounded-lg mr-3",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.primaryColor||"#2563eb"},children:n.jsx(Er,{className:"h-5 w-5 text-white"})}),r==="admin"||r==="super_admin"?o==="es"?"Pedidos Pendientes":"Pending Orders":i("userPanel.myOrders")]}),r!=="admin"&&r!=="super_admin"&&c?.whatsapp&&n.jsxs(ve,{size:"default",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{const X=o==="es"?`Hola! Soy ${De}. Necesito ayuda con mis pedidos.`:`Hello! I'm ${De}. I need help with my orders.`;window.open(Ui(c.whatsapp,X),"_blank","noopener,noreferrer")},title:o==="es"?"Contactar por WhatsApp":"Contact via WhatsApp",children:[n.jsx(qa,{className:"h-4 w-4 mr-2"}),o==="es"?"Contactar":"Contact"]})]}),h?n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx($a,{className:"h-8 w-8 animate-spin",style:{color:l.primaryColor}})}):u.length>0?n.jsx("div",{className:"space-y-4",children:u.map(X=>n.jsx(le.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 border rounded-lg hover:shadow-md transition-all cursor-pointer",style:{borderColor:l.borderColor||"#e5e7eb"},onClick:()=>ce(X.id),children:n.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-[200px]",children:[n.jsx("p",{className:"font-semibold mb-1",style:Be(l,"primary"),children:X.order_number}),(r==="admin"||r==="super_admin")&&X.user_profiles&&n.jsxs("p",{className:"text-sm font-medium mb-1",style:Be(l,"secondary"),children:["👤 ",X.user_profiles.full_name||X.user_profiles.email]}),n.jsx("p",{className:"text-sm",style:Be(l,"muted"),children:new Date(X.created_at).toLocaleDateString(o==="es"?"es-ES":"en-US",{year:"numeric",month:"long",day:"numeric"})}),X.shipping_zones&&n.jsxs("p",{className:"text-xs mt-1",style:Be(l,"muted"),children:["📍 ",X.shipping_zones.province_name]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-bold mb-1",style:{color:l.primaryColor},children:["$",parseFloat(X.total_amount).toFixed(2)," ",X.currencies?.code||"USD"]}),n.jsxs("p",{className:"text-xs",style:Be(l,"muted"),children:[X.order_items?.length||0," ",o==="es"?"artículos":"items"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"px-3 py-1.5 rounded-full flex items-center gap-2 text-sm font-medium",style:mf(X.payment_status||X.status,l),children:[xe(X.status,X.payment_status),n.jsx("span",{children:Ce(X.status,X.payment_status)})]}),r!=="admin"&&r!=="super_admin"&&c?.whatsapp&&(X.payment_status==="pending"||X.status==="processing"||X.status==="pending")&&n.jsx(ve,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:Y=>{Y.stopPropagation();const Ie=Ce(X.status,X.payment_status),_e=o==="es"?`Hola! Soy ${De}. Tengo una consulta sobre mi pedido ${X.order_number} (Estado: ${Ie}, Total: $${parseFloat(X.total_amount).toFixed(2)} ${X.currencies?.code||"USD"}).`:`Hello! I'm ${De}. I have a question about my order ${X.order_number} (Status: ${Ie}, Total: $${parseFloat(X.total_amount).toFixed(2)} ${X.currencies?.code||"USD"}).`;window.open(Ui(c.whatsapp,_e),"_blank","noopener,noreferrer")},title:o==="es"?"Consultar sobre este pedido":"Ask about this order",children:n.jsx(qa,{className:"h-3 w-3"})}),n.jsx(ve,{size:"sm",variant:"ghost",children:n.jsx(Cs,{className:"h-4 w-4"})})]})]})},X.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Er,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),n.jsx("p",{className:"text-lg mb-2",style:Be(l,"secondary"),children:i("userPanel.noOrders")}),n.jsx("p",{className:"text-sm",style:Be(l,"muted"),children:o==="es"?"Comienza a comprar para ver tus pedidos aquí":"Start shopping to see your orders here"})]})]}),r!=="admin"&&r!=="super_admin"&&n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"p-8 rounded-2xl mt-6 bg-white shadow-lg border border-gray-200",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",style:Be(l,"primary"),children:[n.jsx("div",{className:"p-2 rounded-lg mr-3",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.primaryColor||"#2563eb"},children:n.jsx(Ja,{className:"h-5 w-5 text-white"})}),o==="es"?"Califica tu Experiencia":"Rate Your Experience"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",style:Be(l,"primary"),children:o==="es"?"Calificación":"Rating"}),n.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(X=>n.jsx("button",{type:"button",onClick:()=>N(X),className:"transition-transform hover:scale-110",children:n.jsx(Ja,{className:"h-8 w-8",fill:X<=E?l.primaryColor||"#2563eb":"none",stroke:X<=E?l.primaryColor||"#2563eb":"#d1d5db"})},X))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",style:Be(l,"primary"),children:o==="es"?"Comentario (opcional)":"Comment (optional)"}),n.jsx("textarea",{value:D,onChange:X=>T(X.target.value),placeholder:o==="es"?"Comparte tu experiencia con nosotros...":"Share your experience with us...",rows:4,className:"w-full px-4 py-2 rounded-lg border resize-none",style:{borderColor:l.borderColor||"#e5e7eb",backgroundColor:l.inputBgColor||"#ffffff",color:l.textPrimaryColor||"#1f2937"}})]}),O&&n.jsx("div",{className:"p-3 rounded-lg text-sm",style:{backgroundColor:O.is_visible?`${l.successColor||"#10b981"}20`:`${l.warningColor||"#f59e0b"}20`,color:O.is_visible?l.successColor||"#10b981":l.warningColor||"#f59e0b"},children:O.is_visible?o==="es"?"✓ Tu testimonio ha sido publicado":"✓ Your testimonial has been published":o==="es"?"⏳ Tu testimonio está pendiente de aprobación":"⏳ Your testimonial is pending approval"}),n.jsx(ve,{onClick:ue,disabled:L||E===0,className:"w-full",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.primaryColor||"#2563eb",color:"#ffffff"},children:L?n.jsxs(n.Fragment,{children:[n.jsx($a,{className:"h-4 w-4 mr-2 animate-spin"}),o==="es"?"Guardando...":"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ja,{className:"h-4 w-4 mr-2"}),O?o==="es"?"Actualizar Testimonio":"Update Testimonial":o==="es"?"Enviar Testimonio":"Submit Testimonial"]})})]})]})]}),n.jsx(Vr,{children:b&&n.jsxs(n.Fragment,{children:[n.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40",onClick:()=>{j(!1),x(null)}}),n.jsx(le.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:X=>X.stopPropagation(),children:n.jsxs("div",{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto p-6 rounded-2xl shadow-2xl bg-white border border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold mb-2",style:Ze(l),children:o==="es"?"Detalles del Pedido":"Order Details"}),g&&n.jsx("p",{className:"text-sm",style:Be(l,"muted"),children:g.order_number})]}),n.jsx(ve,{variant:"ghost",size:"icon",onClick:()=>{j(!1),x(null)},children:n.jsx(ir,{className:"h-5 w-5"})})]}),C?n.jsx("div",{className:"flex justify-center items-center py-12",children:n.jsx($a,{className:"h-8 w-8 animate-spin",style:{color:l.primaryColor}})}):g?n.jsxs("div",{className:"space-y-6",children:[(r==="admin"||r==="super_admin")&&g.user_profiles&&n.jsxs("div",{className:"p-4 rounded-lg border",style:{borderColor:l.borderColor||"#e5e7eb",backgroundColor:`${l.primaryColor}10`},children:[n.jsx("h4",{className:"text-sm font-semibold mb-2",style:Be(l,"primary"),children:o==="es"?"Datos del Cliente":"Customer Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",style:Be(l,"muted"),children:o==="es"?"Nombre:":"Name:"})," ",n.jsx("span",{style:Be(l,"primary"),children:g.user_profiles.full_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",style:Be(l,"muted"),children:"Email:"})," ",n.jsx("span",{style:Be(l,"primary"),children:g.user_profiles.email||"N/A"})]}),g.shipping_phone&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",style:Be(l,"muted"),children:o==="es"?"Teléfono:":"Phone:"})," ",n.jsx("span",{style:Be(l,"primary"),children:g.shipping_phone})]}),g.shipping_address&&n.jsxs("div",{className:"col-span-2",children:[n.jsx("span",{className:"font-medium",style:Be(l,"muted"),children:o==="es"?"Dirección:":"Address:"})," ",n.jsx("span",{style:Be(l,"primary"),children:g.shipping_address})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium mb-1",style:Be(l,"muted"),children:o==="es"?"Fecha":"Date"}),n.jsx("p",{className:"text-sm",style:Be(l,"primary"),children:new Date(g.created_at).toLocaleDateString(o==="es"?"es-ES":"en-US")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium mb-1",style:Be(l,"muted"),children:o==="es"?"Estado":"Status"}),n.jsx("div",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium",style:mf(g.payment_status||g.status,l),children:Ce(g.status,g.payment_status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium mb-1",style:Be(l,"muted"),children:o==="es"?"Provincia":"Province"}),n.jsx("p",{className:"text-sm",style:Be(l,"primary"),children:g.shipping_zones?.province_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium mb-1",style:Be(l,"muted"),children:"Total"}),n.jsxs("p",{className:"text-lg font-bold",style:{color:l.primaryColor},children:["$",parseFloat(g.total_amount).toFixed(2)," ",g.currencies?.code||"USD"]})]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold mb-3",style:Be(l,"primary"),children:o==="es"?"Artículos":"Items"}),n.jsx("div",{className:"space-y-3",children:g.order_items?.map((X,Y)=>n.jsx("div",{className:"p-3 rounded-lg border",style:{borderColor:l.borderColor||"#e5e7eb"},children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 flex-shrink-0 overflow-hidden",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:fe(X.item_type)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium mb-1",style:Be(l,"primary"),children:o==="es"?X.item_name_es:X.item_name_en}),n.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",style:Be(l,"muted"),children:[n.jsx("span",{className:"px-2 py-0.5 rounded",style:Bw(l,"info"),children:Ee(X.item_type)}),n.jsxs("span",{children:[o==="es"?"Cantidad":"Qty",": ",X.quantity]})]}),n.jsxs("p",{className:"text-xs",style:Be(l,"muted"),children:["$",parseFloat(X.unit_price).toFixed(2)," × ",X.quantity]})]}),n.jsx("div",{className:"text-right flex-shrink-0",children:n.jsxs("p",{className:"text-base font-bold",style:Be(l,"primary"),children:["$",parseFloat(X.total_price).toFixed(2)]})})]})},Y))})]}),n.jsx("div",{className:"border-t pt-4",style:{borderColor:l.borderColor||"#e5e7eb"},children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{style:Be(l,"secondary"),children:"Subtotal"}),n.jsxs("span",{className:"font-semibold",style:Be(l,"primary"),children:["$",parseFloat(g.subtotal).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{style:Be(l,"secondary"),children:o==="es"?"Envío":"Shipping"}),n.jsx("span",{className:"font-semibold",style:Be(l,"primary"),children:parseFloat(g.shipping_cost)===0?o==="es"?"Gratis":"Free":`$${parseFloat(g.shipping_cost).toFixed(2)}`})]}),n.jsx("div",{className:"border-t pt-2 mt-2",style:{borderColor:l.borderColor||"#e5e7eb"},children:n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-lg font-bold",style:Be(l,"primary"),children:"Total"}),n.jsxs("span",{className:"text-xl font-bold",style:{color:l.primaryColor},children:["$",parseFloat(g.total_amount).toFixed(2)," ",g.currencies?.code||"USD"]})]})})]})})]}),n.jsx("div",{children:g.payment_proof_url?n.jsxs("div",{className:"sticky top-4",children:[n.jsx("h4",{className:"text-lg font-semibold mb-3",style:Be(l,"primary"),children:o==="es"?"Comprobante de Pago":"Payment Proof"}),n.jsx("div",{className:"rounded-lg border overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",style:{borderColor:l.borderColor||"#e5e7eb"},onClick:()=>window.open(g.payment_proof_url,"_blank"),children:n.jsx("img",{src:g.payment_proof_url,alt:"Payment proof",className:"w-full h-auto object-contain max-h-[600px] bg-gray-50",onError:X=>{console.error("[UserPanel] Error loading payment proof image:",g.payment_proof_url),X.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><rect fill="%23f3f4f6" width="400" height="300"/><text x="50%" y="50%" font-family="Arial" font-size="16" fill="%236b7280" text-anchor="middle">Error al cargar imagen</text></svg>'}})}),n.jsx("p",{className:"text-xs text-center mt-2",style:Be(l,"muted"),children:o==="es"?"Click para ver en tamaño completo":"Click to view full size"})]}):n.jsxs("div",{className:"sticky top-4 p-6 rounded-lg border-2 border-dashed text-center",style:{borderColor:l.borderColor||"#e5e7eb"},children:[n.jsx(jo,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{className:"text-sm",style:Be(l,"muted"),children:o==="es"?"Sin comprobante de pago":"No payment proof"})]})})]}),g.rejection_reason&&n.jsxs("div",{className:"p-4 rounded-lg",style:mf("rejected",l),children:[n.jsx("p",{className:"font-medium mb-1",children:o==="es"?"Motivo de Rechazo":"Rejection Reason"}),n.jsx("p",{className:"text-sm",children:g.rejection_reason})]}),(r==="admin"||r==="super_admin")&&g.payment_status==="pending"&&n.jsxs("div",{className:"flex gap-3 pt-4 border-t",style:{borderColor:l.borderColor||"#e5e7eb"},children:[n.jsxs(ve,{onClick:()=>oe(g.id),disabled:C,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),o==="es"?"Validar Pago":"Validate Payment"]}),n.jsxs(ve,{onClick:()=>$(g.id),disabled:C,variant:"destructive",className:"flex-1",children:[n.jsx(Ur,{className:"h-4 w-4 mr-2"}),o==="es"?"Rechazar":"Reject"]})]})]}):null]})})]})}),n.jsx(Vr,{children:J&&n.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Q(!1),children:n.jsxs(le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:X=>X.stopPropagation(),className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Qt,{className:"h-8 w-8 text-green-600"})}),n.jsx("h3",{className:"text-2xl font-bold mb-2",style:Be(l,"primary"),children:o==="es"?"¿Validar Pago?":"Validate Payment?"}),n.jsx("p",{className:"text-gray-600",children:o==="es"?"Esto aprobará el pedido y actualizará el inventario":"This will approve the order and update inventory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ve,{onClick:()=>Q(!1),variant:"outline",className:"flex-1",disabled:C,children:o==="es"?"Cancelar":"Cancel"}),n.jsxs(ve,{onClick:k,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",disabled:C,children:[C?n.jsx($a,{className:"h-4 w-4 animate-spin mr-2"}):n.jsx(Qt,{className:"h-4 w-4 mr-2"}),o==="es"?"Confirmar":"Confirm"]})]})]})})}),n.jsx(Vr,{children:we&&n.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>ie(!1),children:n.jsxs(le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:X=>X.stopPropagation(),className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Ur,{className:"h-8 w-8 text-red-600"})}),n.jsx("h3",{className:"text-2xl font-bold mb-2",style:Be(l,"primary"),children:o==="es"?"Rechazar Pago":"Reject Payment"}),n.jsx("p",{className:"text-gray-600 mb-4",children:o==="es"?"Por favor indica el motivo del rechazo":"Please indicate the reason for rejection"})]}),n.jsx("textarea",{value:be,onChange:X=>G(X.target.value),placeholder:o==="es"?"Motivo del rechazo...":"Rejection reason...",className:"w-full p-3 border rounded-lg mb-4 min-h-[100px] focus:ring-2 focus:ring-red-500 focus:border-transparent",style:{borderColor:l.borderColor||"#e5e7eb"}}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ve,{onClick:()=>ie(!1),variant:"outline",className:"flex-1",disabled:C,children:o==="es"?"Cancelar":"Cancel"}),n.jsxs(ve,{onClick:ee,variant:"destructive",className:"flex-1",disabled:C||!be.trim(),children:[C?n.jsx($a,{className:"h-4 w-4 animate-spin mr-2"}):n.jsx(Ur,{className:"h-4 w-4 mr-2"}),o==="es"?"Rechazar":"Reject"]})]})]})})})]})},Ba=["jtheoden@gmail.com","jtheoden@googlemail.com"],rD=()=>{const{t}=kt(),{user:e}=Dt(),{visualSettings:r}=ar(),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,m]=w.useState(""),h=async()=>{c(!0);try{const{data:_,error:O}=await q.from("user_profiles").select("id, email, role, is_enabled, full_name, avatar_url, created_at").order("created_at",{ascending:!1});if(O)throw O;o(_||[])}catch(_){console.error("Error fetching users:",_),re({title:t("users.fetchError"),description:_.message,variant:"destructive"})}finally{c(!1)}};w.useEffect(()=>{h()},[]);const p=async(_,O)=>{try{const A=i.find(N=>N.id===_);if(Ba.includes(A?.email))throw new Error(t("users.cannotModifySuperAdmin"));const{error:E}=await q.from("user_profiles").update({role:O}).eq("id",_);if(E)throw E;await h(),re({title:t("users.roleUpdated"),description:t("users.roleUpdatedSuccess")})}catch(A){console.error("Error updating user role:",A),re({title:t("users.roleUpdateError"),description:A.message,variant:"destructive"})}},g=async(_,O)=>{try{const A=i.find(N=>N.id===_);if(Ba.includes(A?.email))throw new Error(t("users.cannotModifySuperAdmin"));const{error:E}=await q.from("user_profiles").update({is_enabled:O}).eq("id",_);if(E)throw E;await h(),re({title:t(O?"users.userEnabled":"users.userDisabled"),description:t("users.statusUpdateSuccess")})}catch(A){console.error("Error updating user status:",A),re({title:t("users.statusUpdateError"),description:A.message,variant:"destructive"})}},x=async _=>{const O=i.find(E=>E.id===_);if(Ba.includes(O?.email)){re({title:t("users.deleteError"),description:t("users.cannotModifySuperAdmin"),variant:"destructive"});return}const A=t("users.confirmDelete",{email:O?.email});if(window.confirm(A))try{const{error:E}=await q.from("user_profiles").delete().eq("id",_);if(E)throw E;const{error:N}=await q.auth.admin.deleteUser(_);N&&console.warn("Could not delete from auth.users:",N),await h(),re({title:t("users.userDeleted"),description:t("users.userDeletedSuccess")})}catch(E){console.error("Error deleting user:",E),re({title:t("users.deleteError"),description:E.message,variant:"destructive"})}},b=Ba.includes(e?.email),j=i.filter(_=>_.email?.toLowerCase().includes(u.toLowerCase())||_.full_name?.toLowerCase().includes(u.toLowerCase())),C=_=>{switch(_){case"super_admin":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return n.jsx("div",{className:"min-h-screen py-8 px-4",children:n.jsxs("div",{className:"container mx-auto max-w-7xl",children:[n.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold mb-2",style:Ze(r),children:t("users.management")}),n.jsx("p",{className:"text-gray-600",children:t("users.managementDescription")})]}),n.jsxs(ve,{onClick:h,disabled:l,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Sr,{className:`w-4 h-4 ${l?"animate-spin":""}`}),t("users.refresh")]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[n.jsxs("div",{className:"relative w-full sm:w-96",children:[n.jsx(Dc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:`${t("users.table.email")}, ${t("users.table.name")}...`,value:u,onChange:_=>m(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"flex gap-4 text-sm",children:[n.jsxs("div",{className:"px-4 py-2 glass-effect rounded-xl",children:[n.jsxs("span",{className:"text-gray-600",children:[t("users.total"),":"]}),n.jsx("span",{className:"ml-2 font-bold",children:i.length})]}),n.jsxs("div",{className:"px-4 py-2 glass-effect rounded-xl",children:[n.jsxs("span",{className:"text-gray-600",children:[t("users.table.active"),":"]}),n.jsx("span",{className:"ml-2 font-bold text-green-600",children:i.filter(_=>_.is_enabled).length})]})]})]})]}),n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect rounded-2xl overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.email")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.name")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.role")}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.status")}),n.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.actions")})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:l?n.jsx("tr",{children:n.jsxs("td",{colSpan:"5",className:"px-6 py-12 text-center",children:[n.jsx(Sr,{className:"w-8 h-8 animate-spin mx-auto text-gray-400 mb-2"}),n.jsx("p",{className:"text-gray-500",children:t("users.loadingUsers")})]})}):j.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:"5",className:"px-6 py-12 text-center",children:[n.jsx(Mc,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),n.jsx("p",{className:"text-gray-500",children:t(u?"users.noUsersFound":"users.noUsers")})]})}):j.map((_,O)=>{const A=Ba.includes(_.email);return n.jsxs(le.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:O*.05},className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:n.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-semibold",children:_.email?.charAt(0).toUpperCase()})}),n.jsx("div",{className:"ml-4",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.email})})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"text-sm text-gray-900",children:_.full_name||"-"})}),n.jsx("td",{className:"px-6 py-4",children:A?n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[n.jsx(Xu,{className:"w-3 h-3 mr-1"}),t("users.superAdmin")]}):b?n.jsxs("select",{value:_.role||"user",onChange:E=>p(_.id,E.target.value),className:`px-3 py-1 rounded-full text-xs font-medium border-0 focus:ring-2 focus:ring-blue-500 ${C(_.role)}`,children:[n.jsx("option",{value:"user",children:t("users.roles.user")}),n.jsx("option",{value:"admin",children:t("users.roles.admin")})]}):n.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${C(_.role)}`,children:t(`users.roles.${_.role||"user"}`)})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${_.is_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_.is_enabled?t("users.table.active"):t("users.table.inactive")})}),n.jsx("td",{className:"px-6 py-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[!A&&b&&n.jsxs(n.Fragment,{children:[n.jsx(ve,{variant:_.is_enabled?"outline":"default",size:"sm",onClick:()=>g(_.id,!_.is_enabled),className:"flex items-center gap-2",title:_.is_enabled?t("users.disableUser"):t("users.enableUser"),children:_.is_enabled?n.jsxs(n.Fragment,{children:[n.jsx(kP,{className:"w-4 h-4"}),t("users.disable")]}):n.jsxs(n.Fragment,{children:[n.jsx(PP,{className:"w-4 h-4"}),t("users.enable")]})}),n.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>x(_.id),className:"flex items-center gap-2",style:{backgroundColor:r.destructiveBgColor||"#dc2626",color:r.destructiveTextColor||"#ffffff",borderColor:r.destructiveBgColor||"#dc2626"},onMouseEnter:E=>E.currentTarget.style.backgroundColor=r.destructiveHoverBgColor||"#b91c1c",onMouseLeave:E=>E.currentTarget.style.backgroundColor=r.destructiveBgColor||"#dc2626",title:t("users.deleteUser"),children:[n.jsx($i,{className:"w-4 h-4"}),t("users.delete")]})]}),A&&n.jsxs("span",{className:"text-xs text-gray-400 italic flex items-center gap-1",children:[n.jsx(Xu,{className:"w-3 h-3"}),t("users.protected")]})]})})]},_.id)})})]})})}),n.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Xu,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsxs("p",{className:"font-semibold mb-1",children:[t("users.rolesPermissions.title"),":"]}),n.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[n.jsxs("li",{children:[n.jsxs("strong",{children:[t("users.roles.user"),":"]})," ",t("users.rolesPermissions.userDesc")]}),n.jsxs("li",{children:[n.jsxs("strong",{children:[t("users.roles.admin"),":"]})," ",t("users.rolesPermissions.adminDesc")]}),n.jsxs("li",{children:[n.jsxs("strong",{children:[t("users.roles.super_admin"),":"]})," ",t("users.rolesPermissions.superAdminDesc")]})]})]})]})}),n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"p-4 bg-amber-50 border border-amber-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ps,{className:"w-5 h-5 text-amber-600 mt-0.5"}),n.jsxs("div",{className:"text-sm text-amber-800",children:[n.jsxs("p",{className:"font-semibold mb-1",children:[t("users.securityNote.title"),":"]}),n.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[n.jsx("li",{children:t("users.securityNote.superAdminProtected")}),n.jsx("li",{children:t("users.securityNote.onlySuperAdminManage")}),n.jsx("li",{children:t("users.securityNote.deletionPermanent")})]})]})]})})]})]})})},rv="papuenvios_supabase_auth_handled",sD=({onNavigate:t})=>{const[e,r]=w.useState(!0),[i,o]=w.useState(null);return w.useEffect(()=>{let l=!0;return(async()=>{try{if(console.log("[AuthCallback] start handling callback",{href:window.location.href,hash:window.location.hash,search:window.location.search}),sessionStorage.getItem(rv)==="1"){console.warn("[AuthCallback] already handled in this session"),l&&r(!1);const{data:{session:m}}=await q.auth.getSession();if(m?.user&&t){const h=await Yf(m.user.id);t(h==="admin"||h==="super_admin"?"dashboard":"products")}return}sessionStorage.setItem(rv,"1");let u=null;if(typeof q.auth.getSessionFromUrl=="function"){const{data:m,error:h}=await q.auth.getSessionFromUrl({storeSession:!0});h?console.warn("[AuthCallback] getSessionFromUrl returned error",h):u=m?.session}if(!u){const{data:{session:m},error:h}=await q.auth.getSession();h&&console.warn("[AuthCallback] getSession returned error",h),u=m}if(!u){await new Promise(h=>setTimeout(h,800));const{data:{session:m}}=await q.auth.getSession();u=m}if(!u?.user)throw new Error("No se pudo establecer la sesión de usuario");console.log("[AuthCallback] Auth success for:",u.user.email);try{window.history.replaceState({},document.title,window.location.pathname)}catch{}if(re({title:"¡Bienvenido!",description:`Has iniciado sesión como ${u.user.email}`}),t){const m=await Yf(u.user.id);setTimeout(()=>{t(m==="admin"||m==="super_admin"?"dashboard":"products")},150)}}catch(u){console.error("[AuthCallback] error:",u);const m=u?.message||String(u);o(m),re({title:"Error de Autenticación",description:m,variant:"destructive"}),setTimeout(()=>{t&&t("login")},1800)}finally{l&&r(!1)}})(),()=>{l=!1}},[t]),e?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center p-6 bg-white rounded shadow",children:[n.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-spin mx-auto"}),n.jsx("p",{className:"mt-4",children:"Completando autenticación..."})]})}):i?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center p-6 bg-white rounded shadow",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Error de Autenticación"}),n.jsx("p",{className:"mt-2 text-red-600",children:i})]})}):null},qn=(t,e)=>i=>{const{user:o,loading:l,checkRole:c,userRole:u}=Dt();return l?n.jsx($w,{}):o?c(e)?n.jsx(t,{...i}):n.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:n.jsxs("div",{className:"glass-effect p-8 rounded-2xl text-center max-w-lg",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Acceso restringido"}),n.jsxs("p",{className:"text-gray-600",children:["No tienes permisos para ver esta página. Rol requerido: ",e,". Tu rol: ",u||"ninguno","."]})]})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:n.jsxs("div",{className:"glass-effect p-8 rounded-2xl text-center max-w-lg",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Autenticación requerida"}),n.jsx("p",{className:"text-gray-600",children:"Debes iniciar sesión para acceder a esta página."})]})})};function nD(){const{visualSettings:t}=ar();return w.useEffect(()=>{document.title=t.companyName||"PapuEnvíos"},[t.companyName]),n.jsxs(NC,{children:[n.jsxs("title",{children:[t.companyName||"PapuEnvíos"," - Plataforma de Comercio Digital"]}),n.jsx("meta",{name:"description",content:"Plataforma completa de comercio digital con vendedores independientes, remesas y gestión de ganancias"})]})}const iD=qn(rD,"admin"),aD=qn(DO,"admin"),oD=qn(IO,"admin"),lD=qn(XO,"admin"),cD=qn(tD,"user"),dD=qn(bO,"user"),uD=qn(_O,"user");function fD(){const[t,e]=w.useState(!0),[r,i]=w.useState("home"),[o,l]=w.useState({itemId:null,itemType:null});w.useEffect(()=>{const m=window.location.pathname,h=new URLSearchParams(window.location.search),p=new URLSearchParams(window.location.hash.substring(1));(m==="/auth/callback"||h.has("access_token")||p.has("access_token")||h.has("code"))&&i("auth/callback");const g=m.match(/^\/product\/([^/]+)$/),x=m.match(/^\/combo\/([^/]+)$/);g?(i("product-detail"),l({itemId:g[1],itemType:"product"})):x&&(i("product-detail"),l({itemId:x[1],itemType:"combo"}));const b=setTimeout(()=>{e(!1)},2500);return()=>clearTimeout(b)},[]);const c=(m,h={})=>{if(i(m),m==="product-detail"&&h.itemId&&h.itemType){l({itemId:h.itemId,itemType:h.itemType});const p=`/${h.itemType}/${h.itemId}`;window.history.pushState({},"",p)}else m==="home"&&window.location.pathname!=="/"?window.history.pushState({},"","/"):m!=="home"&&window.location.pathname==="/"&&window.history.pushState({},"",`/${m}`)},u=()=>{switch(r){case"home":return n.jsx(Xx,{onNavigate:c});case"products":return n.jsx(X4,{onNavigate:c});case"product-detail":return n.jsx(eO,{onNavigate:c,itemId:o.itemId,itemType:o.itemType});case"remittances":return n.jsx(tO,{onNavigate:c});case"send-remittance":return n.jsx(dD,{onNavigate:c});case"my-remittances":return n.jsx(uD,{onNavigate:c});case"dashboard":return n.jsx(aD,{onNavigate:c});case"admin":return n.jsx(oD,{onNavigate:c});case"settings":return n.jsx(lD,{onNavigate:c});case"cart":return n.jsx(ZO,{onNavigate:c});case"login":return n.jsx(eD,{onNavigate:c});case"user-panel":return n.jsx(cD,{onNavigate:c});case"user-management":return n.jsx(iD,{onNavigate:c});case"auth/callback":return n.jsx(sD,{onNavigate:c});default:return n.jsx(Xx,{onNavigate:c})}};return n.jsx(jA,{children:n.jsx(uv,{children:n.jsx(T4,{children:n.jsx(A4,{children:n.jsx(bA,{children:n.jsx(wO,{children:n.jsxs("div",{className:"min-h-screen",children:[n.jsx(nD,{}),n.jsx(Vr,{mode:"wait",children:t?n.jsx(wA,{},"loading"):n.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen",children:[r!=="auth/callback"&&n.jsx(G4,{currentPage:r,onNavigate:c}),n.jsx("main",{className:r!=="auth/callback"?"pt-20":"",children:n.jsx(Vr,{mode:"wait",children:n.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:u()},r)})})]},"main")}),n.jsx($P,{})]})})})})})})})}X_.createRoot(document.getElementById("root")).render(n.jsx(st.StrictMode,{children:n.jsx(fD,{})}));
