function aN(t,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function Hn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function oN(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),r}var ku={exports:{}},Ia={},Pu={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function lN(){if(Lg)return He;Lg=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=g&&P[g]||P["@@iterator"],typeof P=="function"?P:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,C={};function _(P,F,te){this.props=P,this.context=F,this.refs=C,this.updater=te||b}_.prototype.isReactComponent={},_.prototype.setState=function(P,F){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,F,"setState")},_.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function A(){}A.prototype=_.prototype;function k(P,F,te){this.props=P,this.context=F,this.refs=C,this.updater=te||b}var E=k.prototype=new A;E.constructor=k,j(E,_.prototype),E.isPureReactComponent=!0;var N=Array.isArray,R=Object.prototype.hasOwnProperty,T={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function I(P,F,te){var me,ye={},_e=null,xe=null;if(F!=null)for(me in F.ref!==void 0&&(xe=F.ref),F.key!==void 0&&(_e=""+F.key),F)R.call(F,me)&&!M.hasOwnProperty(me)&&(ye[me]=F[me]);var Ne=arguments.length-2;if(Ne===1)ye.children=te;else if(1<Ne){for(var De=Array(Ne),Fe=0;Fe<Ne;Fe++)De[Fe]=arguments[Fe+2];ye.children=De}if(P&&P.defaultProps)for(me in Ne=P.defaultProps,Ne)ye[me]===void 0&&(ye[me]=Ne[me]);return{$$typeof:t,type:P,key:_e,ref:xe,props:ye,_owner:T.current}}function Q(P,F){return{$$typeof:t,type:P.type,key:F,ref:P.ref,props:P.props,_owner:P._owner}}function H(P){return typeof P=="object"&&P!==null&&P.$$typeof===t}function be(P){var F={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(te){return F[te]})}var z=/\/+/g;function de(P,F){return typeof P=="object"&&P!==null&&P.key!=null?be(""+P.key):F.toString(36)}function ee(P,F,te,me,ye){var _e=typeof P;(_e==="undefined"||_e==="boolean")&&(P=null);var xe=!1;if(P===null)xe=!0;else switch(_e){case"string":case"number":xe=!0;break;case"object":switch(P.$$typeof){case t:case e:xe=!0}}if(xe)return xe=P,ye=ye(xe),P=me===""?"."+de(xe,0):me,N(ye)?(te="",P!=null&&(te=P.replace(z,"$&/")+"/"),ee(ye,F,te,"",function(Fe){return Fe})):ye!=null&&(H(ye)&&(ye=Q(ye,te+(!ye.key||xe&&xe.key===ye.key?"":(""+ye.key).replace(z,"$&/")+"/")+P)),F.push(ye)),1;if(xe=0,me=me===""?".":me+":",N(P))for(var Ne=0;Ne<P.length;Ne++){_e=P[Ne];var De=me+de(_e,Ne);xe+=ee(_e,F,te,De,ye)}else if(De=y(P),typeof De=="function")for(P=De.call(P),Ne=0;!(_e=P.next()).done;)_e=_e.value,De=me+de(_e,Ne++),xe+=ee(_e,F,te,De,ye);else if(_e==="object")throw F=String(P),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return xe}function ce(P,F,te){if(P==null)return P;var me=[],ye=0;return ee(P,me,"","",function(_e){return F.call(te,_e,ye++)}),me}function se(P){if(P._status===-1){var F=P._result;F=F(),F.then(function(te){(P._status===0||P._status===-1)&&(P._status=1,P._result=te)},function(te){(P._status===0||P._status===-1)&&(P._status=2,P._result=te)}),P._status===-1&&(P._status=0,P._result=F)}if(P._status===1)return P._result.default;throw P._result}var ue={current:null},$={transition:null},ne={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:$,ReactCurrentOwner:T};function ae(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:ce,forEach:function(P,F,te){ce(P,function(){F.apply(this,arguments)},te)},count:function(P){var F=0;return ce(P,function(){F++}),F},toArray:function(P){return ce(P,function(F){return F})||[]},only:function(P){if(!H(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},He.Component=_,He.Fragment=r,He.Profiler=o,He.PureComponent=k,He.StrictMode=i,He.Suspense=m,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,He.act=ae,He.cloneElement=function(P,F,te){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var me=j({},P.props),ye=P.key,_e=P.ref,xe=P._owner;if(F!=null){if(F.ref!==void 0&&(_e=F.ref,xe=T.current),F.key!==void 0&&(ye=""+F.key),P.type&&P.type.defaultProps)var Ne=P.type.defaultProps;for(De in F)R.call(F,De)&&!M.hasOwnProperty(De)&&(me[De]=F[De]===void 0&&Ne!==void 0?Ne[De]:F[De])}var De=arguments.length-2;if(De===1)me.children=te;else if(1<De){Ne=Array(De);for(var Fe=0;Fe<De;Fe++)Ne[Fe]=arguments[Fe+2];me.children=Ne}return{$$typeof:t,type:P.type,key:ye,ref:_e,props:me,_owner:xe}},He.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:l,_context:P},P.Consumer=P},He.createElement=I,He.createFactory=function(P){var F=I.bind(null,P);return F.type=P,F},He.createRef=function(){return{current:null}},He.forwardRef=function(P){return{$$typeof:u,render:P}},He.isValidElement=H,He.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:se}},He.memo=function(P,F){return{$$typeof:h,type:P,compare:F===void 0?null:F}},He.startTransition=function(P){var F=$.transition;$.transition={};try{P()}finally{$.transition=F}},He.unstable_act=ae,He.useCallback=function(P,F){return ue.current.useCallback(P,F)},He.useContext=function(P){return ue.current.useContext(P)},He.useDebugValue=function(){},He.useDeferredValue=function(P){return ue.current.useDeferredValue(P)},He.useEffect=function(P,F){return ue.current.useEffect(P,F)},He.useId=function(){return ue.current.useId()},He.useImperativeHandle=function(P,F,te){return ue.current.useImperativeHandle(P,F,te)},He.useInsertionEffect=function(P,F){return ue.current.useInsertionEffect(P,F)},He.useLayoutEffect=function(P,F){return ue.current.useLayoutEffect(P,F)},He.useMemo=function(P,F){return ue.current.useMemo(P,F)},He.useReducer=function(P,F,te){return ue.current.useReducer(P,F,te)},He.useRef=function(P){return ue.current.useRef(P)},He.useState=function(P){return ue.current.useState(P)},He.useSyncExternalStore=function(P,F,te){return ue.current.useSyncExternalStore(P,F,te)},He.useTransition=function(){return ue.current.useTransition()},He.version="18.3.1",He}var $g;function Nc(){return $g||($g=1,Pu.exports=lN()),Pu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function cN(){if(Fg)return Ia;Fg=1;var t=Nc(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,m,h){var p,g={},y=null,b=null;h!==void 0&&(y=""+h),m.key!==void 0&&(y=""+m.key),m.ref!==void 0&&(b=m.ref);for(p in m)i.call(m,p)&&!l.hasOwnProperty(p)&&(g[p]=m[p]);if(u&&u.defaultProps)for(p in m=u.defaultProps,m)g[p]===void 0&&(g[p]=m[p]);return{$$typeof:e,type:u,key:y,ref:b,props:g,_owner:o.current}}return Ia.Fragment=r,Ia.jsx=c,Ia.jsxs=c,Ia}var Ug;function dN(){return Ug||(Ug=1,ku.exports=cN()),ku.exports}var s=dN(),w=Nc();const nt=Hn(w),dv=aN({__proto__:null,default:nt},[w]);var Fl={},Tu={exports:{}},or={},Au={exports:{}},Ru={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function uN(){return Bg||(Bg=1,(function(t){function e($,ne){var ae=$.length;$.push(ne);e:for(;0<ae;){var P=ae-1>>>1,F=$[P];if(0<o(F,ne))$[P]=ne,$[ae]=F,ae=P;else break e}}function r($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ne=$[0],ae=$.pop();if(ae!==ne){$[0]=ae;e:for(var P=0,F=$.length,te=F>>>1;P<te;){var me=2*(P+1)-1,ye=$[me],_e=me+1,xe=$[_e];if(0>o(ye,ae))_e<F&&0>o(xe,ye)?($[P]=xe,$[_e]=ae,P=_e):($[P]=ye,$[me]=ae,P=me);else if(_e<F&&0>o(xe,ae))$[P]=xe,$[_e]=ae,P=_e;else break e}}return ne}function o($,ne){var ae=$.sortIndex-ne.sortIndex;return ae!==0?ae:$.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var m=[],h=[],p=1,g=null,y=3,b=!1,j=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var ne=r(h);ne!==null;){if(ne.callback===null)i(h);else if(ne.startTime<=$)i(h),ne.sortIndex=ne.expirationTime,e(m,ne);else break;ne=r(h)}}function N($){if(C=!1,E($),!j)if(r(m)!==null)j=!0,se(R);else{var ne=r(h);ne!==null&&ue(N,ne.startTime-$)}}function R($,ne){j=!1,C&&(C=!1,A(I),I=-1),b=!0;var ae=y;try{for(E(ne),g=r(m);g!==null&&(!(g.expirationTime>ne)||$&&!be());){var P=g.callback;if(typeof P=="function"){g.callback=null,y=g.priorityLevel;var F=P(g.expirationTime<=ne);ne=t.unstable_now(),typeof F=="function"?g.callback=F:g===r(m)&&i(m),E(ne)}else i(m);g=r(m)}if(g!==null)var te=!0;else{var me=r(h);me!==null&&ue(N,me.startTime-ne),te=!1}return te}finally{g=null,y=ae,b=!1}}var T=!1,M=null,I=-1,Q=5,H=-1;function be(){return!(t.unstable_now()-H<Q)}function z(){if(M!==null){var $=t.unstable_now();H=$;var ne=!0;try{ne=M(!0,$)}finally{ne?de():(T=!1,M=null)}}else T=!1}var de;if(typeof k=="function")de=function(){k(z)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ce=ee.port2;ee.port1.onmessage=z,de=function(){ce.postMessage(null)}}else de=function(){_(z,0)};function se($){M=$,T||(T=!0,de())}function ue($,ne){I=_(function(){$(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){j||b||(j=!0,se(R))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(m)},t.unstable_next=function($){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var ae=y;y=ne;try{return $()}finally{y=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,ne){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ae=y;y=$;try{return ne()}finally{y=ae}},t.unstable_scheduleCallback=function($,ne,ae){var P=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?P+ae:P):ae=P,$){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=ae+F,$={id:p++,callback:ne,priorityLevel:$,startTime:ae,expirationTime:F,sortIndex:-1},ae>P?($.sortIndex=ae,e(h,$),r(m)===null&&$===r(h)&&(C?(A(I),I=-1):C=!0,ue(N,ae-P))):($.sortIndex=F,e(m,$),j||b||(j=!0,se(R))),$},t.unstable_shouldYield=be,t.unstable_wrapCallback=function($){var ne=y;return function(){var ae=y;y=ne;try{return $.apply(this,arguments)}finally{y=ae}}}})(Ru)),Ru}var zg;function mN(){return zg||(zg=1,Au.exports=uN()),Au.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function fN(){if(Vg)return or;Vg=1;var t=Nc(),e=mN();function r(n){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+n,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,a){c(n,a),c(n+"Capture",a)}function c(n,a){for(o[n]=a,n=0;n<a.length;n++)i.add(a[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(n){return m.call(g,n)?!0:m.call(p,n)?!1:h.test(n)?g[n]=!0:(p[n]=!0,!1)}function b(n,a,d,f){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:d!==null?!d.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function j(n,a,d,f){if(a===null||typeof a>"u"||b(n,a,d,f))return!0;if(f)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function C(n,a,d,f,x,v,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=n,this.type=a,this.sanitizeURL=v,this.removeEmptyString=S}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var a=n[0];_[a]=new C(a,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){_[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){_[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){_[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){_[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){_[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function k(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var a=n.replace(A,k);_[a]=new C(a,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var a=n.replace(A,k);_[a]=new C(a,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var a=n.replace(A,k);_[a]=new C(a,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){_[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),_.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){_[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function E(n,a,d,f){var x=_.hasOwnProperty(a)?_[a]:null;(x!==null?x.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(j(a,d,x,f)&&(d=null),f||x===null?y(a)&&(d===null?n.removeAttribute(a):n.setAttribute(a,""+d)):x.mustUseProperty?n[x.propertyName]=d===null?x.type===3?!1:"":d:(a=x.attributeName,f=x.attributeNamespace,d===null?n.removeAttribute(a):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,f?n.setAttributeNS(f,a,d):n.setAttribute(a,d))))}var N=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),T=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),be=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),$=Symbol.iterator;function ne(n){return n===null||typeof n!="object"?null:(n=$&&n[$]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,P;function F(n){if(P===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);P=a&&a[1]||""}return`
`+P+n}var te=!1;function me(n,a){if(!n||te)return"";te=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(re){var f=re}Reflect.construct(n,[],a)}else{try{a.call()}catch(re){f=re}n.call(a.prototype)}else{try{throw Error()}catch(re){f=re}n()}}catch(re){if(re&&f&&typeof re.stack=="string"){for(var x=re.stack.split(`
`),v=f.stack.split(`
`),S=x.length-1,L=v.length-1;1<=S&&0<=L&&x[S]!==v[L];)L--;for(;1<=S&&0<=L;S--,L--)if(x[S]!==v[L]){if(S!==1||L!==1)do if(S--,L--,0>L||x[S]!==v[L]){var U=`
`+x[S].replace(" at new "," at ");return n.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",n.displayName)),U}while(1<=S&&0<=L);break}}}finally{te=!1,Error.prepareStackTrace=d}return(n=n?n.displayName||n.name:"")?F(n):""}function ye(n){switch(n.tag){case 5:return F(n.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return n=me(n.type,!1),n;case 11:return n=me(n.type.render,!1),n;case 1:return n=me(n.type,!0),n;default:return""}}function _e(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case T:return"Portal";case Q:return"Profiler";case I:return"StrictMode";case de:return"Suspense";case ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case be:return(n.displayName||"Context")+".Consumer";case H:return(n._context.displayName||"Context")+".Provider";case z:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ce:return a=n.displayName||null,a!==null?a:_e(n.type)||"Memo";case se:a=n._payload,n=n._init;try{return _e(n(a))}catch{}}return null}function xe(n){var a=n.type;switch(n.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=a.render,n=n.displayName||n.name||"",a.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(a);case 8:return a===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ne(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function De(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Fe(n){var a=De(n)?"checked":"value",d=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),f=""+n[a];if(!n.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,v=d.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return x.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(n,a,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function ie(n){n._valueTracker||(n._valueTracker=Fe(n))}function je(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var d=a.getValue(),f="";return n&&(f=De(n)?n.checked?"true":"false":n.value),n=f,n!==d?(a.setValue(n),!0):!1}function W(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function O(n,a){var d=a.checked;return ae({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??n._wrapperState.initialChecked})}function he(n,a){var d=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;d=Ne(a.value!=null?a.value:d),n._wrapperState={initialChecked:f,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function B(n,a){a=a.checked,a!=null&&E(n,"checked",a,!1)}function G(n,a){B(n,a);var d=Ne(a.value),f=a.type;if(d!=null)f==="number"?(d===0&&n.value===""||n.value!=d)&&(n.value=""+d):n.value!==""+d&&(n.value=""+d);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}a.hasOwnProperty("value")?Pe(n,a.type,d):a.hasOwnProperty("defaultValue")&&Pe(n,a.type,Ne(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(n.defaultChecked=!!a.defaultChecked)}function le(n,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+n._wrapperState.initialValue,d||a===n.value||(n.value=a),n.defaultValue=a}d=n.name,d!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,d!==""&&(n.name=d)}function Pe(n,a,d){(a!=="number"||W(n.ownerDocument)!==n)&&(d==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+d&&(n.defaultValue=""+d))}var Ke=Array.isArray;function ze(n,a,d,f){if(n=n.options,a){a={};for(var x=0;x<d.length;x++)a["$"+d[x]]=!0;for(d=0;d<n.length;d++)x=a.hasOwnProperty("$"+n[d].value),n[d].selected!==x&&(n[d].selected=x),x&&f&&(n[d].defaultSelected=!0)}else{for(d=""+Ne(d),a=null,x=0;x<n.length;x++){if(n[x].value===d){n[x].selected=!0,f&&(n[x].defaultSelected=!0);return}a!==null||n[x].disabled||(a=n[x])}a!==null&&(a.selected=!0)}}function Ie(n,a){if(a.dangerouslySetInnerHTML!=null)throw Error(r(91));return ae({},a,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function rt(n,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(r(92));if(Ke(d)){if(1<d.length)throw Error(r(93));d=d[0]}a=d}a==null&&(a=""),d=a}n._wrapperState={initialValue:Ne(d)}}function J(n,a){var d=Ne(a.value),f=Ne(a.defaultValue);d!=null&&(d=""+d,d!==n.value&&(n.value=d),a.defaultValue==null&&n.defaultValue!==d&&(n.defaultValue=d)),f!=null&&(n.defaultValue=""+f)}function Me(n){var a=n.textContent;a===n._wrapperState.initialValue&&a!==""&&a!==null&&(n.value=a)}function et(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function er(n,a){return n==null||n==="http://www.w3.org/1999/xhtml"?et(a):n==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var br,dr=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,f,x){MSApp.execUnsafeLocalFunction(function(){return n(a,d,f,x)})}:n})(function(n,a){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=a;else{for(br=br||document.createElement("div"),br.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=br.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;a.firstChild;)n.appendChild(a.firstChild)}});function tr(n,a){if(a){var d=n.firstChild;if(d&&d===n.lastChild&&d.nodeType===3){d.nodeValue=a;return}}n.textContent=a}var tt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ur=["Webkit","ms","Moz","O"];Object.keys(tt).forEach(function(n){ur.forEach(function(a){a=a+n.charAt(0).toUpperCase()+n.substring(1),tt[a]=tt[n]})});function Ps(n,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||tt.hasOwnProperty(n)&&tt[n]?(""+a).trim():a+"px"}function Ts(n,a){n=n.style;for(var d in a)if(a.hasOwnProperty(d)){var f=d.indexOf("--")===0,x=Ps(d,a[d],f);d==="float"&&(d="cssFloat"),f?n.setProperty(d,x):n[d]=x}}var Wc=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ji(n,a){if(a){if(Wc[n]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(r(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(r(61))}if(a.style!=null&&typeof a.style!="object")throw Error(r(62))}}function Xi(n,a){if(n.indexOf("-")===-1)return typeof a.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ea=null;function gn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ta=null,wr=null,Mr=null;function ko(n){if(n=wa(n)){if(typeof ta!="function")throw Error(r(280));var a=n.stateNode;a&&(a=el(a),ta(n.stateNode,n.type,a))}}function Po(n){wr?Mr?Mr.push(n):Mr=[n]:wr=n}function To(){if(wr){var n=wr,a=Mr;if(Mr=wr=null,ko(n),a)for(n=0;n<a.length;n++)ko(a[n])}}function Ao(n,a){return n(a)}function D(){}var X=!1;function Ee(n,a,d){if(X)return n(a,d);X=!0;try{return Ao(n,a,d)}finally{X=!1,(wr!==null||Mr!==null)&&(D(),To())}}function We(n,a){var d=n.stateNode;if(d===null)return null;var f=el(d);if(f===null)return null;d=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(d&&typeof d!="function")throw Error(r(231,a,typeof d));return d}var it=!1;if(u)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){it=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{it=!1}function Hc(n,a,d,f,x,v,S,L,U){var re=Array.prototype.slice.call(arguments,3);try{a.apply(d,re)}catch(pe){this.onError(pe)}}var ra=!1,Ro=null,Oo=!1,Gc=null,fj={onError:function(n){ra=!0,Ro=n}};function hj(n,a,d,f,x,v,S,L,U){ra=!1,Ro=null,Hc.apply(fj,arguments)}function pj(n,a,d,f,x,v,S,L,U){if(hj.apply(this,arguments),ra){if(ra){var re=Ro;ra=!1,Ro=null}else throw Error(r(198));Oo||(Oo=!0,Gc=re)}}function yn(n){var a=n,d=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(d=a.return),n=a.return;while(n)}return a.tag===3?d:null}function ah(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function oh(n){if(yn(n)!==n)throw Error(r(188))}function gj(n){var a=n.alternate;if(!a){if(a=yn(n),a===null)throw Error(r(188));return a!==n?null:n}for(var d=n,f=a;;){var x=d.return;if(x===null)break;var v=x.alternate;if(v===null){if(f=x.return,f!==null){d=f;continue}break}if(x.child===v.child){for(v=x.child;v;){if(v===d)return oh(x),n;if(v===f)return oh(x),a;v=v.sibling}throw Error(r(188))}if(d.return!==f.return)d=x,f=v;else{for(var S=!1,L=x.child;L;){if(L===d){S=!0,d=x,f=v;break}if(L===f){S=!0,f=x,d=v;break}L=L.sibling}if(!S){for(L=v.child;L;){if(L===d){S=!0,d=v,f=x;break}if(L===f){S=!0,f=v,d=x;break}L=L.sibling}if(!S)throw Error(r(189))}}if(d.alternate!==f)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?n:a}function lh(n){return n=gj(n),n!==null?ch(n):null}function ch(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var a=ch(n);if(a!==null)return a;n=n.sibling}return null}var dh=e.unstable_scheduleCallback,uh=e.unstable_cancelCallback,yj=e.unstable_shouldYield,xj=e.unstable_requestPaint,bt=e.unstable_now,vj=e.unstable_getCurrentPriorityLevel,Kc=e.unstable_ImmediatePriority,mh=e.unstable_UserBlockingPriority,Do=e.unstable_NormalPriority,bj=e.unstable_LowPriority,fh=e.unstable_IdlePriority,Mo=null,Zr=null;function wj(n){if(Zr&&typeof Zr.onCommitFiberRoot=="function")try{Zr.onCommitFiberRoot(Mo,n,void 0,(n.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:Nj,jj=Math.log,_j=Math.LN2;function Nj(n){return n>>>=0,n===0?32:31-(jj(n)/_j|0)|0}var Io=64,Lo=4194304;function sa(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function $o(n,a){var d=n.pendingLanes;if(d===0)return 0;var f=0,x=n.suspendedLanes,v=n.pingedLanes,S=d&268435455;if(S!==0){var L=S&~x;L!==0?f=sa(L):(v&=S,v!==0&&(f=sa(v)))}else S=d&~x,S!==0?f=sa(S):v!==0&&(f=sa(v));if(f===0)return 0;if(a!==0&&a!==f&&(a&x)===0&&(x=f&-f,v=a&-a,x>=v||x===16&&(v&4194240)!==0))return a;if((f&4)!==0&&(f|=d&16),a=n.entangledLanes,a!==0)for(n=n.entanglements,a&=f;0<a;)d=31-Ir(a),x=1<<d,f|=n[d],a&=~x;return f}function Cj(n,a){switch(n){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sj(n,a){for(var d=n.suspendedLanes,f=n.pingedLanes,x=n.expirationTimes,v=n.pendingLanes;0<v;){var S=31-Ir(v),L=1<<S,U=x[S];U===-1?((L&d)===0||(L&f)!==0)&&(x[S]=Cj(L,a)):U<=a&&(n.expiredLanes|=L),v&=~L}}function Yc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function hh(){var n=Io;return Io<<=1,(Io&4194240)===0&&(Io=64),n}function Qc(n){for(var a=[],d=0;31>d;d++)a.push(n);return a}function na(n,a,d){n.pendingLanes|=a,a!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,a=31-Ir(a),n[a]=d}function Ej(n,a){var d=n.pendingLanes&~a;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=a,n.mutableReadLanes&=a,n.entangledLanes&=a,a=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<d;){var x=31-Ir(d),v=1<<x;a[x]=0,f[x]=-1,n[x]=-1,d&=~v}}function Zc(n,a){var d=n.entangledLanes|=a;for(n=n.entanglements;d;){var f=31-Ir(d),x=1<<f;x&a|n[f]&a&&(n[f]|=a),d&=~x}}var st=0;function ph(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var gh,Jc,yh,xh,vh,Xc=!1,Fo=[],As=null,Rs=null,Os=null,ia=new Map,aa=new Map,Ds=[],kj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bh(n,a){switch(n){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":ia.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(a.pointerId)}}function oa(n,a,d,f,x,v){return n===null||n.nativeEvent!==v?(n={blockedOn:a,domEventName:d,eventSystemFlags:f,nativeEvent:v,targetContainers:[x]},a!==null&&(a=wa(a),a!==null&&Jc(a)),n):(n.eventSystemFlags|=f,a=n.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),n)}function Pj(n,a,d,f,x){switch(a){case"focusin":return As=oa(As,n,a,d,f,x),!0;case"dragenter":return Rs=oa(Rs,n,a,d,f,x),!0;case"mouseover":return Os=oa(Os,n,a,d,f,x),!0;case"pointerover":var v=x.pointerId;return ia.set(v,oa(ia.get(v)||null,n,a,d,f,x)),!0;case"gotpointercapture":return v=x.pointerId,aa.set(v,oa(aa.get(v)||null,n,a,d,f,x)),!0}return!1}function wh(n){var a=xn(n.target);if(a!==null){var d=yn(a);if(d!==null){if(a=d.tag,a===13){if(a=ah(d),a!==null){n.blockedOn=a,vh(n.priority,function(){yh(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){n.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Uo(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var d=td(n.domEventName,n.eventSystemFlags,a[0],n.nativeEvent);if(d===null){d=n.nativeEvent;var f=new d.constructor(d.type,d);ea=f,d.target.dispatchEvent(f),ea=null}else return a=wa(d),a!==null&&Jc(a),n.blockedOn=d,!1;a.shift()}return!0}function jh(n,a,d){Uo(n)&&d.delete(a)}function Tj(){Xc=!1,As!==null&&Uo(As)&&(As=null),Rs!==null&&Uo(Rs)&&(Rs=null),Os!==null&&Uo(Os)&&(Os=null),ia.forEach(jh),aa.forEach(jh)}function la(n,a){n.blockedOn===a&&(n.blockedOn=null,Xc||(Xc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Tj)))}function ca(n){function a(x){return la(x,n)}if(0<Fo.length){la(Fo[0],n);for(var d=1;d<Fo.length;d++){var f=Fo[d];f.blockedOn===n&&(f.blockedOn=null)}}for(As!==null&&la(As,n),Rs!==null&&la(Rs,n),Os!==null&&la(Os,n),ia.forEach(a),aa.forEach(a),d=0;d<Ds.length;d++)f=Ds[d],f.blockedOn===n&&(f.blockedOn=null);for(;0<Ds.length&&(d=Ds[0],d.blockedOn===null);)wh(d),d.blockedOn===null&&Ds.shift()}var Jn=N.ReactCurrentBatchConfig,Bo=!0;function Aj(n,a,d,f){var x=st,v=Jn.transition;Jn.transition=null;try{st=1,ed(n,a,d,f)}finally{st=x,Jn.transition=v}}function Rj(n,a,d,f){var x=st,v=Jn.transition;Jn.transition=null;try{st=4,ed(n,a,d,f)}finally{st=x,Jn.transition=v}}function ed(n,a,d,f){if(Bo){var x=td(n,a,d,f);if(x===null)xd(n,a,f,zo,d),bh(n,f);else if(Pj(x,n,a,d,f))f.stopPropagation();else if(bh(n,f),a&4&&-1<kj.indexOf(n)){for(;x!==null;){var v=wa(x);if(v!==null&&gh(v),v=td(n,a,d,f),v===null&&xd(n,a,f,zo,d),v===x)break;x=v}x!==null&&f.stopPropagation()}else xd(n,a,f,null,d)}}var zo=null;function td(n,a,d,f){if(zo=null,n=gn(f),n=xn(n),n!==null)if(a=yn(n),a===null)n=null;else if(d=a.tag,d===13){if(n=ah(a),n!==null)return n;n=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null);return zo=n,null}function _h(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vj()){case Kc:return 1;case mh:return 4;case Do:case bj:return 16;case fh:return 536870912;default:return 16}default:return 16}}var Ms=null,rd=null,Vo=null;function Nh(){if(Vo)return Vo;var n,a=rd,d=a.length,f,x="value"in Ms?Ms.value:Ms.textContent,v=x.length;for(n=0;n<d&&a[n]===x[n];n++);var S=d-n;for(f=1;f<=S&&a[d-f]===x[v-f];f++);return Vo=x.slice(n,1<f?1-f:void 0)}function qo(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Wo(){return!0}function Ch(){return!1}function mr(n){function a(d,f,x,v,S){this._reactName=d,this._targetInst=x,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var L in n)n.hasOwnProperty(L)&&(d=n[L],this[L]=d?d(v):v[L]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Wo:Ch,this.isPropagationStopped=Ch,this}return ae(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),a}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sd=mr(Xn),da=ae({},Xn,{view:0,detail:0}),Oj=mr(da),nd,id,ua,Ho=ae({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:od,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ua&&(ua&&n.type==="mousemove"?(nd=n.screenX-ua.screenX,id=n.screenY-ua.screenY):id=nd=0,ua=n),nd)},movementY:function(n){return"movementY"in n?n.movementY:id}}),Sh=mr(Ho),Dj=ae({},Ho,{dataTransfer:0}),Mj=mr(Dj),Ij=ae({},da,{relatedTarget:0}),ad=mr(Ij),Lj=ae({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),$j=mr(Lj),Fj=ae({},Xn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Uj=mr(Fj),Bj=ae({},Xn,{data:0}),Eh=mr(Bj),zj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wj(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=qj[n])?!!a[n]:!1}function od(){return Wj}var Hj=ae({},da,{key:function(n){if(n.key){var a=zj[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=qo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Vj[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:od,charCode:function(n){return n.type==="keypress"?qo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Gj=mr(Hj),Kj=ae({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kh=mr(Kj),Yj=ae({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:od}),Qj=mr(Yj),Zj=ae({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jj=mr(Zj),Xj=ae({},Ho,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),e_=mr(Xj),t_=[9,13,27,32],ld=u&&"CompositionEvent"in window,ma=null;u&&"documentMode"in document&&(ma=document.documentMode);var r_=u&&"TextEvent"in window&&!ma,Ph=u&&(!ld||ma&&8<ma&&11>=ma),Th=" ",Ah=!1;function Rh(n,a){switch(n){case"keyup":return t_.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ei=!1;function s_(n,a){switch(n){case"compositionend":return Oh(a);case"keypress":return a.which!==32?null:(Ah=!0,Th);case"textInput":return n=a.data,n===Th&&Ah?null:n;default:return null}}function n_(n,a){if(ei)return n==="compositionend"||!ld&&Rh(n,a)?(n=Nh(),Vo=rd=Ms=null,ei=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ph&&a.locale!=="ko"?null:a.data;default:return null}}var i_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dh(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!i_[n.type]:a==="textarea"}function Mh(n,a,d,f){Po(f),a=Zo(a,"onChange"),0<a.length&&(d=new sd("onChange","change",null,d,f),n.push({event:d,listeners:a}))}var fa=null,ha=null;function a_(n){Xh(n,0)}function Go(n){var a=ii(n);if(je(a))return n}function o_(n,a){if(n==="change")return a}var Ih=!1;if(u){var cd;if(u){var dd="oninput"in document;if(!dd){var Lh=document.createElement("div");Lh.setAttribute("oninput","return;"),dd=typeof Lh.oninput=="function"}cd=dd}else cd=!1;Ih=cd&&(!document.documentMode||9<document.documentMode)}function $h(){fa&&(fa.detachEvent("onpropertychange",Fh),ha=fa=null)}function Fh(n){if(n.propertyName==="value"&&Go(ha)){var a=[];Mh(a,ha,n,gn(n)),Ee(a_,a)}}function l_(n,a,d){n==="focusin"?($h(),fa=a,ha=d,fa.attachEvent("onpropertychange",Fh)):n==="focusout"&&$h()}function c_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Go(ha)}function d_(n,a){if(n==="click")return Go(a)}function u_(n,a){if(n==="input"||n==="change")return Go(a)}function m_(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var Lr=typeof Object.is=="function"?Object.is:m_;function pa(n,a){if(Lr(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var d=Object.keys(n),f=Object.keys(a);if(d.length!==f.length)return!1;for(f=0;f<d.length;f++){var x=d[f];if(!m.call(a,x)||!Lr(n[x],a[x]))return!1}return!0}function Uh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bh(n,a){var d=Uh(n);n=0;for(var f;d;){if(d.nodeType===3){if(f=n+d.textContent.length,n<=a&&f>=a)return{node:d,offset:a-n};n=f}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Uh(d)}}function zh(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?zh(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Vh(){for(var n=window,a=W();a instanceof n.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)n=a.contentWindow;else break;a=W(n.document)}return a}function ud(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}function f_(n){var a=Vh(),d=n.focusedElem,f=n.selectionRange;if(a!==d&&d&&d.ownerDocument&&zh(d.ownerDocument.documentElement,d)){if(f!==null&&ud(d)){if(a=f.start,n=f.end,n===void 0&&(n=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(n,d.value.length);else if(n=(a=d.ownerDocument||document)&&a.defaultView||window,n.getSelection){n=n.getSelection();var x=d.textContent.length,v=Math.min(f.start,x);f=f.end===void 0?v:Math.min(f.end,x),!n.extend&&v>f&&(x=f,f=v,v=x),x=Bh(d,v);var S=Bh(d,f);x&&S&&(n.rangeCount!==1||n.anchorNode!==x.node||n.anchorOffset!==x.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),n.removeAllRanges(),v>f?(n.addRange(a),n.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),n.addRange(a)))}}for(a=[],n=d;n=n.parentNode;)n.nodeType===1&&a.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)n=a[d],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var h_=u&&"documentMode"in document&&11>=document.documentMode,ti=null,md=null,ga=null,fd=!1;function qh(n,a,d){var f=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;fd||ti==null||ti!==W(f)||(f=ti,"selectionStart"in f&&ud(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ga&&pa(ga,f)||(ga=f,f=Zo(md,"onSelect"),0<f.length&&(a=new sd("onSelect","select",null,a,d),n.push({event:a,listeners:f}),a.target=ti)))}function Ko(n,a){var d={};return d[n.toLowerCase()]=a.toLowerCase(),d["Webkit"+n]="webkit"+a,d["Moz"+n]="moz"+a,d}var ri={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},hd={},Wh={};u&&(Wh=document.createElement("div").style,"AnimationEvent"in window||(delete ri.animationend.animation,delete ri.animationiteration.animation,delete ri.animationstart.animation),"TransitionEvent"in window||delete ri.transitionend.transition);function Yo(n){if(hd[n])return hd[n];if(!ri[n])return n;var a=ri[n],d;for(d in a)if(a.hasOwnProperty(d)&&d in Wh)return hd[n]=a[d];return n}var Hh=Yo("animationend"),Gh=Yo("animationiteration"),Kh=Yo("animationstart"),Yh=Yo("transitionend"),Qh=new Map,Zh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(n,a){Qh.set(n,a),l(a,[n])}for(var pd=0;pd<Zh.length;pd++){var gd=Zh[pd],p_=gd.toLowerCase(),g_=gd[0].toUpperCase()+gd.slice(1);Is(p_,"on"+g_)}Is(Hh,"onAnimationEnd"),Is(Gh,"onAnimationIteration"),Is(Kh,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(Yh,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function Jh(n,a,d){var f=n.type||"unknown-event";n.currentTarget=d,pj(f,a,void 0,n),n.currentTarget=null}function Xh(n,a){a=(a&4)!==0;for(var d=0;d<n.length;d++){var f=n[d],x=f.event;f=f.listeners;e:{var v=void 0;if(a)for(var S=f.length-1;0<=S;S--){var L=f[S],U=L.instance,re=L.currentTarget;if(L=L.listener,U!==v&&x.isPropagationStopped())break e;Jh(x,L,re),v=U}else for(S=0;S<f.length;S++){if(L=f[S],U=L.instance,re=L.currentTarget,L=L.listener,U!==v&&x.isPropagationStopped())break e;Jh(x,L,re),v=U}}}if(Oo)throw n=Gc,Oo=!1,Gc=null,n}function dt(n,a){var d=a[Nd];d===void 0&&(d=a[Nd]=new Set);var f=n+"__bubble";d.has(f)||(ep(a,n,2,!1),d.add(f))}function yd(n,a,d){var f=0;a&&(f|=4),ep(d,n,f,a)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function xa(n){if(!n[Qo]){n[Qo]=!0,i.forEach(function(d){d!=="selectionchange"&&(y_.has(d)||yd(d,!1,n),yd(d,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Qo]||(a[Qo]=!0,yd("selectionchange",!1,a))}}function ep(n,a,d,f){switch(_h(a)){case 1:var x=Aj;break;case 4:x=Rj;break;default:x=ed}d=x.bind(null,a,d,n),x=void 0,!it||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),f?x!==void 0?n.addEventListener(a,d,{capture:!0,passive:x}):n.addEventListener(a,d,!0):x!==void 0?n.addEventListener(a,d,{passive:x}):n.addEventListener(a,d,!1)}function xd(n,a,d,f,x){var v=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var L=f.stateNode.containerInfo;if(L===x||L.nodeType===8&&L.parentNode===x)break;if(S===4)for(S=f.return;S!==null;){var U=S.tag;if((U===3||U===4)&&(U=S.stateNode.containerInfo,U===x||U.nodeType===8&&U.parentNode===x))return;S=S.return}for(;L!==null;){if(S=xn(L),S===null)return;if(U=S.tag,U===5||U===6){f=v=S;continue e}L=L.parentNode}}f=f.return}Ee(function(){var re=v,pe=gn(d),ge=[];e:{var fe=Qh.get(n);if(fe!==void 0){var ke=sd,Ae=n;switch(n){case"keypress":if(qo(d)===0)break e;case"keydown":case"keyup":ke=Gj;break;case"focusin":Ae="focus",ke=ad;break;case"focusout":Ae="blur",ke=ad;break;case"beforeblur":case"afterblur":ke=ad;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ke=Sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ke=Mj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ke=Qj;break;case Hh:case Gh:case Kh:ke=$j;break;case Yh:ke=Jj;break;case"scroll":ke=Oj;break;case"wheel":ke=e_;break;case"copy":case"cut":case"paste":ke=Uj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ke=kh}var Re=(a&4)!==0,wt=!Re&&n==="scroll",K=Re?fe!==null?fe+"Capture":null:fe;Re=[];for(var q=re,Z;q!==null;){Z=q;var ve=Z.stateNode;if(Z.tag===5&&ve!==null&&(Z=ve,K!==null&&(ve=We(q,K),ve!=null&&Re.push(va(q,ve,Z)))),wt)break;q=q.return}0<Re.length&&(fe=new ke(fe,Ae,null,d,pe),ge.push({event:fe,listeners:Re}))}}if((a&7)===0){e:{if(fe=n==="mouseover"||n==="pointerover",ke=n==="mouseout"||n==="pointerout",fe&&d!==ea&&(Ae=d.relatedTarget||d.fromElement)&&(xn(Ae)||Ae[ms]))break e;if((ke||fe)&&(fe=pe.window===pe?pe:(fe=pe.ownerDocument)?fe.defaultView||fe.parentWindow:window,ke?(Ae=d.relatedTarget||d.toElement,ke=re,Ae=Ae?xn(Ae):null,Ae!==null&&(wt=yn(Ae),Ae!==wt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(ke=null,Ae=re),ke!==Ae)){if(Re=Sh,ve="onMouseLeave",K="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(Re=kh,ve="onPointerLeave",K="onPointerEnter",q="pointer"),wt=ke==null?fe:ii(ke),Z=Ae==null?fe:ii(Ae),fe=new Re(ve,q+"leave",ke,d,pe),fe.target=wt,fe.relatedTarget=Z,ve=null,xn(pe)===re&&(Re=new Re(K,q+"enter",Ae,d,pe),Re.target=Z,Re.relatedTarget=wt,ve=Re),wt=ve,ke&&Ae)t:{for(Re=ke,K=Ae,q=0,Z=Re;Z;Z=si(Z))q++;for(Z=0,ve=K;ve;ve=si(ve))Z++;for(;0<q-Z;)Re=si(Re),q--;for(;0<Z-q;)K=si(K),Z--;for(;q--;){if(Re===K||K!==null&&Re===K.alternate)break t;Re=si(Re),K=si(K)}Re=null}else Re=null;ke!==null&&tp(ge,fe,ke,Re,!1),Ae!==null&&wt!==null&&tp(ge,wt,Ae,Re,!0)}}e:{if(fe=re?ii(re):window,ke=fe.nodeName&&fe.nodeName.toLowerCase(),ke==="select"||ke==="input"&&fe.type==="file")var Oe=o_;else if(Dh(fe))if(Ih)Oe=u_;else{Oe=c_;var Le=l_}else(ke=fe.nodeName)&&ke.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Oe=d_);if(Oe&&(Oe=Oe(n,re))){Mh(ge,Oe,d,pe);break e}Le&&Le(n,fe,re),n==="focusout"&&(Le=fe._wrapperState)&&Le.controlled&&fe.type==="number"&&Pe(fe,"number",fe.value)}switch(Le=re?ii(re):window,n){case"focusin":(Dh(Le)||Le.contentEditable==="true")&&(ti=Le,md=re,ga=null);break;case"focusout":ga=md=ti=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,qh(ge,d,pe);break;case"selectionchange":if(h_)break;case"keydown":case"keyup":qh(ge,d,pe)}var $e;if(ld)e:{switch(n){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else ei?Rh(n,d)&&(Ve="onCompositionEnd"):n==="keydown"&&d.keyCode===229&&(Ve="onCompositionStart");Ve&&(Ph&&d.locale!=="ko"&&(ei||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&ei&&($e=Nh()):(Ms=pe,rd="value"in Ms?Ms.value:Ms.textContent,ei=!0)),Le=Zo(re,Ve),0<Le.length&&(Ve=new Eh(Ve,n,null,d,pe),ge.push({event:Ve,listeners:Le}),$e?Ve.data=$e:($e=Oh(d),$e!==null&&(Ve.data=$e)))),($e=r_?s_(n,d):n_(n,d))&&(re=Zo(re,"onBeforeInput"),0<re.length&&(pe=new Eh("onBeforeInput","beforeinput",null,d,pe),ge.push({event:pe,listeners:re}),pe.data=$e))}Xh(ge,a)})}function va(n,a,d){return{instance:n,listener:a,currentTarget:d}}function Zo(n,a){for(var d=a+"Capture",f=[];n!==null;){var x=n,v=x.stateNode;x.tag===5&&v!==null&&(x=v,v=We(n,d),v!=null&&f.unshift(va(n,v,x)),v=We(n,a),v!=null&&f.push(va(n,v,x))),n=n.return}return f}function si(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function tp(n,a,d,f,x){for(var v=a._reactName,S=[];d!==null&&d!==f;){var L=d,U=L.alternate,re=L.stateNode;if(U!==null&&U===f)break;L.tag===5&&re!==null&&(L=re,x?(U=We(d,v),U!=null&&S.unshift(va(d,U,L))):x||(U=We(d,v),U!=null&&S.push(va(d,U,L)))),d=d.return}S.length!==0&&n.push({event:a,listeners:S})}var x_=/\r\n?/g,v_=/\u0000|\uFFFD/g;function rp(n){return(typeof n=="string"?n:""+n).replace(x_,`
`).replace(v_,"")}function Jo(n,a,d){if(a=rp(a),rp(n)!==a&&d)throw Error(r(425))}function Xo(){}var vd=null,bd=null;function wd(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jd=typeof setTimeout=="function"?setTimeout:void 0,b_=typeof clearTimeout=="function"?clearTimeout:void 0,sp=typeof Promise=="function"?Promise:void 0,w_=typeof queueMicrotask=="function"?queueMicrotask:typeof sp<"u"?function(n){return sp.resolve(null).then(n).catch(j_)}:jd;function j_(n){setTimeout(function(){throw n})}function _d(n,a){var d=a,f=0;do{var x=d.nextSibling;if(n.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(f===0){n.removeChild(x),ca(a);return}f--}else d!=="$"&&d!=="$?"&&d!=="$!"||f++;d=x}while(d);ca(a)}function Ls(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return n}function np(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var d=n.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return n;a--}else d==="/$"&&a++}n=n.previousSibling}return null}var ni=Math.random().toString(36).slice(2),Jr="__reactFiber$"+ni,ba="__reactProps$"+ni,ms="__reactContainer$"+ni,Nd="__reactEvents$"+ni,__="__reactListeners$"+ni,N_="__reactHandles$"+ni;function xn(n){var a=n[Jr];if(a)return a;for(var d=n.parentNode;d;){if(a=d[ms]||d[Jr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(n=np(n);n!==null;){if(d=n[Jr])return d;n=np(n)}return a}n=d,d=n.parentNode}return null}function wa(n){return n=n[Jr]||n[ms],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ii(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function el(n){return n[ba]||null}var Cd=[],ai=-1;function $s(n){return{current:n}}function ut(n){0>ai||(n.current=Cd[ai],Cd[ai]=null,ai--)}function at(n,a){ai++,Cd[ai]=n.current,n.current=a}var Fs={},Ft=$s(Fs),rr=$s(!1),vn=Fs;function oi(n,a){var d=n.type.contextTypes;if(!d)return Fs;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var x={},v;for(v in d)x[v]=a[v];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=a,n.__reactInternalMemoizedMaskedChildContext=x),x}function sr(n){return n=n.childContextTypes,n!=null}function tl(){ut(rr),ut(Ft)}function ip(n,a,d){if(Ft.current!==Fs)throw Error(r(168));at(Ft,a),at(rr,d)}function ap(n,a,d){var f=n.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return d;f=f.getChildContext();for(var x in f)if(!(x in a))throw Error(r(108,xe(n)||"Unknown",x));return ae({},d,f)}function rl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Fs,vn=Ft.current,at(Ft,n),at(rr,rr.current),!0}function op(n,a,d){var f=n.stateNode;if(!f)throw Error(r(169));d?(n=ap(n,a,vn),f.__reactInternalMemoizedMergedChildContext=n,ut(rr),ut(Ft),at(Ft,n)):ut(rr),at(rr,d)}var fs=null,sl=!1,Sd=!1;function lp(n){fs===null?fs=[n]:fs.push(n)}function C_(n){sl=!0,lp(n)}function Us(){if(!Sd&&fs!==null){Sd=!0;var n=0,a=st;try{var d=fs;for(st=1;n<d.length;n++){var f=d[n];do f=f(!0);while(f!==null)}fs=null,sl=!1}catch(x){throw fs!==null&&(fs=fs.slice(n+1)),dh(Kc,Us),x}finally{st=a,Sd=!1}}return null}var li=[],ci=0,nl=null,il=0,jr=[],_r=0,bn=null,hs=1,ps="";function wn(n,a){li[ci++]=il,li[ci++]=nl,nl=n,il=a}function cp(n,a,d){jr[_r++]=hs,jr[_r++]=ps,jr[_r++]=bn,bn=n;var f=hs;n=ps;var x=32-Ir(f)-1;f&=~(1<<x),d+=1;var v=32-Ir(a)+x;if(30<v){var S=x-x%5;v=(f&(1<<S)-1).toString(32),f>>=S,x-=S,hs=1<<32-Ir(a)+x|d<<x|f,ps=v+n}else hs=1<<v|d<<x|f,ps=n}function Ed(n){n.return!==null&&(wn(n,1),cp(n,1,0))}function kd(n){for(;n===nl;)nl=li[--ci],li[ci]=null,il=li[--ci],li[ci]=null;for(;n===bn;)bn=jr[--_r],jr[_r]=null,ps=jr[--_r],jr[_r]=null,hs=jr[--_r],jr[_r]=null}var fr=null,hr=null,pt=!1,$r=null;function dp(n,a){var d=Er(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=n,a=n.deletions,a===null?(n.deletions=[d],n.flags|=16):a.push(d)}function up(n,a){switch(n.tag){case 5:var d=n.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(n.stateNode=a,fr=n,hr=Ls(a.firstChild),!0):!1;case 6:return a=n.pendingProps===""||a.nodeType!==3?null:a,a!==null?(n.stateNode=a,fr=n,hr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=bn!==null?{id:hs,overflow:ps}:null,n.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=Er(18,null,null,0),d.stateNode=a,d.return=n,n.child=d,fr=n,hr=null,!0):!1;default:return!1}}function Pd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Td(n){if(pt){var a=hr;if(a){var d=a;if(!up(n,a)){if(Pd(n))throw Error(r(418));a=Ls(d.nextSibling);var f=fr;a&&up(n,a)?dp(f,d):(n.flags=n.flags&-4097|2,pt=!1,fr=n)}}else{if(Pd(n))throw Error(r(418));n.flags=n.flags&-4097|2,pt=!1,fr=n}}}function mp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fr=n}function al(n){if(n!==fr)return!1;if(!pt)return mp(n),pt=!0,!1;var a;if((a=n.tag!==3)&&!(a=n.tag!==5)&&(a=n.type,a=a!=="head"&&a!=="body"&&!wd(n.type,n.memoizedProps)),a&&(a=hr)){if(Pd(n))throw fp(),Error(r(418));for(;a;)dp(n,a),a=Ls(a.nextSibling)}if(mp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8){var d=n.data;if(d==="/$"){if(a===0){hr=Ls(n.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}n=n.nextSibling}hr=null}}else hr=fr?Ls(n.stateNode.nextSibling):null;return!0}function fp(){for(var n=hr;n;)n=Ls(n.nextSibling)}function di(){hr=fr=null,pt=!1}function Ad(n){$r===null?$r=[n]:$r.push(n)}var S_=N.ReactCurrentBatchConfig;function ja(n,a,d){if(n=d.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(r(309));var f=d.stateNode}if(!f)throw Error(r(147,n));var x=f,v=""+n;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(S){var L=x.refs;S===null?delete L[v]:L[v]=S},a._stringRef=v,a)}if(typeof n!="string")throw Error(r(284));if(!d._owner)throw Error(r(290,n))}return n}function ol(n,a){throw n=Object.prototype.toString.call(a),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n))}function hp(n){var a=n._init;return a(n._payload)}function pp(n){function a(K,q){if(n){var Z=K.deletions;Z===null?(K.deletions=[q],K.flags|=16):Z.push(q)}}function d(K,q){if(!n)return null;for(;q!==null;)a(K,q),q=q.sibling;return null}function f(K,q){for(K=new Map;q!==null;)q.key!==null?K.set(q.key,q):K.set(q.index,q),q=q.sibling;return K}function x(K,q){return K=Ks(K,q),K.index=0,K.sibling=null,K}function v(K,q,Z){return K.index=Z,n?(Z=K.alternate,Z!==null?(Z=Z.index,Z<q?(K.flags|=2,q):Z):(K.flags|=2,q)):(K.flags|=1048576,q)}function S(K){return n&&K.alternate===null&&(K.flags|=2),K}function L(K,q,Z,ve){return q===null||q.tag!==6?(q=ju(Z,K.mode,ve),q.return=K,q):(q=x(q,Z),q.return=K,q)}function U(K,q,Z,ve){var Oe=Z.type;return Oe===M?pe(K,q,Z.props.children,ve,Z.key):q!==null&&(q.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===se&&hp(Oe)===q.type)?(ve=x(q,Z.props),ve.ref=ja(K,q,Z),ve.return=K,ve):(ve=Al(Z.type,Z.key,Z.props,null,K.mode,ve),ve.ref=ja(K,q,Z),ve.return=K,ve)}function re(K,q,Z,ve){return q===null||q.tag!==4||q.stateNode.containerInfo!==Z.containerInfo||q.stateNode.implementation!==Z.implementation?(q=_u(Z,K.mode,ve),q.return=K,q):(q=x(q,Z.children||[]),q.return=K,q)}function pe(K,q,Z,ve,Oe){return q===null||q.tag!==7?(q=Pn(Z,K.mode,ve,Oe),q.return=K,q):(q=x(q,Z),q.return=K,q)}function ge(K,q,Z){if(typeof q=="string"&&q!==""||typeof q=="number")return q=ju(""+q,K.mode,Z),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case R:return Z=Al(q.type,q.key,q.props,null,K.mode,Z),Z.ref=ja(K,null,q),Z.return=K,Z;case T:return q=_u(q,K.mode,Z),q.return=K,q;case se:var ve=q._init;return ge(K,ve(q._payload),Z)}if(Ke(q)||ne(q))return q=Pn(q,K.mode,Z,null),q.return=K,q;ol(K,q)}return null}function fe(K,q,Z,ve){var Oe=q!==null?q.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Oe!==null?null:L(K,q,""+Z,ve);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case R:return Z.key===Oe?U(K,q,Z,ve):null;case T:return Z.key===Oe?re(K,q,Z,ve):null;case se:return Oe=Z._init,fe(K,q,Oe(Z._payload),ve)}if(Ke(Z)||ne(Z))return Oe!==null?null:pe(K,q,Z,ve,null);ol(K,Z)}return null}function ke(K,q,Z,ve,Oe){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return K=K.get(Z)||null,L(q,K,""+ve,Oe);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case R:return K=K.get(ve.key===null?Z:ve.key)||null,U(q,K,ve,Oe);case T:return K=K.get(ve.key===null?Z:ve.key)||null,re(q,K,ve,Oe);case se:var Le=ve._init;return ke(K,q,Z,Le(ve._payload),Oe)}if(Ke(ve)||ne(ve))return K=K.get(Z)||null,pe(q,K,ve,Oe,null);ol(q,ve)}return null}function Ae(K,q,Z,ve){for(var Oe=null,Le=null,$e=q,Ve=q=0,Dt=null;$e!==null&&Ve<Z.length;Ve++){$e.index>Ve?(Dt=$e,$e=null):Dt=$e.sibling;var Je=fe(K,$e,Z[Ve],ve);if(Je===null){$e===null&&($e=Dt);break}n&&$e&&Je.alternate===null&&a(K,$e),q=v(Je,q,Ve),Le===null?Oe=Je:Le.sibling=Je,Le=Je,$e=Dt}if(Ve===Z.length)return d(K,$e),pt&&wn(K,Ve),Oe;if($e===null){for(;Ve<Z.length;Ve++)$e=ge(K,Z[Ve],ve),$e!==null&&(q=v($e,q,Ve),Le===null?Oe=$e:Le.sibling=$e,Le=$e);return pt&&wn(K,Ve),Oe}for($e=f(K,$e);Ve<Z.length;Ve++)Dt=ke($e,K,Ve,Z[Ve],ve),Dt!==null&&(n&&Dt.alternate!==null&&$e.delete(Dt.key===null?Ve:Dt.key),q=v(Dt,q,Ve),Le===null?Oe=Dt:Le.sibling=Dt,Le=Dt);return n&&$e.forEach(function(Ys){return a(K,Ys)}),pt&&wn(K,Ve),Oe}function Re(K,q,Z,ve){var Oe=ne(Z);if(typeof Oe!="function")throw Error(r(150));if(Z=Oe.call(Z),Z==null)throw Error(r(151));for(var Le=Oe=null,$e=q,Ve=q=0,Dt=null,Je=Z.next();$e!==null&&!Je.done;Ve++,Je=Z.next()){$e.index>Ve?(Dt=$e,$e=null):Dt=$e.sibling;var Ys=fe(K,$e,Je.value,ve);if(Ys===null){$e===null&&($e=Dt);break}n&&$e&&Ys.alternate===null&&a(K,$e),q=v(Ys,q,Ve),Le===null?Oe=Ys:Le.sibling=Ys,Le=Ys,$e=Dt}if(Je.done)return d(K,$e),pt&&wn(K,Ve),Oe;if($e===null){for(;!Je.done;Ve++,Je=Z.next())Je=ge(K,Je.value,ve),Je!==null&&(q=v(Je,q,Ve),Le===null?Oe=Je:Le.sibling=Je,Le=Je);return pt&&wn(K,Ve),Oe}for($e=f(K,$e);!Je.done;Ve++,Je=Z.next())Je=ke($e,K,Ve,Je.value,ve),Je!==null&&(n&&Je.alternate!==null&&$e.delete(Je.key===null?Ve:Je.key),q=v(Je,q,Ve),Le===null?Oe=Je:Le.sibling=Je,Le=Je);return n&&$e.forEach(function(iN){return a(K,iN)}),pt&&wn(K,Ve),Oe}function wt(K,q,Z,ve){if(typeof Z=="object"&&Z!==null&&Z.type===M&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case R:e:{for(var Oe=Z.key,Le=q;Le!==null;){if(Le.key===Oe){if(Oe=Z.type,Oe===M){if(Le.tag===7){d(K,Le.sibling),q=x(Le,Z.props.children),q.return=K,K=q;break e}}else if(Le.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===se&&hp(Oe)===Le.type){d(K,Le.sibling),q=x(Le,Z.props),q.ref=ja(K,Le,Z),q.return=K,K=q;break e}d(K,Le);break}else a(K,Le);Le=Le.sibling}Z.type===M?(q=Pn(Z.props.children,K.mode,ve,Z.key),q.return=K,K=q):(ve=Al(Z.type,Z.key,Z.props,null,K.mode,ve),ve.ref=ja(K,q,Z),ve.return=K,K=ve)}return S(K);case T:e:{for(Le=Z.key;q!==null;){if(q.key===Le)if(q.tag===4&&q.stateNode.containerInfo===Z.containerInfo&&q.stateNode.implementation===Z.implementation){d(K,q.sibling),q=x(q,Z.children||[]),q.return=K,K=q;break e}else{d(K,q);break}else a(K,q);q=q.sibling}q=_u(Z,K.mode,ve),q.return=K,K=q}return S(K);case se:return Le=Z._init,wt(K,q,Le(Z._payload),ve)}if(Ke(Z))return Ae(K,q,Z,ve);if(ne(Z))return Re(K,q,Z,ve);ol(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,q!==null&&q.tag===6?(d(K,q.sibling),q=x(q,Z),q.return=K,K=q):(d(K,q),q=ju(Z,K.mode,ve),q.return=K,K=q),S(K)):d(K,q)}return wt}var ui=pp(!0),gp=pp(!1),ll=$s(null),cl=null,mi=null,Rd=null;function Od(){Rd=mi=cl=null}function Dd(n){var a=ll.current;ut(ll),n._currentValue=a}function Md(n,a,d){for(;n!==null;){var f=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),n===d)break;n=n.return}}function fi(n,a){cl=n,Rd=mi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&a)!==0&&(nr=!0),n.firstContext=null)}function Nr(n){var a=n._currentValue;if(Rd!==n)if(n={context:n,memoizedValue:a,next:null},mi===null){if(cl===null)throw Error(r(308));mi=n,cl.dependencies={lanes:0,firstContext:n}}else mi=mi.next=n;return a}var jn=null;function Id(n){jn===null?jn=[n]:jn.push(n)}function yp(n,a,d,f){var x=a.interleaved;return x===null?(d.next=d,Id(a)):(d.next=x.next,x.next=d),a.interleaved=d,gs(n,f)}function gs(n,a){n.lanes|=a;var d=n.alternate;for(d!==null&&(d.lanes|=a),d=n,n=n.return;n!==null;)n.childLanes|=a,d=n.alternate,d!==null&&(d.childLanes|=a),d=n,n=n.return;return d.tag===3?d.stateNode:null}var Bs=!1;function Ld(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xp(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ys(n,a){return{eventTime:n,lane:a,tag:0,payload:null,callback:null,next:null}}function zs(n,a,d){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(Ze&2)!==0){var x=f.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),f.pending=a,gs(n,d)}return x=f.interleaved,x===null?(a.next=a,Id(f)):(a.next=x.next,x.next=a),f.interleaved=a,gs(n,d)}function dl(n,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var f=a.lanes;f&=n.pendingLanes,d|=f,a.lanes=d,Zc(n,d)}}function vp(n,a){var d=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,d===f)){var x=null,v=null;if(d=d.firstBaseUpdate,d!==null){do{var S={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};v===null?x=v=S:v=v.next=S,d=d.next}while(d!==null);v===null?x=v=a:v=v.next=a}else x=v=a;d={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:v,shared:f.shared,effects:f.effects},n.updateQueue=d;return}n=d.lastBaseUpdate,n===null?d.firstBaseUpdate=a:n.next=a,d.lastBaseUpdate=a}function ul(n,a,d,f){var x=n.updateQueue;Bs=!1;var v=x.firstBaseUpdate,S=x.lastBaseUpdate,L=x.shared.pending;if(L!==null){x.shared.pending=null;var U=L,re=U.next;U.next=null,S===null?v=re:S.next=re,S=U;var pe=n.alternate;pe!==null&&(pe=pe.updateQueue,L=pe.lastBaseUpdate,L!==S&&(L===null?pe.firstBaseUpdate=re:L.next=re,pe.lastBaseUpdate=U))}if(v!==null){var ge=x.baseState;S=0,pe=re=U=null,L=v;do{var fe=L.lane,ke=L.eventTime;if((f&fe)===fe){pe!==null&&(pe=pe.next={eventTime:ke,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var Ae=n,Re=L;switch(fe=a,ke=d,Re.tag){case 1:if(Ae=Re.payload,typeof Ae=="function"){ge=Ae.call(ke,ge,fe);break e}ge=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Re.payload,fe=typeof Ae=="function"?Ae.call(ke,ge,fe):Ae,fe==null)break e;ge=ae({},ge,fe);break e;case 2:Bs=!0}}L.callback!==null&&L.lane!==0&&(n.flags|=64,fe=x.effects,fe===null?x.effects=[L]:fe.push(L))}else ke={eventTime:ke,lane:fe,tag:L.tag,payload:L.payload,callback:L.callback,next:null},pe===null?(re=pe=ke,U=ge):pe=pe.next=ke,S|=fe;if(L=L.next,L===null){if(L=x.shared.pending,L===null)break;fe=L,L=fe.next,fe.next=null,x.lastBaseUpdate=fe,x.shared.pending=null}}while(!0);if(pe===null&&(U=ge),x.baseState=U,x.firstBaseUpdate=re,x.lastBaseUpdate=pe,a=x.shared.interleaved,a!==null){x=a;do S|=x.lane,x=x.next;while(x!==a)}else v===null&&(x.shared.lanes=0);Cn|=S,n.lanes=S,n.memoizedState=ge}}function bp(n,a,d){if(n=a.effects,a.effects=null,n!==null)for(a=0;a<n.length;a++){var f=n[a],x=f.callback;if(x!==null){if(f.callback=null,f=d,typeof x!="function")throw Error(r(191,x));x.call(f)}}}var _a={},Xr=$s(_a),Na=$s(_a),Ca=$s(_a);function _n(n){if(n===_a)throw Error(r(174));return n}function $d(n,a){switch(at(Ca,a),at(Na,n),at(Xr,_a),n=a.nodeType,n){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:er(null,"");break;default:n=n===8?a.parentNode:a,a=n.namespaceURI||null,n=n.tagName,a=er(a,n)}ut(Xr),at(Xr,a)}function hi(){ut(Xr),ut(Na),ut(Ca)}function wp(n){_n(Ca.current);var a=_n(Xr.current),d=er(a,n.type);a!==d&&(at(Na,n),at(Xr,d))}function Fd(n){Na.current===n&&(ut(Xr),ut(Na))}var gt=$s(0);function ml(n){for(var a=n;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ud=[];function Bd(){for(var n=0;n<Ud.length;n++)Ud[n]._workInProgressVersionPrimary=null;Ud.length=0}var fl=N.ReactCurrentDispatcher,zd=N.ReactCurrentBatchConfig,Nn=0,yt=null,kt=null,Rt=null,hl=!1,Sa=!1,Ea=0,E_=0;function Ut(){throw Error(r(321))}function Vd(n,a){if(a===null)return!1;for(var d=0;d<a.length&&d<n.length;d++)if(!Lr(n[d],a[d]))return!1;return!0}function qd(n,a,d,f,x,v){if(Nn=v,yt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,fl.current=n===null||n.memoizedState===null?A_:R_,n=d(f,x),Sa){v=0;do{if(Sa=!1,Ea=0,25<=v)throw Error(r(301));v+=1,Rt=kt=null,a.updateQueue=null,fl.current=O_,n=d(f,x)}while(Sa)}if(fl.current=yl,a=kt!==null&&kt.next!==null,Nn=0,Rt=kt=yt=null,hl=!1,a)throw Error(r(300));return n}function Wd(){var n=Ea!==0;return Ea=0,n}function es(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?yt.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function Cr(){if(kt===null){var n=yt.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var a=Rt===null?yt.memoizedState:Rt.next;if(a!==null)Rt=a,kt=n;else{if(n===null)throw Error(r(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Rt===null?yt.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function ka(n,a){return typeof a=="function"?a(n):a}function Hd(n){var a=Cr(),d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=n;var f=kt,x=f.baseQueue,v=d.pending;if(v!==null){if(x!==null){var S=x.next;x.next=v.next,v.next=S}f.baseQueue=x=v,d.pending=null}if(x!==null){v=x.next,f=f.baseState;var L=S=null,U=null,re=v;do{var pe=re.lane;if((Nn&pe)===pe)U!==null&&(U=U.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),f=re.hasEagerState?re.eagerState:n(f,re.action);else{var ge={lane:pe,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};U===null?(L=U=ge,S=f):U=U.next=ge,yt.lanes|=pe,Cn|=pe}re=re.next}while(re!==null&&re!==v);U===null?S=f:U.next=L,Lr(f,a.memoizedState)||(nr=!0),a.memoizedState=f,a.baseState=S,a.baseQueue=U,d.lastRenderedState=f}if(n=d.interleaved,n!==null){x=n;do v=x.lane,yt.lanes|=v,Cn|=v,x=x.next;while(x!==n)}else x===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Gd(n){var a=Cr(),d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=n;var f=d.dispatch,x=d.pending,v=a.memoizedState;if(x!==null){d.pending=null;var S=x=x.next;do v=n(v,S.action),S=S.next;while(S!==x);Lr(v,a.memoizedState)||(nr=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),d.lastRenderedState=v}return[v,f]}function jp(){}function _p(n,a){var d=yt,f=Cr(),x=a(),v=!Lr(f.memoizedState,x);if(v&&(f.memoizedState=x,nr=!0),f=f.queue,Kd(Sp.bind(null,d,f,n),[n]),f.getSnapshot!==a||v||Rt!==null&&Rt.memoizedState.tag&1){if(d.flags|=2048,Pa(9,Cp.bind(null,d,f,x,a),void 0,null),Ot===null)throw Error(r(349));(Nn&30)!==0||Np(d,a,x)}return x}function Np(n,a,d){n.flags|=16384,n={getSnapshot:a,value:d},a=yt.updateQueue,a===null?(a={lastEffect:null,stores:null},yt.updateQueue=a,a.stores=[n]):(d=a.stores,d===null?a.stores=[n]:d.push(n))}function Cp(n,a,d,f){a.value=d,a.getSnapshot=f,Ep(a)&&kp(n)}function Sp(n,a,d){return d(function(){Ep(a)&&kp(n)})}function Ep(n){var a=n.getSnapshot;n=n.value;try{var d=a();return!Lr(n,d)}catch{return!0}}function kp(n){var a=gs(n,1);a!==null&&zr(a,n,1,-1)}function Pp(n){var a=es();return typeof n=="function"&&(n=n()),a.memoizedState=a.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:n},a.queue=n,n=n.dispatch=T_.bind(null,yt,n),[a.memoizedState,n]}function Pa(n,a,d,f){return n={tag:n,create:a,destroy:d,deps:f,next:null},a=yt.updateQueue,a===null?(a={lastEffect:null,stores:null},yt.updateQueue=a,a.lastEffect=n.next=n):(d=a.lastEffect,d===null?a.lastEffect=n.next=n:(f=d.next,d.next=n,n.next=f,a.lastEffect=n)),n}function Tp(){return Cr().memoizedState}function pl(n,a,d,f){var x=es();yt.flags|=n,x.memoizedState=Pa(1|a,d,void 0,f===void 0?null:f)}function gl(n,a,d,f){var x=Cr();f=f===void 0?null:f;var v=void 0;if(kt!==null){var S=kt.memoizedState;if(v=S.destroy,f!==null&&Vd(f,S.deps)){x.memoizedState=Pa(a,d,v,f);return}}yt.flags|=n,x.memoizedState=Pa(1|a,d,v,f)}function Ap(n,a){return pl(8390656,8,n,a)}function Kd(n,a){return gl(2048,8,n,a)}function Rp(n,a){return gl(4,2,n,a)}function Op(n,a){return gl(4,4,n,a)}function Dp(n,a){if(typeof a=="function")return n=n(),a(n),function(){a(null)};if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Mp(n,a,d){return d=d!=null?d.concat([n]):null,gl(4,4,Dp.bind(null,a,n),d)}function Yd(){}function Ip(n,a){var d=Cr();a=a===void 0?null:a;var f=d.memoizedState;return f!==null&&a!==null&&Vd(a,f[1])?f[0]:(d.memoizedState=[n,a],n)}function Lp(n,a){var d=Cr();a=a===void 0?null:a;var f=d.memoizedState;return f!==null&&a!==null&&Vd(a,f[1])?f[0]:(n=n(),d.memoizedState=[n,a],n)}function $p(n,a,d){return(Nn&21)===0?(n.baseState&&(n.baseState=!1,nr=!0),n.memoizedState=d):(Lr(d,a)||(d=hh(),yt.lanes|=d,Cn|=d,n.baseState=!0),a)}function k_(n,a){var d=st;st=d!==0&&4>d?d:4,n(!0);var f=zd.transition;zd.transition={};try{n(!1),a()}finally{st=d,zd.transition=f}}function Fp(){return Cr().memoizedState}function P_(n,a,d){var f=Hs(n);if(d={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null},Up(n))Bp(a,d);else if(d=yp(n,a,d,f),d!==null){var x=Ht();zr(d,n,f,x),zp(d,a,f)}}function T_(n,a,d){var f=Hs(n),x={lane:f,action:d,hasEagerState:!1,eagerState:null,next:null};if(Up(n))Bp(a,x);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var S=a.lastRenderedState,L=v(S,d);if(x.hasEagerState=!0,x.eagerState=L,Lr(L,S)){var U=a.interleaved;U===null?(x.next=x,Id(a)):(x.next=U.next,U.next=x),a.interleaved=x;return}}catch{}finally{}d=yp(n,a,x,f),d!==null&&(x=Ht(),zr(d,n,f,x),zp(d,a,f))}}function Up(n){var a=n.alternate;return n===yt||a!==null&&a===yt}function Bp(n,a){Sa=hl=!0;var d=n.pending;d===null?a.next=a:(a.next=d.next,d.next=a),n.pending=a}function zp(n,a,d){if((d&4194240)!==0){var f=a.lanes;f&=n.pendingLanes,d|=f,a.lanes=d,Zc(n,d)}}var yl={readContext:Nr,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},A_={readContext:Nr,useCallback:function(n,a){return es().memoizedState=[n,a===void 0?null:a],n},useContext:Nr,useEffect:Ap,useImperativeHandle:function(n,a,d){return d=d!=null?d.concat([n]):null,pl(4194308,4,Dp.bind(null,a,n),d)},useLayoutEffect:function(n,a){return pl(4194308,4,n,a)},useInsertionEffect:function(n,a){return pl(4,2,n,a)},useMemo:function(n,a){var d=es();return a=a===void 0?null:a,n=n(),d.memoizedState=[n,a],n},useReducer:function(n,a,d){var f=es();return a=d!==void 0?d(a):a,f.memoizedState=f.baseState=a,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:a},f.queue=n,n=n.dispatch=P_.bind(null,yt,n),[f.memoizedState,n]},useRef:function(n){var a=es();return n={current:n},a.memoizedState=n},useState:Pp,useDebugValue:Yd,useDeferredValue:function(n){return es().memoizedState=n},useTransition:function(){var n=Pp(!1),a=n[0];return n=k_.bind(null,n[1]),es().memoizedState=n,[a,n]},useMutableSource:function(){},useSyncExternalStore:function(n,a,d){var f=yt,x=es();if(pt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=a(),Ot===null)throw Error(r(349));(Nn&30)!==0||Np(f,a,d)}x.memoizedState=d;var v={value:d,getSnapshot:a};return x.queue=v,Ap(Sp.bind(null,f,v,n),[n]),f.flags|=2048,Pa(9,Cp.bind(null,f,v,d,a),void 0,null),d},useId:function(){var n=es(),a=Ot.identifierPrefix;if(pt){var d=ps,f=hs;d=(f&~(1<<32-Ir(f)-1)).toString(32)+d,a=":"+a+"R"+d,d=Ea++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=E_++,a=":"+a+"r"+d.toString(32)+":";return n.memoizedState=a},unstable_isNewReconciler:!1},R_={readContext:Nr,useCallback:Ip,useContext:Nr,useEffect:Kd,useImperativeHandle:Mp,useInsertionEffect:Rp,useLayoutEffect:Op,useMemo:Lp,useReducer:Hd,useRef:Tp,useState:function(){return Hd(ka)},useDebugValue:Yd,useDeferredValue:function(n){var a=Cr();return $p(a,kt.memoizedState,n)},useTransition:function(){var n=Hd(ka)[0],a=Cr().memoizedState;return[n,a]},useMutableSource:jp,useSyncExternalStore:_p,useId:Fp,unstable_isNewReconciler:!1},O_={readContext:Nr,useCallback:Ip,useContext:Nr,useEffect:Kd,useImperativeHandle:Mp,useInsertionEffect:Rp,useLayoutEffect:Op,useMemo:Lp,useReducer:Gd,useRef:Tp,useState:function(){return Gd(ka)},useDebugValue:Yd,useDeferredValue:function(n){var a=Cr();return kt===null?a.memoizedState=n:$p(a,kt.memoizedState,n)},useTransition:function(){var n=Gd(ka)[0],a=Cr().memoizedState;return[n,a]},useMutableSource:jp,useSyncExternalStore:_p,useId:Fp,unstable_isNewReconciler:!1};function Fr(n,a){if(n&&n.defaultProps){a=ae({},a),n=n.defaultProps;for(var d in n)a[d]===void 0&&(a[d]=n[d]);return a}return a}function Qd(n,a,d,f){a=n.memoizedState,d=d(f,a),d=d==null?a:ae({},a,d),n.memoizedState=d,n.lanes===0&&(n.updateQueue.baseState=d)}var xl={isMounted:function(n){return(n=n._reactInternals)?yn(n)===n:!1},enqueueSetState:function(n,a,d){n=n._reactInternals;var f=Ht(),x=Hs(n),v=ys(f,x);v.payload=a,d!=null&&(v.callback=d),a=zs(n,v,x),a!==null&&(zr(a,n,x,f),dl(a,n,x))},enqueueReplaceState:function(n,a,d){n=n._reactInternals;var f=Ht(),x=Hs(n),v=ys(f,x);v.tag=1,v.payload=a,d!=null&&(v.callback=d),a=zs(n,v,x),a!==null&&(zr(a,n,x,f),dl(a,n,x))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var d=Ht(),f=Hs(n),x=ys(d,f);x.tag=2,a!=null&&(x.callback=a),a=zs(n,x,f),a!==null&&(zr(a,n,f,d),dl(a,n,f))}};function Vp(n,a,d,f,x,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,v,S):a.prototype&&a.prototype.isPureReactComponent?!pa(d,f)||!pa(x,v):!0}function qp(n,a,d){var f=!1,x=Fs,v=a.contextType;return typeof v=="object"&&v!==null?v=Nr(v):(x=sr(a)?vn:Ft.current,f=a.contextTypes,v=(f=f!=null)?oi(n,x):Fs),a=new a(d,v),n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=xl,n.stateNode=a,a._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=x,n.__reactInternalMemoizedMaskedChildContext=v),a}function Wp(n,a,d,f){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,f),a.state!==n&&xl.enqueueReplaceState(a,a.state,null)}function Zd(n,a,d,f){var x=n.stateNode;x.props=d,x.state=n.memoizedState,x.refs={},Ld(n);var v=a.contextType;typeof v=="object"&&v!==null?x.context=Nr(v):(v=sr(a)?vn:Ft.current,x.context=oi(n,v)),x.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Qd(n,a,v,d),x.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&xl.enqueueReplaceState(x,x.state,null),ul(n,d,x,f),x.state=n.memoizedState),typeof x.componentDidMount=="function"&&(n.flags|=4194308)}function pi(n,a){try{var d="",f=a;do d+=ye(f),f=f.return;while(f);var x=d}catch(v){x=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:a,stack:x,digest:null}}function Jd(n,a,d){return{value:n,source:null,stack:d??null,digest:a??null}}function Xd(n,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var D_=typeof WeakMap=="function"?WeakMap:Map;function Hp(n,a,d){d=ys(-1,d),d.tag=3,d.payload={element:null};var f=a.value;return d.callback=function(){Cl||(Cl=!0,hu=f),Xd(n,a)},d}function Gp(n,a,d){d=ys(-1,d),d.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var x=a.value;d.payload=function(){return f(x)},d.callback=function(){Xd(n,a)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(d.callback=function(){Xd(n,a),typeof f!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),d}function Kp(n,a,d){var f=n.pingCache;if(f===null){f=n.pingCache=new D_;var x=new Set;f.set(a,x)}else x=f.get(a),x===void 0&&(x=new Set,f.set(a,x));x.has(d)||(x.add(d),n=K_.bind(null,n,a,d),a.then(n,n))}function Yp(n){do{var a;if((a=n.tag===13)&&(a=n.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return n;n=n.return}while(n!==null);return null}function Qp(n,a,d,f,x){return(n.mode&1)===0?(n===a?n.flags|=65536:(n.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=ys(-1,1),a.tag=2,zs(d,a,1))),d.lanes|=1),n):(n.flags|=65536,n.lanes=x,n)}var M_=N.ReactCurrentOwner,nr=!1;function Wt(n,a,d,f){a.child=n===null?gp(a,null,d,f):ui(a,n.child,d,f)}function Zp(n,a,d,f,x){d=d.render;var v=a.ref;return fi(a,x),f=qd(n,a,d,f,v,x),d=Wd(),n!==null&&!nr?(a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~x,xs(n,a,x)):(pt&&d&&Ed(a),a.flags|=1,Wt(n,a,f,x),a.child)}function Jp(n,a,d,f,x){if(n===null){var v=d.type;return typeof v=="function"&&!wu(v)&&v.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=v,Xp(n,a,v,f,x)):(n=Al(d.type,null,f,a,a.mode,x),n.ref=a.ref,n.return=a,a.child=n)}if(v=n.child,(n.lanes&x)===0){var S=v.memoizedProps;if(d=d.compare,d=d!==null?d:pa,d(S,f)&&n.ref===a.ref)return xs(n,a,x)}return a.flags|=1,n=Ks(v,f),n.ref=a.ref,n.return=a,a.child=n}function Xp(n,a,d,f,x){if(n!==null){var v=n.memoizedProps;if(pa(v,f)&&n.ref===a.ref)if(nr=!1,a.pendingProps=f=v,(n.lanes&x)!==0)(n.flags&131072)!==0&&(nr=!0);else return a.lanes=n.lanes,xs(n,a,x)}return eu(n,a,d,f,x)}function eg(n,a,d){var f=a.pendingProps,x=f.children,v=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(yi,pr),pr|=d;else{if((d&1073741824)===0)return n=v!==null?v.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:n,cachePool:null,transitions:null},a.updateQueue=null,at(yi,pr),pr|=n,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:d,at(yi,pr),pr|=f}else v!==null?(f=v.baseLanes|d,a.memoizedState=null):f=d,at(yi,pr),pr|=f;return Wt(n,a,x,d),a.child}function tg(n,a){var d=a.ref;(n===null&&d!==null||n!==null&&n.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function eu(n,a,d,f,x){var v=sr(d)?vn:Ft.current;return v=oi(a,v),fi(a,x),d=qd(n,a,d,f,v,x),f=Wd(),n!==null&&!nr?(a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~x,xs(n,a,x)):(pt&&f&&Ed(a),a.flags|=1,Wt(n,a,d,x),a.child)}function rg(n,a,d,f,x){if(sr(d)){var v=!0;rl(a)}else v=!1;if(fi(a,x),a.stateNode===null)bl(n,a),qp(a,d,f),Zd(a,d,f,x),f=!0;else if(n===null){var S=a.stateNode,L=a.memoizedProps;S.props=L;var U=S.context,re=d.contextType;typeof re=="object"&&re!==null?re=Nr(re):(re=sr(d)?vn:Ft.current,re=oi(a,re));var pe=d.getDerivedStateFromProps,ge=typeof pe=="function"||typeof S.getSnapshotBeforeUpdate=="function";ge||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(L!==f||U!==re)&&Wp(a,S,f,re),Bs=!1;var fe=a.memoizedState;S.state=fe,ul(a,f,S,x),U=a.memoizedState,L!==f||fe!==U||rr.current||Bs?(typeof pe=="function"&&(Qd(a,d,pe,f),U=a.memoizedState),(L=Bs||Vp(a,d,L,f,fe,U,re))?(ge||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=U),S.props=f,S.state=U,S.context=re,f=L):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{S=a.stateNode,xp(n,a),L=a.memoizedProps,re=a.type===a.elementType?L:Fr(a.type,L),S.props=re,ge=a.pendingProps,fe=S.context,U=d.contextType,typeof U=="object"&&U!==null?U=Nr(U):(U=sr(d)?vn:Ft.current,U=oi(a,U));var ke=d.getDerivedStateFromProps;(pe=typeof ke=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(L!==ge||fe!==U)&&Wp(a,S,f,U),Bs=!1,fe=a.memoizedState,S.state=fe,ul(a,f,S,x);var Ae=a.memoizedState;L!==ge||fe!==Ae||rr.current||Bs?(typeof ke=="function"&&(Qd(a,d,ke,f),Ae=a.memoizedState),(re=Bs||Vp(a,d,re,f,fe,Ae,U)||!1)?(pe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Ae,U),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Ae,U)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||L===n.memoizedProps&&fe===n.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&fe===n.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Ae),S.props=f,S.state=Ae,S.context=U,f=re):(typeof S.componentDidUpdate!="function"||L===n.memoizedProps&&fe===n.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&fe===n.memoizedState||(a.flags|=1024),f=!1)}return tu(n,a,d,f,v,x)}function tu(n,a,d,f,x,v){tg(n,a);var S=(a.flags&128)!==0;if(!f&&!S)return x&&op(a,d,!1),xs(n,a,v);f=a.stateNode,M_.current=a;var L=S&&typeof d.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,n!==null&&S?(a.child=ui(a,n.child,null,v),a.child=ui(a,null,L,v)):Wt(n,a,L,v),a.memoizedState=f.state,x&&op(a,d,!0),a.child}function sg(n){var a=n.stateNode;a.pendingContext?ip(n,a.pendingContext,a.pendingContext!==a.context):a.context&&ip(n,a.context,!1),$d(n,a.containerInfo)}function ng(n,a,d,f,x){return di(),Ad(x),a.flags|=256,Wt(n,a,d,f),a.child}var ru={dehydrated:null,treeContext:null,retryLane:0};function su(n){return{baseLanes:n,cachePool:null,transitions:null}}function ig(n,a,d){var f=a.pendingProps,x=gt.current,v=!1,S=(a.flags&128)!==0,L;if((L=S)||(L=n!==null&&n.memoizedState===null?!1:(x&2)!==0),L?(v=!0,a.flags&=-129):(n===null||n.memoizedState!==null)&&(x|=1),at(gt,x&1),n===null)return Td(a),n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((a.mode&1)===0?a.lanes=1:n.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=f.children,n=f.fallback,v?(f=a.mode,v=a.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Rl(S,f,0,null),n=Pn(n,f,d,null),v.return=a,n.return=a,v.sibling=n,a.child=v,a.child.memoizedState=su(d),a.memoizedState=ru,n):nu(a,S));if(x=n.memoizedState,x!==null&&(L=x.dehydrated,L!==null))return I_(n,a,S,f,L,x,d);if(v){v=f.fallback,S=a.mode,x=n.child,L=x.sibling;var U={mode:"hidden",children:f.children};return(S&1)===0&&a.child!==x?(f=a.child,f.childLanes=0,f.pendingProps=U,a.deletions=null):(f=Ks(x,U),f.subtreeFlags=x.subtreeFlags&14680064),L!==null?v=Ks(L,v):(v=Pn(v,S,d,null),v.flags|=2),v.return=a,f.return=a,f.sibling=v,a.child=f,f=v,v=a.child,S=n.child.memoizedState,S=S===null?su(d):{baseLanes:S.baseLanes|d,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=n.childLanes&~d,a.memoizedState=ru,f}return v=n.child,n=v.sibling,f=Ks(v,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=d),f.return=a,f.sibling=null,n!==null&&(d=a.deletions,d===null?(a.deletions=[n],a.flags|=16):d.push(n)),a.child=f,a.memoizedState=null,f}function nu(n,a){return a=Rl({mode:"visible",children:a},n.mode,0,null),a.return=n,n.child=a}function vl(n,a,d,f){return f!==null&&Ad(f),ui(a,n.child,null,d),n=nu(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function I_(n,a,d,f,x,v,S){if(d)return a.flags&256?(a.flags&=-257,f=Jd(Error(r(422))),vl(n,a,S,f)):a.memoizedState!==null?(a.child=n.child,a.flags|=128,null):(v=f.fallback,x=a.mode,f=Rl({mode:"visible",children:f.children},x,0,null),v=Pn(v,x,S,null),v.flags|=2,f.return=a,v.return=a,f.sibling=v,a.child=f,(a.mode&1)!==0&&ui(a,n.child,null,S),a.child.memoizedState=su(S),a.memoizedState=ru,v);if((a.mode&1)===0)return vl(n,a,S,null);if(x.data==="$!"){if(f=x.nextSibling&&x.nextSibling.dataset,f)var L=f.dgst;return f=L,v=Error(r(419)),f=Jd(v,f,void 0),vl(n,a,S,f)}if(L=(S&n.childLanes)!==0,nr||L){if(f=Ot,f!==null){switch(S&-S){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(f.suspendedLanes|S))!==0?0:x,x!==0&&x!==v.retryLane&&(v.retryLane=x,gs(n,x),zr(f,n,x,-1))}return bu(),f=Jd(Error(r(421))),vl(n,a,S,f)}return x.data==="$?"?(a.flags|=128,a.child=n.child,a=Y_.bind(null,n),x._reactRetry=a,null):(n=v.treeContext,hr=Ls(x.nextSibling),fr=a,pt=!0,$r=null,n!==null&&(jr[_r++]=hs,jr[_r++]=ps,jr[_r++]=bn,hs=n.id,ps=n.overflow,bn=a),a=nu(a,f.children),a.flags|=4096,a)}function ag(n,a,d){n.lanes|=a;var f=n.alternate;f!==null&&(f.lanes|=a),Md(n.return,a,d)}function iu(n,a,d,f,x){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:d,tailMode:x}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=d,v.tailMode=x)}function og(n,a,d){var f=a.pendingProps,x=f.revealOrder,v=f.tail;if(Wt(n,a,f.children,d),f=gt.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ag(n,d,a);else if(n.tag===19)ag(n,d,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(at(gt,f),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(d=a.child,x=null;d!==null;)n=d.alternate,n!==null&&ml(n)===null&&(x=d),d=d.sibling;d=x,d===null?(x=a.child,a.child=null):(x=d.sibling,d.sibling=null),iu(a,!1,x,d,v);break;case"backwards":for(d=null,x=a.child,a.child=null;x!==null;){if(n=x.alternate,n!==null&&ml(n)===null){a.child=x;break}n=x.sibling,x.sibling=d,d=x,x=n}iu(a,!0,d,null,v);break;case"together":iu(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function bl(n,a){(a.mode&1)===0&&n!==null&&(n.alternate=null,a.alternate=null,a.flags|=2)}function xs(n,a,d){if(n!==null&&(a.dependencies=n.dependencies),Cn|=a.lanes,(d&a.childLanes)===0)return null;if(n!==null&&a.child!==n.child)throw Error(r(153));if(a.child!==null){for(n=a.child,d=Ks(n,n.pendingProps),a.child=d,d.return=a;n.sibling!==null;)n=n.sibling,d=d.sibling=Ks(n,n.pendingProps),d.return=a;d.sibling=null}return a.child}function L_(n,a,d){switch(a.tag){case 3:sg(a),di();break;case 5:wp(a);break;case 1:sr(a.type)&&rl(a);break;case 4:$d(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,x=a.memoizedProps.value;at(ll,f._currentValue),f._currentValue=x;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(at(gt,gt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?ig(n,a,d):(at(gt,gt.current&1),n=xs(n,a,d),n!==null?n.sibling:null);at(gt,gt.current&1);break;case 19:if(f=(d&a.childLanes)!==0,(n.flags&128)!==0){if(f)return og(n,a,d);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),at(gt,gt.current),f)break;return null;case 22:case 23:return a.lanes=0,eg(n,a,d)}return xs(n,a,d)}var lg,au,cg,dg;lg=function(n,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},au=function(){},cg=function(n,a,d,f){var x=n.memoizedProps;if(x!==f){n=a.stateNode,_n(Xr.current);var v=null;switch(d){case"input":x=O(n,x),f=O(n,f),v=[];break;case"select":x=ae({},x,{value:void 0}),f=ae({},f,{value:void 0}),v=[];break;case"textarea":x=Ie(n,x),f=Ie(n,f),v=[];break;default:typeof x.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=Xo)}Ji(d,f);var S;d=null;for(re in x)if(!f.hasOwnProperty(re)&&x.hasOwnProperty(re)&&x[re]!=null)if(re==="style"){var L=x[re];for(S in L)L.hasOwnProperty(S)&&(d||(d={}),d[S]="")}else re!=="dangerouslySetInnerHTML"&&re!=="children"&&re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(o.hasOwnProperty(re)?v||(v=[]):(v=v||[]).push(re,null));for(re in f){var U=f[re];if(L=x?.[re],f.hasOwnProperty(re)&&U!==L&&(U!=null||L!=null))if(re==="style")if(L){for(S in L)!L.hasOwnProperty(S)||U&&U.hasOwnProperty(S)||(d||(d={}),d[S]="");for(S in U)U.hasOwnProperty(S)&&L[S]!==U[S]&&(d||(d={}),d[S]=U[S])}else d||(v||(v=[]),v.push(re,d)),d=U;else re==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,L=L?L.__html:void 0,U!=null&&L!==U&&(v=v||[]).push(re,U)):re==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(re,""+U):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&(o.hasOwnProperty(re)?(U!=null&&re==="onScroll"&&dt("scroll",n),v||L===U||(v=[])):(v=v||[]).push(re,U))}d&&(v=v||[]).push("style",d);var re=v;(a.updateQueue=re)&&(a.flags|=4)}},dg=function(n,a,d,f){d!==f&&(a.flags|=4)};function Ta(n,a){if(!pt)switch(n.tailMode){case"hidden":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?n.tail=null:d.sibling=null;break;case"collapsed":d=n.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Bt(n){var a=n.alternate!==null&&n.alternate.child===n.child,d=0,f=0;if(a)for(var x=n.child;x!==null;)d|=x.lanes|x.childLanes,f|=x.subtreeFlags&14680064,f|=x.flags&14680064,x.return=n,x=x.sibling;else for(x=n.child;x!==null;)d|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=n,x=x.sibling;return n.subtreeFlags|=f,n.childLanes=d,a}function $_(n,a,d){var f=a.pendingProps;switch(kd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(a),null;case 1:return sr(a.type)&&tl(),Bt(a),null;case 3:return f=a.stateNode,hi(),ut(rr),ut(Ft),Bd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(al(a)?a.flags|=4:n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,$r!==null&&(yu($r),$r=null))),au(n,a),Bt(a),null;case 5:Fd(a);var x=_n(Ca.current);if(d=a.type,n!==null&&a.stateNode!=null)cg(n,a,d,f,x),n.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(r(166));return Bt(a),null}if(n=_n(Xr.current),al(a)){f=a.stateNode,d=a.type;var v=a.memoizedProps;switch(f[Jr]=a,f[ba]=v,n=(a.mode&1)!==0,d){case"dialog":dt("cancel",f),dt("close",f);break;case"iframe":case"object":case"embed":dt("load",f);break;case"video":case"audio":for(x=0;x<ya.length;x++)dt(ya[x],f);break;case"source":dt("error",f);break;case"img":case"image":case"link":dt("error",f),dt("load",f);break;case"details":dt("toggle",f);break;case"input":he(f,v),dt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},dt("invalid",f);break;case"textarea":rt(f,v),dt("invalid",f)}Ji(d,v),x=null;for(var S in v)if(v.hasOwnProperty(S)){var L=v[S];S==="children"?typeof L=="string"?f.textContent!==L&&(v.suppressHydrationWarning!==!0&&Jo(f.textContent,L,n),x=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(v.suppressHydrationWarning!==!0&&Jo(f.textContent,L,n),x=["children",""+L]):o.hasOwnProperty(S)&&L!=null&&S==="onScroll"&&dt("scroll",f)}switch(d){case"input":ie(f),le(f,v,!0);break;case"textarea":ie(f),Me(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Xo)}f=x,a.updateQueue=f,f!==null&&(a.flags|=4)}else{S=x.nodeType===9?x:x.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=et(d)),n==="http://www.w3.org/1999/xhtml"?d==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(d,{is:f.is}):(n=S.createElement(d),d==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,d),n[Jr]=a,n[ba]=f,lg(n,a,!1,!1),a.stateNode=n;e:{switch(S=Xi(d,f),d){case"dialog":dt("cancel",n),dt("close",n),x=f;break;case"iframe":case"object":case"embed":dt("load",n),x=f;break;case"video":case"audio":for(x=0;x<ya.length;x++)dt(ya[x],n);x=f;break;case"source":dt("error",n),x=f;break;case"img":case"image":case"link":dt("error",n),dt("load",n),x=f;break;case"details":dt("toggle",n),x=f;break;case"input":he(n,f),x=O(n,f),dt("invalid",n);break;case"option":x=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},x=ae({},f,{value:void 0}),dt("invalid",n);break;case"textarea":rt(n,f),x=Ie(n,f),dt("invalid",n);break;default:x=f}Ji(d,x),L=x;for(v in L)if(L.hasOwnProperty(v)){var U=L[v];v==="style"?Ts(n,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&dr(n,U)):v==="children"?typeof U=="string"?(d!=="textarea"||U!=="")&&tr(n,U):typeof U=="number"&&tr(n,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?U!=null&&v==="onScroll"&&dt("scroll",n):U!=null&&E(n,v,U,S))}switch(d){case"input":ie(n),le(n,f,!1);break;case"textarea":ie(n),Me(n);break;case"option":f.value!=null&&n.setAttribute("value",""+Ne(f.value));break;case"select":n.multiple=!!f.multiple,v=f.value,v!=null?ze(n,!!f.multiple,v,!1):f.defaultValue!=null&&ze(n,!!f.multiple,f.defaultValue,!0);break;default:typeof x.onClick=="function"&&(n.onclick=Xo)}switch(d){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Bt(a),null;case 6:if(n&&a.stateNode!=null)dg(n,a,n.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(d=_n(Ca.current),_n(Xr.current),al(a)){if(f=a.stateNode,d=a.memoizedProps,f[Jr]=a,(v=f.nodeValue!==d)&&(n=fr,n!==null))switch(n.tag){case 3:Jo(f.nodeValue,d,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Jo(f.nodeValue,d,(n.mode&1)!==0)}v&&(a.flags|=4)}else f=(d.nodeType===9?d:d.ownerDocument).createTextNode(f),f[Jr]=a,a.stateNode=f}return Bt(a),null;case 13:if(ut(gt),f=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(pt&&hr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)fp(),di(),a.flags|=98560,v=!1;else if(v=al(a),f!==null&&f.dehydrated!==null){if(n===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Jr]=a}else di(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),v=!1}else $r!==null&&(yu($r),$r=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(n===null||(gt.current&1)!==0?Pt===0&&(Pt=3):bu())),a.updateQueue!==null&&(a.flags|=4),Bt(a),null);case 4:return hi(),au(n,a),n===null&&xa(a.stateNode.containerInfo),Bt(a),null;case 10:return Dd(a.type._context),Bt(a),null;case 17:return sr(a.type)&&tl(),Bt(a),null;case 19:if(ut(gt),v=a.memoizedState,v===null)return Bt(a),null;if(f=(a.flags&128)!==0,S=v.rendering,S===null)if(f)Ta(v,!1);else{if(Pt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(S=ml(n),S!==null){for(a.flags|=128,Ta(v,!1),f=S.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=d,d=a.child;d!==null;)v=d,n=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,n=S.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),d=d.sibling;return at(gt,gt.current&1|2),a.child}n=n.sibling}v.tail!==null&&bt()>xi&&(a.flags|=128,f=!0,Ta(v,!1),a.lanes=4194304)}else{if(!f)if(n=ml(S),n!==null){if(a.flags|=128,f=!0,d=n.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Ta(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!pt)return Bt(a),null}else 2*bt()-v.renderingStartTime>xi&&d!==1073741824&&(a.flags|=128,f=!0,Ta(v,!1),a.lanes=4194304);v.isBackwards?(S.sibling=a.child,a.child=S):(d=v.last,d!==null?d.sibling=S:a.child=S,v.last=S)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=bt(),a.sibling=null,d=gt.current,at(gt,f?d&1|2:d&1),a):(Bt(a),null);case 22:case 23:return vu(),f=a.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(pr&1073741824)!==0&&(Bt(a),a.subtreeFlags&6&&(a.flags|=8192)):Bt(a),null;case 24:return null;case 25:return null}throw Error(r(156,a.tag))}function F_(n,a){switch(kd(a),a.tag){case 1:return sr(a.type)&&tl(),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return hi(),ut(rr),ut(Ft),Bd(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 5:return Fd(a),null;case 13:if(ut(gt),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(r(340));di()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return ut(gt),null;case 4:return hi(),null;case 10:return Dd(a.type._context),null;case 22:case 23:return vu(),null;case 24:return null;default:return null}}var wl=!1,zt=!1,U_=typeof WeakSet=="function"?WeakSet:Set,Te=null;function gi(n,a){var d=n.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(f){vt(n,a,f)}else d.current=null}function ou(n,a,d){try{d()}catch(f){vt(n,a,f)}}var ug=!1;function B_(n,a){if(vd=Bo,n=Vh(),ud(n)){if("selectionStart"in n)var d={start:n.selectionStart,end:n.selectionEnd};else e:{d=(d=n.ownerDocument)&&d.defaultView||window;var f=d.getSelection&&d.getSelection();if(f&&f.rangeCount!==0){d=f.anchorNode;var x=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{d.nodeType,v.nodeType}catch{d=null;break e}var S=0,L=-1,U=-1,re=0,pe=0,ge=n,fe=null;t:for(;;){for(var ke;ge!==d||x!==0&&ge.nodeType!==3||(L=S+x),ge!==v||f!==0&&ge.nodeType!==3||(U=S+f),ge.nodeType===3&&(S+=ge.nodeValue.length),(ke=ge.firstChild)!==null;)fe=ge,ge=ke;for(;;){if(ge===n)break t;if(fe===d&&++re===x&&(L=S),fe===v&&++pe===f&&(U=S),(ke=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=ke}d=L===-1||U===-1?null:{start:L,end:U}}else d=null}d=d||{start:0,end:0}}else d=null;for(bd={focusedElem:n,selectionRange:d},Bo=!1,Te=a;Te!==null;)if(a=Te,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,Te=n;else for(;Te!==null;){a=Te;try{var Ae=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Re=Ae.memoizedProps,wt=Ae.memoizedState,K=a.stateNode,q=K.getSnapshotBeforeUpdate(a.elementType===a.type?Re:Fr(a.type,Re),wt);K.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var Z=a.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ve){vt(a,a.return,ve)}if(n=a.sibling,n!==null){n.return=a.return,Te=n;break}Te=a.return}return Ae=ug,ug=!1,Ae}function Aa(n,a,d){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&n)===n){var v=x.destroy;x.destroy=void 0,v!==void 0&&ou(a,d,v)}x=x.next}while(x!==f)}}function jl(n,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&n)===n){var f=d.create;d.destroy=f()}d=d.next}while(d!==a)}}function lu(n){var a=n.ref;if(a!==null){var d=n.stateNode;switch(n.tag){case 5:n=d;break;default:n=d}typeof a=="function"?a(n):a.current=n}}function mg(n){var a=n.alternate;a!==null&&(n.alternate=null,mg(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&(delete a[Jr],delete a[ba],delete a[Nd],delete a[__],delete a[N_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function fg(n){return n.tag===5||n.tag===3||n.tag===4}function hg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function cu(n,a,d){var f=n.tag;if(f===5||f===6)n=n.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(n,a):d.insertBefore(n,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(n,d)):(a=d,a.appendChild(n)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Xo));else if(f!==4&&(n=n.child,n!==null))for(cu(n,a,d),n=n.sibling;n!==null;)cu(n,a,d),n=n.sibling}function du(n,a,d){var f=n.tag;if(f===5||f===6)n=n.stateNode,a?d.insertBefore(n,a):d.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(du(n,a,d),n=n.sibling;n!==null;)du(n,a,d),n=n.sibling}var It=null,Ur=!1;function Vs(n,a,d){for(d=d.child;d!==null;)pg(n,a,d),d=d.sibling}function pg(n,a,d){if(Zr&&typeof Zr.onCommitFiberUnmount=="function")try{Zr.onCommitFiberUnmount(Mo,d)}catch{}switch(d.tag){case 5:zt||gi(d,a);case 6:var f=It,x=Ur;It=null,Vs(n,a,d),It=f,Ur=x,It!==null&&(Ur?(n=It,d=d.stateNode,n.nodeType===8?n.parentNode.removeChild(d):n.removeChild(d)):It.removeChild(d.stateNode));break;case 18:It!==null&&(Ur?(n=It,d=d.stateNode,n.nodeType===8?_d(n.parentNode,d):n.nodeType===1&&_d(n,d),ca(n)):_d(It,d.stateNode));break;case 4:f=It,x=Ur,It=d.stateNode.containerInfo,Ur=!0,Vs(n,a,d),It=f,Ur=x;break;case 0:case 11:case 14:case 15:if(!zt&&(f=d.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){x=f=f.next;do{var v=x,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&ou(d,a,S),x=x.next}while(x!==f)}Vs(n,a,d);break;case 1:if(!zt&&(gi(d,a),f=d.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=d.memoizedProps,f.state=d.memoizedState,f.componentWillUnmount()}catch(L){vt(d,a,L)}Vs(n,a,d);break;case 21:Vs(n,a,d);break;case 22:d.mode&1?(zt=(f=zt)||d.memoizedState!==null,Vs(n,a,d),zt=f):Vs(n,a,d);break;default:Vs(n,a,d)}}function gg(n){var a=n.updateQueue;if(a!==null){n.updateQueue=null;var d=n.stateNode;d===null&&(d=n.stateNode=new U_),a.forEach(function(f){var x=Q_.bind(null,n,f);d.has(f)||(d.add(f),f.then(x,x))})}}function Br(n,a){var d=a.deletions;if(d!==null)for(var f=0;f<d.length;f++){var x=d[f];try{var v=n,S=a,L=S;e:for(;L!==null;){switch(L.tag){case 5:It=L.stateNode,Ur=!1;break e;case 3:It=L.stateNode.containerInfo,Ur=!0;break e;case 4:It=L.stateNode.containerInfo,Ur=!0;break e}L=L.return}if(It===null)throw Error(r(160));pg(v,S,x),It=null,Ur=!1;var U=x.alternate;U!==null&&(U.return=null),x.return=null}catch(re){vt(x,a,re)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)yg(a,n),a=a.sibling}function yg(n,a){var d=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Br(a,n),ts(n),f&4){try{Aa(3,n,n.return),jl(3,n)}catch(Re){vt(n,n.return,Re)}try{Aa(5,n,n.return)}catch(Re){vt(n,n.return,Re)}}break;case 1:Br(a,n),ts(n),f&512&&d!==null&&gi(d,d.return);break;case 5:if(Br(a,n),ts(n),f&512&&d!==null&&gi(d,d.return),n.flags&32){var x=n.stateNode;try{tr(x,"")}catch(Re){vt(n,n.return,Re)}}if(f&4&&(x=n.stateNode,x!=null)){var v=n.memoizedProps,S=d!==null?d.memoizedProps:v,L=n.type,U=n.updateQueue;if(n.updateQueue=null,U!==null)try{L==="input"&&v.type==="radio"&&v.name!=null&&B(x,v),Xi(L,S);var re=Xi(L,v);for(S=0;S<U.length;S+=2){var pe=U[S],ge=U[S+1];pe==="style"?Ts(x,ge):pe==="dangerouslySetInnerHTML"?dr(x,ge):pe==="children"?tr(x,ge):E(x,pe,ge,re)}switch(L){case"input":G(x,v);break;case"textarea":J(x,v);break;case"select":var fe=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!v.multiple;var ke=v.value;ke!=null?ze(x,!!v.multiple,ke,!1):fe!==!!v.multiple&&(v.defaultValue!=null?ze(x,!!v.multiple,v.defaultValue,!0):ze(x,!!v.multiple,v.multiple?[]:"",!1))}x[ba]=v}catch(Re){vt(n,n.return,Re)}}break;case 6:if(Br(a,n),ts(n),f&4){if(n.stateNode===null)throw Error(r(162));x=n.stateNode,v=n.memoizedProps;try{x.nodeValue=v}catch(Re){vt(n,n.return,Re)}}break;case 3:if(Br(a,n),ts(n),f&4&&d!==null&&d.memoizedState.isDehydrated)try{ca(a.containerInfo)}catch(Re){vt(n,n.return,Re)}break;case 4:Br(a,n),ts(n);break;case 13:Br(a,n),ts(n),x=n.child,x.flags&8192&&(v=x.memoizedState!==null,x.stateNode.isHidden=v,!v||x.alternate!==null&&x.alternate.memoizedState!==null||(fu=bt())),f&4&&gg(n);break;case 22:if(pe=d!==null&&d.memoizedState!==null,n.mode&1?(zt=(re=zt)||pe,Br(a,n),zt=re):Br(a,n),ts(n),f&8192){if(re=n.memoizedState!==null,(n.stateNode.isHidden=re)&&!pe&&(n.mode&1)!==0)for(Te=n,pe=n.child;pe!==null;){for(ge=Te=pe;Te!==null;){switch(fe=Te,ke=fe.child,fe.tag){case 0:case 11:case 14:case 15:Aa(4,fe,fe.return);break;case 1:gi(fe,fe.return);var Ae=fe.stateNode;if(typeof Ae.componentWillUnmount=="function"){f=fe,d=fe.return;try{a=f,Ae.props=a.memoizedProps,Ae.state=a.memoizedState,Ae.componentWillUnmount()}catch(Re){vt(f,d,Re)}}break;case 5:gi(fe,fe.return);break;case 22:if(fe.memoizedState!==null){bg(ge);continue}}ke!==null?(ke.return=fe,Te=ke):bg(ge)}pe=pe.sibling}e:for(pe=null,ge=n;;){if(ge.tag===5){if(pe===null){pe=ge;try{x=ge.stateNode,re?(v=x.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(L=ge.stateNode,U=ge.memoizedProps.style,S=U!=null&&U.hasOwnProperty("display")?U.display:null,L.style.display=Ps("display",S))}catch(Re){vt(n,n.return,Re)}}}else if(ge.tag===6){if(pe===null)try{ge.stateNode.nodeValue=re?"":ge.memoizedProps}catch(Re){vt(n,n.return,Re)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===n)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===n)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===n)break e;pe===ge&&(pe=null),ge=ge.return}pe===ge&&(pe=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:Br(a,n),ts(n),f&4&&gg(n);break;case 21:break;default:Br(a,n),ts(n)}}function ts(n){var a=n.flags;if(a&2){try{e:{for(var d=n.return;d!==null;){if(fg(d)){var f=d;break e}d=d.return}throw Error(r(160))}switch(f.tag){case 5:var x=f.stateNode;f.flags&32&&(tr(x,""),f.flags&=-33);var v=hg(n);du(n,v,x);break;case 3:case 4:var S=f.stateNode.containerInfo,L=hg(n);cu(n,L,S);break;default:throw Error(r(161))}}catch(U){vt(n,n.return,U)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function z_(n,a,d){Te=n,xg(n)}function xg(n,a,d){for(var f=(n.mode&1)!==0;Te!==null;){var x=Te,v=x.child;if(x.tag===22&&f){var S=x.memoizedState!==null||wl;if(!S){var L=x.alternate,U=L!==null&&L.memoizedState!==null||zt;L=wl;var re=zt;if(wl=S,(zt=U)&&!re)for(Te=x;Te!==null;)S=Te,U=S.child,S.tag===22&&S.memoizedState!==null?wg(x):U!==null?(U.return=S,Te=U):wg(x);for(;v!==null;)Te=v,xg(v),v=v.sibling;Te=x,wl=L,zt=re}vg(n)}else(x.subtreeFlags&8772)!==0&&v!==null?(v.return=x,Te=v):vg(n)}}function vg(n){for(;Te!==null;){var a=Te;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:zt||jl(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!zt)if(d===null)f.componentDidMount();else{var x=a.elementType===a.type?d.memoizedProps:Fr(a.type,d.memoizedProps);f.componentDidUpdate(x,d.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&bp(a,v,f);break;case 3:var S=a.updateQueue;if(S!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}bp(a,S,d)}break;case 5:var L=a.stateNode;if(d===null&&a.flags&4){d=L;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&d.focus();break;case"img":U.src&&(d.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var re=a.alternate;if(re!==null){var pe=re.memoizedState;if(pe!==null){var ge=pe.dehydrated;ge!==null&&ca(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}zt||a.flags&512&&lu(a)}catch(fe){vt(a,a.return,fe)}}if(a===n){Te=null;break}if(d=a.sibling,d!==null){d.return=a.return,Te=d;break}Te=a.return}}function bg(n){for(;Te!==null;){var a=Te;if(a===n){Te=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Te=d;break}Te=a.return}}function wg(n){for(;Te!==null;){var a=Te;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{jl(4,a)}catch(U){vt(a,d,U)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var x=a.return;try{f.componentDidMount()}catch(U){vt(a,x,U)}}var v=a.return;try{lu(a)}catch(U){vt(a,v,U)}break;case 5:var S=a.return;try{lu(a)}catch(U){vt(a,S,U)}}}catch(U){vt(a,a.return,U)}if(a===n){Te=null;break}var L=a.sibling;if(L!==null){L.return=a.return,Te=L;break}Te=a.return}}var V_=Math.ceil,_l=N.ReactCurrentDispatcher,uu=N.ReactCurrentOwner,Sr=N.ReactCurrentBatchConfig,Ze=0,Ot=null,_t=null,Lt=0,pr=0,yi=$s(0),Pt=0,Ra=null,Cn=0,Nl=0,mu=0,Oa=null,ir=null,fu=0,xi=1/0,vs=null,Cl=!1,hu=null,qs=null,Sl=!1,Ws=null,El=0,Da=0,pu=null,kl=-1,Pl=0;function Ht(){return(Ze&6)!==0?bt():kl!==-1?kl:kl=bt()}function Hs(n){return(n.mode&1)===0?1:(Ze&2)!==0&&Lt!==0?Lt&-Lt:S_.transition!==null?(Pl===0&&(Pl=hh()),Pl):(n=st,n!==0||(n=window.event,n=n===void 0?16:_h(n.type)),n)}function zr(n,a,d,f){if(50<Da)throw Da=0,pu=null,Error(r(185));na(n,d,f),((Ze&2)===0||n!==Ot)&&(n===Ot&&((Ze&2)===0&&(Nl|=d),Pt===4&&Gs(n,Lt)),ar(n,f),d===1&&Ze===0&&(a.mode&1)===0&&(xi=bt()+500,sl&&Us()))}function ar(n,a){var d=n.callbackNode;Sj(n,a);var f=$o(n,n===Ot?Lt:0);if(f===0)d!==null&&uh(d),n.callbackNode=null,n.callbackPriority=0;else if(a=f&-f,n.callbackPriority!==a){if(d!=null&&uh(d),a===1)n.tag===0?C_(_g.bind(null,n)):lp(_g.bind(null,n)),w_(function(){(Ze&6)===0&&Us()}),d=null;else{switch(ph(f)){case 1:d=Kc;break;case 4:d=mh;break;case 16:d=Do;break;case 536870912:d=fh;break;default:d=Do}d=Ag(d,jg.bind(null,n))}n.callbackPriority=a,n.callbackNode=d}}function jg(n,a){if(kl=-1,Pl=0,(Ze&6)!==0)throw Error(r(327));var d=n.callbackNode;if(vi()&&n.callbackNode!==d)return null;var f=$o(n,n===Ot?Lt:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||a)a=Tl(n,f);else{a=f;var x=Ze;Ze|=2;var v=Cg();(Ot!==n||Lt!==a)&&(vs=null,xi=bt()+500,En(n,a));do try{H_();break}catch(L){Ng(n,L)}while(!0);Od(),_l.current=v,Ze=x,_t!==null?a=0:(Ot=null,Lt=0,a=Pt)}if(a!==0){if(a===2&&(x=Yc(n),x!==0&&(f=x,a=gu(n,x))),a===1)throw d=Ra,En(n,0),Gs(n,f),ar(n,bt()),d;if(a===6)Gs(n,f);else{if(x=n.current.alternate,(f&30)===0&&!q_(x)&&(a=Tl(n,f),a===2&&(v=Yc(n),v!==0&&(f=v,a=gu(n,v))),a===1))throw d=Ra,En(n,0),Gs(n,f),ar(n,bt()),d;switch(n.finishedWork=x,n.finishedLanes=f,a){case 0:case 1:throw Error(r(345));case 2:kn(n,ir,vs);break;case 3:if(Gs(n,f),(f&130023424)===f&&(a=fu+500-bt(),10<a)){if($o(n,0)!==0)break;if(x=n.suspendedLanes,(x&f)!==f){Ht(),n.pingedLanes|=n.suspendedLanes&x;break}n.timeoutHandle=jd(kn.bind(null,n,ir,vs),a);break}kn(n,ir,vs);break;case 4:if(Gs(n,f),(f&4194240)===f)break;for(a=n.eventTimes,x=-1;0<f;){var S=31-Ir(f);v=1<<S,S=a[S],S>x&&(x=S),f&=~v}if(f=x,f=bt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*V_(f/1960))-f,10<f){n.timeoutHandle=jd(kn.bind(null,n,ir,vs),f);break}kn(n,ir,vs);break;case 5:kn(n,ir,vs);break;default:throw Error(r(329))}}}return ar(n,bt()),n.callbackNode===d?jg.bind(null,n):null}function gu(n,a){var d=Oa;return n.current.memoizedState.isDehydrated&&(En(n,a).flags|=256),n=Tl(n,a),n!==2&&(a=ir,ir=d,a!==null&&yu(a)),n}function yu(n){ir===null?ir=n:ir.push.apply(ir,n)}function q_(n){for(var a=n;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var f=0;f<d.length;f++){var x=d[f],v=x.getSnapshot;x=x.value;try{if(!Lr(v(),x))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Gs(n,a){for(a&=~mu,a&=~Nl,n.suspendedLanes|=a,n.pingedLanes&=~a,n=n.expirationTimes;0<a;){var d=31-Ir(a),f=1<<d;n[d]=-1,a&=~f}}function _g(n){if((Ze&6)!==0)throw Error(r(327));vi();var a=$o(n,0);if((a&1)===0)return ar(n,bt()),null;var d=Tl(n,a);if(n.tag!==0&&d===2){var f=Yc(n);f!==0&&(a=f,d=gu(n,f))}if(d===1)throw d=Ra,En(n,0),Gs(n,a),ar(n,bt()),d;if(d===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=a,kn(n,ir,vs),ar(n,bt()),null}function xu(n,a){var d=Ze;Ze|=1;try{return n(a)}finally{Ze=d,Ze===0&&(xi=bt()+500,sl&&Us())}}function Sn(n){Ws!==null&&Ws.tag===0&&(Ze&6)===0&&vi();var a=Ze;Ze|=1;var d=Sr.transition,f=st;try{if(Sr.transition=null,st=1,n)return n()}finally{st=f,Sr.transition=d,Ze=a,(Ze&6)===0&&Us()}}function vu(){pr=yi.current,ut(yi)}function En(n,a){n.finishedWork=null,n.finishedLanes=0;var d=n.timeoutHandle;if(d!==-1&&(n.timeoutHandle=-1,b_(d)),_t!==null)for(d=_t.return;d!==null;){var f=d;switch(kd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&tl();break;case 3:hi(),ut(rr),ut(Ft),Bd();break;case 5:Fd(f);break;case 4:hi();break;case 13:ut(gt);break;case 19:ut(gt);break;case 10:Dd(f.type._context);break;case 22:case 23:vu()}d=d.return}if(Ot=n,_t=n=Ks(n.current,null),Lt=pr=a,Pt=0,Ra=null,mu=Nl=Cn=0,ir=Oa=null,jn!==null){for(a=0;a<jn.length;a++)if(d=jn[a],f=d.interleaved,f!==null){d.interleaved=null;var x=f.next,v=d.pending;if(v!==null){var S=v.next;v.next=x,f.next=S}d.pending=f}jn=null}return n}function Ng(n,a){do{var d=_t;try{if(Od(),fl.current=yl,hl){for(var f=yt.memoizedState;f!==null;){var x=f.queue;x!==null&&(x.pending=null),f=f.next}hl=!1}if(Nn=0,Rt=kt=yt=null,Sa=!1,Ea=0,uu.current=null,d===null||d.return===null){Pt=1,Ra=a,_t=null;break}e:{var v=n,S=d.return,L=d,U=a;if(a=Lt,L.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var re=U,pe=L,ge=pe.tag;if((pe.mode&1)===0&&(ge===0||ge===11||ge===15)){var fe=pe.alternate;fe?(pe.updateQueue=fe.updateQueue,pe.memoizedState=fe.memoizedState,pe.lanes=fe.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var ke=Yp(S);if(ke!==null){ke.flags&=-257,Qp(ke,S,L,v,a),ke.mode&1&&Kp(v,re,a),a=ke,U=re;var Ae=a.updateQueue;if(Ae===null){var Re=new Set;Re.add(U),a.updateQueue=Re}else Ae.add(U);break e}else{if((a&1)===0){Kp(v,re,a),bu();break e}U=Error(r(426))}}else if(pt&&L.mode&1){var wt=Yp(S);if(wt!==null){(wt.flags&65536)===0&&(wt.flags|=256),Qp(wt,S,L,v,a),Ad(pi(U,L));break e}}v=U=pi(U,L),Pt!==4&&(Pt=2),Oa===null?Oa=[v]:Oa.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var K=Hp(v,U,a);vp(v,K);break e;case 1:L=U;var q=v.type,Z=v.stateNode;if((v.flags&128)===0&&(typeof q.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(qs===null||!qs.has(Z)))){v.flags|=65536,a&=-a,v.lanes|=a;var ve=Gp(v,L,a);vp(v,ve);break e}}v=v.return}while(v!==null)}Eg(d)}catch(Oe){a=Oe,_t===d&&d!==null&&(_t=d=d.return);continue}break}while(!0)}function Cg(){var n=_l.current;return _l.current=yl,n===null?yl:n}function bu(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Ot===null||(Cn&268435455)===0&&(Nl&268435455)===0||Gs(Ot,Lt)}function Tl(n,a){var d=Ze;Ze|=2;var f=Cg();(Ot!==n||Lt!==a)&&(vs=null,En(n,a));do try{W_();break}catch(x){Ng(n,x)}while(!0);if(Od(),Ze=d,_l.current=f,_t!==null)throw Error(r(261));return Ot=null,Lt=0,Pt}function W_(){for(;_t!==null;)Sg(_t)}function H_(){for(;_t!==null&&!yj();)Sg(_t)}function Sg(n){var a=Tg(n.alternate,n,pr);n.memoizedProps=n.pendingProps,a===null?Eg(n):_t=a,uu.current=null}function Eg(n){var a=n;do{var d=a.alternate;if(n=a.return,(a.flags&32768)===0){if(d=$_(d,a,pr),d!==null){_t=d;return}}else{if(d=F_(d,a),d!==null){d.flags&=32767,_t=d;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Pt=6,_t=null;return}}if(a=a.sibling,a!==null){_t=a;return}_t=a=n}while(a!==null);Pt===0&&(Pt=5)}function kn(n,a,d){var f=st,x=Sr.transition;try{Sr.transition=null,st=1,G_(n,a,d,f)}finally{Sr.transition=x,st=f}return null}function G_(n,a,d,f){do vi();while(Ws!==null);if((Ze&6)!==0)throw Error(r(327));d=n.finishedWork;var x=n.finishedLanes;if(d===null)return null;if(n.finishedWork=null,n.finishedLanes=0,d===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var v=d.lanes|d.childLanes;if(Ej(n,v),n===Ot&&(_t=Ot=null,Lt=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Sl||(Sl=!0,Ag(Do,function(){return vi(),null})),v=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||v){v=Sr.transition,Sr.transition=null;var S=st;st=1;var L=Ze;Ze|=4,uu.current=null,B_(n,d),yg(d,n),f_(bd),Bo=!!vd,bd=vd=null,n.current=d,z_(d),xj(),Ze=L,st=S,Sr.transition=v}else n.current=d;if(Sl&&(Sl=!1,Ws=n,El=x),v=n.pendingLanes,v===0&&(qs=null),wj(d.stateNode),ar(n,bt()),a!==null)for(f=n.onRecoverableError,d=0;d<a.length;d++)x=a[d],f(x.value,{componentStack:x.stack,digest:x.digest});if(Cl)throw Cl=!1,n=hu,hu=null,n;return(El&1)!==0&&n.tag!==0&&vi(),v=n.pendingLanes,(v&1)!==0?n===pu?Da++:(Da=0,pu=n):Da=0,Us(),null}function vi(){if(Ws!==null){var n=ph(El),a=Sr.transition,d=st;try{if(Sr.transition=null,st=16>n?16:n,Ws===null)var f=!1;else{if(n=Ws,Ws=null,El=0,(Ze&6)!==0)throw Error(r(331));var x=Ze;for(Ze|=4,Te=n.current;Te!==null;){var v=Te,S=v.child;if((Te.flags&16)!==0){var L=v.deletions;if(L!==null){for(var U=0;U<L.length;U++){var re=L[U];for(Te=re;Te!==null;){var pe=Te;switch(pe.tag){case 0:case 11:case 15:Aa(8,pe,v)}var ge=pe.child;if(ge!==null)ge.return=pe,Te=ge;else for(;Te!==null;){pe=Te;var fe=pe.sibling,ke=pe.return;if(mg(pe),pe===re){Te=null;break}if(fe!==null){fe.return=ke,Te=fe;break}Te=ke}}}var Ae=v.alternate;if(Ae!==null){var Re=Ae.child;if(Re!==null){Ae.child=null;do{var wt=Re.sibling;Re.sibling=null,Re=wt}while(Re!==null)}}Te=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,Te=S;else e:for(;Te!==null;){if(v=Te,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Aa(9,v,v.return)}var K=v.sibling;if(K!==null){K.return=v.return,Te=K;break e}Te=v.return}}var q=n.current;for(Te=q;Te!==null;){S=Te;var Z=S.child;if((S.subtreeFlags&2064)!==0&&Z!==null)Z.return=S,Te=Z;else e:for(S=q;Te!==null;){if(L=Te,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:jl(9,L)}}catch(Oe){vt(L,L.return,Oe)}if(L===S){Te=null;break e}var ve=L.sibling;if(ve!==null){ve.return=L.return,Te=ve;break e}Te=L.return}}if(Ze=x,Us(),Zr&&typeof Zr.onPostCommitFiberRoot=="function")try{Zr.onPostCommitFiberRoot(Mo,n)}catch{}f=!0}return f}finally{st=d,Sr.transition=a}}return!1}function kg(n,a,d){a=pi(d,a),a=Hp(n,a,1),n=zs(n,a,1),a=Ht(),n!==null&&(na(n,1,a),ar(n,a))}function vt(n,a,d){if(n.tag===3)kg(n,n,d);else for(;a!==null;){if(a.tag===3){kg(a,n,d);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(qs===null||!qs.has(f))){n=pi(d,n),n=Gp(a,n,1),a=zs(a,n,1),n=Ht(),a!==null&&(na(a,1,n),ar(a,n));break}}a=a.return}}function K_(n,a,d){var f=n.pingCache;f!==null&&f.delete(a),a=Ht(),n.pingedLanes|=n.suspendedLanes&d,Ot===n&&(Lt&d)===d&&(Pt===4||Pt===3&&(Lt&130023424)===Lt&&500>bt()-fu?En(n,0):mu|=d),ar(n,a)}function Pg(n,a){a===0&&((n.mode&1)===0?a=1:(a=Lo,Lo<<=1,(Lo&130023424)===0&&(Lo=4194304)));var d=Ht();n=gs(n,a),n!==null&&(na(n,a,d),ar(n,d))}function Y_(n){var a=n.memoizedState,d=0;a!==null&&(d=a.retryLane),Pg(n,d)}function Q_(n,a){var d=0;switch(n.tag){case 13:var f=n.stateNode,x=n.memoizedState;x!==null&&(d=x.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(a),Pg(n,d)}var Tg;Tg=function(n,a,d){if(n!==null)if(n.memoizedProps!==a.pendingProps||rr.current)nr=!0;else{if((n.lanes&d)===0&&(a.flags&128)===0)return nr=!1,L_(n,a,d);nr=(n.flags&131072)!==0}else nr=!1,pt&&(a.flags&1048576)!==0&&cp(a,il,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;bl(n,a),n=a.pendingProps;var x=oi(a,Ft.current);fi(a,d),x=qd(null,a,f,n,x,d);var v=Wd();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,sr(f)?(v=!0,rl(a)):v=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Ld(a),x.updater=xl,a.stateNode=x,x._reactInternals=a,Zd(a,f,n,d),a=tu(null,a,f,!0,v,d)):(a.tag=0,pt&&v&&Ed(a),Wt(null,a,x,d),a=a.child),a;case 16:f=a.elementType;e:{switch(bl(n,a),n=a.pendingProps,x=f._init,f=x(f._payload),a.type=f,x=a.tag=J_(f),n=Fr(f,n),x){case 0:a=eu(null,a,f,n,d);break e;case 1:a=rg(null,a,f,n,d);break e;case 11:a=Zp(null,a,f,n,d);break e;case 14:a=Jp(null,a,f,Fr(f.type,n),d);break e}throw Error(r(306,f,""))}return a;case 0:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:Fr(f,x),eu(n,a,f,x,d);case 1:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:Fr(f,x),rg(n,a,f,x,d);case 3:e:{if(sg(a),n===null)throw Error(r(387));f=a.pendingProps,v=a.memoizedState,x=v.element,xp(n,a),ul(a,f,null,d);var S=a.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){x=pi(Error(r(423)),a),a=ng(n,a,f,d,x);break e}else if(f!==x){x=pi(Error(r(424)),a),a=ng(n,a,f,d,x);break e}else for(hr=Ls(a.stateNode.containerInfo.firstChild),fr=a,pt=!0,$r=null,d=gp(a,null,f,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(di(),f===x){a=xs(n,a,d);break e}Wt(n,a,f,d)}a=a.child}return a;case 5:return wp(a),n===null&&Td(a),f=a.type,x=a.pendingProps,v=n!==null?n.memoizedProps:null,S=x.children,wd(f,x)?S=null:v!==null&&wd(f,v)&&(a.flags|=32),tg(n,a),Wt(n,a,S,d),a.child;case 6:return n===null&&Td(a),null;case 13:return ig(n,a,d);case 4:return $d(a,a.stateNode.containerInfo),f=a.pendingProps,n===null?a.child=ui(a,null,f,d):Wt(n,a,f,d),a.child;case 11:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:Fr(f,x),Zp(n,a,f,x,d);case 7:return Wt(n,a,a.pendingProps,d),a.child;case 8:return Wt(n,a,a.pendingProps.children,d),a.child;case 12:return Wt(n,a,a.pendingProps.children,d),a.child;case 10:e:{if(f=a.type._context,x=a.pendingProps,v=a.memoizedProps,S=x.value,at(ll,f._currentValue),f._currentValue=S,v!==null)if(Lr(v.value,S)){if(v.children===x.children&&!rr.current){a=xs(n,a,d);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var L=v.dependencies;if(L!==null){S=v.child;for(var U=L.firstContext;U!==null;){if(U.context===f){if(v.tag===1){U=ys(-1,d&-d),U.tag=2;var re=v.updateQueue;if(re!==null){re=re.shared;var pe=re.pending;pe===null?U.next=U:(U.next=pe.next,pe.next=U),re.pending=U}}v.lanes|=d,U=v.alternate,U!==null&&(U.lanes|=d),Md(v.return,d,a),L.lanes|=d;break}U=U.next}}else if(v.tag===10)S=v.type===a.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(r(341));S.lanes|=d,L=S.alternate,L!==null&&(L.lanes|=d),Md(S,d,a),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===a){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Wt(n,a,x.children,d),a=a.child}return a;case 9:return x=a.type,f=a.pendingProps.children,fi(a,d),x=Nr(x),f=f(x),a.flags|=1,Wt(n,a,f,d),a.child;case 14:return f=a.type,x=Fr(f,a.pendingProps),x=Fr(f.type,x),Jp(n,a,f,x,d);case 15:return Xp(n,a,a.type,a.pendingProps,d);case 17:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:Fr(f,x),bl(n,a),a.tag=1,sr(f)?(n=!0,rl(a)):n=!1,fi(a,d),qp(a,f,x),Zd(a,f,x,d),tu(null,a,f,!0,n,d);case 19:return og(n,a,d);case 22:return eg(n,a,d)}throw Error(r(156,a.tag))};function Ag(n,a){return dh(n,a)}function Z_(n,a,d,f){this.tag=n,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(n,a,d,f){return new Z_(n,a,d,f)}function wu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function J_(n){if(typeof n=="function")return wu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===z)return 11;if(n===ce)return 14}return 2}function Ks(n,a){var d=n.alternate;return d===null?(d=Er(n.tag,a,n.key,n.mode),d.elementType=n.elementType,d.type=n.type,d.stateNode=n.stateNode,d.alternate=n,n.alternate=d):(d.pendingProps=a,d.type=n.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=n.flags&14680064,d.childLanes=n.childLanes,d.lanes=n.lanes,d.child=n.child,d.memoizedProps=n.memoizedProps,d.memoizedState=n.memoizedState,d.updateQueue=n.updateQueue,a=n.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=n.sibling,d.index=n.index,d.ref=n.ref,d}function Al(n,a,d,f,x,v){var S=2;if(f=n,typeof n=="function")wu(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case M:return Pn(d.children,x,v,a);case I:S=8,x|=8;break;case Q:return n=Er(12,d,a,x|2),n.elementType=Q,n.lanes=v,n;case de:return n=Er(13,d,a,x),n.elementType=de,n.lanes=v,n;case ee:return n=Er(19,d,a,x),n.elementType=ee,n.lanes=v,n;case ue:return Rl(d,x,v,a);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:S=10;break e;case be:S=9;break e;case z:S=11;break e;case ce:S=14;break e;case se:S=16,f=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return a=Er(S,d,a,x),a.elementType=n,a.type=f,a.lanes=v,a}function Pn(n,a,d,f){return n=Er(7,n,f,a),n.lanes=d,n}function Rl(n,a,d,f){return n=Er(22,n,f,a),n.elementType=ue,n.lanes=d,n.stateNode={isHidden:!1},n}function ju(n,a,d){return n=Er(6,n,null,a),n.lanes=d,n}function _u(n,a,d){return a=Er(4,n.children!==null?n.children:[],n.key,a),a.lanes=d,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}function X_(n,a,d,f,x){this.tag=a,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qc(0),this.expirationTimes=Qc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qc(0),this.identifierPrefix=f,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Nu(n,a,d,f,x,v,S,L,U){return n=new X_(n,a,d,L,U),a===1?(a=1,v===!0&&(a|=8)):a=0,v=Er(3,null,null,a),n.current=v,v.stateNode=n,v.memoizedState={element:f,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ld(v),n}function eN(n,a,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:f==null?null:""+f,children:n,containerInfo:a,implementation:d}}function Rg(n){if(!n)return Fs;n=n._reactInternals;e:{if(yn(n)!==n||n.tag!==1)throw Error(r(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(sr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(r(171))}if(n.tag===1){var d=n.type;if(sr(d))return ap(n,d,a)}return a}function Og(n,a,d,f,x,v,S,L,U){return n=Nu(d,f,!0,n,x,v,S,L,U),n.context=Rg(null),d=n.current,f=Ht(),x=Hs(d),v=ys(f,x),v.callback=a??null,zs(d,v,x),n.current.lanes=x,na(n,x,f),ar(n,f),n}function Ol(n,a,d,f){var x=a.current,v=Ht(),S=Hs(x);return d=Rg(d),a.context===null?a.context=d:a.pendingContext=d,a=ys(v,S),a.payload={element:n},f=f===void 0?null:f,f!==null&&(a.callback=f),n=zs(x,a,S),n!==null&&(zr(n,x,S,v),dl(n,x,S)),S}function Dl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Dg(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var d=n.retryLane;n.retryLane=d!==0&&d<a?d:a}}function Cu(n,a){Dg(n,a),(n=n.alternate)&&Dg(n,a)}function tN(){return null}var Mg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Su(n){this._internalRoot=n}Ml.prototype.render=Su.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(r(409));Ol(n,a,null,null)},Ml.prototype.unmount=Su.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Sn(function(){Ol(null,n,null,null)}),a[ms]=null}};function Ml(n){this._internalRoot=n}Ml.prototype.unstable_scheduleHydration=function(n){if(n){var a=xh();n={blockedOn:null,target:n,priority:a};for(var d=0;d<Ds.length&&a!==0&&a<Ds[d].priority;d++);Ds.splice(d,0,n),d===0&&wh(n)}};function Eu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Il(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ig(){}function rN(n,a,d,f,x){if(x){if(typeof f=="function"){var v=f;f=function(){var re=Dl(S);v.call(re)}}var S=Og(a,f,n,0,null,!1,!1,"",Ig);return n._reactRootContainer=S,n[ms]=S.current,xa(n.nodeType===8?n.parentNode:n),Sn(),S}for(;x=n.lastChild;)n.removeChild(x);if(typeof f=="function"){var L=f;f=function(){var re=Dl(U);L.call(re)}}var U=Nu(n,0,!1,null,null,!1,!1,"",Ig);return n._reactRootContainer=U,n[ms]=U.current,xa(n.nodeType===8?n.parentNode:n),Sn(function(){Ol(a,U,d,f)}),U}function Ll(n,a,d,f,x){var v=d._reactRootContainer;if(v){var S=v;if(typeof x=="function"){var L=x;x=function(){var U=Dl(S);L.call(U)}}Ol(a,S,n,x)}else S=rN(d,a,n,x,f);return Dl(S)}gh=function(n){switch(n.tag){case 3:var a=n.stateNode;if(a.current.memoizedState.isDehydrated){var d=sa(a.pendingLanes);d!==0&&(Zc(a,d|1),ar(a,bt()),(Ze&6)===0&&(xi=bt()+500,Us()))}break;case 13:Sn(function(){var f=gs(n,1);if(f!==null){var x=Ht();zr(f,n,1,x)}}),Cu(n,1)}},Jc=function(n){if(n.tag===13){var a=gs(n,134217728);if(a!==null){var d=Ht();zr(a,n,134217728,d)}Cu(n,134217728)}},yh=function(n){if(n.tag===13){var a=Hs(n),d=gs(n,a);if(d!==null){var f=Ht();zr(d,n,a,f)}Cu(n,a)}},xh=function(){return st},vh=function(n,a){var d=st;try{return st=n,a()}finally{st=d}},ta=function(n,a,d){switch(a){case"input":if(G(n,d),a=d.name,d.type==="radio"&&a!=null){for(d=n;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var f=d[a];if(f!==n&&f.form===n.form){var x=el(f);if(!x)throw Error(r(90));je(f),G(f,x)}}}break;case"textarea":J(n,d);break;case"select":a=d.value,a!=null&&ze(n,!!d.multiple,a,!1)}},Ao=xu,D=Sn;var sN={usingClientEntryPoint:!1,Events:[wa,ii,el,Po,To,xu]},Ma={findFiberByHostInstance:xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nN={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=lh(n),n===null?null:n.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||tN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{Mo=$l.inject(nN),Zr=$l}catch{}}return or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sN,or.createPortal=function(n,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eu(a))throw Error(r(200));return eN(n,a,null,d)},or.createRoot=function(n,a){if(!Eu(n))throw Error(r(299));var d=!1,f="",x=Mg;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Nu(n,1,!1,null,null,d,!1,f,x),n[ms]=a.current,xa(n.nodeType===8?n.parentNode:n),new Su(a)},or.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=lh(a),n=n===null?null:n.stateNode,n},or.flushSync=function(n){return Sn(n)},or.hydrate=function(n,a,d){if(!Il(a))throw Error(r(200));return Ll(null,n,a,!0,d)},or.hydrateRoot=function(n,a,d){if(!Eu(n))throw Error(r(405));var f=d!=null&&d.hydratedSources||null,x=!1,v="",S=Mg;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),a=Og(a,null,n,1,d??null,x,!1,v,S),n[ms]=a.current,xa(n),f)for(n=0;n<f.length;n++)d=f[n],x=d._getVersion,x=x(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,x]:a.mutableSourceEagerHydrationData.push(d,x);return new Ml(a)},or.render=function(n,a,d){if(!Il(a))throw Error(r(200));return Ll(null,n,a,!1,d)},or.unmountComponentAtNode=function(n){if(!Il(n))throw Error(r(40));return n._reactRootContainer?(Sn(function(){Ll(null,null,n,!1,function(){n._reactRootContainer=null,n[ms]=null})}),!0):!1},or.unstable_batchedUpdates=xu,or.unstable_renderSubtreeIntoContainer=function(n,a,d,f){if(!Il(d))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return Ll(n,a,d,!1,f)},or.version="18.3.1-next-f1338f8080-20240426",or}var qg;function uv(){if(qg)return Tu.exports;qg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tu.exports=fN(),Tu.exports}var Wg;function hN(){if(Wg)return Fl;Wg=1;var t=uv();return Fl.createRoot=t.createRoot,Fl.hydrateRoot=t.hydrateRoot,Fl}var pN=hN();const gN=Hn(pN);var Ou,Hg;function yN(){if(Hg)return Ou;Hg=1;var t=typeof Element<"u",e=typeof Map=="function",r=typeof Set=="function",i=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function o(l,c){if(l===c)return!0;if(l&&c&&typeof l=="object"&&typeof c=="object"){if(l.constructor!==c.constructor)return!1;var u,m,h;if(Array.isArray(l)){if(u=l.length,u!=c.length)return!1;for(m=u;m--!==0;)if(!o(l[m],c[m]))return!1;return!0}var p;if(e&&l instanceof Map&&c instanceof Map){if(l.size!==c.size)return!1;for(p=l.entries();!(m=p.next()).done;)if(!c.has(m.value[0]))return!1;for(p=l.entries();!(m=p.next()).done;)if(!o(m.value[1],c.get(m.value[0])))return!1;return!0}if(r&&l instanceof Set&&c instanceof Set){if(l.size!==c.size)return!1;for(p=l.entries();!(m=p.next()).done;)if(!c.has(m.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(c)){if(u=l.length,u!=c.length)return!1;for(m=u;m--!==0;)if(l[m]!==c[m])return!1;return!0}if(l.constructor===RegExp)return l.source===c.source&&l.flags===c.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof c.valueOf=="function")return l.valueOf()===c.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof c.toString=="function")return l.toString()===c.toString();if(h=Object.keys(l),u=h.length,u!==Object.keys(c).length)return!1;for(m=u;m--!==0;)if(!Object.prototype.hasOwnProperty.call(c,h[m]))return!1;if(t&&l instanceof Element)return!1;for(m=u;m--!==0;)if(!((h[m]==="_owner"||h[m]==="__v"||h[m]==="__o")&&l.$$typeof)&&!o(l[h[m]],c[h[m]]))return!1;return!0}return l!==l&&c!==c}return Ou=function(c,u){try{return o(c,u)}catch(m){if((m.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw m}},Ou}var xN=yN();const vN=Hn(xN);var Du,Gg;function bN(){if(Gg)return Du;Gg=1;var t=function(e,r,i,o,l,c,u,m){if(!e){var h;if(r===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[i,o,l,c,u,m],g=0;h=new Error(r.replace(/%s/g,function(){return p[g++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return Du=t,Du}var wN=bN();const Kg=Hn(wN);var Mu,Yg;function jN(){return Yg||(Yg=1,Mu=function(e,r,i,o){var l=i?i.call(o,e,r):void 0;if(l!==void 0)return!!l;if(e===r)return!0;if(typeof e!="object"||!e||typeof r!="object"||!r)return!1;var c=Object.keys(e),u=Object.keys(r);if(c.length!==u.length)return!1;for(var m=Object.prototype.hasOwnProperty.bind(r),h=0;h<c.length;h++){var p=c[h];if(!m(p))return!1;var g=e[p],y=r[p];if(l=i?i.call(o,g,y,p):void 0,l===!1||l===void 0&&g!==y)return!1}return!0}),Mu}var _N=jN();const NN=Hn(_N);var mv=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(mv||{}),Iu={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Qg=Object.values(mv),cf={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},CN=Object.entries(cf).reduce((t,[e,r])=>(t[r]=e,t),{}),Wr="data-rh",Fi={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Ui=(t,e)=>{for(let r=t.length-1;r>=0;r-=1){const i=t[r];if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}return null},SN=t=>{let e=Ui(t,"title");const r=Ui(t,Fi.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),r&&e)return r.replace(/%s/g,()=>e);const i=Ui(t,Fi.DEFAULT_TITLE);return e||i||void 0},EN=t=>Ui(t,Fi.ON_CHANGE_CLIENT_STATE)||(()=>{}),Lu=(t,e)=>e.filter(r=>typeof r[t]<"u").map(r=>r[t]).reduce((r,i)=>({...r,...i}),{}),kN=(t,e)=>e.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,i)=>{if(!r.length){const o=Object.keys(i);for(let l=0;l<o.length;l+=1){const u=o[l].toLowerCase();if(t.indexOf(u)!==-1&&i[u])return r.concat(i)}}return r},[]),PN=t=>console&&typeof console.warn=="function"&&console.warn(t),La=(t,e,r)=>{const i={};return r.filter(o=>Array.isArray(o[t])?!0:(typeof o[t]<"u"&&PN(`Helmet: ${t} should be of type "Array". Instead found type "${typeof o[t]}"`),!1)).map(o=>o[t]).reverse().reduce((o,l)=>{const c={};l.filter(m=>{let h;const p=Object.keys(m);for(let y=0;y<p.length;y+=1){const b=p[y],j=b.toLowerCase();e.indexOf(j)!==-1&&!(h==="rel"&&m[h].toLowerCase()==="canonical")&&!(j==="rel"&&m[j].toLowerCase()==="stylesheet")&&(h=j),e.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(h=b)}if(!h||!m[h])return!1;const g=m[h].toLowerCase();return i[h]||(i[h]={}),c[h]||(c[h]={}),i[h][g]?!1:(c[h][g]=!0,!0)}).reverse().forEach(m=>o.push(m));const u=Object.keys(c);for(let m=0;m<u.length;m+=1){const h=u[m],p={...i[h],...c[h]};i[h]=p}return o},[]).reverse()},TN=(t,e)=>{if(Array.isArray(t)&&t.length){for(let r=0;r<t.length;r+=1)if(t[r][e])return!0}return!1},AN=t=>({baseTag:kN(["href"],t),bodyAttributes:Lu("bodyAttributes",t),defer:Ui(t,Fi.DEFER),encode:Ui(t,Fi.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Lu("htmlAttributes",t),linkTags:La("link",["rel","href"],t),metaTags:La("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:La("noscript",["innerHTML"],t),onChangeClientState:EN(t),scriptTags:La("script",["src","innerHTML"],t),styleTags:La("style",["cssText"],t),title:SN(t),titleAttributes:Lu("titleAttributes",t),prioritizeSeoTags:TN(t,Fi.PRIORITIZE_SEO_TAGS)}),fv=t=>Array.isArray(t)?t.join(""):t,RN=(t,e)=>{const r=Object.keys(t);for(let i=0;i<r.length;i+=1)if(e[r[i]]&&e[r[i]].includes(t[r[i]]))return!0;return!1},$u=(t,e)=>Array.isArray(t)?t.reduce((r,i)=>(RN(i,e)?r.priority.push(i):r.default.push(i),r),{priority:[],default:[]}):{default:t,priority:[]},Zg=(t,e)=>({...t,[e]:void 0}),ON=["noscript","script","style"],pm=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),hv=t=>Object.keys(t).reduce((e,r)=>{const i=typeof t[r]<"u"?`${r}="${t[r]}"`:`${r}`;return e?`${e} ${i}`:i},""),DN=(t,e,r,i)=>{const o=hv(r),l=fv(e);return o?`<${t} ${Wr}="true" ${o}>${pm(l,i)}</${t}>`:`<${t} ${Wr}="true">${pm(l,i)}</${t}>`},MN=(t,e,r=!0)=>e.reduce((i,o)=>{const l=o,c=Object.keys(l).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,p)=>{const g=typeof l[p]>"u"?p:`${p}="${pm(l[p],r)}"`;return h?`${h} ${g}`:g},""),u=l.innerHTML||l.cssText||"",m=ON.indexOf(t)===-1;return`${i}<${t} ${Wr}="true" ${c}${m?"/>":`>${u}</${t}>`}`},""),pv=(t,e={})=>Object.keys(t).reduce((r,i)=>{const o=cf[i];return r[o||i]=t[i],r},e),IN=(t,e,r)=>{const i={key:e,[Wr]:!0},o=pv(r,i);return[nt.createElement("title",o,e)]},Xl=(t,e)=>e.map((r,i)=>{const o={key:i,[Wr]:!0};return Object.keys(r).forEach(l=>{const u=cf[l]||l;if(u==="innerHTML"||u==="cssText"){const m=r.innerHTML||r.cssText;o.dangerouslySetInnerHTML={__html:m}}else o[u]=r[l]}),nt.createElement(t,o)}),Ar=(t,e,r=!0)=>{switch(t){case"title":return{toComponent:()=>IN(t,e.title,e.titleAttributes),toString:()=>DN(t,e.title,e.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>pv(e),toString:()=>hv(e)};default:return{toComponent:()=>Xl(t,e),toString:()=>MN(t,e,r)}}},LN=({metaTags:t,linkTags:e,scriptTags:r,encode:i})=>{const o=$u(t,Iu.meta),l=$u(e,Iu.link),c=$u(r,Iu.script);return{priorityMethods:{toComponent:()=>[...Xl("meta",o.priority),...Xl("link",l.priority),...Xl("script",c.priority)],toString:()=>`${Ar("meta",o.priority,i)} ${Ar("link",l.priority,i)} ${Ar("script",c.priority,i)}`},metaTags:o.default,linkTags:l.default,scriptTags:c.default}},$N=t=>{const{baseTag:e,bodyAttributes:r,encode:i=!0,htmlAttributes:o,noscriptTags:l,styleTags:c,title:u="",titleAttributes:m,prioritizeSeoTags:h}=t;let{linkTags:p,metaTags:g,scriptTags:y}=t,b={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:b,linkTags:p,metaTags:g,scriptTags:y}=LN(t)),{priority:b,base:Ar("base",e,i),bodyAttributes:Ar("bodyAttributes",r,i),htmlAttributes:Ar("htmlAttributes",o,i),link:Ar("link",p,i),meta:Ar("meta",g,i),noscript:Ar("noscript",l,i),script:Ar("script",y,i),style:Ar("style",c,i),title:Ar("title",{title:u,titleAttributes:m},i)}},gm=$N,Ul=[],gv=!!(typeof window<"u"&&window.document&&window.document.createElement),ym=class{instances=[];canUseDOM=gv;context;value={setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Ul:this.instances,add:t=>{(this.canUseDOM?Ul:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Ul:this.instances).indexOf(t);(this.canUseDOM?Ul:this.instances).splice(e,1)}}};constructor(t,e){this.context=t,this.canUseDOM=e||!1,e||(t.helmet=gm({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},FN={},yv=nt.createContext(FN),xv=class vv extends w.Component{static canUseDOM=gv;helmetData;constructor(e){super(e),this.helmetData=new ym(this.props.context||{},vv.canUseDOM)}render(){return nt.createElement(yv.Provider,{value:this.helmetData.value},this.props.children)}},bi=(t,e)=>{const r=document.head||document.querySelector("head"),i=r.querySelectorAll(`${t}[${Wr}]`),o=[].slice.call(i),l=[];let c;return e&&e.length&&e.forEach(u=>{const m=document.createElement(t);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h))if(h==="innerHTML")m.innerHTML=u.innerHTML;else if(h==="cssText")m.styleSheet?m.styleSheet.cssText=u.cssText:m.appendChild(document.createTextNode(u.cssText));else{const p=h,g=typeof u[p]>"u"?"":u[p];m.setAttribute(h,g)}m.setAttribute(Wr,"true"),o.some((h,p)=>(c=p,m.isEqualNode(h)))?o.splice(c,1):l.push(m)}),o.forEach(u=>u.parentNode?.removeChild(u)),l.forEach(u=>r.appendChild(u)),{oldTags:o,newTags:l}},xm=(t,e)=>{const r=document.getElementsByTagName(t)[0];if(!r)return;const i=r.getAttribute(Wr),o=i?i.split(","):[],l=[...o],c=Object.keys(e);for(const u of c){const m=e[u]||"";r.getAttribute(u)!==m&&r.setAttribute(u,m),o.indexOf(u)===-1&&o.push(u);const h=l.indexOf(u);h!==-1&&l.splice(h,1)}for(let u=l.length-1;u>=0;u-=1)r.removeAttribute(l[u]);o.length===l.length?r.removeAttribute(Wr):r.getAttribute(Wr)!==c.join(",")&&r.setAttribute(Wr,c.join(","))},UN=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=fv(t)),xm("title",e)},Jg=(t,e)=>{const{baseTag:r,bodyAttributes:i,htmlAttributes:o,linkTags:l,metaTags:c,noscriptTags:u,onChangeClientState:m,scriptTags:h,styleTags:p,title:g,titleAttributes:y}=t;xm("body",i),xm("html",o),UN(g,y);const b={baseTag:bi("base",r),linkTags:bi("link",l),metaTags:bi("meta",c),noscriptTags:bi("noscript",u),scriptTags:bi("script",h),styleTags:bi("style",p)},j={},C={};Object.keys(b).forEach(_=>{const{newTags:A,oldTags:k}=b[_];A.length&&(j[_]=A),k.length&&(C[_]=b[_].oldTags)}),e&&e(),m(t,j,C)},$a=null,BN=t=>{$a&&cancelAnimationFrame($a),t.defer?$a=requestAnimationFrame(()=>{Jg(t,()=>{$a=null})}):(Jg(t),$a=null)},zN=BN,Xg=class extends w.Component{rendered=!1;shouldComponentUpdate(t){return!NN(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:e}=this.props.context;let r=null;const i=AN(t.get().map(o=>{const l={...o.props};return delete l.context,l}));xv.canUseDOM?zN(i):gm&&(r=gm(i)),e(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},VN=class extends w.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(t){return!vN(Zg(this.props,"helmetData"),Zg(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,r,i){return{...e,[t.type]:[...e[t.type]||[],{...r,...this.mapNestedChildrenToProps(t,i)}]}}mapObjectTypeChildren(t,e,r,i){switch(t.type){case"title":return{...e,[t.type]:i,titleAttributes:{...r}};case"body":return{...e,bodyAttributes:{...r}};case"html":return{...e,htmlAttributes:{...r}};default:return{...e,[t.type]:{...r}}}}mapArrayTypeChildrenToProps(t,e){let r={...e};return Object.keys(t).forEach(i=>{r={...r,[i]:t[i]}}),r}warnOnInvalidChildren(t,e){return Kg(Qg.some(r=>t.type===r),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Qg.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),Kg(!e||typeof e=="string"||Array.isArray(e)&&!e.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let r={};return nt.Children.forEach(t,i=>{if(!i||!i.props)return;const{children:o,...l}=i.props,c=Object.keys(l).reduce((m,h)=>(m[CN[h]||h]=l[h],m),{});let{type:u}=i;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(i,o),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(o,e);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(i,r,c,o);break;default:e=this.mapObjectTypeChildren(i,e,c,o);break}}),this.mapArrayTypeChildrenToProps(r,e)}render(){const{children:t,...e}=this.props;let r={...e},{helmetData:i}=e;if(t&&(r=this.mapChildrenToProps(t,r)),i&&!(i instanceof ym)){const o=i;i=new ym(o.context,!0),delete r.helmetData}return i?nt.createElement(Xg,{...r,context:i.value}):nt.createElement(yv.Consumer,null,o=>nt.createElement(Xg,{...r,context:o}))}};const bv=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Cc=w.createContext({}),Sc=w.createContext(null),Ec=typeof document<"u",df=Ec?w.useLayoutEffect:w.useEffect,wv=w.createContext({strict:!1}),uf=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),qN="framerAppearId",jv="data-"+uf(qN);function WN(t,e,r,i){const{visualElement:o}=w.useContext(Cc),l=w.useContext(wv),c=w.useContext(Sc),u=w.useContext(bv).reducedMotion,m=w.useRef();i=i||l.renderer,!m.current&&i&&(m.current=i(t,{visualState:e,parent:o,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=m.current;w.useInsertionEffect(()=>{h&&h.update(r,c)});const p=w.useRef(!!(r[jv]&&!window.HandoffComplete));return df(()=>{h&&(h.render(),p.current&&h.animationState&&h.animationState.animateChanges())}),w.useEffect(()=>{h&&(h.updateFeatures(),!p.current&&h.animationState&&h.animationState.animateChanges(),p.current&&(p.current=!1,window.HandoffComplete=!0))}),h}function Di(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function HN(t,e,r){return w.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),r&&(typeof r=="function"?r(i):Di(r)&&(r.current=i))},[e])}function no(t){return typeof t=="string"||Array.isArray(t)}function kc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const mf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ff=["initial",...mf];function Pc(t){return kc(t.animate)||ff.some(e=>no(t[e]))}function _v(t){return!!(Pc(t)||t.variants)}function GN(t,e){if(Pc(t)){const{initial:r,animate:i}=t;return{initial:r===!1||no(r)?r:void 0,animate:no(i)?i:void 0}}return t.inherit!==!1?e:{}}function KN(t){const{initial:e,animate:r}=GN(t,w.useContext(Cc));return w.useMemo(()=>({initial:e,animate:r}),[ey(e),ey(r)])}function ey(t){return Array.isArray(t)?t.join(" "):t}const ty={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},io={};for(const t in ty)io[t]={isEnabled:e=>ty[t].some(r=>!!e[r])};function YN(t){for(const e in t)io[e]={...io[e],...t[e]}}const hf=w.createContext({}),Nv=w.createContext({}),QN=Symbol.for("motionComponentSymbol");function ZN({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:i,Component:o}){t&&YN(t);function l(u,m){let h;const p={...w.useContext(bv),...u,layoutId:JN(u)},{isStatic:g}=p,y=KN(u),b=i(u,g);if(!g&&Ec){y.visualElement=WN(o,b,p,e);const j=w.useContext(Nv),C=w.useContext(wv).strict;y.visualElement&&(h=y.visualElement.loadFeatures(p,C,t,j))}return w.createElement(Cc.Provider,{value:y},h&&y.visualElement?w.createElement(h,{visualElement:y.visualElement,...p}):null,r(o,u,HN(b,y.visualElement,m),b,g,y.visualElement))}const c=w.forwardRef(l);return c[QN]=o,c}function JN({layoutId:t}){const e=w.useContext(hf).id;return e&&t!==void 0?e+"-"+t:t}function XN(t){function e(i,o={}){return ZN(t(i,o))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(i,o)=>(r.has(o)||r.set(o,e(o)),r.get(o))})}const e1=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pf(t){return typeof t!="string"||t.includes("-")?!1:!!(e1.indexOf(t)>-1||/[A-Z]/.test(t))}const nc={};function t1(t){Object.assign(nc,t)}const yo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gn=new Set(yo);function Cv(t,{layout:e,layoutId:r}){return Gn.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!nc[t]||t==="opacity")}const cr=t=>!!(t&&t.getVelocity),r1={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},s1=yo.length;function n1(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},i,o){let l="";for(let c=0;c<s1;c++){const u=yo[c];if(t[u]!==void 0){const m=r1[u]||u;l+=`${m}(${t[u]}) `}}return e&&!t.z&&(l+="translateZ(0)"),l=l.trim(),o?l=o(t,i?"":l):r&&i&&(l="none"),l}const Sv=t=>e=>typeof e=="string"&&e.startsWith(t),Ev=Sv("--"),vm=Sv("var(--"),i1=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,a1=(t,e)=>e&&typeof t=="number"?e.transform(t):t,on=(t,e,r)=>Math.min(Math.max(r,t),e),Kn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Qa={...Kn,transform:t=>on(0,1,t)},Bl={...Kn,default:1},Za=t=>Math.round(t*1e5)/1e5,Tc=/(-)?([\d]*\.?[\d])+/g,kv=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,o1=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function xo(t){return typeof t=="string"}const vo=t=>({test:e=>xo(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Xs=vo("deg"),os=vo("%"),Be=vo("px"),l1=vo("vh"),c1=vo("vw"),ry={...os,parse:t=>os.parse(t)/100,transform:t=>os.transform(t*100)},sy={...Kn,transform:Math.round},Pv={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,size:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,rotate:Xs,rotateX:Xs,rotateY:Xs,rotateZ:Xs,scale:Bl,scaleX:Bl,scaleY:Bl,scaleZ:Bl,skew:Xs,skewX:Xs,skewY:Xs,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:Qa,originX:ry,originY:ry,originZ:Be,zIndex:sy,fillOpacity:Qa,strokeOpacity:Qa,numOctaves:sy};function gf(t,e,r,i){const{style:o,vars:l,transform:c,transformOrigin:u}=t;let m=!1,h=!1,p=!0;for(const g in e){const y=e[g];if(Ev(g)){l[g]=y;continue}const b=Pv[g],j=a1(y,b);if(Gn.has(g)){if(m=!0,c[g]=j,!p)continue;y!==(b.default||0)&&(p=!1)}else g.startsWith("origin")?(h=!0,u[g]=j):o[g]=j}if(e.transform||(m||i?o.transform=n1(t.transform,r,p,i):o.transform&&(o.transform="none")),h){const{originX:g="50%",originY:y="50%",originZ:b=0}=u;o.transformOrigin=`${g} ${y} ${b}`}}const yf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Tv(t,e,r){for(const i in e)!cr(e[i])&&!Cv(i,r)&&(t[i]=e[i])}function d1({transformTemplate:t},e,r){return w.useMemo(()=>{const i=yf();return gf(i,e,{enableHardwareAcceleration:!r},t),Object.assign({},i.vars,i.style)},[e])}function u1(t,e,r){const i=t.style||{},o={};return Tv(o,i,t),Object.assign(o,d1(t,e,r)),t.transformValues?t.transformValues(o):o}function m1(t,e,r){const i={},o=u1(t,e,r);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=o,i}const f1=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ic(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||f1.has(t)}let Av=t=>!ic(t);function h1(t){t&&(Av=e=>e.startsWith("on")?!ic(e):t(e))}try{h1(require("@emotion/is-prop-valid").default)}catch{}function p1(t,e,r){const i={};for(const o in t)o==="values"&&typeof t.values=="object"||(Av(o)||r===!0&&ic(o)||!e&&!ic(o)||t.draggable&&o.startsWith("onDrag"))&&(i[o]=t[o]);return i}function ny(t,e,r){return typeof t=="string"?t:Be.transform(e+r*t)}function g1(t,e,r){const i=ny(e,t.x,t.width),o=ny(r,t.y,t.height);return`${i} ${o}`}const y1={offset:"stroke-dashoffset",array:"stroke-dasharray"},x1={offset:"strokeDashoffset",array:"strokeDasharray"};function v1(t,e,r=1,i=0,o=!0){t.pathLength=1;const l=o?y1:x1;t[l.offset]=Be.transform(-i);const c=Be.transform(e),u=Be.transform(r);t[l.array]=`${c} ${u}`}function xf(t,{attrX:e,attrY:r,attrScale:i,originX:o,originY:l,pathLength:c,pathSpacing:u=1,pathOffset:m=0,...h},p,g,y){if(gf(t,h,p,y),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:j,dimensions:C}=t;b.transform&&(C&&(j.transform=b.transform),delete b.transform),C&&(o!==void 0||l!==void 0||j.transform)&&(j.transformOrigin=g1(C,o!==void 0?o:.5,l!==void 0?l:.5)),e!==void 0&&(b.x=e),r!==void 0&&(b.y=r),i!==void 0&&(b.scale=i),c!==void 0&&v1(b,c,u,m,!1)}const Rv=()=>({...yf(),attrs:{}}),vf=t=>typeof t=="string"&&t.toLowerCase()==="svg";function b1(t,e,r,i){const o=w.useMemo(()=>{const l=Rv();return xf(l,e,{enableHardwareAcceleration:!1},vf(i),t.transformTemplate),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};Tv(l,t.style,t),o.style={...l,...o.style}}return o}function w1(t=!1){return(r,i,o,{latestValues:l},c)=>{const m=(pf(r)?b1:m1)(i,l,c,r),p={...p1(i,typeof r=="string",t),...m,ref:o},{children:g}=i,y=w.useMemo(()=>cr(g)?g.get():g,[g]);return w.createElement(r,{...p,children:y})}}function Ov(t,{style:e,vars:r},i,o){Object.assign(t.style,e,o&&o.getProjectionStyles(i));for(const l in r)t.style.setProperty(l,r[l])}const Dv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Mv(t,e,r,i){Ov(t,e,void 0,i);for(const o in e.attrs)t.setAttribute(Dv.has(o)?o:uf(o),e.attrs[o])}function bf(t,e){const{style:r}=t,i={};for(const o in r)(cr(r[o])||e.style&&cr(e.style[o])||Cv(o,t))&&(i[o]=r[o]);return i}function Iv(t,e){const r=bf(t,e);for(const i in t)if(cr(t[i])||cr(e[i])){const o=yo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function wf(t,e,r,i={},o={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,i,o)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,i,o)),e}function Lv(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const ac=t=>Array.isArray(t),j1=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),_1=t=>ac(t)?t[t.length-1]||0:t;function ec(t){const e=cr(t)?t.get():t;return j1(e)?e.toValue():e}function N1({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},i,o,l){const c={latestValues:C1(i,o,l,t),renderState:e()};return r&&(c.mount=u=>r(i,u,c)),c}const $v=t=>(e,r)=>{const i=w.useContext(Cc),o=w.useContext(Sc),l=()=>N1(t,e,i,o);return r?l():Lv(l)};function C1(t,e,r,i){const o={},l=i(t,{});for(const y in l)o[y]=ec(l[y]);let{initial:c,animate:u}=t;const m=Pc(t),h=_v(t);e&&h&&!m&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let p=r?r.initial===!1:!1;p=p||c===!1;const g=p?u:c;return g&&typeof g!="boolean"&&!kc(g)&&(Array.isArray(g)?g:[g]).forEach(b=>{const j=wf(t,b);if(!j)return;const{transitionEnd:C,transition:_,...A}=j;for(const k in A){let E=A[k];if(Array.isArray(E)){const N=p?E.length-1:0;E=E[N]}E!==null&&(o[k]=E)}for(const k in C)o[k]=C[k]}),o}const jt=t=>t;class iy{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function S1(t){let e=new iy,r=new iy,i=0,o=!1,l=!1;const c=new WeakSet,u={schedule:(m,h=!1,p=!1)=>{const g=p&&o,y=g?e:r;return h&&c.add(m),y.add(m)&&g&&o&&(i=e.order.length),m},cancel:m=>{r.remove(m),c.delete(m)},process:m=>{if(o){l=!0;return}if(o=!0,[e,r]=[r,e],r.clear(),i=e.order.length,i)for(let h=0;h<i;h++){const p=e.order[h];p(m),c.has(p)&&(u.schedule(p),t())}o=!1,l&&(l=!1,u.process(m))}};return u}const zl=["prepare","read","update","preRender","render","postRender"],E1=40;function k1(t,e){let r=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=zl.reduce((g,y)=>(g[y]=S1(()=>r=!0),g),{}),c=g=>l[g].process(o),u=()=>{const g=performance.now();r=!1,o.delta=i?1e3/60:Math.max(Math.min(g-o.timestamp,E1),1),o.timestamp=g,o.isProcessing=!0,zl.forEach(c),o.isProcessing=!1,r&&e&&(i=!1,t(u))},m=()=>{r=!0,i=!0,o.isProcessing||t(u)};return{schedule:zl.reduce((g,y)=>{const b=l[y];return g[y]=(j,C=!1,_=!1)=>(r||m(),b.schedule(j,C,_)),g},{}),cancel:g=>zl.forEach(y=>l[y].cancel(g)),state:o,steps:l}}const{schedule:lt,cancel:Ns,state:Vt,steps:Fu}=k1(typeof requestAnimationFrame<"u"?requestAnimationFrame:jt,!0),P1={useVisualState:$v({scrapeMotionValuesFromProps:Iv,createRenderState:Rv,onMount:(t,e,{renderState:r,latestValues:i})=>{lt.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),lt.render(()=>{xf(r,i,{enableHardwareAcceleration:!1},vf(e.tagName),t.transformTemplate),Mv(e,r)})}})},T1={useVisualState:$v({scrapeMotionValuesFromProps:bf,createRenderState:yf})};function A1(t,{forwardMotionProps:e=!1},r,i){return{...pf(t)?P1:T1,preloadedFeatures:r,useRender:w1(e),createVisualElement:i,Component:t}}function ws(t,e,r,i={passive:!0}){return t.addEventListener(e,r,i),()=>t.removeEventListener(e,r)}const Fv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Ac(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const R1=t=>e=>Fv(e)&&t(e,Ac(e));function js(t,e,r,i){return ws(t,e,R1(r),i)}const O1=(t,e)=>r=>e(t(r)),nn=(...t)=>t.reduce(O1);function Uv(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const ay=Uv("dragHorizontal"),oy=Uv("dragVertical");function Bv(t){let e=!1;if(t==="y")e=oy();else if(t==="x")e=ay();else{const r=ay(),i=oy();r&&i?e=()=>{r(),i()}:(r&&r(),i&&i())}return e}function zv(){const t=Bv(!0);return t?(t(),!1):!0}class fn{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ly(t,e){const r="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),o=(l,c)=>{if(l.pointerType==="touch"||zv())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&lt.update(()=>u[i](l,c))};return js(t.current,r,o,{passive:!t.getProps()[i]})}class D1 extends fn{mount(){this.unmount=nn(ly(this.node,!0),ly(this.node,!1))}unmount(){}}class M1 extends fn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nn(ws(this.node.current,"focus",()=>this.onFocus()),ws(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Vv=(t,e)=>e?t===e?!0:Vv(t,e.parentElement):!1;function Uu(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,Ac(r))}class I1 extends fn{constructor(){super(...arguments),this.removeStartListeners=jt,this.removeEndListeners=jt,this.removeAccessibleListeners=jt,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),l=js(window,"pointerup",(u,m)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:p,globalTapTarget:g}=this.node.getProps();lt.update(()=>{!g&&!Vv(this.node.current,u.target)?p&&p(u,m):h&&h(u,m)})},{passive:!(i.onTap||i.onPointerUp)}),c=js(window,"pointercancel",(u,m)=>this.cancelPress(u,m),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=nn(l,c),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=l=>{if(l.key!=="Enter"||this.isPressing)return;const c=u=>{u.key!=="Enter"||!this.checkPressEnd()||Uu("up",(m,h)=>{const{onTap:p}=this.node.getProps();p&&lt.update(()=>p(m,h))})};this.removeEndListeners(),this.removeEndListeners=ws(this.node.current,"keyup",c),Uu("down",(u,m)=>{this.startPress(u,m)})},r=ws(this.node.current,"keydown",e),i=()=>{this.isPressing&&Uu("cancel",(l,c)=>this.cancelPress(l,c))},o=ws(this.node.current,"blur",i);this.removeAccessibleListeners=nn(r,o)}}startPress(e,r){this.isPressing=!0;const{onTapStart:i,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&lt.update(()=>i(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!zv()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&lt.update(()=>i(e,r))}mount(){const e=this.node.getProps(),r=js(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=ws(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=nn(r,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const bm=new WeakMap,Bu=new WeakMap,L1=t=>{const e=bm.get(t.target);e&&e(t)},$1=t=>{t.forEach(L1)};function F1({root:t,...e}){const r=t||document;Bu.has(r)||Bu.set(r,{});const i=Bu.get(r),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver($1,{root:t,...e})),i[o]}function U1(t,e,r){const i=F1(e);return bm.set(t,r),i.observe(t),()=>{bm.delete(t),i.unobserve(t)}}const B1={some:0,all:1};class z1 extends fn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:i,amount:o="some",once:l}=e,c={root:r?r.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:B1[o]},u=m=>{const{isIntersecting:h}=m;if(this.isInView===h||(this.isInView=h,l&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=h?p:g;y&&y(m)};return U1(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(V1(e,r))&&this.startObserver()}unmount(){}}function V1({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const q1={inView:{Feature:z1},tap:{Feature:I1},focus:{Feature:M1},hover:{Feature:D1}};function qv(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function W1(t){const e={};return t.values.forEach((r,i)=>e[i]=r.get()),e}function H1(t){const e={};return t.values.forEach((r,i)=>e[i]=r.getVelocity()),e}function Rc(t,e,r){const i=t.getProps();return wf(i,e,r!==void 0?r:i.custom,W1(t),H1(t))}let jf=jt;const Bn=t=>t*1e3,_s=t=>t/1e3,G1={current:!1},Wv=t=>Array.isArray(t)&&typeof t[0]=="number";function Hv(t){return!!(!t||typeof t=="string"&&Gv[t]||Wv(t)||Array.isArray(t)&&t.every(Hv))}const Ka=([t,e,r,i])=>`cubic-bezier(${t}, ${e}, ${r}, ${i})`,Gv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ka([0,.65,.55,1]),circOut:Ka([.55,0,1,.45]),backIn:Ka([.31,.01,.66,-.59]),backOut:Ka([.33,1.53,.69,.99])};function Kv(t){if(t)return Wv(t)?Ka(t):Array.isArray(t)?t.map(Kv):Gv[t]}function K1(t,e,r,{delay:i=0,duration:o,repeat:l=0,repeatType:c="loop",ease:u,times:m}={}){const h={[e]:r};m&&(h.offset=m);const p=Kv(u);return Array.isArray(p)&&(h.easing=p),t.animate(h,{delay:i,duration:o,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"})}function Y1(t,{repeat:e,repeatType:r="loop"}){const i=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[i]}const Yv=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,Q1=1e-7,Z1=12;function J1(t,e,r,i,o){let l,c,u=0;do c=e+(r-e)/2,l=Yv(c,i,o)-t,l>0?r=c:e=c;while(Math.abs(l)>Q1&&++u<Z1);return c}function bo(t,e,r,i){if(t===e&&r===i)return jt;const o=l=>J1(l,0,1,t,r);return l=>l===0||l===1?l:Yv(o(l),e,i)}const X1=bo(.42,0,1,1),eC=bo(0,0,.58,1),Qv=bo(.42,0,.58,1),tC=t=>Array.isArray(t)&&typeof t[0]!="number",Zv=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Jv=t=>e=>1-t(1-e),_f=t=>1-Math.sin(Math.acos(t)),Xv=Jv(_f),rC=Zv(_f),e0=bo(.33,1.53,.69,.99),Nf=Jv(e0),sC=Zv(Nf),nC=t=>(t*=2)<1?.5*Nf(t):.5*(2-Math.pow(2,-10*(t-1))),iC={linear:jt,easeIn:X1,easeInOut:Qv,easeOut:eC,circIn:_f,circInOut:rC,circOut:Xv,backIn:Nf,backInOut:sC,backOut:e0,anticipate:nC},cy=t=>{if(Array.isArray(t)){jf(t.length===4);const[e,r,i,o]=t;return bo(e,r,i,o)}else if(typeof t=="string")return iC[t];return t},Cf=(t,e)=>r=>!!(xo(r)&&o1.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),t0=(t,e,r)=>i=>{if(!xo(i))return i;const[o,l,c,u]=i.match(Tc);return{[t]:parseFloat(o),[e]:parseFloat(l),[r]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},aC=t=>on(0,255,t),zu={...Kn,transform:t=>Math.round(aC(t))},Fn={test:Cf("rgb","red"),parse:t0("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:i=1})=>"rgba("+zu.transform(t)+", "+zu.transform(e)+", "+zu.transform(r)+", "+Za(Qa.transform(i))+")"};function oC(t){let e="",r="",i="",o="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),i=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),i=t.substring(3,4),o=t.substring(4,5),e+=e,r+=r,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const wm={test:Cf("#"),parse:oC,transform:Fn.transform},Mi={test:Cf("hsl","hue"),parse:t0("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:i=1})=>"hsla("+Math.round(t)+", "+os.transform(Za(e))+", "+os.transform(Za(r))+", "+Za(Qa.transform(i))+")"},Gt={test:t=>Fn.test(t)||wm.test(t)||Mi.test(t),parse:t=>Fn.test(t)?Fn.parse(t):Mi.test(t)?Mi.parse(t):wm.parse(t),transform:t=>xo(t)?t:t.hasOwnProperty("red")?Fn.transform(t):Mi.transform(t)},xt=(t,e,r)=>-r*t+r*e+t;function Vu(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function lC({hue:t,saturation:e,lightness:r,alpha:i}){t/=360,e/=100,r/=100;let o=0,l=0,c=0;if(!e)o=l=c=r;else{const u=r<.5?r*(1+e):r+e-r*e,m=2*r-u;o=Vu(m,u,t+1/3),l=Vu(m,u,t),c=Vu(m,u,t-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:i}}const qu=(t,e,r)=>{const i=t*t;return Math.sqrt(Math.max(0,r*(e*e-i)+i))},cC=[wm,Fn,Mi],dC=t=>cC.find(e=>e.test(t));function dy(t){const e=dC(t);let r=e.parse(t);return e===Mi&&(r=lC(r)),r}const r0=(t,e)=>{const r=dy(t),i=dy(e),o={...r};return l=>(o.red=qu(r.red,i.red,l),o.green=qu(r.green,i.green,l),o.blue=qu(r.blue,i.blue,l),o.alpha=xt(r.alpha,i.alpha,l),Fn.transform(o))};function uC(t){var e,r;return isNaN(t)&&xo(t)&&(((e=t.match(Tc))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(kv))===null||r===void 0?void 0:r.length)||0)>0}const s0={regex:i1,countKey:"Vars",token:"${v}",parse:jt},n0={regex:kv,countKey:"Colors",token:"${c}",parse:Gt.parse},i0={regex:Tc,countKey:"Numbers",token:"${n}",parse:Kn.parse};function Wu(t,{regex:e,countKey:r,token:i,parse:o}){const l=t.tokenised.match(e);l&&(t["num"+r]=l.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...l.map(o)))}function oc(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Wu(r,s0),Wu(r,n0),Wu(r,i0),r}function a0(t){return oc(t).values}function o0(t){const{values:e,numColors:r,numVars:i,tokenised:o}=oc(t),l=e.length;return c=>{let u=o;for(let m=0;m<l;m++)m<i?u=u.replace(s0.token,c[m]):m<i+r?u=u.replace(n0.token,Gt.transform(c[m])):u=u.replace(i0.token,Za(c[m]));return u}}const mC=t=>typeof t=="number"?0:t;function fC(t){const e=a0(t);return o0(t)(e.map(mC))}const ln={test:uC,parse:a0,createTransformer:o0,getAnimatableNone:fC},l0=(t,e)=>r=>`${r>0?e:t}`;function c0(t,e){return typeof t=="number"?r=>xt(t,e,r):Gt.test(t)?r0(t,e):t.startsWith("var(")?l0(t,e):u0(t,e)}const d0=(t,e)=>{const r=[...t],i=r.length,o=t.map((l,c)=>c0(l,e[c]));return l=>{for(let c=0;c<i;c++)r[c]=o[c](l);return r}},hC=(t,e)=>{const r={...t,...e},i={};for(const o in r)t[o]!==void 0&&e[o]!==void 0&&(i[o]=c0(t[o],e[o]));return o=>{for(const l in i)r[l]=i[l](o);return r}},u0=(t,e)=>{const r=ln.createTransformer(e),i=oc(t),o=oc(e);return i.numVars===o.numVars&&i.numColors===o.numColors&&i.numNumbers>=o.numNumbers?nn(d0(i.values,o.values),r):l0(t,e)},ao=(t,e,r)=>{const i=e-t;return i===0?1:(r-t)/i},uy=(t,e)=>r=>xt(t,e,r);function pC(t){return typeof t=="number"?uy:typeof t=="string"?Gt.test(t)?r0:u0:Array.isArray(t)?d0:typeof t=="object"?hC:uy}function gC(t,e,r){const i=[],o=r||pC(t[0]),l=t.length-1;for(let c=0;c<l;c++){let u=o(t[c],t[c+1]);if(e){const m=Array.isArray(e)?e[c]||jt:e;u=nn(m,u)}i.push(u)}return i}function m0(t,e,{clamp:r=!0,ease:i,mixer:o}={}){const l=t.length;if(jf(l===e.length),l===1)return()=>e[0];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=gC(e,i,o),u=c.length,m=h=>{let p=0;if(u>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const g=ao(t[p],t[p+1],h);return c[p](g)};return r?h=>m(on(t[0],t[l-1],h)):m}function yC(t,e){const r=t[t.length-1];for(let i=1;i<=e;i++){const o=ao(0,e,i);t.push(xt(r,1,o))}}function xC(t){const e=[0];return yC(e,t.length-1),e}function vC(t,e){return t.map(r=>r*e)}function bC(t,e){return t.map(()=>e||Qv).splice(0,t.length-1)}function lc({duration:t=300,keyframes:e,times:r,ease:i="easeInOut"}){const o=tC(i)?i.map(cy):cy(i),l={done:!1,value:e[0]},c=vC(r&&r.length===e.length?r:xC(e),t),u=m0(c,e,{ease:Array.isArray(o)?o:bC(e,o)});return{calculatedDuration:t,next:m=>(l.value=u(m),l.done=m>=t,l)}}function f0(t,e){return e?t*(1e3/e):0}const wC=5;function h0(t,e,r){const i=Math.max(e-wC,0);return f0(r-t(i),e-i)}const Hu=.001,jC=.01,_C=10,NC=.05,CC=1;function SC({duration:t=800,bounce:e=.25,velocity:r=0,mass:i=1}){let o,l,c=1-e;c=on(NC,CC,c),t=on(jC,_C,_s(t)),c<1?(o=h=>{const p=h*c,g=p*t,y=p-r,b=jm(h,c),j=Math.exp(-g);return Hu-y/b*j},l=h=>{const g=h*c*t,y=g*r+r,b=Math.pow(c,2)*Math.pow(h,2)*t,j=Math.exp(-g),C=jm(Math.pow(h,2),c);return(-o(h)+Hu>0?-1:1)*((y-b)*j)/C}):(o=h=>{const p=Math.exp(-h*t),g=(h-r)*t+1;return-Hu+p*g},l=h=>{const p=Math.exp(-h*t),g=(r-h)*(t*t);return p*g});const u=5/t,m=kC(o,l,u);if(t=Bn(t),isNaN(m))return{stiffness:100,damping:10,duration:t};{const h=Math.pow(m,2)*i;return{stiffness:h,damping:c*2*Math.sqrt(i*h),duration:t}}}const EC=12;function kC(t,e,r){let i=r;for(let o=1;o<EC;o++)i=i-t(i)/e(i);return i}function jm(t,e){return t*Math.sqrt(1-e*e)}const PC=["duration","bounce"],TC=["stiffness","damping","mass"];function my(t,e){return e.some(r=>t[r]!==void 0)}function AC(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!my(t,TC)&&my(t,PC)){const r=SC(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function p0({keyframes:t,restDelta:e,restSpeed:r,...i}){const o=t[0],l=t[t.length-1],c={done:!1,value:o},{stiffness:u,damping:m,mass:h,duration:p,velocity:g,isResolvedFromDuration:y}=AC({...i,velocity:-_s(i.velocity||0)}),b=g||0,j=m/(2*Math.sqrt(u*h)),C=l-o,_=_s(Math.sqrt(u/h)),A=Math.abs(C)<5;r||(r=A?.01:2),e||(e=A?.005:.5);let k;if(j<1){const E=jm(_,j);k=N=>{const R=Math.exp(-j*_*N);return l-R*((b+j*_*C)/E*Math.sin(E*N)+C*Math.cos(E*N))}}else if(j===1)k=E=>l-Math.exp(-_*E)*(C+(b+_*C)*E);else{const E=_*Math.sqrt(j*j-1);k=N=>{const R=Math.exp(-j*_*N),T=Math.min(E*N,300);return l-R*((b+j*_*C)*Math.sinh(T)+E*C*Math.cosh(T))/E}}return{calculatedDuration:y&&p||null,next:E=>{const N=k(E);if(y)c.done=E>=p;else{let R=b;E!==0&&(j<1?R=h0(k,E,N):R=0);const T=Math.abs(R)<=r,M=Math.abs(l-N)<=e;c.done=T&&M}return c.value=c.done?l:N,c}}}function fy({keyframes:t,velocity:e=0,power:r=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:c,min:u,max:m,restDelta:h=.5,restSpeed:p}){const g=t[0],y={done:!1,value:g},b=I=>u!==void 0&&I<u||m!==void 0&&I>m,j=I=>u===void 0?m:m===void 0||Math.abs(u-I)<Math.abs(m-I)?u:m;let C=r*e;const _=g+C,A=c===void 0?_:c(_);A!==_&&(C=A-g);const k=I=>-C*Math.exp(-I/i),E=I=>A+k(I),N=I=>{const Q=k(I),H=E(I);y.done=Math.abs(Q)<=h,y.value=y.done?A:H};let R,T;const M=I=>{b(y.value)&&(R=I,T=p0({keyframes:[y.value,j(y.value)],velocity:h0(E,I,y.value),damping:o,stiffness:l,restDelta:h,restSpeed:p}))};return M(0),{calculatedDuration:null,next:I=>{let Q=!1;return!T&&R===void 0&&(Q=!0,N(I),M(I)),R!==void 0&&I>R?T.next(I-R):(!Q&&N(I),y)}}}const RC=t=>{const e=({timestamp:r})=>t(r);return{start:()=>lt.update(e,!0),stop:()=>Ns(e),now:()=>Vt.isProcessing?Vt.timestamp:performance.now()}},hy=2e4;function py(t){let e=0;const r=50;let i=t.next(e);for(;!i.done&&e<hy;)e+=r,i=t.next(e);return e>=hy?1/0:e}const OC={decay:fy,inertia:fy,tween:lc,keyframes:lc,spring:p0};function cc({autoplay:t=!0,delay:e=0,driver:r=RC,keyframes:i,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",onPlay:m,onStop:h,onComplete:p,onUpdate:g,...y}){let b=1,j=!1,C,_;const A=()=>{_=new Promise(P=>{C=P})};A();let k;const E=OC[o]||lc;let N;E!==lc&&typeof i[0]!="number"&&(N=m0([0,100],i,{clamp:!1}),i=[0,100]);const R=E({...y,keyframes:i});let T;u==="mirror"&&(T=E({...y,keyframes:[...i].reverse(),velocity:-(y.velocity||0)}));let M="idle",I=null,Q=null,H=null;R.calculatedDuration===null&&l&&(R.calculatedDuration=py(R));const{calculatedDuration:be}=R;let z=1/0,de=1/0;be!==null&&(z=be+c,de=z*(l+1)-c);let ee=0;const ce=P=>{if(Q===null)return;b>0&&(Q=Math.min(Q,P)),b<0&&(Q=Math.min(P-de/b,Q)),I!==null?ee=I:ee=Math.round(P-Q)*b;const F=ee-e*(b>=0?1:-1),te=b>=0?F<0:F>de;ee=Math.max(F,0),M==="finished"&&I===null&&(ee=de);let me=ee,ye=R;if(l){const De=Math.min(ee,de)/z;let Fe=Math.floor(De),ie=De%1;!ie&&De>=1&&(ie=1),ie===1&&Fe--,Fe=Math.min(Fe,l+1),!!(Fe%2)&&(u==="reverse"?(ie=1-ie,c&&(ie-=c/z)):u==="mirror"&&(ye=T)),me=on(0,1,ie)*z}const _e=te?{done:!1,value:i[0]}:ye.next(me);N&&(_e.value=N(_e.value));let{done:xe}=_e;!te&&be!==null&&(xe=b>=0?ee>=de:ee<=0);const Ne=I===null&&(M==="finished"||M==="running"&&xe);return g&&g(_e.value),Ne&&$(),_e},se=()=>{k&&k.stop(),k=void 0},ue=()=>{M="idle",se(),C(),A(),Q=H=null},$=()=>{M="finished",p&&p(),se(),C()},ne=()=>{if(j)return;k||(k=r(ce));const P=k.now();m&&m(),I!==null?Q=P-I:(!Q||M==="finished")&&(Q=P),M==="finished"&&A(),H=Q,I=null,M="running",k.start()};t&&ne();const ae={then(P,F){return _.then(P,F)},get time(){return _s(ee)},set time(P){P=Bn(P),ee=P,I!==null||!k||b===0?I=P:Q=k.now()-P/b},get duration(){const P=R.calculatedDuration===null?py(R):R.calculatedDuration;return _s(P)},get speed(){return b},set speed(P){P===b||!k||(b=P,ae.time=_s(ee))},get state(){return M},play:ne,pause:()=>{M="paused",I=ee},stop:()=>{j=!0,M!=="idle"&&(M="idle",h&&h(),ue())},cancel:()=>{H!==null&&ce(H),ue()},complete:()=>{M="finished"},sample:P=>(Q=0,ce(P))};return ae}function DC(t){let e;return()=>(e===void 0&&(e=t()),e)}const MC=DC(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),IC=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Vl=10,LC=2e4,$C=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Hv(e.ease);function FC(t,e,{onUpdate:r,onComplete:i,...o}){if(!(MC()&&IC.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let c=!1,u,m,h=!1;const p=()=>{m=new Promise(E=>{u=E})};p();let{keyframes:g,duration:y=300,ease:b,times:j}=o;if($C(e,o)){const E=cc({...o,repeat:0,delay:0});let N={done:!1,value:g[0]};const R=[];let T=0;for(;!N.done&&T<LC;)N=E.sample(T),R.push(N.value),T+=Vl;j=void 0,g=R,y=T-Vl,b="linear"}const C=K1(t.owner.current,e,g,{...o,duration:y,ease:b,times:j}),_=()=>{h=!1,C.cancel()},A=()=>{h=!0,lt.update(_),u(),p()};return C.onfinish=()=>{h||(t.set(Y1(g,o)),i&&i(),A())},{then(E,N){return m.then(E,N)},attachTimeline(E){return C.timeline=E,C.onfinish=null,jt},get time(){return _s(C.currentTime||0)},set time(E){C.currentTime=Bn(E)},get speed(){return C.playbackRate},set speed(E){C.playbackRate=E},get duration(){return _s(y)},play:()=>{c||(C.play(),Ns(_))},pause:()=>C.pause(),stop:()=>{if(c=!0,C.playState==="idle")return;const{currentTime:E}=C;if(E){const N=cc({...o,autoplay:!1});t.setWithVelocity(N.sample(E-Vl).value,N.sample(E).value,Vl)}A()},complete:()=>{h||C.finish()},cancel:A}}function UC({keyframes:t,delay:e,onUpdate:r,onComplete:i}){const o=()=>(r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:jt,pause:jt,stop:jt,then:l=>(l(),Promise.resolve()),cancel:jt,complete:jt});return e?cc({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const BC={type:"spring",stiffness:500,damping:25,restSpeed:10},zC=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),VC={type:"keyframes",duration:.8},qC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WC=(t,{keyframes:e})=>e.length>2?VC:Gn.has(t)?t.startsWith("scale")?zC(e[1]):BC:qC,_m=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ln.test(e)||e==="0")&&!e.startsWith("url(")),HC=new Set(["brightness","contrast","saturate","opacity"]);function GC(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=r.match(Tc)||[];if(!i)return t;const o=r.replace(i,"");let l=HC.has(e)?1:0;return i!==r&&(l*=100),e+"("+l+o+")"}const KC=/([a-z-]*)\(.*?\)/g,Nm={...ln,getAnimatableNone:t=>{const e=t.match(KC);return e?e.map(GC).join(" "):t}},YC={...Pv,color:Gt,backgroundColor:Gt,outlineColor:Gt,fill:Gt,stroke:Gt,borderColor:Gt,borderTopColor:Gt,borderRightColor:Gt,borderBottomColor:Gt,borderLeftColor:Gt,filter:Nm,WebkitFilter:Nm},Sf=t=>YC[t];function g0(t,e){let r=Sf(t);return r!==Nm&&(r=ln),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const y0=t=>/^0[^.\s]+$/.test(t);function QC(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||y0(t)}function ZC(t,e,r,i){const o=_m(e,r);let l;Array.isArray(r)?l=[...r]:l=[null,r];const c=i.from!==void 0?i.from:t.get();let u;const m=[];for(let h=0;h<l.length;h++)l[h]===null&&(l[h]=h===0?c:l[h-1]),QC(l[h])&&m.push(h),typeof l[h]=="string"&&l[h]!=="none"&&l[h]!=="0"&&(u=l[h]);if(o&&m.length&&u)for(let h=0;h<m.length;h++){const p=m[h];l[p]=g0(e,u)}return l}function JC({when:t,delay:e,delayChildren:r,staggerChildren:i,staggerDirection:o,repeat:l,repeatType:c,repeatDelay:u,from:m,elapsed:h,...p}){return!!Object.keys(p).length}function Ef(t,e){return t[e]||t.default||t}const XC={skipAnimations:!1},kf=(t,e,r,i={})=>o=>{const l=Ef(i,t)||{},c=l.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Bn(c);const m=ZC(e,t,r,l),h=m[0],p=m[m.length-1],g=_m(t,h),y=_m(t,p);let b={keyframes:m,velocity:e.getVelocity(),ease:"easeOut",...l,delay:-u,onUpdate:j=>{e.set(j),l.onUpdate&&l.onUpdate(j)},onComplete:()=>{o(),l.onComplete&&l.onComplete()}};if(JC(l)||(b={...b,...WC(t,b)}),b.duration&&(b.duration=Bn(b.duration)),b.repeatDelay&&(b.repeatDelay=Bn(b.repeatDelay)),!g||!y||G1.current||l.type===!1||XC.skipAnimations)return UC(b);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const j=FC(e,t,b);if(j)return j}return cc(b)};function dc(t){return!!(cr(t)&&t.add)}const x0=t=>/^\-?\d*\.?\d+$/.test(t);function Pf(t,e){t.indexOf(e)===-1&&t.push(e)}function Tf(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Af{constructor(){this.subscriptions=[]}add(e){return Pf(this.subscriptions,e),()=>Tf(this.subscriptions,e)}notify(e,r,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,r,i);else for(let l=0;l<o;l++){const c=this.subscriptions[l];c&&c(e,r,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const eS=t=>!isNaN(parseFloat(t));class tS{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,o=!0)=>{this.prev=this.current,this.current=i;const{delta:l,timestamp:c}=Vt;this.lastUpdated!==c&&(this.timeDelta=l,this.lastUpdated=c,lt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>lt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=eS(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Af);const i=this.events[e].add(r);return e==="change"?()=>{i(),lt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,i){this.set(r),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?f0(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qi(t,e){return new tS(t,e)}const v0=t=>e=>e.test(t),rS={test:t=>t==="auto",parse:t=>t},b0=[Kn,Be,os,Xs,c1,l1,rS],Fa=t=>b0.find(v0(t)),sS=[...b0,Gt,ln],nS=t=>sS.find(v0(t));function iS(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,qi(r))}function aS(t,e){const r=Rc(t,e);let{transitionEnd:i={},transition:o={},...l}=r?t.makeTargetAnimatable(r,!1):{};l={...l,...i};for(const c in l){const u=_1(l[c]);iS(t,c,u)}}function oS(t,e,r){var i,o;const l=Object.keys(e).filter(u=>!t.hasValue(u)),c=l.length;if(c)for(let u=0;u<c;u++){const m=l[u],h=e[m];let p=null;Array.isArray(h)&&(p=h[0]),p===null&&(p=(o=(i=r[m])!==null&&i!==void 0?i:t.readValue(m))!==null&&o!==void 0?o:e[m]),p!=null&&(typeof p=="string"&&(x0(p)||y0(p))?p=parseFloat(p):!nS(p)&&ln.test(h)&&(p=g0(m,h)),t.addValue(m,qi(p,{owner:t})),r[m]===void 0&&(r[m]=p),p!==null&&t.setBaseTarget(m,p))}}function lS(t,e){return e?(e[t]||e.default||e).from:void 0}function cS(t,e,r){const i={};for(const o in t){const l=lS(o,e);if(l!==void 0)i[o]=l;else{const c=r.getValue(o);c&&(i[o]=c.get())}}return i}function dS({protectedKeys:t,needsAnimating:e},r){const i=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,i}function uS(t,e){const r=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==r)return!0}else return r!==e}function w0(t,e,{delay:r=0,transitionOverride:i,type:o}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...u}=t.makeTargetAnimatable(e);const m=t.getValue("willChange");i&&(l=i);const h=[],p=o&&t.animationState&&t.animationState.getState()[o];for(const g in u){const y=t.getValue(g),b=u[g];if(!y||b===void 0||p&&dS(p,g))continue;const j={delay:r,elapsed:0,...Ef(l||{},g)};if(window.HandoffAppearAnimations){const A=t.getProps()[jv];if(A){const k=window.HandoffAppearAnimations(A,g,y,lt);k!==null&&(j.elapsed=k,j.isHandoff=!0)}}let C=!j.isHandoff&&!uS(y,b);if(j.type==="spring"&&(y.getVelocity()||j.velocity)&&(C=!1),y.animation&&(C=!1),C)continue;y.start(kf(g,y,b,t.shouldReduceMotion&&Gn.has(g)?{type:!1}:j));const _=y.animation;dc(m)&&(m.add(g),_.then(()=>m.remove(g))),h.push(_)}return c&&Promise.all(h).then(()=>{c&&aS(t,c)}),h}function Cm(t,e,r={}){const i=Rc(t,e,r.custom);let{transition:o=t.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(o=r.transitionOverride);const l=i?()=>Promise.all(w0(t,i,r)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:g}=o;return mS(t,e,h+m,p,g,r)}:()=>Promise.resolve(),{when:u}=o;if(u){const[m,h]=u==="beforeChildren"?[l,c]:[c,l];return m().then(()=>h())}else return Promise.all([l(),c(r.delay)])}function mS(t,e,r=0,i=0,o=1,l){const c=[],u=(t.variantChildren.size-1)*i,m=o===1?(h=0)=>h*i:(h=0)=>u-h*i;return Array.from(t.variantChildren).sort(fS).forEach((h,p)=>{h.notify("AnimationStart",e),c.push(Cm(h,e,{...l,delay:r+m(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(c)}function fS(t,e){return t.sortNodePosition(e)}function hS(t,e,r={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(l=>Cm(t,l,r));i=Promise.all(o)}else if(typeof e=="string")i=Cm(t,e,r);else{const o=typeof e=="function"?Rc(t,e,r.custom):e;i=Promise.all(w0(t,o,r))}return i.then(()=>t.notify("AnimationComplete",e))}const pS=[...mf].reverse(),gS=mf.length;function yS(t){return e=>Promise.all(e.map(({animation:r,options:i})=>hS(t,r,i)))}function xS(t){let e=yS(t);const r=bS();let i=!0;const o=(m,h)=>{const p=Rc(t,h);if(p){const{transition:g,transitionEnd:y,...b}=p;m={...m,...b,...y}}return m};function l(m){e=m(t)}function c(m,h){const p=t.getProps(),g=t.getVariantContext(!0)||{},y=[],b=new Set;let j={},C=1/0;for(let A=0;A<gS;A++){const k=pS[A],E=r[k],N=p[k]!==void 0?p[k]:g[k],R=no(N),T=k===h?E.isActive:null;T===!1&&(C=A);let M=N===g[k]&&N!==p[k]&&R;if(M&&i&&t.manuallyAnimateOnMount&&(M=!1),E.protectedKeys={...j},!E.isActive&&T===null||!N&&!E.prevProp||kc(N)||typeof N=="boolean")continue;let Q=vS(E.prevProp,N)||k===h&&E.isActive&&!M&&R||A>C&&R,H=!1;const be=Array.isArray(N)?N:[N];let z=be.reduce(o,{});T===!1&&(z={});const{prevResolvedValues:de={}}=E,ee={...de,...z},ce=se=>{Q=!0,b.has(se)&&(H=!0,b.delete(se)),E.needsAnimating[se]=!0};for(const se in ee){const ue=z[se],$=de[se];if(j.hasOwnProperty(se))continue;let ne=!1;ac(ue)&&ac($)?ne=!qv(ue,$):ne=ue!==$,ne?ue!==void 0?ce(se):b.add(se):ue!==void 0&&b.has(se)?ce(se):E.protectedKeys[se]=!0}E.prevProp=N,E.prevResolvedValues=z,E.isActive&&(j={...j,...z}),i&&t.blockInitialAnimation&&(Q=!1),Q&&(!M||H)&&y.push(...be.map(se=>({animation:se,options:{type:k,...m}})))}if(b.size){const A={};b.forEach(k=>{const E=t.getBaseTarget(k);E!==void 0&&(A[k]=E)}),y.push({animation:A})}let _=!!y.length;return i&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(_=!1),i=!1,_?e(y):Promise.resolve()}function u(m,h,p){var g;if(r[m].isActive===h)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(b=>{var j;return(j=b.animationState)===null||j===void 0?void 0:j.setActive(m,h)}),r[m].isActive=h;const y=c(p,m);for(const b in r)r[b].protectedKeys={};return y}return{animateChanges:c,setActive:u,setAnimateFunction:l,getState:()=>r}}function vS(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!qv(e,t):!1}function Tn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bS(){return{animate:Tn(!0),whileInView:Tn(),whileHover:Tn(),whileTap:Tn(),whileDrag:Tn(),whileFocus:Tn(),exit:Tn()}}class wS extends fn{constructor(e){super(e),e.animationState||(e.animationState=xS(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),kc(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let jS=0;class _S extends fn{constructor(){super(...arguments),this.id=jS++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:i}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const l=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});r&&!e&&l.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const NS={animation:{Feature:wS},exit:{Feature:_S}},gy=(t,e)=>Math.abs(t-e);function CS(t,e){const r=gy(t.x,e.x),i=gy(t.y,e.y);return Math.sqrt(r**2+i**2)}class j0{constructor(e,r,{transformPagePoint:i,contextWindow:o,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Ku(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,b=CS(g.offset,{x:0,y:0})>=3;if(!y&&!b)return;const{point:j}=g,{timestamp:C}=Vt;this.history.push({...j,timestamp:C});const{onStart:_,onMove:A}=this.handlers;y||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Gu(y,this.transformPagePoint),lt.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:b,onSessionEnd:j,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Ku(g.type==="pointercancel"?this.lastMoveEventInfo:Gu(y,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,_),j&&j(g,_)},!Fv(e))return;this.dragSnapToOrigin=l,this.handlers=r,this.transformPagePoint=i,this.contextWindow=o||window;const c=Ac(e),u=Gu(c,this.transformPagePoint),{point:m}=u,{timestamp:h}=Vt;this.history=[{...m,timestamp:h}];const{onSessionStart:p}=r;p&&p(e,Ku(u,this.history)),this.removeListeners=nn(js(this.contextWindow,"pointermove",this.handlePointerMove),js(this.contextWindow,"pointerup",this.handlePointerUp),js(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ns(this.updatePoint)}}function Gu(t,e){return e?{point:e(t.point)}:t}function yy(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ku({point:t},e){return{point:t,delta:yy(t,_0(e)),offset:yy(t,SS(e)),velocity:ES(e,.1)}}function SS(t){return t[0]}function _0(t){return t[t.length-1]}function ES(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,i=null;const o=_0(t);for(;r>=0&&(i=t[r],!(o.timestamp-i.timestamp>Bn(e)));)r--;if(!i)return{x:0,y:0};const l=_s(o.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const c={x:(o.x-i.x)/l,y:(o.y-i.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function xr(t){return t.max-t.min}function Sm(t,e=0,r=.01){return Math.abs(t-e)<=r}function xy(t,e,r,i=.5){t.origin=i,t.originPoint=xt(e.min,e.max,t.origin),t.scale=xr(r)/xr(e),(Sm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=xt(r.min,r.max,t.origin)-t.originPoint,(Sm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Ja(t,e,r,i){xy(t.x,e.x,r.x,i?i.originX:void 0),xy(t.y,e.y,r.y,i?i.originY:void 0)}function vy(t,e,r){t.min=r.min+e.min,t.max=t.min+xr(e)}function kS(t,e,r){vy(t.x,e.x,r.x),vy(t.y,e.y,r.y)}function by(t,e,r){t.min=e.min-r.min,t.max=t.min+xr(e)}function Xa(t,e,r){by(t.x,e.x,r.x),by(t.y,e.y,r.y)}function PS(t,{min:e,max:r},i){return e!==void 0&&t<e?t=i?xt(e,t,i.min):Math.max(t,e):r!==void 0&&t>r&&(t=i?xt(r,t,i.max):Math.min(t,r)),t}function wy(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function TS(t,{top:e,left:r,bottom:i,right:o}){return{x:wy(t.x,r,o),y:wy(t.y,e,i)}}function jy(t,e){let r=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,i]=[i,r]),{min:r,max:i}}function AS(t,e){return{x:jy(t.x,e.x),y:jy(t.y,e.y)}}function RS(t,e){let r=.5;const i=xr(t),o=xr(e);return o>i?r=ao(e.min,e.max-i,t.min):i>o&&(r=ao(t.min,t.max-o,e.min)),on(0,1,r)}function OS(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Em=.35;function DS(t=Em){return t===!1?t=0:t===!0&&(t=Em),{x:_y(t,"left","right"),y:_y(t,"top","bottom")}}function _y(t,e,r){return{min:Ny(t,e),max:Ny(t,r)}}function Ny(t,e){return typeof t=="number"?t:t[e]||0}const Cy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ii=()=>({x:Cy(),y:Cy()}),Sy=()=>({min:0,max:0}),Nt=()=>({x:Sy(),y:Sy()});function Tr(t){return[t("x"),t("y")]}function N0({top:t,left:e,right:r,bottom:i}){return{x:{min:e,max:r},y:{min:t,max:i}}}function MS({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function IS(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}function Yu(t){return t===void 0||t===1}function km({scale:t,scaleX:e,scaleY:r}){return!Yu(t)||!Yu(e)||!Yu(r)}function On(t){return km(t)||C0(t)||t.z||t.rotate||t.rotateX||t.rotateY}function C0(t){return Ey(t.x)||Ey(t.y)}function Ey(t){return t&&t!=="0%"}function uc(t,e,r){const i=t-r,o=e*i;return r+o}function ky(t,e,r,i,o){return o!==void 0&&(t=uc(t,o,i)),uc(t,r,i)+e}function Pm(t,e=0,r=1,i,o){t.min=ky(t.min,e,r,i,o),t.max=ky(t.max,e,r,i,o)}function S0(t,{x:e,y:r}){Pm(t.x,e.translate,e.scale,e.originPoint),Pm(t.y,r.translate,r.scale,r.originPoint)}function LS(t,e,r,i=!1){const o=r.length;if(!o)return;e.x=e.y=1;let l,c;for(let u=0;u<o;u++){l=r[u],c=l.projectionDelta;const m=l.instance;m&&m.style&&m.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Li(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,S0(t,c)),i&&On(l.latestValues)&&Li(t,l.latestValues))}e.x=Py(e.x),e.y=Py(e.y)}function Py(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function tn(t,e){t.min=t.min+e,t.max=t.max+e}function Ty(t,e,[r,i,o]){const l=e[o]!==void 0?e[o]:.5,c=xt(t.min,t.max,l);Pm(t,e[r],e[i],c,e.scale)}const $S=["x","scaleX","originX"],FS=["y","scaleY","originY"];function Li(t,e){Ty(t.x,e,$S),Ty(t.y,e,FS)}function E0(t,e){return N0(IS(t.getBoundingClientRect(),e))}function US(t,e,r){const i=E0(t,r),{scroll:o}=e;return o&&(tn(i.x,o.offset.x),tn(i.y,o.offset.y)),i}const k0=({current:t})=>t?t.ownerDocument.defaultView:null,BS=new WeakMap;class zS{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nt(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Ac(p,"page").point)},l=(p,g)=>{const{drag:y,dragPropagation:b,onDragStart:j}=this.getProps();if(y&&!b&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Bv(y),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tr(_=>{let A=this.getAxisMotionValue(_).get()||0;if(os.test(A)){const{projection:k}=this.visualElement;if(k&&k.layout){const E=k.layout.layoutBox[_];E&&(A=xr(E)*(parseFloat(A)/100))}}this.originPoint[_]=A}),j&&lt.update(()=>j(p,g),!1,!0);const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},c=(p,g)=>{const{dragPropagation:y,dragDirectionLock:b,onDirectionLock:j,onDrag:C}=this.getProps();if(!y&&!this.openGlobalLock)return;const{offset:_}=g;if(b&&this.currentDirection===null){this.currentDirection=VS(_),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",g.point,_),this.updateAxis("y",g.point,_),this.visualElement.render(),C&&C(p,g)},u=(p,g)=>this.stop(p,g),m=()=>Tr(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new j0(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:u,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:k0(this.visualElement)})}stop(e,r){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&lt.update(()=>l(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,i){const{drag:o}=this.getProps();if(!i||!ql(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=PS(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:i}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,l=this.constraints;r&&Di(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&o?this.constraints=TS(o.layoutBox,r):this.constraints=!1,this.elastic=DS(i),l!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Tr(c=>{this.getAxisMotionValue(c)&&(this.constraints[c]=OS(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Di(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=US(i,o.root,this.visualElement.getTransformPagePoint());let c=AS(o.layout.layoutBox,l);if(r){const u=r(MS(c));this.hasMutatedConstraints=!!u,u&&(c=N0(u))}return c}startAnimation(e){const{drag:r,dragMomentum:i,dragElastic:o,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),m=this.constraints||{},h=Tr(p=>{if(!ql(p,r,this.currentDirection))return;let g=m&&m[p]||{};c&&(g={min:0,max:0});const y=o?200:1e6,b=o?40:1e7,j={type:"inertia",velocity:i?e[p]:0,bounceStiffness:y,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...l,...g};return this.startAxisValueAnimation(p,j)});return Promise.all(h).then(u)}startAxisValueAnimation(e,r){const i=this.getAxisMotionValue(e);return i.start(kf(e,i,0,r))}stopAnimation(){Tr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Tr(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),o=i[r];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Tr(r=>{const{drag:i}=this.getProps();if(!ql(r,i,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(r);if(o&&o.layout){const{min:c,max:u}=o.layout.layoutBox[r];l.set(e[r]-xt(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:i}=this.visualElement;if(!Di(r)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Tr(c=>{const u=this.getAxisMotionValue(c);if(u){const m=u.get();o[c]=RS({min:m,max:m},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Tr(c=>{if(!ql(c,e,null))return;const u=this.getAxisMotionValue(c),{min:m,max:h}=this.constraints[c];u.set(xt(m,h,o[c]))})}addListeners(){if(!this.visualElement.current)return;BS.set(this.visualElement,this);const e=this.visualElement.current,r=js(e,"pointerdown",m=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(m)}),i=()=>{const{dragConstraints:m}=this.getProps();Di(m)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),i();const c=ws(window,"resize",()=>this.scalePositionWithinConstraints()),u=o.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:h})=>{this.isDragging&&h&&(Tr(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=m[p].translate,g.set(g.get()+m[p].translate))}),this.visualElement.render())}));return()=>{c(),r(),l(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:c=Em,dragMomentum:u=!0}=e;return{...e,drag:r,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:u}}}function ql(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function VS(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class qS extends fn{constructor(e){super(e),this.removeGroupControls=jt,this.removeListeners=jt,this.controls=new zS(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ay=t=>(e,r)=>{t&&lt.update(()=>t(e,r))};class WS extends fn{constructor(){super(...arguments),this.removePointerDownListener=jt}onPointerDown(e){this.session=new j0(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:k0(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:Ay(e),onStart:Ay(r),onMove:i,onEnd:(l,c)=>{delete this.session,o&&lt.update(()=>o(l,c))}}}mount(){this.removePointerDownListener=js(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function HS(){const t=w.useContext(Sc);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=t,o=w.useId();return w.useEffect(()=>i(o),[]),!e&&r?[!1,()=>r&&r(o)]:[!0]}const tc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ry(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ua={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Be.test(t))t=parseFloat(t);else return t;const r=Ry(t,e.target.x),i=Ry(t,e.target.y);return`${r}% ${i}%`}},GS={correct:(t,{treeScale:e,projectionDelta:r})=>{const i=t,o=ln.parse(t);if(o.length>5)return i;const l=ln.createTransformer(t),c=typeof o[0]!="number"?1:0,u=r.x.scale*e.x,m=r.y.scale*e.y;o[0+c]/=u,o[1+c]/=m;const h=xt(u,m,.5);return typeof o[2+c]=="number"&&(o[2+c]/=h),typeof o[3+c]=="number"&&(o[3+c]/=h),l(o)}};class KS extends nt.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:i,layoutId:o}=this.props,{projection:l}=e;t1(YS),l&&(r.group&&r.group.add(l),i&&i.register&&o&&i.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),tc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:i,drag:o,isPresent:l}=this.props,c=i.projection;return c&&(c.isPresent=l,o||e.layoutDependency!==r||r===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||lt.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:i}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function P0(t){const[e,r]=HS(),i=w.useContext(hf);return nt.createElement(KS,{...t,layoutGroup:i,switchLayoutGroup:w.useContext(Nv),isPresent:e,safeToRemove:r})}const YS={borderRadius:{...Ua,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ua,borderTopRightRadius:Ua,borderBottomLeftRadius:Ua,borderBottomRightRadius:Ua,boxShadow:GS},T0=["TopLeft","TopRight","BottomLeft","BottomRight"],QS=T0.length,Oy=t=>typeof t=="string"?parseFloat(t):t,Dy=t=>typeof t=="number"||Be.test(t);function ZS(t,e,r,i,o,l){o?(t.opacity=xt(0,r.opacity!==void 0?r.opacity:1,JS(i)),t.opacityExit=xt(e.opacity!==void 0?e.opacity:1,0,XS(i))):l&&(t.opacity=xt(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,i));for(let c=0;c<QS;c++){const u=`border${T0[c]}Radius`;let m=My(e,u),h=My(r,u);if(m===void 0&&h===void 0)continue;m||(m=0),h||(h=0),m===0||h===0||Dy(m)===Dy(h)?(t[u]=Math.max(xt(Oy(m),Oy(h),i),0),(os.test(h)||os.test(m))&&(t[u]+="%")):t[u]=h}(e.rotate||r.rotate)&&(t.rotate=xt(e.rotate||0,r.rotate||0,i))}function My(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const JS=A0(0,.5,Xv),XS=A0(.5,.95,jt);function A0(t,e,r){return i=>i<t?0:i>e?1:r(ao(t,e,i))}function Iy(t,e){t.min=e.min,t.max=e.max}function kr(t,e){Iy(t.x,e.x),Iy(t.y,e.y)}function Ly(t,e,r,i,o){return t-=e,t=uc(t,1/r,i),o!==void 0&&(t=uc(t,1/o,i)),t}function e2(t,e=0,r=1,i=.5,o,l=t,c=t){if(os.test(e)&&(e=parseFloat(e),e=xt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=xt(l.min,l.max,i);t===l&&(u-=e),t.min=Ly(t.min,e,r,u,o),t.max=Ly(t.max,e,r,u,o)}function $y(t,e,[r,i,o],l,c){e2(t,e[r],e[i],e[o],e.scale,l,c)}const t2=["x","scaleX","originX"],r2=["y","scaleY","originY"];function Fy(t,e,r,i){$y(t.x,e,t2,r?r.x:void 0,i?i.x:void 0),$y(t.y,e,r2,r?r.y:void 0,i?i.y:void 0)}function Uy(t){return t.translate===0&&t.scale===1}function R0(t){return Uy(t.x)&&Uy(t.y)}function s2(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function O0(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function By(t){return xr(t.x)/xr(t.y)}class n2{constructor(){this.members=[]}add(e){Pf(this.members,e),e.scheduleRender()}remove(e){if(Tf(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(o=>e===o);if(r===0)return!1;let i;for(let o=r;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(e,r){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,r&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:i}=e;r.onExitComplete&&r.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function zy(t,e,r){let i="";const o=t.x.translate/e.x,l=t.y.translate/e.y;if((o||l)&&(i=`translate3d(${o}px, ${l}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:m,rotateX:h,rotateY:p}=r;m&&(i+=`rotate(${m}deg) `),h&&(i+=`rotateX(${h}deg) `),p&&(i+=`rotateY(${p}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(i+=`scale(${c}, ${u})`),i||"none"}const i2=(t,e)=>t.depth-e.depth;class a2{constructor(){this.children=[],this.isDirty=!1}add(e){Pf(this.children,e),this.isDirty=!0}remove(e){Tf(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(i2),this.isDirty=!1,this.children.forEach(e)}}function o2(t,e){const r=performance.now(),i=({timestamp:o})=>{const l=o-r;l>=e&&(Ns(i),t(l-e))};return lt.read(i,!0),()=>Ns(i)}function l2(t){window.MotionDebug&&window.MotionDebug.record(t)}function c2(t){return t instanceof SVGElement&&t.tagName!=="svg"}function d2(t,e,r){const i=cr(t)?t:qi(t);return i.start(kf("",i,e,r)),i.animation}const Vy=["","X","Y","Z"],u2={visibility:"hidden"},qy=1e3;let m2=0;const Dn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function D0({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(c={},u=e?.()){this.id=m2++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Dn.totalNodes=Dn.resolvedTargetDeltas=Dn.recalculatedProjection=0,this.nodes.forEach(p2),this.nodes.forEach(b2),this.nodes.forEach(w2),this.nodes.forEach(g2),l2(Dn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new a2)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Af),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const m=this.eventHandlers.get(c);m&&m.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=c2(c),this.instance=c;const{layoutId:m,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||m)&&(this.isLayoutDirty=!0),t){let g;const y=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=o2(y,250),tc.hasAnimatedSinceResize&&(tc.hasAnimatedSinceResize=!1,this.nodes.forEach(Hy))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&p&&(m||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeTargetChanged:b,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||p.getDefaultTransition()||S2,{onLayoutAnimationStart:_,onLayoutAnimationComplete:A}=p.getProps(),k=!this.targetLayout||!O0(this.targetLayout,j)||b,E=!y&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||y&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,E);const N={...Ef(C,"layout"),onPlay:_,onComplete:A};(p.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else y||Hy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ns(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(j2),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:m}=this.options;if(u===void 0&&!m)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wy);return}this.isUpdating||this.nodes.forEach(x2),this.isUpdating=!1,this.nodes.forEach(v2),this.nodes.forEach(f2),this.nodes.forEach(h2),this.clearAllSnapshots();const u=performance.now();Vt.delta=on(0,1e3/60,u-Vt.timestamp),Vt.timestamp=u,Vt.isProcessing=!0,Fu.update.process(Vt),Fu.preRender.process(Vt),Fu.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(y2),this.sharedNodes.forEach(_2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,lt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){lt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:c,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!R0(this.projectionDelta),m=this.getTransformTemplate(),h=m?m(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;c&&(u||On(this.latestValues)||p)&&(o(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let m=this.removeElementScroll(u);return c&&(m=this.removeTransform(m)),E2(m),{animationId:this.root.animationId,measuredBox:u,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Nt();const u=c.measureViewportBox(),{scroll:m}=this.root;return m&&(tn(u.x,m.offset.x),tn(u.y,m.offset.y)),u}removeElementScroll(c){const u=Nt();kr(u,c);for(let m=0;m<this.path.length;m++){const h=this.path[m],{scroll:p,options:g}=h;if(h!==this.root&&p&&g.layoutScroll){if(p.isRoot){kr(u,c);const{scroll:y}=this.root;y&&(tn(u.x,-y.offset.x),tn(u.y,-y.offset.y))}tn(u.x,p.offset.x),tn(u.y,p.offset.y)}}return u}applyTransform(c,u=!1){const m=Nt();kr(m,c);for(let h=0;h<this.path.length;h++){const p=this.path[h];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Li(m,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),On(p.latestValues)&&Li(m,p.latestValues)}return On(this.latestValues)&&Li(m,this.latestValues),m}removeTransform(c){const u=Nt();kr(u,c);for(let m=0;m<this.path.length;m++){const h=this.path[m];if(!h.instance||!On(h.latestValues))continue;km(h.latestValues)&&h.updateSnapshot();const p=Nt(),g=h.measurePageBox();kr(p,g),Fy(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return On(this.latestValues)&&Fy(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var u;const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==m;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),Xa(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Nt(),this.targetWithTransforms=Nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):kr(this.target,this.layout.layoutBox),S0(this.target,this.targetDelta)):kr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),Xa(this.relativeTargetOrigin,this.target,b.target),kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Dn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||km(this.parent.latestValues)||C0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const u=this.getLead(),m=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(h=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(h=!1),h)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;kr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,b=this.treeScale.y;LS(this.layoutCorrected,this.treeScale,this.path,m),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:j}=u;if(!j){this.projectionTransform&&(this.projectionDelta=Ii(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ii(),this.projectionDeltaWithTransform=Ii());const C=this.projectionTransform;Ja(this.projectionDelta,this.layoutCorrected,j,this.latestValues),this.projectionTransform=zy(this.projectionDelta,this.treeScale),(this.projectionTransform!==C||this.treeScale.x!==y||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j)),Dn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(c,u=!1){const m=this.snapshot,h=m?m.latestValues:{},p={...this.latestValues},g=Ii();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=Nt(),b=m?m.source:void 0,j=this.layout?this.layout.source:void 0,C=b!==j,_=this.getStack(),A=!_||_.members.length<=1,k=!!(C&&!A&&this.options.crossfade===!0&&!this.path.some(C2));this.animationProgress=0;let E;this.mixTargetDelta=N=>{const R=N/1e3;Gy(g.x,c.x,R),Gy(g.y,c.y,R),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xa(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),N2(this.relativeTarget,this.relativeTargetOrigin,y,R),E&&s2(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Nt()),kr(E,this.relativeTarget)),C&&(this.animationValues=p,ZS(p,h,this.latestValues,R,k,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ns(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=lt.update(()=>{tc.hasAnimatedSinceResize=!0,this.currentAnimation=d2(0,qy,{...c,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:m,layout:h,latestValues:p}=c;if(!(!u||!m||!h)){if(this!==c&&this.layout&&h&&M0(this.options.animationType,this.layout.layoutBox,h.layoutBox)){m=this.target||Nt();const g=xr(this.layout.layoutBox.x);m.x.min=c.target.x.min,m.x.max=m.x.min+g;const y=xr(this.layout.layoutBox.y);m.y.min=c.target.y.min,m.y.max=m.y.min+y}kr(u,m),Li(u,p),Ja(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new n2),this.sharedNodes.get(c).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:u}=this.options;return u?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:u}=this.options;return u?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:m}={}){const h=this.getStack();h&&h.promote(this,m),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:m}=c;if((m.rotate||m.rotateX||m.rotateY||m.rotateZ)&&(u=!0),!u)return;const h={};for(let p=0;p<Vy.length;p++){const g="rotate"+Vy[p];m[g]&&(h[g]=m[g],c.setStaticValue(g,0))}c.render();for(const p in h)c.setStaticValue(p,h[p]);c.scheduleRender()}getProjectionStyles(c){var u,m;if(!this.instance||this.isSVG)return;if(!this.isVisible)return u2;const h={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=ec(c?.pointerEvents)||"",h.transform=p?p(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=ec(c?.pointerEvents)||""),this.hasProjected&&!On(this.latestValues)&&(C.transform=p?p({},""):"none",this.hasProjected=!1),C}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=zy(this.projectionDeltaWithTransform,this.treeScale,y),p&&(h.transform=p(y,h.transform));const{x:b,y:j}=this.projectionDelta;h.transformOrigin=`${b.origin*100}% ${j.origin*100}% 0`,g.animationValues?h.opacity=g===this?(m=(u=y.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&m!==void 0?m:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:h.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const C in nc){if(y[C]===void 0)continue;const{correct:_,applyTo:A}=nc[C],k=h.transform==="none"?y[C]:_(y[C],g);if(A){const E=A.length;for(let N=0;N<E;N++)h[A[N]]=k}else h[C]=k}return this.options.layoutId&&(h.pointerEvents=g===this?ec(c?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Wy),this.root.sharedNodes.clear()}}}function f2(t){t.updateLayout()}function h2(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=t.layout,{animationType:l}=t.options,c=r.source!==t.layout.source;l==="size"?Tr(g=>{const y=c?r.measuredBox[g]:r.layoutBox[g],b=xr(y);y.min=i[g].min,y.max=y.min+b}):M0(l,r.layoutBox,i)&&Tr(g=>{const y=c?r.measuredBox[g]:r.layoutBox[g],b=xr(i[g]);y.max=y.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const u=Ii();Ja(u,i,r.layoutBox);const m=Ii();c?Ja(m,t.applyTransform(o,!0),r.measuredBox):Ja(m,i,r.layoutBox);const h=!R0(u);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:b}=g;if(y&&b){const j=Nt();Xa(j,r.layoutBox,y.layoutBox);const C=Nt();Xa(C,i,b.layoutBox),O0(j,C)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=j,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:r,delta:m,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function p2(t){Dn.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function g2(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function y2(t){t.clearSnapshot()}function Wy(t){t.clearMeasurements()}function x2(t){t.isLayoutDirty=!1}function v2(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Hy(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function b2(t){t.resolveTargetDelta()}function w2(t){t.calcProjection()}function j2(t){t.resetRotation()}function _2(t){t.removeLeadSnapshot()}function Gy(t,e,r){t.translate=xt(e.translate,0,r),t.scale=xt(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function Ky(t,e,r,i){t.min=xt(e.min,r.min,i),t.max=xt(e.max,r.max,i)}function N2(t,e,r,i){Ky(t.x,e.x,r.x,i),Ky(t.y,e.y,r.y,i)}function C2(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const S2={duration:.45,ease:[.4,0,.1,1]},Yy=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Qy=Yy("applewebkit/")&&!Yy("chrome/")?Math.round:jt;function Zy(t){t.min=Qy(t.min),t.max=Qy(t.max)}function E2(t){Zy(t.x),Zy(t.y)}function M0(t,e,r){return t==="position"||t==="preserve-aspect"&&!Sm(By(e),By(r),.2)}const k2=D0({attachResizeListener:(t,e)=>ws(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qu={current:void 0},I0=D0({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Qu.current){const t=new k2({});t.mount(window),t.setOptions({layoutScroll:!0}),Qu.current=t}return Qu.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),P2={pan:{Feature:WS},drag:{Feature:qS,ProjectionNode:I0,MeasureLayout:P0}},T2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function A2(t){const e=T2.exec(t);if(!e)return[,];const[,r,i]=e;return[r,i]}function Tm(t,e,r=1){const[i,o]=A2(t);if(!i)return;const l=window.getComputedStyle(e).getPropertyValue(i);if(l){const c=l.trim();return x0(c)?parseFloat(c):c}else return vm(o)?Tm(o,e,r+1):o}function R2(t,{...e},r){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(o=>{const l=o.get();if(!vm(l))return;const c=Tm(l,i);c&&o.set(c)});for(const o in e){const l=e[o];if(!vm(l))continue;const c=Tm(l,i);c&&(e[o]=c,r||(r={}),r[o]===void 0&&(r[o]=l))}return{target:e,transitionEnd:r}}const O2=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),L0=t=>O2.has(t),D2=t=>Object.keys(t).some(L0),Jy=t=>t===Kn||t===Be,Xy=(t,e)=>parseFloat(t.split(", ")[e]),ex=(t,e)=>(r,{transform:i})=>{if(i==="none"||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/);if(o)return Xy(o[1],e);{const l=i.match(/^matrix\((.+)\)$/);return l?Xy(l[1],t):0}},M2=new Set(["x","y","z"]),I2=yo.filter(t=>!M2.has(t));function L2(t){const e=[];return I2.forEach(r=>{const i=t.getValue(r);i!==void 0&&(e.push([r,i.get()]),i.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Wi={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ex(4,13),y:ex(5,14)};Wi.translateX=Wi.x;Wi.translateY=Wi.y;const $2=(t,e,r)=>{const i=e.measureViewportBox(),o=e.current,l=getComputedStyle(o),{display:c}=l,u={};c==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(h=>{u[h]=Wi[h](i,l)}),e.render();const m=e.measureViewportBox();return r.forEach(h=>{const p=e.getValue(h);p&&p.jump(u[h]),t[h]=Wi[h](m,l)}),t},F2=(t,e,r={},i={})=>{e={...e},i={...i};const o=Object.keys(e).filter(L0);let l=[],c=!1;const u=[];if(o.forEach(m=>{const h=t.getValue(m);if(!t.hasValue(m))return;let p=r[m],g=Fa(p);const y=e[m];let b;if(ac(y)){const j=y.length,C=y[0]===null?1:0;p=y[C],g=Fa(p);for(let _=C;_<j&&y[_]!==null;_++)b?jf(Fa(y[_])===b):b=Fa(y[_])}else b=Fa(y);if(g!==b)if(Jy(g)&&Jy(b)){const j=h.get();typeof j=="string"&&h.set(parseFloat(j)),typeof y=="string"?e[m]=parseFloat(y):Array.isArray(y)&&b===Be&&(e[m]=y.map(parseFloat))}else g?.transform&&b?.transform&&(p===0||y===0)?p===0?h.set(b.transform(p)):e[m]=g.transform(y):(c||(l=L2(t),c=!0),u.push(m),i[m]=i[m]!==void 0?i[m]:e[m],h.jump(y))}),u.length){const m=u.indexOf("height")>=0?window.pageYOffset:null,h=$2(e,t,u);return l.length&&l.forEach(([p,g])=>{t.getValue(p).set(g)}),t.render(),Ec&&m!==null&&window.scrollTo({top:m}),{target:h,transitionEnd:i}}else return{target:e,transitionEnd:i}};function U2(t,e,r,i){return D2(e)?F2(t,e,r,i):{target:e,transitionEnd:i}}const B2=(t,e,r,i)=>{const o=R2(t,e,i);return e=o.target,i=o.transitionEnd,U2(t,e,r,i)},Am={current:null},$0={current:!1};function z2(){if($0.current=!0,!!Ec)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Am.current=t.matches;t.addListener(e),e()}else Am.current=!1}function V2(t,e,r){const{willChange:i}=e;for(const o in e){const l=e[o],c=r[o];if(cr(l))t.addValue(o,l),dc(i)&&i.add(o);else if(cr(c))t.addValue(o,qi(l,{owner:t})),dc(i)&&i.remove(o);else if(c!==l)if(t.hasValue(o)){const u=t.getValue(o);!u.hasAnimated&&u.set(l)}else{const u=t.getStaticValue(o);t.addValue(o,qi(u!==void 0?u:l,{owner:t}))}}for(const o in r)e[o]===void 0&&t.removeValue(o);return e}const tx=new WeakMap,F0=Object.keys(io),q2=F0.length,rx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],W2=ff.length;class H2{constructor({parent:e,props:r,presenceContext:i,reducedMotionConfig:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>lt.render(this.render,!1,!0);const{latestValues:u,renderState:m}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=m,this.parent=e,this.props=r,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=c,this.isControllingVariants=Pc(r),this.isVariantNode=_v(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(r,{});for(const g in p){const y=p[g];u[g]!==void 0&&cr(y)&&(y.set(u[g],!1),dc(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,tx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),$0.current||z2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Am.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){tx.delete(this.current),this.projection&&this.projection.unmount(),Ns(this.notifyUpdate),Ns(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const i=Gn.has(e),o=r.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&lt.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),l=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),l()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},i,o,l){let c,u;for(let m=0;m<q2;m++){const h=F0[m],{isEnabled:p,Feature:g,ProjectionNode:y,MeasureLayout:b}=io[h];y&&(c=y),p(r)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),b&&(u=b))}if((this.type==="html"||this.type==="svg")&&!this.projection&&c){this.projection=new c(this.latestValues,this.parent&&this.parent.projection);const{layoutId:m,layout:h,drag:p,dragConstraints:g,layoutScroll:y,layoutRoot:b}=r;this.projection.setOptions({layoutId:m,layout:h,alwaysMeasureLayout:!!p||g&&Di(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:l,layoutScroll:y,layoutRoot:b})}return u}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let i=0;i<rx.length;i++){const o=rx[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l=e["on"+o];l&&(this.propEventSubscriptions[o]=this.on(o,l))}this.prevMotionValues=V2(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const r={};for(let i=0;i<W2;i++){const o=ff[i],l=this.props[o];(no(l)||l===!1)&&(r[o]=l)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&r!==void 0&&(i=qi(r,{owner:this}),this.addValue(e,i)),i}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:i}=this.props,o=typeof i=="string"||typeof i=="object"?(r=wf(this.props,i))===null||r===void 0?void 0:r[e]:void 0;if(i&&o!==void 0)return o;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!cr(l)?l:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Af),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class U0 extends H2{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:i}){delete r[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...i},{transformValues:o},l){let c=cS(i,e||{},this);if(o&&(r&&(r=o(r)),i&&(i=o(i)),c&&(c=o(c))),l){oS(this,i,c);const u=B2(this,i,c,r);r=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:r,...i}}}function G2(t){return window.getComputedStyle(t)}class K2 extends U0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(Gn.has(r)){const i=Sf(r);return i&&i.default||0}else{const i=G2(e),o=(Ev(r)?i.getPropertyValue(r):i[r])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:r}){return E0(e,r)}build(e,r,i,o){gf(e,r,i,o.transformTemplate)}scrapeMotionValuesFromProps(e,r){return bf(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;cr(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,i,o){Ov(e,r,i,o)}}class Y2 extends U0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Gn.has(r)){const i=Sf(r);return i&&i.default||0}return r=Dv.has(r)?r:uf(r),e.getAttribute(r)}measureInstanceViewportBox(){return Nt()}scrapeMotionValuesFromProps(e,r){return Iv(e,r)}build(e,r,i,o){xf(e,r,i,this.isSVGTag,o.transformTemplate)}renderInstance(e,r,i,o){Mv(e,r,i,o)}mount(e){this.isSVGTag=vf(e.tagName),super.mount(e)}}const Q2=(t,e)=>pf(t)?new Y2(e,{enableHardwareAcceleration:!1}):new K2(e,{enableHardwareAcceleration:!0}),Z2={layout:{ProjectionNode:I0,MeasureLayout:P0}},J2={...NS,...q1,...P2,...Z2},oe=XN((t,e)=>A1(t,e,J2,Q2));function B0(){const t=w.useRef(!1);return df(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function X2(){const t=B0(),[e,r]=w.useState(0),i=w.useCallback(()=>{t.current&&r(e+1)},[e]);return[w.useCallback(()=>lt.postRender(i),[i]),e]}class eE extends w.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function tE({children:t,isPresent:e}){const r=w.useId(),i=w.useRef(null),o=w.useRef({width:0,height:0,top:0,left:0});return w.useInsertionEffect(()=>{const{width:l,height:c,top:u,left:m}=o.current;if(e||!i.current||!l||!c)return;i.current.dataset.motionPopId=r;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${u}px !important;
            left: ${m}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),w.createElement(eE,{isPresent:e,childRef:i,sizeRef:o},w.cloneElement(t,{ref:i}))}const Zu=({children:t,initial:e,isPresent:r,onExitComplete:i,custom:o,presenceAffectsLayout:l,mode:c})=>{const u=Lv(rE),m=w.useId(),h=w.useMemo(()=>({id:m,initial:e,isPresent:r,custom:o,onExitComplete:p=>{u.set(p,!0);for(const g of u.values())if(!g)return;i&&i()},register:p=>(u.set(p,!1),()=>u.delete(p))}),l?void 0:[r]);return w.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[r]),w.useEffect(()=>{!r&&!u.size&&i&&i()},[r]),c==="popLayout"&&(t=w.createElement(tE,{isPresent:r},t)),w.createElement(Sc.Provider,{value:h},t)};function rE(){return new Map}function sE(t){return w.useEffect(()=>()=>t(),[])}const Mn=t=>t.key||"";function nE(t,e){t.forEach(r=>{const i=Mn(r);e.set(i,r)})}function iE(t){const e=[];return w.Children.forEach(t,r=>{w.isValidElement(r)&&e.push(r)}),e}const Zt=({children:t,custom:e,initial:r=!0,onExitComplete:i,exitBeforeEnter:o,presenceAffectsLayout:l=!0,mode:c="sync"})=>{const u=w.useContext(hf).forceRender||X2()[0],m=B0(),h=iE(t);let p=h;const g=w.useRef(new Map).current,y=w.useRef(p),b=w.useRef(new Map).current,j=w.useRef(!0);if(df(()=>{j.current=!1,nE(h,b),y.current=p}),sE(()=>{j.current=!0,b.clear(),g.clear()}),j.current)return w.createElement(w.Fragment,null,p.map(k=>w.createElement(Zu,{key:Mn(k),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:l,mode:c},k)));p=[...p];const C=y.current.map(Mn),_=h.map(Mn),A=C.length;for(let k=0;k<A;k++){const E=C[k];_.indexOf(E)===-1&&!g.has(E)&&g.set(E,void 0)}return c==="wait"&&g.size&&(p=[]),g.forEach((k,E)=>{if(_.indexOf(E)!==-1)return;const N=b.get(E);if(!N)return;const R=C.indexOf(E);let T=k;if(!T){const M=()=>{g.delete(E);const I=Array.from(b.keys()).filter(Q=>!_.includes(Q));if(I.forEach(Q=>b.delete(Q)),y.current=h.filter(Q=>{const H=Mn(Q);return H===E||I.includes(H)}),!g.size){if(m.current===!1)return;u(),i&&i()}};T=w.createElement(Zu,{key:Mn(N),isPresent:!1,onExitComplete:M,custom:e,presenceAffectsLayout:l,mode:c},N),g.set(E,T)}p.splice(R,0,T)}),p=p.map(k=>{const E=k.key;return g.has(E)?k:w.createElement(Zu,{key:Mn(k),isPresent:!0,presenceAffectsLayout:l,mode:c},k)}),w.createElement(w.Fragment,null,g.size?p:p.map(k=>w.cloneElement(k)))};function z0(t){var e,r,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=z0(t[e]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}function V0(){for(var t,e,r=0,i="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=z0(t))&&(i&&(i+=" "),i+=e);return i}function aE(){for(var t=0,e,r,i="";t<arguments.length;)(e=arguments[t++])&&(r=q0(e))&&(i&&(i+=" "),i+=r);return i}function q0(t){if(typeof t=="string")return t;for(var e,r="",i=0;i<t.length;i++)t[i]&&(e=q0(t[i]))&&(r&&(r+=" "),r+=e);return r}var Rf="-";function oE(t){var e=cE(t),r=t.conflictingClassGroups,i=t.conflictingClassGroupModifiers,o=i===void 0?{}:i;function l(u){var m=u.split(Rf);return m[0]===""&&m.length!==1&&m.shift(),W0(m,e)||lE(u)}function c(u,m){var h=r[u]||[];return m&&o[u]?[].concat(h,o[u]):h}return{getClassGroupId:l,getConflictingClassGroupIds:c}}function W0(t,e){if(t.length===0)return e.classGroupId;var r=t[0],i=e.nextPart.get(r),o=i?W0(t.slice(1),i):void 0;if(o)return o;if(e.validators.length!==0){var l=t.join(Rf);return e.validators.find(function(c){var u=c.validator;return u(l)})?.classGroupId}}var sx=/^\[(.+)\]$/;function lE(t){if(sx.test(t)){var e=sx.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function cE(t){var e=t.theme,r=t.prefix,i={nextPart:new Map,validators:[]},o=uE(Object.entries(t.classGroups),r);return o.forEach(function(l){var c=l[0],u=l[1];Rm(u,i,c,e)}),i}function Rm(t,e,r,i){t.forEach(function(o){if(typeof o=="string"){var l=o===""?e:nx(e,o);l.classGroupId=r;return}if(typeof o=="function"){if(dE(o)){Rm(o(i),e,r,i);return}e.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(function(c){var u=c[0],m=c[1];Rm(m,nx(e,u),r,i)})})}function nx(t,e){var r=t;return e.split(Rf).forEach(function(i){r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r}function dE(t){return t.isThemeGetter}function uE(t,e){return e?t.map(function(r){var i=r[0],o=r[1],l=o.map(function(c){return typeof c=="string"?e+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(function(u){var m=u[0],h=u[1];return[e+m,h]})):c});return[i,l]}):t}function mE(t){if(t<1)return{get:function(){},set:function(){}};var e=0,r=new Map,i=new Map;function o(l,c){r.set(l,c),e++,e>t&&(e=0,i=r,r=new Map)}return{get:function(c){var u=r.get(c);if(u!==void 0)return u;if((u=i.get(c))!==void 0)return o(c,u),u},set:function(c,u){r.has(c)?r.set(c,u):o(c,u)}}}var H0="!";function fE(t){var e=t.separator||":",r=e.length===1,i=e[0],o=e.length;return function(c){for(var u=[],m=0,h=0,p,g=0;g<c.length;g++){var y=c[g];if(m===0){if(y===i&&(r||c.slice(g,g+o)===e)){u.push(c.slice(h,g)),h=g+o;continue}if(y==="/"){p=g;continue}}y==="["?m++:y==="]"&&m--}var b=u.length===0?c:c.substring(h),j=b.startsWith(H0),C=j?b.substring(1):b,_=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:j,baseClassName:C,maybePostfixModifierPosition:_}}}function hE(t){if(t.length<=1)return t;var e=[],r=[];return t.forEach(function(i){var o=i[0]==="[";o?(e.push.apply(e,r.sort().concat([i])),r=[]):r.push(i)}),e.push.apply(e,r.sort()),e}function pE(t){return{cache:mE(t.cacheSize),splitModifiers:fE(t),...oE(t)}}var gE=/\s+/;function yE(t,e){var r=e.splitModifiers,i=e.getClassGroupId,o=e.getConflictingClassGroupIds,l=new Set;return t.trim().split(gE).map(function(c){var u=r(c),m=u.modifiers,h=u.hasImportantModifier,p=u.baseClassName,g=u.maybePostfixModifierPosition,y=i(g?p.substring(0,g):p),b=!!g;if(!y){if(!g)return{isTailwindClass:!1,originalClassName:c};if(y=i(p),!y)return{isTailwindClass:!1,originalClassName:c};b=!1}var j=hE(m).join(":"),C=h?j+H0:j;return{isTailwindClass:!0,modifierId:C,classGroupId:y,originalClassName:c,hasPostfixModifier:b}}).reverse().filter(function(c){if(!c.isTailwindClass)return!0;var u=c.modifierId,m=c.classGroupId,h=c.hasPostfixModifier,p=u+m;return l.has(p)?!1:(l.add(p),o(m,h).forEach(function(g){return l.add(u+g)}),!0)}).reverse().map(function(c){return c.originalClassName}).join(" ")}function xE(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,o,l,c=u;function u(h){var p=e[0],g=e.slice(1),y=g.reduce(function(b,j){return j(b)},p());return i=pE(y),o=i.cache.get,l=i.cache.set,c=m,m(h)}function m(h){var p=o(h);if(p)return p;var g=yE(h,i);return l(h,g),g}return function(){return c(aE.apply(null,arguments))}}function mt(t){var e=function(i){return i[t]||[]};return e.isThemeGetter=!0,e}var G0=/^\[(?:([a-z-]+):)?(.+)\]$/i,vE=/^\d+\/\d+$/,bE=new Set(["px","full","screen"]),wE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_E=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Vr(t){return Un(t)||bE.has(t)||vE.test(t)||Om(t)}function Om(t){return Yn(t,"length",PE)}function NE(t){return Yn(t,"size",K0)}function CE(t){return Yn(t,"position",K0)}function SE(t){return Yn(t,"url",TE)}function Wl(t){return Yn(t,"number",Un)}function Un(t){return!Number.isNaN(Number(t))}function EE(t){return t.endsWith("%")&&Un(t.slice(0,-1))}function Ba(t){return ix(t)||Yn(t,"number",ix)}function Ye(t){return G0.test(t)}function za(){return!0}function Qs(t){return wE.test(t)}function kE(t){return Yn(t,"",AE)}function Yn(t,e,r){var i=G0.exec(t);return i?i[1]?i[1]===e:r(i[2]):!1}function PE(t){return jE.test(t)}function K0(){return!1}function TE(t){return t.startsWith("url(")}function ix(t){return Number.isInteger(Number(t))}function AE(t){return _E.test(t)}function RE(){var t=mt("colors"),e=mt("spacing"),r=mt("blur"),i=mt("brightness"),o=mt("borderColor"),l=mt("borderRadius"),c=mt("borderSpacing"),u=mt("borderWidth"),m=mt("contrast"),h=mt("grayscale"),p=mt("hueRotate"),g=mt("invert"),y=mt("gap"),b=mt("gradientColorStops"),j=mt("gradientColorStopPositions"),C=mt("inset"),_=mt("margin"),A=mt("opacity"),k=mt("padding"),E=mt("saturate"),N=mt("scale"),R=mt("sepia"),T=mt("skew"),M=mt("space"),I=mt("translate"),Q=function(){return["auto","contain","none"]},H=function(){return["auto","hidden","clip","visible","scroll"]},be=function(){return["auto",Ye,e]},z=function(){return[Ye,e]},de=function(){return["",Vr]},ee=function(){return["auto",Un,Ye]},ce=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},se=function(){return["solid","dashed","dotted","double","none"]},ue=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},$=function(){return["start","end","center","between","around","evenly","stretch"]},ne=function(){return["","0",Ye]},ae=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},P=function(){return[Un,Wl]},F=function(){return[Un,Ye]};return{cacheSize:500,theme:{colors:[za],spacing:[Vr],blur:["none","",Qs,Ye],brightness:P(),borderColor:[t],borderRadius:["none","","full",Qs,Ye],borderSpacing:z(),borderWidth:de(),contrast:P(),grayscale:ne(),hueRotate:F(),invert:ne(),gap:z(),gradientColorStops:[t],gradientColorStopPositions:[EE,Om],inset:be(),margin:be(),opacity:P(),padding:z(),saturate:P(),scale:P(),sepia:ne(),skew:F(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",Ye]}],container:["container"],columns:[{columns:[Qs]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(ce(),[Ye])}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:Q()}],"overscroll-x":[{"overscroll-x":Q()}],"overscroll-y":[{"overscroll-y":Q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ba]}],basis:[{basis:be()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ye]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",Ba]}],"grid-cols":[{"grid-cols":[za]}],"col-start-end":[{col:["auto",{span:["full",Ba]},Ye]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[za]}],"row-start-end":[{row:["auto",{span:[Ba]},Ye]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ye]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal"].concat($())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat($(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat($(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ye,e]}],"min-w":[{"min-w":["min","max","fit",Ye,Vr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Qs]},Qs,Ye]}],h:[{h:[Ye,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ye,Vr]}],"max-h":[{"max-h":[Ye,e,"min","max","fit"]}],"font-size":[{text:["base",Qs,Om]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wl]}],"font-family":[{font:[za]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ye]}],"line-clamp":[{"line-clamp":["none",Un,Wl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ye,Vr]}],"list-image":[{"list-image":["none",Ye]}],"list-style-type":[{list:["none","disc","decimal",Ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(se(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Vr]}],"underline-offset":[{"underline-offset":["auto",Ye,Vr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(ce(),[CE])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",NE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},SE]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[].concat(se(),["hidden"])}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:se()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:[""].concat(se())}],"outline-offset":[{"outline-offset":[Ye,Vr]}],"outline-w":[{outline:[Vr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[Vr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Qs,kE]}],"shadow-color":[{shadow:[za]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":ue()}],"bg-blend":[{"bg-blend":ue()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[m]}],"drop-shadow":[{"drop-shadow":["","none",Qs,Ye]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[g]}],saturate:[{saturate:[E]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[m]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ye]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Ye]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Ba,Ye]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ye]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Vr,Wl]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var OE=xE(RE);function Qn(...t){return OE(V0(t))}var Oc=uv();const DE=Hn(Oc);function At(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}function ax(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Y0(...t){return e=>{let r=!1;const i=t.map(o=>{const l=ax(o,e);return!r&&typeof l=="function"&&(r=!0),l});if(r)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():ax(t[o],null)}}}}function Kr(...t){return w.useCallback(Y0(...t),t)}function wo(t,e=[]){let r=[];function i(l,c){const u=w.createContext(c),m=r.length;r=[...r,c];const h=g=>{const{scope:y,children:b,...j}=g,C=y?.[t]?.[m]||u,_=w.useMemo(()=>j,Object.values(j));return s.jsx(C.Provider,{value:_,children:b})};h.displayName=l+"Provider";function p(g,y){const b=y?.[t]?.[m]||u,j=w.useContext(b);if(j)return j;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${l}\``)}return[h,p]}const o=()=>{const l=r.map(c=>w.createContext(c));return function(u){const m=u?.[t]||l;return w.useMemo(()=>({[`__scope${t}`]:{...u,[t]:m}}),[u,m])}};return o.scopeName=t,[i,ME(o,...e)]}function ME(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const i=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const c=i.reduce((u,{useScope:m,scopeName:h})=>{const g=m(l)[`__scope${h}`];return{...u,...g}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return r.scopeName=e.scopeName,r}function mc(t){const e=LE(t),r=w.forwardRef((i,o)=>{const{children:l,...c}=i,u=w.Children.toArray(l),m=u.find(FE);if(m){const h=m.props.children,p=u.map(g=>g===m?w.Children.count(h)>1?w.Children.only(null):w.isValidElement(h)?h.props.children:null:g);return s.jsx(e,{...c,ref:o,children:w.isValidElement(h)?w.cloneElement(h,void 0,p):null})}return s.jsx(e,{...c,ref:o,children:l})});return r.displayName=`${t}.Slot`,r}var IE=mc("Slot");function LE(t){const e=w.forwardRef((r,i)=>{const{children:o,...l}=r;if(w.isValidElement(o)){const c=BE(o),u=UE(l,o.props);return o.type!==w.Fragment&&(u.ref=i?Y0(i,c):c),w.cloneElement(o,u)}return w.Children.count(o)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Q0=Symbol("radix.slottable");function $E(t){const e=({children:r})=>s.jsx(s.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=Q0,e}function FE(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Q0}function UE(t,e){const r={...e};for(const i in e){const o=t[i],l=e[i];/^on[A-Z]/.test(i)?o&&l?r[i]=(...u)=>{const m=l(...u);return o(...u),m}:o&&(r[i]=o):i==="style"?r[i]={...o,...l}:i==="className"&&(r[i]=[o,l].filter(Boolean).join(" "))}return{...t,...r}}function BE(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function zE(t){const e=t+"CollectionProvider",[r,i]=wo(e),[o,l]=r(e,{collectionRef:{current:null},itemMap:new Map}),c=C=>{const{scope:_,children:A}=C,k=nt.useRef(null),E=nt.useRef(new Map).current;return s.jsx(o,{scope:_,itemMap:E,collectionRef:k,children:A})};c.displayName=e;const u=t+"CollectionSlot",m=mc(u),h=nt.forwardRef((C,_)=>{const{scope:A,children:k}=C,E=l(u,A),N=Kr(_,E.collectionRef);return s.jsx(m,{ref:N,children:k})});h.displayName=u;const p=t+"CollectionItemSlot",g="data-radix-collection-item",y=mc(p),b=nt.forwardRef((C,_)=>{const{scope:A,children:k,...E}=C,N=nt.useRef(null),R=Kr(_,N),T=l(p,A);return nt.useEffect(()=>(T.itemMap.set(N,{ref:N,...E}),()=>void T.itemMap.delete(N))),s.jsx(y,{[g]:"",ref:R,children:k})});b.displayName=p;function j(C){const _=l(t+"CollectionConsumer",C);return nt.useCallback(()=>{const k=_.collectionRef.current;if(!k)return[];const E=Array.from(k.querySelectorAll(`[${g}]`));return Array.from(_.itemMap.values()).sort((T,M)=>E.indexOf(T.ref.current)-E.indexOf(M.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:c,Slot:h,ItemSlot:b},j,i]}var VE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$t=VE.reduce((t,e)=>{const r=mc(`Primitive.${e}`),i=w.forwardRef((o,l)=>{const{asChild:c,...u}=o,m=c?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(m,{...u,ref:l})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function Z0(t,e){t&&Oc.flushSync(()=>t.dispatchEvent(e))}function Cs(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...r)=>e.current?.(...r),[])}function qE(t,e=globalThis?.document){const r=Cs(t);w.useEffect(()=>{const i=o=>{o.key==="Escape"&&r(o)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[r,e])}var WE="DismissableLayer",Dm="dismissableLayer.update",HE="dismissableLayer.pointerDownOutside",GE="dismissableLayer.focusOutside",ox,J0=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Of=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...m}=t,h=w.useContext(J0),[p,g]=w.useState(null),y=p?.ownerDocument??globalThis?.document,[,b]=w.useState({}),j=Kr(e,M=>g(M)),C=Array.from(h.layers),[_]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),A=C.indexOf(_),k=p?C.indexOf(p):-1,E=h.layersWithOutsidePointerEventsDisabled.size>0,N=k>=A,R=YE(M=>{const I=M.target,Q=[...h.branches].some(H=>H.contains(I));!N||Q||(o?.(M),c?.(M),M.defaultPrevented||u?.())},y),T=QE(M=>{const I=M.target;[...h.branches].some(H=>H.contains(I))||(l?.(M),c?.(M),M.defaultPrevented||u?.())},y);return qE(M=>{k===h.layers.size-1&&(i?.(M),!M.defaultPrevented&&u&&(M.preventDefault(),u()))},y),w.useEffect(()=>{if(p)return r&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(ox=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),lx(),()=>{r&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=ox)}},[p,y,r,h]),w.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),lx())},[p,h]),w.useEffect(()=>{const M=()=>b({});return document.addEventListener(Dm,M),()=>document.removeEventListener(Dm,M)},[]),s.jsx($t.div,{...m,ref:j,style:{pointerEvents:E?N?"auto":"none":void 0,...t.style},onFocusCapture:At(t.onFocusCapture,T.onFocusCapture),onBlurCapture:At(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:At(t.onPointerDownCapture,R.onPointerDownCapture)})});Of.displayName=WE;var KE="DismissableLayerBranch",X0=w.forwardRef((t,e)=>{const r=w.useContext(J0),i=w.useRef(null),o=Kr(e,i);return w.useEffect(()=>{const l=i.current;if(l)return r.branches.add(l),()=>{r.branches.delete(l)}},[r.branches]),s.jsx($t.div,{...t,ref:o})});X0.displayName=KE;function YE(t,e=globalThis?.document){const r=Cs(t),i=w.useRef(!1),o=w.useRef(()=>{});return w.useEffect(()=>{const l=u=>{if(u.target&&!i.current){let m=function(){eb(HE,r,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=m,e.addEventListener("click",o.current,{once:!0})):m()}else e.removeEventListener("click",o.current);i.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",o.current)}},[e,r]),{onPointerDownCapture:()=>i.current=!0}}function QE(t,e=globalThis?.document){const r=Cs(t),i=w.useRef(!1);return w.useEffect(()=>{const o=l=>{l.target&&!i.current&&eb(GE,r,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function lx(){const t=new CustomEvent(Dm);document.dispatchEvent(t)}function eb(t,e,r,{discrete:i}){const o=r.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&o.addEventListener(t,e,{once:!0}),i?Z0(o,l):o.dispatchEvent(l)}var ZE=Of,JE=X0,Dr=globalThis?.document?w.useLayoutEffect:()=>{},XE="Portal",Df=w.forwardRef((t,e)=>{const{container:r,...i}=t,[o,l]=w.useState(!1);Dr(()=>l(!0),[]);const c=r||o&&globalThis?.document?.body;return c?DE.createPortal(s.jsx($t.div,{...i,ref:e}),c):null});Df.displayName=XE;function ek(t,e){return w.useReducer((r,i)=>e[r][i]??r,t)}var Dc=t=>{const{present:e,children:r}=t,i=tk(e),o=typeof r=="function"?r({present:i.isPresent}):w.Children.only(r),l=Kr(i.ref,rk(o));return typeof r=="function"||i.isPresent?w.cloneElement(o,{ref:l}):null};Dc.displayName="Presence";function tk(t){const[e,r]=w.useState(),i=w.useRef(null),o=w.useRef(t),l=w.useRef("none"),c=t?"mounted":"unmounted",[u,m]=ek(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const h=Hl(i.current);l.current=u==="mounted"?h:"none"},[u]),Dr(()=>{const h=i.current,p=o.current;if(p!==t){const y=l.current,b=Hl(h);t?m("MOUNT"):b==="none"||h?.display==="none"?m("UNMOUNT"):m(p&&y!==b?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,m]),Dr(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,g=b=>{const C=Hl(i.current).includes(CSS.escape(b.animationName));if(b.target===e&&C&&(m("ANIMATION_END"),!o.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},y=b=>{b.target===e&&(l.current=Hl(i.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else m("ANIMATION_END")},[e,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:w.useCallback(h=>{i.current=h?getComputedStyle(h):null,r(h)},[])}}function Hl(t){return t?.animationName||"none"}function rk(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var sk=dv[" useInsertionEffect ".trim().toString()]||Dr;function tb({prop:t,defaultProp:e,onChange:r=()=>{},caller:i}){const[o,l,c]=nk({defaultProp:e,onChange:r}),u=t!==void 0,m=u?t:o;{const p=w.useRef(t!==void 0);w.useEffect(()=>{const g=p.current;g!==u&&console.warn(`${i} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,i])}const h=w.useCallback(p=>{if(u){const g=ik(p)?p(t):p;g!==t&&c.current?.(g)}else l(p)},[u,t,l,c]);return[m,h]}function nk({defaultProp:t,onChange:e}){const[r,i]=w.useState(t),o=w.useRef(r),l=w.useRef(e);return sk(()=>{l.current=e},[e]),w.useEffect(()=>{o.current!==r&&(l.current?.(r),o.current=r)},[r,o]),[r,i,l]}function ik(t){return typeof t=="function"}var ak=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ok="VisuallyHidden",Mc=w.forwardRef((t,e)=>s.jsx($t.span,{...t,ref:e,style:{...ak,...t.style}}));Mc.displayName=ok;var lk=Mc,Mf="ToastProvider",[If,ck,dk]=zE("Toast"),[rb]=wo("Toast",[dk]),[uk,Ic]=rb(Mf),sb=t=>{const{__scopeToast:e,label:r="Notification",duration:i=5e3,swipeDirection:o="right",swipeThreshold:l=50,children:c}=t,[u,m]=w.useState(null),[h,p]=w.useState(0),g=w.useRef(!1),y=w.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Mf}\`. Expected non-empty \`string\`.`),s.jsx(If.Provider,{scope:e,children:s.jsx(uk,{scope:e,label:r,duration:i,swipeDirection:o,swipeThreshold:l,toastCount:h,viewport:u,onViewportChange:m,onToastAdd:w.useCallback(()=>p(b=>b+1),[]),onToastRemove:w.useCallback(()=>p(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:y,children:c})})};sb.displayName=Mf;var nb="ToastViewport",mk=["F8"],Mm="toast.viewportPause",Im="toast.viewportResume",ib=w.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:i=mk,label:o="Notifications ({hotkey})",...l}=t,c=Ic(nb,r),u=ck(r),m=w.useRef(null),h=w.useRef(null),p=w.useRef(null),g=w.useRef(null),y=Kr(e,g,c.onViewportChange),b=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=c.toastCount>0;w.useEffect(()=>{const _=A=>{i.length!==0&&i.every(E=>A[E]||A.code===E)&&g.current?.focus()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[i]),w.useEffect(()=>{const _=m.current,A=g.current;if(j&&_&&A){const k=()=>{if(!c.isClosePausedRef.current){const T=new CustomEvent(Mm);A.dispatchEvent(T),c.isClosePausedRef.current=!0}},E=()=>{if(c.isClosePausedRef.current){const T=new CustomEvent(Im);A.dispatchEvent(T),c.isClosePausedRef.current=!1}},N=T=>{!_.contains(T.relatedTarget)&&E()},R=()=>{_.contains(document.activeElement)||E()};return _.addEventListener("focusin",k),_.addEventListener("focusout",N),_.addEventListener("pointermove",k),_.addEventListener("pointerleave",R),window.addEventListener("blur",k),window.addEventListener("focus",E),()=>{_.removeEventListener("focusin",k),_.removeEventListener("focusout",N),_.removeEventListener("pointermove",k),_.removeEventListener("pointerleave",R),window.removeEventListener("blur",k),window.removeEventListener("focus",E)}}},[j,c.isClosePausedRef]);const C=w.useCallback(({tabbingDirection:_})=>{const k=u().map(E=>{const N=E.ref.current,R=[N,...Ck(N)];return _==="forwards"?R:R.reverse()});return(_==="forwards"?k.reverse():k).flat()},[u]);return w.useEffect(()=>{const _=g.current;if(_){const A=k=>{const E=k.altKey||k.ctrlKey||k.metaKey;if(k.key==="Tab"&&!E){const R=document.activeElement,T=k.shiftKey;if(k.target===_&&T){h.current?.focus();return}const Q=C({tabbingDirection:T?"backwards":"forwards"}),H=Q.findIndex(be=>be===R);Ju(Q.slice(H+1))?k.preventDefault():T?h.current?.focus():p.current?.focus()}};return _.addEventListener("keydown",A),()=>_.removeEventListener("keydown",A)}},[u,C]),s.jsxs(JE,{ref:m,role:"region","aria-label":o.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&s.jsx(Lm,{ref:h,onFocusFromOutsideViewport:()=>{const _=C({tabbingDirection:"forwards"});Ju(_)}}),s.jsx(If.Slot,{scope:r,children:s.jsx($t.ol,{tabIndex:-1,...l,ref:y})}),j&&s.jsx(Lm,{ref:p,onFocusFromOutsideViewport:()=>{const _=C({tabbingDirection:"backwards"});Ju(_)}})]})});ib.displayName=nb;var ab="ToastFocusProxy",Lm=w.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:i,...o}=t,l=Ic(ab,r);return s.jsx(Mc,{tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:c=>{const u=c.relatedTarget;!l.viewport?.contains(u)&&i()}})});Lm.displayName=ab;var jo="Toast",fk="toast.swipeStart",hk="toast.swipeMove",pk="toast.swipeCancel",gk="toast.swipeEnd",ob=w.forwardRef((t,e)=>{const{forceMount:r,open:i,defaultOpen:o,onOpenChange:l,...c}=t,[u,m]=tb({prop:i,defaultProp:o??!0,onChange:l,caller:jo});return s.jsx(Dc,{present:r||u,children:s.jsx(vk,{open:u,...c,ref:e,onClose:()=>m(!1),onPause:Cs(t.onPause),onResume:Cs(t.onResume),onSwipeStart:At(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:At(t.onSwipeMove,h=>{const{x:p,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:At(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:At(t.onSwipeEnd,h=>{const{x:p,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),m(!1)})})})});ob.displayName=jo;var[yk,xk]=rb(jo,{onClose(){}}),vk=w.forwardRef((t,e)=>{const{__scopeToast:r,type:i="foreground",duration:o,open:l,onClose:c,onEscapeKeyDown:u,onPause:m,onResume:h,onSwipeStart:p,onSwipeMove:g,onSwipeCancel:y,onSwipeEnd:b,...j}=t,C=Ic(jo,r),[_,A]=w.useState(null),k=Kr(e,ee=>A(ee)),E=w.useRef(null),N=w.useRef(null),R=o||C.duration,T=w.useRef(0),M=w.useRef(R),I=w.useRef(0),{onToastAdd:Q,onToastRemove:H}=C,be=Cs(()=>{_?.contains(document.activeElement)&&C.viewport?.focus(),c()}),z=w.useCallback(ee=>{!ee||ee===1/0||(window.clearTimeout(I.current),T.current=new Date().getTime(),I.current=window.setTimeout(be,ee))},[be]);w.useEffect(()=>{const ee=C.viewport;if(ee){const ce=()=>{z(M.current),h?.()},se=()=>{const ue=new Date().getTime()-T.current;M.current=M.current-ue,window.clearTimeout(I.current),m?.()};return ee.addEventListener(Mm,se),ee.addEventListener(Im,ce),()=>{ee.removeEventListener(Mm,se),ee.removeEventListener(Im,ce)}}},[C.viewport,R,m,h,z]),w.useEffect(()=>{l&&!C.isClosePausedRef.current&&z(R)},[l,R,C.isClosePausedRef,z]),w.useEffect(()=>(Q(),()=>H()),[Q,H]);const de=w.useMemo(()=>_?hb(_):null,[_]);return C.viewport?s.jsxs(s.Fragment,{children:[de&&s.jsx(bk,{__scopeToast:r,role:"status","aria-live":i==="foreground"?"assertive":"polite",children:de}),s.jsx(yk,{scope:r,onClose:be,children:Oc.createPortal(s.jsx(If.ItemSlot,{scope:r,children:s.jsx(ZE,{asChild:!0,onEscapeKeyDown:At(u,()=>{C.isFocusedToastEscapeKeyDownRef.current||be(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx($t.li,{tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":C.swipeDirection,...j,ref:k,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:At(t.onKeyDown,ee=>{ee.key==="Escape"&&(u?.(ee.nativeEvent),ee.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,be()))}),onPointerDown:At(t.onPointerDown,ee=>{ee.button===0&&(E.current={x:ee.clientX,y:ee.clientY})}),onPointerMove:At(t.onPointerMove,ee=>{if(!E.current)return;const ce=ee.clientX-E.current.x,se=ee.clientY-E.current.y,ue=!!N.current,$=["left","right"].includes(C.swipeDirection),ne=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,ae=$?ne(0,ce):0,P=$?0:ne(0,se),F=ee.pointerType==="touch"?10:2,te={x:ae,y:P},me={originalEvent:ee,delta:te};ue?(N.current=te,Gl(hk,g,me,{discrete:!1})):cx(te,C.swipeDirection,F)?(N.current=te,Gl(fk,p,me,{discrete:!1}),ee.target.setPointerCapture(ee.pointerId)):(Math.abs(ce)>F||Math.abs(se)>F)&&(E.current=null)}),onPointerUp:At(t.onPointerUp,ee=>{const ce=N.current,se=ee.target;if(se.hasPointerCapture(ee.pointerId)&&se.releasePointerCapture(ee.pointerId),N.current=null,E.current=null,ce){const ue=ee.currentTarget,$={originalEvent:ee,delta:ce};cx(ce,C.swipeDirection,C.swipeThreshold)?Gl(gk,b,$,{discrete:!0}):Gl(pk,y,$,{discrete:!0}),ue.addEventListener("click",ne=>ne.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),bk=t=>{const{__scopeToast:e,children:r,...i}=t,o=Ic(jo,e),[l,c]=w.useState(!1),[u,m]=w.useState(!1);return _k(()=>c(!0)),w.useEffect(()=>{const h=window.setTimeout(()=>m(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:s.jsx(Df,{asChild:!0,children:s.jsx(Mc,{...i,children:l&&s.jsxs(s.Fragment,{children:[o.label," ",r]})})})},wk="ToastTitle",lb=w.forwardRef((t,e)=>{const{__scopeToast:r,...i}=t;return s.jsx($t.div,{...i,ref:e})});lb.displayName=wk;var jk="ToastDescription",cb=w.forwardRef((t,e)=>{const{__scopeToast:r,...i}=t;return s.jsx($t.div,{...i,ref:e})});cb.displayName=jk;var db="ToastAction",ub=w.forwardRef((t,e)=>{const{altText:r,...i}=t;return r.trim()?s.jsx(fb,{altText:r,asChild:!0,children:s.jsx(Lf,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${db}\`. Expected non-empty \`string\`.`),null)});ub.displayName=db;var mb="ToastClose",Lf=w.forwardRef((t,e)=>{const{__scopeToast:r,...i}=t,o=xk(mb,r);return s.jsx(fb,{asChild:!0,children:s.jsx($t.button,{type:"button",...i,ref:e,onClick:At(t.onClick,o.onClose)})})});Lf.displayName=mb;var fb=w.forwardRef((t,e)=>{const{__scopeToast:r,altText:i,...o}=t;return s.jsx($t.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...o,ref:e})});function hb(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),Nk(i)){const o=i.ariaHidden||i.hidden||i.style.display==="none",l=i.dataset.radixToastAnnounceExclude==="";if(!o)if(l){const c=i.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...hb(i))}}),e}function Gl(t,e,r,{discrete:i}){const o=r.originalEvent.currentTarget,l=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&o.addEventListener(t,e,{once:!0}),i?Z0(o,l):o.dispatchEvent(l)}var cx=(t,e,r=0)=>{const i=Math.abs(t.x),o=Math.abs(t.y),l=i>o;return e==="left"||e==="right"?l&&i>r:!l&&o>r};function _k(t=()=>{}){const e=Cs(t);Dr(()=>{let r=0,i=0;return r=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(i)}},[e])}function Nk(t){return t.nodeType===t.ELEMENT_NODE}function Ck(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Ju(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var Sk=sb,pb=ib,gb=ob,yb=lb,xb=cb,vb=ub,bb=Lf;const dx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ux=V0,wb=(t,e)=>r=>{var i;if(e?.variants==null)return ux(t,r?.class,r?.className);const{variants:o,defaultVariants:l}=e,c=Object.keys(o).map(h=>{const p=r?.[h],g=l?.[h];if(p===null)return null;const y=dx(p)||dx(g);return o[h][y]}),u=r&&Object.entries(r).reduce((h,p)=>{let[g,y]=p;return y===void 0||(h[g]=y),h},{}),m=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((h,p)=>{let{class:g,className:y,...b}=p;return Object.entries(b).every(j=>{let[C,_]=j;return Array.isArray(_)?_.includes({...l,...u}[C]):{...l,...u}[C]===_})?[...h,g,y]:h},[]);return ux(t,c,m,r?.class,r?.className)};var Ek={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const kk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ce=(t,e)=>{const r=w.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:u,...m},h)=>w.createElement("svg",{ref:h,...Ek,width:o,height:o,stroke:i,strokeWidth:c?Number(l)*24/Number(o):l,className:`lucide lucide-${kk(t)}`,...m},[...e.map(([p,g])=>w.createElement(p,g)),...(Array.isArray(u)?u:[u])||[]]));return r.displayName=`${t}`,r},Qt=Ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ln=Ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),fc=Ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),cn=Ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Pk=Ce("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),rc=Ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),mx=Ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Tk=Ce("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Ak=Ce("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Rk=Ce("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),hc=Ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),jb=Ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),qt=Ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),oo=Ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),_b=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),$f=Ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ff=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ok=Ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Gr=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),rn=Ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Uf=Ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),St=Ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Nb=Ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ss=Ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Vn=Ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Bf=Ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),$m=Ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Dk=Ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Mk=Ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),fx=Ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Ik=Ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Cb=Ce("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Va=Ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),pc=Ce("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),Lk=Ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Sb=Ce("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),$k=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Eb=Ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Fm=Ce("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Fk=Ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),is=Ce("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Uk=Ce("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),vr=Ce("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Xu=Ce("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Bi=Ce("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Bk=Ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),zk=Ce("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Rr=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ls=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ns=Ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Lc=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),lo=Ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Vk=Ce("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),kb=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qk=Ce("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),em=Ce("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Or=Ce("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),co=Ce("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),an=Ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Wk=Ce("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),zn=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),$i=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),uo=Ce("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),gc=Ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Hk=Ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Gk=Ce("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),eo=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Kk=Ce("Users2",[["path",{d:"M14 19a6 6 0 0 0-12 0",key:"vej9p1"}],["circle",{cx:"8",cy:"9",r:"4",key:"143rtg"}],["path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8",key:"hqbn22"}]]),_o=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Hr=Ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Jt=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Yk=Ce("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Qk=Sk,Pb=nt.forwardRef(({className:t,...e},r)=>s.jsx(pb,{ref:r,className:Qn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Pb.displayName=pb.displayName;const Zk=wb("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Tb=nt.forwardRef(({className:t,variant:e,...r},i)=>s.jsx(gb,{ref:i,className:Qn(Zk({variant:e}),t),...r}));Tb.displayName=gb.displayName;const Jk=nt.forwardRef(({className:t,...e},r)=>s.jsx(vb,{ref:r,className:Qn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Jk.displayName=vb.displayName;const Ab=nt.forwardRef(({className:t,...e},r)=>s.jsx(bb,{ref:r,className:Qn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),...e,children:s.jsx(Jt,{className:"h-4 w-4"})}));Ab.displayName=bb.displayName;const Rb=nt.forwardRef(({className:t,...e},r)=>s.jsx(yb,{ref:r,className:Qn("text-sm font-semibold",t),...e}));Rb.displayName=yb.displayName;const Ob=nt.forwardRef(({className:t,...e},r)=>s.jsx(xb,{ref:r,className:Qn("text-sm opacity-90",t),...e}));Ob.displayName=xb.displayName;const Xk=1;let tm=0;function eP(){return tm=(tm+1)%Number.MAX_VALUE,tm.toString()}const Kt={state:{toasts:[]},listeners:[],getState:()=>Kt.state,setState:t=>{typeof t=="function"?Kt.state=t(Kt.state):Kt.state={...Kt.state,...t},Kt.listeners.forEach(e=>e(Kt.state))},subscribe:t=>(Kt.listeners.push(t),()=>{Kt.listeners=Kt.listeners.filter(e=>e!==t)})},Y=({...t})=>{const e=eP(),r=o=>Kt.setState(l=>({...l,toasts:l.toasts.map(c=>c.id===e?{...c,...o}:c)})),i=()=>Kt.setState(o=>({...o,toasts:o.toasts.filter(l=>l.id!==e)}));return Kt.setState(o=>({...o,toasts:[{...t,id:e,dismiss:i},...o.toasts].slice(0,Xk)})),{id:e,dismiss:i,update:r}};function tP(){const[t,e]=w.useState(Kt.getState());return w.useEffect(()=>Kt.subscribe(i=>{e(i)}),[]),w.useEffect(()=>{const r=[];return t.toasts.forEach(i=>{if(i.duration===1/0)return;const o=setTimeout(()=>{i.dismiss()},i.duration||5e3);r.push(o)}),()=>{r.forEach(i=>clearTimeout(i))}},[t.toasts]),{toast:Y,toasts:t.toasts}}function rP(){const{toasts:t}=tP();return s.jsxs(Qk,{children:[t.map(({id:e,title:r,description:i,action:o,dismiss:l,...c})=>s.jsxs(Tb,{...c,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(Rb,{children:r}),i&&s.jsx(Ob,{children:i})]}),o,s.jsx(Ab,{})]},e)),s.jsx(Pb,{})]})}const sP="modulepreload",nP=function(t){return"/"+t},hx={},dn=function(e,r,i){let o=Promise.resolve();if(r&&r.length>0){let h=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var c=h;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),m=u?.nonce||u?.getAttribute("nonce");o=h(r.map(p=>{if(p=nP(p),p in hx)return;hx[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":sP,g||(b.as="script"),b.crossOrigin="",b.href=p,m&&b.setAttribute("nonce",m),document.head.appendChild(b),g)return new Promise((j,C)=>{b.addEventListener("load",j),b.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return o.then(u=>{for(const m of u||[])m.status==="rejected"&&l(m.reason);return e().catch(l)})},iP=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>dn(async()=>{const{default:i}=await Promise.resolve().then(()=>Yi);return{default:i}},void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)};class zf extends Error{constructor(e,r="FunctionsError",i){super(e),this.name=r,this.context=i}}class px extends zf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gx extends zf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yx extends zf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Um;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Um||(Um={}));var aP=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};class oP{constructor(e,{headers:r={},customFetch:i,region:o=Um.Any}={}){this.url=e,this.headers=r,this.region=o,this.fetch=iP(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var i;return aP(this,void 0,void 0,function*(){try{const{headers:o,method:l,body:c,signal:u}=r;let m={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${e}`);h&&h!=="any"&&(m["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let g;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=c):typeof c=="string"?(m["Content-Type"]="text/plain",g=c):typeof FormData<"u"&&c instanceof FormData?g=c:(m["Content-Type"]="application/json",g=JSON.stringify(c)));const y=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:g,signal:u}).catch(_=>{throw _.name==="AbortError"?_:new px(_)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new gx(y);if(!y.ok)throw new yx(y);let j=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return j==="application/json"?C=yield y.json():j==="application/octet-stream"?C=yield y.blob():j==="text/event-stream"?C=y:j==="multipart/form-data"?C=yield y.formData():C=yield y.text(),{data:C,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new px(o)}:{data:null,error:o,response:o instanceof yx||o instanceof gx?o.context:void 0}}})}}var Mt={},wi={},ji={},_i={},Ni={},Ci={},lP=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hi=lP();const cP=Hi.fetch,Db=Hi.fetch.bind(Hi),Mb=Hi.Headers,dP=Hi.Request,uP=Hi.Response,Yi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Mb,Request:dP,Response:uP,default:Db,fetch:cP},Symbol.toStringTag,{value:"Module"})),mP=oN(Yi);var Kl={},xx;function Ib(){if(xx)return Kl;xx=1,Object.defineProperty(Kl,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Kl.default=t,Kl}var vx;function Lb(){if(vx)return Ci;vx=1;var t=Ci&&Ci.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ci,"__esModule",{value:!0});const e=t(mP),r=t(Ib());class i{constructor(l){var c,u;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(c=l.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=l.signal,this.isMaybeSingle=(u=l.isMaybeSingle)!==null&&u!==void 0?u:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,c){return this.headers=new Headers(this.headers),this.headers.set(l,c),this}then(l,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let m=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var p,g,y,b;let j=null,C=null,_=null,A=h.status,k=h.statusText;if(h.ok){if(this.method!=="HEAD"){const T=await h.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?C=T:C=JSON.parse(T))}const N=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),R=(y=h.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");N&&R&&R.length>1&&(_=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(j={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,_=null,A=406,k="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const N=await h.text();try{j=JSON.parse(N),Array.isArray(j)&&h.status===404&&(C=[],j=null,A=200,k="OK")}catch{h.status===404&&N===""?(A=204,k="No Content"):j={message:N}}if(j&&this.isMaybeSingle&&(!((b=j?.details)===null||b===void 0)&&b.includes("0 rows"))&&(j=null,A=200,k="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:C,count:_,status:A,statusText:k}});return this.shouldThrowOnError||(m=m.catch(h=>{var p,g,y;return{error:{message:`${(p=h?.name)!==null&&p!==void 0?p:"FetchError"}: ${h?.message}`,details:`${(g=h?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=h?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),m.then(l,c)}returns(){return this}overrideTypes(){return this}}return Ci.default=i,Ci}var bx;function $b(){if(bx)return Ni;bx=1;var t=Ni&&Ni.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ni,"__esModule",{value:!0});const e=t(Lb());class r extends e.default{select(o){let l=!1;const c=(o??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:c,foreignTable:u,referencedTable:m=u}={}){const h=m?`${m}.order`:"order",p=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${p?`${p},`:""}${o}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:c=l}={}){const u=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${o}`),this}range(o,l,{foreignTable:c,referencedTable:u=c}={}){const m=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(h,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:c=!1,buffers:u=!1,wal:m=!1,format:h="text"}={}){var p;const g=[o?"analyze":null,l?"verbose":null,c?"settings":null,u?"buffers":null,m?"wal":null].filter(Boolean).join("|"),y=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${y}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Ni.default=r,Ni}var wx;function Vf(){if(wx)return _i;wx=1;var t=_i&&_i.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_i,"__esModule",{value:!0});const e=t($b());class r extends e.default{eq(o,l){return this.url.searchParams.append(o,`eq.${l}`),this}neq(o,l){return this.url.searchParams.append(o,`neq.${l}`),this}gt(o,l){return this.url.searchParams.append(o,`gt.${l}`),this}gte(o,l){return this.url.searchParams.append(o,`gte.${l}`),this}lt(o,l){return this.url.searchParams.append(o,`lt.${l}`),this}lte(o,l){return this.url.searchParams.append(o,`lte.${l}`),this}like(o,l){return this.url.searchParams.append(o,`like.${l}`),this}likeAllOf(o,l){return this.url.searchParams.append(o,`like(all).{${l.join(",")}}`),this}likeAnyOf(o,l){return this.url.searchParams.append(o,`like(any).{${l.join(",")}}`),this}ilike(o,l){return this.url.searchParams.append(o,`ilike.${l}`),this}ilikeAllOf(o,l){return this.url.searchParams.append(o,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(o,l){return this.url.searchParams.append(o,`ilike(any).{${l.join(",")}}`),this}is(o,l){return this.url.searchParams.append(o,`is.${l}`),this}in(o,l){const c=Array.from(new Set(l)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(o,`in.(${c})`),this}contains(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cs.{${l.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(l)}`),this}containedBy(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cd.{${l.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(l)}`),this}rangeGt(o,l){return this.url.searchParams.append(o,`sr.${l}`),this}rangeGte(o,l){return this.url.searchParams.append(o,`nxl.${l}`),this}rangeLt(o,l){return this.url.searchParams.append(o,`sl.${l}`),this}rangeLte(o,l){return this.url.searchParams.append(o,`nxr.${l}`),this}rangeAdjacent(o,l){return this.url.searchParams.append(o,`adj.${l}`),this}overlaps(o,l){return typeof l=="string"?this.url.searchParams.append(o,`ov.${l}`):this.url.searchParams.append(o,`ov.{${l.join(",")}}`),this}textSearch(o,l,{config:c,type:u}={}){let m="";u==="plain"?m="pl":u==="phrase"?m="ph":u==="websearch"&&(m="w");const h=c===void 0?"":`(${c})`;return this.url.searchParams.append(o,`${m}fts${h}.${l}`),this}match(o){return Object.entries(o).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(o,l,c){return this.url.searchParams.append(o,`not.${l}.${c}`),this}or(o,{foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.or`:"or";return this.url.searchParams.append(u,`(${o})`),this}filter(o,l,c){return this.url.searchParams.append(o,`${l}.${c}`),this}}return _i.default=r,_i}var jx;function Fb(){if(jx)return ji;jx=1;var t=ji&&ji.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ji,"__esModule",{value:!0});const e=t(Vf());class r{constructor(o,{headers:l={},schema:c,fetch:u}){this.url=o,this.headers=new Headers(l),this.schema=c,this.fetch=u}select(o,{head:l=!1,count:c}={}){const u=l?"HEAD":"GET";let m=!1;const h=(o??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",h),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:c=!0}={}){var u;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const h=o.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:c=!1,count:u,defaultToNull:m=!0}={}){var h;const p="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),u&&this.headers.append("Prefer",`count=${u}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(g.length>0){const y=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(o,{count:l}={}){var c;const u="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:o}={}){var l;const c="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return ji.default=r,ji}var _x;function fP(){if(_x)return wi;_x=1;var t=wi&&wi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(wi,"__esModule",{value:!0});const e=t(Fb()),r=t(Vf());class i{constructor(l,{headers:c={},schema:u,fetch:m}={}){this.url=l,this.headers=new Headers(c),this.schemaName=u,this.fetch=m}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new i(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:u=!1,get:m=!1,count:h}={}){var p;let g;const y=new URL(`${this.url}/rpc/${l}`);let b;u||m?(g=u?"HEAD":"GET",Object.entries(c).filter(([C,_])=>_!==void 0).map(([C,_])=>[C,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([C,_])=>{y.searchParams.append(C,_)})):(g="POST",b=c);const j=new Headers(this.headers);return h&&j.set("Prefer",`count=${h}`),new r.default({method:g,url:y,headers:j,schema:this.schemaName,body:b,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return wi.default=i,wi}var Nx;function hP(){if(Nx)return Mt;Nx=1;var t=Mt&&Mt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.PostgrestError=Mt.PostgrestBuilder=Mt.PostgrestTransformBuilder=Mt.PostgrestFilterBuilder=Mt.PostgrestQueryBuilder=Mt.PostgrestClient=void 0;const e=t(fP());Mt.PostgrestClient=e.default;const r=t(Fb());Mt.PostgrestQueryBuilder=r.default;const i=t(Vf());Mt.PostgrestFilterBuilder=i.default;const o=t($b());Mt.PostgrestTransformBuilder=o.default;const l=t(Lb());Mt.PostgrestBuilder=l.default;const c=t(Ib());return Mt.PostgrestError=c.default,Mt.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default},Mt}var pP=hP();const gP=Hn(pP),{PostgrestClient:yP,PostgrestQueryBuilder:_3,PostgrestFilterBuilder:N3,PostgrestTransformBuilder:C3,PostgrestBuilder:S3,PostgrestError:E3}=gP;class xP{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const i=this.getWebSocketConstructor();return new i(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const vP="2.15.5",bP=`realtime-js/${vP}`,wP="1.0.0",Bm=1e4,jP=1e3,_P=100;var to;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(to||(to={}));var Tt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Tt||(Tt={}));var qr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(qr||(qr={}));var zm;(function(t){t.websocket="websocket"})(zm||(zm={}));var $n;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})($n||($n={}));class NP{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,r,i)}_decodeBroadcast(e,r,i){const o=r.getUint8(1),l=r.getUint8(2);let c=this.HEADER_LENGTH+2;const u=i.decode(e.slice(c,c+o));c=c+o;const m=i.decode(e.slice(c,c+l));c=c+l;const h=JSON.parse(i.decode(e.slice(c,e.byteLength)));return{ref:null,topic:u,event:m,payload:h}}}class Ub{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ot||(ot={}));const Cx=(t,e,r={})=>{var i;const o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((l,c)=>(l[c]=CP(c,t,e,o),l),{})},CP=(t,e,r,i)=>{const o=e.find(u=>u.name===t),l=o?.type,c=r[t];return l&&!i.includes(l)?Bb(l,c):Vm(c)},Bb=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return PP(e,r)}switch(t){case ot.bool:return SP(e);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return EP(e);case ot.json:case ot.jsonb:return kP(e);case ot.timestamp:return TP(e);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return Vm(e);default:return Vm(e)}},Vm=t=>t,SP=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},EP=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},kP=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},PP=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,i=t[r];if(t[0]==="{"&&i==="}"){let l;const c=t.slice(1,r);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(u=>Bb(e,u))}return t},TP=t=>typeof t=="string"?t.replace(" ","T"):t,zb=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class rm{constructor(e,r,i={},o=Bm){this.channel=e,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var i;return this._hasReceived(e)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Sx||(Sx={}));class ro{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ro.syncState(this.state,o,l,c),this.pendingDiffs.forEach(m=>{this.state=ro.syncDiff(this.state,m,l,c)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ro.syncDiff(this.state,o,l,c),u())}),this.onJoin((o,l,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:c})}),this.onLeave((o,l,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,i,o){const l=this.cloneDeep(e),c=this.transformState(r),u={},m={};return this.map(l,(h,p)=>{c[h]||(m[h]=p)}),this.map(c,(h,p)=>{const g=l[h];if(g){const y=p.map(_=>_.presence_ref),b=g.map(_=>_.presence_ref),j=p.filter(_=>b.indexOf(_.presence_ref)<0),C=g.filter(_=>y.indexOf(_.presence_ref)<0);j.length>0&&(u[h]=j),C.length>0&&(m[h]=C)}else u[h]=p}),this.syncDiff(l,{joins:u,leaves:m},i,o)}static syncDiff(e,r,i,o){const{joins:l,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(u,m)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(m),p.length>0){const g=e[u].map(b=>b.presence_ref),y=p.filter(b=>g.indexOf(b.presence_ref)<0);e[u].unshift(...y)}i(u,p,m)}),this.map(c,(u,m)=>{let h=e[u];if(!h)return;const p=m.map(g=>g.presence_ref);h=h.filter(g=>p.indexOf(g.presence_ref)<0),e[u]=h,o(u,h,m),h.length===0&&delete e[u]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(i=>r(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,i)=>{const o=e[i];return"metas"in o?r[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[i]=o,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ex;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ex||(Ex={}));var so;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(so||(so={}));var bs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bs||(bs={}));class qf{constructor(e,r={config:{}},i){this.topic=e,this.params=r,this.socket=i,this.bindings={},this.state=Tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new rm(this,qr.join,this.params,this.timeout),this.rejoinTimer=new Ub(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qr.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new ro(this),this.broadcastEndpointURL=zb(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Tt.closed){const{config:{broadcast:c,presence:u,private:m}}=this.params,h=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&o!==void 0?o:[],p=!!this.bindings[so.PRESENCE]&&this.bindings[so.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,g={},y={broadcast:c,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:h,private:m};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(bs.CHANNEL_ERROR,b)),this._onClose(()=>e?.(bs.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var j;if(this.socket.setAuth(),b===void 0){e?.(bs.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,_=(j=C?.length)!==null&&j!==void 0?j:0,A=[];for(let k=0;k<_;k++){const E=C[k],{filter:{event:N,schema:R,table:T,filter:M}}=E,I=b&&b[k];if(I&&I.event===N&&I.schema===R&&I.table===T&&I.filter===M)A.push(Object.assign(Object.assign({},E),{id:I.id}));else{this.unsubscribe(),this.state=Tt.errored,e?.(bs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(bs.SUBSCRIBED);return}}).receive("error",b=>{this.state=Tt.errored,e?.(bs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(bs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,i){return this.state===Tt.joined&&e===so.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,i)}async send(e,r={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:c}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=h.body)===null||o===void 0?void 0:o.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,u,m;const h=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),h.receive("ok",()=>l("ok")),h.receive("error",()=>l("error")),h.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Tt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qr.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new rm(this,qr.leave,{},e),i.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Tt.closed,this.bindings={}}async _fetchWithTimeout(e,r,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),c=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(l),c}_push(e,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new rm(this,e,r,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>_P){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,i){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,i){var o,l;const c=e.toLocaleLowerCase(),{close:u,error:m,leave:h,join:p}=qr;if(i&&[u,m,h,p].indexOf(c)>=0&&i!==this._joinRef())return;let y=this._onMessage(c,r,i);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var j,C,_;return((j=b.filter)===null||j===void 0?void 0:j.event)==="*"||((_=(C=b.filter)===null||C===void 0?void 0:C.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===c}).map(b=>b.callback(y,i)):(l=this.bindings[c])===null||l===void 0||l.filter(b=>{var j,C,_,A,k,E;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const N=b.id,R=(j=b.filter)===null||j===void 0?void 0:j.event;return N&&((C=r.ids)===null||C===void 0?void 0:C.includes(N))&&(R==="*"||R?.toLocaleLowerCase()===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const N=(k=(A=b?.filter)===null||A===void 0?void 0:A.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return N==="*"||N===((E=r?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof y=="object"&&"ids"in y){const j=y.data,{schema:C,table:_,commit_timestamp:A,type:k,errors:E}=j;y=Object.assign(Object.assign({},{schema:C,table:_,commit_timestamp:A,eventType:k,new:{},old:{},errors:E}),this._getPayloadRecords(j))}b.callback(y,i)})}_isClosed(){return this.state===Tt.closed}_isJoined(){return this.state===Tt.joined}_isJoining(){return this.state===Tt.joining}_isLeaving(){return this.state===Tt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,i){const o=e.toLocaleLowerCase(),l={type:o,filter:r,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,r){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&qf.isEqual(o.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const i in e)if(e[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qr.close,{},e)}_onError(e){this._on(qr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Cx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Cx(e.columns,e.old_record)),r}}const sm=()=>{},Yl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AP=[1e3,2e3,5e3,1e4],RP=1e4,OP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class DP{constructor(e,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bm,this.transport=null,this.heartbeatIntervalMs=Yl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=sm,this.ref=0,this.reconnectTimer=null,this.logger=sm,this.conn=null,this.sendBuffer=[],this.serializer=new NP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...c)=>dn(async()=>{const{default:u}=await Promise.resolve().then(()=>Yi);return{default:u}},void 0).then(({default:u})=>u(...c)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...c)=>l(...c)},!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${zm.websocket}`,this.httpEndpoint=zb(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xP.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wP}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,i){this.logger(e,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case to.connecting:return $n.Connecting;case to.open:return $n.Open;case to.closing:return $n.Closing;default:return $n.Closed}}isConnected(){return this.connectionState()===$n.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new qf(`realtime:${e}`,r,this);return this.channels.push(l),l}}push(e){const{topic:r,event:i,payload:o,ref:l}=e,c=()=>{this.encode(e,u=>{var m;(m=this.conn)===null||m===void 0||m.send(u)})};this.log("push",`${r} ${i} (${l})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(jP,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Yl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:c}=r,u=c?`(${c})`:"",m=l.status||"";this.log("receive",`${m} ${i} ${o} ${u}`.trim(),l),this.channels.filter(h=>h._isMember(i)).forEach(h=>h._trigger(o,l,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(qr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${e}${i}${o}`}_workerObjectUrl(e){let r;if(e)r=e;else{const i=new Blob([OP],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const o={access_token:r,version:bP};r&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(qr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(r)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Ub(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,i,o,l,c,u,m,h,p;if(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:Bm,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:Yl.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:sm,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e?.reconnectAfterMs)!==null&&m!==void 0?m:(g=>AP[g-1]||RP),this.encode=(h=e?.encode)!==null&&h!==void 0?h:((g,y)=>y(JSON.stringify(g))),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Wf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ct(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class MP extends Wf{constructor(e,r,i){super(e),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qm extends Wf{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var IP=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};const Vb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>dn(async()=>{const{default:i}=await Promise.resolve().then(()=>Yi);return{default:i}},void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)},LP=()=>IP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield dn(()=>Promise.resolve().then(()=>Yi),void 0)).Response:Response}),Wm=t=>{if(Array.isArray(t))return t.map(r=>Wm(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,i])=>{const o=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=Wm(i)}),e},$P=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Zn=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};const nm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),FP=(t,e,r)=>Zn(void 0,void 0,void 0,function*(){const i=yield LP();t instanceof i&&!r?.noResolveJson?t.json().then(o=>{const l=t.status||500,c=o?.statusCode||l+"";e(new MP(nm(o),l,c))}).catch(o=>{e(new qm(nm(o),o))}):e(new qm(nm(t),t))}),UP=(t,e,r,i)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"||!i?o:($P(i)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(i)):o.body=i,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),r))};function No(t,e,r,i,o,l){return Zn(this,void 0,void 0,function*(){return new Promise((c,u)=>{t(r,UP(e,i,o,l)).then(m=>{if(!m.ok)throw m;return i?.noResolveJson?m:m.json()}).then(m=>c(m)).catch(m=>FP(m,u,i))})})}function yc(t,e,r,i){return Zn(this,void 0,void 0,function*(){return No(t,"GET",e,r,i)})}function ss(t,e,r,i,o){return Zn(this,void 0,void 0,function*(){return No(t,"POST",e,i,o,r)})}function Hm(t,e,r,i,o){return Zn(this,void 0,void 0,function*(){return No(t,"PUT",e,i,o,r)})}function BP(t,e,r,i){return Zn(this,void 0,void 0,function*(){return No(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function qb(t,e,r,i,o){return Zn(this,void 0,void 0,function*(){return No(t,"DELETE",e,i,o,r)})}var zP=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};class VP{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return zP(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ct(e))return{data:null,error:e};throw e}})}}var qP=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};class WP{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}asStream(){return new VP(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.execute().then(e,r)}execute(){return qP(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ct(e))return{data:null,error:e};throw e}})}}var lr=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};const HP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class GP{constructor(e,r={},i,o){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=i,this.fetch=Vb(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,i,o){return lr(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},kx),o);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const m=c.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",this.encodeMetadata(m))):(l=i,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,m&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),o?.headers&&(u=Object.assign(Object.assign({},u),o.headers));const h=this._removeEmptyFolders(r),p=this._getFinalPath(h),g=yield(e=="PUT"?Hm:ss)(this.fetch,`${this.url}/object/${p}`,l,Object.assign({headers:u},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:h,id:g.Id,fullPath:g.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ct(l))return{data:null,error:l};throw l}})}upload(e,r,i){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,i)})}uploadToSignedUrl(e,r,i,o){return lr(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),u=new URL(this.url+`/object/upload/sign/${c}`);u.searchParams.set("token",r);try{let m;const h=Object.assign({upsert:kx.upsert},o),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",h.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",h.cacheControl)):(m=i,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);const g=yield Hm(this.fetch,u.toString(),m,{headers:p});return{data:{path:l,fullPath:g.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Ct(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,r){return lr(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const l=yield ss(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),c=new URL(this.url+l.url),u=c.searchParams.get("token");if(!u)throw new Wf("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:u},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i))return{data:null,error:i};throw i}})}update(e,r,i){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,i)})}move(e,r,i){return lr(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}})}copy(e,r,i){return lr(this,void 0,void 0,function*(){try{return{data:{path:(yield ss(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}})}createSignedUrl(e,r,i){return lr(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield ss(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}})}createSignedUrls(e,r,i){return lr(this,void 0,void 0,function*(){try{const o=yield ss(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}})}download(e,r){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(r?.transform||{}),c=l?`?${l}`:"",u=this._getFinalPath(e),m=()=>yc(this.fetch,`${this.url}/${o}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new WP(m,this.shouldThrowOnError)}info(e){return lr(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const i=yield yc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Wm(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i))return{data:null,error:i};throw i}})}exists(e){return lr(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield BP(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i)&&i instanceof qm){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,r){const i=this._getFinalPath(e),o=[],l=r?.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&o.push(l);const u=typeof r?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(r?.transform||{});m!==""&&o.push(m);let h=o.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${i}${h}`)}}}remove(e){return lr(this,void 0,void 0,function*(){try{return{data:yield qb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}list(e,r,i){return lr(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},HP),r),{prefix:e||""});return{data:yield ss(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}})}listV2(e,r){return lr(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield ss(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const KP="2.12.2",YP={"X-Client-Info":`storage-js/${KP}`};var Si=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};class QP{constructor(e,r={},i,o){this.shouldThrowOnError=!1;const l=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},YP),r),this.fetch=Vb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Si(this,void 0,void 0,function*(){try{return{data:yield yc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ct(e))return{data:null,error:e};throw e}})}getBucket(e){return Si(this,void 0,void 0,function*(){try{return{data:yield yc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Si(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return Si(this,void 0,void 0,function*(){try{return{data:yield Hm(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ct(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Si(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Si(this,void 0,void 0,function*(){try{return{data:yield qb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}}class ZP extends QP{constructor(e,r={},i,o){super(e,r,i,o)}from(e){return new GP(this.url,this.headers,e,this.fetch)}}const JP="2.58.0";let Ya="";typeof Deno<"u"?Ya="deno":typeof document<"u"?Ya="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ya="react-native":Ya="node";const XP={"X-Client-Info":`supabase-js-${Ya}/${JP}`},eT={headers:XP},tT={schema:"public"},rT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sT={};var nT=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};const iT=t=>{let e;return t?e=t:typeof fetch>"u"?e=Db:e=fetch,(...r)=>e(...r)},aT=()=>typeof Headers>"u"?Mb:Headers,oT=(t,e,r)=>{const i=iT(r),o=aT();return(l,c)=>nT(void 0,void 0,void 0,function*(){var u;const m=(u=yield e())!==null&&u!==void 0?u:t;let h=new o(c?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${m}`),i(l,Object.assign(Object.assign({},c),{headers:h}))})};var lT=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};function cT(t){return t.endsWith("/")?t:t+"/"}function dT(t,e){var r,i;const{db:o,auth:l,realtime:c,global:u}=t,{db:m,auth:h,realtime:p,global:g}=e,y={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},h),l),realtime:Object.assign(Object.assign({},p),c),storage:{},global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(r=g?.headers)!==null&&r!==void 0?r:{}),(i=u?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>lT(this,void 0,void 0,function*(){return""})};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function uT(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cT(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Wb="2.72.0",Ri=30*1e3,Gm=3,im=Gm*Ri,mT="http://localhost:9999",fT="supabase.auth.token",hT={"X-Client-Info":`gotrue-js/${Wb}`},Km="X-Supabase-Api-Version",Hb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gT=600*1e3;class Hf extends Error{constructor(e,r,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function qe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class yT extends Hf{constructor(e,r,i){super(e,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function xT(t){return qe(t)&&t.name==="AuthApiError"}class Gb extends Hf{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class hn extends Hf{constructor(e,r,i,o){super(e,i,o),this.name=r,this.status=i}}class en extends hn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vT(t){return qe(t)&&t.name==="AuthSessionMissingError"}class qa extends hn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ql extends hn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Zl extends hn{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bT(t){return qe(t)&&t.name==="AuthImplicitGrantRedirectError"}class Px extends hn{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ym extends hn{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function am(t){return qe(t)&&t.name==="AuthRetryableFetchError"}class Tx extends hn{constructor(e,r,i){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Qm extends hn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const xc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ax=` 	
\r=`.split(""),wT=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ax.length;e+=1)t[Ax[e].charCodeAt(0)]=-2;for(let e=0;e<xc.length;e+=1)t[xc[e].charCodeAt(0)]=e;return t})();function Rx(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(xc[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(xc[i]),e.queuedBits-=6}}function Kb(t,e,r){const i=wT[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ox(t){const e=[],r=c=>{e.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=c=>{NT(c,i,r)};for(let c=0;c<t.length;c+=1)Kb(t.charCodeAt(c),o,l);return e.join("")}function jT(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function _T(t,e){for(let r=0;r<t.length;r+=1){let i=t.charCodeAt(r);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}jT(i,e)}}function NT(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function CT(t){const e=[],r={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)Kb(t.charCodeAt(o),r,i);return new Uint8Array(e)}function ST(t){const e=[];return _T(t,r=>e.push(r)),new Uint8Array(e)}function ET(t){const e=[],r={queue:0,queuedBits:0},i=o=>{e.push(o)};return t.forEach(o=>Rx(o,r,i)),Rx(null,r,i),e.join("")}function kT(t){return Math.round(Date.now()/1e3)+t}function PT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Pr=()=>typeof window<"u"&&typeof document<"u",An={tested:!1,writable:!1},Yb=()=>{if(!Pr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(An.tested)return An.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),An.tested=!0,An.writable=!0}catch{An.tested=!0,An.writable=!1}return An.writable};function TT(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return r.searchParams.forEach((i,o)=>{e[o]=i}),e}const Qb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>dn(async()=>{const{default:i}=await Promise.resolve().then(()=>Yi);return{default:i}},void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)},AT=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Oi=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Rn=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Zs=async(t,e)=>{await t.removeItem(e)};class $c{constructor(){this.promise=new $c.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}$c.promiseConstructor=Promise;function om(t){const e=t.split(".");if(e.length!==3)throw new Qm("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!pT.test(e[i]))throw new Qm("JWT not in base64url format");return{header:JSON.parse(Ox(e[0])),payload:JSON.parse(Ox(e[1])),signature:CT(e[2]),raw:{header:e[0],payload:e[1]}}}async function RT(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function OT(t,e){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){i(c);return}}catch(c){if(!e(l,c)){o(c);return}}})()})}function DT(t){return("0"+t.toString(16)).substr(-2)}function MT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let o="";for(let l=0;l<56;l++)o+=r.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,DT).join("")}async function IT(t){const r=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function LT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await IT(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ei(t,e,r=!1){const i=MT();let o=i;r&&(o+="/PASSWORD_RECOVERY"),await Oi(t,`${e}-code-verifier`,o);const l=await LT(i);return[l,i===l?"plain":"s256"]}const $T=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FT(t){const e=t.headers.get(Km);if(!e||!e.match($T))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function UT(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function BT(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ki(t){if(!zT.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function lm(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Dx(t){return JSON.parse(JSON.stringify(t))}var VT=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(r[i[o]]=t[i[o]]);return r};const In=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qT=[502,503,504];async function Mx(t){var e;if(!AT(t))throw new Ym(In(t),0);if(qT.includes(t.status))throw new Ym(In(t),t.status);let r;try{r=await t.json()}catch(l){throw new Gb(In(l),l)}let i;const o=FT(t);if(o&&o.getTime()>=Hb["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Tx(In(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new en}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Tx(In(r),t.status,r.weak_password.reasons);throw new yT(In(r),t.status||500,i)}const WT=(t,e,r,i)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};async function Ge(t,e,r,i){var o;const l=Object.assign({},i?.headers);l[Km]||(l[Km]=Hb["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const c=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(c.redirect_to=i.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",m=await HT(t,e,r+u,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function HT(t,e,r,i,o,l){const c=WT(e,i,o,l);let u;try{u=await t(r,Object.assign({},c))}catch(m){throw console.error(m),new Ym(In(m),0)}if(u.ok||await Mx(u),i?.noResolveJson)return u;try{return await u.json()}catch(m){await Mx(m)}}function rs(t){var e;let r=null;QT(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=kT(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:i},error:null}}function Ix(t){const e=rs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function sn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function GT(t){return{data:t,error:null}}function KT(t){const{action_link:e,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l}=t,c=VT(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l},m=Object.assign({},c);return{data:{properties:u,user:m},error:null}}function YT(t){return t}function QT(t){return t.access_token&&t.refresh_token&&t.expires_in}const cm=["global","local","others"];var ZT=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(r[i[o]]=t[i[o]]);return r};class JT{constructor({url:e="",headers:r={},fetch:i}){this.url=e,this.headers=r,this.fetch=Qb(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=cm[0]){if(cm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cm.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(qe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,r={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:sn})}catch(i){if(qe(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:r}=e,i=ZT(e,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:KT,redirectTo:r?.redirectTo})}catch(r){if(qe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:sn})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,i,o,l,c,u,m;try{const h={nextPage:null,lastPage:0,total:0},p=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:YT});if(p.error)throw p.error;const g=await p.json(),y=(c=p.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(m=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(j=>{const C=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);h[`${_}Page`]=C}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(qe(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){ki(e);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:sn})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ki(e);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:sn})}catch(i){if(qe(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,r=!1){ki(e);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:sn})}catch(i){if(qe(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){ki(e.userId);try{const{data:r,error:i}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ki(e.userId),ki(e.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}}function Lx(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function XT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Pi={debug:!!(globalThis&&Yb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class eA extends Zb{}async function tA(t,e,r){Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await r()}finally{Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new eA(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Pi.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Jb(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function rA(t){return parseInt(t,16)}function sA(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function nA(t){var e;const{chainId:r,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:c,notBefore:u,requestId:m,resources:h,scheme:p,uri:g,version:y}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=Jb(t.address),j=p?`${p}://${i}`:i,C=t.statement?`${t.statement}
`:"",_=`${j} wants you to sign in with your Ethereum account:
${b}

${C}`;let A=`URI: ${g}
Version: ${y}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(o&&(A+=`
Expiration Time: ${o.toISOString()}`),u&&(A+=`
Not Before: ${u.toISOString()}`),m&&(A+=`
Request ID: ${m}`),h){let k=`
Resources:`;for(const E of h){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);k+=`
- ${E}`}A+=k}return`${_}
${A}`}XT();const iA={url:mT,storageKey:fT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $x(t,e,r){return await r()}const Ti={};class mo{constructor(e){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mo.nextInstanceID,mo.nextInstanceID+=1,this.instanceID>0&&Pr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},iA),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new JT({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Qb(o.fetch),this.lock=o.lock||$x,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Pr()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=tA:this.lock=$x,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Yb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Lx(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Lx(this.memoryStorage)),Pr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Ti[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ti[this.storageKey]=Object.assign(Object.assign({},Ti[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ti[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ti[this.storageKey]=Object.assign(Object.assign({},Ti[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Wb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=TT(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),Pr()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(r,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),bT(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:u}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return qe(r)?{error:r}:{error:new Gb("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,i,o;try{const l=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:rs}),{data:c,error:u}=l;if(u||!c)return{data:{user:null,session:null},error:u};const m=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(l){if(qe(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var r,i,o;try{let l;if("email"in e){const{email:p,password:g,options:y}=e;let b=null,j=null;this.flowType==="pkce"&&([b,j]=await Ei(this.storage,this.storageKey)),l=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:p,password:g,data:(r=y?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:j},xform:rs})}else if("phone"in e){const{phone:p,password:g,options:y}=e;l=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(i=y?.data)!==null&&i!==void 0?i:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:rs})}else throw new Ql("You must provide either an email or phone number and a password");const{data:c,error:u}=l;if(u||!c)return{data:{user:null,session:null},error:u};const m=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(l){if(qe(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let r;if("email"in e){const{email:l,password:c,options:u}=e;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Ix})}else if("phone"in e){const{phone:l,password:c,options:u}=e;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Ix})}else throw new Ql("You must provide either an email or phone number and a password");const{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new qa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(qe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,i,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,i,o,l,c,u,m,h,p,g,y;let b,j;if("message"in e)b=e.message,j=e.signature;else{const{chain:C,wallet:_,statement:A,options:k}=e;let E;if(Pr())if(typeof _=="object")E=_;else{const Q=window;if("ethereum"in Q&&typeof Q.ethereum=="object"&&"request"in Q.ethereum&&typeof Q.ethereum.request=="function")E=Q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=_}const N=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href),R=await E.request({method:"eth_requestAccounts"}).then(Q=>Q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=Jb(R[0]);let M=(i=k?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!M){const Q=await E.request({method:"eth_chainId"});M=rA(Q)}const I={domain:N.host,address:T,statement:A,uri:N.href,version:"1",chainId:M,nonce:(o=k?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(c=(l=k?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(u=k?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(m=k?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(h=k?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=k?.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=nA(I),j=await E.request({method:"personal_sign",params:[sA(b),T]})}try{const{data:C,error:_}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:j},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:rs});if(_)throw _;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new qa}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:_})}catch(C){if(qe(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(e){var r,i,o,l,c,u,m,h,p,g,y,b;let j,C;if("message"in e)j=e.message,C=e.signature;else{const{chain:_,wallet:A,statement:k,options:E}=e;let N;if(Pr())if(typeof A=="object")N=A;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))N=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=A}const R=new URL((r=E?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const T=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),k?{statement:k}:null));let M;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")M=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)M=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)j=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),C=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${R.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(o=(i=E?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=E?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((c=E?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((u=E?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((m=E?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((g=(p=E?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...E.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const T=await N.signMessage(new TextEncoder().encode(j),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=T}}try{const{data:_,error:A}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:ET(C)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:rs});if(A)throw A;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new qa}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:A})}catch(_){if(qe(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const r=await Rn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{const{data:l,error:c}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:rs});if(await Zs(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new qa}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:c})}catch(l){if(qe(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:r,provider:i,token:o,access_token:l,nonce:c}=e,u=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:rs}),{data:m,error:h}=u;return h?{data:{user:null,session:null},error:h}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new qa}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:h})}catch(r){if(qe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,i,o,l,c;try{if("email"in e){const{email:u,options:m}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Ei(this.storage,this.storageKey));const{error:g}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=m?.data)!==null&&r!==void 0?r:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:u,options:m}=e,{data:h,error:p}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(c=m?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:p}}throw new Ql("You must provide either an email or phone number.")}catch(u){if(qe(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var r,i;try{let o,l;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:u}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:rs});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const m=c.session,h=c.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(o){if(qe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var r,i,o;try{let l=null,c=null;return this.flowType==="pkce"&&([l,c]=await Ei(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:GT})}catch(l){if(qe(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new en;const{error:o}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:l}=e,{error:c}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:i,type:o,options:l}=e,{data:c,error:u}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new Ql("You must provide either an email or phone number and a type")}catch(r){if(qe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Rn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<im:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const c=await Rn(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=lm()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(m,h,p)=>(!c&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,h,p))})}return{data:{session:e},error:null}}const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:sn}):await this._useSession(async r=>{var i,o,l;const{data:c,error:u}=r;if(u)throw u;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new en}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:sn})})}catch(r){if(qe(r))return vT(r)&&(await this._removeSession(),await Zs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new en;const c=o.session;let u=null,m=null;this.flowType==="pkce"&&e.email!=null&&([u,m]=await Ei(this.storage,this.storageKey));const{data:h,error:p}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:m}),jwt:c.access_token,xform:sn});if(p)throw p;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(i){if(qe(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new en;const r=Date.now()/1e3;let i=r,o=!0,l=null;const{payload:c}=om(e.access_token);if(c.exp&&(i=c.exp,o=i<=r),o){const{session:u,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!u)return{data:{user:null,session:null},error:null};l=u}else{const{data:u,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(r){if(qe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){const{data:c,error:u}=r;if(u)throw u;e=(i=c.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new en;const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(qe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Pr())throw new Zl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Zl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Px("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Px("No code detected.");const{data:k,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:c,expires_in:u,expires_at:m,token_type:h}=e;if(!l||!u||!c||!h)throw new Zl("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(u);let y=p+g;m&&(y=parseInt(m));const b=y-p;b*1e3<=Ri&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const j=y-g;p-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,y,p):p-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,y,p);const{data:C,error:_}=await this._getUser(l);if(_)throw _;const A={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:g,expires_at:y,refresh_token:c,token_type:h,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(i){if(qe(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Rn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return{error:l};const c=(i=o.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:u}=await this.admin.signOut(c,e);if(u&&!(xT(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Zs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=PT(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{const{data:{session:l},error:c}=r;if(c)throw c;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Ei(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(qe(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:i,error:o}=await this._useSession(async l=>{var c,u,m,h,p;const{data:g,error:y}=l;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return Pr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(qe(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;const{data:l,error:c}=r;if(c)throw c;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await OT(async o=>(o>0&&await RT(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rs})),(o,l)=>{const c=200*Math.pow(2,o);return l&&am(l)&&Date.now()+c-i<Ri})}catch(i){if(this._debug(r,"error",i),qe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Pr()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Rn(this.storage,this.storageKey);if(o&&this.userStorage){let c=await Rn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await Oi(this.userStorage,this.storageKey+"-user",c)),o.user=(e=c?.user)!==null&&e!==void 0?e:lm()}else if(o&&!o.user&&!o.user){const c=await Rn(this.storage,this.storageKey+"-user");c&&c?.user?(o.user=c.user,await Zs(this.storage,this.storageKey+"-user"),await Oi(this.storage,this.storageKey,o)):o.user=lm()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<im;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${im}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),am(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:u}=await this._getUser(o.access_token);!u&&c?.user?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new $c;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new en;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const u={session:l.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(l){if(this._debug(o,"error",l),qe(l)){const c={session:null,error:l};return am(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,r)}catch(m){l.push(m)}});if(await Promise.all(c),l.length>0){for(let u=0;u<l.length;u+=1)console.error(l[u]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Oi(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const l=Dx(o);await Oi(this.storage,this.storageKey,l)}else{const o=Dx(r);await Oi(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Zs(this.storage,this.storageKey),await Zs(this.storage,this.storageKey+"-code-verifier"),await Zs(this.storage,this.storageKey+"-user"),this.userStorage&&await Zs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ri);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/Ri);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ri}ms, refresh threshold is ${Gm} ticks`),o<=Gm&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Zb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){const o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,c]=await Ei(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(u.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;return l?{data:null,error:l}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;const{data:l,error:c}=r;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:m,error:h}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return{data:null,error:l};const{data:c,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:u})})}catch(r){if(qe(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;return l?{data:null,error:l}:await Ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(qe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const i=e?.factors||[],o=i.filter(c=>c.factor_type==="totp"&&c.status==="verified"),l=i.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:i,totp:o,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,i;const{data:{session:o},error:l}=e;if(l)return{data:null,error:l};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=om(o.access_token);let u=null;c.aal&&(u=c.aal);let m=u;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(m="aal2");const p=c.amr||[];return{data:{currentLevel:u,nextLevel:m,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,r={keys:[]}){let i=r.keys.find(u=>u.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(u=>u.kid===e),i&&this.jwks_cached_at+gT>o)return i;const{data:l,error:c}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(u=>u.kid===e),!i)?null:i}async getClaims(e,r={}){try{let i=e;if(!i){const{data:b,error:j}=await this.getSession();if(j||!b.session)return{data:null,error:j};i=b.session.access_token}const{header:o,payload:l,signature:c,raw:{header:u,payload:m}}=om(i);r?.allowExpired||UT(l.exp);const h=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!h){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:l,header:o,signature:c},error:null}}const p=BT(o.alg),g=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,c,ST(`${u}.${m}`)))throw new Qm("Invalid JWT signature");return{data:{claims:l,header:o,signature:c},error:null}}catch(i){if(qe(i))return{data:null,error:i};throw i}}}mo.nextInstanceID=0;const aA=mo;class oA extends aA{constructor(e){super(e)}}var lA=function(t,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function u(p){try{h(i.next(p))}catch(g){c(g)}}function m(p){try{h(i.throw(p))}catch(g){c(g)}}function h(p){p.done?l(p.value):o(p.value).then(u,m)}h((i=i.apply(t,e||[])).next())})};class cA{constructor(e,r,i){var o,l,c;this.supabaseUrl=e,this.supabaseKey=r;const u=uT(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const m=`sb-${u.hostname.split(".")[0]}-auth-token`,h={db:tT,realtime:sT,auth:Object.assign(Object.assign({},rT),{storageKey:m}),global:eT},p=dT(i??{},h);this.storageKey=(o=p.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=p.global.headers)!==null&&l!==void 0?l:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=p.auth)!==null&&c!==void 0?c:{},this.headers,p.global.fetch),this.fetch=oT(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new yP(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new ZP(this.storageUrl.href,this.headers,this.fetch,i?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new oP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},i={}){return this.rest.rpc(e,r,i)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return lA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:l,storageKey:c,flowType:u,lock:m,debug:h},p,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oA({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),p),storageKey:c,autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:l,flowType:u,lock:m,debug:h,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new DP(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(e,r,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dA=(t,e,r)=>new cA(t,e,r);function uA(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}uA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mA="https://qcwnlbpultscerwdnzbm.supabase.co",fA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFjd25sYnB1bHRzY2Vyd2RuemJtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzOTU0NzUsImV4cCI6MjA3Mzk3MTQ3NX0.-2FMT_IxLPwnJXY3rm2sL6GwTklKJCAo2J50BdUbQFo",V=dA(mA,fA,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"papuenvios-auth",flowType:"pkce",debug:!1},db:{schema:"public"},global:{headers:{"x-client-info":"papuenvios-web"}}}),Gf=1e4,hA=3e4,Xb=async(t,e=Gf,r="op")=>{let i;const o=new Promise((l,c)=>{i=setTimeout(()=>c(new Error(`${r} timed out after ${e}ms`)),e)});try{return await Promise.race([t,o])}finally{clearTimeout(i)}},Zm=new Map,pA=t=>{if(!t)return null;const e=Zm.get(t);return e?Date.now()-e.ts>hA?(Zm.delete(t),null):e.role:null},ew=(t,e)=>{t&&Zm.set(t,{role:e,ts:Date.now()})},tw=async(t,{timeoutMs:e=Gf}={})=>{if(!t)return null;try{const r=await Xb(V.from("user_profiles").select("id, user_id, email, role, is_enabled, full_name, avatar_url, created_at, updated_at").eq("id",t).single(),e,"getUserProfile");if(r?.error)return console.warn("[supabase] getUserProfile error:",r.error),null;const i=r?.data??r;return i?.role&&ew(t,i.role),i??null}catch(r){return console.warn("[supabase] getUserProfile failed:",r.message||r),null}},Jm=async(t,{timeoutMs:e=Gf}={})=>{if(!t)return null;const r=pA(t);if(r)return r;const o=(await tw(t,{timeoutMs:e}))?.role??null;return o&&ew(t,o),o},gA=Object.freeze(Object.defineProperty({__proto__:null,getUserProfile:tw,getUserRole:Jm,supabase:V,withTimeout:Xb},Symbol.toStringTag,{value:"Module"})),yA=async(t,e="Query")=>{try{const{data:r,error:i}=await t();if(i)throw i;return{data:r,error:null}}catch(r){return console.error(`[${e}] Error:`,r),{data:null,error:r}}},rw=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),vc=()=>new Date().toISOString(),xA=["jtheoden@gmail.com","jtheoden@googlemail.com"],vA={PAYMENT_PROOF:5*1024*1024},bA=["image/jpeg","image/png","image/jpg","image/webp"],Fx={PROFILE_FETCH:5e3,INIT_AUTH:1e4,DEFAULT_QUERY:1e4,CAROUSEL_SLIDE:5e3},qn={PRODUCT_PROFIT_MARGIN:40,COMBO_PROFIT_MARGIN:35,MIN_STOCK_ALERT:10,DISPLAY_ORDER:0},ft={PENDING:"pending",PROCESSING:"processing",SHIPPED:"shipped",DELIVERED:"delivered",COMPLETED:"completed",CANCELLED:"cancelled"},Yt={PENDING:"pending",VALIDATED:"validated",REJECTED:"rejected"},Ux=async()=>{try{const{data:t,error:e}=await V.from("products").select(`
        *,
        category:product_categories(id, name_es, name_en, slug)
      `).eq("is_active",!0).order("created_at",{ascending:!1});if(e)throw e;const r=(t||[]).map(u=>u.id),{data:i}=await V.from("inventory").select("product_id, quantity, available_quantity, expiry_date").in("product_id",r).eq("is_active",!0).order("created_at",{ascending:!1}),o={},l={};return(i||[]).forEach(u=>{o[u.product_id]||(o[u.product_id]=0),o[u.product_id]+=u.available_quantity||0,!l[u.product_id]&&u.expiry_date&&(l[u.product_id]=u.expiry_date)}),{data:(t||[]).map(u=>({...u,stock:o[u.id]||0,expiry_date:l[u.id]||null})),error:null}}catch(t){return console.error("Error fetching products:",t),{data:null,error:t}}},wA=async t=>{try{console.log(" createProduct called with:",t);const{data:e,error:r}=await V.from("products").insert([{sku:t.sku||`SKU-${Date.now()}`,name_es:t.name,name_en:t.name,description_es:t.description_es||"",description_en:t.description_en||"",category_id:t.category_id,base_price:parseFloat(t.basePrice),base_currency_id:t.base_currency_id,profit_margin:parseFloat(t.profitMargin||qn.PRODUCT_PROFIT_MARGIN),min_stock_alert:t.min_stock_alert?parseInt(t.min_stock_alert):qn.MIN_STOCK_ALERT,image_url:t.image||null,image_file:t.image||null,is_active:!0}]).select().single();if(r)throw r;if(console.log(" Product created:",e),t.stock&&parseInt(t.stock)>0){console.log(" Creating inventory with stock:",t.stock);const i={product_id:e.id,quantity:parseInt(t.stock),batch_number:`BATCH-${Date.now()}`,is_active:!0};t.expiryDate&&(i.expiry_date=t.expiryDate);const{error:o}=await V.from("inventory").insert([i]);o?console.error(" Error creating inventory:",o):console.log(" Inventory created successfully")}else console.log(" No stock to create, stock value:",t.stock);return{data:e,error:null}}catch(e){return console.error(" Error creating product:",e),{data:null,error:e}}},jA=async(t,e)=>{try{console.log(" updateProduct called for:",t,"with data:",e);const r={name_es:e.name,name_en:e.name,description_es:e.description_es||"",description_en:e.description_en||"",category_id:e.category_id,base_price:parseFloat(e.basePrice),profit_margin:parseFloat(e.profitMargin||qn.PRODUCT_PROFIT_MARGIN),min_stock_alert:e.min_stock_alert!==void 0?parseInt(e.min_stock_alert):qn.MIN_STOCK_ALERT,updated_at:vc()};e.image&&(r.image_url=e.image,r.image_file=e.image),console.log(" Sending update to products table:",r);const{data:i,error:o}=await V.from("products").update(r).eq("id",t).select().single();if(o)throw o;if(console.log(" Product updated:",i),e.stock!==void 0||e.expiryDate!==void 0){const{data:l}=await V.from("inventory").select("id").eq("product_id",t).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1),c=l&&l.length>0?l[0]:null;if(c){const u={updated_at:vc()};e.stock!==void 0&&(u.quantity=parseInt(e.stock)),e.expiryDate!==void 0&&(u.expiry_date=e.expiryDate||null);const{error:m}=await V.from("inventory").update(u).eq("id",c.id);m&&console.error("Error updating inventory:",m)}else if(e.stock!==void 0&&parseInt(e.stock)>0){const u={product_id:t,quantity:parseInt(e.stock),batch_number:`BATCH-${Date.now()}`,is_active:!0};e.expiryDate&&(u.expiry_date=e.expiryDate);const{error:m}=await V.from("inventory").insert([u]);m&&console.error("Error creating inventory:",m)}}return{data:i,error:null}}catch(r){return console.error("Error updating product:",r),{data:null,error:r}}},_A=async()=>{try{const{data:t,error:e}=await V.from("product_categories").select("id, slug, name_es, name_en, description_es, description_en, display_order, is_active").eq("is_active",!0).order("display_order",{ascending:!0});if(e)throw e;return{data:t||[],error:null}}catch(t){return console.error("Error fetching categories:",t),{data:null,error:t}}},NA=async t=>{try{const{data:e,error:r}=await V.from("product_categories").insert([{name_es:t.es,name_en:t.en,description_es:t.description_es||"",description_en:t.description_en||"",slug:rw(t.es),is_active:!0,display_order:qn.DISPLAY_ORDER}]).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error creating category:",e),{data:null,error:e}}},CA=async(t,e)=>{try{const{data:r,error:i}=await V.from("product_categories").update({name_es:e.es,name_en:e.en,description_es:e.description_es||"",description_en:e.description_en||"",slug:rw(e.es),updated_at:vc()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error updating category:",r),{data:null,error:r}}},SA=async t=>{try{const{error:e}=await V.from("product_categories").update({is_active:!1}).eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error deleting category:",e),{data:null,error:e}}},EA=async(t=!1)=>yA(async()=>{let e=V.from("combo_products").select("*");t||(e=e.eq("is_active",!0));const r=await e.order("created_at",{ascending:!1});if(r.error)throw r.error;if(!r.data||r.data.length===0)return r;const i=r.data.map(m=>m.id),{data:o,error:l}=await V.from("combo_items").select("combo_id, quantity, products(id, name_es, name_en, base_price)").in("combo_id",i);if(l)throw l;const c={};return(o||[]).forEach(m=>{c[m.combo_id]||(c[m.combo_id]=[]),c[m.combo_id].push({quantity:m.quantity,product:m.products})}),{data:r.data.map(m=>({...m,items:c[m.id]||[]})),error:null}},"Get combos"),kA=async t=>{try{let e=0;if(t.productsWithQuantities&&t.productsWithQuantities.length>0){const o=t.productsWithQuantities.map(c=>c.productId),{data:l}=await V.from("products").select("id, base_price").in("id",o);l&&(e=t.productsWithQuantities.reduce((c,u)=>{const m=l.find(h=>h.id===u.productId);return m?c+parseFloat(m.base_price)*u.quantity:c},0))}const{data:r,error:i}=await V.from("combo_products").insert([{name_es:t.name,name_en:t.name,description_es:t.description||"",description_en:t.description||"",image_url:t.image||null,base_total_price:e,profit_margin:parseFloat(t.profitMargin||qn.COMBO_PROFIT_MARGIN),is_active:!0}]).select().single();if(i)throw i;if(t.productsWithQuantities&&t.productsWithQuantities.length>0){const o=t.productsWithQuantities.map(c=>({combo_id:r.id,product_id:c.productId,quantity:c.quantity})),{error:l}=await V.from("combo_items").insert(o);if(l)throw l}return{data:r,error:null}}catch(e){return console.error("Error creating combo:",e),{data:null,error:e}}},PA=async(t,e)=>{try{let r;if(e.productsWithQuantities&&e.productsWithQuantities.length>0){const c=e.productsWithQuantities.map(m=>m.productId),{data:u}=await V.from("products").select("id, base_price").in("id",c);u&&(r=e.productsWithQuantities.reduce((m,h)=>{const p=u.find(g=>g.id===h.productId);return p?m+parseFloat(p.base_price)*h.quantity:m},0))}const i={name_es:e.name,name_en:e.name,description_es:e.description||"",description_en:e.description||"",profit_margin:parseFloat(e.profitMargin||qn.COMBO_PROFIT_MARGIN),updated_at:vc()};e.image&&(i.image_url=e.image),r!==void 0&&(i.base_total_price=r);const{data:o,error:l}=await V.from("combo_products").update(i).eq("id",t).select().single();if(l)throw l;if(e.productsWithQuantities&&(await V.from("combo_items").delete().eq("combo_id",t),e.productsWithQuantities.length>0)){const c=e.productsWithQuantities.map(m=>({combo_id:t,product_id:m.productId,quantity:m.quantity})),{error:u}=await V.from("combo_items").insert(c);if(u)throw u}return{data:o,error:null}}catch(r){return console.error("Error updating combo:",r),{data:null,error:r}}},sw=async(t=!1)=>{try{let e=V.from("testimonials").select("*").order("created_at",{ascending:!1});t||(e=e.eq("is_visible",!0));const{data:r,error:i}=await e;if(i)throw i;if(r&&r.length>0){const o=[...new Set(r.map(u=>u.user_id))],{data:l}=await V.from("user_profiles").select("user_id, full_name, avatar_url").in("user_id",o),c={};l&&l.forEach(u=>{c[u.user_id]=u}),r.forEach(u=>{const m=c[u.user_id];u.user_name=m?.full_name||"Usuario",u.user_avatar=m?.avatar_url||u.user_photo})}return{data:r,error:null}}catch(e){return console.error("Error fetching testimonials:",e),{data:null,error:e}}},TA=async t=>{try{const{data:e,error:r}=await V.from("testimonials").insert([{user_id:t.user_id,order_id:t.order_id||null,rating:t.rating,comment:t.comment,user_photo:t.user_photo||null,is_visible:!1,is_featured:!1}]).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error creating testimonial:",e),{data:null,error:e}}},AA=async(t,e)=>{try{const{data:r,error:i}=await V.from("testimonials").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error updating testimonial:",r),{data:null,error:r}}},RA=async(t,e)=>{try{const{data:r,error:i}=await V.from("testimonials").update({is_visible:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error toggling testimonial visibility:",r),{data:null,error:r}}},OA=async(t,e)=>{try{const{data:r,error:i}=await V.from("testimonials").update({is_featured:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error toggling testimonial featured status:",r),{data:null,error:r}}},DA=async t=>{try{const{data:e,error:r}=await V.from("testimonials").select("*").eq("user_id",t).maybeSingle();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching user testimonial:",e),{data:null,error:e}}},nw=async(t=!1)=>{try{let e=V.from("carousel_slides").select("*").order("display_order",{ascending:!0});t&&(e=e.eq("is_active",!0));const{data:r,error:i}=await e;if(i)throw i;return{data:r,error:null}}catch(e){return console.error("Error fetching carousel slides:",e),{data:null,error:e}}},MA=async t=>{try{const{data:e}=await V.from("carousel_slides").select("display_order").order("display_order",{ascending:!1}).limit(1),r=e&&e.length>0?e[0].display_order+1:0,{data:i,error:o}=await V.from("carousel_slides").insert([{title_es:t.title_es||"",title_en:t.title_en||"",subtitle_es:t.subtitle_es||null,subtitle_en:t.subtitle_en||null,image_url:t.image_url||null,image_file:t.image_file||null,link_url:t.link_url||null,display_order:t.display_order??r,is_active:t.is_active??!0}]).select().single();if(o)throw o;return{data:i,error:null}}catch(e){return console.error("Error creating carousel slide:",e),{data:null,error:e}}},Bx=async(t,e)=>{try{const{data:r,error:i}=await V.from("carousel_slides").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error updating carousel slide:",r),{data:null,error:r}}},IA=async t=>{try{const{error:e}=await V.from("carousel_slides").delete().eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error hard deleting carousel slide:",e),{data:null,error:e}}},LA=async()=>{try{const{data:t,error:e}=await V.from("carousel_slides").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(e)throw e;return{data:t,error:null}}catch(t){return console.error("Error fetching active carousel slides:",t),{data:null,error:t}}},iw=w.createContext(),Wa=(t,e)=>{const[r,i]=w.useState(()=>{try{const l=window.localStorage.getItem(t);return l?JSON.parse(l):e}catch(l){return console.log(l),e}});return[r,l=>{try{const c=l instanceof Function?l(r):l;i(c),window.localStorage.setItem(t,JSON.stringify(c))}catch(c){console.log(c)}}]},$A=({children:t})=>{const[e,r]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[u,m]=w.useState([]),[h,p]=w.useState([]),[g,y]=w.useState(!0),[b,j]=w.useState(null),[C,_]=Wa("cart",[]),[A,k]=Wa("zelleAccounts",[{id:1,email:"payment1@example.com",name:"Main Sales",forProducts:!0,forRemittances:!1,active:!0,payments:{weekly:12,monthly:50,yearly:600,total:1500}},{id:2,email:"remit@example.com",name:"Remittances Only",forProducts:!1,forRemittances:!0,active:!0,payments:{weekly:5,monthly:20,yearly:250,total:400}}]),[E,N]=Wa("financialSettings",{usdToLocal:36.5,currencies:[{code:"USD",name:"US Dollar",rate:1,symbol:"$"},{code:"EUR",name:"Euro",rate:.92,symbol:""}],productProfit:40,comboProfit:35,remittanceProfit:5,shippingType:"undetermined",shippingFixedAmount:0,shippingFreeThreshold:100}),[R,T]=Wa("notificationSettings",{whatsapp:"",whatsappGroup:"",adminEmail:""}),[M,I]=Wa("visualSettings",{logo:"",favicon:"",companyName:"PapuEnvos",primaryColor:"#2563eb",secondaryColor:"#9333ea",useGradient:!0,headerBgColor:"#ffffff",headerTextColor:"#1f2937",headingColor:"#1f2937",useHeadingGradient:!0,buttonBgColor:"#2563eb",buttonTextColor:"#ffffff",buttonHoverBgColor:"#1d4ed8",destructiveBgColor:"#dc2626",destructiveTextColor:"#ffffff",destructiveHoverBgColor:"#b91c1c",accentColor:"#9333ea",pageBgColor:"#f9fafb",cardBgColor:"#ffffff"}),Q=async()=>{try{j(null);const{data:P,error:F}=await Ux();if(F)throw F;r(P||[])}catch(P){console.error("Error refreshing products:",P),j(P.message)}},H=async()=>{try{j(null);const{data:P,error:F}=await _A();if(F)throw F;c(P||[])}catch(P){console.error("Error refreshing categories:",P),j(P.message)}},be=async(P=!1)=>{try{const{data:F,error:te}=await EA(P);if(te)throw te;const{data:me}=await Ux(),ye={};(me||[]).forEach(xe=>{ye[xe.id]=xe});const _e=(F||[]).map(xe=>{const Ne={},De=xe.items?.map(ie=>(Ne[ie.product.id]=ie.quantity,ie.product.id))||[];let Fe=!1;for(const ie of De){const je=ye[ie],W=Ne[ie]||1,O=je?.stock||0;if(O===0||O<W){Fe=!0;break}}return Fe&&xe.is_active&&V.from("combo_products").update({is_active:!1}).eq("id",xe.id).then(()=>console.log(`Combo ${xe.id} auto-deactivated due to insufficient stock`)),{id:xe.id,name:xe.name_es,description:xe.description_es,image:xe.image_url,products:De,productQuantities:Ne,items:xe.items||[],profitMargin:xe.profit_margin,baseTotalPrice:xe.base_total_price,is_active:Fe?!1:xe.is_active}});o(_e)}catch(F){console.error("Error refreshing combos:",F)}},z=async(P=!1)=>{try{j(null);const{data:F,error:te}=await sw(P);if(te)throw te;m(F||[])}catch(F){console.error("Error refreshing testimonials:",F),j(F)}},de=async(P=!1)=>{try{j(null);const{data:F,error:te}=await nw(P);if(te)throw te;p(F||[])}catch(F){console.error("Error refreshing carousel slides:",F),j(F)}};w.useEffect(()=>{(async()=>{y(!0),await Promise.all([Q(),H(),be(),z(!1),de(!1)]),y(!1)})()},[]);const ee=P=>r(F=>[...F,P]),ce=P=>r(F=>F.map(te=>te.id===P.id?P:te)),se=P=>{_(F=>F.find(me=>me.id===P.id)?F.map(me=>me.id===P.id?{...me,quantity:me.quantity+1}:me):[...F,{...P,quantity:1}])},ue=P=>_(F=>F.filter(te=>te.id!==P)),ae={products:e,addProduct:ee,updateProduct:ce,refreshProducts:Q,combos:i,setCombos:o,refreshCombos:be,cart:C,addToCart:se,removeFromCart:ue,updateCartQuantity:(P,F)=>{if(F<=0){ue(P);return}_(te=>te.map(me=>me.id===P?{...me,quantity:F}:me))},clearCart:()=>_([]),categories:l,setCategories:c,refreshCategories:H,testimonials:u,setTestimonials:m,refreshTestimonials:z,carouselSlides:h,setCarouselSlides:p,refreshCarouselSlides:de,zelleAccounts:A,setZelleAccounts:k,financialSettings:E,setFinancialSettings:N,notificationSettings:R,setNotificationSettings:T,visualSettings:M,setVisualSettings:I,loading:g,error:b,exchangeRate:E.currencies.find(P=>P.code==="USD")?.rate||1};return s.jsx(iw.Provider,{value:ae,children:t})},Xt=()=>{const t=w.useContext(iw);if(t===void 0)throw new Error("useBusiness must be used within a BusinessProvider");return t},FA=()=>{const{visualSettings:t}=Xt();return s.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center z-50",style:{background:t.useGradient?`linear-gradient(to bottom right, ${t.primaryColor}, ${t.secondaryColor})`:t.primaryColor},children:s.jsxs("div",{className:"text-center",children:[s.jsx(oe.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"mb-8",children:s.jsxs("div",{className:"relative",children:[s.jsxs(oe.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-24 h-24 mx-auto mb-4 relative",children:[s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white/20"}),s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white border-t-transparent animate-spin"})]}),s.jsxs(oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"flex justify-center space-x-4 mb-6",children:[s.jsx(oe.div,{animate:{y:[0,-10,0]},transition:{duration:1.5,repeat:1/0,delay:0},children:s.jsx(Or,{className:"w-8 h-8 text-white"})}),s.jsx(oe.div,{animate:{y:[0,-10,0]},transition:{duration:1.5,repeat:1/0,delay:.2},children:s.jsx(St,{className:"w-8 h-8 text-white"})}),s.jsx(oe.div,{animate:{y:[0,-10,0]},transition:{duration:1.5,repeat:1/0,delay:.4},children:s.jsx($m,{className:"w-8 h-8 text-white"})})]})]})}),s.jsx(oe.h1,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},className:"text-4xl font-bold text-white mb-4",children:t.companyName||"PapuEnvos"}),s.jsx(oe.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},className:"text-xl text-white/80 mb-8",children:"Cargando tu plataforma de comercio digital..."}),s.jsx(oe.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:2,delay:1},className:"w-64 h-2 rounded-full mx-auto overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.2)"},children:s.jsx(oe.div,{initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"h-full w-1/3",style:{background:t.useGradient?`linear-gradient(to right, transparent, ${t.secondaryColor}, transparent)`:`linear-gradient(to right, transparent, ${t.primaryColor}, transparent)`}})})]})})};class UA extends nt.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:s.jsxs("div",{className:"glass-effect p-8 rounded-2xl text-center max-w-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 mb-4",children:this.state.error?.message||"An unexpected error occurred"}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Reload Page"})]})}):this.props.children}}var dm={exports:{}},um={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx;function BA(){if(zx)return um;zx=1;var t=Nc();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var r=typeof Object.is=="function"?Object.is:e,i=t.useState,o=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function u(g,y){var b=y(),j=i({inst:{value:b,getSnapshot:y}}),C=j[0].inst,_=j[1];return l(function(){C.value=b,C.getSnapshot=y,m(C)&&_({inst:C})},[g,b,y]),o(function(){return m(C)&&_({inst:C}),g(function(){m(C)&&_({inst:C})})},[g]),c(b),b}function m(g){var y=g.getSnapshot;g=g.value;try{var b=y();return!r(g,b)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return um.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,um}var Vx;function zA(){return Vx||(Vx=1,dm.exports=BA()),dm.exports}var VA=zA();function qA(){return VA.useSyncExternalStore(WA,()=>!0,()=>!1)}function WA(){return()=>{}}var Kf="Avatar",[HA]=wo(Kf),[GA,aw]=HA(Kf),ow=w.forwardRef((t,e)=>{const{__scopeAvatar:r,...i}=t,[o,l]=w.useState("idle");return s.jsx(GA,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:l,children:s.jsx($t.span,{...i,ref:e})})});ow.displayName=Kf;var lw="AvatarImage",cw=w.forwardRef((t,e)=>{const{__scopeAvatar:r,src:i,onLoadingStatusChange:o=()=>{},...l}=t,c=aw(lw,r),u=KA(i,l),m=Cs(h=>{o(h),c.onImageLoadingStatusChange(h)});return Dr(()=>{u!=="idle"&&m(u)},[u,m]),u==="loaded"?s.jsx($t.img,{...l,ref:e,src:i}):null});cw.displayName=lw;var dw="AvatarFallback",uw=w.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:i,...o}=t,l=aw(dw,r),[c,u]=w.useState(i===void 0);return w.useEffect(()=>{if(i!==void 0){const m=window.setTimeout(()=>u(!0),i);return()=>window.clearTimeout(m)}},[i]),c&&l.imageLoadingStatus!=="loaded"?s.jsx($t.span,{...o,ref:e}):null});uw.displayName=dw;function qx(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function KA(t,{referrerPolicy:e,crossOrigin:r}){const i=qA(),o=w.useRef(null),l=i?(o.current||(o.current=new window.Image),o.current):null,[c,u]=w.useState(()=>qx(l,t));return Dr(()=>{u(qx(l,t))},[l,t]),Dr(()=>{const m=g=>()=>{u(g)};if(!l)return;const h=m("loaded"),p=m("error");return l.addEventListener("load",h),l.addEventListener("error",p),e&&(l.referrerPolicy=e),typeof r=="string"&&(l.crossOrigin=r),()=>{l.removeEventListener("load",h),l.removeEventListener("error",p)}},[l,r,e]),c}var YA=ow,QA=cw,ZA=uw,JA=dv[" useId ".trim().toString()]||(()=>{}),XA=0;function eR(t){const[e,r]=w.useState(JA());return Dr(()=>{r(i=>i??String(XA++))},[t]),e?`radix-${e}`:""}const tR=["top","right","bottom","left"],un=Math.min,gr=Math.max,bc=Math.round,Jl=Math.floor,cs=t=>({x:t,y:t}),rR={left:"right",right:"left",bottom:"top",top:"bottom"},sR={start:"end",end:"start"};function Xm(t,e,r){return gr(t,un(e,r))}function Es(t,e){return typeof t=="function"?t(e):t}function ks(t){return t.split("-")[0]}function Qi(t){return t.split("-")[1]}function Yf(t){return t==="x"?"y":"x"}function Qf(t){return t==="y"?"height":"width"}const nR=new Set(["top","bottom"]);function as(t){return nR.has(ks(t))?"y":"x"}function Zf(t){return Yf(as(t))}function iR(t,e,r){r===void 0&&(r=!1);const i=Qi(t),o=Zf(t),l=Qf(o);let c=o==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=wc(c)),[c,wc(c)]}function aR(t){const e=wc(t);return[ef(t),e,ef(e)]}function ef(t){return t.replace(/start|end/g,e=>sR[e])}const Wx=["left","right"],Hx=["right","left"],oR=["top","bottom"],lR=["bottom","top"];function cR(t,e,r){switch(t){case"top":case"bottom":return r?e?Hx:Wx:e?Wx:Hx;case"left":case"right":return e?oR:lR;default:return[]}}function dR(t,e,r,i){const o=Qi(t);let l=cR(ks(t),r==="start",i);return o&&(l=l.map(c=>c+"-"+o),e&&(l=l.concat(l.map(ef)))),l}function wc(t){return t.replace(/left|right|bottom|top/g,e=>rR[e])}function uR(t){return{top:0,right:0,bottom:0,left:0,...t}}function mw(t){return typeof t!="number"?uR(t):{top:t,right:t,bottom:t,left:t}}function jc(t){const{x:e,y:r,width:i,height:o}=t;return{width:i,height:o,top:r,left:e,right:e+i,bottom:r+o,x:e,y:r}}function Gx(t,e,r){let{reference:i,floating:o}=t;const l=as(e),c=Zf(e),u=Qf(c),m=ks(e),h=l==="y",p=i.x+i.width/2-o.width/2,g=i.y+i.height/2-o.height/2,y=i[u]/2-o[u]/2;let b;switch(m){case"top":b={x:p,y:i.y-o.height};break;case"bottom":b={x:p,y:i.y+i.height};break;case"right":b={x:i.x+i.width,y:g};break;case"left":b={x:i.x-o.width,y:g};break;default:b={x:i.x,y:i.y}}switch(Qi(e)){case"start":b[c]-=y*(r&&h?-1:1);break;case"end":b[c]+=y*(r&&h?-1:1);break}return b}const mR=async(t,e,r)=>{const{placement:i="bottom",strategy:o="absolute",middleware:l=[],platform:c}=r,u=l.filter(Boolean),m=await(c.isRTL==null?void 0:c.isRTL(e));let h=await c.getElementRects({reference:t,floating:e,strategy:o}),{x:p,y:g}=Gx(h,i,m),y=i,b={},j=0;for(let C=0;C<u.length;C++){const{name:_,fn:A}=u[C],{x:k,y:E,data:N,reset:R}=await A({x:p,y:g,initialPlacement:i,placement:y,strategy:o,middlewareData:b,rects:h,platform:c,elements:{reference:t,floating:e}});p=k??p,g=E??g,b={...b,[_]:{...b[_],...N}},R&&j<=50&&(j++,typeof R=="object"&&(R.placement&&(y=R.placement),R.rects&&(h=R.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:o}):R.rects),{x:p,y:g}=Gx(h,y,m)),C=-1)}return{x:p,y:g,placement:y,strategy:o,middlewareData:b}};async function fo(t,e){var r;e===void 0&&(e={});const{x:i,y:o,platform:l,rects:c,elements:u,strategy:m}=t,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:g="floating",altBoundary:y=!1,padding:b=0}=Es(e,t),j=mw(b),_=u[y?g==="floating"?"reference":"floating":g],A=jc(await l.getClippingRect({element:(r=await(l.isElement==null?void 0:l.isElement(_)))==null||r?_:_.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(u.floating)),boundary:h,rootBoundary:p,strategy:m})),k=g==="floating"?{x:i,y:o,width:c.floating.width,height:c.floating.height}:c.reference,E=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u.floating)),N=await(l.isElement==null?void 0:l.isElement(E))?await(l.getScale==null?void 0:l.getScale(E))||{x:1,y:1}:{x:1,y:1},R=jc(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:k,offsetParent:E,strategy:m}):k);return{top:(A.top-R.top+j.top)/N.y,bottom:(R.bottom-A.bottom+j.bottom)/N.y,left:(A.left-R.left+j.left)/N.x,right:(R.right-A.right+j.right)/N.x}}const fR=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:i,placement:o,rects:l,platform:c,elements:u,middlewareData:m}=e,{element:h,padding:p=0}=Es(t,e)||{};if(h==null)return{};const g=mw(p),y={x:r,y:i},b=Zf(o),j=Qf(b),C=await c.getDimensions(h),_=b==="y",A=_?"top":"left",k=_?"bottom":"right",E=_?"clientHeight":"clientWidth",N=l.reference[j]+l.reference[b]-y[b]-l.floating[j],R=y[b]-l.reference[b],T=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h));let M=T?T[E]:0;(!M||!await(c.isElement==null?void 0:c.isElement(T)))&&(M=u.floating[E]||l.floating[j]);const I=N/2-R/2,Q=M/2-C[j]/2-1,H=un(g[A],Q),be=un(g[k],Q),z=H,de=M-C[j]-be,ee=M/2-C[j]/2+I,ce=Xm(z,ee,de),se=!m.arrow&&Qi(o)!=null&&ee!==ce&&l.reference[j]/2-(ee<z?H:be)-C[j]/2<0,ue=se?ee<z?ee-z:ee-de:0;return{[b]:y[b]+ue,data:{[b]:ce,centerOffset:ee-ce-ue,...se&&{alignmentOffset:ue}},reset:se}}}),hR=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,i;const{placement:o,middlewareData:l,rects:c,initialPlacement:u,platform:m,elements:h}=e,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:C=!0,..._}=Es(t,e);if((r=l.arrow)!=null&&r.alignmentOffset)return{};const A=ks(o),k=as(u),E=ks(u)===u,N=await(m.isRTL==null?void 0:m.isRTL(h.floating)),R=y||(E||!C?[wc(u)]:aR(u)),T=j!=="none";!y&&T&&R.push(...dR(u,C,j,N));const M=[u,...R],I=await fo(e,_),Q=[];let H=((i=l.flip)==null?void 0:i.overflows)||[];if(p&&Q.push(I[A]),g){const ee=iR(o,c,N);Q.push(I[ee[0]],I[ee[1]])}if(H=[...H,{placement:o,overflows:Q}],!Q.every(ee=>ee<=0)){var be,z;const ee=(((be=l.flip)==null?void 0:be.index)||0)+1,ce=M[ee];if(ce&&(!(g==="alignment"?k!==as(ce):!1)||H.every($=>as($.placement)===k?$.overflows[0]>0:!0)))return{data:{index:ee,overflows:H},reset:{placement:ce}};let se=(z=H.filter(ue=>ue.overflows[0]<=0).sort((ue,$)=>ue.overflows[1]-$.overflows[1])[0])==null?void 0:z.placement;if(!se)switch(b){case"bestFit":{var de;const ue=(de=H.filter($=>{if(T){const ne=as($.placement);return ne===k||ne==="y"}return!0}).map($=>[$.placement,$.overflows.filter(ne=>ne>0).reduce((ne,ae)=>ne+ae,0)]).sort(($,ne)=>$[1]-ne[1])[0])==null?void 0:de[0];ue&&(se=ue);break}case"initialPlacement":se=u;break}if(o!==se)return{reset:{placement:se}}}return{}}}};function Kx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Yx(t){return tR.some(e=>t[e]>=0)}const pR=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:i="referenceHidden",...o}=Es(t,e);switch(i){case"referenceHidden":{const l=await fo(e,{...o,elementContext:"reference"}),c=Kx(l,r.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Yx(c)}}}case"escaped":{const l=await fo(e,{...o,altBoundary:!0}),c=Kx(l,r.floating);return{data:{escapedOffsets:c,escaped:Yx(c)}}}default:return{}}}}},fw=new Set(["left","top"]);async function gR(t,e){const{placement:r,platform:i,elements:o}=t,l=await(i.isRTL==null?void 0:i.isRTL(o.floating)),c=ks(r),u=Qi(r),m=as(r)==="y",h=fw.has(c)?-1:1,p=l&&m?-1:1,g=Es(e,t);let{mainAxis:y,crossAxis:b,alignmentAxis:j}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof j=="number"&&(b=u==="end"?j*-1:j),m?{x:b*p,y:y*h}:{x:y*h,y:b*p}}const yR=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,i;const{x:o,y:l,placement:c,middlewareData:u}=e,m=await gR(e,t);return c===((r=u.offset)==null?void 0:r.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:o+m.x,y:l+m.y,data:{...m,placement:c}}}}},xR=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:i,placement:o}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:u={fn:_=>{let{x:A,y:k}=_;return{x:A,y:k}}},...m}=Es(t,e),h={x:r,y:i},p=await fo(e,m),g=as(ks(o)),y=Yf(g);let b=h[y],j=h[g];if(l){const _=y==="y"?"top":"left",A=y==="y"?"bottom":"right",k=b+p[_],E=b-p[A];b=Xm(k,b,E)}if(c){const _=g==="y"?"top":"left",A=g==="y"?"bottom":"right",k=j+p[_],E=j-p[A];j=Xm(k,j,E)}const C=u.fn({...e,[y]:b,[g]:j});return{...C,data:{x:C.x-r,y:C.y-i,enabled:{[y]:l,[g]:c}}}}}},vR=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:i,placement:o,rects:l,middlewareData:c}=e,{offset:u=0,mainAxis:m=!0,crossAxis:h=!0}=Es(t,e),p={x:r,y:i},g=as(o),y=Yf(g);let b=p[y],j=p[g];const C=Es(u,e),_=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(m){const E=y==="y"?"height":"width",N=l.reference[y]-l.floating[E]+_.mainAxis,R=l.reference[y]+l.reference[E]-_.mainAxis;b<N?b=N:b>R&&(b=R)}if(h){var A,k;const E=y==="y"?"width":"height",N=fw.has(ks(o)),R=l.reference[g]-l.floating[E]+(N&&((A=c.offset)==null?void 0:A[g])||0)+(N?0:_.crossAxis),T=l.reference[g]+l.reference[E]+(N?0:((k=c.offset)==null?void 0:k[g])||0)-(N?_.crossAxis:0);j<R?j=R:j>T&&(j=T)}return{[y]:b,[g]:j}}}},bR=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,i;const{placement:o,rects:l,platform:c,elements:u}=e,{apply:m=()=>{},...h}=Es(t,e),p=await fo(e,h),g=ks(o),y=Qi(o),b=as(o)==="y",{width:j,height:C}=l.floating;let _,A;g==="top"||g==="bottom"?(_=g,A=y===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(A=g,_=y==="end"?"top":"bottom");const k=C-p.top-p.bottom,E=j-p.left-p.right,N=un(C-p[_],k),R=un(j-p[A],E),T=!e.middlewareData.shift;let M=N,I=R;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(I=E),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(M=k),T&&!y){const H=gr(p.left,0),be=gr(p.right,0),z=gr(p.top,0),de=gr(p.bottom,0);b?I=j-2*(H!==0||be!==0?H+be:gr(p.left,p.right)):M=C-2*(z!==0||de!==0?z+de:gr(p.top,p.bottom))}await m({...e,availableWidth:I,availableHeight:M});const Q=await c.getDimensions(u.floating);return j!==Q.width||C!==Q.height?{reset:{rects:!0}}:{}}}};function Fc(){return typeof window<"u"}function Zi(t){return hw(t)?(t.nodeName||"").toLowerCase():"#document"}function yr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function us(t){var e;return(e=(hw(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function hw(t){return Fc()?t instanceof Node||t instanceof yr(t).Node:!1}function Yr(t){return Fc()?t instanceof Element||t instanceof yr(t).Element:!1}function ds(t){return Fc()?t instanceof HTMLElement||t instanceof yr(t).HTMLElement:!1}function Qx(t){return!Fc()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yr(t).ShadowRoot}const wR=new Set(["inline","contents"]);function Co(t){const{overflow:e,overflowX:r,overflowY:i,display:o}=Qr(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+r)&&!wR.has(o)}const jR=new Set(["table","td","th"]);function _R(t){return jR.has(Zi(t))}const NR=[":popover-open",":modal"];function Uc(t){return NR.some(e=>{try{return t.matches(e)}catch{return!1}})}const CR=["transform","translate","scale","rotate","perspective"],SR=["transform","translate","scale","rotate","perspective","filter"],ER=["paint","layout","strict","content"];function Jf(t){const e=Xf(),r=Yr(t)?Qr(t):t;return CR.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||SR.some(i=>(r.willChange||"").includes(i))||ER.some(i=>(r.contain||"").includes(i))}function kR(t){let e=mn(t);for(;ds(e)&&!Gi(e);){if(Jf(e))return e;if(Uc(e))return null;e=mn(e)}return null}function Xf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const PR=new Set(["html","body","#document"]);function Gi(t){return PR.has(Zi(t))}function Qr(t){return yr(t).getComputedStyle(t)}function Bc(t){return Yr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function mn(t){if(Zi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Qx(t)&&t.host||us(t);return Qx(e)?e.host:e}function pw(t){const e=mn(t);return Gi(e)?t.ownerDocument?t.ownerDocument.body:t.body:ds(e)&&Co(e)?e:pw(e)}function ho(t,e,r){var i;e===void 0&&(e=[]),r===void 0&&(r=!0);const o=pw(t),l=o===((i=t.ownerDocument)==null?void 0:i.body),c=yr(o);if(l){const u=tf(c);return e.concat(c,c.visualViewport||[],Co(o)?o:[],u&&r?ho(u):[])}return e.concat(o,ho(o,[],r))}function tf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function gw(t){const e=Qr(t);let r=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=ds(t),l=o?t.offsetWidth:r,c=o?t.offsetHeight:i,u=bc(r)!==l||bc(i)!==c;return u&&(r=l,i=c),{width:r,height:i,$:u}}function eh(t){return Yr(t)?t:t.contextElement}function zi(t){const e=eh(t);if(!ds(e))return cs(1);const r=e.getBoundingClientRect(),{width:i,height:o,$:l}=gw(e);let c=(l?bc(r.width):r.width)/i,u=(l?bc(r.height):r.height)/o;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const TR=cs(0);function yw(t){const e=yr(t);return!Xf()||!e.visualViewport?TR:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function AR(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==yr(t)?!1:e}function Wn(t,e,r,i){e===void 0&&(e=!1),r===void 0&&(r=!1);const o=t.getBoundingClientRect(),l=eh(t);let c=cs(1);e&&(i?Yr(i)&&(c=zi(i)):c=zi(t));const u=AR(l,r,i)?yw(l):cs(0);let m=(o.left+u.x)/c.x,h=(o.top+u.y)/c.y,p=o.width/c.x,g=o.height/c.y;if(l){const y=yr(l),b=i&&Yr(i)?yr(i):i;let j=y,C=tf(j);for(;C&&i&&b!==j;){const _=zi(C),A=C.getBoundingClientRect(),k=Qr(C),E=A.left+(C.clientLeft+parseFloat(k.paddingLeft))*_.x,N=A.top+(C.clientTop+parseFloat(k.paddingTop))*_.y;m*=_.x,h*=_.y,p*=_.x,g*=_.y,m+=E,h+=N,j=yr(C),C=tf(j)}}return jc({width:p,height:g,x:m,y:h})}function zc(t,e){const r=Bc(t).scrollLeft;return e?e.left+r:Wn(us(t)).left+r}function xw(t,e){const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-zc(t,r),o=r.top+e.scrollTop;return{x:i,y:o}}function RR(t){let{elements:e,rect:r,offsetParent:i,strategy:o}=t;const l=o==="fixed",c=us(i),u=e?Uc(e.floating):!1;if(i===c||u&&l)return r;let m={scrollLeft:0,scrollTop:0},h=cs(1);const p=cs(0),g=ds(i);if((g||!g&&!l)&&((Zi(i)!=="body"||Co(c))&&(m=Bc(i)),ds(i))){const b=Wn(i);h=zi(i),p.x=b.x+i.clientLeft,p.y=b.y+i.clientTop}const y=c&&!g&&!l?xw(c,m):cs(0);return{width:r.width*h.x,height:r.height*h.y,x:r.x*h.x-m.scrollLeft*h.x+p.x+y.x,y:r.y*h.y-m.scrollTop*h.y+p.y+y.y}}function OR(t){return Array.from(t.getClientRects())}function DR(t){const e=us(t),r=Bc(t),i=t.ownerDocument.body,o=gr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),l=gr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let c=-r.scrollLeft+zc(t);const u=-r.scrollTop;return Qr(i).direction==="rtl"&&(c+=gr(e.clientWidth,i.clientWidth)-o),{width:o,height:l,x:c,y:u}}const Zx=25;function MR(t,e){const r=yr(t),i=us(t),o=r.visualViewport;let l=i.clientWidth,c=i.clientHeight,u=0,m=0;if(o){l=o.width,c=o.height;const p=Xf();(!p||p&&e==="fixed")&&(u=o.offsetLeft,m=o.offsetTop)}const h=zc(i);if(h<=0){const p=i.ownerDocument,g=p.body,y=getComputedStyle(g),b=p.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,j=Math.abs(i.clientWidth-g.clientWidth-b);j<=Zx&&(l-=j)}else h<=Zx&&(l+=h);return{width:l,height:c,x:u,y:m}}const IR=new Set(["absolute","fixed"]);function LR(t,e){const r=Wn(t,!0,e==="fixed"),i=r.top+t.clientTop,o=r.left+t.clientLeft,l=ds(t)?zi(t):cs(1),c=t.clientWidth*l.x,u=t.clientHeight*l.y,m=o*l.x,h=i*l.y;return{width:c,height:u,x:m,y:h}}function Jx(t,e,r){let i;if(e==="viewport")i=MR(t,r);else if(e==="document")i=DR(us(t));else if(Yr(e))i=LR(e,r);else{const o=yw(t);i={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return jc(i)}function vw(t,e){const r=mn(t);return r===e||!Yr(r)||Gi(r)?!1:Qr(r).position==="fixed"||vw(r,e)}function $R(t,e){const r=e.get(t);if(r)return r;let i=ho(t,[],!1).filter(u=>Yr(u)&&Zi(u)!=="body"),o=null;const l=Qr(t).position==="fixed";let c=l?mn(t):t;for(;Yr(c)&&!Gi(c);){const u=Qr(c),m=Jf(c);!m&&u.position==="fixed"&&(o=null),(l?!m&&!o:!m&&u.position==="static"&&!!o&&IR.has(o.position)||Co(c)&&!m&&vw(t,c))?i=i.filter(p=>p!==c):o=u,c=mn(c)}return e.set(t,i),i}function FR(t){let{element:e,boundary:r,rootBoundary:i,strategy:o}=t;const c=[...r==="clippingAncestors"?Uc(e)?[]:$R(e,this._c):[].concat(r),i],u=c[0],m=c.reduce((h,p)=>{const g=Jx(e,p,o);return h.top=gr(g.top,h.top),h.right=un(g.right,h.right),h.bottom=un(g.bottom,h.bottom),h.left=gr(g.left,h.left),h},Jx(e,u,o));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function UR(t){const{width:e,height:r}=gw(t);return{width:e,height:r}}function BR(t,e,r){const i=ds(e),o=us(e),l=r==="fixed",c=Wn(t,!0,l,e);let u={scrollLeft:0,scrollTop:0};const m=cs(0);function h(){m.x=zc(o)}if(i||!i&&!l)if((Zi(e)!=="body"||Co(o))&&(u=Bc(e)),i){const b=Wn(e,!0,l,e);m.x=b.x+e.clientLeft,m.y=b.y+e.clientTop}else o&&h();l&&!i&&o&&h();const p=o&&!i&&!l?xw(o,u):cs(0),g=c.left+u.scrollLeft-m.x-p.x,y=c.top+u.scrollTop-m.y-p.y;return{x:g,y,width:c.width,height:c.height}}function mm(t){return Qr(t).position==="static"}function Xx(t,e){if(!ds(t)||Qr(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return us(t)===r&&(r=r.ownerDocument.body),r}function bw(t,e){const r=yr(t);if(Uc(t))return r;if(!ds(t)){let o=mn(t);for(;o&&!Gi(o);){if(Yr(o)&&!mm(o))return o;o=mn(o)}return r}let i=Xx(t,e);for(;i&&_R(i)&&mm(i);)i=Xx(i,e);return i&&Gi(i)&&mm(i)&&!Jf(i)?r:i||kR(t)||r}const zR=async function(t){const e=this.getOffsetParent||bw,r=this.getDimensions,i=await r(t.floating);return{reference:BR(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function VR(t){return Qr(t).direction==="rtl"}const qR={convertOffsetParentRelativeRectToViewportRelativeRect:RR,getDocumentElement:us,getClippingRect:FR,getOffsetParent:bw,getElementRects:zR,getClientRects:OR,getDimensions:UR,getScale:zi,isElement:Yr,isRTL:VR};function ww(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function WR(t,e){let r=null,i;const o=us(t);function l(){var u;clearTimeout(i),(u=r)==null||u.disconnect(),r=null}function c(u,m){u===void 0&&(u=!1),m===void 0&&(m=1),l();const h=t.getBoundingClientRect(),{left:p,top:g,width:y,height:b}=h;if(u||e(),!y||!b)return;const j=Jl(g),C=Jl(o.clientWidth-(p+y)),_=Jl(o.clientHeight-(g+b)),A=Jl(p),E={rootMargin:-j+"px "+-C+"px "+-_+"px "+-A+"px",threshold:gr(0,un(1,m))||1};let N=!0;function R(T){const M=T[0].intersectionRatio;if(M!==m){if(!N)return c();M?c(!1,M):i=setTimeout(()=>{c(!1,1e-7)},1e3)}M===1&&!ww(h,t.getBoundingClientRect())&&c(),N=!1}try{r=new IntersectionObserver(R,{...E,root:o.ownerDocument})}catch{r=new IntersectionObserver(R,E)}r.observe(t)}return c(!0),l}function HR(t,e,r,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:m=!1}=i,h=eh(t),p=o||l?[...h?ho(h):[],...ho(e)]:[];p.forEach(A=>{o&&A.addEventListener("scroll",r,{passive:!0}),l&&A.addEventListener("resize",r)});const g=h&&u?WR(h,r):null;let y=-1,b=null;c&&(b=new ResizeObserver(A=>{let[k]=A;k&&k.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var E;(E=b)==null||E.observe(e)})),r()}),h&&!m&&b.observe(h),b.observe(e));let j,C=m?Wn(t):null;m&&_();function _(){const A=Wn(t);C&&!ww(C,A)&&r(),C=A,j=requestAnimationFrame(_)}return r(),()=>{var A;p.forEach(k=>{o&&k.removeEventListener("scroll",r),l&&k.removeEventListener("resize",r)}),g?.(),(A=b)==null||A.disconnect(),b=null,m&&cancelAnimationFrame(j)}}const GR=yR,KR=xR,YR=hR,QR=bR,ZR=pR,ev=fR,JR=vR,XR=(t,e,r)=>{const i=new Map,o={platform:qR,...r},l={...o.platform,_c:i};return mR(t,e,{...o,platform:l})};var e4=typeof document<"u",t4=function(){},sc=e4?w.useLayoutEffect:t4;function _c(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,i,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(i=r;i--!==0;)if(!_c(t[i],e[i]))return!1;return!0}if(o=Object.keys(t),r=o.length,r!==Object.keys(e).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(e,o[i]))return!1;for(i=r;i--!==0;){const l=o[i];if(!(l==="_owner"&&t.$$typeof)&&!_c(t[l],e[l]))return!1}return!0}return t!==t&&e!==e}function jw(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function tv(t,e){const r=jw(t);return Math.round(e*r)/r}function fm(t){const e=w.useRef(t);return sc(()=>{e.current=t}),e}function r4(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:i=[],platform:o,elements:{reference:l,floating:c}={},transform:u=!0,whileElementsMounted:m,open:h}=t,[p,g]=w.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[y,b]=w.useState(i);_c(y,i)||b(i);const[j,C]=w.useState(null),[_,A]=w.useState(null),k=w.useCallback($=>{$!==T.current&&(T.current=$,C($))},[]),E=w.useCallback($=>{$!==M.current&&(M.current=$,A($))},[]),N=l||j,R=c||_,T=w.useRef(null),M=w.useRef(null),I=w.useRef(p),Q=m!=null,H=fm(m),be=fm(o),z=fm(h),de=w.useCallback(()=>{if(!T.current||!M.current)return;const $={placement:e,strategy:r,middleware:y};be.current&&($.platform=be.current),XR(T.current,M.current,$).then(ne=>{const ae={...ne,isPositioned:z.current!==!1};ee.current&&!_c(I.current,ae)&&(I.current=ae,Oc.flushSync(()=>{g(ae)}))})},[y,e,r,be,z]);sc(()=>{h===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,g($=>({...$,isPositioned:!1})))},[h]);const ee=w.useRef(!1);sc(()=>(ee.current=!0,()=>{ee.current=!1}),[]),sc(()=>{if(N&&(T.current=N),R&&(M.current=R),N&&R){if(H.current)return H.current(N,R,de);de()}},[N,R,de,H,Q]);const ce=w.useMemo(()=>({reference:T,floating:M,setReference:k,setFloating:E}),[k,E]),se=w.useMemo(()=>({reference:N,floating:R}),[N,R]),ue=w.useMemo(()=>{const $={position:r,left:0,top:0};if(!se.floating)return $;const ne=tv(se.floating,p.x),ae=tv(se.floating,p.y);return u?{...$,transform:"translate("+ne+"px, "+ae+"px)",...jw(se.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ne,top:ae}},[r,u,se.floating,p.x,p.y]);return w.useMemo(()=>({...p,update:de,refs:ce,elements:se,floatingStyles:ue}),[p,de,ce,se,ue])}const s4=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:i,padding:o}=typeof t=="function"?t(r):t;return i&&e(i)?i.current!=null?ev({element:i.current,padding:o}).fn(r):{}:i?ev({element:i,padding:o}).fn(r):{}}}},n4=(t,e)=>({...GR(t),options:[t,e]}),i4=(t,e)=>({...KR(t),options:[t,e]}),a4=(t,e)=>({...JR(t),options:[t,e]}),o4=(t,e)=>({...YR(t),options:[t,e]}),l4=(t,e)=>({...QR(t),options:[t,e]}),c4=(t,e)=>({...ZR(t),options:[t,e]}),d4=(t,e)=>({...s4(t),options:[t,e]});var u4="Arrow",_w=w.forwardRef((t,e)=>{const{children:r,width:i=10,height:o=5,...l}=t;return s.jsx($t.svg,{...l,ref:e,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});_w.displayName=u4;var m4=_w;function f4(t){const[e,r]=w.useState(void 0);return Dr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const l=o[0];let c,u;if("borderBoxSize"in l){const m=l.borderBoxSize,h=Array.isArray(m)?m[0]:m;c=h.inlineSize,u=h.blockSize}else c=t.offsetWidth,u=t.offsetHeight;r({width:c,height:u})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else r(void 0)},[t]),e}var th="Popper",[Nw,Cw]=wo(th),[h4,Sw]=Nw(th),Ew=t=>{const{__scopePopper:e,children:r}=t,[i,o]=w.useState(null);return s.jsx(h4,{scope:e,anchor:i,onAnchorChange:o,children:r})};Ew.displayName=th;var kw="PopperAnchor",Pw=w.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:i,...o}=t,l=Sw(kw,r),c=w.useRef(null),u=Kr(e,c),m=w.useRef(null);return w.useEffect(()=>{const h=m.current;m.current=i?.current||c.current,h!==m.current&&l.onAnchorChange(m.current)}),i?null:s.jsx($t.div,{...o,ref:u})});Pw.displayName=kw;var rh="PopperContent",[p4,g4]=Nw(rh),Tw=w.forwardRef((t,e)=>{const{__scopePopper:r,side:i="bottom",sideOffset:o=0,align:l="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:m=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:y=!1,updatePositionStrategy:b="optimized",onPlaced:j,...C}=t,_=Sw(rh,r),[A,k]=w.useState(null),E=Kr(e,xe=>k(xe)),[N,R]=w.useState(null),T=f4(N),M=T?.width??0,I=T?.height??0,Q=i+(l!=="center"?"-"+l:""),H=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},be=Array.isArray(h)?h:[h],z=be.length>0,de={padding:H,boundary:be.filter(x4),altBoundary:z},{refs:ee,floatingStyles:ce,placement:se,isPositioned:ue,middlewareData:$}=r4({strategy:"fixed",placement:Q,whileElementsMounted:(...xe)=>HR(...xe,{animationFrame:b==="always"}),elements:{reference:_.anchor},middleware:[n4({mainAxis:o+I,alignmentAxis:c}),m&&i4({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?a4():void 0,...de}),m&&o4({...de}),l4({...de,apply:({elements:xe,rects:Ne,availableWidth:De,availableHeight:Fe})=>{const{width:ie,height:je}=Ne.reference,W=xe.floating.style;W.setProperty("--radix-popper-available-width",`${De}px`),W.setProperty("--radix-popper-available-height",`${Fe}px`),W.setProperty("--radix-popper-anchor-width",`${ie}px`),W.setProperty("--radix-popper-anchor-height",`${je}px`)}}),N&&d4({element:N,padding:u}),v4({arrowWidth:M,arrowHeight:I}),y&&c4({strategy:"referenceHidden",...de})]}),[ne,ae]=Ow(se),P=Cs(j);Dr(()=>{ue&&P?.()},[ue,P]);const F=$.arrow?.x,te=$.arrow?.y,me=$.arrow?.centerOffset!==0,[ye,_e]=w.useState();return Dr(()=>{A&&_e(window.getComputedStyle(A).zIndex)},[A]),s.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...ce,transform:ue?ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(p4,{scope:r,placedSide:ne,onArrowChange:R,arrowX:F,arrowY:te,shouldHideArrow:me,children:s.jsx($t.div,{"data-side":ne,"data-align":ae,...C,ref:E,style:{...C.style,animation:ue?void 0:"none"}})})})});Tw.displayName=rh;var Aw="PopperArrow",y4={top:"bottom",right:"left",bottom:"top",left:"right"},Rw=w.forwardRef(function(e,r){const{__scopePopper:i,...o}=e,l=g4(Aw,i),c=y4[l.placedSide];return s.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:s.jsx(m4,{...o,ref:r,style:{...o.style,display:"block"}})})});Rw.displayName=Aw;function x4(t){return t!==null}var v4=t=>({name:"transformOrigin",options:t,fn(e){const{placement:r,rects:i,middlewareData:o}=e,c=o.arrow?.centerOffset!==0,u=c?0:t.arrowWidth,m=c?0:t.arrowHeight,[h,p]=Ow(r),g={start:"0%",center:"50%",end:"100%"}[p],y=(o.arrow?.x??0)+u/2,b=(o.arrow?.y??0)+m/2;let j="",C="";return h==="bottom"?(j=c?g:`${y}px`,C=`${-m}px`):h==="top"?(j=c?g:`${y}px`,C=`${i.floating.height+m}px`):h==="right"?(j=`${-m}px`,C=c?g:`${b}px`):h==="left"&&(j=`${i.floating.width+m}px`,C=c?g:`${b}px`),{data:{x:j,y:C}}}});function Ow(t){const[e,r="center"]=t.split("-");return[e,r]}var b4=Ew,w4=Pw,j4=Tw,_4=Rw,[Vc]=wo("Tooltip",[Cw]),qc=Cw(),Dw="TooltipProvider",N4=700,rf="tooltip.open",[C4,sh]=Vc(Dw),Mw=t=>{const{__scopeTooltip:e,delayDuration:r=N4,skipDelayDuration:i=300,disableHoverableContent:o=!1,children:l}=t,c=w.useRef(!0),u=w.useRef(!1),m=w.useRef(0);return w.useEffect(()=>{const h=m.current;return()=>window.clearTimeout(h)},[]),s.jsx(C4,{scope:e,isOpenDelayedRef:c,delayDuration:r,onOpen:w.useCallback(()=>{window.clearTimeout(m.current),c.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>c.current=!0,i)},[i]),isPointerInTransitRef:u,onPointerInTransitChange:w.useCallback(h=>{u.current=h},[]),disableHoverableContent:o,children:l})};Mw.displayName=Dw;var po="Tooltip",[S4,So]=Vc(po),Iw=t=>{const{__scopeTooltip:e,children:r,open:i,defaultOpen:o,onOpenChange:l,disableHoverableContent:c,delayDuration:u}=t,m=sh(po,t.__scopeTooltip),h=qc(e),[p,g]=w.useState(null),y=eR(),b=w.useRef(0),j=c??m.disableHoverableContent,C=u??m.delayDuration,_=w.useRef(!1),[A,k]=tb({prop:i,defaultProp:o??!1,onChange:M=>{M?(m.onOpen(),document.dispatchEvent(new CustomEvent(rf))):m.onClose(),l?.(M)},caller:po}),E=w.useMemo(()=>A?_.current?"delayed-open":"instant-open":"closed",[A]),N=w.useCallback(()=>{window.clearTimeout(b.current),b.current=0,_.current=!1,k(!0)},[k]),R=w.useCallback(()=>{window.clearTimeout(b.current),b.current=0,k(!1)},[k]),T=w.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{_.current=!0,k(!0),b.current=0},C)},[C,k]);return w.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),s.jsx(b4,{...h,children:s.jsx(S4,{scope:e,contentId:y,open:A,stateAttribute:E,trigger:p,onTriggerChange:g,onTriggerEnter:w.useCallback(()=>{m.isOpenDelayedRef.current?T():N()},[m.isOpenDelayedRef,T,N]),onTriggerLeave:w.useCallback(()=>{j?R():(window.clearTimeout(b.current),b.current=0)},[R,j]),onOpen:N,onClose:R,disableHoverableContent:j,children:r})})};Iw.displayName=po;var sf="TooltipTrigger",Lw=w.forwardRef((t,e)=>{const{__scopeTooltip:r,...i}=t,o=So(sf,r),l=sh(sf,r),c=qc(r),u=w.useRef(null),m=Kr(e,u,o.onTriggerChange),h=w.useRef(!1),p=w.useRef(!1),g=w.useCallback(()=>h.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),s.jsx(w4,{asChild:!0,...c,children:s.jsx($t.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...i,ref:m,onPointerMove:At(t.onPointerMove,y=>{y.pointerType!=="touch"&&!p.current&&!l.isPointerInTransitRef.current&&(o.onTriggerEnter(),p.current=!0)}),onPointerLeave:At(t.onPointerLeave,()=>{o.onTriggerLeave(),p.current=!1}),onPointerDown:At(t.onPointerDown,()=>{o.open&&o.onClose(),h.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:At(t.onFocus,()=>{h.current||o.onOpen()}),onBlur:At(t.onBlur,o.onClose),onClick:At(t.onClick,o.onClose)})})});Lw.displayName=sf;var nh="TooltipPortal",[E4,k4]=Vc(nh,{forceMount:void 0}),$w=t=>{const{__scopeTooltip:e,forceMount:r,children:i,container:o}=t,l=So(nh,e);return s.jsx(E4,{scope:e,forceMount:r,children:s.jsx(Dc,{present:r||l.open,children:s.jsx(Df,{asChild:!0,container:o,children:i})})})};$w.displayName=nh;var Ki="TooltipContent",Fw=w.forwardRef((t,e)=>{const r=k4(Ki,t.__scopeTooltip),{forceMount:i=r.forceMount,side:o="top",...l}=t,c=So(Ki,t.__scopeTooltip);return s.jsx(Dc,{present:i||c.open,children:c.disableHoverableContent?s.jsx(Uw,{side:o,...l,ref:e}):s.jsx(P4,{side:o,...l,ref:e})})}),P4=w.forwardRef((t,e)=>{const r=So(Ki,t.__scopeTooltip),i=sh(Ki,t.__scopeTooltip),o=w.useRef(null),l=Kr(e,o),[c,u]=w.useState(null),{trigger:m,onClose:h}=r,p=o.current,{onPointerInTransitChange:g}=i,y=w.useCallback(()=>{u(null),g(!1)},[g]),b=w.useCallback((j,C)=>{const _=j.currentTarget,A={x:j.clientX,y:j.clientY},k=O4(A,_.getBoundingClientRect()),E=D4(A,k),N=M4(C.getBoundingClientRect()),R=L4([...E,...N]);u(R),g(!0)},[g]);return w.useEffect(()=>()=>y(),[y]),w.useEffect(()=>{if(m&&p){const j=_=>b(_,p),C=_=>b(_,m);return m.addEventListener("pointerleave",j),p.addEventListener("pointerleave",C),()=>{m.removeEventListener("pointerleave",j),p.removeEventListener("pointerleave",C)}}},[m,p,b,y]),w.useEffect(()=>{if(c){const j=C=>{const _=C.target,A={x:C.clientX,y:C.clientY},k=m?.contains(_)||p?.contains(_),E=!I4(A,c);k?y():E&&(y(),h())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[m,p,c,h,y]),s.jsx(Uw,{...t,ref:l})}),[T4,A4]=Vc(po,{isInside:!1}),R4=$E("TooltipContent"),Uw=w.forwardRef((t,e)=>{const{__scopeTooltip:r,children:i,"aria-label":o,onEscapeKeyDown:l,onPointerDownOutside:c,...u}=t,m=So(Ki,r),h=qc(r),{onClose:p}=m;return w.useEffect(()=>(document.addEventListener(rf,p),()=>document.removeEventListener(rf,p)),[p]),w.useEffect(()=>{if(m.trigger){const g=y=>{y.target?.contains(m.trigger)&&p()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[m.trigger,p]),s.jsx(Of,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:g=>g.preventDefault(),onDismiss:p,children:s.jsxs(j4,{"data-state":m.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(R4,{children:i}),s.jsx(T4,{scope:r,isInside:!0,children:s.jsx(lk,{id:m.contentId,role:"tooltip",children:o||i})})]})})});Fw.displayName=Ki;var Bw="TooltipArrow",zw=w.forwardRef((t,e)=>{const{__scopeTooltip:r,...i}=t,o=qc(r);return A4(Bw,r).isInside?null:s.jsx(_4,{...o,...i,ref:e})});zw.displayName=Bw;function O4(t,e){const r=Math.abs(e.top-t.y),i=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),l=Math.abs(e.left-t.x);switch(Math.min(r,i,o,l)){case l:return"left";case o:return"right";case r:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function D4(t,e,r=5){const i=[];switch(e){case"top":i.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":i.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":i.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":i.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return i}function M4(t){const{top:e,right:r,bottom:i,left:o}=t;return[{x:o,y:e},{x:r,y:e},{x:r,y:i},{x:o,y:i}]}function I4(t,e){const{x:r,y:i}=t;let o=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const u=e[l],m=e[c],h=u.x,p=u.y,g=m.x,y=m.y;p>i!=y>i&&r<(g-h)*(i-p)/(y-p)+h&&(o=!o)}return o}function L4(t){const e=t.slice();return e.sort((r,i)=>r.x<i.x?-1:r.x>i.x?1:r.y<i.y?-1:r.y>i.y?1:0),$4(e)}function $4(t){if(t.length<=1)return t.slice();const e=[];for(let i=0;i<t.length;i++){const o=t[i];for(;e.length>=2;){const l=e[e.length-1],c=e[e.length-2];if((l.x-c.x)*(o.y-c.y)>=(l.y-c.y)*(o.x-c.x))e.pop();else break}e.push(o)}e.pop();const r=[];for(let i=t.length-1;i>=0;i--){const o=t[i];for(;r.length>=2;){const l=r[r.length-1],c=r[r.length-2];if((l.x-c.x)*(o.y-c.y)>=(l.y-c.y)*(o.x-c.x))r.pop();else break}r.push(o)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var F4=Mw,U4=Iw,B4=Lw,z4=$w,V4=Fw,q4=zw;function W4({user:t,className:e}){if(!t)return null;const r=t.user_metadata?.name||t.full_name||t.email,i=t.user_metadata?.picture||t.user_metadata?.avatar_url||t.avatar_url||null;return s.jsx(F4,{children:s.jsxs(U4,{children:[s.jsx(B4,{asChild:!0,children:s.jsxs(YA,{className:`relative inline-flex h-8 w-8 ${e||""}`,children:[i&&s.jsx(QA,{src:i,className:"h-full w-full rounded-full object-cover",alt:r}),s.jsx(ZA,{className:"flex h-full w-full items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white font-semibold text-sm",children:r.charAt(0).toUpperCase()})]})}),s.jsx(z4,{children:s.jsxs(V4,{className:"rounded-md bg-white px-3 py-1.5 text-sm text-gray-900 shadow-md dark:bg-gray-800 dark:text-gray-100",sideOffset:5,children:[r,s.jsx(q4,{className:"fill-current text-white dark:text-gray-800"})]})})]})})}const H4=wb("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),we=nt.forwardRef(({className:t,variant:e,size:r,asChild:i=!1,...o},l)=>{const c=i?IE:"button";return s.jsx(c,{className:Qn(H4({variant:e,size:r,className:t})),ref:l,...o})});we.displayName="Button";const G4={success:"xito",error:"Error",cancel:"Cancelar",loading:"Cargando...",search:"Buscar",save:"Guardar",delete:"Eliminar",edit:"Editar",close:"Cerrar",confirm:"Confirmar",actions:"Acciones",status:"Estado",all:"Todos",type:"Tipo",number:"Nmero",date:"Fecha",createdAt:"Fecha de Creacin",ok:"Aceptar",accessDenied:"Acceso Denegado",next:"Siguiente",back:"Atrs",continue:"Continuar",name:"Nombre",phone:"Telfono",city:"Ciudad",address:"Direccin"},K4={home:"Inicio",products:"Productos",remittances:"Remesas",admin:"Administracin",dashboard:"Panel de Control",settings:"Configuracin",cart:"Carrito",userPanel:"Mi Panel",userManagement:"Gestin de Usuarios"},Y4={hero:{cta:{products:"Ver Productos"}},features:{title:"Funcionalidades Principales",subtitle:"Todo lo que necesitas para hacer crecer tu negocio digital",products:{title:"Venta de Productos",description:"Plataforma completa para vendedores independientes con clculo automtico de precios"},remittances:{title:"Remesas a Cuba",description:"Enva dinero a Cuba desde USA y Espaa de forma rpida y segura"},analytics:{title:"Panel de Ganancias",description:"Visualiza tus ganancias diarias y mensuales en tiempo real"},vendors:{title:"Gestin de Vendedores",description:"Herramientas completas para que vendedores independientes gestionen su inventario"}},testimonials:{title:"Lo que dicen nuestros clientes",subtitle:"Experiencias reales de usuarios satisfechos con nuestra plataforma."}},Q4={title:"Catlogo de Productos",subtitle:"Descubre productos y combos para enviar a Cuba con precios competitivos",searchPlaceholder:"Buscar productos...",categories:{all:"Todas las Categoras"},exchangeRate:"Tasa de Cambio Actual",addToCart:"Agregar al Carrito",vendor:"Vendedor",noProducts:"No se encontraron productos",noProductsDesc:"Intenta con otros trminos de bsqueda o categoras",addProduct:"Agregar Producto",addedToCart:"Producto agregado",addedToCartDesc:"se agreg al carrito exitosamente",detail:{previous:"Anterior",next:"Siguiente",backToProducts:" Volver a Productos",backToCombos:" Volver a Combos",continueToProducts:"Continuar a Productos ",continueToCombos:"Continuar a Combos ",price:"Precio",basePrice:"Precio Base",category:"Categora",description:"Descripcin",stock:"Stock Disponible",expiryDate:"Fecha de Vencimiento",currency:"Moneda",includedProducts:"Productos Incluidos",profitMargin:"Margen de Ganancia",comboDetails:"Detalles del Combo",productDetails:"Detalles del Producto",inStock:"En Stock",outOfStock:"Agotado",units:"unidades"}},Z4={title:"Remesas a Cuba",subtitle:"Enva dinero a Cuba desde USA y Espaa de forma rpida y segura",calculator:"Calculadora de Remesas",amount:"Cantidad a Enviar (USD)",country:"Pas de Destino",selectCountry:"Seleccionar pas...",currentRate:"Tasa Actual",popular:"Popular",rate:"Tasa",fee:"Comisin",time:"Tiempo",youReceive:"Recibes",send:"Enviar Remesa",sendNew:"Nueva Remesa",myRemittances:"Mis Remesas",howItWorks:"Cmo Funciona?",step1:{title:"Selecciona el Pas",description:"Elige el pas de destino y la cantidad a enviar"},step2:{title:"Confirma los Datos",description:"Verifica la informacin del destinatario"},step3:{title:"Recibe Confirmacin",description:"El dinero llega en el tiempo estimado"},recipient:{title:"Datos del Destinatario",deliveryMethod:"Mtodo de Entrega",cash:"Efectivo",transfer:"Transferencia",currency:"Moneda",fullName:"Nombre Completo",phone:"Telfono",city:"Ciudad",address:"Direccin",idNumber:"Carnet de Identidad",notes:"Notas adicionales",bankName:"Nombre del Banco",accountNumber:"Nmero de Cuenta",confirm:"Confirmar y Enviar"},status:{paymentPending:"Pendiente de Pago",paymentProofUploaded:"Comprobante Enviado",paymentValidated:"Pago Validado",paymentRejected:"Pago Rechazado",processing:"En Proceso",delivered:"Entregado",completed:"Completado",cancelled:"Cancelado"},alert:{pending:"Pendiente de validacin",delivered:"Entregada",overdue:"Entrega vencida",hoursLeft:"Quedan {hours} horas",daysLeft:"Quedan {days} das"},admin:{title:"Gestin de Remesas",types:"Tipos de Remesas",newType:"Nuevo Tipo",editType:"Editar Tipo",newRemittanceType:"Nuevo Tipo de Remesa",editRemittanceType:"Editar Tipo de Remesa",typeName:"Nombre del Tipo",typeNamePlaceholder:"Ej: Dlares a CUP (Efectivo)",originCurrency:"Moneda de Origen",deliveryCurrency:"Moneda de Entrega",exchangeRate:"Tasa de Cambio",commissionPercent:"Comisin (%)",commissionFixed:"Comisin Fija",minAmount:"Monto Mnimo",maxAmount:"Monto Mximo",maxDeliveryDays:"Das Mximos de Entrega",warningDays:"Das para Alerta",active:"Activo",inactive:"Inactivo",description:"Descripcin",descriptionPlaceholder:"Descripcin del tipo de remesa...",icon:"cono",displayOrder:"Orden de Visualizacin",deliveryMethod:"Mtodo de Entrega",save:"Guardar",cancel:"Cancelar",edit:"Editar",delete:"Eliminar",activate:"Activar",deactivate:"Desactivar",confirmDelete:"Est seguro de eliminar este tipo de remesa?",deleteWarning:"Esta accin no se puede deshacer. Las remesas existentes no se vern afectadas.",requiredFields:"Por favor complete todos los campos requeridos",typeCreated:"Tipo de remesa creado",typeUpdated:"Tipo de remesa actualizado",typeDeleted:"Tipo de remesa eliminado",typeActivated:"Tipo activado",typeDeactivated:"Tipo desactivado",pendingValidation:"Pendientes de Validacin",inProgress:"En Progreso",urgent:"Urgentes",total:"Total",validate:"Validar",reject:"Rechazar",process:"Procesar",confirmDelivery:"Confirmar Entrega",complete:"Completar",viewDetails:"Ver Detalles",rejectReason:"Razn del rechazo",rejectReasonPlaceholder:"Ej: Comprobante ilegible, datos incorrectos...",validationNotes:"Notas de validacin",validationNotesPlaceholder:"Aadir notas sobre la validacin...",deliveryNotes:"Notas de entrega",deliveryNotesPlaceholder:"Detalles de la entrega...",confirmValidateMessage:"Confirma que el pago de {amount} {currency} es vlido?",confirmRejectMessage:"Por qu se rechaza el pago de {number}?",confirmProcessMessage:"Iniciar procesamiento de remesa {number}?",confirmDeliveryMessage:"Confirmar entrega de {amount} {currency} a {recipient}?",confirmCompleteMessage:"Marcar remesa {number} como completada?",noTypes:"No hay tipos de remesas configurados",loadingTypes:"Cargando tipos de remesas...",searchPlaceholder:"Buscar por nmero, destinatario o telfono...",allStatuses:"Todos los estados",paymentValidated:"Pago validado correctamente",paymentRejected:"Pago rechazado",processingStarted:"Procesamiento iniciado",deliveryConfirmed:"Entrega confirmada",remittanceCompleted:"Remesa completada",adminCannotSendRemittance:"Esta pgina es solo para usuarios. Los administradores deben usar el panel de gestin de remesas."},user:{trackYourRemittances:"Consulte el estado de sus envos de dinero",noRemittances:"No tiene remesas registradas",noRemittancesDesc:"Enve su primera remesa de forma rpida y segura",remittanceNumber:"Nmero de Remesa",amountSent:"Enviado",toDeliver:"A Entregar",method:"Mtodo",uploadProof:"Subir Comprobante",reUploadProof:"Reenviar Comprobante",cancel:"Cancelar",cancelRemittance:"Cancelar Remesa",cancelReason:"Razn (opcional)",paymentProof:"Comprobante de pago",paymentReference:"Referencia de pago",uploadFile:"Subir archivo",additionalNotes:"Notas adicionales",viewProof:"Ver Comprobante",proofUploaded:"Comprobante subido exitosamente",remittanceCancelled:"Remesa cancelada"},wizard:{step1Title:"Tipo y Monto de Remesa",step2Title:"Datos del Destinatario",step3Title:"Confirmar Remesa",step4Title:"Comprobante de Pago",selectType:"Seleccione el tipo de remesa",amountToSend:"Monto a enviar",limits:"Lmites",calculationSummary:"Resumen del Clculo",youSend:"Monto a enviar",commission:"Comisin",recipientReceives:"Destinatario recibir",confirmAndCreate:"Confirmar Remesa",remittanceCreated:"Remesa Creada",uploadLater:"Subir Despus",sendProof:"Enviar Comprobante",importantNote:"Importante",proofNote:"Su remesa ser procesada una vez validemos el comprobante de pago. Recibir una notificacin cuando esto ocurra.",pageTitle:"Enviar Remesa",pageSubtitle:"Enva dinero de forma rpida y segura",selectTypeRequired:"Seleccione el tipo de remesa *",rate:"Tasa",calculating:"Calculando...",continue:"Continuar",back:"Atrs",creating:"Creando...",sending:"Enviando...",minAmount:"Monto mnimo",maxAmount:"Mximo",remittanceNumber:"Nmero de remesa",selectTypeAndAmount:"Por favor seleccione un tipo y monto",fillRecipientInfo:"Por favor complete nombre y telfono del destinatario",remittanceCreatedSuccess:"Remesa creada exitosamente",uploadProofAndReference:"Por favor suba el comprobante y la referencia de pago",proofSentSuccess:"Comprobante enviado. Recibir notificacin cuando se valide el pago."}},J4={title:"Gestin de la Plataforma",subtitle:"Gestiona productos, categoras, combos y ms.",tabs:{inventory:"Inventario",categories:"Categoras",combos:"Combos",management:"Gestin"},actions:{addProduct:"Agregar Producto",createCombo:"Crear Combo"},addProduct:{title:"Agregar Nuevo Producto",editTitle:"Editar Producto",cancel:"Cancelar",name:"Nombre del Producto",namePlaceholder:"Ej: iPhone 15 Pro Max",description:"Descripcin",descriptionPlaceholder:"Describe las caractersticas principales...",category:"Categora",basePrice:"Precio Base",currency:"Moneda",image:"Imagen del Producto",upload:"Subir archivo",finalPrice:"Precio Final",save:"Guardar Producto"},inventory:{product:"Producto",stock:"Existencias",price:"Precio Final",expiryDate:"Fecha de Caducidad"},categories:{manage:"Gestionar Categoras",new:"Nueva categora",name_es:"Nombre (ES)",name_en:"Nombre (EN)",id:"ID"},combos:{title:"Gestin de Combos",new:"Crear Nuevo Combo",edit:"Editar Combo",name:"Nombre del Combo",profitMargin:"Margen de Ganancia (%)",shipping:"Envo",free:"Gratis",discount:"Descuento (%)",paid:"Pagado",shippingCost:"Costo de Envo",products:"Productos en el Combo",addProduct:"Agregar Producto",basePrice:"Precio Base Total",finalPrice:"Precio Final",coverImage:"Imagen de Portada",save:"Guardar Combo",includedProducts:"productos incluidos"},management:{title:"Gestin General",payments:"Gestin de Pagos",testimonials:"Gestin de Testimonios",users:"Gestin de Usuarios",show:"Mostrar",hide:"Ocultar",activate:"Activar",deactivate:"Desactivar",delete:"Eliminar"},validation:{error:"Error de Validacin",fillFields:"Por favor completa todos los campos requeridos"},productAdded:"Producto agregado exitosamente",productUpdated:"Producto actualizado exitosamente",categoryAdded:"Categora agregada",categoryRemoved:"Categora eliminada",comboAdded:"Combo creado exitosamente",comboUpdated:"Combo actualizado exitosamente"},X4={title:"Panel de Control",subtitle:"Visualizacin completa de ganancias y mtricas del negocio",privateAccess:"Acceso Privado",adminOnly:"Esta seccin es solo para administradores.",refresh:"Actualizar",stats:{dailyRevenue:"Ingresos Diarios",monthlyRevenue:"Ingresos Mensuales",dailyProfit:"Ganancia Diaria",monthlyProfit:"Ganancia Mensual",totalProducts:"Total de Productos",totalCombos:"Total de Combos",pendingOrders:"Pedidos Pendientes",completedOrders:"Pedidos Completados",totalUsers:"Total de Usuarios",activeProducts:"Productos Activos",siteVisits:"Visitas al Sitio",totalRemittances:"Total de Remesas",pendingRemittances:"Remesas Pendientes",completedRemittances:"Remesas Completadas",dailyRemittanceIncome:"Ingresos Remesas (Hoy)",monthlyRemittanceIncome:"Ingresos Remesas (Mes)",totalOrders:"Total de rdenes",dailyOrderRevenue:"Ingresos rdenes (Hoy)",monthlyOrderRevenue:"Ingresos rdenes (Mes)",dailyOrderProfit:"Ganancia rdenes (Hoy)",monthlyOrderProfit:"Ganancia rdenes (Mes)"},remittancesMetrics:"Mtricas de Remesas",ordersMetrics:"Mtricas de rdenes",profitBreakdown:"Desglose de Ganancias",dailyBreakdown:"Desglose Diario",monthlyBreakdown:"Desglose Mensual",grossRevenue:"Ingresos Brutos",costs:"Costos",netProfit:"Ganancia Neta",profitMargin:"Margen de Ganancia",orderSummary:"Resumen de Pedidos",ordersBreakdown:"Desglose de rdenes",remittancesBreakdown:"Desglose de Remesas",bySource:"por Fuente",ordersIncome:"Ingresos de rdenes",remittancesIncome:"Ingresos de Remesas",totalIncome:"Ingresos Totales",pending:"Pendientes",completed:"Completados",overviewTab:"Resumen General",ordersTab:"Historial de rdenes",remittancesTab:"Remesas",remittancesKindTab:"Tipos de Remesas",orderStatus:{paymentPending:"Pago Pendiente",paymentValidated:"Pago Validado",processing:"En Procesamiento",shipped:"Enviado",delivered:"Entregado",cancelled:"Cancelado",totalActive:"Total Activas"},analyticsTitle:"Anlisis y Estadsticas",selectCurrency:"Seleccionar Moneda",expirationWarning:{title:"Alerta de Caducidad",description:"Hay {count} producto(s) prximos a caducar en los siguientes 30 das."},visits:{title:"Visitas al Sitio",weekly:"Semanal",monthly:"Mensual",yearly:"Anual",total:"Total",thisWeek:"Esta Semana",thisMonth:"Este Mes",thisYear:"Este Ao",allTime:"Histrico"}},eO={title:"Ajustes Generales",subtitle:"Gestiona la configuracin clave de tu plataforma.",financial:{title:"Ajustes Financieros",usdToLocal:"USD a Moneda Nacional",productProfit:"Ganancia Productos (%)",comboProfit:"Ganancia Combos (%)",remittanceProfit:"Ganancia Remesas (%)",save:"Guardar Ajustes",currencies:"Gestin de Monedas",addCurrency:"Agregar Moneda",code:"Cdigo (ej: USD, EUR, CUP)",nameES:"Nombre (Espaol)",nameEN:"Nombre (Ingls)",rate:"Tasa vs USD",symbol:"Smbolo",active:"Activa",updateCurrency:"Actualizar Moneda",currencyCreated:"Moneda creada",currencyUpdated:"Moneda actualizada",currencyDeleted:"Moneda eliminada"},zelle:{title:"Cuentas Zelle",add:"Agregar Cuenta Zelle",email:"Email",name:"Nombre",assignTo:"Asignar a",products:"Venta de Productos",remittances:"Remesas",active:"Activa"},visual:{title:"Ajustes Visuales",logo:"Logo del Sitio",favicon:"Favicon",slides:"Diapositivas de Portada",addSlide:"Agregar Diapositiva",image:"Imagen (URL o Archivo)",imageType:"Tipo de Imagen",url:"URL",upload:"Subir",mainText:"Texto Principal",secondaryText:"Texto Secundario",text_es:"Texto (ES)",text_en:"Texto (EN)",linkUrl:"Enlace (URL)",order:"Orden",active:"Activa",save:"Guardar Ajustes"},notifications:{title:"Ajustes de Notificacin",whatsapp:"Nmero de WhatsApp para Notificaciones",adminEmail:"Email de Administracin para Notificaciones",save:"Guardar Ajustes"},saveSuccess:"Ajustes guardados exitosamente"},tO={title:"Tu Carrito de Compras",empty:"Tu carrito est vaco.",browse:"Explorar productos",summary:"Resumen del Pedido",subtotal:"Subtotal",shipping:"Envo",free:"Gratis",total:"Total",checkout:"Proceder al Pago",payment:{title:"Realizar Pago",instructionsTitle:"Instrucciones de Pago",instructions:"Copia el ID de la compra y pgalo en la descripcin de la transferencia Zelle. Enva el comprobante a info@papuenvios.com o sbelo directamente aqu. El pago estar sujeto a validacin.",accountInfo:"Datos de la Cuenta Zelle",purchaseId:"ID de la Compra",copy:"Copiado",amount:"Monto a Pagar",uploadProof:"Subir Comprobante de Pago",confirm:"Confirmar Pago",recipientTitle:"Datos de Entrega/Destinatario"}},rO={login:"Iniciar Sesin",loginTitle:"Bienvenido de Nuevo",loginSubtitle:"Inicia sesin para acceder a tu cuenta.",email:"Correo Electrnico",password:"Contrasea",loginWithGoogle:"Iniciar Sesin con Google",or:"O",loginSuccess:"Inicio de sesin exitoso!",loginError:"Credenciales invlidas. Por favor, intenta de nuevo.",logoutSuccess:"Sesin cerrada exitosamente.",loginRequired:"Inicio de Sesin Requerido",loginToCheckout:"Por favor, inicia sesin para continuar con el pago."},sO={title:"Mi Panel de Usuario",welcome:"Bienvenido, {name}",myOrders:"Mis Pedidos",noOrders:"An no tienes pedidos.",status:{pending:"Pendiente",validated:"Validado",rejected:"Rechazado"}},nO={title:"Historial de rdenes",subtitle:"Gestin completa de todas las rdenes del sistema",stats:{total:"Total",pending:"Pendientes",validated:"Validadas",rejected:"Rechazadas",completed:"Completadas",revenue:"Ingresos"},filters:{title:"Filtros de Bsqueda",clear:"Limpiar Filtros",search:"Buscar",searchPlaceholder:"Orden, usuario, email o producto...",status:"Estado de la Orden",allStatuses:"Todos los Estados",orderType:"Tipo de Orden",allTypes:"Todos",startDate:"Fecha Inicio",endDate:"Fecha Fin",apply:"Aplicar Filtros"},table:{order:"Orden",user:"Usuario",date:"Fecha",type:"Tipo",items:"Items",total:"Total",paymentStatus:{label:"Estado Pago",pending:"Pago Pendiente",validated:"Pago Validado (Listo para Procesar)",rejected:"Pago Rechazado"},orderStatus:{label:"Estado Orden",pending:"Pendiente",processing:"En Procesamiento",shipped:"Enviado",delivered:"Entregado",completed:"Completado",cancelled:"Cancelado"},actions:"Acciones"},types:{products:"Productos",remittance:"Remesa",mixed:"Mixto"},actions:{view:"Ver",start:"Iniciar",ship:"Enviar",proof:"Evidencia",complete:"Completar",cancel:"Cancelar",processing:"Procesando...",loading:"Cargando...",completing:"Completando..."},messages:{noOrders:"No se encontraron rdenes",retry:"Reintentar",confirmStart:"Iniciar procesamiento de la orden {orderNumber}?",confirmComplete:"Marcar la orden {orderNumber} como completada?",confirmCancel:"Est seguro de cancelar esta orden? Esta accin liberar el inventario reservado.",enterTracking:"Ingrese nmero de tracking (opcional) para la orden {orderNumber}:",enterCancelReason:"Ingrese razn de cancelacin para la orden {orderNumber}:",cancelReasonRequired:"Debe especificar una razn para cancelar",startSuccess:'Orden movida a estado "En Procesamiento"',shipSuccess:'Orden marcada como "Enviada"',deliverSuccess:'Evidencia de entrega subida exitosamente. Orden marcada como "Entregada"',completeSuccess:"Orden completada exitosamente",cancelSuccess:"Orden cancelada exitosamente",error:"Error",selectImage:"Seleccione una imagen de evidencia",invalidImage:"Por favor seleccione una imagen vlida",imageTooLarge:"El archivo es muy grande. Mximo 5MB"},deliveryModal:{title:"Subir Evidencia de Entrega",orderLabel:"Orden:",customerLabel:"Cliente:",selectPhoto:"Seleccionar Foto de Evidencia",clickToUpload:"Click para subir",dragHere:"o arrastra aqu",fileTypes:"PNG, JPG, JPEG (MAX. 5MB)",imageLoaded:'Imagen cargada. Haga click en "Subir Evidencia" para confirmar.',note:"Nota:",noteText:'Al subir la evidencia, la orden se marcar automticamente como "Entregada". El cliente podr ver la foto de evidencia.',cancel:"Cancelar",submit:"Subir Evidencia",uploading:"Subiendo..."},days:{singular:"da",plural:"das"},modals:{confirm:"Confirmar",cancel:"Cancelar",submit:"Enviar",startTitle:"Iniciar Procesamiento",completeTitle:"Completar Orden",cancelTitle:"Cancelar Orden",trackingTitle:"Nmero de Tracking",cancelReasonTitle:"Razn de Cancelacin"}},iO={management:"Gestin de Usuarios",managementDescription:"Administra roles y permisos de usuarios de la plataforma",fetchError:"Error al cargar usuarios",roleUpdated:"Rol actualizado",roleUpdatedSuccess:"El rol del usuario se actualiz correctamente",roleUpdateError:"Error al actualizar rol",userEnabled:"Usuario habilitado",userDisabled:"Usuario deshabilitado",statusUpdateSuccess:"El estado del usuario se actualiz correctamente",statusUpdateError:"Error al actualizar estado",cannotModifySuperAdmin:"No se puede modificar al super administrador",superAdmin:"Super Admin",noUsers:"No hay usuarios",enable:"Habilitar",disable:"Deshabilitar",delete:"Eliminar",deleteUser:"Eliminar usuario",enableUser:"Activar usuario",disableUser:"Desactivar usuario",userDeleted:"Usuario eliminado",userDeletedSuccess:"El usuario ha sido eliminado exitosamente.",deleteError:"Error al eliminar",confirmDelete:"Ests seguro de que deseas eliminar a {email}? Esta accin no se puede deshacer.",protected:"Protegido",refresh:"Actualizar",loadingUsers:"Cargando usuarios...",noUsersFound:"No se encontraron usuarios",total:"Total",rolesPermissions:{title:"Roles y Permisos",userDesc:"Acceso bsico al sistema",adminDesc:"Gestin de productos, combos e inventario",superAdminDesc:"Acceso total + gestin de usuarios"},securityNote:{title:"Nota de seguridad",superAdminProtected:"Los Super Admins estn protegidos y no pueden ser editados ni eliminados",onlySuperAdminManage:"Solo Super Admins pueden gestionar roles y eliminar usuarios",deletionPermanent:"La eliminacin de usuarios es permanente y no se puede deshacer"},roles:{user:"Usuario",admin:"Administrador",super_admin:"Super Administrador"},table:{email:"Correo Electrnico",name:"Nombre",role:"Rol",status:"Estado",actions:"Acciones",active:"Activo",inactive:"Inactivo",createdAt:"Fecha de Registro"}},aO={linkingToRecipient:"Vinculando cuenta al destinatario..."},oO={common:G4,nav:K4,home:Y4,products:Q4,remittances:Z4,vendor:J4,dashboard:X4,settings:eO,cart:tO,auth:rO,userPanel:sO,adminOrders:nO,users:iO,bankAccounts:aO},lO={success:"Success",error:"Error",cancel:"Cancel",loading:"Loading...",search:"Search",save:"Save",delete:"Delete",edit:"Edit",close:"Close",confirm:"Confirm",actions:"Actions",status:"Status",all:"All",type:"Type",number:"Number",date:"Date",createdAt:"Created At",ok:"OK",accessDenied:"Access Denied",next:"Next",back:"Back",continue:"Continue",name:"Name",phone:"Phone",city:"City",address:"Address"},cO={home:"Home",products:"Products",remittances:"Remittances",admin:"Admin",dashboard:"Dashboard",settings:"Settings",cart:"Cart",userPanel:"My Panel",userManagement:"User Management"},dO={hero:{cta:{products:"View Products"}},features:{title:"Key Features",subtitle:"Everything you need to grow your digital business",products:{title:"Product Sales",description:"Complete platform for independent sellers with automatic price calculation"},remittances:{title:"Remittances to Cuba",description:"Send money to Cuba from USA and Spain quickly and securely"},analytics:{title:"Profit Dashboard",description:"View your daily and monthly profits in real time"},vendors:{title:"Vendor Management",description:"Complete tools for independent vendors to manage inventory"}},testimonials:{title:"What our customers say",subtitle:"Real experiences from satisfied platform users."}},uO={title:"Product Catalog",subtitle:"Discover products and combos to send to Cuba at competitive prices",searchPlaceholder:"Search products...",categories:{all:"All Categories"},exchangeRate:"Current Exchange Rate",addToCart:"Add to Cart",vendor:"Vendor",noProducts:"No products found",noProductsDesc:"Try different search terms or categories",addProduct:"Add Product",addedToCart:"Product added",addedToCartDesc:"was successfully added to the cart",detail:{previous:"Previous",next:"Next",backToProducts:" Back to Products",backToCombos:" Back to Combos",continueToProducts:"Continue to Products ",continueToCombos:"Continue to Combos ",price:"Price",basePrice:"Base Price",category:"Category",description:"Description",stock:"Available Stock",expiryDate:"Expiry Date",currency:"Currency",includedProducts:"Included Products",profitMargin:"Profit Margin",comboDetails:"Combo Details",productDetails:"Product Details",inStock:"In Stock",outOfStock:"Out of Stock",units:"units"}},mO={title:"Remittances to Cuba",subtitle:"Send money to Cuba from USA and Spain quickly and securely",calculator:"Remittance Calculator",amount:"Amount to Send (USD)",country:"Destination Country",selectCountry:"Select country...",currentRate:"Current Rate",popular:"Popular",rate:"Rate",fee:"Fee",time:"Time",youReceive:"You Receive",send:"Send Remittance",sendNew:"New Remittance",myRemittances:"My Remittances",howItWorks:"How It Works",step1:{title:"Select Country",description:"Choose the destination country and amount to send"},step2:{title:"Confirm Details",description:"Verify recipient information"},step3:{title:"Receive Confirmation",description:"Money arrives within the estimated time"},recipient:{title:"Recipient Details",deliveryMethod:"Delivery Method",cash:"Cash",transfer:"Bank Transfer",currency:"Currency",fullName:"Full Name",phone:"Phone",city:"City",address:"Address",idNumber:"ID Number",notes:"Additional notes",bankName:"Bank Name",accountNumber:"Account Number",confirm:"Confirm and Send"},status:{paymentPending:"Payment Pending",paymentProofUploaded:"Proof Uploaded",paymentValidated:"Payment Validated",paymentRejected:"Payment Rejected",processing:"Processing",delivered:"Delivered",completed:"Completed",cancelled:"Cancelled"},alert:{pending:"Pending validation",delivered:"Delivered",overdue:"Delivery overdue",hoursLeft:"{hours} hours left",daysLeft:"{days} days left"},admin:{title:"Remittance Management",types:"Remittance Types",newType:"New Type",editType:"Edit Type",newRemittanceType:"New Remittance Type",editRemittanceType:"Edit Remittance Type",typeName:"Type Name",typeNamePlaceholder:"E.g.: Dollars to CUP (Cash)",originCurrency:"Origin Currency",deliveryCurrency:"Delivery Currency",exchangeRate:"Exchange Rate",commissionPercent:"Commission (%)",commissionFixed:"Fixed Commission",minAmount:"Minimum Amount",maxAmount:"Maximum Amount",maxDeliveryDays:"Max Delivery Days",warningDays:"Warning Days",active:"Active",inactive:"Inactive",description:"Description",descriptionPlaceholder:"Remittance type description...",icon:"Icon",displayOrder:"Display Order",deliveryMethod:"Delivery Method",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",activate:"Activate",deactivate:"Deactivate",confirmDelete:"Are you sure you want to delete this remittance type?",deleteWarning:"This action cannot be undone. Existing remittances will not be affected.",requiredFields:"Please complete all required fields",typeCreated:"Remittance type created",typeUpdated:"Remittance type updated",typeDeleted:"Remittance type deleted",typeActivated:"Type activated",typeDeactivated:"Type deactivated",pendingValidation:"Pending Validation",inProgress:"In Progress",urgent:"Urgent",total:"Total",validate:"Validate",reject:"Reject",process:"Process",confirmDelivery:"Confirm Delivery",complete:"Complete",viewDetails:"View Details",rejectReason:"Rejection reason",rejectReasonPlaceholder:"E.g.: Illegible proof, incorrect data...",validationNotes:"Validation notes",validationNotesPlaceholder:"Add notes about the validation...",deliveryNotes:"Delivery notes",deliveryNotesPlaceholder:"Delivery details...",confirmValidateMessage:"Confirm that the payment of {amount} {currency} is valid?",confirmRejectMessage:"Why is the payment for {number} rejected?",confirmProcessMessage:"Start processing remittance {number}?",confirmDeliveryMessage:"Confirm delivery of {amount} {currency} to {recipient}?",confirmCompleteMessage:"Mark remittance {number} as completed?",noTypes:"No remittance types configured",loadingTypes:"Loading remittance types...",searchPlaceholder:"Search by number, recipient or phone...",allStatuses:"All statuses",paymentValidated:"Payment validated successfully",paymentRejected:"Payment rejected",processingStarted:"Processing started",deliveryConfirmed:"Delivery confirmed",remittanceCompleted:"Remittance completed",adminCannotSendRemittance:"This page is only for users. Admins should use the remittance management panel."},user:{trackYourRemittances:"Track the status of your money transfers",noRemittances:"You have no registered remittances",noRemittancesDesc:"Send your first remittance quickly and securely",remittanceNumber:"Remittance Number",amountSent:"Sent",toDeliver:"To Deliver",method:"Method",uploadProof:"Upload Proof",reUploadProof:"Re-upload Proof",cancel:"Cancel",cancelRemittance:"Cancel Remittance",cancelReason:"Reason (optional)",paymentProof:"Payment proof",paymentReference:"Payment reference",uploadFile:"Upload file",additionalNotes:"Additional notes",viewProof:"View Proof",proofUploaded:"Proof uploaded successfully",remittanceCancelled:"Remittance cancelled"},wizard:{step1Title:"Remittance Type and Amount",step2Title:"Recipient Details",step3Title:"Confirm Remittance",step4Title:"Payment Proof",selectType:"Select remittance type",amountToSend:"Amount to send",limits:"Limits",calculationSummary:"Calculation Summary",youSend:"Amount to send",commission:"Commission",recipientReceives:"Recipient receives",confirmAndCreate:"Confirm Remittance",remittanceCreated:"Remittance Created",uploadLater:"Upload Later",sendProof:"Send Proof",importantNote:"Important",proofNote:"Your remittance will be processed once we validate the payment proof. You will receive a notification when this happens.",pageTitle:"Send Remittance",pageSubtitle:"Send money quickly and securely",selectTypeRequired:"Select remittance type *",rate:"Rate",calculating:"Calculating...",continue:"Continue",back:"Back",creating:"Creating...",sending:"Sending...",minAmount:"Minimum",maxAmount:"Maximum",remittanceNumber:"Remittance number",selectTypeAndAmount:"Please select a type and amount",fillRecipientInfo:"Please complete recipient name and phone",remittanceCreatedSuccess:"Remittance created successfully",uploadProofAndReference:"Please upload the payment proof and reference",proofSentSuccess:"Proof sent. You will be notified once payment is validated."}},fO={title:"Platform Management",subtitle:"Manage products, categories, combos and more.",tabs:{inventory:"Inventory",categories:"Categories",combos:"Combos",management:"Management"},actions:{addProduct:"Add Product",createCombo:"Create Combo"},addProduct:{title:"Add New Product",editTitle:"Edit Product",cancel:"Cancel",name:"Product Name",namePlaceholder:"E.g.: iPhone 15 Pro Max",description:"Description",descriptionPlaceholder:"Describe the main features...",category:"Category",basePrice:"Base Price",currency:"Currency",image:"Product Image",upload:"Upload file",finalPrice:"Final Price",save:"Save Product"},inventory:{product:"Product",stock:"Stock",price:"Final Price",expiryDate:"Expiry Date"},categories:{manage:"Manage Categories",new:"New category",name_es:"Name (ES)",name_en:"Name (EN)",id:"ID"},combos:{title:"Combos Management",new:"Create New Combo",edit:"Edit Combo",name:"Combo Name",profitMargin:"Profit Margin (%)",shipping:"Shipping",free:"Free",discount:"Discount (%)",paid:"Paid",shippingCost:"Shipping Cost",products:"Products in Combo",addProduct:"Add Product",basePrice:"Total Base Price",finalPrice:"Final Price",coverImage:"Cover Image",save:"Save Combo",includedProducts:"included products"},management:{title:"General Management",payments:"Payments Management",testimonials:"Testimonials Management",users:"Users Management",show:"Show",hide:"Hide",activate:"Activate",deactivate:"Deactivate",delete:"Delete"},validation:{error:"Validation Error",fillFields:"Please fill all required fields"},productAdded:"Product added successfully",productUpdated:"Product updated successfully",categoryAdded:"Category added",categoryRemoved:"Category removed",comboAdded:"Combo created successfully",comboUpdated:"Combo updated successfully"},hO={title:"Dashboard",subtitle:"Comprehensive view of business profits and metrics",privateAccess:"Private Access",adminOnly:"This section is for administrators only.",refresh:"Refresh",stats:{dailyRevenue:"Daily Revenue",monthlyRevenue:"Monthly Revenue",dailyProfit:"Daily Profit",monthlyProfit:"Monthly Profit",totalProducts:"Total Products",totalCombos:"Total Combos",pendingOrders:"Pending Orders",completedOrders:"Completed Orders",totalUsers:"Total Users",activeProducts:"Active Products",siteVisits:"Site Visits",totalRemittances:"Total Remittances",pendingRemittances:"Pending Remittances",completedRemittances:"Completed Remittances",dailyRemittanceIncome:"Remittance Income (Today)",monthlyRemittanceIncome:"Remittance Income (Month)",totalOrders:"Total Orders",dailyOrderRevenue:"Orders Income (Today)",monthlyOrderRevenue:"Orders Income (Month)",dailyOrderProfit:"Orders Profit (Today)",monthlyOrderProfit:"Orders Profit (Month)"},remittancesMetrics:"Remittance Metrics",ordersMetrics:"Orders Metrics",profitBreakdown:"Profit Breakdown",dailyBreakdown:"Daily Breakdown",monthlyBreakdown:"Monthly Breakdown",grossRevenue:"Gross Revenue",costs:"Costs",netProfit:"Net Profit",profitMargin:"Profit Margin",orderSummary:"Order Summary",ordersBreakdown:"Orders Breakdown",remittancesBreakdown:"Remittances Breakdown",bySource:"by Source",ordersIncome:"Orders Income",remittancesIncome:"Remittances Income",totalIncome:"Total Income",pending:"Pending",completed:"Completed",overviewTab:"General Overview",ordersTab:"Orders History",remittancesTab:"Remittances",remittancesKindTab:"Kind of Remittances",orderStatus:{paymentPending:"Payment Pending",paymentValidated:"Payment Validated",processing:"Processing",shipped:"Shipped",delivered:"Delivered",cancelled:"Cancelled",totalActive:"Total Active"},analyticsTitle:"Analytics and Statistics",selectCurrency:"Select Currency",expirationWarning:{title:"Expiry Warning",description:"There are {count} product(s) expiring in the next 30 days."},visits:{title:"Site Visits",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly",total:"Total",thisWeek:"This Week",thisMonth:"This Month",thisYear:"This Year",allTime:"All Time"}},pO={title:"General Settings",subtitle:"Manage your platform's key configuration.",financial:{title:"Financial Settings",usdToLocal:"USD to Local Currency",productProfit:"Product Profit (%)",comboProfit:"Combo Profit (%)",remittanceProfit:"Remittance Profit (%)",save:"Save Settings",currencies:"Currencies Management",addCurrency:"Add Currency",code:"Code (e.g.: USD, EUR, CUP)",nameES:"Name (Spanish)",nameEN:"Name (English)",rate:"Rate vs USD",symbol:"Symbol",active:"Active",updateCurrency:"Update Currency",currencyCreated:"Currency created",currencyUpdated:"Currency updated",currencyDeleted:"Currency deleted"},zelle:{title:"Zelle Accounts",add:"Add Zelle Account",email:"Email",name:"Name",assignTo:"Assign to",products:"Product Sales",remittances:"Remittances",active:"Active"},visual:{title:"Visual Settings",logo:"Site Logo",favicon:"Favicon",slides:"Hero Slides",addSlide:"Add Slide",image:"Image (URL or File)",imageType:"Image Type",url:"URL",upload:"Upload",mainText:"Main Text",secondaryText:"Secondary Text",text_es:"Text (ES)",text_en:"Text (EN)",linkUrl:"Link (URL)",order:"Order",active:"Active",save:"Save Settings"},notifications:{title:"Notification Settings",whatsapp:"WhatsApp number for notifications",adminEmail:"Admin email for notifications",save:"Save Settings"},saveSuccess:"Settings saved successfully"},gO={title:"Your Shopping Cart",empty:"Your cart is empty.",browse:"Browse products",summary:"Order Summary",subtotal:"Subtotal",shipping:"Shipping",free:"Free",total:"Total",checkout:"Proceed to Checkout",payment:{title:"Make Payment",instructionsTitle:"Payment Instructions",instructions:"Copy the purchase ID and paste it in the Zelle transfer description. Send the receipt to info@papuenvios.com or upload it directly here. The payment will be subject to validation.",accountInfo:"Zelle Account Details",purchaseId:"Purchase ID",copy:"Copied",amount:"Amount to Pay",uploadProof:"Upload Payment Proof",confirm:"Confirm Payment",recipientTitle:"Delivery/Recipient Details"}},yO={login:"Log In",loginTitle:"Welcome Back",loginSubtitle:"Log in to access your account.",email:"Email",password:"Password",loginWithGoogle:"Log in with Google",or:"Or",loginSuccess:"Login successful!",loginError:"Invalid credentials. Please try again.",logoutSuccess:"Logged out successfully.",loginRequired:"Login Required",loginToCheckout:"Please log in to continue to checkout."},xO={title:"My User Panel",welcome:"Welcome, {name}",myOrders:"My Orders",noOrders:"You have no orders yet.",status:{pending:"Pending",validated:"Validated",rejected:"Rejected"}},vO={title:"Orders History",subtitle:"Complete management of all system orders",stats:{total:"Total",pending:"Pending",validated:"Validated",rejected:"Rejected",completed:"Completed",revenue:"Revenue"},filters:{title:"Search Filters",clear:"Clear Filters",search:"Search",searchPlaceholder:"Order, user, email or product...",status:"Order Status",allStatuses:"All Statuses",orderType:"Order Type",allTypes:"All",startDate:"Start Date",endDate:"End Date",apply:"Apply Filters"},table:{order:"Order",user:"User",date:"Date",type:"Type",items:"Items",total:"Total",paymentStatus:{label:"Payment Status",pending:"Payment Pending",validated:"Payment Validated (Ready to Process)",rejected:"Payment Rejected"},orderStatus:{label:"Order Status",pending:"Pending",processing:"Processing",shipped:"Shipped",delivered:"Delivered",completed:"Completed",cancelled:"Cancelled"},actions:"Actions"},types:{products:"Products",remittance:"Remittance",mixed:"Mixed"},actions:{view:"View",start:"Start",ship:"Ship",proof:"Proof",complete:"Complete",cancel:"Cancel",processing:"Processing...",loading:"Loading...",completing:"Completing..."},messages:{noOrders:"No orders found",retry:"Retry",confirmStart:"Start processing order {orderNumber}?",confirmComplete:"Mark order {orderNumber} as completed?",confirmCancel:"Are you sure you want to cancel this order? This action will release reserved inventory.",enterTracking:"Enter tracking number (optional) for order {orderNumber}:",enterCancelReason:"Enter cancellation reason for order {orderNumber}:",cancelReasonRequired:"You must specify a reason to cancel",startSuccess:"Order moved to 'Processing' status",shipSuccess:"Order marked as 'Shipped'",deliverSuccess:"Delivery proof uploaded successfully. Order marked as 'Delivered'",completeSuccess:"Order completed successfully",cancelSuccess:"Order cancelled successfully",error:"Error",selectImage:"Select a proof image",invalidImage:"Please select a valid image",imageTooLarge:"File is too large. Max 5MB"},deliveryModal:{title:"Upload Delivery Evidence",orderLabel:"Order:",customerLabel:"Customer:",selectPhoto:"Select Evidence Photo",clickToUpload:"Click to upload",dragHere:"or drag here",fileTypes:"PNG, JPG, JPEG (MAX. 5MB)",imageLoaded:"Image loaded. Click 'Upload Evidence' to confirm.",note:"Note:",noteText:"When you upload the evidence, the order will automatically be marked as 'Delivered'. The customer will be able to see the proof image.",cancel:"Cancel",submit:"Upload Evidence",uploading:"Uploading..."},days:{singular:"day",plural:"days"},modals:{confirm:"Confirm",cancel:"Cancel",submit:"Submit",startTitle:"Start Processing",completeTitle:"Complete Order",cancelTitle:"Cancel Order",trackingTitle:"Tracking Number",cancelReasonTitle:"Cancellation Reason"}},bO={management:"User Management",managementDescription:"Manage roles and permissions for platform users",fetchError:"Error loading users",roleUpdated:"Role updated",roleUpdatedSuccess:"User role updated successfully",roleUpdateError:"Error updating role",userEnabled:"User enabled",userDisabled:"User disabled",statusUpdateSuccess:"User status updated successfully",statusUpdateError:"Error updating status",cannotModifySuperAdmin:"Cannot modify super admin",superAdmin:"Super Admin",noUsers:"No users",enable:"Enable",disable:"Disable",delete:"Delete",deleteUser:"Delete user",enableUser:"Enable user",disableUser:"Disable user",userDeleted:"User deleted",userDeletedSuccess:"User deleted successfully.",deleteError:"Error deleting",confirmDelete:"Are you sure you want to delete {email}? This action cannot be undone.",protected:"Protected",refresh:"Refresh",loadingUsers:"Loading users...",noUsersFound:"No users found",total:"Total",rolesPermissions:{title:"Roles and Permissions",userDesc:"Basic system access",adminDesc:"Manage products, combos and inventory",superAdminDesc:"Full access + user management"},securityNote:{title:"Security note",superAdminProtected:"Super Admins are protected and cannot be edited or deleted",onlySuperAdminManage:"Only Super Admins can manage roles and delete users",deletionPermanent:"User deletion is permanent and cannot be undone"},roles:{user:"User",admin:"Admin",super_admin:"Super Admin"},table:{email:"Email",name:"Name",role:"Role",status:"Status",actions:"Actions",active:"Active",inactive:"Inactive",createdAt:"Registration Date"}},wO={linkingToRecipient:"Linking account to recipient..."},jO={common:lO,nav:cO,home:dO,products:uO,remittances:mO,vendor:fO,dashboard:hO,settings:pO,cart:gO,auth:yO,userPanel:xO,adminOrders:vO,users:bO,bankAccounts:wO},Vw=w.createContext(),_O={es:oO,en:jO},NO=({children:t})=>{const[e,r]=w.useState("es"),i=(o,l={})=>{const c=o.split(".");let u=_O[e];for(const m of c)u=u?.[m];return typeof u=="string"?Object.entries(l).reduce((m,[h,p])=>m.replace(`{${h}}`,p),u):u||o};return s.jsx(Vw.Provider,{value:{language:e,setLanguage:r,t:i},children:t})},ct=()=>{const t=w.useContext(Vw);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},qw=()=>{const[t,e]=w.useState(null);w.useEffect(()=>{try{const u=localStorage.getItem("visualSettings");u&&e(JSON.parse(u))}catch(u){console.error("Error loading visual settings:",u)}},[]);const r=t?.primaryColor||"#2563eb",i=t?.secondaryColor||"#9333ea",o=t?.useGradient!==void 0?t.useGradient:!0,l=t?.pageBgColor||"#f9fafb",c=o?{background:`linear-gradient(to right, ${r}, ${i})`}:{backgroundColor:l};return s.jsx("div",{className:"min-h-screen flex items-center justify-center",style:c,children:s.jsx(oe.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.3,ease:[0,.71,.2,1.01],scale:{type:"spring",damping:5,stiffness:100,restDelta:.001}},className:"p-8 rounded-2xl shadow-xl",style:{backgroundColor:t?.cardBgColor||"#ffffff"},children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:`${r} transparent transparent transparent`}}),s.jsx("p",{className:"font-medium",style:{color:t?.textPrimaryColor||"#4b5563"},children:"Authenticating..."})]})})})},Ww=w.createContext(),CO=({children:t})=>{const[e,r]=w.useState(null),[i,o]=w.useState(null),[l,c]=w.useState(!0),[u,m]=w.useState(!0),h=w.useRef(!0),p=async E=>{try{const{data:N,error:R}=await Promise.race([V.from("user_profiles").select("role, is_enabled, avatar_url, full_name, email").eq("id",E).single(),new Promise((T,M)=>setTimeout(()=>M(new Error("Profile fetch timeout")),Fx.PROFILE_FETCH))]);return R?(console.warn("[Auth] Profile fetch error:",R),null):N}catch(N){return console.warn("[Auth] Profile fetch failed:",N.message),null}},g=async E=>{if(!E?.user){r(null),o(null),c(!0);return}const N=E.user.id;console.log("[Auth] Updating user state for:",E.user.email);const R=await p(N);if(!R){console.warn("[Auth] Profile not found, using session data as fallback"),r(E.user),o("user"),c(!0);return}if(R.is_enabled===!1){console.warn("[Auth] Account is disabled"),r(null),o(null),c(!1);try{await V.auth.signOut(),Y({title:"Cuenta deshabilitada",description:"Tu cuenta ha sido deshabilitada. Contacta al soporte.",variant:"destructive"})}catch(T){console.error("[Auth] Error signing out disabled user:",T)}return}r({...E.user,profile:R}),o(R.role||"user"),c(!0),console.log("[Auth] User state updated successfully. Role:",R.role),y(N,E.user,R)},y=async(E,N,R)=>{try{const T=N.user_metadata?.avatar_url||N.user_metadata?.picture,M=N.user_metadata?.full_name||N.user_metadata?.name,I={};if(T&&T!==R.avatar_url&&(I.avatar_url=T),M&&M!==R.full_name&&(I.full_name=M),Object.keys(I).length>0){const{error:Q}=await V.from("user_profiles").update(I).eq("id",E);Q&&console.warn("[Auth] Metadata sync error (non-critical):",Q)}}catch(T){console.warn("[Auth] Metadata sync failed (non-critical):",T)}};w.useEffect(()=>{h.current=!0;const E=setTimeout(()=>{h.current&&u&&(console.warn("[Auth] Init timeout - clearing loading state"),m(!1))},Fx.INIT_AUTH),N=async()=>{console.log("[Auth] Initializing..."),m(!0);try{const{data:{session:T},error:M}=await V.auth.getSession();if(M){console.error("[Auth] getSession error:",M),m(!1);return}T&&await g(T)}catch(T){console.error("[Auth] Init error:",T)}finally{clearTimeout(E),h.current&&m(!1)}},{data:R}=V.auth.onAuthStateChange(async(T,M)=>{if(console.log("[Auth] State change:",T),!!h.current){if(T==="SIGNED_OUT"){r(null),o(null),c(!0);return}M&&await g(M)}});return N(),()=>{h.current=!1,clearTimeout(E),R?.subscription&&R.subscription.unsubscribe()}},[]);const b=async(E,N)=>{try{const{data:R,error:T}=await V.auth.signInWithPassword({email:E,password:N});if(T)throw T;return R?.session?(await g(R.session),!0):!1}catch(R){return console.error("[Auth] login error",R),Y({title:"Error de inicio de sesin",description:R.message||String(R),variant:"destructive"}),!1}},j=async()=>{try{await V.auth.signOut();const{data:E,error:N}=await V.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(N)throw N;E?.url&&window.location.replace(E.url)}catch(E){console.error("[Auth] signInWithGoogle error",E),Y({title:"Error",description:E.message||String(E),variant:"destructive"})}},C=async()=>{try{const{error:E}=await V.auth.signOut();if(E)throw E;r(null),o(null),c(!0)}catch(E){console.error("[Auth] logout error",E),Y({title:"Error al cerrar sesin",description:E.message||String(E),variant:"destructive"})}},_=E=>E?i?i==="super_admin"||i==="admin"&&E!=="super_admin"?!0:i===E:!1:!0,A=xA.includes(e?.email),k={user:e,loading:u,isAuthenticated:!!e&&l,userRole:i,isEnabled:l,isSuperAdmin:i==="super_admin"||A,isAdmin:i==="admin"||i==="super_admin"||A,checkRole:_,login:b,signInWithGoogle:j,logout:C,supabaseClient:V};return s.jsx(Ww.Provider,{value:k,children:u?s.jsx(qw,{}):t})},Et=()=>{const t=w.useContext(Ww);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},SO=async()=>{const t=new Date().toISOString().slice(0,10).replace(/-/g,""),e=Date.now().toString().slice(-5),r=Math.floor(Math.random()*100).toString().padStart(2,"0"),i=`${e}${r}`.slice(0,5),o=`ORD-${t}-${i}`,{data:l}=await V.from("orders").select("order_number").eq("order_number",o).maybeSingle();if(l){const c=(Date.now()%1e3).toString().padStart(3,"0");return`ORD-${t}-${e.slice(-2)}${c}`}return o},EO=async(t,e)=>{try{const i={order_number:await SO(),user_id:t.userId,order_type:t.orderType||"product",status:"pending",subtotal:t.subtotal,discount_amount:t.discountAmount||0,shipping_cost:t.shippingCost||0,tax_amount:t.taxAmount||0,total_amount:t.totalAmount,currency_id:t.currencyId,shipping_address:t.shippingAddress||null,recipient_info:t.recipientInfo||null,delivery_instructions:t.deliveryInstructions||"",payment_method:t.paymentMethod||"zelle",payment_status:"pending",payment_reference:t.paymentReference||"",payment_proof_url:t.paymentProofUrl||null,shipping_zone_id:t.shippingZoneId||null,zelle_account_id:t.zelleAccountId||null,notes:t.notes||"",offer_id:t.offerId||null},{data:o,error:l}=await V.from("orders").insert(i).select().single();if(l)throw l;const c=e.map(h=>({order_id:o.id,item_type:h.itemType,item_id:h.itemId,item_name_es:h.nameEs,item_name_en:h.nameEn,quantity:h.quantity,unit_price:h.unitPrice,total_price:h.totalPrice,inventory_id:h.inventoryId||null,remittance_amount:h.remittanceAmount||null,exchange_rate:h.exchangeRate||null,recipient_data:h.recipientData||null})),{data:u,error:m}=await V.from("order_items").insert(c).select();if(m)throw m;for(const h of e)h.itemType==="product"&&h.inventoryId&&await kO(h.inventoryId,h.quantity);return{success:!0,order:{...o,items:u}}}catch(r){return console.error("Error creating order:",r),{success:!1,error:r.message}}},kO=async(t,e)=>{try{const{data:r,error:i}=await V.from("inventory").select("reserved_quantity").eq("id",t).single();if(i)throw i;const o=(r.reserved_quantity||0)+e,{error:l}=await V.from("inventory").update({reserved_quantity:o}).eq("id",t);if(l)throw l;return await V.from("inventory_movements").insert({inventory_id:t,movement_type:"reserved",quantity_change:-e,reference_type:"order",notes:"Reserved for order"}),{success:!0}}catch(r){return console.error("Error reserving inventory:",r),{success:!1,error:r.message}}},Hw=async(t,e)=>{try{const{data:r,error:i}=await V.from("inventory").select("reserved_quantity").eq("id",t).single();if(i)throw i;const o=Math.max(0,(r.reserved_quantity||0)-e),{error:l}=await V.from("inventory").update({reserved_quantity:o}).eq("id",t);if(l)throw l;return await V.from("inventory_movements").insert({inventory_id:t,movement_type:"released",quantity_change:e,reference_type:"order",notes:"Released from rejected/cancelled order"}),{success:!0}}catch(r){return console.error("Error releasing inventory:",r),{success:!1,error:r.message}}},rv=async(t,e)=>{try{const{data:r,error:i}=await V.from("inventory").select("quantity, reserved_quantity").eq("id",t).single();if(i)throw i;const o=r.quantity-e,l=Math.max(0,(r.reserved_quantity||0)-e),{error:c}=await V.from("inventory").update({quantity:o,reserved_quantity:l}).eq("id",t);if(c)throw c;return await V.from("inventory_movements").insert({inventory_id:t,movement_type:"sold",quantity_change:-e,reference_type:"order",notes:"Sold - payment validated"}),{success:!0}}catch(r){return console.error("Error reducing inventory:",r),{success:!1,error:r.message}}},PO=async(t,e={})=>{try{let r=V.from("orders").select(`
        *,
        order_items (*),
        currencies (code, symbol),
        shipping_zones (province_name, shipping_cost)
      `).eq("user_id",t).order("created_at",{ascending:!1});e.status&&(r=r.eq("status",e.status)),e.payment_status&&(r=r.eq("payment_status",e.payment_status));const{data:i,error:o}=await r;if(o)throw o;return{success:!0,orders:i||[]}}catch(r){return console.error("Error fetching user orders:",r),{success:!1,error:r.message,orders:[]}}},TO=async t=>{try{const{data:e,error:r}=await V.from("orders").select(`
        *,
        order_items (*),
        currencies (code, symbol),
        shipping_zones (province_name, shipping_cost)
      `).eq("id",t).single();if(r)throw r;if(e&&e.user_id){const{data:i,error:o}=await V.from("user_profiles").select("user_id, full_name, email").eq("user_id",e.user_id).single();!o&&i&&(e.user_profiles=i)}return{success:!0,order:e}}catch(e){return console.error("Error fetching order:",e),{success:!1,error:e.message}}},Gw=async(t={})=>{try{let e=V.from("orders").select(`
        *,
        order_items (*),
        currencies (code, symbol),
        shipping_zones (province_name, shipping_cost)
      `).order("created_at",{ascending:!1});t.status&&(e=e.eq("status",t.status)),t.payment_status&&(e=e.eq("payment_status",t.payment_status)),t.order_type&&(e=e.eq("order_type",t.order_type));const{data:r,error:i}=await e;if(i)throw i;if(r&&r.length>0){const o=[...new Set(r.map(u=>u.user_id))],{data:l,error:c}=await V.from("user_profiles").select("user_id, full_name, email").in("user_id",o);if(!c&&l){const u={};l.forEach(m=>{u[m.user_id]=m}),r.forEach(m=>{m.user_profiles=u[m.user_id]||null})}}return{success:!0,orders:r||[]}}catch(e){return console.error("Error fetching all orders:",e),{success:!1,error:e.message,orders:[]}}},AO=async()=>{try{const{data:t,error:e}=await V.rpc("get_pending_orders_count");if(e)throw e;return{success:!0,count:t||0}}catch(t){return console.error("Error fetching pending orders count:",t),{success:!1,count:0}}},RO=async(t,e)=>{try{const{data:r,error:i}=await V.from("orders").select("*, order_items (*)").eq("id",t).single();if(i)throw i;const{data:o,error:l}=await V.from("orders").update({payment_status:"validated",status:"processing",validated_by:e,validated_at:new Date().toISOString()}).eq("id",t).select().single();if(l)throw l;for(const c of r.order_items)if(c.item_type==="product"&&c.inventory_id)await rv(c.inventory_id,c.quantity);else if(c.item_type==="combo"&&c.item_id){const{data:u}=await V.from("combo_items").select("product_id, quantity").eq("combo_id",c.item_id);if(u)for(const m of u){const{data:h}=await V.from("products").select("inventory_id").eq("id",m.product_id).single();h?.inventory_id&&await rv(h.inventory_id,c.quantity*m.quantity)}}return await V.from("order_status_history").insert({order_id:t,previous_status:r.status,new_status:"processing",changed_by:e,notes:"Payment validated by admin"}),{success:!0,order:o}}catch(r){return console.error("Error validating payment:",r),{success:!1,error:r.message}}},OO=async(t,e,r)=>{try{const{data:i,error:o}=await V.from("orders").select("*, order_items (*)").eq("id",t).single();if(o)throw o;const{data:l,error:c}=await V.from("orders").update({payment_status:"rejected",status:"cancelled",validated_by:e,validated_at:new Date().toISOString(),rejection_reason:r}).eq("id",t).select().single();if(c)throw c;for(const u of i.order_items)u.item_type==="product"&&u.inventory_id&&await Hw(u.inventory_id,u.quantity);return await V.from("order_status_history").insert({order_id:t,previous_status:i.status,new_status:"cancelled",changed_by:e,notes:`Payment rejected: ${r}`}),{success:!0,order:l}}catch(i){return console.error("Error rejecting payment:",i),{success:!1,error:i.message}}},DO=async(t,e)=>{try{let r="jpg";t.name?r=t.name.split(".").pop():t.type&&(r={"image/jpeg":"jpg","image/jpg":"jpg","image/png":"png","image/webp":"webp","image/gif":"gif"}[t.type]||"jpg");const o=`payment-proofs/${`payment-proof-${e}-${Date.now()}.${r}`}`,{data:l,error:c}=await V.storage.from("order-documents").upload(o,t,{cacheControl:"3600",upsert:!1});if(c)throw c;const{data:u}=V.storage.from("order-documents").getPublicUrl(o),{error:m}=await V.from("orders").update({payment_proof_url:u.publicUrl}).eq("id",e);if(m)throw m;return{success:!0,url:u.publicUrl}}catch(r){return console.error("Error uploading payment proof:",r),{success:!1,error:r.message}}},MO=async(t,e)=>{try{const{data:r,error:i}=await V.from("orders").select("id, order_number, status, payment_status").eq("id",t).single();if(i)throw i;if(r.payment_status!=="validated")return{success:!1,error:"Payment must be validated before processing"};const{data:o,error:l}=await V.from("orders").update({status:"processing",processing_started_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t).select().single();if(l)throw l;return{success:!0,order:o}}catch(r){return console.error("Error starting order processing:",r),{success:!1,error:r.message}}},IO=async(t,e,r="")=>{try{const{data:i,error:o}=await V.from("orders").select("id, order_number, status").eq("id",t).single();if(o)throw o;if(i.status!=="processing")return{success:!1,error:"Order must be in processing status"};const l={status:"shipped",shipped_at:new Date().toISOString(),updated_at:new Date().toISOString()};r&&(l.notes=i.notes?`${i.notes}

Tracking: ${r}`:`Tracking: ${r}`);const{data:c,error:u}=await V.from("orders").update(l).eq("id",t).select().single();if(u)throw u;return{success:!0,order:c}}catch(i){return console.error("Error marking order as shipped:",i),{success:!1,error:i.message}}},LO=async(t,e,r)=>{try{const{data:i,error:o}=await V.from("orders").select("id, order_number, status").eq("id",t).single();if(o)throw o;if(i.status!=="shipped")return{success:!1,error:"Order must be in shipped status"};const l=`delivery-proof-${t}-${Date.now()}.jpg`,{data:c,error:u}=await V.storage.from("payment-proofs").upload(l,e,{cacheControl:"3600",upsert:!1});if(u)throw u;const{data:m}=V.storage.from("payment-proofs").getPublicUrl(l),{data:h,error:p}=await V.from("orders").update({status:"delivered",delivered_at:new Date().toISOString(),delivery_proof_url:m.publicUrl,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(p)throw p;return{success:!0,order:h}}catch(i){return console.error("Error marking order as delivered:",i),{success:!1,error:i.message}}},$O=async t=>{try{const{data:e,error:r}=await V.from("orders").select("id, order_number, status").eq("id",t).single();if(r)throw r;if(e.status!=="delivered")return{success:!1,error:"Order must be in delivered status"};const{data:i,error:o}=await V.from("orders").update({status:"completed",completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t).select().single();if(o)throw o;return{success:!0,order:i}}catch(e){return console.error("Error completing order:",e),{success:!1,error:e.message}}},FO=t=>{if(!t||t.status!=="processing"||!t.processing_started_at)return null;const e=new Date,r=new Date(t.processing_started_at),i=Math.abs(e-r);return Math.ceil(i/(1e3*60*60*24))},UO=async(t,e,r)=>{try{const{data:i,error:o}=await V.from("orders").select("*, order_items(*)").eq("id",t).single();if(o)throw o;for(const u of i.order_items)u.inventory_id&&await Hw(u.inventory_id,u.quantity);const{data:l,error:c}=await V.from("orders").update({status:"cancelled",rejection_reason:r,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(c)throw c;return{success:!0,order:l}}catch(i){return console.error("Error cancelling order:",i),{success:!1,error:i.message}}},BO=({currentPage:t,onNavigate:e})=>{const[r,i]=w.useState(!1),[o,l]=w.useState(!1),[c,u]=w.useState(0),{language:m,setLanguage:h,t:p}=ct(),{cart:g,visualSettings:y}=Xt(),{user:b,isAdmin:j,userRole:C}=Et();let _=[{id:"home",icon:Or,label:p("nav.home")},{id:"products",icon:Or,label:p("nav.products")},{id:"remittances",icon:St,label:p("nav.remittances")}];const A=[{id:"dashboard",icon:rc,label:p("nav.dashboard")},{id:"admin",icon:Ik,label:p("nav.admin")},{id:"user-management",icon:_o,label:p("nav.userManagement")},{id:"settings",icon:kb,label:p("nav.settings")}],{logout:k}=Et(),E=()=>{k(),Y({title:p("auth.logoutSuccess")}),e("home")},N=()=>{e("login")},R=M=>{e(M),l(!1),i(!1)};w.useEffect(()=>{if(C==="admin"||C==="super_admin"){T();const M=setInterval(T,3e4);return()=>clearInterval(M)}},[C]);const T=async()=>{try{const M=await AO();M.success&&u(M.count||0)}catch(M){console.error("Error loading pending orders:",M)}};return s.jsx(oe.header,{initial:{y:-100},animate:{y:0},className:"fixed top-0 left-0 right-0 z-40 backdrop-blur-md shadow-sm",style:{backgroundColor:y.headerBgColor||"rgba(255, 255, 255, 0.8)",color:y.headerTextColor||"#1f2937"},children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs(oe.div,{whileHover:{scale:1.05},className:"flex items-center space-x-2 cursor-pointer",onClick:()=>R("home"),children:[y.logo?s.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:s.jsx("img",{src:y.logo,alt:y.companyName||"Logo",className:"max-w-full max-h-full object-contain"})}):s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:y.useGradient?`linear-gradient(to right, ${y.primaryColor||"#2563eb"}, ${y.secondaryColor||"#9333ea"})`:y.primaryColor||"#2563eb"},children:s.jsx(Or,{className:"w-5 h-5 text-white"})}),s.jsx("span",{className:"text-xl font-bold",style:{backgroundImage:y.useGradient?`linear-gradient(to right, ${y.primaryColor||"#2563eb"}, ${y.secondaryColor||"#9333ea"})`:`linear-gradient(to right, ${y.primaryColor||"#2563eb"}, ${y.primaryColor||"#2563eb"})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:y?.logoName||"PapuEnvos"})]}),s.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[_.map(M=>s.jsxs(we,{variant:t===M.id?"default":"ghost",size:"sm",onClick:()=>R(M.id),className:"flex items-center space-x-2",style:t===M.id?{background:y.useGradient?`linear-gradient(to right, ${y.primaryColor||"#2563eb"}, ${y.secondaryColor||"#9333ea"})`:y.buttonBgColor||"#2563eb",color:y.buttonTextColor||"#ffffff",border:"none"}:{color:y.headerTextColor||"#1f2937"},children:[s.jsx(M.icon,{className:"w-4 h-4"}),s.jsx("span",{children:M.label})]},M.id)),j&&s.jsxs("div",{className:"relative",children:[s.jsxs(we,{variant:A.some(M=>t===M.id)?"default":"ghost",size:"sm",onClick:()=>l(!o),className:"flex items-center space-x-2",style:A.some(M=>t===M.id)?{background:y.useGradient?`linear-gradient(to right, ${y.primaryColor||"#2563eb"}, ${y.secondaryColor||"#9333ea"})`:y.buttonBgColor||"#2563eb",color:y.buttonTextColor||"#ffffff",border:"none"}:{color:y.headerTextColor||"#1f2937"},children:[s.jsx(qk,{className:"w-4 h-4"}),s.jsx("span",{children:"Admin"}),s.jsx(_b,{className:`w-3 h-3 transition-transform ${o?"rotate-180":""}`})]}),s.jsx(Zt,{children:o&&s.jsx(oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-56 rounded-xl shadow-xl overflow-hidden backdrop-blur-md",style:{backgroundColor:y.headerBgColor||"rgba(255, 255, 255, 0.95)",color:y.headerTextColor||"#1f2937"},children:A.map(M=>{const Q=y.headerBgColor==="#ffffff"||!y.headerBgColor?`${y.primaryColor}15`:`${y.headerBgColor}40`,H=t===M.id?{backgroundColor:Q,color:y.primaryColor||"#2563eb"}:{};return s.jsxs(we,{variant:"ghost",size:"sm",onClick:()=>R(M.id),className:"w-full justify-start flex items-center space-x-2 rounded-none hover:opacity-100",style:{...H,color:y.headerTextColor||"#1f2937"},onMouseEnter:be=>{t!==M.id&&(be.currentTarget.style.backgroundColor=Q)},onMouseLeave:be=>{t!==M.id&&(be.currentTarget.style.backgroundColor="transparent")},children:[s.jsx(M.icon,{className:"w-4 h-4"}),s.jsx("span",{children:M.label})]},M.id)})})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(we,{variant:"outline",size:"sm",onClick:()=>h(m==="es"?"en":"es"),className:"hidden sm:flex items-center space-x-2",style:{borderColor:y.primaryColor||"#2563eb",color:y.primaryColor||"#2563eb"},children:[s.jsx($m,{className:"w-4 h-4"}),s.jsx("span",{children:m.toUpperCase()})]}),C!=="admin"&&C!=="super_admin"&&s.jsx(we,{variant:"ghost",size:"icon",onClick:()=>e("cart"),children:s.jsxs("div",{className:"relative",children:[s.jsx(co,{className:"w-5 h-5"}),g.length>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:g.reduce((M,I)=>M+I.quantity,0)})]})}),b?s.jsxs(s.Fragment,{children:[s.jsx(we,{variant:"ghost",size:"icon",onClick:()=>e("user-panel"),className:"relative",children:s.jsxs("div",{className:"relative",children:[s.jsx(W4,{user:b}),(C==="admin"||C==="super_admin")&&c>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold shadow-lg",children:c})]})}),s.jsx(we,{variant:"ghost",size:"icon",onClick:E,children:s.jsx($k,{className:"w-5 h-5"})})]}):s.jsx(we,{variant:"ghost",size:"icon",onClick:N,children:s.jsx(Sb,{className:"w-5 h-5"})}),s.jsx(we,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>i(!r),children:r?s.jsx(Jt,{className:"w-5 h-5"}):s.jsx(Fk,{className:"w-5 h-5"})})]})]}),s.jsx(Zt,{children:r&&s.jsx(oe.nav,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-white/20 py-4",children:s.jsxs("div",{className:"flex flex-col space-y-2",children:[_.map(M=>s.jsxs(we,{variant:t===M.id?"default":"ghost",size:"sm",onClick:()=>R(M.id),className:"flex items-center space-x-2 justify-start",style:t===M.id?{background:y.useGradient?`linear-gradient(to right, ${y.primaryColor||"#2563eb"}, ${y.secondaryColor||"#9333ea"})`:y.buttonBgColor||"#2563eb",color:y.buttonTextColor||"#ffffff",border:"none"}:{color:y.headerTextColor||"#1f2937"},children:[s.jsx(M.icon,{className:"w-4 h-4"}),s.jsx("span",{children:M.label})]},M.id)),j&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pt-2 pb-1 px-2 text-xs font-semibold uppercase opacity-70",style:{color:y.headerTextColor||"#6b7280"},children:"Administracin"}),A.map(M=>s.jsxs(we,{variant:t===M.id?"default":"ghost",size:"sm",onClick:()=>R(M.id),className:"flex items-center space-x-2 justify-start",style:t===M.id?{background:y.useGradient?`linear-gradient(to right, ${y.primaryColor||"#2563eb"}, ${y.secondaryColor||"#9333ea"})`:y.buttonBgColor||"#2563eb",color:y.buttonTextColor||"#ffffff",border:"none"}:{color:y.useGradient||"#1f2937"},children:[s.jsx(M.icon,{className:"w-4 h-4"}),s.jsx("span",{children:M.label})]},M.id))]}),s.jsxs(we,{variant:"outline",size:"sm",onClick:()=>h(m==="es"?"en":"es"),className:"flex items-center space-x-2 justify-start",style:{background:`linear-gradient(to right, ${y.primaryColor||"#2563eb"}, ${y.secondaryColor||"#9333ea"})`,border:"none",color:y.buttonTextColor||"#ffffff"},children:[s.jsx($m,{className:"w-4 h-4"}),s.jsx("span",{children:m.toUpperCase()})]})]})})})]})})},Qe=t=>t?{background:t.useGradient?`linear-gradient(to right, ${t.primaryColor||"#2563eb"}, ${t.secondaryColor||"#9333ea"})`:t.buttonBgColor||t.primaryColor||"#2563eb",color:t.buttonTextColor||"#ffffff",border:"none"}:{},Xe=t=>t?t.useHeadingGradient||t.useGradient?{backgroundImage:`linear-gradient(to right, ${t.primaryColor||"#2563eb"}, ${t.secondaryColor||"#9333ea"})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}:{color:t.headingColor||t.primaryColor||"#1f2937"}:{},Ue=(t,e="primary")=>{if(!t)return{};const r={primary:{color:t.textPrimaryColor||"#1f2937"},secondary:{color:t.textSecondaryColor||"#6b7280"},muted:{color:t.textMutedColor||"#9ca3af"}};return r[e]||r.primary},Kw=(t,e="default")=>{if(!t)return{};const r={default:{backgroundColor:t.pillBgColor||"#e5e7eb",color:t.pillTextColor||"#374151"},success:{backgroundColor:`${t.successColor||"#10b981"}20`,color:t.successColor||"#10b981",borderColor:t.successColor||"#10b981"},warning:{backgroundColor:`${t.warningColor||"#f59e0b"}20`,color:t.warningColor||"#f59e0b",borderColor:t.warningColor||"#f59e0b"},error:{backgroundColor:`${t.errorColor||"#ef4444"}20`,color:t.errorColor||"#ef4444",borderColor:t.errorColor||"#ef4444"},info:{backgroundColor:`${t.primaryColor||"#2563eb"}20`,color:t.primaryColor||"#2563eb",borderColor:t.primaryColor||"#2563eb"}};return r[e]||r.default},hm=(t,e)=>{if(!e)return{};const i={validated:"success",pending:"warning",rejected:"error",cancelled:"default",processing:"info",completed:"success"}[t]||"default";return Kw(e,i)},zO=(t,e="info")=>{if(!t)return{};const r={success:{backgroundColor:`${t.successColor||"#10b981"}10`,borderColor:t.successColor||"#10b981",color:t.successColor||"#10b981"},warning:{backgroundColor:`${t.warningColor||"#f59e0b"}10`,borderColor:t.warningColor||"#f59e0b",color:t.warningColor||"#f59e0b"},error:{backgroundColor:`${t.errorColor||"#ef4444"}10`,borderColor:t.errorColor||"#ef4444",color:t.errorColor||"#ef4444"},info:{backgroundColor:`${t.primaryColor||"#2563eb"}10`,borderColor:t.primaryColor||"#2563eb",color:t.primaryColor||"#2563eb"}};return r[e]||r.info},sv=({onNavigate:t})=>{const{t:e,language:r}=ct(),{visualSettings:i}=Xt(),{isAdmin:o}=Et(),[l,c]=w.useState([]),[u,m]=w.useState([]),h=[{icon:Or,title:e("home.features.products.title"),description:e("home.features.products.description"),action:()=>t("products")},{icon:St,title:e("home.features.remittances.title"),description:e("home.features.remittances.description"),action:()=>t("remittances")},{icon:$i,title:e("home.features.analytics.title"),description:e("home.features.analytics.description"),action:()=>t("dashboard"),admin:!0},{icon:_o,title:e("home.features.vendors.title"),description:e("home.features.vendors.description"),action:()=>t("admin"),admin:!0}].filter(j=>!j.admin||o),[p,g]=w.useState(0);w.useEffect(()=>{(async()=>{const C=await sw(!1);C.data&&m(C.data)})()},[]),w.useEffect(()=>{(async()=>{try{const{data:C,error:_}=await LA();if(_)throw _;c(C||[])}catch(C){console.error("Error loading carousel slides:",C),c([])}})()},[]);const y=()=>{g(j=>j===l.length-1?0:j+1)},b=()=>{g(j=>j===0?l.length-1:j-1)};return w.useEffect(()=>{if(l.length>1){const j=setInterval(y,5e3);return()=>clearInterval(j)}},[l.length]),s.jsxs("div",{className:"min-h-screen",children:[s.jsx("section",{className:"relative h-[60vh] md:h-[80vh] w-full overflow-hidden",children:l.length>0?s.jsxs(s.Fragment,{children:[s.jsx(Zt,{initial:!1,children:s.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},style:{backgroundImage:`url(${l[p]?.image_url||l[p]?.image_file})`},className:"absolute inset-0 bg-cover bg-center",children:s.jsx("div",{className:"absolute inset-0 bg-black/50"})},p)}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-center text-white p-4",children:[s.jsx(oe.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-4xl md:text-6xl font-bold mb-4",children:r==="es"?l[p]?.title_es:l[p]?.title_en},`main-${p}`),s.jsx(oe.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-lg md:text-xl max-w-2xl mx-auto mb-8",children:r==="es"?l[p]?.subtitle_es:l[p]?.subtitle_en},`secondary-${p}`),s.jsx(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"flex flex-col sm:flex-row gap-4 justify-center",children:s.jsxs(we,{size:"lg",onClick:()=>t("products"),className:"px-8 py-3 text-lg",style:{background:i.useGradient?`linear-gradient(to right, ${i.primaryColor||"#2563eb"}, ${i.secondaryColor||"#9333ea"})`:i.buttonBgColor||"#2563eb",color:i.buttonTextColor||"#ffffff",border:"none"},children:[s.jsx(Or,{className:"w-5 h-5 mr-2"}),e("home.hero.cta.products")]})})]}),l.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:b,className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-white/20 rounded-full hover:bg-white/40 transition-colors",children:s.jsx($f,{className:"h-6 w-6 text-white"})}),s.jsx("button",{onClick:y,className:"absolute right-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-white/20 rounded-full hover:bg-white/40 transition-colors",children:s.jsx(Ff,{className:"h-6 w-6 text-white"})}),s.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-20 flex gap-2",children:l.map((j,C)=>s.jsx("div",{onClick:()=>g(C),className:`w-3 h-3 rounded-full cursor-pointer transition-colors ${p===C?"bg-white":"bg-white/50"}`},C))})]})]}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:i.useGradient?`linear-gradient(to right, ${i.primaryColor||"#2563eb"}, ${i.secondaryColor||"#9333ea"})`:i.primaryColor||"#2563eb"},children:s.jsxs("div",{className:"text-center text-white p-4",children:[s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:e("home.hero.title")}),s.jsx("p",{className:"text-lg md:text-xl max-w-2xl mx-auto mb-8",children:e("home.hero.subtitle")}),s.jsxs(we,{size:"lg",onClick:()=>t("products"),className:"px-8 py-3 text-lg",style:{backgroundColor:i.cardBgColor||"#ffffff",color:i.primaryColor||"#2563eb",border:"none"},children:[s.jsx(Or,{className:"w-5 h-5 mr-2"}),e("home.hero.cta.products")]})]})})}),s.jsx("section",{className:"py-20 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs(oe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold mb-4",style:Xe(i),children:e("home.features.title")}),s.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e("home.features.subtitle")})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:h.map((j,C)=>s.jsxs(oe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:C*.1},className:"glass-effect p-6 rounded-2xl hover-lift cursor-pointer group",onClick:j.action,children:[s.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",style:{background:i.useGradient?`linear-gradient(to right, ${i.primaryColor||"#2563eb"}, ${i.secondaryColor||"#9333ea"})`:i.primaryColor||"#2563eb"},children:s.jsx(j.icon,{className:"w-6 h-6 text-white"})}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:j.title}),s.jsx("p",{className:"text-gray-600",children:j.description})]},C))})]})}),s.jsx("section",{className:"py-20 px-4 bg-slate-100/50",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs(oe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold mb-4",style:Xe(i),children:e("home.testimonials.title")}),s.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e("home.testimonials.subtitle")})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.length>0?u.map(j=>s.jsxs(oe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.5},className:"glass-effect p-6 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("img",{className:"w-12 h-12 rounded-full mr-4 object-cover",alt:j.user_name||"User",src:j.user_avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(j.user_name||"U")}&background=random`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:j.user_name}),s.jsxs("div",{className:"flex",children:[[...Array(j.rating)].map((C,_)=>s.jsx(an,{className:"w-4 h-4 text-yellow-400 fill-current"},_)),[...Array(5-j.rating)].map((C,_)=>s.jsx(an,{className:"w-4 h-4 text-gray-300"},_))]})]})]}),s.jsxs("p",{className:"text-gray-600 italic",children:['"',j.comment,'"']})]},j.id)):s.jsx("p",{className:"text-gray-500 col-span-full text-center",children:r==="es"?"An no hay testimonios disponibles":"No testimonials available yet"})})]})})]})},nf="product-images",VO=async(t,e)=>{try{const r=t.name.split(".").pop(),i=`${e}.${r}`,{error:o}=await V.storage.from(nf).upload(i,t,{cacheControl:"3600",upsert:!0});if(o)throw o;const{data:{publicUrl:l}}=V.storage.from(nf).getPublicUrl(i);return{publicUrl:l}}catch(r){throw console.error("Error uploading image:",r),r}},qO=async t=>{try{const{error:e}=await V.storage.from(nf).remove([t]);if(e)throw e}catch(e){throw console.error("Error deleting image:",e),e}},Yw={product:{maxSizeMB:2,maxWidth:800,maxHeight:800,aspectRatio:1,quality:.85,formats:["image/jpeg","image/png","image/webp"]},combo:{maxSizeMB:2,maxWidth:800,maxHeight:800,aspectRatio:1,quality:.85,formats:["image/jpeg","image/png","image/webp"]},carousel:{maxSizeMB:3,maxWidth:1920,maxHeight:1080,aspectRatio:16/9,quality:.9,formats:["image/jpeg","image/png","image/webp"]},carouselMobile:{maxSizeMB:1.5,maxWidth:800,maxHeight:1200,aspectRatio:2/3,quality:.85,formats:["image/jpeg","image/png","image/webp"]},logo:{maxSizeMB:2,maxWidth:400,maxHeight:400,aspectRatio:1,quality:.95,formats:["image/png","image/svg+xml","image/webp"]},payment_proof:{maxSizeMB:5,maxWidth:2e3,maxHeight:2e3,aspectRatio:null,quality:.85,formats:["image/jpeg","image/png","image/webp"]}},Qw=(t,e="product")=>{const r=Yw[e],i=[];if(!t)return i.push("No se seleccion ningn archivo"),{valid:!1,errors:i};r.formats.includes(t.type)||i.push(`Formato no vlido. Use: ${r.formats.map(l=>l.split("/")[1]).join(", ")}`);const o=t.size/(1024*1024);return o>r.maxSizeMB&&i.push(`Tamao muy grande (${o.toFixed(2)}MB). Mximo: ${r.maxSizeMB}MB`),{valid:i.length===0,errors:i,sizeMB:o.toFixed(2)}},WO=t=>new Promise((e,r)=>{const i=new FileReader;i.onload=o=>{const l=new Image;l.onload=()=>e(l),l.onerror=r,l.src=o.target.result},i.onerror=r,i.readAsDataURL(t)}),HO=async(t,e="product")=>{const r=Yw[e],i=Qw(t,e);if(!i.valid)throw new Error(i.errors.join(`
`));try{if(t.type==="image/svg+xml"){const T=await new Promise((I,Q)=>{const H=new FileReader;H.onloadend=()=>I(H.result),H.onerror=Q,H.readAsDataURL(t)}),M=t.size/(1024*1024);return{success:!0,base64:T,blob:t,metadata:{originalSize:M.toFixed(2)+"MB",finalSize:M.toFixed(2)+"MB",compression:"0%",originalDimensions:"Vector",finalDimensions:"Vector",format:"SVG",quality:"100%"}}}const o=await WO(t);let{width:l,height:c}=o;const u=l/c,m=r.aspectRatio;let h=l,p=c,g=0,y=0;m&&Math.abs(u-m)>.01&&(u>m?(h=c*m,g=(l-h)/2):(p=l/m,y=(c-p)/2));let b=h,j=p;if(b>r.maxWidth){const T=r.maxWidth/b;b=r.maxWidth,j=j*T}if(j>r.maxHeight){const T=r.maxHeight/j;j=r.maxHeight,b=b*T}const C=document.createElement("canvas");C.width=b,C.height=j;const _=C.getContext("2d");_.imageSmoothingEnabled=!0,_.imageSmoothingQuality="high",_.drawImage(o,g,y,h,p,0,0,b,j);const A=await new Promise(T=>{C.toBlob(T,"image/jpeg",r.quality)}),k=await new Promise(T=>{const M=new FileReader;M.onloadend=()=>T(M.result),M.readAsDataURL(A)}),E=t.size/(1024*1024),N=A.size/(1024*1024),R=((1-N/E)*100).toFixed(1);return{success:!0,base64:k,blob:A,metadata:{originalSize:E.toFixed(2)+"MB",finalSize:N.toFixed(2)+"MB",compression:R+"%",originalDimensions:`${o.width}x${o.height}`,finalDimensions:`${b}x${j}`,format:"JPEG",quality:r.quality*100+"%"}}}catch(o){throw console.error("Error processing image:",o),new Error("Error al procesar la imagen: "+o.message)}},go=async(t,e="product",r=null)=>{try{r&&r({stage:"validating",progress:10});const i=Qw(t,e);if(!i.valid)return{success:!1,errors:i.errors};r&&r({stage:"processing",progress:50});const o=await HO(t,e);return r&&r({stage:"complete",progress:100}),o}catch(i){return{success:!1,errors:[i.message]}}},GO=({onNavigate:t})=>{const{t:e,language:r}=ct(),{user:i,isAdmin:o}=Et(),{products:l,combos:c,categories:u,addToCart:m,financialSettings:h,refreshProducts:p,visualSettings:g}=Xt(),[y,b]=w.useState(""),[j,C]=w.useState("all"),[_,A]=w.useState([]),[k,E]=w.useState([]),[N,R]=w.useState(!1),[T,M]=w.useState(0),[I,Q]=w.useState(null),[H,be]=w.useState(null),[z,de]=w.useState([]),[ee,ce]=w.useState(null),[se,ue]=w.useState({}),$=w.useRef(null),[ne,ae]=w.useState(!1),[P,F]=w.useState(!1),te=w.useCallback(async(ie,je)=>{const W=ie.target.files[0];if(W)try{R(!0),M(0);const O=await go(W,"product",le=>M(le.progress));if(!O.success){Y({title:"Error de validacin",description:O.errors.join(`
`),variant:"destructive"});return}be(O.base64);const he=`product-${je}-${Date.now()}.jpg`,{publicUrl:B}=await VO(O.blob,he),{error:G}=await V.from("products").update({image_url:B}).eq("id",je);if(G)throw G;await p(),Y({title:e("products.imageUploaded"),description:`${e("products.imageUploadedSuccess")} (${O.metadata.compression} compresin)`})}catch(O){console.error("Error uploading image:",O),Y({title:e("products.imageUploadError"),description:O.message,variant:"destructive"})}finally{R(!1),M(0),be(null)}},[e,p]),me=w.useCallback(async(ie,je)=>{if(je)try{const W=je.split("/").pop();await qO(W);const{error:O}=await V.from("products").update({image_url:null}).eq("id",ie);if(O)throw O;await p(),Y({title:e("products.imageDeleted"),description:e("products.imageDeletedSuccess")})}catch(W){console.error("Error deleting image:",W),Y({title:e("products.imageDeleteError"),description:W.message,variant:"destructive"})}},[e,p]);w.useEffect(()=>{(async()=>{try{const{data:je,error:W}=await V.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(W)throw W;de(je||[]);const O=je?.find(le=>le.is_base);O&&ce(O.id);const{data:he,error:B}=await V.from("exchange_rates").select("*").eq("is_active",!0);if(B)throw B;const G={};(he||[]).forEach(le=>{G[`${le.from_currency_id}-${le.to_currency_id}`]=le.rate}),ue(G)}catch(je){console.error("Error loading currencies:",je)}})()},[]),w.useEffect(()=>{let ie=l;o||(ie=ie.filter(W=>(W.stock!==void 0?W.stock:0)>0)),y&&(ie=ie.filter(W=>(W.name_es||W.name||"").toLowerCase().includes(y.toLowerCase())||(W.name_en||"").toLowerCase().includes(y.toLowerCase()))),j!=="all"&&(ie=ie.filter(W=>W.category?.id===j||W.category_id===j)),A(ie);let je=c||[];o||(je=je.filter(W=>W.is_active!==!1)),y&&(je=je.filter(W=>W.name.toLowerCase().includes(y.toLowerCase()))),E(je)},[l,c,y,j,o]);const ye=ie=>{m(ie),Y({title:e("products.addedToCart"),description:`${ie.name_es||ie.name} ${e("products.addedToCartDesc")}`})},_e=ie=>{if($.current){const W=ie==="left"?$.current.scrollLeft-400:$.current.scrollLeft+400;$.current.scrollTo({left:W,behavior:"smooth"})}},xe=()=>{if($.current){const{scrollLeft:ie,scrollWidth:je,clientWidth:W}=$.current;ae(ie>0),F(ie<je-W-10)}};w.useEffect(()=>{xe();const ie=$.current;if(ie)return ie.addEventListener("scroll",xe),()=>ie.removeEventListener("scroll",xe)},[k]);const Ne=(ie,je,W)=>{if(!ie||!je||!W||je===W)return ie;const O=`${je}-${W}`,he=se[O];return he?parseFloat(ie)*he:ie},De=ie=>{if(!ie||!ee)return"0.00";const je=parseFloat(ie.final_price||ie.base_price||0),W=ie.base_currency_id;return W?Ne(je,W,ee).toFixed(2):je.toFixed(2)},Fe=ie=>{if(!ie||!ee)return"0.00";let je=0;(ie.products||[]).forEach(he=>{const B=l.find(G=>G.id===he);if(B){const G=parseFloat(B.base_price||0),le=B.base_currency_id,Pe=ie.productQuantities?.[he]||1;let Ke=G;le&&le!==ee&&(Ke=Ne(G,le,ee)),je+=Ke*Pe}});const W=parseFloat(ie.profitMargin||h.comboProfit)/100;return(je*(1+W)).toFixed(2)};return s.jsx("div",{className:"min-h-screen py-8 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",style:Xe(g),children:e("products.title")}),s.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e("products.subtitle")})]}),s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect p-6 rounded-2xl mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Lc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:e("products.searchPlaceholder"),value:y,onChange:ie=>b(ie.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Bf,{className:"w-5 h-5 text-gray-400"}),s.jsxs("select",{value:j,onChange:ie=>C(ie.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:e("products.categories.all")}),u.map(ie=>s.jsx("option",{value:ie.id,children:r==="es"?ie.name_es:ie.name_en},ie.id))]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:r==="es"?"Moneda:":"Currency:"}),s.jsx("select",{value:ee||"",onChange:ie=>ce(ie.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:z.map(ie=>s.jsxs("option",{value:ie.id,children:[ie.code," (",ie.symbol,")"]},ie.id))})]})]})}),k.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-4",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",style:Xe(g),children:" Combos Especiales"}),k.length>3&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{variant:"outline",size:"sm",onClick:()=>_e("left"),disabled:!ne,className:"rounded-full w-10 h-10 p-0",children:s.jsx($f,{className:"w-5 h-5"})}),s.jsx(we,{variant:"outline",size:"sm",onClick:()=>_e("right"),disabled:!P,className:"rounded-full w-10 h-10 p-0",children:s.jsx(Ff,{className:"w-5 h-5"})})]})]})}),s.jsx("style",{children:`
              .combos-carousel::-webkit-scrollbar {
                display: none;
              }
            `}),s.jsx("div",{ref:$,className:"combos-carousel flex gap-6 mb-12 overflow-x-auto pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:k.map((ie,je)=>{const O=(()=>{let B=0;(ie.products||[]).forEach(Ke=>{const ze=l.find(Ie=>Ie.id===Ke);if(ze){const Ie=parseFloat(ze.base_price||0),rt=Ne(Ie,ze.base_currency_id,ee),J=ie.productQuantities?.[Ke]||1,Me=parseFloat(h.productProfit||40)/100,et=rt*(1+Me);B+=et*J}});const G=parseFloat(Fe(ie)),le=B-G,Pe=B>0?(le/B*100).toFixed(0):0;return{savings:le.toFixed(2),percent:Pe}})(),he=z.find(B=>B.id===ee)?.symbol||"$";return s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:je*.1},className:"glass-effect rounded-2xl overflow-hidden hover-lift group border-2 border-purple-200 cursor-pointer flex-shrink-0",style:{width:"300px"},onClick:()=>t("product-detail",{itemId:ie.id,itemType:"combo"}),children:[s.jsxs("div",{className:"aspect-square bg-gradient-to-br from-purple-100 to-pink-100 relative",children:[ie.image?s.jsx("img",{src:ie.image,alt:ie.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(vr,{className:"w-20 h-20 text-purple-300"})}),O.savings>0&&s.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-2 rounded-lg shadow-lg animate-pulse",children:s.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[s.jsx("span",{className:"text-[10px] opacity-90",children:r==="es"?"AHORRA":"SAVE"}),s.jsxs("span",{className:"text-sm",children:[he,O.savings]}),s.jsxs("span",{className:"text-[10px] bg-white bg-opacity-20 px-2 rounded-full mt-0.5",children:["-",O.percent,"%"]})]})}),s.jsx("div",{className:"absolute top-2 right-2 bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"COMBO"})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:ie.name}),s.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[ie.products?.length||0," ",e("vendor.combos.includedProducts")]}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[z.find(B=>B.id===ee)?.symbol||"$",Fe(ie)]}),s.jsx("p",{className:"text-xs text-gray-500",children:z.find(B=>B.id===ee)?.code||"USD"})]})}),s.jsxs(we,{onClick:B=>{B.stopPropagation(),ye({...ie,type:"combo"})},className:"w-full",style:{background:g.useGradient?`linear-gradient(to right, ${g.primaryColor||"#2563eb"}, ${g.secondaryColor||"#9333ea"})`:g.buttonBgColor||"#2563eb",color:g.buttonTextColor||"#ffffff",border:"none"},children:[s.jsx(co,{className:"w-4 h-4 mr-2"}),e("products.addToCart")]})]})]},`combo-${ie.id}`)})})]}),_.length>0&&s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-4",children:s.jsx("h2",{className:"text-2xl font-bold mb-4",style:Xe(g),children:" Productos"})}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:_.map((ie,je)=>s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:je*.1},className:"glass-effect rounded-2xl overflow-hidden hover-lift group cursor-pointer",onClick:()=>t("product-detail",{itemId:ie.id,itemType:"product"}),children:[s.jsxs("div",{className:"aspect-square bg-gray-100 relative group",children:[H&&I===ie.id?s.jsx("img",{className:"w-full h-full object-cover",alt:e("products.preview"),src:H}):s.jsx("img",{className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",alt:ie.name_es||ie.name,src:ie.image_url||"https://images.unsplash.com/photo-1646193186132-7976c1670e81"}),o&&s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center z-10",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:W=>{W.stopPropagation(),Q(ie.id),te(W,ie.id)}}),s.jsx(we,{variant:"secondary",size:"sm",className:"bg-white hover:bg-gray-100",onClick:W=>W.stopPropagation(),children:s.jsx(gc,{className:"w-4 h-4"})})]}),ie.image_url&&s.jsx(we,{variant:"destructive",size:"sm",onClick:W=>{W.stopPropagation(),me(ie.id,ie.image_url)},children:s.jsx(Jt,{className:"w-4 h-4"})})]})}),N&&I===ie.id&&s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10",children:s.jsx("div",{className:"w-full max-w-[80%] bg-white rounded-lg p-4",children:s.jsx("div",{className:"h-2 bg-gray-200 rounded",children:s.jsx("div",{className:"h-full rounded transition-all duration-300",style:{width:`${T}%`,background:g.useGradient?`linear-gradient(to right, ${g.primaryColor}, ${g.secondaryColor})`:g.primaryColor}})})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:ie.name_es||ie.name}),ie.category&&s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:r==="es"?ie.category.name_es:ie.category.name_en}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-xl font-bold text-green-600",children:[z.find(W=>W.id===ee)?.symbol||"$",De(ie)]}),s.jsx("p",{className:"text-xs text-gray-500",children:z.find(W=>W.id===ee)?.code||"USD"})]})}),s.jsxs(we,{onClick:W=>{W.stopPropagation(),ye(ie)},className:"w-full",style:{background:g.useGradient?`linear-gradient(to right, ${g.primaryColor||"#2563eb"}, ${g.secondaryColor||"#9333ea"})`:g.buttonBgColor||"#2563eb",color:g.buttonTextColor||"#ffffff",border:"none"},children:[s.jsx(co,{className:"w-4 h-4 mr-2"}),e("products.addToCart")]})]})]},ie.id))}),_.length===0&&s.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[s.jsx(vr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:e("products.noProducts")}),s.jsx("p",{className:"text-gray-500",children:e("products.noProductsDesc")})]})]})})},KO=({product:t,selectedCurrency:e,currencySymbol:r,currencyCode:i,convertPrice:o,quantity:l=1})=>{const[c,u]=w.useState(!1),{language:m}=ct(),{visualSettings:h}=Xt(),p=()=>{const y=parseFloat(t.final_price||t.base_price||0),b=t.base_currency_id;return!b||b===e?y.toFixed(2):o(y,b,e).toFixed(2)},g=()=>(parseFloat(p())*l).toFixed(2);return s.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-gray-200 last:border-0",children:[s.jsx(oe.div,{className:"flex-shrink-0 cursor-pointer relative",onClick:()=>u(!c),whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsx(oe.div,{animate:{width:c?"120px":"60px",height:c?"120px":"60px"},transition:{duration:.3,ease:"easeInOut"},className:"rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:s.jsx("img",{src:t.image_url||"https://images.unsplash.com/photo-1646193186132-7976c1670e81",alt:t.name_es||t.name,className:"w-full h-full object-cover"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-gray-800",children:t.name_es||t.name}),t.category&&s.jsx("p",{className:"text-xs text-gray-500",children:m==="es"?t.category.name_es:t.category.name_en}),s.jsx("p",{className:"text-sm font-semibold",style:Xe(h),children:m==="es"?`Cantidad: ${l}`:`Quantity: ${l}`})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[r,p()," ",m==="es"?"c/u":"each"]}),s.jsxs("p",{className:"font-semibold text-gray-800",children:["Total:"," ",r,g()]}),s.jsx("p",{className:"text-xs text-gray-500",children:i})]})]})},YO=({onNavigate:t,itemId:e,itemType:r})=>{const{t:i,language:o}=ct(),{products:l,combos:c,categories:u,addToCart:m,financialSettings:h,visualSettings:p}=Xt(),{isAdmin:g}=Et(),[y,b]=w.useState(null),[j,C]=w.useState(0),[_,A]=w.useState([]),[k,E]=w.useState(!1),[N,R]=w.useState([]),[T,M]=w.useState(null),[I,Q]=w.useState({});w.useEffect(()=>{(async()=>{try{const{data:F,error:te}=await V.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(te)throw te;R(F||[]);const me=F?.find(Ne=>Ne.is_base);me&&M(me.id);const{data:ye,error:_e}=await V.from("exchange_rates").select("*").eq("is_active",!0);if(_e)throw _e;const xe={};(ye||[]).forEach(Ne=>{xe[`${Ne.from_currency_id}-${Ne.to_currency_id}`]=Ne.rate}),Q(xe)}catch(F){console.error("Error loading currencies:",F)}})()},[]),w.useEffect(()=>{const P=r==="combo"?c:l;A(P);const F=P.findIndex(te=>te.id===e);F!==-1&&(C(F),b(P[F]))},[e,r,l,c]);const H=(P,F,te)=>{if(!P||!F||!te||F===te)return P;const me=`${F}-${te}`,ye=I[me];return ye?parseFloat(P)*ye:P},be=(P,F)=>{if(!P||!T)return"0.00";if(F){const te=parseFloat(P.final_price||P.base_price||0),me=P.base_currency_id;return me?H(te,me,T).toFixed(2):te.toFixed(2)}else{let te=0;(P.products||[]).forEach(ye=>{const _e=l.find(xe=>xe.id===ye);if(_e){const xe=parseFloat(_e.base_price||0),Ne=_e.base_currency_id,De=P.productQuantities?.[ye]||1;let Fe=xe;Ne&&Ne!==T&&(Fe=H(xe,Ne,T)),te+=Fe*De}});const me=parseFloat(P.profitMargin||h.comboProfit)/100;return(te*(1+me)).toFixed(2)}},z=()=>{if(j>0){const P=_[j-1];C(j-1),b(P),E(!1)}else E(!0)},de=()=>{if(j<_.length-1){const P=_[j+1];C(j+1),b(P),E(!1)}else E(!0)},ee=()=>{const P=!y?.products;if(P&&j===_.length-1){if(c.length>0){const F=c[0];A(c),C(0),b(F),E(!1)}}else if(P&&j===0){if(c.length>0){const F=c[c.length-1];A(c),C(c.length-1),b(F),E(!1)}}else if(!P&&j===_.length-1){if(l.length>0){const F=l[0];A(l),C(0),b(F),E(!1)}}else if(!P&&j===0&&l.length>0){const F=l[l.length-1];A(l),C(l.length-1),b(F),E(!1)}},ce=()=>{const P=parseFloat(be(y,ue)),F=N.find(me=>me.id===T),te={...y,displayed_price:P,displayed_currency_code:F?.code||"USD",displayed_currency_id:T};m(te),Y({title:i("products.addedToCart"),description:`${y.name_es||y.name} ${i("products.addedToCartDesc")}`})},se=P=>{const F=u.find(te=>te.id===P);return F?o==="es"?F.name_es||F.es:F.name_en||F.en:""};if(!y)return s.jsx("div",{className:"min-h-screen py-8 px-4 flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:i("products.noProducts")})});const ue=!y.products,$=be(y,ue),ne=N.find(P=>P.id===T)?.symbol||"$",ae=N.find(P=>P.id===T)?.code||"USD";return s.jsx("div",{className:"min-h-screen py-8 px-4",children:s.jsxs("div",{className:"container mx-auto max-w-6xl",children:[s.jsx(oe.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:()=>t("products"),className:"mb-6 flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:i(ue?"products.detail.backToProducts":"products.detail.backToCombos")}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[s.jsxs(oe.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"relative",children:[s.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-gray-100 relative",children:[y.image_url||y.image?s.jsx("img",{src:y.image_url||y.image,alt:y.name_es||y.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(vr,{className:"w-24 h-24 text-gray-300"})}),!ue&&s.jsx("div",{className:"absolute top-4 right-4 bg-purple-600 text-white text-sm font-bold px-4 py-2 rounded-full",children:"COMBO"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-6",children:[s.jsxs(we,{onClick:z,variant:"outline",size:"lg",disabled:j===0&&r==="combo"&&l.length===0,className:"flex items-center gap-2",children:[s.jsx($f,{className:"w-5 h-5"}),i("products.detail.previous")]}),s.jsxs(we,{onClick:de,variant:"outline",size:"lg",disabled:j===_.length-1&&r==="combo"&&l.length===0,className:"flex items-center gap-2",children:[i("products.detail.next"),s.jsx(Ff,{className:"w-5 h-5"})]})]}),k&&(()=>{const P=!y?.products;return s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4",children:s.jsxs(we,{onClick:ee,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",size:"lg",children:[P&&(j===_.length-1||j===0)&&i("products.detail.continueToCombos"),!P&&(j===_.length-1||j===0)&&i("products.detail.continueToProducts"),s.jsx(cn,{className:"w-5 h-5 ml-2"})]})})})()]}),s.jsxs(oe.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",style:Xe(p),children:y.name_es||y.name}),ue&&(y.category_id||y.category)&&s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-4",children:[s.jsx(Wk,{className:"w-4 h-4"}),s.jsx("span",{children:se(y.category_id||y.category)})]})]}),s.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-sm text-gray-600",children:o==="es"?"Mostrar en:":"Display in:"}),s.jsx("select",{value:T||"",onChange:P=>M(P.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:N.map(P=>s.jsxs("option",{value:P.id,children:[P.code," (",P.symbol,")"]},P.id))})]}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:"text-4xl font-bold",style:Xe(p),children:[ne,$]}),s.jsx("span",{className:"text-gray-500",children:ae})]})]}),(y.description_es||y.description_en||y.description)&&s.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[s.jsx("h3",{className:"font-semibold text-lg mb-2",children:i("products.detail.description")}),s.jsx("p",{className:"text-gray-600",children:o==="es"?y.description_es||y.description:y.description_en||y.description})]}),ue&&s.jsxs("div",{className:"space-y-4",children:[y.stock!==void 0&&s.jsxs("div",{className:"flex items-center justify-between glass-effect p-4 rounded-xl",children:[s.jsxs("span",{className:"text-gray-600",children:[i("products.detail.stock"),":"]}),s.jsx("span",{className:`font-semibold ${y.stock>0?"text-green-600":"text-red-600"}`,children:y.stock>0?`${y.stock} ${i("products.detail.units")}`:i("products.detail.outOfStock")})]}),y.expiryDate&&s.jsxs("div",{className:"flex items-center justify-between glass-effect p-4 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(Calendar,{className:"w-4 h-4"}),s.jsxs("span",{children:[i("products.detail.expiryDate"),":"]})]}),s.jsx("span",{className:"font-semibold",children:y.expiryDate})]})]}),!ue&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"glass-effect p-6 rounded-xl bg-gradient-to-r from-purple-50 to-pink-50",children:[s.jsx("h3",{className:"font-semibold text-lg mb-3",style:Xe(p),children:o==="es"?" Ahorra con este combo!":" Save with this combo!"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-white bg-opacity-50 p-3 rounded-lg space-y-1",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:o==="es"?"Comprando por separado:":"Buying separately:"}),(y.products||[]).map(P=>{const F=l.find(De=>De.id===P);if(!F)return null;const te=parseFloat(F.base_price||0),me=H(te,F.base_currency_id,T),ye=y.productQuantities?.[P]||1,_e=parseFloat(h.productProfit||40)/100,Ne=me*(1+_e)*ye;return s.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[s.jsxs("span",{children:[F.name_es||F.name,"  ",ye]}),s.jsxs("span",{children:[ne,Ne.toFixed(2)]})]},P)}),s.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-300",children:[s.jsx("span",{className:"font-semibold text-gray-700",children:"Total:"}),s.jsxs("span",{className:"text-lg font-semibold line-through text-gray-500",children:[ne,(()=>{let P=0;return(y.products||[]).forEach(F=>{const te=l.find(me=>me.id===F);if(te){const me=parseFloat(te.base_price||0),ye=H(me,te.base_currency_id,T),_e=y.productQuantities?.[F]||1,xe=parseFloat(h.productProfit||40)/100,Ne=ye*(1+xe);P+=Ne*_e}}),P.toFixed(2)})()]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-purple-200",children:[s.jsx("span",{className:"text-lg font-bold",style:Xe(p),children:o==="es"?"Precio del combo:":"Combo price:"}),s.jsxs("span",{className:"text-2xl font-bold",style:Xe(p),children:[ne,$]})]}),s.jsx("div",{className:"text-center pt-2",children:s.jsxs("span",{className:"inline-block bg-green-100 px-4 py-2 rounded-full text-sm font-semibold",style:Xe(p),children:[o==="es"?"Ahorras ":"You save ",ne,(()=>{let P=0;return(y.products||[]).forEach(te=>{const me=l.find(ye=>ye.id===te);if(me){const ye=parseFloat(me.base_price||0),_e=H(ye,me.base_currency_id,T),xe=y.productQuantities?.[te]||1,Ne=parseFloat(h.productProfit||40)/100,De=_e*(1+Ne);P+=De*xe}}),(P-parseFloat($)).toFixed(2)})(),"!"]})})]})]}),s.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[s.jsx("h3",{className:"font-semibold text-lg mb-3",children:i("products.detail.includedProducts")}),s.jsx("div",{className:"space-y-3",children:y.products?.map(P=>{const F=l.find(me=>me.id===P),te=y.productQuantities?.[P]||1;return F?s.jsx(KO,{product:F,selectedCurrency:T,currencySymbol:ne,currencyCode:ae,convertPrice:H,quantity:te},P):null})})]}),g&&y.profitMargin&&s.jsxs("div",{className:"flex items-center justify-between glass-effect p-4 rounded-xl border-2 border-purple-200",children:[s.jsxs("span",{className:"text-gray-600",children:[i("products.detail.profitMargin"),":"]}),s.jsxs("span",{className:"font-semibold text-purple-600",children:[y.profitMargin,"%"]})]})]}),s.jsxs(we,{onClick:ce,size:"lg",className:"w-full text-lg py-6",style:Qe(p),children:[s.jsx(co,{className:"w-5 h-5 mr-2"}),i("products.addToCart")]})]})]})]})})},QO=({onNavigate:t})=>{const{t:e}=ct(),{user:r}=Et(),i=[{icon:$i,title:"Tasas Competitivas",description:"Las mejores tasas de cambio del mercado"},{icon:Gr,title:"Entrega Rpida",description:"Entrega en 24-72 horas"},{icon:qt,title:"Seguro y Confiable",description:"Tus remesas estn protegidas"}];return s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-16",children:[s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[s.jsx("h1",{className:`${Xe()} text-4xl md:text-5xl mb-4`,children:e("remittances.title")}),s.jsx("p",{className:"text-xl text-gray-600 mb-8",children:e("remittances.subtitle")}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[s.jsxs("button",{onClick:()=>t(r?"send-remittance":"login"),className:`${Qe()} flex items-center justify-center gap-2 px-8 py-4 text-lg`,children:[s.jsx(lo,{className:"h-6 w-6"}),e("remittances.send")]}),r&&s.jsxs("button",{onClick:()=>t("my-remittances"),className:"flex items-center justify-center gap-2 px-8 py-4 text-lg border-2 border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors font-semibold",children:[s.jsx(Ss,{className:"h-6 w-6"}),e("remittances.myRemittances")]})]})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:i.map((o,l)=>s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"glass-effect p-6 rounded-xl text-center hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:s.jsx(o.icon,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:o.title}),s.jsx("p",{className:"text-gray-600",children:o.description})]},l))}),s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-effect p-8 rounded-xl",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:e("remittances.howItWorks")}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{step:"1",...e("remittances.step1")},{step:"2",...e("remittances.step2")},{step:"3",...e("remittances.step3")}].map((o,l)=>s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-600 text-white rounded-full font-bold text-xl",children:o.step}),l<2&&s.jsx(cn,{className:"h-6 w-6 text-blue-400 mx-4 hidden md:block"})]}),s.jsx("h3",{className:"text-lg font-bold mb-2",children:o.title}),s.jsx("p",{className:"text-gray-600",children:o.description})]},l))})]}),!r&&s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-center mt-12",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Listo para enviar tu primera remesa?"}),s.jsxs("button",{onClick:()=>t("login"),className:`${Qe()} inline-flex items-center gap-2`,children:["Iniciar Sesin",s.jsx(cn,{className:"h-5 w-5"})]})]})]})})},Zw=w.createContext(),Eo=()=>{const t=w.useContext(Zw);if(!t)throw new Error("useModal must be used within ModalProvider");return t},ZO=({children:t})=>{const[e,r]=w.useState({isOpen:!1,title:"",message:"",type:"info",input:!1,inputLabel:"",inputPlaceholder:"",confirmText:"Confirmar",cancelText:"Cancelar",required:!1,resolve:null}),i=c=>new Promise(u=>{r({isOpen:!0,title:c.title||"Confirmacin",message:c.message||"",type:c.type||"info",input:c.input||!1,inputLabel:c.inputLabel||"",inputPlaceholder:c.inputPlaceholder||"",confirmText:c.confirmText||"Confirmar",cancelText:c.cancelText||"Cancelar",required:c.required||!1,resolve:u})}),o=c=>{e.resolve&&e.resolve(e.input?c:!0),r(u=>({...u,isOpen:!1}))},l=()=>{e.resolve&&e.resolve(!1),r(c=>({...c,isOpen:!1}))};return s.jsxs(Zw.Provider,{value:{showModal:i},children:[t,s.jsx(JO,{...e,onConfirm:o,onCancel:l})]})},JO=({isOpen:t,title:e,message:r,type:i,input:o,inputLabel:l,inputPlaceholder:c,confirmText:u,cancelText:m,required:h,onConfirm:p,onCancel:g})=>{const[y,b]=w.useState(""),j={danger:Ln,success:qt,info:fx},C={danger:"text-red-600",success:"text-green-600",info:"text-blue-600"},_={danger:"bg-red-600 hover:bg-red-700",success:"bg-green-600 hover:bg-green-700",info:"bg-blue-600 hover:bg-blue-700"},A=j[i]||fx,k=E=>{E.preventDefault(),!(o&&h&&!y.trim())&&(p(o?y:!0),b(""))};return s.jsx(Zt,{children:t&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:g,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),s.jsx(oe.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",onClick:E=>E.stopPropagation(),children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full bg-${i==="danger"?"red":i==="success"?"green":"blue"}-100 flex items-center justify-center`,children:s.jsx(A,{className:`h-6 w-6 ${C[i]}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e}),s.jsx("p",{className:"text-gray-600",children:r})]}),s.jsx("button",{onClick:g,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Jt,{className:"h-5 w-5"})})]}),s.jsxs("form",{onSubmit:k,children:[o&&s.jsxs("div",{className:"mb-6",children:[l&&s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[l," ",h&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:y,onChange:E=>b(E.target.value),placeholder:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",rows:"3",autoFocus:!0})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:()=>{g(),b("")},className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:m}),s.jsx("button",{type:"submit",disabled:o&&h&&!y.trim(),className:`flex-1 px-6 py-3 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${_[i]}`,children:u})]})]})]})})]})})},XO=t=>{if(!t)return"";let e=t.replace(/\D/g,"");return e.startsWith("1")?e=e.substring(1):e.startsWith("53")||e.startsWith("0")&&(e=e.substring(1)),e},Vi=(t,e="")=>{const r=XO(t),i=encodeURIComponent(e);return`https://wa.me/${r}?text=${i}`},eD=(t,e="")=>{const r=Vi(t,e);window.open(r,"_blank")},tD=(t,e,r="es")=>{if(!e){console.error("Admin WhatsApp number not configured"),alert("Nmero de WhatsApp del administrador no configurado. Contacte al soporte.");return}const i=t.order_items?.map((c,u)=>`${u+1}. ${c.item_name_es||c.item_name_en} (x${c.quantity})`).join(`
   `)||"Sin items",o={es:` *Nueva Orden Registrada*

 *Orden:* ${t.order_number}
 *Cliente:* ${t.user_name||t.user_profile?.full_name||"N/A"}
 *Email:* ${t.user_email||t.user_profile?.email||"N/A"}

 *Items:*
   ${i}

 *Total:* ${t.total_amount} ${t.currency?.code||t.currencies?.code||"USD"}
 *Mtodo de Pago:* ${t.payment_method||"N/A"}
 *Provincia:* ${t.shipping_zone?.province_name||t.shipping_address||"N/A"}

 *Ver en sistema:*
${window.location.origin}/dashboard?tab=orders

_Mensaje desde PapuEnvos_`,en:` *New Order Registered*

 *Order:* ${t.order_number}
 *Customer:* ${t.user_name||t.user_profile?.full_name||"N/A"}
 *Email:* ${t.user_email||t.user_profile?.email||"N/A"}

 *Items:*
   ${i}

 *Total:* ${t.total_amount} ${t.currency?.code||t.currencies?.code||"USD"}
 *Payment Method:* ${t.payment_method||"N/A"}
 *Province:* ${t.shipping_zone?.province_name||t.shipping_address||"N/A"}

 *View in system:*
${window.location.origin}/dashboard?tab=orders

_Message from PapuEnvos_`},l=Vi(e,o[r]||o.es);window.open(l,"_blank")},af=(t,e,r="es")=>{if(!e){console.error("Admin WhatsApp number not configured"),alert("Nmero de WhatsApp del administrador no configurado. Contacte al soporte.");return}const i=t.remittance_types||t.remittance_type,o={es:` *NUEVO COMPROBANTE DE REMESA*


 *ID Remesa:* ${t.remittance_number}
 *Nmero interno:* ${t.id}

 *Detalles del Pago*

 Monto enviado: ${t.amount} ${t.currency}
 Monto a entregar: ${t.amount_to_deliver?.toFixed(2)} ${t.delivery_currency}
 Tipo: ${i?.name||"N/A"}


 *Destinatario*

 ${t.recipient_name}
  ${t.recipient_phone}
  ${t.recipient_city||"N/A"}


 *Comprobante de Pago*
 Ver/descargar en el sistema

 Referencia bancaria: ${t.payment_reference||"Pendiente"}


 Revisar en sistema: ${window.location.origin}/dashboard?tab=remittances
`,en:` *NEW REMITTANCE PAYMENT PROOF*


 *Remittance ID:* ${t.remittance_number}
 *Internal Number:* ${t.id}

 *Payment Details*

 Amount Sent: ${t.amount} ${t.currency}
 Amount to Deliver: ${t.amount_to_deliver?.toFixed(2)} ${t.delivery_currency}
 Type: ${i?.name||"N/A"}


 *Recipient*

 ${t.recipient_name}
  ${t.recipient_phone}
  ${t.recipient_city||"N/A"}


 *Payment Proof*
 View/download in system

 Bank Reference: ${t.payment_reference||"Pending"}


 Check in system: ${window.location.origin}/dashboard?tab=remittances
`},l=Vi(e,o[r]||o.es);window.open(l,"_blank")},rD=async(t,e)=>{try{const{data:r,error:i}=await V.rpc("select_available_zelle_account",{p_transaction_type:t,p_amount:e});if(i)throw i;if(!r)throw new Error("No hay cuentas Zelle disponibles en este momento");const{data:o,error:l}=await V.from("zelle_accounts").select("*").eq("id",r).single();if(l)throw l;return{success:!0,account:o}}catch(r){return console.error("Error getting available Zelle account:",r),{success:!1,error:r.message}}},sD=async t=>{try{const{data:e,error:r}=await V.from("zelle_transaction_history").insert([{zelle_account_id:t.zelle_account_id,transaction_type:t.transaction_type,reference_id:t.reference_id,amount:t.amount,status:"pending",notes:t.notes}]).select().single();if(r)throw r;return await V.rpc("update_zelle_account_usage",{p_account_id:t.zelle_account_id,p_amount:t.amount}),{success:!0,transaction:e}}catch(e){return console.error("Error registering Zelle transaction:",e),{success:!1,error:e.message}}},nD=async()=>{try{const{data:t,error:e}=await V.from("zelle_accounts").select("*").order("priority_order",{ascending:!0}).order("account_name");if(e)throw e;return{success:!0,accounts:t||[]}}catch(t){return console.error("Error fetching Zelle accounts:",t),{success:!1,accounts:[],error:t.message}}},Se={PAYMENT_PENDING:"payment_pending",PAYMENT_PROOF_UPLOADED:"payment_proof_uploaded",PAYMENT_VALIDATED:"payment_validated",PAYMENT_REJECTED:"payment_rejected",PROCESSING:"processing",DELIVERED:"delivered",COMPLETED:"completed",CANCELLED:"cancelled"},Ha={CASH:"cash",TRANSFER:"transfer",CARD:"card"},iD=async()=>{try{const{data:t,error:e}=await V.from("remittance_types").select("*").order("display_order",{ascending:!0});if(e)throw e;return{success:!0,types:t||[]}}catch(t){return console.error("Error fetching remittance types:",t),{success:!1,types:[],error:t.message}}},aD=async()=>{try{const{data:t,error:e}=await V.from("remittance_types").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(e)throw e;return{success:!0,types:t||[]}}catch(t){return console.error("Error fetching active remittance types:",t),{success:!1,types:[],error:t.message}}},oD=async t=>{try{if(!t.name||!t.currency_code||!t.delivery_currency)throw new Error("Nombre y monedas son requeridos");if(!t.exchange_rate||t.exchange_rate<=0)throw new Error("Tasa de cambio debe ser mayor a 0");if(!t.min_amount||t.min_amount<=0)throw new Error("Monto mnimo debe ser mayor a 0");if(t.max_amount&&t.max_amount<t.min_amount)throw new Error("Monto mximo debe ser mayor al mnimo");const{data:e,error:r}=await V.from("remittance_types").insert([t]).select().single();if(r)throw r;return{success:!0,type:e}}catch(e){return console.error("Error creating remittance type:",e),{success:!1,error:e.message}}},nv=async(t,e)=>{try{if(e.exchange_rate&&e.exchange_rate<=0)throw new Error("Tasa de cambio debe ser mayor a 0");if(e.min_amount&&e.min_amount<=0)throw new Error("Monto mnimo debe ser mayor a 0");if(e.max_amount&&e.min_amount&&e.max_amount<e.min_amount)throw new Error("Monto mximo debe ser mayor al mnimo");const{data:r,error:i}=await V.from("remittance_types").update(e).eq("id",t).select().single();if(i)throw i;return{success:!0,type:r}}catch(r){return console.error("Error updating remittance type:",r),{success:!1,error:r.message}}},lD=async t=>{try{const{data:e,error:r}=await V.from("remittances").select("id").eq("remittance_type_id",t).limit(1);if(r)throw r;if(e&&e.length>0)throw new Error("No se puede eliminar. Existen remesas asociadas a este tipo.");const{error:i}=await V.from("remittance_types").delete().eq("id",t);if(i)throw i;return{success:!0}}catch(e){return console.error("Error deleting remittance type:",e),{success:!1,error:e.message}}},Jw=async(t,e)=>{try{const{data:r,error:i}=await V.from("remittance_types").select("*").eq("id",t).eq("is_active",!0).single();if(i)throw i;if(!r)throw new Error("Tipo de remesa no encontrado");if(e<r.min_amount)throw new Error(`Monto mnimo: ${r.min_amount} ${r.currency_code}`);if(r.max_amount&&e>r.max_amount)throw new Error(`Monto mximo: ${r.max_amount} ${r.currency_code}`);const o=e*(r.commission_percentage||0)/100,l=r.commission_fixed||0,c=o+l,u=e*r.exchange_rate-c*r.exchange_rate;return{success:!0,calculation:{amount:e,exchangeRate:r.exchange_rate,commissionPercentage:r.commission_percentage||0,commissionFixed:r.commission_fixed||0,totalCommission:c,amountToDeliver:u,currency:r.currency_code,deliveryCurrency:r.delivery_currency,deliveryMethod:r.delivery_method}}}catch(r){return console.error("Error calculating remittance:",r),{success:!1,error:r.message}}},cD=async t=>{try{const{remittance_type_id:e,amount:r,recipient_name:i,recipient_phone:o,recipient_address:l,recipient_city:c,recipient_id_number:u,notes:m,zelle_account_id:h,recipient_id:p,recipient_bank_account_id:g}=t;if(!e||!r||!i||!o)throw new Error("Datos incompletos. Verifique tipo, monto, nombre y telfono del destinatario.");const{data:y,error:b}=await V.from("remittance_types").select("*").eq("id",e).eq("is_active",!0).single();if(b)throw b;if(!y)throw new Error("Tipo de remesa no vlido o inactivo");if(r<y.min_amount)throw new Error(`Monto mnimo: ${y.min_amount} ${y.currency_code}`);if(y.max_amount&&r>y.max_amount)throw new Error(`Monto mximo: ${y.max_amount} ${y.currency_code}`);const j=await Jw(e,r);if(!j.success)throw new Error(j.error);const{data:{user:C},error:_}=await V.auth.getUser();if(_)throw _;if(!C)throw new Error("Usuario no autenticado");const A=y.commission_percentage||0,k=y.commission_fixed||0,E=r*A/100+k,N=r*y.exchange_rate-E*y.exchange_rate;let R=h;if(!R){const Q=await rD("remittance",r);if(!Q.success)throw new Error("No hay cuentas Zelle disponibles. Por favor intente ms tarde.");R=Q.account.id}const T={user_id:C.id,remittance_type_id:e,amount_sent:r,exchange_rate:y.exchange_rate,commission_percentage:A,commission_fixed:k,commission_total:E,amount_to_deliver:N,currency_sent:y.currency_code,currency_delivered:y.delivery_currency,recipient_name:i,recipient_phone:o,recipient_address:l,recipient_province:c,recipient_id_number:u,delivery_notes:m,status:Se.PAYMENT_PENDING,zelle_account_id:R};p&&(T.recipient_id=p);const{data:M,error:I}=await V.from("remittances").insert([T]).select("*, zelle_accounts(*)").single();if(I)throw I;if(await sD({zelle_account_id:R,transaction_type:"remittance",reference_id:M.id,amount:r,notes:`Remesa ${M.remittance_number}`}),y.delivery_method!=="cash"&&g){const Q=await xD(M.id,g,{amount_transferred:N});Q.success||console.error("Error creating bank transfer record:",Q.error)}return{success:!0,remittance:M}}catch(e){return console.error("Error creating remittance:",e),{success:!1,error:e.message}}},Xw=async(t,e,r,i="")=>{try{if(!e)throw new Error("Archivo de comprobante es requerido");if(!r)throw new Error("Referencia de pago es requerida");const{data:o,error:l}=await V.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(l)throw l;if(!o)throw new Error("Remesa no encontrada");if(o.status!==Se.PAYMENT_PENDING)throw new Error('Solo se puede subir comprobante en estado "Pendiente de Pago"');const{data:{user:c},error:u}=await V.auth.getUser();if(u)throw u;if(o.user_id!==c.id)throw new Error("No tiene permisos para modificar esta remesa");const m=e.name.split(".").pop(),h=`${o.remittance_number}.${m}`,p=`${c.id}/${h}`,{error:g}=await V.storage.from("remittance-proofs").upload(p,e,{upsert:!0});if(g)throw g;const{data:y,error:b}=await V.from("remittances").update({payment_proof_url:p,payment_reference:r,payment_proof_notes:i,payment_proof_uploaded_at:new Date().toISOString(),status:"payment_proof_uploaded",updated_at:new Date().toISOString()}).eq("id",t).select("*, remittance_types(*)").single();if(b)throw b;try{const{data:j}=await V.from("system_settings").select("value").eq("key","whatsapp_admin_phone").single();j?.value&&af(y,j.value,"es")}catch(j){console.error("Error sending WhatsApp notification:",j)}return{success:!0,remittance:y}}catch(o){return console.error("Error uploading payment proof:",o),{success:!1,error:o.message}}},ej=async(t={})=>{try{const{data:{user:e},error:r}=await V.auth.getUser();if(r)throw r;if(!e)throw new Error("Usuario no autenticado");let i=V.from("remittances").select("*, remittance_types(*)").eq("user_id",e.id);t.status&&(i=i.eq("status",t.status)),t.startDate&&(i=i.gte("created_at",t.startDate)),t.endDate&&(i=i.lte("created_at",t.endDate)),i=i.order("created_at",{ascending:!1});const{data:o,error:l}=await i;if(l)throw l;return{success:!0,remittances:o||[]}}catch(e){return console.error("Error fetching my remittances:",e),{success:!1,remittances:[],error:e.message}}},dD=async t=>{try{const{data:e,error:r}=await V.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(r)throw r;if(!e)throw new Error("Remesa no encontrada");const{data:i,error:o}=await V.from("remittance_status_history").select("*").eq("remittance_id",t).order("changed_at",{ascending:!0});return o&&console.error("Error fetching history:",o),{success:!0,remittance:{...e,history:i||[]}}}catch(e){return console.error("Error fetching remittance details:",e),{success:!1,error:e.message}}},uD=async(t,e="")=>{try{const{data:r,error:i}=await V.from("remittances").select("*").eq("id",t).single();if(i)throw i;if(!r)throw new Error("Remesa no encontrada");if([Se.DELIVERED,Se.COMPLETED,Se.CANCELLED].includes(r.status))throw new Error("No se puede cancelar una remesa en este estado");const{data:{user:o},error:l}=await V.auth.getUser();if(l)throw l;if(r.user_id!==o.id)throw new Error("No tiene permisos para cancelar esta remesa");const{data:c,error:u}=await V.from("remittances").update({status:Se.CANCELLED,cancelled_at:new Date().toISOString(),cancellation_reason:e}).eq("id",t).select("*, remittance_types(*)").single();if(u)throw u;return{success:!0,remittance:c}}catch(r){return console.error("Error cancelling remittance:",r),{success:!1,error:r.message}}},mD=async(t={})=>{try{let e=V.from("remittances").select("*, remittance_types(*)");t.status&&(e=e.eq("status",t.status)),t.startDate&&(e=e.gte("created_at",t.startDate)),t.endDate&&(e=e.lte("created_at",t.endDate)),t.search&&(e=e.or(`remittance_number.ilike.%${t.search}%,recipient_name.ilike.%${t.search}%,recipient_phone.ilike.%${t.search}%`));const r=t.orderBy||"created_at",i=t.ascending!==void 0?t.ascending:!1;e=e.order(r,{ascending:i});const{data:o,error:l}=await e;if(l)throw l;return{success:!0,remittances:o||[]}}catch(e){return console.error("Error fetching all remittances:",e),{success:!1,remittances:[],error:e.message}}},fD=async(t,e="")=>{try{const{data:r,error:i}=await V.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(i)throw i;if(!r)throw new Error("Remesa no encontrada");if(r.status!==Se.PAYMENT_PROOF_UPLOADED)throw new Error("Solo se puede validar pago cuando hay comprobante subido");const{data:{user:o},error:l}=await V.auth.getUser();if(l)throw l;const{data:c,error:u}=await V.from("remittances").update({status:Se.PAYMENT_VALIDATED,payment_validated:!0,payment_validated_at:new Date().toISOString(),payment_validated_by:o.id}).eq("id",t).select("*, remittance_types(*)").single();if(u)throw u;return console.log("[validatePayment] Payment validated for remittance:",t,"by:",o.id,"notes:",e),{success:!0,remittance:c}}catch(r){return console.error("Error validating payment:",r),{success:!1,error:r.message}}},hD=async(t,e)=>{try{if(!e)throw new Error("Debe proporcionar una razn para el rechazo");const{data:r,error:i}=await V.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(i)throw i;if(!r)throw new Error("Remesa no encontrada");if(r.status!==Se.PAYMENT_PROOF_UPLOADED)throw new Error("Solo se puede rechazar pago cuando hay comprobante subido");const{data:o,error:l}=await V.from("remittances").update({status:Se.PAYMENT_REJECTED,payment_rejected_at:new Date().toISOString(),payment_rejection_reason:e}).eq("id",t).select("*, remittance_types(*)").single();if(l)throw l;return{success:!0,remittance:o}}catch(r){return console.error("Error rejecting payment:",r),{success:!1,error:r.message}}},pD=async(t,e="")=>{try{const{data:r,error:i}=await V.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(i)throw i;if(!r)throw new Error("Remesa no encontrada");if(r.status!==Se.PAYMENT_VALIDATED)throw new Error("Solo se puede procesar remesa con pago validado");const{data:o,error:l}=await V.from("remittances").update({status:Se.PROCESSING,processing_started_at:new Date().toISOString()}).eq("id",t).select("*, remittance_types(*)").single();if(e&&console.log("[startProcessing] Processing started for remittance:",t,"notes:",e),l)throw l;return{success:!0,remittance:o}}catch(r){return console.error("Error starting processing:",r),{success:!1,error:r.message}}},gD=async(t,e=null,r="")=>{try{const{data:i,error:o}=await V.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(o)throw o;if(!i)throw new Error("Remesa no encontrada");if(i.status!==Se.PROCESSING)throw new Error("Solo se puede confirmar entrega de remesa en procesamiento");let l=null;if(e){const{data:{user:h},error:p}=await V.auth.getUser();if(p)throw p;const g=e.name.split(".").pop(),y=`${i.remittance_number}_delivery.${g}`,b=`${h.id}/delivery/${y}`,{error:j}=await V.storage.from("remittance-proofs").upload(b,e,{upsert:!0});if(j)throw j;l=b}const c={status:Se.DELIVERED,delivered_at:new Date().toISOString(),delivery_notes_admin:r};l&&(c.delivery_proof_url=l);const{data:u,error:m}=await V.from("remittances").update(c).eq("id",t).select("*, remittance_types(*)").single();if(m)throw m;return{success:!0,remittance:u}}catch(i){return console.error("Error confirming delivery:",i),{success:!1,error:i.message}}},yD=async(t,e="")=>{try{const{data:r,error:i}=await V.from("remittances").select("*, remittance_types(*)").eq("id",t).single();if(i)throw i;if(!r)throw new Error("Remesa no encontrada");if(r.status!==Se.DELIVERED)throw new Error("Solo se puede completar remesa ya entregada");const o={status:Se.COMPLETED,completed_at:new Date().toISOString()};e&&(o.delivery_notes_admin=e);const{data:l,error:c}=await V.from("remittances").update(o).eq("id",t).select("*, remittance_types(*)").single();if(c)throw c;return{success:!0,remittance:l}}catch(r){return console.error("Error completing remittance:",r),{success:!1,error:r.message}}},of=t=>{if(!t.payment_validated_at||!t.max_delivery_date)return{level:"info",message:"Pendiente de validacin"};const e=new Date;new Date(t.payment_validated_at);const i=(new Date(t.max_delivery_date)-e)/(1e3*60*60);return[Se.DELIVERED,Se.COMPLETED].includes(t.status)?{level:"success",message:"Entregada"}:i<0?{level:"error",message:"Entrega vencida"}:i<24?{level:"error",message:`Quedan ${Math.round(i)} horas`}:i<48?{level:"warning",message:`Quedan ${Math.round(i/24)} das`}:{level:"info",message:`Quedan ${Math.round(i/24)} das`}},xD=async(t,e,r={})=>{try{const{processedByUserId:i=null,amountTransferred:o=null}=r,{data:l,error:c}=await V.from("remittance_bank_transfers").insert([{remittance_id:t,recipient_bank_account_id:e,status:"pending",processed_by_user_id:i,amount_transferred:o}]).select().single();return c?{success:!1,error:c.message}:{success:!0,data:l}}catch(i){return console.error("Error creating bank transfer:",i),{success:!1,error:i.message}}},tj=async()=>{try{const{data:t,error:e}=await V.from("shipping_zones").select("*").eq("is_active",!0).order("province_name",{ascending:!0});if(e)throw e;return{success:!0,zones:t||[]}}catch(t){return console.error("Error fetching active shipping zones:",t),{success:!1,error:t.message,zones:[]}}},vD=async()=>{try{const{data:t,error:e}=await V.from("shipping_zones").select("*").order("province_name",{ascending:!0});if(e)throw e;return{success:!0,zones:t||[]}}catch(t){return console.error("Error fetching all shipping zones:",t),{success:!1,error:t.message,zones:[]}}},bD=async t=>{try{const{data:e,error:r}=await V.from("shipping_zones").select("*").eq("province_name",t).eq("is_active",!0).single();if(r)throw r;return{success:!0,zone:e}}catch(e){return console.error("Error fetching shipping zone by province:",e),{success:!1,error:e.message}}},wD=async(t,e=0)=>{try{const r=await bD(t);if(!r.success)return{success:!1,error:"Province not found",cost:0,freeShipping:!1};const i=r.zone;return i.free_shipping?{success:!0,cost:0,freeShipping:!0,zone:i}:{success:!0,cost:parseFloat(i.shipping_cost),freeShipping:!1,zone:i}}catch(r){return console.error("Error calculating shipping cost:",r),{success:!1,error:r.message,cost:0,freeShipping:!1}}},jD=async t=>{try{const e={province_name:t.provinceName,shipping_cost:parseFloat(t.shippingCost||0),is_active:t.isActive!==void 0?t.isActive:!0,free_shipping:t.freeShipping||!1},{data:r,error:i}=await V.from("shipping_zones").insert(e).select().single();if(i)throw i;return{success:!0,zone:r}}catch(e){return console.error("Error creating shipping zone:",e),{success:!1,error:e.message}}},_D=async(t,e)=>{try{const r={};e.provinceName!==void 0&&(r.province_name=e.provinceName),e.shippingCost!==void 0&&(r.shipping_cost=parseFloat(e.shippingCost)),e.isActive!==void 0&&(r.is_active=e.isActive),e.freeShipping!==void 0&&(r.free_shipping=e.freeShipping),e.deliveryDays!==void 0&&(r.delivery_days=parseInt(e.deliveryDays)),e.transportCost!==void 0&&(r.transport_cost=parseFloat(e.transportCost)),e.deliveryNote!==void 0&&(r.delivery_note=e.deliveryNote),r.updated_at=new Date().toISOString();const{data:i,error:o}=await V.from("shipping_zones").update(r).eq("id",t).select().single();if(o)throw o;return{success:!0,zone:i}}catch(r){return console.error("Error updating shipping zone:",r),{success:!1,error:r.message}}},rj=[{id:"pinar_del_rio",name:"Pinar del Ro",municipalities:["Consolacin del Sur","Guane","La Palma","Los Palacios","Mantua","Minas de Matahambre","Pinar del Ro","San Juan y Martnez","San Luis","Sandino","Viales"]},{id:"artemisa",name:"Artemisa",municipalities:["Alquzar","Artemisa","Baha Honda","Bauta","Caimito","Candelaria","Guanajay","Gira de Melena","Mariel","San Antonio de los Baos","San Cristbal"]},{id:"la_habana",name:"La Habana",municipalities:["Arroyo Naranjo","Boyeros","Centro Habana","Cerro","Cotorro","Diez de Octubre","Guanabacoa","Habana del Este","Habana Vieja","La Lisa","Marianao","Playa","Plaza de la Revolucin","Regla","San Miguel del Padrn"]},{id:"mayabeque",name:"Mayabeque",municipalities:["Bataban","Bejucal","Gines","Jaruco","Madruga","Melena del Sur","Nueva Paz","Quivicn","San Jos de las Lajas","San Nicols","Santa Cruz del Norte"]},{id:"matanzas",name:"Matanzas",municipalities:["Calimete","Crdenas","Cinaga de Zapata","Coln","Jagey Grande","Jovellanos","Limonar","Los Arabos","Mart","Matanzas","Pedro Betancourt","Perico","Unin de Reyes"]},{id:"cienfuegos",name:"Cienfuegos",municipalities:["Abreus","Aguada de Pasajeros","Cienfuegos","Cruces","Cumanayagua","Palmira","Rodas","Santa Isabel de las Lajas"]},{id:"villa_clara",name:"Villa Clara",municipalities:["Caibarin","Camajuan","Cifuentes","Corralillo","Encrucijada","Manicaragua","Placetas","Quemado de Gines","Ranchuelo","Remedios","Sagua la Grande","Santa Clara","Santo Domingo"]},{id:"sancti_spiritus",name:"Sancti Spritus",municipalities:["Cabaigun","Fomento","Jatibonico","La Sierpe","Sancti Spritus","Taguasco","Trinidad","Yaguajay"]},{id:"ciego_de_avila",name:"Ciego de vila",municipalities:["Baragu","Bolivia","Chambas","Ciego de vila","Ciro Redondo","Florencia","Majagua","Morn","Primero de Enero","Venezuela"]},{id:"camaguey",name:"Camagey",municipalities:["Camagey","Carlos Manuel de Cspedes","Esmeralda","Florida","Guimaro","Jimagay","Minas","Najasa","Nuevitas","Santa Cruz del Sur","Sibanic","Sierra de Cubitas","Vertientes"]},{id:"las_tunas",name:"Las Tunas",municipalities:["Amancio","Colombia","Jess Menndez","Jobabo","Las Tunas","Majibacoa","Manat","Puerto Padre"]},{id:"holguin",name:"Holgun",municipalities:["Antilla","Bguanos","Banes","Cacocum","Calixto Garca","Cueto","Frank Pas","Gibara","Holgun","Mayar","Moa","Rafael Freyre","Sagua de Tnamo","Urbano Noris"]},{id:"granma",name:"Granma",municipalities:["Bartolom Mas","Bayamo","Buey Arriba","Campechuela","Cauto Cristo","Guisa","Jiguan","Manzanillo","Media Luna","Niquero","Piln","Ro Cauto","Yara"]},{id:"santiago_de_cuba",name:"Santiago de Cuba",municipalities:["Contramaestre","Guam","Mella","Palma Soriano","San Luis","Santiago de Cuba","Segundo Frente","Songo-La Maya","Tercer Frente"]},{id:"guantanamo",name:"Guantnamo",municipalities:["Baracoa","Caimanera","El Salvador","Guantnamo","Imas","Mais","Manuel Tames","Niceto Prez","San Antonio del Sur","Yateras"]},{id:"isla_de_la_juventud",name:"Isla de la Juventud",municipalities:["Isla de la Juventud"]}],sj=t=>{const e=rj.find(r=>r.name===t);return e?e.municipalities:[]},ND=()=>rj.map(t=>t.name),nj=async()=>{try{const{data:t,error:e}=await V.from("recipients").select(`
        *,
        addresses:recipient_addresses(*)
      `).order("is_favorite",{ascending:!1}).order("created_at",{ascending:!1});if(e)throw e;return{success:!0,recipients:t||[]}}catch(t){return console.error("Error fetching recipients:",t),{success:!1,recipients:[],error:t.message}}},ij=async t=>{try{const{data:{user:e},error:r}=await V.auth.getUser();if(r)throw r;if(!e)throw new Error("Usuario no autenticado");const{data:i,error:o}=await V.from("recipients").insert([{user_id:e.id,...t}]).select().single();if(o)throw o;return{success:!0,recipient:i}}catch(e){return console.error("Error creating recipient:",e),{success:!1,error:e.message}}},iv=async(t,e)=>{try{const{data:r,error:i}=await V.from("recipients").update(e).eq("id",t).select().single();if(i)throw i;return{success:!0,recipient:r}}catch(r){return console.error("Error updating recipient:",r),{success:!1,error:r.message}}},CD=async t=>{try{const{error:e}=await V.from("recipients").delete().eq("id",t);if(e)throw e;return{success:!0}}catch(e){return console.error("Error deleting recipient:",e),{success:!1,error:e.message}}},lf=async t=>{try{t.is_default&&await V.from("recipient_addresses").update({is_default:!1}).eq("recipient_id",t.recipient_id);const{data:e,error:r}=await V.from("recipient_addresses").insert([t]).select().single();if(r)throw r;return{success:!0,address:e}}catch(e){return console.error("Error adding address:",e),{success:!1,error:e.message}}},SD=async(t,e)=>{try{if(e.is_default){const{data:o}=await V.from("recipient_addresses").select("recipient_id").eq("id",t).single();o&&await V.from("recipient_addresses").update({is_default:!1}).eq("recipient_id",o.recipient_id)}const{data:r,error:i}=await V.from("recipient_addresses").update(e).eq("id",t).select().single();if(i)throw i;return{success:!0,address:r}}catch(r){return console.error("Error updating address:",r),{success:!1,error:r.message}}},ED=async()=>{try{const{data:t,error:e}=await V.from("cuban_municipalities").select("province").eq("delivery_available",!0);if(e)throw e;return{success:!0,provinces:[...new Set(t.map(i=>i.province))].sort()}}catch(t){return console.error("Error fetching provinces:",t),{success:!1,provinces:[],error:t.message}}},kD=async t=>{try{const{data:e,error:r}=await V.from("cuban_municipalities").select("*").eq("province",t).eq("delivery_available",!0).order("municipality");if(r)throw r;return{success:!0,municipalities:e||[]}}catch(e){return console.error("Error fetching municipalities:",e),{success:!1,municipalities:[],error:e.message}}},PD=async(t,e)=>{try{const{bankId:r,accountTypeId:i,currencyId:o,accountNumber:l,accountHolderName:c}=e;if(!t||!r||!o||!l||!c)return{success:!1,error:"Missing required fields"};let u=o,m=i;if(typeof o=="string"&&o.length<=4){console.log(` Converting currency code '${o}' to UUID...`);const{getCurrencyByCode:A}=await dn(async()=>{const{getCurrencyByCode:E}=await Promise.resolve().then(()=>av);return{getCurrencyByCode:E}},void 0),k=await A(o);if(!k.success)return{success:!1,error:`Currency '${o}' not found: ${k.error}`};u=k.data.id,console.log(` Currency UUID: ${u}`)}if(!i){console.log(` Auto-detecting account type for currency: ${o}...`);const{getDefaultAccountTypeForCurrency:A}=await dn(async()=>{const{getDefaultAccountTypeForCurrency:E}=await Promise.resolve().then(()=>av);return{getDefaultAccountTypeForCurrency:E}},void 0),k=await A(o);if(!k.success)return{success:!1,error:`No account type found for currency '${o}': ${k.error}`};m=k.data.id,console.log(` Auto-selected account type: ${k.data.name} (${m})`)}if(!m)return{success:!1,error:"Account type could not be determined"};const p=new TextEncoder().encode(l+t),g=await crypto.subtle.digest("SHA-256",p),b=Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join(""),j=l.slice(-4),{data:C,error:_}=await V.from("bank_accounts").insert([{user_id:t,bank_id:r,account_type_id:m,currency_id:u,account_number_last4:j,account_number_hash:b,account_holder_name:c,is_active:!0}]).select().single();return _?{success:!1,error:_.message}:{success:!0,data:C}}catch(r){return console.error("Error creating bank account:",r),{success:!1,error:r.message}}},TD=async(t,e,r=!1)=>{try{r&&await V.from("recipient_bank_accounts").update({is_default:!1}).eq("recipient_id",t);const{data:i,error:o}=await V.from("recipient_bank_accounts").insert([{recipient_id:t,bank_account_id:e,is_default:r,is_active:!0}]).select().single();return o?{success:!1,error:o.message}:{success:!0,data:i}}catch(i){return console.error("Error linking bank account to recipient:",i),{success:!1,error:i.message}}},AD=async t=>{try{const{data:e,error:r}=await V.from("recipient_bank_accounts").select(`
        id,
        is_default,
        created_at,
        bank_account:bank_accounts!bank_account_id(
          id,
          account_number_last4,
          account_holder_name,
          is_active,
          bank:banks!bank_id(name, swift_code, logo_filename),
          account_type:account_types!account_type_id(name),
          currency:currencies!currency_id(code, name_es, name_en)
        )
      `).eq("recipient_id",t).eq("is_active",!0);return r?{success:!1,error:r.message}:{success:!0,data:e}}catch(e){return console.error("Error fetching recipient bank accounts:",e),{success:!1,error:e.message}}},RD=({shippingZones:t=[],selectedProvince:e="",selectedMunicipality:r="",municipalities:i=[],onProvinceChange:o,onMunicipalityChange:l,showLabel:c=!0})=>{const{language:u}=ct();return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[c&&s.jsxs("label",{className:"block text-sm font-medium mb-2",children:[u==="es"?"Provincia":"Province"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:e,onChange:m=>o(m.target.value),className:"input-style w-full",required:!0,children:[s.jsx("option",{value:"",children:u==="es"?"Seleccione una provincia":"Select a province"}),t.map(m=>s.jsxs("option",{value:m.province_name,children:[m.province_name,m.free_shipping||parseFloat(m.shipping_cost)===0?` - ${u==="es"?"Envo Gratis":"Free Shipping"}`:` - $${parseFloat(m.shipping_cost).toFixed(2)}`]},m.id))]})]}),e&&s.jsxs("div",{children:[c&&s.jsxs("label",{className:"block text-sm font-medium mb-2",children:[u==="es"?"Municipio":"Municipality"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:r,onChange:m=>l(m.target.value),className:"input-style w-full",required:!0,children:[s.jsx("option",{value:"",children:u==="es"?"Seleccione un municipio":"Select a municipality"}),i.map(m=>s.jsx("option",{value:m,children:m},m))]})]})]})},aj=async()=>{try{const{data:t,error:e}=await V.from("banks").select("*").order("name",{ascending:!0});return e?{success:!1,error:e.message}:{success:!0,data:t}}catch(t){return console.error("Error fetching banks:",t),{success:!1,error:t.message}}},oj=async()=>{try{const{data:t,error:e}=await V.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});return e?{success:!1,error:e.message}:{success:!0,data:t}}catch(t){return console.error("Error fetching currencies:",t),{success:!1,error:t.message}}},OD=async t=>{try{const{data:e,error:r}=await V.from("currencies").select("id, code, name_es, name_en").eq("code",t).eq("is_active",!0).single();return r?{success:!1,error:r.message}:{success:!0,data:e}}catch(e){return console.error("Error fetching currency by code:",e),{success:!1,error:e.message}}},DD=async t=>{try{const{data:e,error:r}=await V.from("account_types").select("id, name, description, metadata").order("name",{ascending:!0});if(r)return console.error("Error loading account types:",r),{success:!1,error:r.message};const i=e.filter(l=>l.metadata?.currency===t);if(i.length===0)return{success:!1,error:`No account type found for currency: ${t}. Please configure one in account_types table with metadata.currency = '${t}'`};const o=i[0];return console.log(` Auto-selected account type '${o.name}' for currency ${t}`),{success:!0,data:o}}catch(e){return console.error("Error fetching default account type:",e),{success:!1,error:e.message}}},av=Object.freeze(Object.defineProperty({__proto__:null,getAllBanks:aj,getAllCurrencies:oj,getCurrencyByCode:OD,getDefaultAccountTypeForCurrency:DD},Symbol.toStringTag,{value:"Module"})),MD=({userId:t,onSuccess:e,onCancel:r,selectedRemittanceType:i=null})=>{const{language:o}=ct(),[l,c]=w.useState(!1),[u,m]=w.useState(!0),[h,p]=w.useState([]),[g,y]=w.useState([]),b=i?.delivery_currency||"USD",[j,C]=w.useState({bankId:"",currencyId:b,accountNumber:"",accountHolderName:""}),[_,A]=w.useState({});w.useEffect(()=>{k()},[]);const k=async()=>{m(!0);try{console.log(" Cargando bancos y monedas...");const[R,T]=await Promise.all([aj(),oj()]);console.log(" Resultado de bancos:",R),console.log(" Resultado de monedas:",T),R.success?(console.log(" Bancos cargados:",R.data?.length||0),p(R.data||[])):(console.error(" Error al cargar bancos:",R.error),Y({title:"Error",description:o==="es"?`No se pudieron cargar los bancos: ${R.error}`:`Failed to load banks: ${R.error}`,variant:"destructive"})),T.success?(console.log(" Monedas cargadas:",T.data?.length||0),y(T.data||[])):console.error(" Error al cargar monedas:",T.error)}catch(R){console.error(" Error inesperado loading bank data:",R),Y({title:"Error",description:o==="es"?"No se pudo cargar la informacin bancaria":"Failed to load bank information",variant:"destructive"})}finally{m(!1)}},E=()=>{const R={};return j.bankId||(R.bankId=o==="es"?"Selecciona un banco":"Select a bank"),(!j.accountNumber||j.accountNumber.length<8)&&(R.accountNumber=o==="es"?"Nmero de cuenta invlido (mnimo 8 dgitos)":"Invalid account number (minimum 8 digits)"),(!j.accountHolderName||j.accountHolderName.trim().length===0)&&(R.accountHolderName=o==="es"?"Ingresa nombre del titular":"Enter account holder name"),A(R),Object.keys(R).length===0},N=async R=>{if(R.preventDefault(),!!E()){c(!0);try{const T=await PD(t,{bankId:j.bankId,accountTypeId:null,currencyId:j.currencyId,accountNumber:j.accountNumber.replace(/\s/g,""),accountHolderName:j.accountHolderName.trim()});if(!T.success)throw new Error(T.error);Y({title:o==="es"?"xito":"Success",description:o==="es"?"Cuenta bancaria creada exitosamente":"Bank account created successfully",variant:"default"}),e&&e(T.data)}catch(T){console.error("Error creating bank account:",T),Y({title:"Error",description:T.message||(o==="es"?"Error al crear la cuenta bancaria":"Failed to create bank account"),variant:"destructive"})}finally{c(!1)}}};return u?s.jsx("div",{className:"p-6 space-y-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx(pc,{className:"w-5 h-5 animate-spin text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:o==="es"?"Cargando informacin...":"Loading information..."})]})}):s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold mb-2",children:[o==="es"?"Banco":"Bank"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ak,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),s.jsxs("select",{value:j.bankId,onChange:R=>C({...j,bankId:R.target.value}),className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg transition-colors input-style ${_.bankId?"border-red-500 bg-red-50":"border-gray-200"}`,children:[s.jsx("option",{value:"",children:o==="es"?"Selecciona un banco...":"Select a bank..."}),h.map(R=>s.jsxs("option",{value:R.id,children:[R.name," ",R.local_code?`(${R.local_code})`:""]},R.id))]})]}),_.bankId&&s.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center gap-1",children:[s.jsx(Qt,{className:"w-4 h-4"}),_.bankId]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold mb-2",children:[o==="es"?"Moneda":"Currency"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(St,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),s.jsx("select",{value:j.currencyId,onChange:R=>C({...j,currencyId:R.target.value}),className:"w-full pl-10 pr-4 py-2 border-2 border-gray-200 rounded-lg input-style",disabled:i!==null,children:i?s.jsxs("option",{value:b,children:[b," - ",g.find(R=>R.code===b)?.[o==="es"?"name_es":"name_en"]||b]}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:o==="es"?"Selecciona una moneda...":"Select a currency..."}),g.map(R=>s.jsxs("option",{value:R.code,children:[R.code," - ",o==="es"?R.name_es:R.name_en]},R.id))]})})]}),i&&s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:o==="es"?`Moneda predeterminada por tipo de remesa: ${b}`:`Currency preset by remittance type: ${b}`})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold mb-2",children:[o==="es"?"Nmero de Cuenta":"Account Number"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:j.accountNumber,onChange:R=>C({...j,accountNumber:R.target.value}),placeholder:o==="es"?"Ingresa nmero de cuenta":"Enter account number",className:`w-full px-4 py-2 border-2 rounded-lg transition-colors input-style ${_.accountNumber?"border-red-500 bg-red-50":"border-gray-200"}`}),_.accountNumber&&s.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center gap-1",children:[s.jsx(Qt,{className:"w-4 h-4"}),_.accountNumber]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o==="es"?" Solo se guardan los ltimos 4 dgitos":" Only last 4 digits are stored"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold mb-2",children:[o==="es"?"Nombre del Titular":"Account Holder Name"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:j.accountHolderName,onChange:R=>C({...j,accountHolderName:R.target.value}),placeholder:o==="es"?"Nombre completo del titular":"Full name of account holder",className:`w-full px-4 py-2 border-2 rounded-lg transition-colors input-style ${_.accountHolderName?"border-red-500 bg-red-50":"border-gray-200"}`}),_.accountHolderName&&s.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center gap-1",children:[s.jsx(Qt,{className:"w-4 h-4"}),_.accountHolderName]})]}),s.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsx("p",{className:"text-xs text-blue-800",children:o==="es"?" Los nmeros de cuenta se almacenan encriptados de forma segura":" Account numbers are stored securely and encrypted"})}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[s.jsx("button",{type:"submit",disabled:l,className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:l?s.jsxs(s.Fragment,{children:[s.jsx(pc,{className:"w-4 h-4 animate-spin"}),o==="es"?"Guardando...":"Saving..."]}):o==="es"?"Crear Cuenta":"Create Account"}),s.jsx("button",{type:"button",onClick:r,className:"flex-1 bg-gray-300 text-gray-800 py-2 rounded-lg hover:bg-gray-400 transition-colors font-medium",children:o==="es"?"Cancelar":"Cancel"})]})]})},lj=({recipientId:t,onSelect:e,showCreateButton:r=!0,selectedRemittanceType:i=null})=>{const{language:o,t:l}=ct(),{user:c}=Et(),[u,m]=w.useState([]),[h,p]=w.useState(null),[g,y]=w.useState(!0),[b,j]=w.useState(!1),[C,_]=w.useState(!1);w.useEffect(()=>{t&&A()},[t]);const A=async()=>{y(!0);try{const N=await AD(t);if(N.success){m(N.data||[]);const R=N.data?.find(T=>T.is_default);R&&(p(R),e&&e(R))}}catch(N){console.error("Error loading bank accounts:",N),Y({title:"Error",description:o==="es"?"No se pudieron cargar las cuentas":"Failed to load accounts",variant:"destructive"})}finally{y(!1)}},k=N=>{p(N),e&&e(N)},E=async N=>{_(!0);try{const R=await TD(t,N.id,u.length===0);if(!R.success)throw new Error(R.error);const T={...R.data,bank_account:N};m([...u,T]),k(T),Y({title:o==="es"?"xito":"Success",description:o==="es"?"Cuenta vinculada al destinatario":"Account linked to recipient",variant:"default"}),j(!1)}catch(R){console.error("Error linking account:",R),Y({title:"Error",description:R.message||(o==="es"?"Error al vincular la cuenta":"Failed to link account"),variant:"destructive"})}finally{_(!1)}};return g?s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg flex items-center gap-3",children:[s.jsx(pc,{className:"w-5 h-5 animate-spin text-blue-600"}),s.jsx("p",{className:"text-sm text-gray-600",children:o==="es"?"Cargando cuentas...":"Loading accounts..."})]}):s.jsxs("div",{className:"space-y-4",children:[u.length>0?s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold mb-3",children:[o==="es"?"Cuentas Bancarias Disponibles":"Available Bank Accounts"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"space-y-2",children:u.map(N=>{const R=N.bank_account?.bank?.logo_filename?`/bank-logos/${N.bank_account.bank.logo_filename}`:null,T=N.bank_account?.currency?.code||"";return s.jsx(oe.button,{type:"button",onClick:()=>k(N),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${h?.id===N.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,whileHover:{scale:1.01},whileTap:{scale:.99},children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:R?s.jsx("img",{src:R,alt:N.bank_account?.bank?.name,className:"w-12 h-12 object-contain rounded",onError:M=>{M.target.style.display="none"}}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded flex items-center justify-center",children:s.jsx(Uf,{className:"w-6 h-6 text-white"})})}),s.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-semibold text-gray-900 truncate",children:N.bank_account?.bank?.name}),T&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold bg-gray-100 text-gray-700 rounded",children:T})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[N.bank_account?.account_type?.name,"  ****",N.bank_account?.account_number_last4]}),s.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[o==="es"?"Titular:":"Holder:"," ",N.bank_account?.account_holder_name]})]}),s.jsx("div",{className:"flex-shrink-0 flex flex-col items-end gap-1",children:N.is_default&&s.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full whitespace-nowrap",children:o==="es"?"Por defecto":"Default"})})]})},N.id)})})]}):s.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border-2 border-yellow-200 flex items-start gap-3",children:[s.jsx(Qt,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-yellow-800",children:o==="es"?"Sin Cuentas Bancarias":"No Bank Accounts"}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:o==="es"?"Este destinatario no tiene cuentas bancarias vinculadas. Crea una nueva.":"This recipient has no linked bank accounts. Create a new one."})]})]}),r&&!b&&s.jsxs(oe.button,{type:"button",onClick:()=>j(!0),className:"w-full flex items-center justify-center gap-2 p-3 border-2 border-dashed border-blue-300 rounded-lg text-blue-600 hover:bg-blue-50 transition-colors font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsx(Rr,{className:"w-5 h-5"}),o==="es"?"Agregar Nueva Cuenta Bancaria":"Add New Bank Account"]}),s.jsx(Zt,{children:b&&s.jsxs(oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 bg-blue-50 rounded-lg border-2 border-blue-200 relative",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:o==="es"?"Crear Nueva Cuenta Bancaria":"Create New Bank Account"}),s.jsx(MD,{userId:c?.id,onSuccess:E,onCancel:()=>j(!1),selectedRemittanceType:i}),C&&s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-lg flex items-center justify-center z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx(pc,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:l("bankAccounts.linkingToRecipient")})]})})]})}),h&&s.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:s.jsx("p",{className:"text-sm text-green-800",children:o==="es"?" Cuenta seleccionada: "+h.bank_account?.bank?.name:" Selected account: "+h.bank_account?.bank?.name})})]})},ID=({formData:t={},onChange:e,shippingZones:r=[],municipalities:i=[],onProvinceChange:o,onMunicipalityChange:l,submitLabel:c="Guardar",onSubmit:u,onCancel:m,deliveryMethod:h="cash",recipientId:p=null,fields:g={fullName:!0,phone:!0,email:!0,idNumber:!1,province:!1,municipality:!1,address:!1,notes:!1}})=>{const{language:y}=ct(),{user:b}=Et(),[j,C]=w.useState(null),_=(A,k)=>{e({...t,[A]:k})};return s.jsxs("div",{className:"space-y-4",children:[g.fullName&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:[y==="es"?"Nombre Completo":"Full Name"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:t.full_name||"",onChange:A=>_("full_name",A.target.value),className:"input-style w-full",placeholder:y==="es"?"Juan Prez":"John Doe",required:!0})]}),g.phone&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:[y==="es"?"Telfono":"Phone"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",value:t.phone||"",onChange:A=>_("phone",A.target.value),className:"input-style w-full",placeholder:"+53 5555 5555",required:!0})]}),g.email&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Email"," (",y==="es"?"opcional":"optional",")"]}),s.jsx("input",{type:"email",value:t.email||"",onChange:A=>_("email",A.target.value),className:"input-style w-full",placeholder:"john@example.com"})]}),g.idNumber&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:[y==="es"?"Cdula/Identificacin":"ID Number"," (",y==="es"?"opcional":"optional",")"]}),s.jsx("input",{type:"text",value:t.id_number||"",onChange:A=>_("id_number",A.target.value),className:"input-style w-full",placeholder:"12345678901"})]}),h!=="cash"?s.jsx("div",{className:"border-t pt-4",children:s.jsx(lj,{recipientId:p,onSelect:A=>{C(A),e({...t,bank_account_id:A.bank_account_id})},showCreateButton:!0})}):(g.province||g.municipality)&&s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-3",children:y==="es"?"Informacin de Entrega":"Delivery Information"}),s.jsx(RD,{shippingZones:r,selectedProvince:t.province||"",selectedMunicipality:t.municipality||"",municipalities:i,onProvinceChange:o,onMunicipalityChange:l,showLabel:!0})]}),g.address&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:[y==="es"?"Direccin":"Address"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:t.address_line_1||"",onChange:A=>_("address_line_1",A.target.value),className:"input-style w-full",placeholder:y==="es"?"Calle 23, entre L y M":"Street address",required:!0}),t.address_line_2&&s.jsx("input",{type:"text",value:t.address_line_2,onChange:A=>_("address_line_2",A.target.value),className:"input-style w-full mt-2",placeholder:y==="es"?"Apartamento, suite, etc (opcional)":"Apartment, suite, etc (optional)"})]}),g.notes&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:[y==="es"?"Notas":"Notes"," (",y==="es"?"opcional":"optional",")"]}),s.jsx("textarea",{value:t.notes||"",onChange:A=>_("notes",A.target.value),className:"input-style w-full",rows:"3",placeholder:y==="es"?"Informacin adicional...":"Additional information..."})]}),(u||m)&&s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[u&&s.jsx("button",{onClick:u,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:c}),m&&s.jsx("button",{onClick:m,className:"flex-1 bg-gray-300 text-gray-800 py-2 rounded-lg hover:bg-gray-400 transition-colors font-medium",children:y==="es"?"Cancelar":"Cancel"})]})]})},ih=nt.forwardRef(({onSelect:t,shippingZones:e=[],showAddressSelection:r=!1,showProvinceInForm:i=!1,deliveryMethod:o="cash",selectedRecipientData:l=null,selectedRemittanceType:c=null},u)=>{const{t:m,language:h}=ct(),[p,g]=w.useState([]),[y,b]=w.useState(null),[j,C]=w.useState(null),[_,A]=w.useState(!1),[k,E]=w.useState(!0),[N,R]=w.useState([]),[T,M]=w.useState(!1),[I,Q]=w.useState(null),[H,be]=w.useState({full_name:"",phone:"",email:"",id_number:"",province:"",municipality:"",address_line_1:"",address_line_2:"",notes:""});w.useEffect(()=>{z()},[]),w.useEffect(()=>{u.current={loadRecipients:z,resetForm:de}},[u]);const z=async()=>{E(!0);const $=await nj();$.success?g($.recipients||[]):Y({title:m("common.error"),description:$.error,variant:"destructive"}),E(!1)},de=()=>{A(!1),be({full_name:"",phone:"",email:"",id_number:"",province:"",municipality:"",address_line_1:"",address_line_2:"",notes:""}),R([])},ee=$=>{if(b($),C(null),$.addresses&&$.addresses.length>0){const ne=$.addresses.find(ae=>ae.is_default)||$.addresses[0];C(ne),t({recipientId:$.id,addressId:ne.id,isNew:!1,recipientData:$})}},ce=$=>{C($),t({recipientId:y.id,addressId:$.id,isNew:!1,recipientData:y})},se=$=>{if(be({...H,province:$,municipality:""}),$){const ne=sj($)||[];R(ne)}else R([])},ue=async()=>{if(!H.full_name||!H.phone){Y({title:m("common.error"),description:h==="es"?"Nombre y telfono requeridos":"Name and phone required",variant:"destructive"});return}if(i&&(!H.province||!H.municipality||!H.address_line_1)){Y({title:m("common.error"),description:h==="es"?"Completa provincia, municipio y direccin":"Complete province, municipality and address",variant:"destructive"});return}M(!0);try{const $=await ij({full_name:H.full_name,phone:H.phone,email:H.email||"",id_number:H.id_number||""});if(!$.success)throw new Error($.error);const ne=$.recipient.id;if(i&&H.province){const P=await lf({recipient_id:ne,address_line_1:H.address_line_1,address_line_2:H.address_line_2||"",province:H.province,municipality:H.municipality,is_default:!0});if(!P.success)throw new Error(P.error);Y({title:m("common.success"),description:h==="es"?"Destinatario creado":"Recipient created"})}await z();const ae={...$.recipient,addresses:i?[{id:$.address?.id,address_line_1:H.address_line_1,address_line_2:H.address_line_2,province:H.province,municipality:H.municipality,is_default:!0}]:[]};ee(ae),de()}catch($){Y({title:m("common.error"),description:$.message||(h==="es"?"Error al crear destinatario":"Error creating recipient"),variant:"destructive"})}finally{M(!1)}};return k?s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-sm",children:m("common.loading")})}):s.jsxs("div",{className:"space-y-4",children:[p.length>0&&!_&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-3",children:h==="es"?"Selecciona un Destinatario":"Select a Recipient"}),s.jsx("div",{className:"space-y-2",children:p.map($=>s.jsxs(oe.button,{onClick:()=>ee($),className:`w-full text-left p-3 rounded-lg border-2 transition-all ${y?.id===$.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,whileHover:{scale:1.01},whileTap:{scale:.99},children:[s.jsx("p",{className:"font-medium",children:$.full_name}),s.jsx("p",{className:"text-xs text-gray-500",children:$.phone})]},$.id))})]}),y&&y.addresses?.length>1&&r&&o==="cash"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-3",children:h==="es"?"Selecciona Direccin":"Select Address"}),s.jsx("div",{className:"space-y-2",children:y.addresses.map($=>s.jsx(oe.button,{onClick:()=>ce($),className:`w-full text-left p-3 rounded-lg border-2 transition-all ${j?.id===$.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,whileHover:{scale:1.01},children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Dk,{className:"w-4 h-4 mt-0.5 text-gray-600"}),s.jsxs("div",{className:"flex-1 text-sm",children:[s.jsx("p",{className:"font-medium",children:$.address_line_1}),s.jsxs("p",{className:"text-xs text-gray-600",children:[$.municipality,", ",$.province]})]})]})},$.id))})]}),y&&o!=="cash"&&s.jsx("div",{className:"border-t pt-4",children:s.jsx(lj,{recipientId:y.id,onSelect:$=>{Q($.bank_account_id),t({recipientId:y.id,addressId:j?.id,isNew:!1,recipientData:y,bank_account_id:$.bank_account_id})},showCreateButton:!0,selectedRemittanceType:c})}),s.jsxs("button",{onClick:()=>A(!_),className:"w-full flex items-center justify-center gap-2 p-3 border-2 border-dashed border-blue-300 rounded-lg text-blue-600 hover:bg-blue-50 transition-colors",children:[s.jsx(Rr,{className:"w-5 h-5"}),h==="es"?"Crear Nuevo Destinatario":"Create New Recipient"]}),s.jsx(Zt,{children:_&&s.jsx(oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 bg-blue-50 rounded-lg border-2 border-blue-200",children:s.jsx(ID,{formData:H,onChange:be,shippingZones:e,municipalities:N,onProvinceChange:se,onMunicipalityChange:$=>be({...H,municipality:$}),submitLabel:h==="es"?"Guardar Destinatario":"Save Recipient",onSubmit:ue,onCancel:de,deliveryMethod:o,recipientId:l?.recipientId||null,fields:{fullName:!0,phone:!0,email:!0,idNumber:!1,province:i&&o==="cash",municipality:i&&o==="cash",address:i&&o==="cash",notes:!1}})})})]})});ih.displayName="RecipientSelector";const cj=({onSelect:t})=>{const{t:e}=ct(),[r,i]=w.useState([]),[o,l]=w.useState(null),[c,u]=w.useState(!0);w.useEffect(()=>{m()},[]);const m=async()=>{u(!0);const p=await nD();p.success?(i(p.accounts||[]),p.accounts?.length===1&&(l(p.accounts[0]),t(p.accounts[0]))):Y({title:e("common.error"),description:p.error||"Error al cargar cuentas Zelle",variant:"destructive"}),u(!1)},h=p=>{l(p),t(p)};return c?s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"}),s.jsx("p",{className:"text-sm text-gray-600",children:e("common.loading")})]}):r.length===0?s.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border-2 border-yellow-200 flex items-start gap-3",children:[s.jsx(Qt,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-yellow-800",children:e("zelle.noAccounts")}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Contacta a administracin para configurar cuentas Zelle"})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:[e("zelle.selectAccount")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"space-y-2",children:r.map(p=>s.jsx(oe.button,{onClick:()=>h(p),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${o?.id===p.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,whileHover:{scale:1.01},whileTap:{scale:.99},children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-5 h-5 rounded-full border-2 mt-0.5 flex items-center justify-center flex-shrink-0 ${o?.id===p.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:o?.id===p.id&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Uf,{className:"w-4 h-4 text-blue-600"}),s.jsx("p",{className:"font-semibold text-gray-900",children:p.account_name})]}),s.jsx("p",{className:"text-sm text-gray-600",children:p.email}),p.priority_order&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Prioridad: #",p.priority_order]})]})]})}),p.is_active&&s.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Activa"})]})},p.id))}),o&&s.jsx(oe.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"p-3 bg-green-50 border-l-4 border-green-500 rounded text-sm",children:s.jsxs("p",{className:"text-green-800",children:[" Pagars a travs de: ",s.jsx("span",{className:"font-semibold",children:o.account_name})]})})]})},dj=({label:t,accept:e="image/*,.pdf",onChange:r,value:i,preview:o,previewPosition:l="above",onPreviewClick:c,required:u=!1,selectedFileLabel:m="Archivo seleccionado",viewFullSizeLabel:h="Ver en Grande",previewLabel:p="Vista Previa"})=>{const g=i?.type?.startsWith("image/");i?.type;const y=()=>s.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden bg-white",children:g?s.jsx("img",{src:o,alt:"Preview",className:"w-full h-auto object-contain max-h-96"}):s.jsx("div",{className:"flex items-center justify-center h-96 bg-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Vn,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-sm text-gray-600",children:"PDF File"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i?.name})]})})}),b=()=>g&&c&&s.jsxs("button",{type:"button",onClick:c,className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-600 rounded transition-colors",title:"Ver en grande",children:[s.jsx(Yk,{className:"h-3 w-3"}),h]}),j=o&&s.jsxs("div",{className:"p-4 border-2 border-blue-300 rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600",children:p}),s.jsx(b,{})]}),s.jsx("button",{type:"button",onClick:c,className:`w-full ${g?"cursor-pointer hover:border-blue-400 transition-colors":""}`,children:s.jsx(y,{})})]}),C=()=>{switch(l){case"right":return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsx(_,{})}),o&&s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"p-4 border-2 border-blue-300 rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600",children:p}),s.jsx(b,{})]}),s.jsx("button",{type:"button",onClick:c,className:`w-full ${g?"cursor-pointer hover:border-blue-400 transition-colors":""}`,children:s.jsx(y,{})})]})})]});case"left":return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[o&&s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"p-4 border-2 border-blue-300 rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600",children:p}),s.jsx(b,{})]}),s.jsx("button",{type:"button",onClick:c,className:`w-full ${g?"cursor-pointer hover:border-blue-400 transition-colors":""}`,children:s.jsx(y,{})})]})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(_,{})})]});case"down":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(_,{}),o&&s.jsxs("div",{className:"p-4 border-2 border-blue-300 rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600",children:p}),s.jsx(b,{})]}),s.jsx("button",{type:"button",onClick:c,className:`w-full ${g?"cursor-pointer hover:border-blue-400 transition-colors":""}`,children:s.jsx(y,{})})]})]});default:return s.jsxs("div",{className:"space-y-4",children:[o&&s.jsx(oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:j}),s.jsx(_,{})]})}};function _(){return s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"file",accept:e,onChange:r,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i&&s.jsxs("p",{className:"text-xs text-gray-500",children:[" ",m,": ",i.name]}),u&&!i&&s.jsxs("p",{className:"text-xs text-red-500 font-medium",children:[m," es obligatorio"]})]})}return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t," ",u&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Zt,{mode:"wait",children:C()})]})},LD=({onNavigate:t})=>{const{t:e}=ct(),{user:r,isAdmin:i,isSuperAdmin:o}=Et(),{showModal:l}=Eo(),{notificationSettings:c}=Xt(),u=w.useRef(),[m,h]=w.useState(1),[p,g]=w.useState([]),[y,b]=w.useState(!0),[j,C]=w.useState(!1),[_,A]=w.useState(!1),[k,E]=w.useState(null),[N,R]=w.useState(""),[T,M]=w.useState(null),[I,Q]=w.useState(null),[H,be]=w.useState(null),[z,de]=w.useState([]),[ee,ce]=w.useState([]),[se,ue]=w.useState(null),[$,ne]=w.useState({name:"",phone:"",address:"",city:"",id_number:"",notes:""}),[ae,P]=w.useState({file:null,reference:"",notes:""}),[F,te]=w.useState(null),[me,ye]=w.useState(null);w.useEffect(()=>{xe(),_e()},[]),w.useEffect(()=>{(i||o)&&l({type:"info",title:e("common.accessDenied"),message:e("remittances.admin.adminCannotSendRemittance"),confirmText:e("common.ok")}).then(()=>{t("dashboard")})},[i,o]);const _e=async()=>{try{const B=await tj();if(B.success){const G=(B.zones||[]).filter(le=>{const Pe=parseFloat(le.shipping_cost||0);return le.free_shipping===!0||Pe>0});de(G)}}catch(B){console.error("Error loading shipping zones:",B)}},xe=async()=>{b(!0);const B=await aD();B.success?g(B.types):Y({title:e("common.error"),description:B.error,variant:"destructive"}),b(!1)},Ne=B=>{E(B),R(""),M(null)},De=async()=>{if(!k||!N){Y({title:e("common.error"),description:e("remittances.wizard.selectTypeAndAmount"),variant:"destructive"});return}C(!0);const B=await Jw(k.id,parseFloat(N));B.success?(M(B.calculation),h(2)):Y({title:e("common.error"),description:B.error,variant:"destructive"}),C(!1)},Fe=()=>{if(!I){Y({title:e("common.error"),description:e("remittances.wizard.selectRecipient")||"Selecciona un destinatario",variant:"destructive"});return}if(!$.name||!$.phone){Y({title:e("common.error"),description:e("remittances.wizard.fillRecipientInfo"),variant:"destructive"});return}if(!H){Y({title:e("common.error"),description:e("zelle.selectAccountRequired")||"Selecciona una cuenta Zelle",variant:"destructive"});return}if((k?.delivery_method||"cash")!=="cash"&&!se){Y({title:e("common.error"),description:e("remittances.wizard.selectBankAccountRequired")||"Debes seleccionar una cuenta bancaria para este tipo de remesa",variant:"destructive"});return}h(3)},ie=async()=>{A(!0);const B={remittance_type_id:k.id,amount:parseFloat(N),recipient_name:$.name,recipient_phone:$.phone,recipient_address:$.address,recipient_city:$.city,recipient_id_number:$.id_number,notes:$.notes,zelle_account_id:H?.id,recipient_id:I?.recipientId};k?.delivery_method!=="cash"&&se&&(B.recipient_bank_account_id=se);const G=await cD(B);G.success?(ye(G.remittance),Y({title:e("common.success"),description:e("remittances.wizard.remittanceCreatedSuccess")}),k?.delivery_method==="cash"?setTimeout(()=>{t&&t("myRemittances")},1500):h(4)):Y({title:e("common.error"),description:G.error,variant:"destructive"}),A(!1)},je=(B,G)=>{navigator.clipboard.writeText(B).then(()=>{Y({title:e("common.success"),description:`${G} copiado al portapapeles`,variant:"default"})}).catch(()=>{Y({title:e("common.error"),description:"Error al copiar al portapapeles",variant:"destructive"})})},W=()=>{if(!c?.whatsapp){Y({title:e("common.error"),description:"Nmero de WhatsApp del administrador no configurado",variant:"destructive"});return}try{const B={...me,remittance_types:k,remittance_type:k,amount:parseFloat(N),currency:T?.currency||"USD",amount_to_deliver:T?.amountToDeliver,delivery_currency:T?.deliveryCurrency,payment_reference:ae.reference||"(Pendiente)"};af(B,c.whatsapp,e("common.language")==="en"?"en":"es"),Y({title:e("common.success"),description:"WhatsApp abierto. Enva el mensaje al administrador."})}catch(B){console.error("Error opening WhatsApp:",B),Y({title:e("common.error"),description:"Error al abrir WhatsApp",variant:"destructive"})}},O=async B=>{if(B.preventDefault(),!ae.file||!ae.reference){Y({title:e("common.error"),description:e("remittances.wizard.uploadProofAndReference"),variant:"destructive"});return}A(!0);const G=await Xw(me.id,ae.file,ae.reference,ae.notes);if(G.success){if(Y({title:e("common.success"),description:e("remittances.wizard.proofSentSuccess")}),c?.whatsapp)try{const le={...me,remittance_types:k,remittance_type:k,amount:parseFloat(N),currency:T?.currency||"USD",amount_to_deliver:T?.amountToDeliver,delivery_currency:T?.deliveryCurrency,payment_reference:ae.reference};af(le,c.whatsapp,e("common.language")==="en"?"en":"es")}catch(le){console.error("Error sending WhatsApp notification:",le)}setTimeout(()=>{t&&t("myRemittances")},2e3)}else Y({title:e("common.error"),description:G.error,variant:"destructive"});A(!1)},he=()=>s.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(B=>s.jsxs(nt.Fragment,{children:[s.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all ${m>=B?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-400"}`,children:m>B?s.jsx(oo,{className:"h-5 w-5"}):s.jsx("span",{className:"font-semibold",children:B})}),B<4&&s.jsx("div",{className:`h-0.5 w-16 transition-all ${m>B?"bg-blue-600":"bg-gray-300"}`})]},B))});return y?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[s.jsx("h1",{className:`${Xe()} text-3xl mb-2 text-center`,children:e("remittances.wizard.pageTitle")}),s.jsx("p",{className:"text-gray-600 text-center mb-8",children:e("remittances.wizard.pageSubtitle")}),he(),s.jsxs(Zt,{mode:"wait",children:[m===1&&s.jsxs(oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[s.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[s.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[s.jsx(St,{className:"h-6 w-6 text-blue-600"}),e("remittances.wizard.step1Title")]}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("remittances.wizard.selectTypeRequired")}),p.map(B=>s.jsx("div",{onClick:()=>Ne(B),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${k?.id===B.id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg",children:B.name}),B.description&&s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:B.description}),s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[e("remittances.wizard.rate"),": "]}),s.jsxs("span",{className:"font-semibold",children:["1 ",B.currency_code," = ",B.exchange_rate," ",B.delivery_currency]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-gray-500",children:e("remittances.wizard.limits")}),s.jsxs("p",{className:"text-sm font-semibold",children:[B.min_amount," - ",B.max_amount||""]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:B.currency_code})]})]})},B.id))]}),k&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e("remittances.wizard.amountToSend")," (",k.currency_code,") *"]}),s.jsxs("div",{className:"relative",children:[s.jsx(St,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",step:"0.01",value:N,onChange:B=>R(B.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg",placeholder:`Ej: ${k.min_amount}`})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[e("remittances.wizard.minAmount"),": ",k.min_amount," ",k.currency_code,k.max_amount&&`  ${e("remittances.wizard.maxAmount")}: ${k.max_amount} ${k.currency_code}`]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:De,disabled:!k||!N||j,className:`${Qe()} flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:[e(j?"remittances.wizard.calculating":"remittances.wizard.continue"),s.jsx(cn,{className:"h-5 w-5"})]})})]},"step1"),m===2&&T&&s.jsxs(oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[s.jsxs("div",{className:"glass-effect p-6 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50",children:[s.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[s.jsx(Rk,{className:"h-5 w-5 text-blue-600"}),e("remittances.wizard.calculationSummary")]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:e("remittances.wizard.youSend")}),s.jsxs("p",{className:"text-2xl font-bold",children:[T.amount," ",T.currency]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:e("remittances.wizard.commission")}),s.jsxs("p",{className:"text-xl font-semibold text-red-600",children:["-",T.totalCommission.toFixed(2)," ",T.currency]})]}),s.jsxs("div",{className:"col-span-2 pt-4 border-t-2 border-blue-200",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("remittances.wizard.recipientReceives")}),s.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[T.amountToDeliver.toFixed(2)," ",T.deliveryCurrency]})]})]})]}),s.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[s.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[s.jsx(St,{className:"h-6 w-6 text-blue-600"}),e("zelle.selectAccount")]}),s.jsx(cj,{onSelect:B=>{be(B)}})]}),s.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[s.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[s.jsx(eo,{className:"h-6 w-6 text-blue-600"}),e("remittances.wizard.step2Title")]}),s.jsx(ih,{ref:u,onSelect:B=>{Q(B),B.bank_account_id&&ue(B.bank_account_id),B.recipientData?ne({name:B.recipientData.full_name||"",phone:B.recipientData.phone||"",address:B.recipientData.addresses?.[0]?.address_line_1||"",city:B.recipientData.addresses?.[0]?.municipality||"",id_number:B.recipientData.id_number||"",notes:""}):B.formData&&ne({name:B.formData.full_name||"",phone:B.formData.phone||"",address:B.formData.address_line_1||"",city:B.formData.municipality||"",id_number:"",notes:""})},shippingZones:z,municipalities:ee,showAddressSelection:k?.delivery_method==="cash",showProvinceInForm:k?.delivery_method==="cash",deliveryMethod:k?.delivery_method||"cash",selectedRecipientData:I,selectedRemittanceType:k})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("button",{onClick:()=>h(1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[s.jsx(fc,{className:"h-5 w-5"}),e("remittances.wizard.back")]}),s.jsxs("button",{onClick:Fe,className:`${Qe()} flex items-center gap-2`,children:[e("remittances.wizard.continue"),s.jsx(cn,{className:"h-5 w-5"})]})]})]},"step2"),m===3&&s.jsxs(oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[s.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[s.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[s.jsx(Vn,{className:"h-6 w-6 text-blue-600"}),e("remittances.wizard.step3Title")]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:[e("common.type")," ",e("nav.remittances")]}),s.jsx("p",{className:"text-gray-700",children:k.name})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:e("remittances.wizard.youSend")}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[T.amount," ",T.currency]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:e("remittances.wizard.recipientReceives")}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[T.amountToDeliver.toFixed(2)," ",T.deliveryCurrency]})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsx("h3",{className:"font-semibold mb-2",children:e("remittances.wizard.step2Title")}),s.jsxs("div",{className:"space-y-1 text-gray-700",children:[s.jsxs("p",{children:[s.jsxs("span",{className:"font-medium",children:[e("common.name"),":"]})," ",$.name]}),s.jsxs("p",{children:[s.jsxs("span",{className:"font-medium",children:[e("common.phone"),":"]})," ",$.phone]}),$.city&&s.jsxs("p",{children:[s.jsxs("span",{className:"font-medium",children:[e("common.city"),":"]})," ",$.city]}),$.address&&s.jsxs("p",{children:[s.jsxs("span",{className:"font-medium",children:[e("common.address"),":"]})," ",$.address]})]})]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("button",{onClick:()=>h(2),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[s.jsx(fc,{className:"h-5 w-5"}),e("remittances.wizard.back")]}),s.jsxs("button",{onClick:ie,disabled:_,className:`${Qe()} flex items-center gap-2 disabled:opacity-50`,children:[e(_?"remittances.wizard.creating":"remittances.wizard.confirmAndCreate"),s.jsx(qt,{className:"h-5 w-5"})]})]})]},"step3"),m===4&&me&&s.jsxs(oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[s.jsxs("div",{className:"glass-effect p-6 rounded-xl text-center",children:[s.jsx(qt,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:e("remittances.wizard.remittanceCreated")}),s.jsxs("p",{className:"text-gray-600 mb-4",children:[e("remittances.wizard.remittanceNumber"),": ",s.jsx("span",{className:"font-bold",children:me.remittance_number})]})]}),H&&s.jsxs("div",{className:"glass-effect p-6 rounded-xl border-2 border-blue-200 bg-blue-50",children:[s.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-blue-900",children:[s.jsx(Uf,{className:"h-5 w-5"}),e("remittances.wizard.zelleAccountInfo")]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:e("remittances.wizard.accountName")}),s.jsx("p",{className:"font-semibold text-gray-800",children:H.account_name}),H.phone_number&&s.jsx("p",{className:"text-sm text-gray-700 font-medium mt-1",children:H.phone_number})]}),s.jsx("button",{type:"button",onClick:()=>je(H.account_name,"Nombre de cuenta"),className:"p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",title:"Copiar nombre de cuenta",children:s.jsx(rn,{className:"h-4 w-4 text-blue-600"})})]}),s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:e("remittances.wizard.zelleEmail")}),s.jsx("p",{className:"font-semibold text-gray-800",children:H.email||H.zelle_email})]}),s.jsx("button",{type:"button",onClick:()=>je(H.email||H.zelle_email,"Email Zelle"),className:"p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",title:"Copiar email Zelle",children:s.jsx(rn,{className:"h-4 w-4 text-blue-600"})})]}),(H.phone_number||H.phone||H.telefono)&&s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:e("common.phone")}),s.jsx("p",{className:"font-semibold text-gray-800",children:H.phone_number||H.phone||H.telefono})]}),s.jsx("button",{type:"button",onClick:()=>je(H.phone_number||H.phone||H.telefono,"Telfono"),className:"p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",title:"Copiar telfono",children:s.jsx(rn,{className:"h-4 w-4 text-blue-600"})})]})]})]}),s.jsxs("div",{className:"glass-effect p-6 rounded-xl border-2 border-green-200 bg-green-50",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-green-900",children:e("remittances.wizard.transferDescription")}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-green-300",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:e("remittances.wizard.remittanceIdForTransfer")}),s.jsx("p",{className:"text-xl font-mono font-bold text-gray-900",children:me.id}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e("remittances.wizard.useThisInTransfer")})]}),s.jsx("button",{type:"button",onClick:()=>je(me.id,"ID de remesa"),className:"p-3 bg-green-100 hover:bg-green-200 rounded-lg transition-colors flex-shrink-0",title:"Copiar ID de remesa",children:s.jsx(rn,{className:"h-5 w-5 text-green-600"})})]}),s.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-green-300",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Monto a Transferir"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[T?.amount," ",T?.currency||"USD"]}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Cantidad que debes enviar al nmero Zelle"})]}),s.jsx("button",{type:"button",onClick:()=>je(`${T?.amount}`,"Monto"),className:"p-3 bg-green-100 hover:bg-green-200 rounded-lg transition-colors flex-shrink-0",title:"Copiar monto",children:s.jsx(rn,{className:"h-5 w-5 text-green-600"})})]})]})]}),s.jsx(oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`glass-effect p-6 rounded-xl border-2 ${c?.whatsapp?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50"}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(is,{className:`h-6 w-6 ${c?.whatsapp?"text-green-600":"text-yellow-600"}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:`text-lg font-bold mb-2 ${c?.whatsapp?"text-green-900":"text-yellow-900"}`,children:[" ",e("remittances.wizard.whatsappNotification")||"Notificacin por WhatsApp"]}),c?.whatsapp?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-green-800 mb-4",children:e("remittances.wizard.whatsappInfo")||"Cuando enves el comprobante de pago, se notificar automticamente al administrador a travs de WhatsApp con todos los detalles de tu remesa."}),s.jsxs("button",{type:"button",onClick:W,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-medium",title:"Notificar al administrador ahora por WhatsApp",children:[s.jsx(is,{className:"h-4 w-4"}),e("remittances.wizard.notifyAdmin")||"Notificar Administrador Ahora"]})]}):s.jsx("p",{className:"text-sm text-yellow-800",children:" Nmero de WhatsApp del administrador no configurado. Contacta con soporte para activar esta funcin y recibir notificaciones instantneas cuando enves comprobantes de pago."})]})]})}),s.jsxs("form",{onSubmit:O,className:"glass-effect p-6 rounded-xl",children:[s.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[s.jsx(gc,{className:"h-6 w-6 text-blue-600"}),e("remittances.wizard.step4Title")]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(dj,{label:e("remittances.user.paymentProof")||"Comprobante de pago",accept:"image/*,.pdf",value:ae.file,preview:F,previewPosition:"above",onChange:B=>{const G=B.target.files[0];if(P({...ae,file:G}),G){const le=new FileReader;le.onloadend=()=>{te(le.result)},le.readAsDataURL(G)}else te(null)},required:!0}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e("remittances.user.paymentReference")," *"]}),s.jsx("input",{type:"text",value:ae.reference,onChange:B=>P({...ae,reference:B.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: ZELLE123456",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("remittances.user.additionalNotes")}),s.jsx("textarea",{value:ae.notes,onChange:B=>P({...ae,notes:B.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Detalles adicionales del pago..."})]})]}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Qt,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsxs("p",{className:"font-semibold mb-1",children:[e("remittances.wizard.importantNote"),":"]}),s.jsx("p",{children:e("remittances.wizard.proofNote")})]})]})}),c?.whatsapp&&s.jsx("div",{className:"p-4 bg-green-50 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(is,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-green-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:" Notificacin WhatsApp:"}),s.jsx("p",{children:"Cuando enves el comprobante, se notificar automticamente al administrador va WhatsApp con tu nmero de remesa, monto y detalles del comprobante."})]})]})})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>{t&&t("myRemittances")},className:"flex-1 px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:e("remittances.wizard.uploadLater")}),s.jsx("button",{type:"submit",disabled:_,className:`flex-1 ${Qe()} disabled:opacity-50`,children:e(_?"remittances.wizard.sending":"remittances.wizard.sendProof")})]})]})]},"step4")]})]})},$D=({onNavigate:t})=>{const{t:e}=ct(),{user:r}=Et(),{showModal:i}=Eo(),[o,l]=w.useState([]),[c,u]=w.useState(!0),[m,h]=w.useState(null),[p,g]=w.useState(!1),[y,b]=w.useState({file:null,reference:"",notes:""});w.useEffect(()=>{j()},[]);const j=async()=>{u(!0);const T=await ej({});T.success?l(T.remittances):Y({title:e("common.error"),description:T.error,variant:"destructive"}),u(!1)},C=async T=>{const M=await dD(T.id);M.success?h(M.remittance):Y({title:e("common.error"),description:M.error,variant:"destructive"})},_=T=>{h(T),g(!0),b({file:null,reference:"",notes:""})},A=async T=>{if(T.preventDefault(),!y.file||!y.reference){Y({title:e("common.error"),description:e("remittances.admin.requiredFields"),variant:"destructive"});return}const M=await Xw(m.id,y.file,y.reference,y.notes);M.success?(Y({title:e("common.success"),description:e("remittances.user.proofUploaded")}),g(!1),j()):Y({title:e("common.error"),description:M.error,variant:"destructive"})},k=async T=>{const M=await i({title:"Cancelar Remesa",message:`Est seguro que desea cancelar la remesa ${T.remittance_number}?`,input:!0,inputLabel:"Razn (opcional)",inputPlaceholder:"Motivo de la cancelacin...",confirmText:"Cancelar Remesa",cancelText:e("common.back"),type:"danger"});if(M===!1)return;const I=await uD(T.id,M||"");I.success?(Y({title:e("common.success"),description:e("remittances.user.remittanceCancelled")}),j()):Y({title:e("common.error"),description:I.error,variant:"destructive"})},E=T=>({[Se.PAYMENT_PENDING]:Gr,[Se.PAYMENT_PROOF_UPLOADED]:gc,[Se.PAYMENT_VALIDATED]:qt,[Se.PAYMENT_REJECTED]:Hr,[Se.PROCESSING]:vr,[Se.DELIVERED]:uo,[Se.COMPLETED]:qt,[Se.CANCELLED]:Hr})[T]||Gr,N=T=>({[Se.PAYMENT_PENDING]:"text-gray-600",[Se.PAYMENT_PROOF_UPLOADED]:"text-yellow-600",[Se.PAYMENT_VALIDATED]:"text-blue-600",[Se.PAYMENT_REJECTED]:"text-red-600",[Se.PROCESSING]:"text-purple-600",[Se.DELIVERED]:"text-green-600",[Se.COMPLETED]:"text-emerald-600",[Se.CANCELLED]:"text-gray-500"})[T]||"text-gray-600",R=T=>({[Se.PAYMENT_PENDING]:e("remittances.status.paymentPending"),[Se.PAYMENT_PROOF_UPLOADED]:e("remittances.status.paymentProofUploaded"),[Se.PAYMENT_VALIDATED]:e("remittances.status.paymentValidated"),[Se.PAYMENT_REJECTED]:e("remittances.status.paymentRejected"),[Se.PROCESSING]:e("remittances.status.processing"),[Se.DELIVERED]:e("remittances.status.delivered"),[Se.COMPLETED]:e("remittances.status.completed"),[Se.CANCELLED]:e("remittances.status.cancelled")})[T]||T;return c?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:`${Xe()} text-3xl mb-2`,children:"Mis Remesas"}),s.jsx("p",{className:"text-gray-600",children:"Consulte el estado de sus envos de dinero"})]}),s.jsxs("button",{onClick:()=>t&&t("sendRemittance"),className:`${Qe()} flex items-center gap-2`,children:[s.jsx(St,{className:"h-5 w-5"}),"Nueva Remesa"]})]}),o.length===0?s.jsxs("div",{className:"text-center py-12 glass-effect rounded-xl",children:[s.jsx(St,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No tiene remesas registradas"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Enve su primera remesa de forma rpida y segura"}),s.jsxs("button",{onClick:()=>t&&t("sendRemittance"),className:`${Qe()} inline-flex items-center gap-2`,children:[s.jsx(St,{className:"h-5 w-5"}),"Enviar Remesa"]})]}):s.jsx("div",{className:"space-y-4",children:o.map(T=>{const M=E(T.status),I=of(T);return s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold gradient-text",children:T.remittance_number}),s.jsx("p",{className:"text-sm text-gray-600",children:T.remittance_types?.name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(M,{className:`h-5 w-5 ${N(T.status)}`}),s.jsx("span",{className:"text-sm font-medium",children:R(T.status)})]})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Enviado"}),s.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[T.amount," ",T.currency]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"A Entregar"}),s.jsxs("p",{className:"text-lg font-bold text-green-600",children:[T.amount_to_deliver?.toFixed(2)," ",T.delivery_currency]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Destinatario"}),s.jsx("p",{className:"font-semibold",children:T.recipient_name})]})]}),[Se.PAYMENT_VALIDATED,Se.PROCESSING].includes(T.status)&&s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:`p-3 rounded-lg ${I.level==="error"?"bg-red-50 border border-red-200":I.level==="warning"?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gr,{className:`h-4 w-4 ${I.level==="error"?"text-red-600":I.level==="warning"?"text-yellow-600":"text-blue-600"}`}),s.jsx("span",{className:`text-sm font-medium ${I.level==="error"?"text-red-800":I.level==="warning"?"text-yellow-800":"text-blue-800"}`,children:I.message})]})})}),T.status===Se.PAYMENT_REJECTED&&T.payment_rejection_reason&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Qt,{className:"h-4 w-4 text-red-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-red-800 mb-1",children:"Razn del rechazo:"}),s.jsx("p",{className:"text-sm text-red-700",children:T.payment_rejection_reason})]})]})}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[s.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(hc,{className:"h-4 w-4"}),new Date(T.created_at).toLocaleDateString("es-CU")]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>C(T),className:"flex items-center gap-1 px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[s.jsx(Ss,{className:"h-4 w-4"}),"Ver Detalles"]}),T.status===Se.PAYMENT_PENDING&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>_(T),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[s.jsx(gc,{className:"h-4 w-4"}),"Subir Comprobante"]}),s.jsxs("button",{onClick:()=>k(T),className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[s.jsx(Hr,{className:"h-4 w-4"}),"Cancelar"]})]}),T.status===Se.PAYMENT_REJECTED&&s.jsxs("button",{onClick:()=>_(T),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[s.jsx(ls,{className:"h-4 w-4"}),"Reenviar Comprobante"]})]})]})]},T.id)})}),p&&m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>g(!1),children:s.jsxs(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl p-6 max-w-md w-full",onClick:T=>T.stopPropagation(),children:[s.jsx("h2",{className:"text-2xl font-bold gradient-text mb-4",children:"Subir Comprobante de Pago"}),s.jsxs("form",{onSubmit:A,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remesa"}),s.jsx("p",{className:"font-semibold",children:m.remittance_number}),s.jsxs("p",{className:"text-sm text-gray-600",children:[m.amount," ",m.currency]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comprobante de pago *"}),s.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:T=>b({...y,file:T.target.files[0]}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia de pago *"}),s.jsx("input",{type:"text",value:y.reference,onChange:T=>b({...y,reference:T.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: ZELLE123456",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas adicionales"}),s.jsx("textarea",{value:y.notes,onChange:T=>b({...y,notes:T.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Detalles adicionales..."})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:e("common.cancel")}),s.jsx("button",{type:"submit",className:`flex-1 ${Qe()}`,children:"Enviar"})]})]})]})}),m&&!p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>h(null),children:s.jsxs(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl p-6 max-w-5xl w-full max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[s.jsx("h2",{className:"text-2xl font-bold gradient-text mb-6",children:"Detalles de Remesa"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Nmero"}),s.jsx("p",{className:"font-semibold",children:m.remittance_number})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Estado"}),s.jsx("p",{className:"font-semibold",children:R(m.status)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Tipo"}),s.jsx("p",{className:"font-semibold",children:m.remittance_types?.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Mtodo de Entrega"}),s.jsx("p",{className:"font-semibold capitalize",children:m.delivery_method})]})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("h3",{className:"font-bold mb-3 flex items-center gap-2",children:[s.jsx(eo,{className:"w-4 h-4"}),"Destinatario"]}),s.jsxs("div",{className:"space-y-2 bg-gray-50 p-4 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-600",children:"Nombre:"})," ",s.jsx("span",{className:"font-medium",children:m.recipient_name})]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-600",children:"Telfono:"})," ",s.jsx("span",{className:"font-medium",children:m.recipient_phone})]}),m.recipient_city&&s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-600",children:"Ciudad:"})," ",s.jsx("span",{className:"font-medium",children:m.recipient_city})]}),m.recipient_address&&s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-600",children:"Direccin:"})," ",s.jsx("span",{className:"font-medium",children:m.recipient_address})]})]})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("h3",{className:"font-bold mb-3 flex items-center gap-2",children:[s.jsx(St,{className:"w-4 h-4"}),"Montos"]}),s.jsxs("div",{className:"space-y-2 bg-gray-50 p-4 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-600",children:"Monto enviado:"})," ",s.jsxs("span",{className:"font-medium",children:["$",m.amount]})]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-600",children:"Monto a entregar:"})," ",s.jsxs("span",{className:"font-bold text-green-600",children:["$",m.delivery_amount," ",m.delivery_currency]})]})]})]})]}),s.jsx("div",{className:"space-y-4",children:m.payment_proof_url?s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold mb-3 flex items-center gap-2",children:[s.jsx(Vn,{className:"w-4 h-4"}),"Comprobante de Pago"]}),s.jsxs("div",{className:"border-2 border-gray-200 rounded-lg overflow-hidden bg-gray-50",children:[s.jsx("img",{src:m.payment_proof_url,alt:"Comprobante de pago",className:"w-full h-auto max-h-[500px] object-contain",onError:T=>{T.target.style.display="none",T.target.nextSibling.style.display="flex"}}),s.jsxs("div",{className:"hidden flex-col items-center justify-center p-8 text-gray-500",children:[s.jsx(Vn,{className:"w-16 h-16 mb-4"}),s.jsx("p",{className:"text-sm text-center",children:"No se pudo cargar la imagen"}),s.jsx("a",{href:m.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"mt-4 text-blue-600 hover:underline text-sm",children:"Abrir en nueva pestaa"})]})]}),m.payment_reference&&s.jsxs("div",{className:"mt-3 bg-blue-50 p-3 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Referencia:"}),s.jsx("p",{className:"font-semibold text-blue-900",children:m.payment_reference})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center p-12 bg-yellow-50 border-2 border-yellow-200 border-dashed rounded-lg",children:[s.jsx(Qt,{className:"w-12 h-12 text-yellow-600 mb-4"}),s.jsx("p",{className:"text-sm font-medium text-yellow-800 text-center",children:"Comprobante de pago pendiente"}),s.jsx("p",{className:"text-xs text-yellow-700 text-center mt-2",children:"El comprobante an no ha sido enviado"})]})})]}),s.jsx("div",{className:"mt-6 pt-6 border-t",children:s.jsx("button",{onClick:()=>h(null),className:"w-full py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cerrar"})})]})})]})},FD=({onNavigate:t})=>{const{t:e}=ct(),{showModal:r}=Eo(),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,m]=w.useState(!1),[h,p]=w.useState(null),[g,y]=w.useState([]),[b,j]=w.useState([]),[C,_]=w.useState({full_name:"",phone:"",id_number:"",email:"",notes:"",is_favorite:!1}),[A,k]=w.useState({province:"",municipality:"",address_line_1:"",address_line_2:"",postal_code:"",reference_point:"",is_default:!1});w.useEffect(()=>{E(),N()},[]);const E=async()=>{c(!0);const z=await nj();z.success&&o(z.recipients),c(!1)},N=async()=>{const z=await ED();z.success&&y(z.provinces)},R=async z=>{const de=await kD(z);de.success&&j(de.municipalities)},T=z=>{k({...A,province:z,municipality:""}),R(z)},M=(z=null)=>{if(z){if(p(z),_({full_name:z.full_name,phone:z.phone,id_number:z.id_number||"",email:z.email||"",notes:z.notes||"",is_favorite:z.is_favorite||!1}),z.addresses?.[0]){const de=z.addresses[0];k({province:de.province,municipality:de.municipality||"",address_line_1:de.address_line_1,address_line_2:de.address_line_2||"",postal_code:de.postal_code||"",reference_point:de.reference_point||"",is_default:de.is_default||!1}),de.province&&R(de.province)}}else p(null),_({full_name:"",phone:"",id_number:"",email:"",notes:"",is_favorite:!1}),k({province:"",municipality:"",address_line_1:"",address_line_2:"",postal_code:"",reference_point:"",is_default:!0});m(!0)},I=()=>{m(!1),p(null)},Q=async z=>{if(z.preventDefault(),!C.full_name||!C.phone){Y({title:e("common.error"),description:e("recipients.fillNameAndPhone"),variant:"destructive"});return}let de;h?(de=await iv(h.id,C),de.success&&A.province&&A.address_line_1&&(h.addresses?.[0]?await SD(h.addresses[0].id,A):await lf({recipient_id:h.id,...A}))):(de=await ij(C),de.success&&A.province&&A.address_line_1&&await lf({recipient_id:de.recipient.id,...A})),de.success?(Y({title:e("common.success"),description:e(h?"recipients.recipientUpdated":"recipients.recipientCreated")}),I(),E()):Y({title:e("common.error"),description:de.error,variant:"destructive"})},H=async z=>{if(!await r({type:"confirm",title:e("recipients.deleteRecipientConfirm"),message:`${e("recipients.deleteRecipientMessage")} "${z.full_name}"?`,confirmText:e("common.delete"),cancelText:e("common.cancel")}))return;const ee=await CD(z.id);ee.success?(Y({title:e("common.success"),description:e("recipients.recipientDeleted")}),E()):Y({title:e("common.error"),description:ee.error,variant:"destructive"})},be=async z=>{(await iv(z.id,{is_favorite:!z.is_favorite})).success&&E()};return l?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 space-y-6",children:[t&&s.jsxs("button",{onClick:()=>t("user-panel"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[s.jsx(fc,{className:"h-5 w-5"}),s.jsx("span",{children:e("recipients.backToPanel")})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:`${Xe()} text-2xl mb-1`,children:[s.jsx(eo,{className:"inline h-6 w-6 mr-2"}),e("recipients.myRecipients")]}),s.jsx("p",{className:"text-gray-600 text-sm",children:e("recipients.manageRecipients")})]}),s.jsxs("button",{onClick:()=>M(),className:`${Qe()} flex items-center gap-2`,children:[s.jsx(Rr,{className:"h-5 w-5"}),e("recipients.newRecipientButton")]})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.length===0?s.jsxs("div",{className:"col-span-full glass-effect p-8 rounded-xl text-center",children:[s.jsx(eo,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-2",children:e("recipients.noRecipientsSaved")}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:e("recipients.addRecipientsFaster")}),s.jsx("button",{onClick:()=>M(),className:"text-blue-600 hover:underline",children:e("recipients.createFirstRecipient")})]}):i.map(z=>{const de=z.addresses?.find(ee=>ee.is_default)||z.addresses?.[0];return s.jsxs(oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"glass-effect p-4 rounded-xl border-2 border-gray-200 hover:border-blue-400 transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[z.full_name,z.is_favorite&&s.jsx(an,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"})]})}),s.jsx("button",{onClick:()=>be(z),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:s.jsx(an,{className:`h-5 w-5 ${z.is_favorite?"text-yellow-500 fill-yellow-500":"text-gray-400"}`})})]}),s.jsxs("div",{className:"space-y-2 mb-3 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(Bk,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{children:z.phone})]}),z.email&&s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(Eb,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:z.email})]}),de&&s.jsxs("div",{className:"flex items-start gap-2 text-gray-700",children:[s.jsx(Fm,{className:"h-3 w-3 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-xs",children:[s.jsxs("p",{className:"font-medium",children:[de.municipality,", ",de.province]}),s.jsx("p",{className:"text-gray-600",children:de.address_line_1})]})]})]}),z.addresses&&z.addresses.length>0&&s.jsx("div",{className:"mb-3",children:s.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:[z.addresses.length," ",z.addresses.length===1?e("recipients.addressCountSingular"):e("recipients.addressCountPlural")]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:()=>M(z),className:"text-xs px-3 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors flex items-center justify-center gap-1",children:[s.jsx(Bi,{className:"h-3 w-3"}),e("recipients.editAction")]}),s.jsxs("button",{onClick:()=>H(z),className:"text-xs px-3 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors flex items-center justify-center gap-1",children:[s.jsx(zn,{className:"h-3 w-3"}),e("recipients.deleteAction")]})]})]},z.id)})}),s.jsx(Zt,{children:u&&s.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:I,children:s.jsxs(oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-effect p-6 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:z=>z.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold",children:e(h?"recipients.editRecipientTitle":"recipients.newRecipientButton")}),s.jsx("button",{onClick:I,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Jt,{className:"h-5 w-5"})})]}),s.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[s.jsx(eo,{className:"h-5 w-5"}),e("recipients.personalInfo")]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("recipients.fullNameLabel")}),s.jsx("input",{type:"text",value:C.full_name,onChange:z=>_({...C,full_name:z.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("recipients.phoneLabel")}),s.jsx("input",{type:"tel",value:C.phone,onChange:z=>_({...C,phone:z.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("recipients.idNumberLabel")}),s.jsx("input",{type:"text",value:C.id_number,onChange:z=>_({...C,id_number:z.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:C.email,onChange:z=>_({...C,email:z.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[s.jsx(Fm,{className:"h-5 w-5"}),e("recipients.deliveryAddress")]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("recipients.provinceLabel")}),s.jsxs("select",{value:A.province,onChange:z=>T(z.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:e("recipients.selectProvinceOpt")}),g.map(z=>s.jsx("option",{value:z,children:z},z))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("recipients.municipalityLabel")}),s.jsxs("select",{value:A.municipality,onChange:z=>k({...A,municipality:z.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!A.province,children:[s.jsx("option",{value:"",children:e("recipients.selectMunicipalityOpt")}),b.map(z=>s.jsx("option",{value:z.municipality,children:z.municipality},z.id))]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("recipients.addressLine1Label")}),s.jsx("input",{type:"text",value:A.address_line_1,onChange:z=>k({...A,address_line_1:z.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:e("recipients.addressPlaceholder")})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("recipients.referencePointLabel")}),s.jsx("input",{type:"text",value:A.reference_point,onChange:z=>k({...A,reference_point:z.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:e("recipients.referencePlaceholder")})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("recipients.notesLabel")}),s.jsx("textarea",{value:C.notes,onChange:z=>_({...C,notes:z.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:C.is_favorite,onChange:z=>_({...C,is_favorite:z.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),s.jsxs("span",{className:"text-sm text-gray-700 flex items-center gap-1",children:[s.jsx(an,{className:"h-4 w-4"}),e("recipients.markAsFavorite")]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:I,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:e("common.cancel")}),s.jsxs("button",{type:"submit",className:`flex-1 ${Qe()} flex items-center justify-center gap-2`,children:[s.jsx(ns,{className:"h-5 w-5"}),e(h?"recipients.updateButton":"common.save")]})]})]})]})})})]})},uj=(t,e,r="es")=>e===Yt.VALIDATED?r==="es"?"Validado":"Validated":e===Yt.REJECTED?r==="es"?"Rechazado":"Rejected":e===Yt.PENDING?r==="es"?"Pendiente":"Pending":t===ft.PROCESSING?r==="es"?"En proceso":"Processing":t===ft.COMPLETED?r==="es"?"Completado":"Completed":r==="es"?"Pendiente":"Pending",UD=(t,e)=>e===Yt.VALIDATED||t===ft.COMPLETED?s.jsx(qt,{className:"h-4 w-4"}):e===Yt.REJECTED||t===ft.CANCELLED?s.jsx(Hr,{className:"h-4 w-4"}):s.jsx(Gr,{className:"h-4 w-4"}),BD=()=>{const{t}=ct(),{user:e}=Et(),[r,i]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null),[m,h]=w.useState(null),[p,g]=w.useState(null),[y,b]=w.useState({searchQuery:"",combined_status:"",order_type:"",startDate:"",endDate:"",userId:"",productId:""}),[j,C]=w.useState(!1),[_,A]=w.useState(null),[k,E]=w.useState(!1),[N,R]=w.useState(!1),[T,M]=w.useState(null),[I,Q]=w.useState(null),[H,be]=w.useState({show:!1,title:"",message:"",onConfirm:null}),[z,de]=w.useState({show:!1,title:"",message:"",defaultValue:"",onConfirm:null}),[ee,ce]=w.useState(null);w.useEffect(()=>{se()},[]);const se=async()=>{l(!0),u(null);try{const G={};if(y.combined_status)switch(y.combined_status){case"payment_pending":G.payment_status=Yt.PENDING;break;case"payment_validated":G.payment_status=Yt.VALIDATED,G.status=ft.PENDING;break;case"processing":G.status=ft.PROCESSING;break;case"shipped":G.status=ft.SHIPPED;break;case"delivered":G.status=ft.DELIVERED;break;case"completed":G.status=ft.COMPLETED;break;case"cancelled":G.status=ft.CANCELLED;break;case"rejected":G.payment_status=Yt.REJECTED;break}y.order_type&&(G.order_type=y.order_type);const le=await Gw(G);le.success?i(le.orders||[]):u(le.error||"Error loading orders")}catch(G){console.error("Error loading orders:",G),u("Error loading orders")}finally{l(!1)}},ue=w.useMemo(()=>{let G=[...r];if(y.searchQuery){const le=y.searchQuery.toLowerCase();G=G.filter(Pe=>{const Ke=Pe.order_number?.toLowerCase()||"",ze=Pe.user_name?.toLowerCase()||"",Ie=Pe.user_email?.toLowerCase()||"",rt=Pe.order_items?.map(J=>(J.item_name_es||"").toLowerCase()).join(" ")||"";return Ke.includes(le)||ze.includes(le)||Ie.includes(le)||rt.includes(le)})}if(y.startDate){const le=new Date(y.startDate);le.setHours(0,0,0,0),G=G.filter(Pe=>new Date(Pe.created_at)>=le)}if(y.endDate){const le=new Date(y.endDate);le.setHours(23,59,59,999),G=G.filter(Pe=>new Date(Pe.created_at)<=le)}return y.userId&&(G=G.filter(le=>le.user_id===y.userId)),y.productId&&(G=G.filter(le=>le.order_items?.some(Pe=>Pe.item_id===y.productId))),G},[r,y]),$=w.useMemo(()=>({total:ue.length,pending:ue.filter(G=>G.payment_status===Yt.PENDING).length,validated:ue.filter(G=>G.payment_status===Yt.VALIDATED).length,rejected:ue.filter(G=>G.payment_status===Yt.REJECTED).length,completed:ue.filter(G=>G.status===ft.COMPLETED).length,totalRevenue:ue.filter(G=>G.payment_status===Yt.VALIDATED).reduce((G,le)=>G+(le.total_amount||0),0)}),[ue]),ne=()=>{b({searchQuery:"",combined_status:"",order_type:"",startDate:"",endDate:"",userId:"",productId:""}),se()},ae=(G,le)=>{b(Pe=>({...Pe,[G]:le}))},P=()=>{se()},F=G=>{A(G),E(!0)},te=async G=>{Fe(t("adminOrders.modals.startTitle"),t("adminOrders.messages.confirmStart").replace("{orderNumber}",G.order_number),async()=>{g(G.id);try{const le=await MO(G.id,e.id);le.success?(O(t("adminOrders.messages.startSuccess"),"success"),se()):O(`${t("adminOrders.messages.error")}: ${le.error}`,"error")}catch(le){console.error("Error starting processing:",le),O(t("adminOrders.messages.error"),"error")}finally{g(null)}})},me=async G=>{je(t("adminOrders.modals.trackingTitle"),t("adminOrders.messages.enterTracking").replace("{orderNumber}",G.order_number),"",async le=>{g(G.id);try{const Pe=await IO(G.id,e.id,le);Pe.success?(O(t("adminOrders.messages.shipSuccess"),"success"),se()):O(`${t("adminOrders.messages.error")}: ${Pe.error}`,"error")}catch(Pe){console.error("Error marking as shipped:",Pe),O(t("adminOrders.messages.error"),"error")}finally{g(null)}})},ye=G=>{A(G),R(!0)},_e=G=>{const le=G.target.files[0];if(!le)return;if(!le.type.startsWith("image/")){O(t("adminOrders.messages.invalidImage"),"error");return}if(le.size>5*1024*1024){O(t("adminOrders.messages.imageTooLarge"),"error");return}M(le);const Pe=new FileReader;Pe.onloadend=()=>{Q(Pe.result)},Pe.readAsDataURL(le)},xe=async()=>{if(!T||!_){O(t("adminOrders.messages.selectImage"),"error");return}g(_.id);try{const G=await LO(_.id,T,e.id);G.success?(O(t("adminOrders.messages.deliverSuccess"),"success"),R(!1),M(null),Q(null),A(null),se()):O(`${t("adminOrders.messages.error")}: ${G.error}`,"error")}catch(G){console.error("Error uploading delivery proof:",G),O(t("adminOrders.messages.error"),"error")}finally{g(null)}},Ne=async G=>{Fe(t("adminOrders.modals.completeTitle"),t("adminOrders.messages.confirmComplete").replace("{orderNumber}",G.order_number),async()=>{g(G.id);try{const le=await $O(G.id);le.success?(O(t("adminOrders.messages.completeSuccess"),"success"),se()):O(`${t("adminOrders.messages.error")}: ${le.error}`,"error")}catch(le){console.error("Error completing order:",le),O(t("adminOrders.messages.error"),"error")}finally{g(null)}})},De=async G=>{je(t("adminOrders.modals.cancelReasonTitle"),t("adminOrders.messages.enterCancelReason").replace("{orderNumber}",G.order_number),"",async le=>{if(!le||le.trim()===""){O(t("adminOrders.messages.cancelReasonRequired"),"error");return}Fe(t("adminOrders.modals.cancelTitle"),t("adminOrders.messages.confirmCancel"),async()=>{g(G.id);try{const Pe=await UO(G.id,e.id,le);Pe.success?(O(t("adminOrders.messages.cancelSuccess"),"success"),se()):O(`${t("adminOrders.messages.error")}: ${Pe.error}`,"error")}catch(Pe){console.error("Error cancelling order:",Pe),O(t("adminOrders.messages.error"),"error")}finally{g(null)}})})},Fe=(G,le,Pe)=>{be({show:!0,title:G,message:le,onConfirm:Pe})},ie=()=>{be({show:!1,title:"",message:"",onConfirm:null})},je=(G,le,Pe,Ke)=>{de({show:!0,title:G,message:le,defaultValue:Pe,onConfirm:Ke})},W=()=>{de({show:!1,title:"",message:"",defaultValue:"",onConfirm:null})},O=(G,le="success")=>{ce({message:G,type:le}),setTimeout(()=>ce(null),4e3)},he=G=>G?new Date(G).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",B=(G,le="USD")=>G?new Intl.NumberFormat("en-US",{style:"currency",currency:le}).format(G):"0.00";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("adminOrders.title")}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t("adminOrders.subtitle")})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>C(!j),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${j?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[s.jsx(Bf,{className:"h-4 w-4"}),t("adminOrders.filters.title").replace(" de Bsqueda",""),j?s.jsx(Ok,{className:"h-4 w-4"}):s.jsx(_b,{className:"h-4 w-4"})]}),s.jsxs("button",{onClick:se,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(ls,{className:`h-4 w-4 ${o?"animate-spin":""}`}),t("dashboard.refresh")]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[s.jsx(Ai,{label:t("adminOrders.stats.total"),value:$.total,icon:Vn,color:"blue"}),s.jsx(Ai,{label:t("adminOrders.stats.pending"),value:$.pending,icon:Gr,color:"yellow"}),s.jsx(Ai,{label:t("adminOrders.stats.validated"),value:$.validated,icon:qt,color:"green"}),s.jsx(Ai,{label:t("adminOrders.stats.rejected"),value:$.rejected,icon:Hr,color:"red"}),s.jsx(Ai,{label:t("adminOrders.stats.completed"),value:$.completed,icon:vr,color:"purple"}),s.jsx(Ai,{label:t("adminOrders.stats.revenue"),value:B($.totalRevenue),icon:St,color:"green",isAmount:!0})]}),s.jsx(Zt,{children:j&&s.jsxs(oe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t("adminOrders.filters.title")}),s.jsxs("button",{onClick:ne,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900",children:[s.jsx(Jt,{className:"h-4 w-4"}),t("adminOrders.filters.clear")]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Lc,{className:"h-4 w-4 inline mr-2"}),t("adminOrders.filters.search")]}),s.jsx("input",{type:"text",placeholder:t("adminOrders.filters.searchPlaceholder"),value:y.searchQuery,onChange:G=>ae("searchQuery",G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("adminOrders.filters.status")}),s.jsxs("select",{value:y.combined_status,onChange:G=>ae("combined_status",G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:t("adminOrders.filters.allStatuses")}),s.jsxs("option",{value:"payment_pending",children:[" ",t("adminOrders.table.paymentStatus.pending")]}),s.jsxs("option",{value:"payment_validated",children:[" ",t("adminOrders.table.paymentStatus.validated")]}),s.jsxs("option",{value:"processing",children:[" ",t("adminOrders.table.orderStatus.processing")]}),s.jsxs("option",{value:"shipped",children:[" ",t("adminOrders.table.orderStatus.shipped")]}),s.jsxs("option",{value:"delivered",children:[" ",t("adminOrders.table.orderStatus.delivered")]}),s.jsxs("option",{value:"completed",children:[" ",t("adminOrders.table.orderStatus.completed")]}),s.jsxs("option",{value:"cancelled",children:[" ",t("adminOrders.table.orderStatus.cancelled")]}),s.jsxs("option",{value:"rejected",children:[" ",t("adminOrders.table.paymentStatus.rejected")]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("adminOrders.filters.orderType")}),s.jsxs("select",{value:y.order_type,onChange:G=>ae("order_type",G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:t("adminOrders.filters.allTypes")}),s.jsx("option",{value:"product",children:t("adminOrders.types.products")}),s.jsx("option",{value:"remittance",children:t("adminOrders.types.remittance")}),s.jsx("option",{value:"mixed",children:t("adminOrders.types.mixed")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(hc,{className:"h-4 w-4 inline mr-2"}),t("adminOrders.filters.startDate")]}),s.jsx("input",{type:"date",value:y.startDate,onChange:G=>ae("startDate",G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(hc,{className:"h-4 w-4 inline mr-2"}),t("adminOrders.filters.endDate")]}),s.jsx("input",{type:"date",value:y.endDate,onChange:G=>ae("endDate",G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:s.jsx("button",{onClick:P,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("adminOrders.filters.apply")})})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:o?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(ls,{className:"h-8 w-8 animate-spin text-blue-600"})}):c?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-red-600",children:[s.jsx(Hr,{className:"h-12 w-12 mb-4"}),s.jsx("p",{children:c}),s.jsx("button",{onClick:se,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:t("adminOrders.messages.retry")})]}):ue.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[s.jsx(vr,{className:"h-12 w-12 mb-4"}),s.jsx("p",{children:t("adminOrders.messages.noOrders")})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.order")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.user")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.date")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.type")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.items")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.total")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.paymentStatus.label")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.orderStatus.label")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.actions")})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ue.map(G=>s.jsx(zD,{order:G,onViewDetails:F,onStartProcessing:te,onMarkAsShipped:me,onUploadDeliveryProof:ye,onCompleteOrder:Ne,onCancelOrder:De,formatDate:he,formatCurrency:B,actionLoading:p,t},G.id))})]})})}),k&&_&&s.jsx(VD,{order:_,onClose:()=>{E(!1),A(null)},formatDate:he,formatCurrency:B}),N&&_&&s.jsx(qD,{order:_,onClose:()=>{R(!1),A(null),M(null),Q(null)},onFileChange:_e,onSubmit:xe,preview:I,loading:p===_.id,t}),s.jsx(WD,{show:H.show,title:H.title,message:H.message,onConfirm:()=>{H.onConfirm&&H.onConfirm(),ie()},onCancel:ie,t}),s.jsx(HD,{show:z.show,title:z.title,message:z.message,defaultValue:z.defaultValue,onConfirm:G=>{z.onConfirm&&z.onConfirm(G),W()},onCancel:W,t}),ee&&s.jsx(GD,{message:ee.message,type:ee.type,onClose:()=>ce(null)})]})},Ai=({label:t,value:e,icon:r,color:i,isAmount:o})=>{const l={blue:"bg-blue-50 text-blue-700 border-blue-200",green:"bg-green-50 text-green-700 border-green-200",yellow:"bg-yellow-50 text-yellow-700 border-yellow-200",red:"bg-red-50 text-red-700 border-red-200",purple:"bg-purple-50 text-purple-700 border-purple-200"};return s.jsxs("div",{className:`rounded-lg border p-4 ${l[i]}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:t}),s.jsx(r,{className:"h-4 w-4"})]}),s.jsx("div",{className:`text-2xl font-bold ${o?"text-lg":""}`,children:e})]})},zD=({order:t,onViewDetails:e,onStartProcessing:r,onMarkAsShipped:i,onUploadDeliveryProof:o,onCompleteOrder:l,onCancelOrder:c,formatDate:u,formatCurrency:m,actionLoading:h,t:p})=>{const g=t.status===ft.PROCESSING?FO(t):null,y=()=>{const b=h===t.id;return t.payment_status===Yt.VALIDATED&&t.status===ft.PENDING?s.jsxs("button",{onClick:()=>r(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(zk,{className:"h-3 w-3"}),p(b?"adminOrders.actions.processing":"adminOrders.actions.start")]}):t.status===ft.PROCESSING?s.jsxs("button",{onClick:()=>i(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-xs font-medium rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(uo,{className:"h-3 w-3"}),p(b?"adminOrders.actions.processing":"adminOrders.actions.ship")]}):t.status===ft.SHIPPED?s.jsxs("button",{onClick:()=>o(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(jb,{className:"h-3 w-3"}),p(b?"adminOrders.actions.loading":"adminOrders.actions.proof")]}):t.status===ft.DELIVERED?s.jsxs("button",{onClick:()=>l(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(oo,{className:"h-3 w-3"}),p(b?"adminOrders.actions.completing":"adminOrders.actions.complete")]}):t.status===ft.COMPLETED||t.status===ft.CANCELLED?s.jsx("span",{className:"text-xs text-gray-500 italic",children:t.status===ft.COMPLETED?p("adminOrders.table.orderStatus.completed"):p("adminOrders.table.orderStatus.cancelled")}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})};return s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.order_number})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:t.user_name||"N/A"}),s.jsx("div",{className:"text-xs text-gray-500",children:t.user_email||""})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:u(t.created_at)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[t.order_type==="product"?s.jsx(vr,{className:"h-3 w-3"}):t.order_type==="remittance"?s.jsx(St,{className:"h-3 w-3"}):s.jsx(Or,{className:"h-3 w-3"}),t.order_type==="product"?p("adminOrders.types.products"):t.order_type==="remittance"?p("adminOrders.types.remittance"):p("adminOrders.types.mixed")]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[t.order_items?.length||0," items"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:m(t.total_amount,t.currencies?.code)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${t.payment_status===Yt.VALIDATED?"bg-green-100 text-green-700":t.payment_status===Yt.REJECTED?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[UD(t.status,t.payment_status),uj(t.status,t.payment_status,"es")]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${t.status===ft.COMPLETED?"bg-green-100 text-green-700":t.status===ft.CANCELLED?"bg-red-100 text-red-700":t.status===ft.SHIPPED?"bg-purple-100 text-purple-700":t.status===ft.DELIVERED?"bg-teal-100 text-teal-700":"bg-blue-100 text-blue-700"}`,children:t.status}),g!==null&&s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${g>5?"bg-red-100 text-red-700":g>3?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:[s.jsx(Gr,{className:"h-3 w-3"}),g," ",p(g===1?"adminOrders.days.singular":"adminOrders.days.plural")]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>e(t),className:"text-blue-600 hover:text-blue-900 inline-flex items-center gap-1",title:p("adminOrders.actions.view"),children:s.jsx(Ss,{className:"h-4 w-4"})}),y(),t.status!==ft.COMPLETED&&t.status!==ft.CANCELLED&&s.jsx("button",{onClick:()=>c(t),disabled:h===t.id,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:p("adminOrders.actions.cancel"),children:s.jsx(Pk,{className:"h-4 w-4"})})]})})]})},VD=({order:t,onClose:e,formatDate:r,formatCurrency:i})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs(oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Detalles de Orden: ",t.order_number]}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Jt,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Js,{label:"Nmero de Orden",value:t.order_number}),s.jsx(Js,{label:"Fecha",value:r(t.created_at)}),s.jsx(Js,{label:"Usuario",value:t.user_name||"N/A"}),s.jsx(Js,{label:"Email",value:t.user_email||"N/A"}),s.jsx(Js,{label:"Tipo de Orden",value:t.order_type}),s.jsx(Js,{label:"Estado de Pago",value:uj(t.status,t.payment_status,"es")}),s.jsx(Js,{label:"Estado de Orden",value:t.status}),s.jsx(Js,{label:"Mtodo de Pago",value:t.payment_method})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Items de la Orden"}),s.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Producto"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Cantidad"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Precio Unit."}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Total"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:t.order_items?.map((o,l)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:o.item_name_es||o.item_name_en}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:o.quantity}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:i(o.unit_price,t.currencies?.code)}),s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:i(o.total_price,t.currencies?.code)})]},l))})]})})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsx("span",{className:"font-medium",children:i(t.subtotal,t.currencies?.code)})]}),t.shipping_cost>0&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Envo:"}),s.jsx("span",{className:"font-medium",children:i(t.shipping_cost,t.currencies?.code)})]}),t.discount_amount>0&&s.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[s.jsx("span",{children:"Descuento:"}),s.jsxs("span",{className:"font-medium",children:["-",i(t.discount_amount,t.currencies?.code)]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:i(t.total_amount,t.currencies?.code)})]})]}),t.shipping_address&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Informacin de Envo"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Direccin:"})," ",t.shipping_address]}),t.recipient_info&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Destinatario:"})," ",t.recipient_info.name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Telfono:"})," ",t.recipient_info.phone]})]}),t.delivery_instructions&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Instrucciones:"})," ",t.delivery_instructions]})]})]}),t.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Notas"}),s.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-4",children:t.notes})]}),t.rejection_reason&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-lg font-semibold text-red-900 mb-2",children:"Razn de Rechazo"}),s.jsx("p",{className:"text-sm text-red-700",children:t.rejection_reason})]})]}),s.jsx("div",{className:"lg:col-span-1",children:t.payment_proof_url?s.jsxs("div",{className:"sticky top-20 space-y-3",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Comprobante de Pago"}),s.jsx("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-2",children:s.jsx("img",{src:t.payment_proof_url,alt:"Comprobante de pago",className:"w-full h-auto rounded-lg"})}),s.jsx("a",{href:t.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"block text-center text-sm text-blue-600 hover:text-blue-700 hover:underline",children:"Ver en tamao completo "})]}):s.jsx("div",{className:"sticky top-20 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Sin comprobante de pago"})})})]}),s.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end",children:s.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cerrar"})})]})}),Js=({label:t,value:e})=>s.jsxs("div",{children:[s.jsx("dt",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:t}),s.jsx("dd",{className:"text-sm text-gray-900 font-medium",children:e})]}),qD=({order:t,onClose:e,onFileChange:r,onSubmit:i,preview:o,loading:l,t:c})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs(oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-lg",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[" ",c("adminOrders.deliveryModal.title")]}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:l,children:s.jsx(Jt,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm text-blue-900",children:[s.jsx("strong",{children:c("adminOrders.deliveryModal.orderLabel")})," ",t.order_number]}),s.jsxs("p",{className:"text-sm text-blue-900",children:[s.jsx("strong",{children:c("adminOrders.deliveryModal.customerLabel")})," ",t.user_name]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:c("adminOrders.deliveryModal.selectPhoto")}),s.jsx("div",{className:"flex items-center justify-center w-full",children:s.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[o?s.jsx("img",{src:o,alt:"Preview",className:"max-h-44 rounded-lg object-contain"}):s.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[s.jsx(Mk,{className:"h-12 w-12 text-gray-400 mb-3"}),s.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[s.jsx("span",{className:"font-semibold",children:c("adminOrders.deliveryModal.clickToUpload")})," ",c("adminOrders.deliveryModal.dragHere")]}),s.jsx("p",{className:"text-xs text-gray-500",children:c("adminOrders.deliveryModal.fileTypes")})]}),s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:r,disabled:l})]})})]}),o&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-sm text-green-700",children:[" ",c("adminOrders.deliveryModal.imageLoaded")]})}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-xs text-yellow-800",children:[s.jsx("strong",{children:c("adminOrders.deliveryModal.note")})," ",c("adminOrders.deliveryModal.noteText")]})})]}),s.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[s.jsx("button",{onClick:e,disabled:l,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:c("adminOrders.deliveryModal.cancel")}),s.jsx("button",{onClick:i,disabled:l||!o,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2",children:l?s.jsxs(s.Fragment,{children:[s.jsx(ls,{className:"h-4 w-4 animate-spin"}),c("adminOrders.deliveryModal.uploading")]}):s.jsxs(s.Fragment,{children:[s.jsx(jb,{className:"h-4 w-4"}),c("adminOrders.deliveryModal.submit")]})})]})]})}),WD=({show:t,title:e,message:r,onConfirm:i,onCancel:o,t:l})=>t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs(oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 rounded-t-lg",children:s.jsx("h3",{className:"text-xl font-bold text-white",children:e})}),s.jsx("div",{className:"p-6",children:s.jsx("p",{className:"text-gray-700 text-base",children:r})}),s.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[s.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:l("adminOrders.modals.cancel")}),s.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:l("adminOrders.modals.confirm")})]})]})}):null,HD=({show:t,title:e,message:r,defaultValue:i,onConfirm:o,onCancel:l,t:c})=>{const[u,m]=w.useState(i||"");if(w.useEffect(()=>{t&&m(i||"")},[t,i]),!t)return null;const h=()=>{o(u)},p=g=>{g.key==="Enter"&&h()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs(oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4 rounded-t-lg",children:s.jsx("h3",{className:"text-xl font-bold text-white",children:e})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsx("p",{className:"text-gray-700 text-base",children:r}),s.jsx("input",{type:"text",value:u,onChange:g=>m(g.target.value),onKeyPress:p,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",autoFocus:!0})]}),s.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[s.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:c("adminOrders.modals.cancel")}),s.jsx("button",{onClick:h,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:c("adminOrders.modals.submit")})]})]})})},GD=({message:t,type:e,onClose:r})=>{if(!t)return null;const i={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500",warning:"bg-yellow-500"},o={success:"",error:"",info:"",warning:""};return s.jsx(oe.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 right-4 z-50 max-w-md",children:s.jsxs("div",{className:`${i[e]} text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3`,children:[s.jsx("span",{className:"text-2xl",children:o[e]}),s.jsx("p",{className:"flex-1 font-medium",children:t}),s.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 transition-colors",children:s.jsx(Jt,{className:"h-5 w-5"})})]})})},KD=()=>{const{t}=ct(),{showModal:e}=Eo(),[r,i]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState(!0),[m,h]=w.useState(""),[p,g]=w.useState("all"),[y,b]=w.useState(null);w.useEffect(()=>{j()},[]),w.useEffect(()=>{C()},[r,m,p]);const j=async()=>{u(!0);const I=await mD({});I.success?i(I.remittances):Y({title:t("common.error"),description:I.error,variant:"destructive"}),u(!1)},C=()=>{let I=[...r];m&&(I=I.filter(Q=>Q.remittance_number?.toLowerCase().includes(m.toLowerCase())||Q.recipient_name?.toLowerCase().includes(m.toLowerCase())||Q.recipient_phone?.includes(m))),p!=="all"&&(p==="pending_validation"?I=I.filter(Q=>Q.status===Se.PAYMENT_PROOF_UPLOADED):p==="in_progress"?I=I.filter(Q=>[Se.PAYMENT_VALIDATED,Se.PROCESSING].includes(Q.status)):p==="urgent"?I=I.filter(Q=>{const H=of(Q);return H.level==="error"||H.level==="warning"}):I=I.filter(Q=>Q.status===p)),l(I)},_=async I=>{const Q=await e({title:t("remittances.admin.validate"),message:t("remittances.admin.confirmValidateMessage",{amount:I.amount,currency:I.currency}),input:!0,inputLabel:t("remittances.admin.validationNotes")+" (opcional)",inputPlaceholder:t("remittances.admin.validationNotesPlaceholder"),confirmText:t("remittances.admin.validate"),cancelText:t("common.cancel"),type:"success"});if(Q===!1)return;const H=await fD(I.id,Q||"");H.success?(Y({title:t("common.success"),description:t("remittances.admin.paymentValidated")}),j(),b(null)):Y({title:t("common.error"),description:H.error,variant:"destructive"})},A=async I=>{const Q=await e({title:t("remittances.admin.reject"),message:t("remittances.admin.confirmRejectMessage",{number:I.remittance_number}),input:!0,inputLabel:t("remittances.admin.rejectReason")+" *",inputPlaceholder:t("remittances.admin.rejectReasonPlaceholder"),confirmText:t("remittances.admin.reject"),cancelText:t("common.cancel"),type:"danger",required:!0});if(!Q)return;const H=await hD(I.id,Q);H.success?(Y({title:t("common.success"),description:t("remittances.admin.paymentRejected")}),j(),b(null)):Y({title:t("common.error"),description:H.error,variant:"destructive"})},k=async I=>{if(!await e({title:t("remittances.admin.process"),message:t("remittances.admin.confirmProcessMessage",{number:I.remittance_number}),confirmText:t("remittances.admin.process"),cancelText:t("common.cancel")}))return;const H=await pD(I.id,"");H.success?(Y({title:t("common.success"),description:t("remittances.admin.processingStarted")}),j(),b(null)):Y({title:t("common.error"),description:H.error,variant:"destructive"})},E=async I=>{const Q=await e({title:t("remittances.admin.confirmDelivery"),message:t("remittances.admin.confirmDeliveryMessage",{amount:I.amount_to_deliver,currency:I.delivery_currency,recipient:I.recipient_name}),input:!0,inputLabel:t("remittances.admin.deliveryNotes"),inputPlaceholder:t("remittances.admin.deliveryNotesPlaceholder"),confirmText:t("remittances.admin.confirmDelivery"),cancelText:t("common.cancel"),type:"success"});if(Q===!1)return;const H=await gD(I.id,null,Q||"");H.success?(Y({title:t("common.success"),description:t("remittances.admin.deliveryConfirmed")}),j(),b(null)):Y({title:t("common.error"),description:H.error,variant:"destructive"})},N=async I=>{if(!await e({title:t("remittances.admin.complete"),message:t("remittances.admin.confirmCompleteMessage",{number:I.remittance_number}),confirmText:t("remittances.admin.complete"),cancelText:t("common.cancel"),type:"success"}))return;const H=await yD(I.id,"");H.success?(Y({title:t("common.success"),description:t("remittances.admin.remittanceCompleted")}),j(),b(null)):Y({title:t("common.error"),description:H.error,variant:"destructive"})},R=I=>{const Q={[Se.PAYMENT_PENDING]:{bg:"bg-gray-100",text:"text-gray-700",label:t("remittances.status.paymentPending")},[Se.PAYMENT_PROOF_UPLOADED]:{bg:"bg-yellow-100",text:"text-yellow-700",label:t("remittances.status.paymentProofUploaded")},[Se.PAYMENT_VALIDATED]:{bg:"bg-blue-100",text:"text-blue-700",label:t("remittances.status.paymentValidated")},[Se.PAYMENT_REJECTED]:{bg:"bg-red-100",text:"text-red-700",label:t("remittances.status.paymentRejected")},[Se.PROCESSING]:{bg:"bg-purple-100",text:"text-purple-700",label:t("remittances.status.processing")},[Se.DELIVERED]:{bg:"bg-green-100",text:"text-green-700",label:t("remittances.status.delivered")},[Se.COMPLETED]:{bg:"bg-emerald-100",text:"text-emerald-700",label:t("remittances.status.completed")},[Se.CANCELLED]:{bg:"bg-gray-100",text:"text-gray-500",label:t("remittances.status.cancelled")}},H=Q[I]||Q[Se.PAYMENT_PENDING];return s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${H.bg} ${H.text}`,children:H.label})},T=I=>{const Q=of(I),H={success:"bg-green-100 text-green-700",info:"bg-blue-100 text-blue-700",warning:"bg-yellow-100 text-yellow-700",error:"bg-red-100 text-red-700"};return s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${H[Q.level]}`,children:Q.message})},M=I=>{switch(I.status){case Se.PAYMENT_PROOF_UPLOADED:return s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>_(I),className:"flex items-center gap-1 px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[s.jsx(qt,{className:"h-4 w-4"}),t("remittances.admin.validate")]}),s.jsxs("button",{onClick:()=>A(I),className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[s.jsx(Hr,{className:"h-4 w-4"}),t("remittances.admin.reject")]})]});case Se.PAYMENT_VALIDATED:return s.jsxs("button",{onClick:()=>k(I),className:"flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[s.jsx(vr,{className:"h-4 w-4"}),t("remittances.admin.process")]});case Se.PROCESSING:return s.jsxs("button",{onClick:()=>E(I),className:"flex items-center gap-1 px-3 py-1 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[s.jsx(uo,{className:"h-4 w-4"}),t("remittances.admin.confirmDelivery")]});case Se.DELIVERED:return s.jsxs("button",{onClick:()=>N(I),className:"flex items-center gap-1 px-3 py-1 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm",children:[s.jsx(qt,{className:"h-4 w-4"}),t("remittances.admin.complete")]});default:return null}};return c?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"glass-effect p-4 rounded-xl",children:s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"md:col-span-2 relative",children:[s.jsx(Lc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",value:m,onChange:I=>h(I.target.value),placeholder:t("remittances.admin.searchPlaceholder"),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Bf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{value:p,onChange:I=>g(I.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[s.jsx("option",{value:"all",children:t("remittances.admin.allStatuses")}),s.jsx("option",{value:"pending_validation",children:t("remittances.admin.pendingValidation")}),s.jsx("option",{value:"in_progress",children:t("remittances.admin.inProgress")}),s.jsx("option",{value:"urgent",children:t("remittances.admin.urgent")}),s.jsx("option",{value:Se.COMPLETED,children:t("remittances.status.completed")}),s.jsx("option",{value:Se.CANCELLED,children:t("remittances.status.cancelled")})]})]})]})}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:t("remittances.admin.pendingValidation"),value:r.filter(I=>I.status===Se.PAYMENT_PROOF_UPLOADED).length,color:"bg-yellow-100 text-yellow-700"},{label:t("remittances.admin.inProgress"),value:r.filter(I=>[Se.PAYMENT_VALIDATED,Se.PROCESSING].includes(I.status)).length,color:"bg-blue-100 text-blue-700"},{label:t("remittances.status.completed"),value:r.filter(I=>I.status===Se.COMPLETED).length,color:"bg-green-100 text-green-700"},{label:t("remittances.admin.total"),value:r.length,color:"bg-gray-100 text-gray-700"}].map((I,Q)=>s.jsxs("div",{className:"glass-effect p-4 rounded-xl",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:I.label}),s.jsx("p",{className:`text-2xl font-bold ${I.color}`,children:I.value})]},Q))}),o.length===0?s.jsxs("div",{className:"text-center py-12 glass-effect rounded-xl",children:[s.jsx(vr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:t("remittances.user.noRemittances")})]}):s.jsx("div",{className:"space-y-4",children:o.map(I=>s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold gradient-text",children:I.remittance_number}),s.jsx("p",{className:"text-sm text-gray-600",children:I.remittance_types?.name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[R(I.status),[Se.PAYMENT_VALIDATED,Se.PROCESSING].includes(I.status)&&T(I)]})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:t("remittances.user.amountSent")}),s.jsxs("p",{className:"font-semibold",children:[I.amount," ",I.currency]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:t("remittances.user.toDeliver")}),s.jsxs("p",{className:"font-semibold",children:[I.amount_to_deliver?.toFixed(2)," ",I.delivery_currency]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:t("remittances.user.method")}),s.jsx("p",{className:"font-semibold capitalize",children:I.delivery_method})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:t("remittances.recipient.fullName")}),s.jsx("p",{className:"font-semibold",children:I.recipient_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:t("remittances.recipient.phone")}),s.jsx("p",{className:"font-semibold",children:I.recipient_phone})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:t("remittances.recipient.city")}),s.jsx("p",{className:"font-semibold",children:I.recipient_city||"N/A"})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(hc,{className:"h-4 w-4"}),new Date(I.created_at).toLocaleDateString("es-CU")]}),I.payment_proof_url&&s.jsxs("a",{href:I.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-600 hover:underline",children:[s.jsx(Vn,{className:"h-4 w-4"}),t("remittances.user.viewProof")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>b(I),className:"flex items-center gap-1 px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:[s.jsx(Ss,{className:"h-4 w-4"}),t("remittances.admin.viewDetails")]}),M(I)]})]})]},I.id))}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>b(null),children:s.jsxs(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",onClick:I=>I.stopPropagation(),children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsxs("h2",{className:"text-2xl font-bold gradient-text",children:[t("remittances.admin.viewDetails")," - ",y.remittance_number]}),s.jsx("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Jt,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider",children:t("common.number")}),s.jsx("p",{className:"font-semibold text-lg",children:y.remittance_number})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider",children:t("common.status")}),R(y.status)]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider",children:t("common.type")}),s.jsx("p",{className:"font-semibold",children:y.remittance_types?.name||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider",children:t("common.createdAt")}),s.jsx("p",{className:"font-semibold",children:new Date(y.created_at).toLocaleString("es-CU")})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Informacin de Monto"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Monto Enviado:"}),s.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[y.amount," ",y.currency]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"A Entregar:"}),s.jsxs("p",{className:"text-lg font-bold text-green-600",children:[y.amount_to_deliver?.toFixed(2)," ",y.delivery_currency]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Informacin del Destinatario"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Nombre:"})," ",y.recipient_name||"N/A"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Telfono:"})," ",y.recipient_phone||"N/A"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Ciudad:"})," ",y.recipient_city||"N/A"]})]})]}),y.delivery_method==="cash"&&s.jsxs("div",{className:"border-l-4 border-green-500 bg-green-50 rounded-lg p-4",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-3 h-3 bg-green-500 rounded-full"}),"Entrega en Efectivo - Datos de Localizacin"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[y.recipient_province&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Provincia:"})," ",y.recipient_province]}),y.recipient_municipality&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Municipio:"})," ",y.recipient_municipality]}),y.recipient_address&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Direccin:"})," ",y.recipient_address]}),y.recipient_id_number&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Carnet de Identidad:"})," ",y.recipient_id_number]})]})]}),y.delivery_method!=="cash"&&y.recipient_bank_account&&s.jsxs("div",{className:"border-l-4 border-blue-500 bg-blue-50 rounded-lg p-4",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-3 h-3 bg-blue-500 rounded-full"}),y.delivery_method==="transfer"?" Datos Bancarios":" Datos de Cuenta"]}),s.jsx("div",{className:"space-y-2 text-sm font-mono bg-white rounded p-3 border border-blue-200",children:s.jsx("p",{children:y.recipient_bank_account})}),y.recipient_bank_name&&s.jsxs("p",{className:"text-sm mt-2",children:[s.jsx("span",{className:"font-medium",children:"Banco:"})," ",y.recipient_bank_name]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-blue-600 font-medium mb-1",children:"Mtodo de Entrega"}),s.jsx("p",{className:"text-lg font-semibold text-blue-900",children:y.delivery_method==="cash"?" Efectivo":y.delivery_method==="transfer"?" Transferencia Bancaria":y.delivery_method==="card"?" Tarjeta":y.delivery_method})]}),y.payment_reference&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 font-medium mb-2",children:"Referencia de Pago"}),s.jsx("p",{className:"font-mono bg-gray-50 p-3 rounded-lg text-sm",children:y.payment_reference})]}),y.notes&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Notas"}),s.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-4",children:y.notes})]})]}),s.jsx("div",{className:"lg:col-span-1",children:y.payment_proof_url?s.jsxs("div",{className:"sticky top-20 space-y-3",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Comprobante de Pago"}),s.jsx("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-2",children:s.jsx("img",{src:y.payment_proof_url,alt:"Comprobante de pago",className:"w-full h-auto rounded-lg"})}),s.jsx("a",{href:y.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"block text-center text-sm text-blue-600 hover:text-blue-700 hover:underline",children:"Ver en tamao completo "})]}):s.jsx("div",{className:"sticky top-20 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Sin comprobante de pago"})})})]}),s.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4",children:s.jsx("button",{onClick:()=>b(null),className:"w-full py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:t("remittances.admin.cancel")})})]})})]})},YD=()=>{const{t}=ct(),{isSuperAdmin:e}=Et(),{showModal:r}=Eo(),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,m]=w.useState(!1),[h,p]=w.useState(null),[g,y]=w.useState({name:"",currency_code:"USD",delivery_currency:"CUP",exchange_rate:"",commission_percentage:"0",commission_fixed:"0",min_amount:"",max_amount:"",delivery_method:Ha.CASH,max_delivery_days:"3",warning_days:"2",description:"",icon:"dollar-sign",is_active:!0,display_order:0});w.useEffect(()=>{b()},[]);const b=async()=>{c(!0);const N=await iD();N.success?o(N.types):Y({title:t("common.error"),description:N.error,variant:"destructive"}),c(!1)},j=()=>{p(null),y({name:"",currency_code:"USD",delivery_currency:"CUP",exchange_rate:"",commission_percentage:"0",commission_fixed:"0",min_amount:"",max_amount:"",delivery_method:Ha.CASH,max_delivery_days:"3",warning_days:"2",description:"",icon:"dollar-sign",is_active:!0,display_order:i.length}),m(!0)},C=N=>{p(N),y({name:N.name,currency_code:N.currency_code,delivery_currency:N.delivery_currency,exchange_rate:N.exchange_rate.toString(),commission_percentage:(N.commission_percentage||0).toString(),commission_fixed:(N.commission_fixed||0).toString(),min_amount:N.min_amount.toString(),max_amount:N.max_amount?N.max_amount.toString():"",delivery_method:N.delivery_method,max_delivery_days:N.max_delivery_days.toString(),warning_days:N.warning_days.toString(),description:N.description||"",icon:N.icon||"dollar-sign",is_active:N.is_active,display_order:N.display_order}),m(!0)},_=()=>{m(!1),p(null)},A=async N=>{if(N.preventDefault(),!g.name||!g.exchange_rate||!g.min_amount){Y({title:t("common.error"),description:t("remittances.admin.requiredFields"),variant:"destructive"});return}const R={name:g.name,currency_code:g.currency_code,delivery_currency:g.delivery_currency,exchange_rate:parseFloat(g.exchange_rate),commission_percentage:parseFloat(g.commission_percentage)||0,commission_fixed:parseFloat(g.commission_fixed)||0,min_amount:parseFloat(g.min_amount),max_amount:g.max_amount?parseFloat(g.max_amount):null,delivery_method:g.delivery_method,max_delivery_days:parseInt(g.max_delivery_days),warning_days:parseInt(g.warning_days),description:g.description,icon:g.icon,is_active:g.is_active,display_order:g.display_order};let T;h?T=await nv(h.id,R):T=await oD(R),T.success?(Y({title:t("common.success"),description:t(h?"remittances.admin.typeUpdated":"remittances.admin.typeCreated")}),b(),_()):Y({title:t("common.error"),description:T.error,variant:"destructive"})},k=async N=>{if(!await r({type:"danger",title:t("remittances.admin.confirmDelete"),message:`${N.name}

${t("remittances.admin.deleteWarning")}`,confirmText:t("remittances.admin.delete"),cancelText:t("remittances.admin.cancel")}))return;const T=await lD(N.id);T.success?(Y({title:t("common.success"),description:t("remittances.admin.typeDeleted")}),b()):Y({title:t("common.error"),description:T.error,variant:"destructive"})},E=async N=>{const R=await nv(N.id,{is_active:!N.is_active});R.success?(Y({title:t("common.success"),description:N.is_active?t("remittances.admin.typeDeactivated"):t("remittances.admin.typeActivated")}),b()):Y({title:t("common.error"),description:R.error,variant:"destructive"})};return l?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:`${Xe()} text-2xl mb-2`,children:t("remittances.admin.types")}),s.jsx("p",{className:"text-gray-600",children:t("remittances.admin.title")})]}),s.jsxs("button",{onClick:j,className:`${Qe()} flex items-center gap-2`,children:[s.jsx(Rr,{className:"h-5 w-5"}),t("remittances.admin.newType")]})]}),u&&s.jsxs(oe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl mb-6 border-2 border-blue-200",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 gradient-text",children:t(h?"remittances.admin.editRemittanceType":"remittances.admin.newRemittanceType")}),s.jsxs("form",{onSubmit:A,className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("remittances.admin.typeName")," *"]}),s.jsx("input",{type:"text",value:g.name,onChange:N=>y({...g,name:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:t("remittances.admin.typeNamePlaceholder"),required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("remittances.admin.originCurrency")," *"]}),s.jsxs("select",{value:g.currency_code,onChange:N=>y({...g,currency_code:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"USD",children:"USD - Dlar Estadounidense"}),s.jsx("option",{value:"EUR",children:"EUR - Euro"}),s.jsx("option",{value:"CAD",children:"CAD - Dlar Canadiense"}),s.jsx("option",{value:"GBP",children:"GBP - Libra Esterlina"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("remittances.admin.deliveryCurrency")," *"]}),s.jsxs("select",{value:g.delivery_currency,onChange:N=>y({...g,delivery_currency:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"CUP",children:"CUP - Peso Cubano"}),s.jsx("option",{value:"USD",children:"USD - Dlar (Efectivo)"}),s.jsx("option",{value:"MLC",children:"MLC - Moneda Libremente Convertible"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("remittances.admin.exchangeRate")," *"]}),s.jsxs("div",{className:"relative",children:[s.jsx(St,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",step:"0.01",value:g.exchange_rate,onChange:N=>y({...g,exchange_rate:N.target.value}),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"320.00",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("remittances.admin.commissionPercent")}),s.jsx("input",{type:"number",step:"0.01",value:g.commission_percentage,onChange:N=>y({...g,commission_percentage:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"2.5"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("remittances.admin.commissionFixed")}),s.jsx("input",{type:"number",step:"0.01",value:g.commission_fixed,onChange:N=>y({...g,commission_fixed:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"5.00"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("remittances.admin.minAmount")," *"]}),s.jsx("input",{type:"number",step:"0.01",value:g.min_amount,onChange:N=>y({...g,min_amount:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10.00",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("remittances.admin.maxAmount")}),s.jsx("input",{type:"number",step:"0.01",value:g.max_amount,onChange:N=>y({...g,max_amount:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1000.00"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("remittances.admin.deliveryMethod")," *"]}),s.jsxs("select",{value:g.delivery_method,onChange:N=>y({...g,delivery_method:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:Ha.CASH,children:t("remittances.recipient.cash")}),s.jsx("option",{value:Ha.TRANSFER,children:t("remittances.recipient.transfer")}),s.jsx("option",{value:Ha.CARD,children:"Tarjeta"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("remittances.admin.maxDeliveryDays")," *"]}),s.jsx("input",{type:"number",value:g.max_delivery_days,onChange:N=>y({...g,max_delivery_days:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("remittances.admin.warningDays")," *"]}),s.jsx("input",{type:"number",value:g.warning_days,onChange:N=>y({...g,warning_days:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("remittances.admin.description")}),s.jsx("textarea",{value:g.description,onChange:N=>y({...g,description:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:t("remittances.admin.descriptionPlaceholder")})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:g.is_active,onChange:N=>y({...g,is_active:N.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:t("remittances.admin.active")})]})}),s.jsxs("div",{className:"md:col-span-2 flex gap-3 justify-end",children:[s.jsxs("button",{type:"button",onClick:_,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[s.jsx(Jt,{className:"h-4 w-4"}),t("common.cancel")]}),s.jsxs("button",{type:"submit",className:`${Qe()} flex items-center gap-2`,children:[s.jsx(ns,{className:"h-4 w-4"}),t("common.save")]})]})]})]}),i.length===0?s.jsxs("div",{className:"text-center py-12 glass-effect rounded-xl",children:[s.jsx(Qt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-4",children:t("remittances.admin.noTypes")}),s.jsxs("button",{onClick:j,className:`${Qe()} inline-flex items-center gap-2`,children:[s.jsx(Rr,{className:"h-5 w-5"}),t("remittances.admin.newType")]})]}):s.jsx("div",{className:"grid gap-4",children:i.map(N=>s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`glass-effect p-6 rounded-xl ${N.is_active?"":"opacity-60"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-bold gradient-text",children:N.name}),!N.is_active&&s.jsx("span",{className:"px-2 py-1 bg-gray-200 text-gray-600 text-xs rounded-full",children:t("remittances.admin.inactive")})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Conversin"}),s.jsxs("p",{className:"font-semibold",children:["1 ",N.currency_code," = ",N.exchange_rate," ",N.delivery_currency]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Lmites"}),s.jsxs("p",{className:"font-semibold",children:[N.min_amount," - ",N.max_amount||""," ",N.currency_code]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Comisin"}),s.jsxs("p",{className:"font-semibold",children:[N.commission_percentage,"% + ",N.commission_fixed," ",N.currency_code]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Entrega"}),s.jsx("p",{className:"font-semibold capitalize",children:N.delivery_method})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tiempo Mximo"}),s.jsxs("p",{className:"font-semibold",children:[N.max_delivery_days," ",N.max_delivery_days===1?t("adminOrders.days.singular"):t("adminOrders.days.plural")]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Alerta"}),s.jsxs("p",{className:"font-semibold",children:[N.warning_days," ",N.warning_days===1?t("adminOrders.days.singular"):t("adminOrders.days.plural")]})]})]}),N.description&&s.jsx("p",{className:"text-sm text-gray-600 mt-3",children:N.description})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("button",{onClick:()=>E(N),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:N.is_active?t("remittances.admin.deactivate"):t("remittances.admin.activate"),children:N.is_active?s.jsx(Ss,{className:"h-5 w-5 text-green-600"}):s.jsx(Nb,{className:"h-5 w-5 text-gray-400"})}),s.jsx("button",{onClick:()=>C(N),className:"p-2 hover:bg-blue-50 text-blue-600 rounded-lg transition-colors",title:t("remittances.admin.edit"),children:s.jsx(Bi,{className:"h-5 w-5"})}),e&&s.jsx("button",{onClick:()=>k(N),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",title:t("remittances.admin.delete"),children:s.jsx(zn,{className:"h-5 w-5"})})]})]})},N.id))})]})},QD=({onNavigate:t})=>{const{t:e}=ct(),{products:r,combos:i,financialSettings:o,visualSettings:l}=Xt(),{user:c,isAdmin:u,isSuperAdmin:m}=Et(),[h,p]=w.useState("overview"),[g,y]=w.useState({totalProducts:0,totalCombos:0,totalUsers:0,pendingOrders:0,completedOrders:0,dailyRevenue:0,monthlyRevenue:0,totalRemittances:0,pendingRemittances:0,completedRemittances:0,dailyRemittanceIncome:0,monthlyRemittanceIncome:0,loading:!0}),[b,j]=w.useState({weekly:0,monthly:0,yearly:0,total:0,loading:!0}),[C,_]=w.useState([]),[A,k]=w.useState(null),[E,N]=w.useState(1),R=ce=>{if(!ce.expiryDate)return!1;const se=new Date,$=new Date(ce.expiryDate)-se,ne=Math.ceil($/(1e3*60*60*24));return ne<=30&&ne>0},T=r.filter(R);w.useEffect(()=>{(async()=>{const{data:se}=await V.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(se){_(se);const ue=se.find($=>$.is_base);ue&&(k(ue.id),N(1))}})()},[]),w.useEffect(()=>{if(A&&C.length>0){const ce=C.find(se=>se.id===A);ce&&N(ce.exchange_rate||1)}},[A,C]);const M=async()=>{try{j(ue=>({...ue,loading:!0}));const{data:ce,error:se}=await V.from("site_visits").select("visit_time");if(se){console.warn("Visit tracking not configured:",se.message),j({weekly:0,monthly:0,yearly:0,total:0,loading:!1,unavailable:!0});return}if(ce){const ue=new Date,$=new Date(ue-10080*60*1e3),ne=new Date(ue-720*60*60*1e3),ae=new Date(ue-365*24*60*60*1e3),P=ce.filter(ye=>new Date(ye.visit_time)>=$).length,F=ce.filter(ye=>new Date(ye.visit_time)>=ne).length,te=ce.filter(ye=>new Date(ye.visit_time)>=ae).length,me=ce.length;j({weekly:P,monthly:F,yearly:te,total:me,loading:!1,unavailable:!1})}}catch(ce){console.error("Error fetching visit stats:",ce),j({weekly:0,monthly:0,yearly:0,total:0,loading:!1,unavailable:!0})}},I=async()=>{try{y(J=>({...J,loading:!0}));const[ce,se,ue,$,ne]=await Promise.all([V.from("products").select("id",{count:"exact",head:!0}),V.from("combo_products").select("id",{count:"exact",head:!0}),V.from("user_profiles").select("id",{count:"exact",head:!0}),V.from("orders").select("id, status, payment_status, total_amount, created_at"),V.from("remittances").select("id, status, commission_total, created_at")]),ae=ce.count||0,P=se.count||0,F=ue.count||0,te=$.data||[],me=ne.data||[],ye=te.filter(J=>J.payment_status==="pending").length,_e=te.filter(J=>J.payment_status==="validated"&&J.status==="pending").length,xe=te.filter(J=>J.status==="processing").length,Ne=te.filter(J=>J.status==="shipped").length,De=te.filter(J=>J.status==="delivered").length,Fe=te.filter(J=>J.status==="completed").length,ie=te.filter(J=>J.status==="cancelled").length,je=ye+_e+xe+Ne+De,W=ye+_e,O=new Date,he=new Date(O-1440*60*1e3),B=new Date(O-720*60*60*1e3),G=te.filter(J=>new Date(J.created_at)>=he&&["delivered","completed","processing"].includes(J.status)).reduce((J,Me)=>J+(parseFloat(Me.total_amount)||0),0),le=te.filter(J=>new Date(J.created_at)>=B&&["delivered","completed","processing"].includes(J.status)).reduce((J,Me)=>J+(parseFloat(Me.total_amount)||0),0),Pe=me.length,Ke=me.filter(J=>["payment_pending","payment_proof_uploaded","payment_rejected"].includes(J.status)).length,ze=me.filter(J=>J.status==="completed").length,Ie=me.filter(J=>new Date(J.created_at)>=he&&J.status==="completed").reduce((J,Me)=>J+(parseFloat(Me.commission_total)||0),0),rt=me.filter(J=>new Date(J.created_at)>=B&&J.status==="completed").reduce((J,Me)=>J+(parseFloat(Me.commission_total)||0),0);y({totalProducts:ae,totalCombos:P,totalUsers:F,pendingOrders:W,completedOrders:Fe,paymentPending:ye,paymentValidated:_e,processing:xe,shipped:Ne,delivered:De,cancelled:ie,totalActive:je,dailyRevenue:G,monthlyRevenue:le,totalRemittances:Pe,pendingRemittances:Ke,completedRemittances:ze,dailyRemittanceIncome:Ie,monthlyRemittanceIncome:rt,loading:!1})}catch(ce){console.error("Error fetching dashboard stats:",ce),y(se=>({...se,loading:!1}))}};w.useEffect(()=>{c&&(u||m)&&(I(),M())},[c,u,m]);const Q=g.dailyRevenue*(o.productProfit/100),H=g.monthlyRevenue*(o.productProfit/100),be=C.find(ce=>ce.id===A),z=be?.symbol||"$",de=be?.code||"USD",ee=ce=>(ce*E).toFixed(2);return!c||!u&&!m?s.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 px-4",children:s.jsxs(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-effect p-8 rounded-2xl max-w-md w-full text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-500 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Kk,{className:"w-8 h-8 text-white"})}),s.jsx("h2",{className:"text-2xl font-bold mb-2",style:Xe(l),children:e("dashboard.privateAccess")}),s.jsx("p",{className:"text-gray-600",children:e("dashboard.adminOnly")})]})}):s.jsx("div",{className:"min-h-screen py-8 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"flex justify-between items-start mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",style:Xe(l),children:e("dashboard.title")}),s.jsx("p",{className:"text-xl text-gray-600",children:e("dashboard.subtitle")})]}),h==="overview"&&s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[e("dashboard.selectCurrency"),":"]}),s.jsx("select",{value:A||"",onChange:ce=>k(ce.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:C.map(ce=>s.jsxs("option",{value:ce.id,children:[ce.code," (",ce.symbol,")"]},ce.id))})]}),s.jsxs("button",{onClick:()=>{I(),M()},disabled:g.loading,className:"flex items-center gap-2 px-4 py-2 bg-white rounded-xl shadow hover:shadow-md transition-shadow",children:[s.jsx(ls,{className:`w-4 h-4 ${g.loading?"animate-spin":""}`}),s.jsx("span",{className:"text-sm font-medium",children:e("dashboard.refresh")})]})]})]}),s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex items-center gap-4 mb-8 border-b border-gray-200",children:[s.jsxs("button",{onClick:()=>p("overview"),className:`flex items-center gap-2 px-6 py-3 font-medium transition-all ${h==="overview"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(rc,{className:"h-5 w-5"}),e("dashboard.overviewTab")]}),s.jsxs("button",{onClick:()=>p("orders"),className:`flex items-center gap-2 px-6 py-3 font-medium transition-all ${h==="orders"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(Cb,{className:"h-5 w-5"}),e("dashboard.ordersTab")]}),s.jsxs("button",{onClick:()=>p("remittances"),className:`flex items-center gap-2 px-6 py-3 font-medium transition-all ${h==="remittances"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(lo,{className:"h-5 w-5"}),e("dashboard.remittancesTab")]}),s.jsxs("button",{onClick:()=>p("remittance-types"),className:`flex items-center gap-2 px-6 py-3 font-medium transition-all ${h==="remittance-types"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(kb,{className:"h-5 w-5"}),e("dashboard.remittancesKindTab")]})]}),h==="overview"&&s.jsxs(s.Fragment,{children:[T.length>0&&s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-lg mb-8",role:"alert",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"py-1",children:s.jsx(Ln,{className:"h-6 w-6 text-yellow-500 mr-4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:e("dashboard.expirationWarning.title")}),s.jsx("p",{className:"text-sm",children:e("dashboard.expirationWarning.description",{count:T.length})})]})]})}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[{title:e("dashboard.stats.dailyRevenue"),value:g.dailyRevenue,icon:St,color:"from-green-500 to-emerald-600"},{title:e("dashboard.stats.monthlyRevenue"),value:g.monthlyRevenue,icon:$i,color:"from-blue-500 to-cyan-600"},{title:e("dashboard.stats.dailyProfit"),value:Q,icon:rc,color:"from-purple-500 to-pink-600"},{title:e("dashboard.stats.monthlyProfit"),value:H,icon:$i,color:"from-orange-500 to-red-600"}].map((ce,se)=>s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:se*.1},className:"glass-effect p-6 rounded-2xl hover-lift",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${ce.color} rounded-xl flex items-center justify-center`,children:s.jsx(ce.icon,{className:"w-6 h-6 text-white"})})}),s.jsxs("h3",{className:"text-2xl font-bold mb-1",children:[z,ee(ce.value)," ",de]}),s.jsx("p",{className:"text-gray-600 text-sm",children:ce.title})]},se))}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[{title:e("dashboard.stats.totalProducts"),value:g.totalProducts,icon:vr},{title:e("dashboard.stats.totalCombos"),value:g.totalCombos,icon:_o},{title:e("dashboard.stats.pendingOrders"),value:g.pendingOrders,icon:rc},{title:e("dashboard.stats.totalUsers"),value:g.totalUsers,icon:Ss}].map((ce,se)=>s.jsx(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4+se*.1},className:"glass-effect p-6 rounded-2xl hover-lift",children:s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center mr-3",children:s.jsx(ce.icon,{className:"w-5 h-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",children:ce.value}),s.jsx("p",{className:"text-gray-600 text-sm",children:ce.title})]})]})},se))}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"glass-effect p-8 rounded-2xl",children:[s.jsx("h3",{className:"text-2xl font-semibold mb-6",children:e("dashboard.profitBreakdown")}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold mb-2",children:e("dashboard.dailyBreakdown")}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[e("dashboard.grossRevenue"),":"]}),s.jsxs("span",{className:"font-semibold",children:[z,ee(g.dailyRevenue)," ",de]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[e("dashboard.costs"),":"]}),s.jsxs("span",{className:"font-semibold text-red-600",children:["-",z,ee(g.dailyRevenue-Q)," ",de]})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2 mt-1",children:[s.jsxs("span",{children:[e("dashboard.netProfit"),":"]}),s.jsxs("span",{className:"font-bold text-green-600",children:[z,ee(Q)," ",de]})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:[e("dashboard.profitMargin"),":"]}),s.jsxs("span",{children:[o.productProfit,"%"]})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold mb-2",children:e("dashboard.monthlyBreakdown")}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[e("dashboard.grossRevenue"),":"]}),s.jsxs("span",{className:"font-semibold",children:[z,ee(g.monthlyRevenue)," ",de]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[e("dashboard.costs"),":"]}),s.jsxs("span",{className:"font-semibold text-red-600",children:["-",z,ee(g.monthlyRevenue-H)," ",de]})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2 mt-1",children:[s.jsxs("span",{children:[e("dashboard.netProfit"),":"]}),s.jsxs("span",{className:"font-bold text-green-600",children:[z,ee(H)," ",de]})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:[e("dashboard.profitMargin"),":"]}),s.jsxs("span",{children:[o.productProfit,"%"]})]})]})]})]})]}),s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"glass-effect p-8 rounded-2xl",children:[s.jsxs("h3",{className:"text-2xl font-semibold mb-6",children:[" ",e("dashboard.orderSummary")]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center bg-yellow-50 p-3 rounded-lg border-l-4 border-yellow-500",children:[s.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.paymentPending")]}),s.jsx("span",{className:"text-lg font-bold text-yellow-600",children:g.paymentPending||0})]}),s.jsxs("div",{className:"flex justify-between items-center bg-green-50 p-3 rounded-lg border-l-4 border-green-500",children:[s.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.paymentValidated")]}),s.jsx("span",{className:"text-lg font-bold text-green-600",children:g.paymentValidated||0})]}),s.jsxs("div",{className:"flex justify-between items-center bg-blue-50 p-3 rounded-lg border-l-4 border-blue-500",children:[s.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.processing")]}),s.jsx("span",{className:"text-lg font-bold text-blue-600",children:g.processing||0})]}),s.jsxs("div",{className:"flex justify-between items-center bg-purple-50 p-3 rounded-lg border-l-4 border-purple-500",children:[s.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.shipped")]}),s.jsx("span",{className:"text-lg font-bold text-purple-600",children:g.shipped||0})]}),s.jsxs("div",{className:"flex justify-between items-center bg-teal-50 p-3 rounded-lg border-l-4 border-teal-500",children:[s.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.delivered")]}),s.jsx("span",{className:"text-lg font-bold text-teal-600",children:g.delivered||0})]}),s.jsxs("div",{className:"flex justify-between items-center bg-green-100 p-3 rounded-lg border-l-4 border-green-600",children:[s.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.completed")]}),s.jsx("span",{className:"text-lg font-bold text-green-700",children:g.completedOrders||0})]}),s.jsxs("div",{className:"flex justify-between items-center bg-red-50 p-3 rounded-lg border-l-4 border-red-500",children:[s.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.cancelled")]}),s.jsx("span",{className:"text-lg font-bold text-red-600",children:g.cancelled||0})]}),s.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg border-t-2 border-gray-300 mt-2",children:[s.jsxs("span",{className:"font-bold",children:[" ",e("dashboard.orderStatus.totalActive")]}),s.jsx("span",{className:"text-xl font-bold text-gray-800",children:g.totalActive||0})]})]})]})]}),s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mb-12",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6",style:Xe(l),children:[e("dashboard.remittancesMetrics")," "]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{title:e("dashboard.stats.totalRemittances"),value:g.totalRemittances,icon:lo,color:"from-indigo-500 to-blue-600",type:"count"},{title:e("dashboard.stats.pendingRemittances"),value:g.pendingRemittances,icon:Gr,color:"from-yellow-500 to-orange-600",type:"count"},{title:e("dashboard.stats.completedRemittances"),value:g.completedRemittances,icon:qt,color:"from-green-500 to-emerald-600",type:"count"},{title:e("dashboard.stats.dailyRemittanceIncome"),value:g.dailyRemittanceIncome,icon:St,color:"from-purple-500 to-pink-600",type:"currency"},{title:e("dashboard.stats.monthlyRemittanceIncome"),value:g.monthlyRemittanceIncome,icon:$i,color:"from-orange-500 to-red-600",type:"currency"}].map((ce,se)=>s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5+se*.1},className:"glass-effect p-6 rounded-2xl hover-lift",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${ce.color} rounded-xl flex items-center justify-center`,children:s.jsx(ce.icon,{className:"w-6 h-6 text-white"})})}),s.jsx("h3",{className:"text-2xl font-bold mb-1",children:ce.type==="currency"?`${z}${ee(ce.value)} ${de}`:ce.value}),s.jsx("p",{className:"text-gray-600 text-sm",children:ce.title})]},se))})]}),s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"mt-8",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",style:Xe(l),children:e("dashboard.analyticsTitle")}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"glass-effect p-8 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-2xl font-semibold",children:e("dashboard.visits.title")}),s.jsx(Ss,{className:"w-8 h-8 text-blue-500"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.thisWeek")}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:b.weekly})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.thisMonth")}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b.monthly})]}),s.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.thisYear")}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:b.yearly})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border-2 border-green-500",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.allTime")}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.total})]})]})]}),s.jsxs("div",{className:"glass-effect p-8 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-2xl font-semibold",children:e("dashboard.stats.siteVisits")}),s.jsx($i,{className:"w-8 h-8 text-green-500"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:e("dashboard.visits.weekly")}),s.jsx("p",{className:"text-xs text-gray-500",children:e("dashboard.visits.thisWeek")})]}),s.jsx("p",{className:"text-xl font-bold text-blue-600",children:b.weekly})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:e("dashboard.visits.monthly")}),s.jsx("p",{className:"text-xs text-gray-500",children:e("dashboard.visits.thisMonth")})]}),s.jsx("p",{className:"text-xl font-bold text-purple-600",children:b.monthly})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-2 border-green-500",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:e("dashboard.visits.total")}),s.jsx("p",{className:"text-xs text-gray-500",children:e("dashboard.visits.allTime")})]}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:b.total})]})]})]})]})]})]}),h==="orders"&&s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:s.jsx(BD,{})}),h==="remittances"&&s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:s.jsx(KD,{})}),h==="remittance-types"&&s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:s.jsx(YD,{})})]})})},ZD=()=>{const{t,language:e}=ct(),{products:r,refreshProducts:i,financialSettings:o,categories:l,refreshCategories:c,combos:u,refreshCombos:m,testimonials:h,refreshTestimonials:p,visualSettings:g}=Xt(),[y,b]=w.useState([]),[j,C]=w.useState(null),[_,A]=w.useState(null),[k,E]=w.useState({});w.useEffect(()=>{const O=async()=>{const{data:B}=await V.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(B){b(B);const le=B.find(Pe=>Pe.is_base);le&&(C(le.id),A(le.id))}const{data:G}=await V.from("exchange_rates").select("*").eq("is_active",!0);if(G){const le={};G.forEach(Pe=>{le[`${Pe.from_currency_id}-${Pe.to_currency_id}`]=Pe.rate}),E(le)}},he=async()=>{await p(!0),await m(!0)};O(),he()},[]);const[N,R]=w.useState("inventory"),[T,M]=w.useState(null),[I,Q]=w.useState(null),[H,be]=w.useState({dbId:null,es:"",en:"",description_es:"",description_en:""}),[z,de]=w.useState(null),ee=(O,he,B,G=null)=>{O==="product"?M(le=>({...le,[he]:B})):O==="combo"&&Q(G?le=>({...le,[he]:{...le[he],[G]:B}}):le=>({...le,[he]:B}))},ce=()=>{M({id:null,name:"",description_es:"",description_en:"",basePrice:"",base_currency_id:j||"",category:"",stock:"",min_stock_alert:"",expiryDate:"",image:""}),de(null)},se=O=>{M({id:O.id,name:O.name_es||O.name,description_es:O.description_es||"",description_en:O.description_en||"",basePrice:O.base_price||O.basePrice||"",profitMargin:O.profit_margin||40,base_currency_id:O.base_currency_id||j||"",category:O.category?.id||O.category_id||"",stock:O.stock||"",min_stock_alert:O.min_stock_alert||"",expiryDate:O.expiry_date||O.expiryDate||"",image:O.image_url||O.image_file||O.image||"",sku:O.sku||""}),de(O.image_url||O.image_file||O.image||null)},ue=async O=>{const he=O.target.files?.[0];if(he)try{const B=await go(he,"product");if(!B.success){Y({title:"Error de validacin",description:B.errors.join(`
`),variant:"destructive"});return}de(B.base64),M(G=>({...G,image:B.base64})),Y({title:"Imagen optimizada",description:`${B.metadata.originalDimensions}  ${B.metadata.finalDimensions} (${B.metadata.compression} compresin)`})}catch(B){console.error("Error processing product image:",B),Y({title:"Error al procesar imagen",description:B.message,variant:"destructive"})}},$=async()=>{if(!T.name||!T.basePrice||!T.category){Y({title:t("vendor.validation.error"),description:t("vendor.validation.fillFields"),variant:"destructive"});return}if(!T.base_currency_id){Y({title:"Error",description:e==="es"?"Debe seleccionar una moneda":"You must select a currency",variant:"destructive"});return}try{if(!l.find(B=>B.id===T.category)){Y({title:"Error",description:"Categora no vlida",variant:"destructive"});return}const he={name:T.name,description_es:T.description_es||"",description_en:T.description_en||"",basePrice:parseFloat(T.basePrice),stock:parseInt(T.stock||0,10),min_stock_alert:parseInt(T.min_stock_alert||10,10),profitMargin:parseFloat(T.profitMargin||40),category_id:T.category,base_currency_id:T.base_currency_id,image:T.image||"",sku:T.sku||`SKU-${Date.now()}`,slug:T.name.toLowerCase().replace(/\s+/g,"-"),expiryDate:T.expiryDate||null};if(console.log(" Saving product with data:",he),console.log(" Stock value:",he.stock,typeof he.stock),console.log(" Category ID:",he.category_id,typeof he.category_id),console.log(" Expiry Date:",he.expiryDate,typeof he.expiryDate),T.id){const{error:B}=await jA(T.id,he);if(B)throw B;Y({title:t("vendor.productUpdated")})}else{const{error:B}=await wA(he);if(B)throw B;Y({title:t("vendor.productAdded")})}await i(),M(null),de(null)}catch(O){console.error("Error saving product:",O),Y({title:"Error",description:O.message,variant:"destructive"})}},ne=async()=>{if(!H.es||!H.en){Y({title:"Error",description:e==="es"?"Por favor complete los campos de nombre en ambos idiomas":"Please complete the name fields in both languages",variant:"destructive"});return}try{if(H.dbId){const{error:O}=await CA(H.dbId,{es:H.es,en:H.en,description_es:H.description_es,description_en:H.description_en});if(O)throw O;Y({title:e==="es"?"Categora actualizada":"Category Updated",description:e==="es"?"La categora se actualiz exitosamente":"The category was successfully updated"})}else{const{error:O}=await NA({es:H.es,en:H.en,description_es:H.description_es,description_en:H.description_en});if(O)throw O;Y({title:e==="es"?"Categora creada":"Category Created",description:e==="es"?"La categora se cre exitosamente":"The category was successfully created"})}await c(),be({dbId:null,es:"",en:"",description_es:"",description_en:""})}catch(O){console.error("Error saving category:",O),Y({title:"Error",description:O.message||(e==="es"?"Error al guardar la categora":"Error saving category"),variant:"destructive"})}},ae=O=>{be({dbId:O.id,es:O.name_es||O.es,en:O.name_en||O.en,description_es:O.description_es||"",description_en:O.description_en||""})},P=async O=>{if(confirm(e==="es"?"Est seguro de que desea eliminar esta categora?":"Are you sure you want to delete this category?"))try{const{error:B}=await SA(O);if(B)throw B;await c(),Y({title:e==="es"?"Categora eliminada":"Category Deleted",description:e==="es"?"La categora se elimin exitosamente":"The category was successfully deleted"})}catch(B){console.error("Error deleting category:",B),Y({title:"Error",description:B.message||(e==="es"?"Error al eliminar la categora":"Error deleting category"),variant:"destructive"})}},[F,te]=w.useState(null),me=()=>{Q({id:null,name:"",profitMargin:"",shipping:{type:"paid",value:0},products:[],productQuantities:{},image:""}),te(null)},ye=O=>{const he={},B=[];O.items&&O.items.length>0&&O.items.forEach(G=>{B.push(G.product.id),he[G.product.id]=G.quantity||1}),Q({...O,products:B,productQuantities:he}),te(O.image_url||O.image||null)},_e=async O=>{const he=O.target.files?.[0];if(he)try{const B=await go(he,"combo");if(!B.success){Y({title:"Error de validacin",description:B.errors.join(`
`),variant:"destructive"});return}te(B.base64),Q(G=>({...G,image:B.base64})),Y({title:"Imagen optimizada",description:`${B.metadata.originalDimensions}  ${B.metadata.finalDimensions} (${B.metadata.compression} compresin)`})}catch(B){console.error("Error processing combo image:",B),Y({title:"Error al procesar imagen",description:B.message,variant:"destructive"})}},xe=O=>{Q(he=>{const B=he.products.includes(O),G=B?he.products.filter(Pe=>Pe!==O):[...he.products,O],le={...he.productQuantities};return B?delete le[O]:le[O]=1,{...he,products:G,productQuantities:le}})},Ne=(O,he)=>{Q(B=>({...B,productQuantities:{...B.productQuantities,[O]:parseInt(he)||1}}))},De=async()=>{if(!I.name){Y({title:t("vendor.validation.error"),description:t("vendor.validation.fillFields"),variant:"destructive"});return}try{const O=(I.products||[]).map(B=>({productId:B,quantity:I.productQuantities[B]||1})),he={name:I.name,description:I.description||"",image:I.image||"",productsWithQuantities:O,profitMargin:parseFloat(I.profitMargin||o.comboProfit),slug:I.name.toLowerCase().replace(/\s+/g,"-")};if(I.id){const{error:B}=await PA(I.id,he);if(B)throw B;Y({title:t("vendor.comboUpdated")})}else{const{error:B}=await kA(he);if(B)throw B;Y({title:t("vendor.comboAdded")})}await m(!0),Q(null),te(null)}catch(O){console.error("Error saving combo:",O),Y({title:"Error",description:O.message,variant:"destructive"})}},Fe=(O,he,B)=>{if(!O||!he||!B||he===B)return O;const G=`${he}-${B}`,le=k[G];return le?parseFloat(O)*le:O},ie=O=>{if(!O||!_)return{base:0,final:0};let he=0;(O.products||[]).forEach(le=>{const Pe=r.find(Ke=>Ke.id===le);if(Pe){const Ke=parseFloat(Pe.base_price||0),ze=Pe.base_currency_id,Ie=O.productQuantities?.[le]||1;let rt=Ke;ze&&ze!==_&&(rt=Fe(Ke,ze,_)),he+=rt*Ie}});const B=parseFloat(O.profitMargin||o.comboProfit)/100,G=he*(1+B);return{base:he.toFixed(2),final:G.toFixed(2)}},je=async(O,he)=>{try{const{error:B}=await RA(O,!he);if(B)throw B;Y({title:e==="es"?"Actualizado":"Updated",description:e==="es"?`Testimonio ${he?"oculto":"visible"}`:`Testimonial ${he?"hidden":"visible"}`}),await p(!0)}catch(B){console.error("Error toggling testimonial visibility:",B),Y({title:"Error",description:B.message||(e==="es"?"Error al actualizar testimonio":"Error updating testimonial"),variant:"destructive"})}},W=async(O,he)=>{try{const{error:B}=await OA(O,!he);if(B)throw B;Y({title:e==="es"?"Actualizado":"Updated",description:e==="es"?`Testimonio ${he?"normal":"destacado"}`:`Testimonial ${he?"unfeatured":"featured"}`}),await p(!0)}catch(B){console.error("Error toggling testimonial featured status:",B),Y({title:"Error",description:B.message||(e==="es"?"Error al destacar testimonio":"Error featuring testimonial"),variant:"destructive"})}};return s.jsxs("div",{className:"container mx-auto py-8 px-4",children:[s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",style:Xe(g),children:t("vendor.title")}),s.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:t("vendor.subtitle")})]}),s.jsxs("div",{className:"flex justify-center mb-8 border-b",children:[s.jsxs(we,{variant:N==="inventory"?"default":"ghost",onClick:()=>R("inventory"),className:"rounded-b-none",style:N==="inventory"?Qe(g):{},children:[s.jsx(vr,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.inventory")]}),s.jsxs(we,{variant:N==="categories"?"default":"ghost",onClick:()=>R("categories"),className:"rounded-b-none",style:N==="categories"?Qe(g):{},children:[s.jsx(Cb,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.categories")]}),s.jsxs(we,{variant:N==="combos"?"default":"ghost",onClick:()=>R("combos"),className:"rounded-b-none",style:N==="combos"?Qe(g):{},children:[s.jsx(Tk,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.combos")]}),s.jsxs(we,{variant:N==="management"?"default":"ghost",onClick:()=>R("management"),className:"rounded-b-none",style:N==="management"?Qe(g):{},children:[s.jsx(Vk,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.management")]})]}),N==="inventory"&&s.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},children:[s.jsx("div",{className:"flex justify-end mb-6",children:s.jsxs(we,{onClick:ce,style:Qe(g),children:[s.jsx(Rr,{className:"mr-2 h-4 w-4"}),t("vendor.actions.addProduct")]})}),T&&s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl mb-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-6",children:T.id?t("vendor.addProduct.editTitle"):t("vendor.addProduct.title")}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("vendor.addProduct.name")," *"]}),s.jsx("input",{type:"text",value:T.name,onChange:O=>ee("product","name",O.target.value),placeholder:t("vendor.addProduct.namePlaceholder"),className:"w-full input-style",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("vendor.addProduct.category")," *"]}),s.jsxs("select",{value:T.category,onChange:O=>ee("product","category",O.target.value),className:"w-full input-style",required:!0,children:[s.jsx("option",{value:"",children:e==="es"?"Seleccionar categora":"Select category"}),l.map(O=>s.jsx("option",{value:O.id,children:e==="es"?O.name_es:O.name_en},O.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripcin (Espaol)":"Description (Spanish)"}),s.jsx("textarea",{value:T.description_es,onChange:O=>ee("product","description_es",O.target.value),placeholder:e==="es"?"Descripcin del producto en espaol":"Product description in Spanish",rows:3,className:"w-full input-style"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripcin (Ingls)":"Description (English)"}),s.jsx("textarea",{value:T.description_en,onChange:O=>ee("product","description_en",O.target.value),placeholder:e==="es"?"Descripcin del producto en ingls":"Product description in English",rows:3,className:"w-full input-style"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("vendor.addProduct.basePrice")," *"]}),s.jsx("input",{type:"number",step:"0.01",value:T.basePrice,onChange:O=>ee("product","basePrice",O.target.value),placeholder:"0.00",className:"w-full input-style",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.addProduct.currency")}),s.jsx("select",{value:T.base_currency_id,onChange:O=>ee("product","base_currency_id",O.target.value),className:"w-full input-style",children:y.map(O=>s.jsxs("option",{value:O.id,children:[O.code," - ",e==="es"?O.name_es:O.name_en]},O.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.inventory.stock")}),s.jsx("input",{type:"number",value:T.stock,onChange:O=>ee("product","stock",O.target.value),placeholder:"0",className:"w-full input-style"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Alerta de Stock Mnimo":"Minimum Stock Alert"}),s.jsx("input",{type:"number",value:T.min_stock_alert,onChange:O=>ee("product","min_stock_alert",O.target.value),placeholder:"10",className:"w-full input-style"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.inventory.expiryDate")}),s.jsx("input",{type:"date",value:T.expiryDate,onChange:O=>ee("product","expiryDate",O.target.value),className:"w-full input-style"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.addProduct.image")}),z&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Vista Previa:":"Preview:"}),s.jsx("div",{className:"aspect-square max-w-sm mx-auto rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:s.jsx("img",{src:z,alt:"Preview",className:"w-full h-full object-cover"})})]}),s.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:ue,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Recomendado: imagen cuadrada (1:1), mx 5MB":"Recommended: square image (1:1), max 5MB"})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[s.jsx(we,{variant:"outline",onClick:()=>M(null),children:t("vendor.addProduct.cancel")}),s.jsxs(we,{onClick:$,style:Qe(g),children:[s.jsx(ns,{className:"w-4 h-4 mr-2"}),t("vendor.addProduct.save")]})]})]}),s.jsx("div",{className:"glass-effect rounded-2xl overflow-hidden",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:t("vendor.inventory.product")}),s.jsx("th",{className:"p-4",children:e==="es"?"Categora":"Category"}),s.jsx("th",{className:"p-4",children:e==="es"?"Moneda":"Currency"}),s.jsx("th",{className:"p-4",children:t("vendor.inventory.stock")}),s.jsx("th",{className:"p-4",children:t("vendor.inventory.price")}),s.jsx("th",{className:"p-4",children:t("vendor.inventory.expiryDate")}),s.jsx("th",{})]})}),s.jsx("tbody",{children:r.map(O=>{const he=y.find(Ie=>Ie.id===O.base_currency_id),B=O.stock!==void 0?O.stock:0,G=O.min_stock_alert||10,le=B===0,Pe=B>0&&B<=G,ze=(Ie=>{if(!Ie)return null;const rt=new Date,J=new Date(Ie),Me=Math.ceil((J-rt)/(1e3*60*60*24)),et=Me/30;return Me<0?{status:"expired",color:"bg-red-50",icon:Qt,iconColor:"text-red-600",days:Me}:et<=1?{status:"critical",color:"bg-pink-50",icon:Qt,iconColor:"text-red-500",days:Me}:et<=3?{status:"warning",color:"bg-yellow-50",icon:Ln,iconColor:"text-yellow-600",days:Me}:{status:"ok",color:"",icon:null,iconColor:"",days:Me}})(O.expiry_date||O.expiryDate);return s.jsxs("tr",{className:`border-b last:border-none ${ze?.color||""} ${le?"opacity-60":""}`,children:[s.jsx("td",{className:`p-4 font-medium ${le?"line-through text-gray-400":""}`,children:O.name_es||O.name||"Sin nombre"}),s.jsx("td",{className:"p-4 text-gray-600",children:O.category?e==="es"?O.category.name_es:O.category.name_en:"Sin categora"}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:he?.code||"USD"})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:le?"line-through text-gray-400":"",children:B}),le&&s.jsx(Qt,{className:"h-4 w-4 text-red-600",title:e==="es"?"Sin stock":"Out of stock"}),Pe&&s.jsx(Ln,{className:"h-4 w-4 text-orange-500",title:e==="es"?"Stock bajo":"Low stock"})]})}),s.jsxs("td",{className:"p-4",children:[he?.symbol||"$",O.final_price?Number(O.final_price).toFixed(2):O.base_price?Number(O.base_price).toFixed(2):"0.00"]}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:O.expiry_date||O.expiryDate?new Date(O.expiry_date||O.expiryDate).toLocaleDateString():"N/A"}),ze?.icon&&s.jsx(ze.icon,{className:`h-4 w-4 ${ze.iconColor}`,title:ze.status==="expired"?e==="es"?"Expirado":"Expired":e==="es"?`${ze.days} das restantes`:`${ze.days} days left`})]})}),s.jsx("td",{className:"p-4 text-right",children:s.jsx(we,{variant:"ghost",size:"icon",onClick:()=>se(O),children:s.jsx(Bi,{className:"h-4 w-4"})})})]},O.id)})})]})})]}),N==="categories"&&s.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"glass-effect p-8 rounded-2xl mb-8",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-6",children:H.dbId?e==="es"?"Editar Categora":"Edit Category":e==="es"?"Nueva Categora":"New Category"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Nombre (Espaol) *":"Name (Spanish) *"}),s.jsx("input",{type:"text",value:H.es,onChange:O=>be({...H,es:O.target.value}),placeholder:e==="es"?"Ej: Electrnica":"Ex: Electronics",className:"input-style w-full",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Nombre (Ingls) *":"Name (English) *"}),s.jsx("input",{type:"text",value:H.en,onChange:O=>be({...H,en:O.target.value}),placeholder:e==="es"?"Ej: Electronics":"Ex: Electronics",className:"input-style w-full",required:!0})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripcin (Espaol)":"Description (Spanish)"}),s.jsx("textarea",{value:H.description_es,onChange:O=>be({...H,description_es:O.target.value}),placeholder:e==="es"?"Descripcin opcional...":"Optional description...",className:"input-style w-full",rows:"3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripcin (Ingls)":"Description (English)"}),s.jsx("textarea",{value:H.description_en,onChange:O=>be({...H,description_en:O.target.value}),placeholder:e==="es"?"Descripcin opcional...":"Optional description...",className:"input-style w-full",rows:"3"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{onClick:ne,style:Qe(g),children:H.dbId?s.jsxs(s.Fragment,{children:[s.jsx(ns,{className:"mr-2 h-4 w-4"}),e==="es"?"Actualizar Categora":"Update Category"]}):s.jsxs(s.Fragment,{children:[s.jsx(Rr,{className:"mr-2 h-4 w-4"}),e==="es"?"Crear Categora":"Create Category"]})}),H.dbId&&s.jsxs(we,{variant:"outline",onClick:()=>be({dbId:null,es:"",en:"",description_es:"",description_en:""}),children:[s.jsx(Jt,{className:"mr-2 h-4 w-4"}),e==="es"?"Cancelar":"Cancel"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:e==="es"?"Categoras Existentes":"Existing Categories"}),l.length===0?s.jsx("p",{className:"text-gray-500 text-center py-8",children:e==="es"?"No hay categoras an":"No categories yet"}):s.jsx("ul",{className:"space-y-2",children:l.map(O=>s.jsxs("li",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("span",{className:"font-semibold",children:e==="es"?O.name_es||O.es:O.name_en||O.en}),s.jsxs("span",{className:"text-gray-500 text-sm",children:["(",O.slug,")"]})]}),(O.description_es||O.description_en)&&s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e==="es"?O.description_es:O.description_en})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(we,{variant:"ghost",size:"icon",onClick:()=>ae(O),children:s.jsx(Bi,{className:"h-4 w-4"})}),s.jsx(we,{variant:"destructive",size:"icon",onClick:()=>P(O.id),style:{backgroundColor:g.destructiveBgColor||"#dc2626",color:g.destructiveTextColor||"#ffffff"},onMouseEnter:he=>he.currentTarget.style.backgroundColor=g.destructiveHoverBgColor||"#b91c1c",onMouseLeave:he=>he.currentTarget.style.backgroundColor=g.destructiveBgColor||"#dc2626",children:s.jsx(zn,{className:"h-4 w-4"})})]})]},O.id))})]})]}),N==="combos"&&s.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:e==="es"?"Moneda:":"Currency:"}),s.jsx("select",{value:_||"",onChange:O=>A(O.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:y.map(O=>s.jsxs("option",{value:O.id,children:[O.code," (",O.symbol,")"]},O.id))})]}),s.jsxs(we,{onClick:me,style:Qe(g),children:[s.jsx(Rr,{className:"mr-2 h-4 w-4"}),t("vendor.combos.new")]})]}),I&&s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl mb-12",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-6",children:I.id?t("vendor.combos.edit"):t("vendor.combos.new")}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("input",{type:"text",value:I.name,onChange:O=>ee("combo","name",O.target.value),placeholder:t("vendor.combos.name"),className:"w-full input-style mb-4"}),s.jsx("input",{type:"number",value:I.profitMargin,onChange:O=>ee("combo","profitMargin",O.target.value),placeholder:`${t("vendor.combos.profitMargin")} (def: ${o.comboProfit}%)`,className:"w-full input-style mb-4"}),F&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Vista Previa:":"Preview:"}),s.jsx("div",{className:"aspect-square max-w-sm mx-auto rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:s.jsx("img",{src:F,alt:"Preview",className:"w-full h-full object-cover"})})]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.combos.coverImage")}),s.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:_e,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 mb-4"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:t("vendor.combos.products")}),s.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2 p-2 border rounded-lg",children:r.map(O=>{const he=O.stock!==void 0?O.stock:0,B=O.min_stock_alert||10,G=he===0,le=he>0&&he<=B,Pe=I.productQuantities[O.id]||1,Ke=I.products.includes(O.id)&&he<Pe;return s.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${G?"bg-red-50 border border-red-200":le||Ke?"bg-yellow-50 border border-yellow-200":"border border-transparent"}`,children:[s.jsx("input",{type:"checkbox",id:`p-${O.id}`,checked:I.products.includes(O.id),onChange:()=>xe(O.id),disabled:G,className:"flex-shrink-0"}),s.jsx("label",{htmlFor:`p-${O.id}`,className:`cursor-pointer flex-1 ${G?"text-gray-400 line-through":""}`,children:O.name_es||O.name}),G&&s.jsx(Qt,{className:"h-4 w-4 text-red-600 flex-shrink-0",title:e==="es"?"Sin stock":"Out of stock"}),le&&!G&&s.jsx(Ln,{className:"h-4 w-4 text-orange-500 flex-shrink-0",title:e==="es"?`Stock: ${he}`:`Stock: ${he}`}),Ke&&s.jsx(Ln,{className:"h-4 w-4 text-orange-600 flex-shrink-0",title:e==="es"?`Insuficiente: ${he} disponible, ${Pe} requerido`:`Insufficient: ${he} available, ${Pe} required`}),I.products.includes(O.id)&&s.jsx("input",{type:"number",min:"1",value:I.productQuantities[O.id]||1,onChange:ze=>Ne(O.id,ze.target.value),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Cant."})]},O.id)})})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"glass-effect p-3 rounded-lg text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[t("vendor.combos.basePrice"),":"]}),s.jsxs("span",{className:"font-semibold",children:[y.find(O=>O.id===_)?.symbol||"$",ie(I).base," ",y.find(O=>O.id===_)?.code||"USD"]})]}),s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsxs("span",{children:[t("vendor.combos.finalPrice"),":"]}),s.jsxs("span",{className:"text-blue-600",children:[y.find(O=>O.id===_)?.symbol||"$",ie(I).final," ",y.find(O=>O.id===_)?.code||"USD"]})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[s.jsx(we,{variant:"outline",onClick:()=>Q(null),children:t("vendor.addProduct.cancel")}),s.jsxs(we,{onClick:De,style:Qe(g),children:[s.jsx(ns,{className:"w-4 h-4 mr-2"}),t("vendor.combos.save")]})]})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(O=>{const he=(O.products||[]).reduce((ze,Ie)=>{const rt=O.productQuantities?.[Ie]||1;return ze+rt},0),B=[];(O.products||[]).forEach(ze=>{const Ie=r.find(Me=>Me.id===ze),rt=O.productQuantities?.[ze]||1,J=Ie?.stock||0;J===0?B.push({productName:Ie?.name_es||Ie?.name||"Unknown",issue:"out_of_stock",required:rt,available:0}):J<rt&&B.push({productName:Ie?.name_es||Ie?.name||"Unknown",issue:"insufficient",required:rt,available:J})});const G=O.is_active===!1||B.length>0,le=ie(O),Pe=y.find(ze=>ze.id===_)?.symbol||"$",Ke=y.find(ze=>ze.id===_)?.code||"USD";return s.jsxs("div",{className:`glass-effect p-4 rounded-lg relative ${G?"border-2 border-red-300":""}`,children:[G&&s.jsxs("div",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded flex items-center gap-1",children:[s.jsx(Qt,{className:"h-3 w-3"}),e==="es"?"DESACTIVADO":"DEACTIVATED"]}),s.jsx(we,{variant:"ghost",size:"icon",onClick:()=>ye(O),className:"absolute top-2 right-2",children:s.jsx(Bi,{className:"h-4 w-4"})}),s.jsx("h3",{className:`font-bold pr-8 ${G?"line-through text-gray-500 mt-8":""}`,children:O.name_es||O.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[he," ",e==="es"?"elementos":"items"," (",O.products?.length||0," ",e==="es"?"productos":"products",")"]}),G&&B.length>0&&s.jsxs("div",{className:"mt-2 p-2 bg-red-100 border border-red-300 rounded text-xs",children:[s.jsx("p",{className:"font-semibold text-red-800 mb-1",children:e==="es"?"Problemas de stock:":"Stock issues:"}),s.jsx("ul",{className:"space-y-1",children:B.map((ze,Ie)=>s.jsxs("li",{className:"flex items-start gap-1 text-red-700",children:[s.jsx(Ln,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),s.jsxs("span",{children:[s.jsxs("strong",{children:[ze.productName,":"]})," ",ze.issue==="out_of_stock"?e==="es"?"Sin stock":"Out of stock":`Insuf. (Req: ${ze.required}, ${e==="es"?"Disp:":"Avail:"} ${ze.available})`]})]},Ie))})]}),s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("p",{className:`text-sm ${G?"text-gray-400 line-through":"text-gray-500"}`,children:["Base:"," ",Pe,le.base," ",Ke]}),s.jsxs("p",{className:`text-lg font-bold ${G?"text-gray-400 line-through":"text-green-600"}`,children:["Final:"," ",Pe,le.final," ",Ke]})]})]},O.id)})})]}),N==="management"&&s.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:t("vendor.management.testimonials")}),s.jsx("div",{className:"glass-effect p-4 rounded-lg space-y-2",children:h.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:e==="es"?"No hay testimonios an":"No testimonials yet"}):h.map(O=>s.jsxs("div",{className:"flex justify-between items-center p-3 border-b hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("p",{className:"font-semibold",children:[e==="es"?"Usuario":"User"," #",O.user_id?.substring(0,8)]}),O.is_featured&&s.jsx(oo,{className:"w-4 h-4 text-purple-500",title:e==="es"?"Destacado":"Featured"}),s.jsx("span",{className:"text-yellow-500",children:"".repeat(O.rating)})]}),s.jsxs("p",{className:"text-sm italic text-gray-600",children:['"',O.comment,'"']}),O.user_photo&&s.jsx("img",{src:O.user_photo,alt:"User",className:"w-8 h-8 rounded-full mt-2"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{size:"sm",variant:O.is_featured?"default":"outline",onClick:()=>W(O.id,O.is_featured),title:e==="es"?"Destacar/Quitar destaque":"Feature/Unfeature",children:O.is_featured?s.jsxs(s.Fragment,{children:[s.jsx(oo,{className:"mr-2 h-4 w-4"}),e==="es"?"Destacado":"Featured"]}):s.jsxs(s.Fragment,{children:[s.jsx(Jt,{className:"mr-2 h-4 w-4"}),"Normal"]})}),s.jsx(we,{size:"sm",variant:O.is_visible?"default":"outline",onClick:()=>je(O.id,O.is_visible),children:O.is_visible?s.jsxs(s.Fragment,{children:[s.jsx(Ss,{className:"mr-2 h-4 w-4"}),t("vendor.management.hide")]}):s.jsxs(s.Fragment,{children:[s.jsx(Nb,{className:"mr-2 h-4 w-4"}),t("vendor.management.show")]})})]})]},O.id))})]})})]})},JD=({onNavigate:t})=>{const{t:e}=ct(),{user:r,isAdmin:i,isSuperAdmin:o,userRole:l}=Et();return console.log("AdminPage Access Check:",{user:r?.email,isAdmin:i,isSuperAdmin:o,userRole:l}),!r||!i&&!o?s.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 px-4",children:s.jsxs(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-effect p-8 rounded-2xl max-w-md w-full text-center",children:[s.jsx("h2",{className:"text-2xl font-bold gradient-text mb-2",children:e("dashboard.privateAccess")}),s.jsx("p",{className:"text-gray-600",children:e("dashboard.adminOnly")})]})}):s.jsx("div",{children:s.jsx(ZD,{onNavigate:t})})},mj=async()=>{try{const{data:t,error:e}=await V.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(e)throw e;return{data:t||[],error:null}}catch(t){return console.error("Error fetching currencies:",t),{data:[],error:t}}},XD=async t=>{try{const{data:e,error:r}=await V.from("currencies").insert([{code:t.code.toUpperCase(),name_es:t.name_es,name_en:t.name_en,symbol:t.symbol,is_base:t.is_base||!1,is_active:!0}]).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error creating currency:",e),{data:null,error:e}}},e3=async(t,e)=>{try{const{data:r,error:i}=await V.from("currencies").update({name_es:e.name_es,name_en:e.name_en,symbol:e.symbol,is_base:e.is_base!==void 0?e.is_base:!1,is_active:e.is_active!==void 0?e.is_active:!0,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:r,error:null}}catch(r){return console.error("Error updating currency:",r),{data:null,error:r}}},t3=async t=>{try{const{error:e}=await V.from("currencies").update({is_active:!1}).eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error deleting currency:",e),{data:!1,error:e}}},r3=async(t,e)=>{try{if(t===e)return{data:1,error:null};const{data:r,error:i}=await V.from("currencies").select("id, code").in("code",[t,e]).eq("is_active",!0);if(i)throw i;if(!r||r.length!==2)throw new Error("One or both currencies not found");const o=r.find(p=>p.code===t),l=r.find(p=>p.code===e),{data:c,error:u}=await V.from("exchange_rates").select("rate").eq("from_currency_id",o.id).eq("to_currency_id",l.id).eq("is_active",!0).order("effective_date",{ascending:!1}).limit(1).maybeSingle();if(u)throw u;if(c)return{data:parseFloat(c.rate),error:null};const{data:m,error:h}=await V.from("exchange_rates").select("rate").eq("from_currency_id",l.id).eq("to_currency_id",o.id).eq("is_active",!0).order("effective_date",{ascending:!1}).limit(1).maybeSingle();if(h)throw h;return m?{data:1/parseFloat(m.rate),error:null}:(console.warn(`No exchange rate found for ${t} to ${e}, using 1:1`),{data:1,error:null})}catch(r){return console.error("Error getting exchange rate:",r),{data:null,error:r}}},ov=async(t,e,r)=>{try{const{data:i,error:o}=await r3(e,r);if(o)throw o;return{data:t*i,error:null}}catch(i){return console.error("Error converting currency:",i),{data:null,error:i}}},s3=async()=>{try{const t=await fetch("https://api.exchangerate-api.com/v4/latest/USD");if(!t.ok)throw new Error("Failed to fetch exchange rates");const e=await t.json();return{data:{EUR:1/(e.rates.EUR||1),GBP:1/(e.rates.GBP||1),CAD:1/(e.rates.CAD||1),MXN:1/(e.rates.MXN||1),USD:1},error:null}}catch(t){return console.error("Error fetching official rates:",t),{data:null,error:t}}},n3=async()=>{try{const{data:t,error:e}=await V.from("exchange_rates").select(`
        id,
        rate,
        effective_date,
        is_active,
        from_currency:from_currency_id(id, code, name_es, name_en, symbol),
        to_currency:to_currency_id(id, code, name_es, name_en, symbol)
      `).eq("is_active",!0).order("effective_date",{ascending:!1});if(e)throw e;return{data:t||[],error:null}}catch(t){return console.error("Error fetching exchange rates:",t),{data:[],error:t}}},lv=async t=>{try{const{data:e,error:r}=await V.from("exchange_rates").upsert({from_currency_id:t.fromCurrencyId,to_currency_id:t.toCurrencyId,rate:parseFloat(t.rate),effective_date:t.effectiveDate||new Date().toISOString().split("T")[0],is_active:!0},{onConflict:"from_currency_id,to_currency_id,effective_date"}).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error saving exchange rate:",e),{data:null,error:e}}},i3=async t=>{try{const{error:e}=await V.from("exchange_rates").update({is_active:!1}).eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error deleting exchange rate:",e),{data:!1,error:e}}},a3=()=>{const{t,language:e}=ct(),{financialSettings:r,setFinancialSettings:i,notificationSettings:o,setNotificationSettings:l,visualSettings:c,setVisualSettings:u,zelleAccounts:m,setZelleAccounts:h}=Xt(),{user:p,isAdmin:g}=Et(),[y,b]=w.useState("financiero"),[j,C]=w.useState(r),[_,A]=w.useState(o),[k,E]=w.useState(c),[N,R]=w.useState({companyName:c.companyName||"PapuEnvos",logo:c.logo||"",primaryColor:c.primaryColor||"#2563eb",secondaryColor:c.secondaryColor||"#9333ea",useGradient:c.useGradient!==void 0?c.useGradient:!0,headerBgColor:c.headerBgColor||"#ffffff",headerTextColor:c.headerTextColor||"#1f2937",headingColor:c.headingColor||"#1f2937",useHeadingGradient:c.useHeadingGradient!==void 0?c.useHeadingGradient:!0,buttonBgColor:c.buttonBgColor||"#2563eb",buttonTextColor:c.buttonTextColor||"#ffffff",buttonHoverBgColor:c.buttonHoverBgColor||"#1d4ed8",destructiveBgColor:c.destructiveBgColor||"#dc2626",destructiveTextColor:c.destructiveTextColor||"#ffffff",destructiveHoverBgColor:c.destructiveHoverBgColor||"#b91c1c",accentColor:c.accentColor||"#9333ea",pageBgColor:c.pageBgColor||"#f9fafb",cardBgColor:c.cardBgColor||"#ffffff"}),[T,M]=w.useState(c.logo||""),[I,Q]=w.useState([]),[H,be]=w.useState(null),[z,de]=w.useState(null),[ee,ce]=w.useState(!1),[se,ue]=w.useState({code:"",name_es:"",name_en:"",symbol:"",is_base:!1}),[$,ne]=w.useState({}),[ae,P]=w.useState([]),[F,te]=w.useState(!1),[me,ye]=w.useState(null),[_e,xe]=w.useState(null),[Ne,De]=w.useState({}),[Fe,ie]=w.useState([]),[je,W]=w.useState(!1),[O,he]=w.useState(null),[B,G]=w.useState([]),[le,Pe]=w.useState(!1),[Ke,ze]=w.useState(!1),[Ie,rt]=w.useState({fromCurrencyId:"",toCurrencyId:"",rate:"",effectiveDate:new Date().toISOString().split("T")[0]});w.useEffect(()=>{Me(),J(),gn(),ur(),Ts()},[]);const J=async()=>{ce(!0);try{const{data:D,error:X}=await s3();if(X)throw X;de(D)}catch(D){console.error("Error loading official rates:",D)}finally{ce(!1)}};if(!p||!g)return s.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 px-4",children:s.jsxs(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-effect p-8 rounded-2xl max-w-md w-full text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",style:Xe(c),children:t("dashboard.privateAccess")}),s.jsx("p",{className:"text-gray-600",children:t("dashboard.adminOnly")})]})});const Me=async()=>{try{const{data:D,error:X}=await mj();if(X)throw X;Q(D||[])}catch(D){console.error("Error loading currencies:",D),Y({title:"Error",description:e==="es"?"Error al cargar monedas":"Error loading currencies",variant:"destructive"})}},et=()=>{i(j),Y({title:t("settings.saveSuccess")})},er=async()=>{if(!se.code||!se.name_es||!se.name_en||!se.symbol){Y({title:"Error",description:e==="es"?"Por favor complete todos los campos":"Please fill all fields",variant:"destructive"});return}try{const{supabase:D}=await dn(async()=>{const{supabase:Ee}=await Promise.resolve().then(()=>gA);return{supabase:Ee}},void 0);se.is_base&&await D.from("currencies").update({is_base:!1}).eq("is_base",!0).neq("id",H?.id||"00000000-0000-0000-0000-000000000000");let X;if(H){const{data:Ee,error:We}=await e3(H.id,se);if(We)throw We;X=Ee,Y({title:e==="es"?"Moneda actualizada":"Currency Updated",description:e==="es"?"La moneda se actualiz exitosamente":"Currency was updated successfully"})}else{const{data:Ee,error:We}=await XD(se);if(We)throw We;X=Ee,Y({title:e==="es"?"Moneda creada":"Currency Created",description:e==="es"?"La moneda se cre exitosamente":"Currency was created successfully"})}ue({code:"",name_es:"",name_en:"",symbol:"",is_base:!1}),be(null),await Me()}catch(D){console.error("Error saving currency:",D),Y({title:"Error",description:D.message,variant:"destructive"})}},br=async D=>{be(D),ue({code:D.code,name_es:D.name_es,name_en:D.name_en,symbol:D.symbol,is_base:D.is_base||!1})},dr=async D=>{if(confirm(e==="es"?"Est seguro de que desea eliminar esta moneda? Esto tambin eliminar sus tasas de cambio.":"Are you sure you want to delete this currency? This will also remove its exchange rates."))try{await V.from("exchange_rates").update({is_active:!1}).or(`from_currency_id.eq.${D},to_currency_id.eq.${D}`);const{error:Ee}=await t3(D);if(Ee)throw Ee;Y({title:e==="es"?"Moneda eliminada":"Currency Deleted",description:e==="es"?"La moneda y sus tasas de cambio se eliminaron exitosamente":"Currency and its exchange rates were deleted successfully"}),await Me()}catch(Ee){console.error("Error deleting currency:",Ee),Y({title:"Error",description:Ee.message,variant:"destructive"})}},tr=()=>{be(null),ue({code:"",name_es:"",name_en:"",symbol:"",is_base:!1})},tt=()=>{l(_),Y({title:t("settings.saveSuccess")})},ur=async()=>{W(!0);try{const D=await vD();if(D.success){const X=ND(),Ee=D.zones.map(ht=>ht.province_name),We=X.filter(ht=>!Ee.includes(ht)),it=[...D.zones,...We.map(ht=>({id:`temp-${ht}`,province_name:ht,shipping_cost:0,is_active:!1,free_shipping:!1,is_new:!0}))];ie(it.sort((ht,Hc)=>ht.province_name.localeCompare(Hc.province_name)))}}catch(D){console.error("Error loading shipping zones:",D),Y({title:e==="es"?"Error al cargar zonas":"Error loading zones",description:D.message,variant:"destructive"})}finally{W(!1)}},Ps=async(D,X)=>{he(D);try{const Ee=Fe.find(We=>We.id===D);Ee.is_new?(await jD({provinceName:Ee.province_name,shippingCost:X.shipping_cost??Ee.shipping_cost,isActive:X.is_active??Ee.is_active??!0,freeShipping:X.free_shipping??Ee.free_shipping??!1})).success&&(await ur(),Y({title:e==="es"?" Zona creada":" Zone created"})):(await _D(D,{shippingCost:X.shipping_cost,isActive:X.is_active,freeShipping:X.free_shipping})).success&&(ie(it=>it.map(ht=>ht.id===D?{...ht,...X}:ht)),Y({title:e==="es"?" Zona actualizada":" Zone updated"}))}catch(Ee){console.error("Error updating shipping zone:",Ee),Y({title:e==="es"?"Error al guardar":"Save error",description:Ee.message,variant:"destructive"})}finally{he(null)}},Ts=async()=>{Pe(!0);try{const{data:D,error:X}=await n3();!X&&D&&G(D)}catch(D){console.error("Error loading exchange rates:",D)}finally{Pe(!1)}},Wc=async()=>{if(!Ie.fromCurrencyId||!Ie.toCurrencyId||!Ie.rate){Y({title:e==="es"?"Datos incompletos":"Incomplete data",description:e==="es"?"Por favor complete todos los campos":"Please fill all fields",variant:"destructive"});return}if(Ie.fromCurrencyId===Ie.toCurrencyId){Y({title:"Error",description:e==="es"?"Las monedas deben ser diferentes":"Currencies must be different",variant:"destructive"});return}try{const D=await lv(Ie);if(D.error)throw D.error;const X={fromCurrencyId:Ie.toCurrencyId,toCurrencyId:Ie.fromCurrencyId,rate:(1/parseFloat(Ie.rate)).toString(),effectiveDate:Ie.effectiveDate},Ee=await lv(X);if(Ee.error)throw Ee.error;await Ts(),ze(!1),rt({fromCurrencyId:"",toCurrencyId:"",rate:"",effectiveDate:new Date().toISOString().split("T")[0]}),Y({title:e==="es"?" Tasas guardadas":" Rates saved",description:e==="es"?"La tasa de cambio y su inversa se guardaron correctamente":"Exchange rate and its inverse saved successfully"})}catch(D){console.error("Error saving rate:",D),Y({title:e==="es"?"Error al guardar":"Save error",description:D.message,variant:"destructive"})}},Ji=async D=>{if(confirm(e==="es"?"Eliminar esta tasa?":"Delete this rate?"))try{const X=await i3(D);if(X.error)throw X.error;await Ts(),Y({title:e==="es"?" Tasa eliminada":" Rate deleted"})}catch(X){console.error("Error deleting rate:",X),Y({title:"Error",description:X.message,variant:"destructive"})}},Xi=async D=>{const X=D.target.files?.[0];if(X)try{const Ee=await go(X,"logo");if(!Ee.success){Y({title:e==="es"?"Error de validacin":"Validation error",description:Ee.errors.join(`
`),variant:"destructive"});return}M(Ee.base64),R(We=>({...We,logo:Ee.base64})),Y({title:e==="es"?"Logo cargado":"Logo uploaded",description:e==="es"?`${Ee.metadata.originalDimensions}  ${Ee.metadata.finalDimensions}`:`${Ee.metadata.originalDimensions}  ${Ee.metadata.finalDimensions}`})}catch(Ee){console.error("Error processing logo:",Ee),Y({title:e==="es"?"Error al procesar imagen":"Error processing image",description:Ee.message,variant:"destructive"})}},ea=()=>{u({...c,...N}),document.title=N.companyName,Y({title:t("settings.saveSuccess"),description:e==="es"?"Personalizacin guardada. Recarga la pgina para ver todos los cambios.":"Customization saved. Reload the page to see all changes."})},gn=async()=>{te(!0);try{const{data:D,error:X}=await nw();if(X)throw X;P(D||[])}catch(D){console.error("Error loading carousel slides:",D),Y({title:"Error al cargar diapositivas",description:D.message,variant:"destructive"})}finally{te(!1)}},ta=async()=>{try{const{data:D,error:X}=await MA({title_es:"",title_en:"",subtitle_es:"",subtitle_en:"",image_url:"",link_url:"",is_active:!1});if(X)throw X;await gn(),Y({title:e==="es"?"Diapositiva creada":"Slide created",description:e==="es"?"Nueva diapositiva agregada exitosamente":"New slide added successfully"})}catch(D){console.error("Error creating slide:",D),Y({title:"Error",description:D.message,variant:"destructive"})}},wr=async(D,X)=>{try{ye(D),xe(null);const{error:Ee}=await Bx(D,X);if(Ee)throw Ee;P(We=>We.map(it=>it.id===D?{...it,...X}:it)),ye(null),xe(D),setTimeout(()=>xe(null),1500)}catch(Ee){console.error("Error updating slide:",Ee),ye(null),Y({title:"Error al actualizar",description:Ee.message,variant:"destructive"})}},Mr=(D,X,Ee)=>{P(it=>it.map(ht=>ht.id===D?{...ht,[X]:Ee}:ht)),Ne[D]&&clearTimeout(Ne[D]);const We=setTimeout(()=>{wr(D,{[X]:Ee})},800);De(it=>({...it,[D]:We}))},ko=async D=>{if(confirm(e==="es"?"Eliminar esta diapositiva?":"Delete this slide?"))try{const{error:X}=await IA(D);if(X)throw X;await gn(),ne(Ee=>{const We={...Ee};return delete We[D],We}),Y({title:e==="es"?"Diapositiva eliminada":"Slide deleted",description:e==="es"?"La diapositiva fue eliminada exitosamente":"Slide was deleted successfully"})}catch(X){console.error("Error deleting slide:",X),Y({title:"Error",description:X.message,variant:"destructive"})}},Po=async(D,X)=>{try{ye(D),xe(null);const{error:Ee}=await Bx(D,{display_order:parseInt(X)});if(Ee)throw Ee;P(We=>We.map(it=>it.id===D?{...it,display_order:parseInt(X)}:it).sort((it,ht)=>(it.display_order??0)-(ht.display_order??0))),ye(null),xe(D),setTimeout(()=>xe(null),1500)}catch(Ee){console.error("Error updating slide order:",Ee),ye(null),Y({title:"Error",description:Ee.message,variant:"destructive"})}},To=async(D,X)=>{const Ee=X.target.files?.[0];if(Ee)try{const We=await go(Ee,"carousel");if(!We.success){Y({title:"Error de validacin",description:We.errors.join(`
`),variant:"destructive"});return}await wr(D,{image_url:We.base64}),ne(it=>({...it,[D]:We.base64})),Y({title:"Imagen optimizada",description:`${We.metadata.originalDimensions}  ${We.metadata.finalDimensions} (${We.metadata.compression} compresin)`})}catch(We){console.error("Error processing slide image:",We),Y({title:"Error al procesar imagen",description:We.message,variant:"destructive"})}},Ao=[{id:"financiero",label:e==="es"?"Financiero":"Financial",icon:St,color:"#2563eb"},{id:"envios",label:e==="es"?"Envos":"Shipping",icon:uo,color:"#f59e0b"},{id:"visual",label:"Visual",icon:Xu,color:"#9333ea"},{id:"contenido",label:e==="es"?"Contenido":"Content",icon:mx,color:"#10b981"}];return s.jsx("div",{className:"min-h-screen py-8 px-4",children:s.jsxs("div",{className:"container mx-auto max-w-7xl",children:[s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",style:Xe(c),children:t("settings.title")}),s.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:t("settings.subtitle")})]}),s.jsx("div",{className:"flex gap-2 mb-8 border-b pb-2",children:Ao.map(D=>s.jsxs("button",{onClick:()=>b(D.id),className:`flex items-center gap-2 px-6 py-3 rounded-t-lg font-medium transition-all ${y===D.id?"bg-white shadow-md border-b-2":"bg-gray-50 hover:bg-gray-100 text-gray-600"}`,style:y===D.id?{borderBottomColor:D.color,color:D.color}:{},children:[s.jsx(D.icon,{className:"h-5 w-5"}),D.label]},D.id))}),s.jsxs("div",{className:"space-y-12",children:[y==="financiero"&&s.jsxs(s.Fragment,{children:[s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[s.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[s.jsx(St,{className:"mr-3 text-blue-600"}),t("settings.financial.title")]}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("input",{type:"number",value:j.usdToLocal,onChange:D=>C({...j,usdToLocal:parseFloat(D.target.value)}),placeholder:t("settings.financial.usdToLocal"),className:"input-style"}),s.jsx("input",{type:"number",value:j.productProfit,onChange:D=>C({...j,productProfit:parseFloat(D.target.value)}),placeholder:t("settings.financial.productProfit"),className:"input-style"}),s.jsx("input",{type:"number",value:j.comboProfit,onChange:D=>C({...j,comboProfit:parseFloat(D.target.value)}),placeholder:t("settings.financial.comboProfit"),className:"input-style"}),s.jsx("input",{type:"number",value:j.remittanceProfit,onChange:D=>C({...j,remittanceProfit:parseFloat(D.target.value)}),placeholder:t("settings.financial.remittanceProfit"),className:"input-style"})]}),s.jsxs("div",{className:"border-t pt-6 mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:e==="es"?"Configuracin de Envo":"Shipping Configuration"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Tipo de Envo":"Shipping Type"}),s.jsxs("select",{value:j.shippingType||"undetermined",onChange:D=>C({...j,shippingType:D.target.value}),className:"input-style w-full",children:[s.jsx("option",{value:"free",children:e==="es"?"Gratis":"Free"}),s.jsx("option",{value:"fixed",children:e==="es"?"Tarifa Fija":"Fixed Rate"}),s.jsx("option",{value:"undetermined",children:e==="es"?"Por Determinar (segn ubicacin)":"To Be Determined (based on location)"}),s.jsx("option",{value:"calculated",children:e==="es"?"Calculado (con umbral gratis)":"Calculated (with free threshold)"})]})]}),j.shippingType==="fixed"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Costo Fijo de Envo ($)":"Fixed Shipping Cost ($)"}),s.jsx("input",{type:"number",step:"0.01",value:j.shippingFixedAmount||0,onChange:D=>C({...j,shippingFixedAmount:parseFloat(D.target.value)}),placeholder:"0.00",className:"input-style w-full"})]}),(j.shippingType==="calculated"||j.shippingType==="undetermined")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Umbral para Envo Gratis ($)":"Free Shipping Threshold ($)"}),s.jsx("input",{type:"number",step:"0.01",value:j.shippingFreeThreshold||100,onChange:D=>C({...j,shippingFreeThreshold:parseFloat(D.target.value)}),placeholder:"100.00",className:"input-style w-full"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Pedidos superiores a este monto tendrn envo gratis":"Orders above this amount will have free shipping"})]})]}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[j.shippingType==="free"&&(e==="es"?" Envo gratis: No se cobrar envo en ningn pedido":" Free shipping: No shipping charge on any order"),j.shippingType==="fixed"&&(e==="es"?" Tarifa fija: Se cobrar el mismo monto de envo en todos los pedidos":" Fixed rate: Same shipping amount will be charged on all orders"),j.shippingType==="undetermined"&&(e==="es"?' Por determinar: El costo de envo se mostrar como "Por determinar" y se calcular segn la ubicacin del destinatario':' To be determined: Shipping cost will show as "To be determined" and will be calculated based on recipient location'),j.shippingType==="calculated"&&(e==="es"?" Calculado: Envo gratis si el pedido supera el umbral, de lo contrario se determinar segn ubicacin":" Calculated: Free shipping if order exceeds threshold, otherwise determined by location")]})})]}),s.jsxs("div",{className:"border-t pt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold",children:t("settings.financial.currencies")}),s.jsxs(we,{onClick:J,disabled:ee,variant:"outline",size:"sm",children:[s.jsx(St,{className:"w-4 h-4 mr-2"}),ee?e==="es"?"Cargando...":"Loading...":e==="es"?"Cargar Tasas Oficiales":"Load Official Rates"]})]}),z&&s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:[s.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:e==="es"?"Tasas Oficiales (Referencia)":"Official Rates (Reference)"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm",children:Object.entries(z).map(([D,X])=>s.jsxs("div",{className:"bg-white p-2 rounded flex justify-between",children:[s.jsxs("span",{className:"font-bold",children:[D,":"]}),s.jsx("span",{className:"font-mono",children:Number(X).toFixed(4)})]},D))}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:e==="es"?"Tasas de referencia. Configure las tasas de cambio en la seccin de Exchange Rates.":"Reference rates. Configure exchange rates in the Exchange Rates section."})]}),s.jsx("div",{className:"space-y-2 mb-6",children:I.map(D=>s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"font-bold w-16",children:D.code}),s.jsx("span",{className:"flex-1",children:e==="es"?D.name_es:D.name_en}),s.jsx("span",{className:"w-12 text-center",children:D.symbol}),D.is_base&&s.jsx("span",{className:"text-xs text-white px-2 py-1 rounded font-semibold",style:{background:c.useGradient?`linear-gradient(to right, ${c.primaryColor}, ${c.secondaryColor})`:c.primaryColor},children:"Base"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(we,{variant:"outline",size:"icon",onClick:()=>br(D),children:s.jsx(Bi,{className:"h-4 w-4"})}),s.jsx(we,{variant:"destructive",size:"icon",onClick:()=>dr(D.id),children:s.jsx(zn,{className:"h-4 w-4"})})]})]},D.id))}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-lg font-semibold mb-3",children:H?e==="es"?"Editar Moneda":"Edit Currency":e==="es"?"Nueva Moneda":"New Currency"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.code")}),s.jsx("input",{value:se.code,onChange:D=>ue({...se,code:D.target.value.toUpperCase()}),placeholder:"USD",className:"input-style w-full",maxLength:3,disabled:H!==null})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.nameES")}),s.jsx("input",{value:se.name_es,onChange:D=>ue({...se,name_es:D.target.value}),placeholder:"Dlar",className:"input-style w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.nameEN")}),s.jsx("input",{value:se.name_en,onChange:D=>ue({...se,name_en:D.target.value}),placeholder:"Dollar",className:"input-style w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.symbol")}),s.jsx("input",{value:se.symbol,onChange:D=>ue({...se,symbol:D.target.value}),placeholder:"$",className:"input-style w-full",maxLength:3})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:se.is_base,onChange:D=>ue({...se,is_base:D.target.checked}),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Moneda Base":"Base Currency"})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e==="es"?'La moneda base se usa como referencia. Configure las tasas de cambio en la seccin "Tasas de Cambio".':'The base currency is used as reference. Configure exchange rates in the "Exchange Rates" section.'})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{onClick:er,className:"flex-1",style:Qe(c),children:H?s.jsxs(s.Fragment,{children:[s.jsx(ns,{className:"h-4 w-4 mr-2"}),t("settings.financial.updateCurrency")]}):s.jsxs(s.Fragment,{children:[s.jsx(Rr,{className:"h-4 w-4 mr-2"}),t("settings.financial.addCurrency")]})}),H&&s.jsx(we,{variant:"outline",onClick:tr,children:e==="es"?"Cancelar":"Cancel"})]})]})]}),s.jsx("div",{className:"mt-6 text-right",children:s.jsxs(we,{onClick:et,style:Qe(c),children:[s.jsx(ns,{className:"mr-2 h-4 w-4"}),t("settings.financial.save")]})})]}),s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"glass-effect p-6 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold",style:Xe(c),children:e==="es"?"Tasas de Cambio":"Exchange Rates"}),s.jsxs(we,{onClick:()=>ze(!Ke),style:Qe(c),children:[s.jsx(Rr,{className:"h-4 w-4 mr-2"}),e==="es"?"Nueva Tasa":"New Rate"]})]}),s.jsx("p",{className:"text-gray-600 mb-6",children:e==="es"?"Configure las tasas de cambio entre diferentes monedas. Las tasas se usan para convertir precios y totales.":"Configure exchange rates between different currencies. Rates are used to convert prices and totals."}),Ke&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[s.jsx("h4",{className:"text-lg font-semibold mb-3",children:e==="es"?"Nueva Tasa de Cambio":"New Exchange Rate"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:e==="es"?"Desde Moneda":"From Currency"}),s.jsxs("select",{value:Ie.fromCurrencyId,onChange:D=>rt({...Ie,fromCurrencyId:D.target.value}),className:"input-style w-full",children:[s.jsx("option",{value:"",children:e==="es"?"Seleccionar...":"Select..."}),I.map(D=>s.jsxs("option",{value:D.id,children:[D.code," - ",e==="es"?D.name_es:D.name_en]},D.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:e==="es"?"Hacia Moneda":"To Currency"}),s.jsxs("select",{value:Ie.toCurrencyId,onChange:D=>rt({...Ie,toCurrencyId:D.target.value}),className:"input-style w-full",children:[s.jsx("option",{value:"",children:e==="es"?"Seleccionar...":"Select..."}),I.map(D=>s.jsxs("option",{value:D.id,children:[D.code," - ",e==="es"?D.name_es:D.name_en]},D.id))]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-sm font-medium",children:e==="es"?"Tasa":"Rate"}),z&&Ie.toCurrencyId&&(()=>{const D=I.find(Ee=>Ee.id===Ie.toCurrencyId),X=I.find(Ee=>Ee.id===Ie.fromCurrencyId);return D&&X&&z[D.code]?s.jsxs("span",{className:"text-xs text-blue-600",children:["Ref: ",z[D.code].toFixed(6)]}):null})()]}),s.jsx("input",{type:"number",step:"0.000001",value:Ie.rate,onChange:D=>rt({...Ie,rate:D.target.value}),placeholder:"1.0",className:"input-style w-full"}),z&&Ie.toCurrencyId&&(()=>{const D=I.find(X=>X.id===Ie.toCurrencyId);return D&&z[D.code]?s.jsx("button",{type:"button",onClick:()=>rt({...Ie,rate:z[D.code].toString()}),className:"text-xs text-blue-600 hover:text-blue-800 underline mt-1",children:e==="es"?"Usar tasa oficial":"Use official rate"}):null})()]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:e==="es"?"Fecha Efectiva":"Effective Date"}),s.jsx("input",{type:"date",value:Ie.effectiveDate,onChange:D=>rt({...Ie,effectiveDate:D.target.value}),className:"input-style w-full"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(we,{onClick:Wc,className:"flex-1",style:Qe(c),children:[s.jsx(ns,{className:"h-4 w-4 mr-2"}),e==="es"?"Guardar Tasa":"Save Rate"]}),s.jsx(we,{variant:"outline",onClick:()=>{ze(!1),rt({fromCurrencyId:"",toCurrencyId:"",rate:"",effectiveDate:new Date().toISOString().split("T")[0]})},children:e==="es"?"Cancelar":"Cancel"})]})]}),le?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):B.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:e==="es"?"No hay tasas de cambio configuradas. Cree una nueva tasa usando el botn de arriba.":"No exchange rates configured. Create a new rate using the button above."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 px-3",children:e==="es"?"Desde":"From"}),s.jsx("th",{className:"text-left py-2 px-3",children:e==="es"?"Hacia":"To"}),s.jsx("th",{className:"text-right py-2 px-3",children:e==="es"?"Tasa":"Rate"}),s.jsx("th",{className:"text-left py-2 px-3",children:e==="es"?"Fecha":"Date"}),s.jsx("th",{className:"text-center py-2 px-3",children:e==="es"?"Acciones":"Actions"})]})}),s.jsx("tbody",{children:B.map(D=>s.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[s.jsxs("td",{className:"py-2 px-3",children:[s.jsx("span",{className:"font-bold",children:D.from_currency.code}),s.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e==="es"?D.from_currency.name_es:D.from_currency.name_en})]}),s.jsxs("td",{className:"py-2 px-3",children:[s.jsx("span",{className:"font-bold",children:D.to_currency.code}),s.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e==="es"?D.to_currency.name_es:D.to_currency.name_en})]}),s.jsx("td",{className:"text-right py-2 px-3 font-mono",children:Number(D.rate).toFixed(6)}),s.jsx("td",{className:"py-2 px-3 text-sm text-gray-600",children:new Date(D.effective_date).toLocaleDateString(e==="es"?"es-ES":"en-US")}),s.jsx("td",{className:"py-2 px-3",children:s.jsx("div",{className:"flex justify-center",children:s.jsx(we,{variant:"destructive",size:"icon",onClick:()=>Ji(D.id),children:s.jsx(zn,{className:"h-4 w-4"})})})})]},D.id))})]})})]})]}),y==="visual"&&s.jsx(s.Fragment,{children:s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[s.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[s.jsx(Xu,{className:"mr-3 text-purple-600"}),t("settings.visual.title")]}),s.jsxs("div",{className:"mb-8 pb-8 border-b",children:[s.jsxs("h3",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx(Xu,{className:"mr-3 text-indigo-600"}),e==="es"?"Personalizacin de Apariencia":"Appearance Customization"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:e==="es"?"Logo de la Empresa":"Company Logo"}),T&&s.jsx("div",{className:"mb-4 flex justify-center",children:s.jsx("div",{className:"relative w-40 h-40 rounded-lg overflow-hidden border-2 border-gray-300 bg-white p-2 flex items-center justify-center",children:s.jsx("img",{src:T,alt:"Logo preview",className:"max-w-full max-h-full object-contain"})})}),s.jsx("input",{type:"file",accept:"image/png,image/svg+xml,image/webp",onChange:Xi,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Recomendado: PNG o SVG con fondo transparente, 200x200px, mx 2MB":"Recommended: PNG or SVG with transparent background, 200x200px, max 2MB"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Nombre de la Empresa":"Company Name"}),s.jsx("input",{type:"text",value:N.companyName,onChange:D=>R(X=>({...X,companyName:D.target.value})),placeholder:"PapuEnvos",className:"w-full input-style"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Se mostrar en el encabezado y en el ttulo de la pgina":"Will be displayed in the header and page title"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color Primario":"Primary Color"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.primaryColor,onChange:D=>R(X=>({...X,primaryColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.primaryColor,onChange:D=>R(X=>({...X,primaryColor:D.target.value})),placeholder:"#2563eb",className:"flex-1 input-style font-mono text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color Secundario":"Secondary Color"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.secondaryColor,onChange:D=>R(X=>({...X,secondaryColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.secondaryColor,onChange:D=>R(X=>({...X,secondaryColor:D.target.value})),placeholder:"#9333ea",className:"flex-1 input-style font-mono text-sm"})]})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:N.useGradient,onChange:D=>R(X=>({...X,useGradient:D.target.checked})),className:"rounded w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Usar gradiente en elementos de marca":"Use gradient in brand elements"})]})}),s.jsxs("div",{className:"border-t pt-6 mt-6",children:[s.jsx("h4",{className:"text-lg font-semibold mb-4",children:e==="es"?"Colores del Encabezado":"Header Colors"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Fondo":"Background Color"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.headerBgColor,onChange:D=>R(X=>({...X,headerBgColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.headerBgColor,onChange:D=>R(X=>({...X,headerBgColor:D.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Texto":"Text Color"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.headerTextColor,onChange:D=>R(X=>({...X,headerTextColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.headerTextColor,onChange:D=>R(X=>({...X,headerTextColor:D.target.value})),placeholder:"#1f2937",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),s.jsxs("div",{className:"border-t pt-6 mt-6",children:[s.jsx("h4",{className:"text-lg font-semibold mb-2",children:e==="es"?"Ttulos y Encabezados":"Headings and Titles"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e==="es"?"Colores para ttulos principales de pginas y secciones":"Colors for main page and section titles"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Ttulos":"Heading Color"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.headingColor,onChange:D=>R(X=>({...X,headingColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.headingColor,onChange:D=>R(X=>({...X,headingColor:D.target.value})),placeholder:"#1f2937",className:"flex-1 input-style font-mono text-sm"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Color slido cuando el gradiente est desactivado":"Solid color when gradient is disabled"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:N.useHeadingGradient,onChange:D=>R(X=>({...X,useHeadingGradient:D.target.checked})),className:"rounded w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Usar gradiente de marca en ttulos":"Use brand gradient in headings"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Aplica el gradiente de colores primario y secundario a los ttulos principales":"Applies the primary and secondary color gradient to main headings"})]})]})]}),s.jsxs("div",{className:"border-t pt-6 mt-6",children:[s.jsx("h4",{className:"text-lg font-semibold mb-4",children:e==="es"?"Colores de Botones":"Button Colors"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo del Botn":"Button Background"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.buttonBgColor,onChange:D=>R(X=>({...X,buttonBgColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.buttonBgColor,onChange:D=>R(X=>({...X,buttonBgColor:D.target.value})),placeholder:"#2563eb",className:"flex-1 input-style font-mono text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Texto del Botn":"Button Text"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.buttonTextColor,onChange:D=>R(X=>({...X,buttonTextColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.buttonTextColor,onChange:D=>R(X=>({...X,buttonTextColor:D.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Hover del Botn":"Button Hover"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.buttonHoverBgColor,onChange:D=>R(X=>({...X,buttonHoverBgColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.buttonHoverBgColor,onChange:D=>R(X=>({...X,buttonHoverBgColor:D.target.value})),placeholder:"#1d4ed8",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),s.jsxs("div",{className:"border-t pt-6 mt-6",children:[s.jsx("h4",{className:"text-lg font-semibold mb-2",children:e==="es"?"Botones Destructivos (Eliminar)":"Destructive Buttons (Delete)"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e==="es"?"Colores para acciones peligrosas como eliminar elementos":"Colors for dangerous actions like deleting items"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo":"Background"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.destructiveBgColor,onChange:D=>R(X=>({...X,destructiveBgColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.destructiveBgColor,onChange:D=>R(X=>({...X,destructiveBgColor:D.target.value})),placeholder:"#dc2626",className:"flex-1 input-style font-mono text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Texto":"Text"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.destructiveTextColor,onChange:D=>R(X=>({...X,destructiveTextColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.destructiveTextColor,onChange:D=>R(X=>({...X,destructiveTextColor:D.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hover"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.destructiveHoverBgColor,onChange:D=>R(X=>({...X,destructiveHoverBgColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.destructiveHoverBgColor,onChange:D=>R(X=>({...X,destructiveHoverBgColor:D.target.value})),placeholder:"#b91c1c",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),s.jsxs("div",{className:"border-t pt-6 mt-6",children:[s.jsx("h4",{className:"text-lg font-semibold mb-4",children:e==="es"?"Colores Adicionales":"Additional Colors"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Acento":"Accent Color"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.accentColor,onChange:D=>R(X=>({...X,accentColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.accentColor,onChange:D=>R(X=>({...X,accentColor:D.target.value})),placeholder:"#9333ea",className:"flex-1 input-style font-mono text-sm"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Para badges, enlaces y elementos destacados":"For badges, links and highlighted elements"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo de Pgina":"Page Background"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.pageBgColor,onChange:D=>R(X=>({...X,pageBgColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.pageBgColor,onChange:D=>R(X=>({...X,pageBgColor:D.target.value})),placeholder:"#f9fafb",className:"flex-1 input-style font-mono text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo de Tarjetas":"Card Background"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"color",value:N.cardBgColor,onChange:D=>R(X=>({...X,cardBgColor:D.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:N.cardBgColor,onChange:D=>R(X=>({...X,cardBgColor:D.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),s.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:e==="es"?"Vista Previa:":"Preview:"}),s.jsx("div",{className:"mb-4 p-4 rounded-lg shadow-md",style:{backgroundColor:N.headerBgColor},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[T?s.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:s.jsx("img",{src:T,alt:"Logo preview",className:"max-w-full max-h-full object-contain"})}):s.jsx("div",{className:"w-6 h-6 rounded flex items-center justify-center",style:{background:N.useGradient?`linear-gradient(to right, ${N.primaryColor}, ${N.secondaryColor})`:N.primaryColor},children:s.jsx(Or,{className:"w-4 h-4 text-white"})}),s.jsx("span",{className:"text-lg font-bold",style:{backgroundImage:N.useGradient?`linear-gradient(to right, ${N.primaryColor}, ${N.secondaryColor})`:`linear-gradient(to right, ${N.primaryColor}, ${N.primaryColor})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:N.companyName||"PapuEnvos"})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:"text-sm",style:{color:N.headerTextColor},children:e==="es"?"Men":"Menu"})})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-4 flex-wrap",children:[s.jsx("div",{className:"px-6 py-3 rounded-lg font-semibold transition-colors",style:{backgroundColor:N.buttonBgColor,color:N.buttonTextColor},onMouseEnter:D=>D.currentTarget.style.backgroundColor=N.buttonHoverBgColor,onMouseLeave:D=>D.currentTarget.style.backgroundColor=N.buttonBgColor,children:e==="es"?"Botn Estndar":"Standard Button"}),s.jsx("div",{className:"px-6 py-3 rounded-lg font-semibold text-white",style:{background:N.useGradient?`linear-gradient(to right, ${N.primaryColor}, ${N.secondaryColor})`:N.primaryColor},children:e==="es"?"Botn con Gradiente":"Gradient Button"}),s.jsx("div",{className:"px-6 py-3 rounded-lg font-semibold transition-colors",style:{backgroundColor:N.destructiveBgColor,color:N.destructiveTextColor},onMouseEnter:D=>D.currentTarget.style.backgroundColor=N.destructiveHoverBgColor,onMouseLeave:D=>D.currentTarget.style.backgroundColor=N.destructiveBgColor,children:e==="es"?"Botn Eliminar":"Delete Button"})]}),s.jsxs("div",{className:"flex gap-4 flex-wrap items-center",children:[s.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:`${N.accentColor}20`,color:N.accentColor},children:e==="es"?"Badge de Acento":"Accent Badge"}),s.jsx("span",{className:"font-semibold bg-clip-text text-transparent",style:{backgroundImage:N.useGradient?`linear-gradient(to right, ${N.primaryColor}, ${N.secondaryColor})`:`linear-gradient(to right, ${N.primaryColor}, ${N.primaryColor})`},children:e==="es"?"Texto con Gradiente":"Gradient Text"})]})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs(we,{onClick:ea,style:Qe(c),children:[s.jsx(ns,{className:"mr-2 h-4 w-4"}),e==="es"?"Guardar Personalizacin":"Save Customization"]})})]})]}),s.jsxs("div",{className:"border-t pt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold",children:t("settings.visual.slides")}),s.jsxs(we,{onClick:ta,style:Qe(c),children:[s.jsx(Rr,{className:"mr-2 h-4 w-4"}),t("settings.visual.addSlide")]})]}),s.jsx("div",{className:"space-y-4",children:F?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:e==="es"?"Cargando diapositivas...":"Loading slides..."})}):ae.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:e==="es"?"No hay diapositivas. Agrega una para comenzar.":"No slides. Add one to get started."})}):ae.map(D=>s.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[me===D.id&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 mb-2 bg-blue-50 p-2 rounded",children:[s.jsx(ls,{className:"h-4 w-4 animate-spin"}),s.jsx("span",{className:"font-medium",children:e==="es"?"Guardando...":"Saving..."})]}),_e===D.id&&me!==D.id&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 mb-2 bg-green-50 p-2 rounded",children:[s.jsx(oo,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:e==="es"?"Guardado ":"Saved "})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("settings.visual.order")}),s.jsx("input",{type:"number",value:D.display_order??0,onChange:X=>Po(D.id,X.target.value),className:"w-full input-style",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("settings.visual.linkUrl")}),s.jsx("input",{type:"url",value:D.link_url||"",onChange:X=>wr(D.id,{link_url:X.target.value}),placeholder:"https://...",className:"w-full input-style"})]})]}),(D.image_url||$[D.id])&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Vista Previa:":"Preview:"}),s.jsx("div",{className:"relative w-full aspect-[16/9] max-w-2xl rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:s.jsx("img",{src:$[D.id]||D.image_url,alt:"Preview",className:"w-full h-full object-cover"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("settings.visual.image")}),s.jsx("input",{type:"url",value:D.image_url||"",onChange:X=>wr(D.id,{image_url:X.target.value}),placeholder:"https://... or upload below",className:"w-full input-style mb-2"}),s.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:X=>To(D.id,X),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Recomendado: 1920x1080px (16:9), mx 5MB":"Recommended: 1920x1080px (16:9), max 5MB"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.mainText")," (ES)"]}),s.jsx("input",{type:"text",value:D.title_es||"",onChange:X=>Mr(D.id,"title_es",X.target.value),placeholder:"Ttulo principal en espaol",className:"w-full input-style"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.mainText")," (EN)"]}),s.jsx("input",{type:"text",value:D.title_en||"",onChange:X=>Mr(D.id,"title_en",X.target.value),placeholder:"Main title in English",className:"w-full input-style"})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.secondaryText")," (ES)"]}),s.jsx("input",{type:"text",value:D.subtitle_es||"",onChange:X=>Mr(D.id,"subtitle_es",X.target.value),placeholder:"Subttulo en espaol",className:"w-full input-style"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.secondaryText")," (EN)"]}),s.jsx("input",{type:"text",value:D.subtitle_en||"",onChange:X=>Mr(D.id,"subtitle_en",X.target.value),placeholder:"Subtitle in English",className:"w-full input-style"})]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:`slide-active-${D.id}`,checked:D.is_active??!0,onChange:X=>wr(D.id,{is_active:X.target.checked})}),s.jsx("label",{htmlFor:`slide-active-${D.id}`,className:"text-sm font-medium",children:t("settings.visual.active")})]}),s.jsxs(we,{variant:"destructive",size:"sm",onClick:()=>ko(D.id),children:[s.jsx(zn,{className:"h-4 w-4 mr-2"}),e==="es"?"Eliminar":"Delete"]})]})]},D.id))})]})]})}),y==="envios"&&s.jsx(s.Fragment,{children:s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[s.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[s.jsx(uo,{className:"mr-3",style:{color:c.primaryColor||"#2563eb"}}),e==="es"?"Zonas de Envo":"Shipping Zones"]}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:e==="es"?"Configura el costo de envo por provincia. Las provincias con costo $0 no aparecern en el selector de envo.":"Configure shipping cost by province. Provinces with $0 cost will not appear in the shipping selector."}),je?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(ls,{className:"h-6 w-6 animate-spin",style:{color:c.primaryColor}})}):s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Fe.map(D=>s.jsxs("div",{className:"p-4 border rounded-lg",style:{borderColor:D.is_active?c.primaryColor||"#2563eb":"#e5e7eb",backgroundColor:D.is_active?`${c.primaryColor||"#2563eb"}08`:"transparent"},children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fm,{className:"h-4 w-4",style:{color:c.primaryColor}}),s.jsx("span",{className:"font-medium",children:D.province_name})]}),O===D.id&&s.jsx(ls,{className:"h-4 w-4 animate-spin",style:{color:c.primaryColor}})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:D.free_shipping||!1,onChange:X=>Ps(D.id,{...D,free_shipping:X.target.checked,shipping_cost:X.target.checked?0:D.shipping_cost,is_active:!0}),className:"rounded"}),s.jsx("span",{className:"text-sm",children:e==="es"?"Envo Gratis":"Free Shipping"})]}),!D.free_shipping&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:e==="es"?"Costo de envo ($)":"Shipping cost ($)"}),s.jsx("input",{type:"number",min:"0",step:"0.01",value:D.shipping_cost||0,onChange:X=>{const Ee=parseFloat(X.target.value)||0;ie(We=>We.map(it=>it.id===D.id?{...it,shipping_cost:Ee}:it))},onBlur:X=>{const Ee=parseFloat(X.target.value)||0;Ee!==D.shipping_cost&&Ps(D.id,{...D,shipping_cost:Ee,is_active:Ee>0})},className:"input-style w-full text-sm",placeholder:"0.00"})]}),s.jsx("div",{className:"flex items-center gap-2 text-xs",children:D.free_shipping?s.jsx("span",{className:"px-2 py-1 rounded",style:{backgroundColor:`${c.successColor||"#10b981"}20`,color:c.successColor||"#10b981"},children:e==="es"?" Gratis":" Free"}):D.shipping_cost>0?s.jsx("span",{className:"px-2 py-1 rounded",style:{backgroundColor:`${c.primaryColor||"#2563eb"}20`,color:c.primaryColor||"#2563eb"},children:e==="es"?" Activo":" Active"}):s.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-500",children:e==="es"?"No disponible":"Not available"})})]})]},D.id))})]})}),y==="contenido"&&s.jsx(s.Fragment,{children:s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[s.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[s.jsx(mx,{className:"mr-3 text-green-600"}),t("settings.notifications.title")]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:t("settings.notifications.whatsapp")}),s.jsx("input",{type:"tel",value:_.whatsapp,onChange:D=>A({..._,whatsapp:D.target.value}),placeholder:"+1234567890",className:"w-full input-style"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Nmero de WhatsApp para soporte individual":"WhatsApp number for individual support"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Grupo de WhatsApp":"WhatsApp Group"}),s.jsx("input",{type:"text",value:_.whatsappGroup,onChange:D=>A({..._,whatsappGroup:D.target.value}),placeholder:"https://chat.whatsapp.com/xxxxx",className:"w-full input-style"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"URL del grupo de WhatsApp para notificaciones de pedidos":"WhatsApp group URL for order notifications"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:t("settings.notifications.adminEmail")}),s.jsx("input",{type:"email",value:_.adminEmail,onChange:D=>A({..._,adminEmail:D.target.value}),placeholder:"admin@example.com",className:"w-full input-style"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Email para recibir notificaciones de nuevos pedidos":"Email to receive new order notifications"})]})]}),s.jsx("div",{className:"mt-6 text-right",children:s.jsxs(we,{onClick:tt,style:Qe(c),children:[s.jsx(ns,{className:"mr-2 h-4 w-4"}),t("settings.notifications.save")]})})]})})]})]})})},o3=({onNavigate:t})=>{const{t:e,language:r}=ct(),{cart:i,updateCartQuantity:o,removeFromCart:l,clearCart:c,financialSettings:u,zelleAccounts:m,visualSettings:h,businessInfo:p,notificationSettings:g}=Xt(),{isAuthenticated:y,user:b}=Et(),j=w.useRef(),[C,_]=w.useState("cart"),[A,k]=w.useState({fullName:"",phone:"",province:"",municipality:"",address:""}),[E,N]=w.useState(null),[R,T]=w.useState(null),[M,I]=w.useState(null),[Q,H]=w.useState(null),[be,z]=w.useState(!1),[de,ee]=w.useState(!1),[ce,se]=w.useState([]),[ue,$]=w.useState([]),[ne,ae]=w.useState(0),[P,F]=w.useState("USD"),[te,me]=w.useState([]),[ye,_e]=w.useState(null),[xe,Ne]=w.useState(null),[De,Fe]=w.useState(null),ie=w.useCallback(J=>{if(J.displayed_price&&J.displayed_currency_code)return J.displayed_currency_code===P,parseFloat(J.displayed_price);if(J.calculated_price_usd)return parseFloat(J.calculated_price_usd);if(J.products){const Me=parseFloat(J.baseTotalPrice||0),et=parseFloat(J.profitMargin||u.comboProfit||35)/100;return Me*(1+et)}else{const Me=parseFloat(J.base_price||J.basePrice||0),et=parseFloat(u.productProfit||40)/100;return Me*(1+et)}},[P,u.comboProfit,u.productProfit]),je=w.useMemo(()=>i.reduce((J,Me)=>J+ie(Me)*Me.quantity,0),[i,ie]);w.useEffect(()=>{W(),O()},[]),w.useEffect(()=>{if(A.province){const J=sj(A.province);$(J),k(Me=>({...Me,municipality:""}))}else $([])},[A.province]),w.useEffect(()=>{A.province&&B(A.province)},[A.province,je]),w.useEffect(()=>{he()},[P,je,ne]);const W=async()=>{try{const J=await tj();if(console.log("Shipping zones loaded:",J),J.success){const Me=(J.zones||[]).filter(et=>{const er=parseFloat(et.shipping_cost||0);return et.free_shipping===!0||er>0});se(Me),console.log("Zones set:",Me.length)}}catch(J){console.error("Error loading shipping zones:",J)}},O=async()=>{try{const{data:J,error:Me}=await mj();!Me&&J&&me(J)}catch(J){console.error("Error loading currencies:",J)}},he=async()=>{if(P==="USD"){_e(je),Ne(ne),Fe(je+ne);return}try{const{data:J,error:Me}=await ov(je,"USD",P),{data:et,error:er}=await ov(ne,"USD",P);!Me&&!er?(_e(J),Ne(et),Fe(J+et)):(_e(je),Ne(ne),Fe(je+ne))}catch(J){console.error("Error converting currency:",J),_e(je),Ne(ne),Fe(je+ne)}},B=async J=>{try{const Me=await wD(J,je);Me.success&&ae(Me.cost)}catch(Me){console.error("Error calculating shipping:",Me),ae(0)}},G=(je+ne).toFixed(2),le=`PO-${Date.now()}`;m.find(J=>J.forProducts&&J.active);const Pe=()=>{if(!y){Y({title:e("auth.loginRequired"),description:e("auth.loginToCheckout"),variant:"destructive"});return}_("recipient")},Ke=()=>{if(!E){Y({title:e("common.error"),description:r==="es"?"Selecciona un destinatario":"Select a recipient",variant:"destructive"});return}if(!R){Y({title:e("common.error"),description:r==="es"?"Selecciona una cuenta Zelle":"Select a Zelle account",variant:"destructive"});return}_("payment")},ze=()=>{if(!g?.whatsapp){Y({title:e("common.error"),description:r==="es"?"Nmero de WhatsApp no configurado":"WhatsApp number not configured",variant:"destructive"});return}const J=r==="es"?`Hola! Tengo una pregunta sobre mi pedido.

Nmero de pedido: ${le}`:`Hello! I have a question about my order.

Order number: ${le}`;eD(g.whatsapp,J)},Ie=J=>{navigator.clipboard.writeText(J),Y({title:`${J} ${e("cart.payment.copy")}!`})},rt=async()=>{if(!M){Y({title:r==="es"?"Comprobante requerido":"Proof required",description:r==="es"?"Por favor sube el comprobante de pago":"Please upload payment proof",variant:"destructive"});return}if(!b){Y({title:r==="es"?"Error de autenticacin":"Authentication error",description:r==="es"?"Por favor inicia sesin para continuar":"Please log in to continue",variant:"destructive"});return}ee(!0);try{const J=te.find(tt=>tt.code===P);if(!J)throw new Error("Currency not found");const Me=ce.find(tt=>tt.province_name===A.province);console.log("Creating order with:",{userId:b.id,currencyId:J.id,shippingZoneId:Me?.id,zelleAccountId:m?.[0]?.id});const et=i.map(tt=>({itemType:tt.type||"product",itemId:tt.id,nameEs:tt.name_es||tt.name,nameEn:tt.name_en||tt.name,quantity:tt.quantity,unitPrice:ie(tt),totalPrice:ie(tt)*tt.quantity,inventoryId:tt.inventory_id||null})),er={userId:b.id,orderType:"product",subtotal:je,shippingCost:ne,totalAmount:je+ne,currencyId:J.id,recipientInfo:JSON.stringify(A),paymentMethod:"zelle",shippingZoneId:Me?.id||null,zelleAccountId:null},br=await EO(er,et);if(!br.success)throw new Error(br.error||"Error creating order");const dr=br.order,tr=await DO(M,dr.id);if(tr.success||console.error("Error uploading payment proof:",tr.error),g?.whatsapp){const tt={...dr,order_items:et.map(ur=>({item_name_es:r==="es"?ur.name:ur.nameEn||ur.name,item_name_en:ur.nameEn||ur.name,quantity:ur.quantity})),user_name:A.fullName};tD(tt,g.whatsapp,r)}try{(g?.adminEmail||g?.whatsapp)&&await V.functions.invoke("notify-order",{body:{orderData:{orderNumber:dr.order_number,customerName:A.fullName,total:(je+ne).toFixed(2),currency:P,paymentProofUrl:tr?.url||dr.payment_proof_url||null},notificationSettings:g}})}catch(tt){console.warn("notify-order function error (non-blocking):",tt?.message||tt)}Y({title:r==="es"?" Pedido confirmado":" Order confirmed",description:r==="es"?`Tu pedido ${dr.order_number} ha sido creado. Recibirs una notificacin cuando sea validado.`:`Your order ${dr.order_number} has been created. You'll receive a notification when it's validated.`}),c(),t("user-panel")}catch(J){console.error("Error confirming payment:",J),Y({title:r==="es"?"Error al procesar":"Processing error",description:J.message||(r==="es"?"No se pudo procesar tu pedido. Por favor intenta de nuevo.":"Could not process your order. Please try again."),variant:"destructive"})}finally{ee(!1)}};return C==="recipient"?s.jsx("div",{className:"container mx-auto max-w-4xl py-8 px-4",children:s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",style:Xe(h),children:r==="es"?"Selecciona Destinatario y Mtodo de Pago":"Select Recipient & Payment Method"}),s.jsx("p",{className:"text-gray-600",children:r==="es"?"Elige un destinatario existente o crea uno nuevo, y selecciona tu cuenta Zelle para el pago.":"Choose an existing recipient or create a new one, and select your Zelle account for payment."})]}),s.jsxs("div",{className:"glass-effect p-6 rounded-xl border-2 border-blue-200 bg-blue-50",children:[s.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[s.jsx(rn,{className:"h-5 w-5 text-blue-600"}),r==="es"?"Selecciona Cuenta Zelle":"Select Zelle Account"]}),s.jsx(cj,{onSelect:J=>{T(J)}})]}),s.jsxs("div",{className:"glass-effect p-6 rounded-xl border-2 border-purple-200 bg-purple-50",children:[s.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[s.jsx(is,{className:"h-5 w-5 text-purple-600"}),r==="es"?"Destinatario de la Entrega":"Delivery Recipient"]}),s.jsx(ih,{ref:j,onSelect:J=>{N(J),J.recipientData?k({fullName:J.recipientData.full_name||"",phone:J.recipientData.phone||"",province:J.recipientData.addresses?.[0]?.province||"",municipality:J.recipientData.addresses?.[0]?.municipality||"",address:J.recipientData.addresses?.[0]?.address_line_1||""}):J.formData&&k({fullName:J.formData.full_name||"",phone:J.formData.phone||"",province:J.formData.province||"",municipality:J.formData.municipality||"",address:J.formData.address_line_1||""})},shippingZones:ce,municipalities:ue,showAddressSelection:!0,showProvinceInForm:!0})]}),A.province&&s.jsxs(oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl border-2 border-green-200 bg-green-50",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:r==="es"?"Costo de Envo":"Shipping Cost"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:ne===0?r==="es"?"Envo Gratis!":"Free Shipping!":`$${ne.toFixed(2)}`})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(we,{variant:"outline",onClick:()=>_("cart"),className:"flex-1 flex items-center justify-center gap-2",children:[s.jsx(fc,{className:"h-4 w-4"}),r==="es"?"Atrs":"Back"]}),s.jsxs(we,{onClick:Ke,style:Qe(h),className:"flex-1 flex items-center justify-center gap-2",children:[r==="es"?"Continuar al Pago":"Continue to Payment",s.jsx(cn,{className:"h-4 w-4"})]})]})]})}):C==="payment"?s.jsx("div",{className:"container mx-auto max-w-2xl py-8 px-4",children:s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",style:Xe(h),children:e("cart.payment.title")}),s.jsxs("div",{className:"p-4 rounded-lg mb-6",style:zO(h,"info"),children:[s.jsx("h2",{className:"font-semibold text-lg mb-2",children:e("cart.payment.instructionsTitle")}),s.jsx("p",{className:"text-sm",children:e("cart.payment.instructions")})]}),R?s.jsxs("div",{className:"mb-6 glass-effect p-4 rounded-lg border-2 border-blue-200 bg-blue-50",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:e("cart.payment.accountInfo")}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsxs("strong",{children:[e("settings.zelle.name"),":"]})," ",R.account_name||R.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",R.email||R.zelle_email]}),(R.phone_number||R.phone||R.telefono)&&s.jsxs("p",{children:[s.jsxs("strong",{children:[e("common.phone"),":"]})," ",R.phone_number||R.phone||R.telefono]})]})]}):s.jsx("p",{className:"text-red-500 mb-6",children:r==="es"?"No hay cuenta Zelle disponible.":"No Zelle account available."}),s.jsxs("div",{className:"mb-6 space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("p",{children:[e("cart.payment.purchaseId"),": ",s.jsx("strong",{className:"font-mono",children:le})]}),s.jsxs(we,{onClick:()=>Ie(le),variant:"outline",children:[s.jsx(rn,{className:"mr-2 h-4 w-4"}),e("cart.payment.copy")]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("p",{children:[e("cart.payment.amount"),": ",s.jsxs("strong",{className:"text-2xl",style:{color:h.successColor||"#10b981"},children:["$",G]})]}),s.jsxs(we,{onClick:()=>Ie(G),variant:"outline",children:[s.jsx(rn,{className:"mr-2 h-4 w-4"}),e("cart.payment.copy")]})]})]}),s.jsx("div",{className:"mb-6",children:s.jsx(dj,{label:e("cart.payment.uploadProof")||(r==="es"?"Comprobante de Pago":"Payment Proof"),accept:"image/*,.pdf",value:M,preview:Q,previewPosition:"above",onChange:J=>{const Me=J.target.files?.[0];if(Me){if(!bA.includes(Me.type)){Y({title:r==="es"?"Tipo de archivo invlido":"Invalid file type",description:r==="es"?"Solo se permiten imgenes JPG, PNG o WebP":"Only JPG, PNG or WebP images are allowed",variant:"destructive"});return}if(Me.size>vA.PAYMENT_PROOF){Y({title:r==="es"?"Archivo muy grande":"File too large",description:r==="es"?"El tamao mximo es 5MB":"Maximum size is 5MB",variant:"destructive"});return}z(!0);try{const et=new FileReader;et.onloadend=()=>{H(et.result),I(Me),Y({title:r==="es"?" Comprobante cargado":" Proof uploaded",description:r==="es"?"La imagen se ha cargado correctamente":"Image uploaded successfully"})},et.readAsDataURL(Me)}catch(et){console.error("Error uploading payment proof:",et),Y({title:r==="es"?"Error al cargar":"Upload error",description:et.message,variant:"destructive"})}finally{z(!1)}}},required:!0})}),s.jsx(oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`mb-6 p-4 rounded-lg border-2 ${g?.whatsapp?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(is,{className:`h-5 w-5 flex-shrink-0 mt-1 ${g?.whatsapp?"text-green-600":"text-yellow-600"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm font-medium mb-3 ${g?.whatsapp?"text-gray-700":"text-yellow-800"}`,children:g?.whatsapp?r==="es"?"Tienes dudas sobre el pago? Contctanos por WhatsApp":"Questions about payment? Contact us via WhatsApp":r==="es"?"Nmero de WhatsApp de soporte no configurado":"WhatsApp support number not configured"}),g?.whatsapp&&s.jsxs(we,{onClick:ze,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(is,{className:"mr-2 h-4 w-4"}),r==="es"?"Contactar por WhatsApp":"Contact via WhatsApp"]})]})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(we,{variant:"outline",onClick:()=>_("recipient"),className:"flex-1",disabled:de,children:r==="es"?"Atrs":"Back"}),s.jsx(we,{onClick:rt,className:"flex-1",size:"lg",style:Qe(h),disabled:!M||be||de,children:de?r==="es"?"Procesando...":"Processing...":e("cart.payment.confirm")})]})]})}):s.jsx("div",{className:"min-h-screen py-8 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:s.jsx("h1",{className:"text-4xl font-bold mb-4",style:Xe(h),children:e("cart.title")})}),i.length===0?s.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[s.jsx(co,{className:"w-24 h-24 text-gray-300 mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-600 mb-4",children:e("cart.empty")}),s.jsx(we,{onClick:()=>t("products"),style:Qe(h),children:e("cart.browse")})]}):s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2 space-y-4",children:i.map(J=>{const Me=ie(J),et=Me*J.quantity,er=r==="es"?J.name_es||J.name||"Producto":J.name_en||J.name||"Product",br=J.image_url||J.image||"https://images.unsplash.com/photo-1635865165118-917ed9e20936",dr=!!J.products,tr=P==="USD"?1:ye!==null?ye/je:1,tt=Me*tr,ur=et*tr,Ps=te.find(Ts=>Ts.code===P)?.symbol||"$";return s.jsx(oe.div,{layout:!0,className:"glass-effect p-4 rounded-2xl",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("img",{className:"w-24 h-24 rounded-lg object-cover flex-shrink-0",alt:er,src:br}),s.jsxs("div",{className:"flex-grow min-w-0",children:[s.jsxs("h3",{className:"font-semibold text-gray-800 mb-1",children:[er,dr&&s.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"COMBO"})]}),s.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[r==="es"?"Precio unitario: ":"Unit price: ",s.jsxs("span",{className:"font-semibold",style:{color:h.accentColor||"#9333ea"},children:[Ps,tt.toFixed(2)," ",P]})]}),s.jsxs("p",{className:"text-base font-bold text-gray-900",children:["Subtotal: ",Ps,ur.toFixed(2)," ",P]})]}),s.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[s.jsx(we,{size:"icon",variant:"outline",onClick:()=>o(J.id,J.quantity-1),className:"h-8 w-8",children:s.jsx(Uk,{className:"h-4 w-4"})}),s.jsx("span",{className:"w-8 text-center font-semibold",children:J.quantity}),s.jsx(we,{size:"icon",variant:"outline",onClick:()=>o(J.id,J.quantity+1),className:"h-8 w-8",children:s.jsx(Rr,{className:"h-4 w-4"})})]}),s.jsx(we,{size:"icon",variant:"ghost",onClick:()=>l(J.id),className:"flex-shrink-0",children:s.jsx(Jt,{className:"h-5 w-5 text-red-500"})})]})},J.id)})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-2xl space-y-6",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:e("cart.summary")}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:r==="es"?"Moneda":"Currency"}),s.jsx("select",{value:P,onChange:J=>F(J.target.value),className:"input-style w-full",children:te.length>0?te.map(J=>s.jsxs("option",{value:J.code,children:[J.code," - ",r==="es"?J.name_es:J.name_en]},J.code)):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"USD",children:"USD - Dlar Estadounidense"}),s.jsx("option",{value:"EUR",children:"EUR - Euro"}),s.jsx("option",{value:"CUP",children:"CUP - Peso Cubano"})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:e("cart.subtotal")}),s.jsxs("span",{className:"font-semibold",children:[te.find(J=>J.code===P)?.symbol||"$",ye!==null?ye.toFixed(2):je.toFixed(2)," ",P]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:e("cart.shipping")}),s.jsx("span",{className:"text-sm font-semibold",children:(xe!==null?xe:ne)===0?r==="es"?"Gratis":"Free":`${te.find(J=>J.code===P)?.symbol||"$"}${(xe!==null?xe:ne).toFixed(2)} ${P}`})]}),s.jsx("div",{className:"border-t my-2"}),s.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[s.jsx("span",{children:e("cart.total")}),s.jsxs("span",{style:{color:h.primaryColor||"#2563eb"},children:[te.find(J=>J.code===P)?.symbol||"$",De!==null?De.toFixed(2):(je+ne).toFixed(2)," ",P]})]})]}),s.jsx(we,{onClick:Pe,className:"w-full",size:"lg",style:Qe(h),children:e("cart.checkout")})]})})]})]})})},l3=({onNavigate:t})=>{const{t:e}=ct(),{login:r,signInWithGoogle:i,userRole:o}=Et(),{visualSettings:l}=Xt(),[c,u]=w.useState(""),[m,h]=w.useState(""),p=async()=>{try{console.log("Attempting login with:",{email:c});const y=await r(c,m);console.log("Login attempt result:",y),y&&(console.log("Login successful"),Y({title:"Login Successful",description:"Welcome back!",variant:"default"}),setTimeout(()=>{t(o==="admin"||o==="super_admin"?"dashboard":"products")},100))}catch(y){console.error("Login error:",y),Y({title:"Login Error",description:y.message||"An unexpected error occurred",variant:"destructive"})}},g=async()=>{try{Y({title:"Connecting to Google...",description:"Please wait while we redirect you.",variant:"default"}),await i();const y=Y({title:"Redirecting...",description:"Please complete the sign in process with Google.",variant:"default"});setTimeout(()=>{y.dismiss()},2e3)}catch(y){console.error("Google login error:",y),Y({title:"Login Error",description:y.message||"Failed to sign in with Google",variant:"destructive"})}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs(oe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-2xl",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold",style:Xe(l),children:e("auth.loginTitle")}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:e("auth.loginSubtitle")})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Eb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"email",autoComplete:"email",required:!0,value:c,onChange:y=>u(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("auth.email")})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Lk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"password",autoComplete:"current-password",required:!0,value:m,onChange:y=>h(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("auth.password")})]}),s.jsx("div",{children:s.jsxs(we,{onClick:p,className:"w-full group relative flex justify-center py-3 px-4",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.buttonBgColor||"#2563eb",color:l.buttonTextColor||"#ffffff",border:"none"},children:[s.jsx(Sb,{className:"w-5 h-5 mr-2"}),e("auth.login")]})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:e("auth.or")})})]}),s.jsx("div",{children:s.jsxs(we,{onClick:g,variant:"outline",className:"w-full group relative flex justify-center py-3 px-4",style:{borderColor:l.primaryColor||"#2563eb",color:l.primaryColor||"#2563eb"},children:[s.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:s.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 126 21.2 172.9 56.9L368.7 128C338.8 102.3 298.2 88 248 88c-86.5 0-157.2 70.2-157.2 156.8s70.7 156.8 157.2 156.8c99.9 0 133-67.8 138.3-103.3H248v-67.3h239.1c1.3 12.2 2.2 24.2 2.2 36.8z"})}),e("auth.loginWithGoogle")]})})]})]})})},c3=({onNavigate:t})=>{const{user:e,userRole:r}=Et(),{t:i,language:o}=ct(),{visualSettings:l,businessInfo:c}=Xt(),[u,m]=w.useState([]),[h,p]=w.useState([]),[g,y]=w.useState(!0),[b,j]=w.useState(null),[C,_]=w.useState(!1),[A,k]=w.useState(!1),[E,N]=w.useState(null),[R,T]=w.useState(0),[M,I]=w.useState(""),[Q,H]=w.useState(!1),[be,z]=w.useState(!1),[de,ee]=w.useState(!1),[ce,se]=w.useState(""),[ue,$]=w.useState(null);w.useEffect(()=>{if(!e){t("login");return}ae(),P(),r!=="admin"&&r!=="super_admin"&&ne()},[e,r]);const ne=async()=>{if(e?.id)try{const W=await DA(e.id);W.data&&(N(W.data),T(W.data.rating),I(W.data.comment||""))}catch(W){console.error("Error loading testimonial:",W)}},ae=async()=>{if(e?.id){console.log("[UserPanel] Loading orders for role:",r),y(!0);try{if(r==="admin"||r==="super_admin"){console.log("[UserPanel] Loading pending orders for admin");const W=await Gw({payment_status:"pending"});console.log("[UserPanel] Admin orders result:",W),W.success&&m(W.orders)}else{console.log("[UserPanel] Loading user orders for regular user");const W=await PO(e.id);console.log("[UserPanel] User orders result:",W),W.success&&m(W.orders)}}catch(W){console.error("Error loading orders:",W)}finally{y(!1)}}},P=async()=>{if(e?.id)try{const W=await ej();W.success&&p(W.remittances||[])}catch(W){console.error("Error loading remittances:",W)}},F=async W=>{k(!0),_(!0);try{const O=await TO(W);console.log("[UserPanel] Order details loaded:",O),O.success&&(j(O.order),console.log("[UserPanel] Selected order payment_status:",O.order?.payment_status),console.log("[UserPanel] Payment proof URL:",O.order?.payment_proof_url),console.log("[UserPanel] Current userRole:",r))}catch(O){console.error("Error loading order details:",O)}finally{k(!1)}},te=async W=>{$(W),z(!0)},me=async()=>{k(!0),z(!1);try{(await RO(ue,e.id)).success&&(await ae(),_(!1),j(null))}catch(W){console.error("Error validating payment:",W)}finally{k(!1),$(null)}},ye=async W=>{$(W),se(""),ee(!0)},_e=async()=>{if(ce.trim()){k(!0),ee(!1);try{(await OO(ue,e.id,ce)).success&&(await ae(),_(!1),j(null))}catch(W){console.error("Error rejecting payment:",W)}finally{k(!1),$(null),se("")}}},xe=async()=>{if(R===0){alert(o==="es"?"Por favor selecciona una calificacin":"Please select a rating");return}H(!0);try{const W={user_id:e.id,rating:R,comment:M.trim()};let O;E?O=await AA(E.id,{rating:R,comment:M.trim()}):O=await TA(W),O.data&&(N(O.data),alert(o==="es"?"Gracias por tu testimonio! Ser revisado por nuestro equipo.":"Thank you for your testimonial! It will be reviewed by our team."))}catch(W){console.error("Error saving testimonial:",W),alert(o==="es"?"Error al guardar el testimonio":"Error saving testimonial")}finally{H(!1)}},Ne=(W,O)=>O==="validated"||W==="completed"?s.jsx(qt,{className:"h-5 w-5",style:{color:l.successColor||"#10b981"}}):O==="rejected"||W==="cancelled"?s.jsx(Hr,{className:"h-5 w-5",style:{color:l.errorColor||"#ef4444"}}):O==="pending"||W==="pending"?s.jsx(Gr,{className:"h-5 w-5",style:{color:l.warningColor||"#f59e0b"}}):s.jsx(Gr,{className:"h-5 w-5",style:{color:l.textSecondaryColor||"#6b7280"}}),De=(W,O)=>O==="validated"?o==="es"?"Validado":"Validated":O==="rejected"?o==="es"?"Rechazado":"Rejected":O==="pending"?o==="es"?"Pendiente":"Pending":W==="processing"?o==="es"?"En proceso":"Processing":W==="completed"?o==="es"?"Completado":"Completed":o==="es"?"Pendiente":"Pending",Fe=W=>{switch(W){case"product":return s.jsx(vr,{className:"h-4 w-4"});case"combo":return s.jsx(Or,{className:"h-4 w-4"});case"remittance":return s.jsx(St,{className:"h-4 w-4"});default:return s.jsx(vr,{className:"h-4 w-4"})}},ie=W=>{switch(W){case"product":return o==="es"?"Producto":"Product";case"combo":return"Combo";case"remittance":return o==="es"?"Remesa":"Remittance";default:return W}};if(!e)return null;const je=e?.profile?.full_name||e?.user_metadata?.full_name||e?.user_metadata?.name||"Usuario";return s.jsxs("div",{className:"min-h-screen py-8 px-4",children:[s.jsxs("div",{className:"container mx-auto max-w-6xl",children:[s.jsxs(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",style:Xe(l),children:i("userPanel.title")}),s.jsx("p",{className:"text-xl",style:Ue(l,"secondary"),children:o==="es"?`Bienvenido, ${je}`:`Welcome, ${je}`})]}),c?.whatsapp&&s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:s.jsxs("div",{className:"p-4 rounded-xl border flex items-center justify-between bg-white",style:{borderColor:"#10b981"},children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:s.jsx(is,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",style:Ue(l,"primary"),children:o==="es"?"Necesitas ayuda?":"Need help?"}),s.jsx("p",{className:"text-sm",style:Ue(l,"muted"),children:o==="es"?"Ante dudas contactar a soporte va WhatsApp":"Contact support via WhatsApp for any questions"})]})]}),s.jsxs(we,{onClick:()=>{const W=o==="es"?`Hola! Soy ${je}. Necesito ayuda con mi cuenta.`:`Hello! I'm ${je}. I need help with my account.`;window.open(Vi(c.whatsapp,W),"_blank")},className:"bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(is,{className:"h-4 w-4 mr-2"}),o==="es"?"Contactar":"Contact"]})]})}),r!=="admin"&&r!=="super_admin"&&h.length>0&&s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"p-6 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-100 text-sm font-medium",children:i("remittances.user.remittanceNumber")}),s.jsx("p",{className:"text-3xl font-bold mt-1",children:h.length})]}),s.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:s.jsx(lo,{className:"h-6 w-6"})})]})}),s.jsx("div",{className:"p-6 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-green-100 text-sm font-medium",children:i("remittances.status.completed")}),s.jsx("p",{className:"text-3xl font-bold mt-1",children:h.filter(W=>W.status==="completed").length})]}),s.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:s.jsx(qt,{className:"h-6 w-6"})})]})}),s.jsx("div",{className:"p-6 rounded-xl bg-gradient-to-br from-yellow-500 to-yellow-600 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:i("remittances.status.processing")}),s.jsx("p",{className:"text-3xl font-bold mt-1",children:h.filter(W=>["payment_validated","processing","delivered"].includes(W.status)).length})]}),s.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:s.jsx(Gr,{className:"h-6 w-6"})})]})})]}),r!=="admin"&&r!=="super_admin"&&s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.08},className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:()=>t("recipients"),className:"p-6 rounded-xl border-2 transition-all hover:shadow-lg hover:border-blue-400 text-left bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:s.jsx(_o,{className:"h-6 w-6 text-blue-600"})}),s.jsx(cn,{className:"h-5 w-5",style:{color:l.primaryColor}})]}),s.jsx("h3",{className:"font-semibold text-lg mb-1",style:Ue(l,"primary"),children:o==="es"?"Mis Destinatarios":"My Recipients"}),s.jsx("p",{className:"text-sm",style:Ue(l,"secondary"),children:o==="es"?"Administra tus contactos de entrega":"Manage your delivery contacts"})]}),s.jsxs("button",{onClick:()=>t("my-remittances"),className:"p-6 rounded-xl border-2 transition-all hover:shadow-lg hover:border-green-400 text-left bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:s.jsx(lo,{className:"h-6 w-6 text-green-600"})}),s.jsx(cn,{className:"h-5 w-5",style:{color:l.secondaryColor}})]}),s.jsx("h3",{className:"font-semibold text-lg mb-1",style:Ue(l,"primary"),children:o==="es"?"Mis Remesas":"My Remittances"}),s.jsx("p",{className:"text-sm",style:Ue(l,"secondary"),children:o==="es"?"Consulta el estado de tus envos":"Check your remittance status"})]})]}),s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-8 rounded-2xl bg-white shadow-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-2xl font-semibold flex items-center",style:Ue(l,"primary"),children:[s.jsx("div",{className:"p-2 rounded-lg mr-3",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.primaryColor||"#2563eb"},children:s.jsx(Or,{className:"h-5 w-5 text-white"})}),r==="admin"||r==="super_admin"?o==="es"?"Pedidos Pendientes":"Pending Orders":i("userPanel.myOrders")]}),r!=="admin"&&r!=="super_admin"&&c?.whatsapp&&s.jsxs(we,{size:"default",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{const W=o==="es"?`Hola! Soy ${je}. Necesito ayuda con mis pedidos.`:`Hello! I'm ${je}. I need help with my orders.`;window.open(Vi(c.whatsapp,W),"_blank","noopener,noreferrer")},title:o==="es"?"Contactar por WhatsApp":"Contact via WhatsApp",children:[s.jsx(is,{className:"h-4 w-4 mr-2"}),o==="es"?"Contactar":"Contact"]})]}),g?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(Va,{className:"h-8 w-8 animate-spin",style:{color:l.primaryColor}})}):u.length>0?s.jsx("div",{className:"space-y-4",children:u.map(W=>s.jsx(oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 border rounded-lg hover:shadow-md transition-all cursor-pointer",style:{borderColor:l.borderColor||"#e5e7eb"},onClick:()=>F(W.id),children:s.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-[200px]",children:[s.jsx("p",{className:"font-semibold mb-1",style:Ue(l,"primary"),children:W.order_number}),(r==="admin"||r==="super_admin")&&W.user_profiles&&s.jsxs("p",{className:"text-sm font-medium mb-1",style:Ue(l,"secondary"),children:[" ",W.user_profiles.full_name||W.user_profiles.email]}),s.jsx("p",{className:"text-sm",style:Ue(l,"muted"),children:new Date(W.created_at).toLocaleDateString(o==="es"?"es-ES":"en-US",{year:"numeric",month:"long",day:"numeric"})}),W.shipping_zones&&s.jsxs("p",{className:"text-xs mt-1",style:Ue(l,"muted"),children:[" ",W.shipping_zones.province_name]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-bold mb-1",style:{color:l.primaryColor},children:["$",parseFloat(W.total_amount).toFixed(2)," ",W.currencies?.code||"USD"]}),s.jsxs("p",{className:"text-xs",style:Ue(l,"muted"),children:[W.order_items?.length||0," ",o==="es"?"artculos":"items"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"px-3 py-1.5 rounded-full flex items-center gap-2 text-sm font-medium",style:hm(W.payment_status||W.status,l),children:[Ne(W.status,W.payment_status),s.jsx("span",{children:De(W.status,W.payment_status)})]}),r!=="admin"&&r!=="super_admin"&&c?.whatsapp&&(W.payment_status==="pending"||W.status==="processing"||W.status==="pending")&&s.jsx(we,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:O=>{O.stopPropagation();const he=De(W.status,W.payment_status),B=o==="es"?`Hola! Soy ${je}. Tengo una consulta sobre mi pedido ${W.order_number} (Estado: ${he}, Total: $${parseFloat(W.total_amount).toFixed(2)} ${W.currencies?.code||"USD"}).`:`Hello! I'm ${je}. I have a question about my order ${W.order_number} (Status: ${he}, Total: $${parseFloat(W.total_amount).toFixed(2)} ${W.currencies?.code||"USD"}).`;window.open(Vi(c.whatsapp,B),"_blank","noopener,noreferrer")},title:o==="es"?"Consultar sobre este pedido":"Ask about this order",children:s.jsx(is,{className:"h-3 w-3"})}),s.jsx(we,{size:"sm",variant:"ghost",children:s.jsx(Ss,{className:"h-4 w-4"})})]})]})},W.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Or,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),s.jsx("p",{className:"text-lg mb-2",style:Ue(l,"secondary"),children:i("userPanel.noOrders")}),s.jsx("p",{className:"text-sm",style:Ue(l,"muted"),children:o==="es"?"Comienza a comprar para ver tus pedidos aqu":"Start shopping to see your orders here"})]})]}),r!=="admin"&&r!=="super_admin"&&s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"p-8 rounded-2xl mt-6 bg-white shadow-lg border border-gray-200",children:[s.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",style:Ue(l,"primary"),children:[s.jsx("div",{className:"p-2 rounded-lg mr-3",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.primaryColor||"#2563eb"},children:s.jsx(an,{className:"h-5 w-5 text-white"})}),o==="es"?"Califica tu Experiencia":"Rate Your Experience"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",style:Ue(l,"primary"),children:o==="es"?"Calificacin":"Rating"}),s.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(W=>s.jsx("button",{type:"button",onClick:()=>T(W),className:"transition-transform hover:scale-110",children:s.jsx(an,{className:"h-8 w-8",fill:W<=R?l.primaryColor||"#2563eb":"none",stroke:W<=R?l.primaryColor||"#2563eb":"#d1d5db"})},W))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",style:Ue(l,"primary"),children:o==="es"?"Comentario (opcional)":"Comment (optional)"}),s.jsx("textarea",{value:M,onChange:W=>I(W.target.value),placeholder:o==="es"?"Comparte tu experiencia con nosotros...":"Share your experience with us...",rows:4,className:"w-full px-4 py-2 rounded-lg border resize-none",style:{borderColor:l.borderColor||"#e5e7eb",backgroundColor:l.inputBgColor||"#ffffff",color:l.textPrimaryColor||"#1f2937"}})]}),E&&s.jsx("div",{className:"p-3 rounded-lg text-sm",style:{backgroundColor:E.is_visible?`${l.successColor||"#10b981"}20`:`${l.warningColor||"#f59e0b"}20`,color:E.is_visible?l.successColor||"#10b981":l.warningColor||"#f59e0b"},children:E.is_visible?o==="es"?" Tu testimonio ha sido publicado":" Your testimonial has been published":o==="es"?" Tu testimonio est pendiente de aprobacin":" Your testimonial is pending approval"}),s.jsx(we,{onClick:xe,disabled:Q||R===0,className:"w-full",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.primaryColor||"#2563eb",color:"#ffffff"},children:Q?s.jsxs(s.Fragment,{children:[s.jsx(Va,{className:"h-4 w-4 mr-2 animate-spin"}),o==="es"?"Guardando...":"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(an,{className:"h-4 w-4 mr-2"}),E?o==="es"?"Actualizar Testimonio":"Update Testimonial":o==="es"?"Enviar Testimonio":"Submit Testimonial"]})})]})]})]}),s.jsx(Zt,{children:C&&s.jsxs(s.Fragment,{children:[s.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40",onClick:()=>{_(!1),j(null)}}),s.jsx(oe.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:W=>W.stopPropagation(),children:s.jsxs("div",{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto p-6 rounded-2xl shadow-2xl bg-white border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",style:Xe(l),children:o==="es"?"Detalles del Pedido":"Order Details"}),b&&s.jsx("p",{className:"text-sm",style:Ue(l,"muted"),children:b.order_number})]}),s.jsx(we,{variant:"ghost",size:"icon",onClick:()=>{_(!1),j(null)},children:s.jsx(Jt,{className:"h-5 w-5"})})]}),A?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(Va,{className:"h-8 w-8 animate-spin",style:{color:l.primaryColor}})}):b?s.jsxs("div",{className:"space-y-6",children:[(r==="admin"||r==="super_admin")&&b.user_profiles&&s.jsxs("div",{className:"p-4 rounded-lg border",style:{borderColor:l.borderColor||"#e5e7eb",backgroundColor:`${l.primaryColor}10`},children:[s.jsx("h4",{className:"text-sm font-semibold mb-2",style:Ue(l,"primary"),children:o==="es"?"Datos del Cliente":"Customer Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",style:Ue(l,"muted"),children:o==="es"?"Nombre:":"Name:"})," ",s.jsx("span",{style:Ue(l,"primary"),children:b.user_profiles.full_name||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",style:Ue(l,"muted"),children:"Email:"})," ",s.jsx("span",{style:Ue(l,"primary"),children:b.user_profiles.email||"N/A"})]}),b.shipping_phone&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",style:Ue(l,"muted"),children:o==="es"?"Telfono:":"Phone:"})," ",s.jsx("span",{style:Ue(l,"primary"),children:b.shipping_phone})]}),b.shipping_address&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"font-medium",style:Ue(l,"muted"),children:o==="es"?"Direccin:":"Address:"})," ",s.jsx("span",{style:Ue(l,"primary"),children:b.shipping_address})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium mb-1",style:Ue(l,"muted"),children:o==="es"?"Fecha":"Date"}),s.jsx("p",{className:"text-sm",style:Ue(l,"primary"),children:new Date(b.created_at).toLocaleDateString(o==="es"?"es-ES":"en-US")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium mb-1",style:Ue(l,"muted"),children:o==="es"?"Estado":"Status"}),s.jsx("div",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium",style:hm(b.payment_status||b.status,l),children:De(b.status,b.payment_status)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium mb-1",style:Ue(l,"muted"),children:o==="es"?"Provincia":"Province"}),s.jsx("p",{className:"text-sm",style:Ue(l,"primary"),children:b.shipping_zones?.province_name||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium mb-1",style:Ue(l,"muted"),children:"Total"}),s.jsxs("p",{className:"text-lg font-bold",style:{color:l.primaryColor},children:["$",parseFloat(b.total_amount).toFixed(2)," ",b.currencies?.code||"USD"]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold mb-3",style:Ue(l,"primary"),children:o==="es"?"Artculos":"Items"}),s.jsx("div",{className:"space-y-3",children:b.order_items?.map((W,O)=>s.jsx("div",{className:"p-3 rounded-lg border",style:{borderColor:l.borderColor||"#e5e7eb"},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 flex-shrink-0 overflow-hidden",children:s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:Fe(W.item_type)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium mb-1",style:Ue(l,"primary"),children:o==="es"?W.item_name_es:W.item_name_en}),s.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",style:Ue(l,"muted"),children:[s.jsx("span",{className:"px-2 py-0.5 rounded",style:Kw(l,"info"),children:ie(W.item_type)}),s.jsxs("span",{children:[o==="es"?"Cantidad":"Qty",": ",W.quantity]})]}),s.jsxs("p",{className:"text-xs",style:Ue(l,"muted"),children:["$",parseFloat(W.unit_price).toFixed(2),"  ",W.quantity]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:s.jsxs("p",{className:"text-base font-bold",style:Ue(l,"primary"),children:["$",parseFloat(W.total_price).toFixed(2)]})})]})},O))})]}),s.jsx("div",{className:"border-t pt-4",style:{borderColor:l.borderColor||"#e5e7eb"},children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{style:Ue(l,"secondary"),children:"Subtotal"}),s.jsxs("span",{className:"font-semibold",style:Ue(l,"primary"),children:["$",parseFloat(b.subtotal).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{style:Ue(l,"secondary"),children:o==="es"?"Envo":"Shipping"}),s.jsx("span",{className:"font-semibold",style:Ue(l,"primary"),children:parseFloat(b.shipping_cost)===0?o==="es"?"Gratis":"Free":`$${parseFloat(b.shipping_cost).toFixed(2)}`})]}),s.jsx("div",{className:"border-t pt-2 mt-2",style:{borderColor:l.borderColor||"#e5e7eb"},children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-lg font-bold",style:Ue(l,"primary"),children:"Total"}),s.jsxs("span",{className:"text-xl font-bold",style:{color:l.primaryColor},children:["$",parseFloat(b.total_amount).toFixed(2)," ",b.currencies?.code||"USD"]})]})})]})})]}),s.jsx("div",{children:b.payment_proof_url?s.jsxs("div",{className:"sticky top-4",children:[s.jsx("h4",{className:"text-lg font-semibold mb-3",style:Ue(l,"primary"),children:o==="es"?"Comprobante de Pago":"Payment Proof"}),s.jsx("div",{className:"rounded-lg border overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",style:{borderColor:l.borderColor||"#e5e7eb"},onClick:()=>window.open(b.payment_proof_url,"_blank"),children:s.jsx("img",{src:b.payment_proof_url,alt:"Payment proof",className:"w-full h-auto object-contain max-h-[600px] bg-gray-50",onError:W=>{console.error("[UserPanel] Error loading payment proof image:",b.payment_proof_url),W.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><rect fill="%23f3f4f6" width="400" height="300"/><text x="50%" y="50%" font-family="Arial" font-size="16" fill="%236b7280" text-anchor="middle">Error al cargar imagen</text></svg>'}})}),s.jsx("p",{className:"text-xs text-center mt-2",style:Ue(l,"muted"),children:o==="es"?"Click para ver en tamao completo":"Click to view full size"})]}):s.jsxs("div",{className:"sticky top-4 p-6 rounded-lg border-2 border-dashed text-center",style:{borderColor:l.borderColor||"#e5e7eb"},children:[s.jsx(Vn,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",style:Ue(l,"muted"),children:o==="es"?"Sin comprobante de pago":"No payment proof"})]})})]}),b.rejection_reason&&s.jsxs("div",{className:"p-4 rounded-lg",style:hm("rejected",l),children:[s.jsx("p",{className:"font-medium mb-1",children:o==="es"?"Motivo de Rechazo":"Rejection Reason"}),s.jsx("p",{className:"text-sm",children:b.rejection_reason})]}),(r==="admin"||r==="super_admin")&&b.payment_status==="pending"&&s.jsxs("div",{className:"flex gap-3 pt-4 border-t",style:{borderColor:l.borderColor||"#e5e7eb"},children:[s.jsxs(we,{onClick:()=>te(b.id),disabled:A,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(qt,{className:"h-4 w-4 mr-2"}),o==="es"?"Validar Pago":"Validate Payment"]}),s.jsxs(we,{onClick:()=>ye(b.id),disabled:A,variant:"destructive",className:"flex-1",children:[s.jsx(Hr,{className:"h-4 w-4 mr-2"}),o==="es"?"Rechazar":"Reject"]})]})]}):null]})})]})}),s.jsx(Zt,{children:be&&s.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>z(!1),children:s.jsxs(oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:W=>W.stopPropagation(),className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(qt,{className:"h-8 w-8 text-green-600"})}),s.jsx("h3",{className:"text-2xl font-bold mb-2",style:Ue(l,"primary"),children:o==="es"?"Validar Pago?":"Validate Payment?"}),s.jsx("p",{className:"text-gray-600",children:o==="es"?"Esto aprobar el pedido y actualizar el inventario":"This will approve the order and update inventory"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(we,{onClick:()=>z(!1),variant:"outline",className:"flex-1",disabled:A,children:o==="es"?"Cancelar":"Cancel"}),s.jsxs(we,{onClick:me,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",disabled:A,children:[A?s.jsx(Va,{className:"h-4 w-4 animate-spin mr-2"}):s.jsx(qt,{className:"h-4 w-4 mr-2"}),o==="es"?"Confirmar":"Confirm"]})]})]})})}),s.jsx(Zt,{children:de&&s.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>ee(!1),children:s.jsxs(oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:W=>W.stopPropagation(),className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Hr,{className:"h-8 w-8 text-red-600"})}),s.jsx("h3",{className:"text-2xl font-bold mb-2",style:Ue(l,"primary"),children:o==="es"?"Rechazar Pago":"Reject Payment"}),s.jsx("p",{className:"text-gray-600 mb-4",children:o==="es"?"Por favor indica el motivo del rechazo":"Please indicate the reason for rejection"})]}),s.jsx("textarea",{value:ce,onChange:W=>se(W.target.value),placeholder:o==="es"?"Motivo del rechazo...":"Rejection reason...",className:"w-full p-3 border rounded-lg mb-4 min-h-[100px] focus:ring-2 focus:ring-red-500 focus:border-transparent",style:{borderColor:l.borderColor||"#e5e7eb"}}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(we,{onClick:()=>ee(!1),variant:"outline",className:"flex-1",disabled:A,children:o==="es"?"Cancelar":"Cancel"}),s.jsxs(we,{onClick:_e,variant:"destructive",className:"flex-1",disabled:A||!ce.trim(),children:[A?s.jsx(Va,{className:"h-4 w-4 animate-spin mr-2"}):s.jsx(Hr,{className:"h-4 w-4 mr-2"}),o==="es"?"Rechazar":"Reject"]})]})]})})})]})},Ga=["jtheoden@gmail.com","jtheoden@googlemail.com"],d3=()=>{const{t}=ct(),{user:e}=Et(),{visualSettings:r}=Xt(),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,m]=w.useState(""),h=async()=>{c(!0);try{const{data:_,error:A}=await V.from("user_profiles").select("id, email, role, is_enabled, full_name, avatar_url, created_at").order("created_at",{ascending:!1});if(A)throw A;o(_||[])}catch(_){console.error("Error fetching users:",_),Y({title:t("users.fetchError"),description:_.message,variant:"destructive"})}finally{c(!1)}};w.useEffect(()=>{h()},[]);const p=async(_,A)=>{try{const k=i.find(N=>N.id===_);if(Ga.includes(k?.email))throw new Error(t("users.cannotModifySuperAdmin"));const{error:E}=await V.from("user_profiles").update({role:A}).eq("id",_);if(E)throw E;await h(),Y({title:t("users.roleUpdated"),description:t("users.roleUpdatedSuccess")})}catch(k){console.error("Error updating user role:",k),Y({title:t("users.roleUpdateError"),description:k.message,variant:"destructive"})}},g=async(_,A)=>{try{const k=i.find(N=>N.id===_);if(Ga.includes(k?.email))throw new Error(t("users.cannotModifySuperAdmin"));const{error:E}=await V.from("user_profiles").update({is_enabled:A}).eq("id",_);if(E)throw E;await h(),Y({title:t(A?"users.userEnabled":"users.userDisabled"),description:t("users.statusUpdateSuccess")})}catch(k){console.error("Error updating user status:",k),Y({title:t("users.statusUpdateError"),description:k.message,variant:"destructive"})}},y=async _=>{const A=i.find(E=>E.id===_);if(Ga.includes(A?.email)){Y({title:t("users.deleteError"),description:t("users.cannotModifySuperAdmin"),variant:"destructive"});return}const k=t("users.confirmDelete",{email:A?.email});if(window.confirm(k))try{const{error:E}=await V.from("user_profiles").delete().eq("id",_);if(E)throw E;const{error:N}=await V.auth.admin.deleteUser(_);N&&console.warn("Could not delete from auth.users:",N),await h(),Y({title:t("users.userDeleted"),description:t("users.userDeletedSuccess")})}catch(E){console.error("Error deleting user:",E),Y({title:t("users.deleteError"),description:E.message,variant:"destructive"})}},b=Ga.includes(e?.email),j=i.filter(_=>_.email?.toLowerCase().includes(u.toLowerCase())||_.full_name?.toLowerCase().includes(u.toLowerCase())),C=_=>{switch(_){case"super_admin":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s.jsx("div",{className:"min-h-screen py-8 px-4",children:s.jsxs("div",{className:"container mx-auto max-w-7xl",children:[s.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",style:Xe(r),children:t("users.management")}),s.jsx("p",{className:"text-gray-600",children:t("users.managementDescription")})]}),s.jsxs(we,{onClick:h,disabled:l,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(ls,{className:`w-4 h-4 ${l?"animate-spin":""}`}),t("users.refresh")]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[s.jsxs("div",{className:"relative w-full sm:w-96",children:[s.jsx(Lc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:`${t("users.table.email")}, ${t("users.table.name")}...`,value:u,onChange:_=>m(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex gap-4 text-sm",children:[s.jsxs("div",{className:"px-4 py-2 glass-effect rounded-xl",children:[s.jsxs("span",{className:"text-gray-600",children:[t("users.total"),":"]}),s.jsx("span",{className:"ml-2 font-bold",children:i.length})]}),s.jsxs("div",{className:"px-4 py-2 glass-effect rounded-xl",children:[s.jsxs("span",{className:"text-gray-600",children:[t("users.table.active"),":"]}),s.jsx("span",{className:"ml-2 font-bold text-green-600",children:i.filter(_=>_.is_enabled).length})]})]})]})]}),s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect rounded-2xl overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.email")}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.name")}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.role")}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.status")}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.actions")})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:l?s.jsx("tr",{children:s.jsxs("td",{colSpan:"5",className:"px-6 py-12 text-center",children:[s.jsx(ls,{className:"w-8 h-8 animate-spin mx-auto text-gray-400 mb-2"}),s.jsx("p",{className:"text-gray-500",children:t("users.loadingUsers")})]})}):j.length===0?s.jsx("tr",{children:s.jsxs("td",{colSpan:"5",className:"px-6 py-12 text-center",children:[s.jsx(_o,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),s.jsx("p",{className:"text-gray-500",children:t(u?"users.noUsersFound":"users.noUsers")})]})}):j.map((_,A)=>{const k=Ga.includes(_.email);return s.jsxs(oe.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:A*.05},className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-semibold",children:_.email?.charAt(0).toUpperCase()})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.email})})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-900",children:_.full_name||"-"})}),s.jsx("td",{className:"px-6 py-4",children:k?s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[s.jsx(em,{className:"w-3 h-3 mr-1"}),t("users.superAdmin")]}):b?s.jsxs("select",{value:_.role||"user",onChange:E=>p(_.id,E.target.value),className:`px-3 py-1 rounded-full text-xs font-medium border-0 focus:ring-2 focus:ring-blue-500 ${C(_.role)}`,children:[s.jsx("option",{value:"user",children:t("users.roles.user")}),s.jsx("option",{value:"admin",children:t("users.roles.admin")})]}):s.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${C(_.role)}`,children:t(`users.roles.${_.role||"user"}`)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${_.is_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_.is_enabled?t("users.table.active"):t("users.table.inactive")})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[!k&&b&&s.jsxs(s.Fragment,{children:[s.jsx(we,{variant:_.is_enabled?"outline":"default",size:"sm",onClick:()=>g(_.id,!_.is_enabled),className:"flex items-center gap-2",title:_.is_enabled?t("users.disableUser"):t("users.enableUser"),children:_.is_enabled?s.jsxs(s.Fragment,{children:[s.jsx(Gk,{className:"w-4 h-4"}),t("users.disable")]}):s.jsxs(s.Fragment,{children:[s.jsx(Hk,{className:"w-4 h-4"}),t("users.enable")]})}),s.jsxs(we,{variant:"outline",size:"sm",onClick:()=>y(_.id),className:"flex items-center gap-2",style:{backgroundColor:r.destructiveBgColor||"#dc2626",color:r.destructiveTextColor||"#ffffff",borderColor:r.destructiveBgColor||"#dc2626"},onMouseEnter:E=>E.currentTarget.style.backgroundColor=r.destructiveHoverBgColor||"#b91c1c",onMouseLeave:E=>E.currentTarget.style.backgroundColor=r.destructiveBgColor||"#dc2626",title:t("users.deleteUser"),children:[s.jsx(zn,{className:"w-4 h-4"}),t("users.delete")]})]}),k&&s.jsxs("span",{className:"text-xs text-gray-400 italic flex items-center gap-1",children:[s.jsx(em,{className:"w-3 h-3"}),t("users.protected")]})]})})]},_.id)})})]})})}),s.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(em,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsxs("p",{className:"font-semibold mb-1",children:[t("users.rolesPermissions.title"),":"]}),s.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[s.jsxs("li",{children:[s.jsxs("strong",{children:[t("users.roles.user"),":"]})," ",t("users.rolesPermissions.userDesc")]}),s.jsxs("li",{children:[s.jsxs("strong",{children:[t("users.roles.admin"),":"]})," ",t("users.rolesPermissions.adminDesc")]}),s.jsxs("li",{children:[s.jsxs("strong",{children:[t("users.roles.super_admin"),":"]})," ",t("users.rolesPermissions.superAdminDesc")]})]})]})]})}),s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"p-4 bg-amber-50 border border-amber-200 rounded-xl",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Qt,{className:"w-5 h-5 text-amber-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-amber-800",children:[s.jsxs("p",{className:"font-semibold mb-1",children:[t("users.securityNote.title"),":"]}),s.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[s.jsx("li",{children:t("users.securityNote.superAdminProtected")}),s.jsx("li",{children:t("users.securityNote.onlySuperAdminManage")}),s.jsx("li",{children:t("users.securityNote.deletionPermanent")})]})]})]})})]})]})})},cv="papuenvios_supabase_auth_handled",u3=({onNavigate:t})=>{const[e,r]=w.useState(!0),[i,o]=w.useState(null);return w.useEffect(()=>{let l=!0;return(async()=>{try{if(console.log("[AuthCallback] start handling callback",{href:window.location.href,hash:window.location.hash,search:window.location.search}),sessionStorage.getItem(cv)==="1"){console.warn("[AuthCallback] already handled in this session"),l&&r(!1);const{data:{session:m}}=await V.auth.getSession();if(m?.user&&t){const h=await Jm(m.user.id);t(h==="admin"||h==="super_admin"?"dashboard":"products")}return}sessionStorage.setItem(cv,"1");let u=null;if(typeof V.auth.getSessionFromUrl=="function"){const{data:m,error:h}=await V.auth.getSessionFromUrl({storeSession:!0});h?console.warn("[AuthCallback] getSessionFromUrl returned error",h):u=m?.session}if(!u){const{data:{session:m},error:h}=await V.auth.getSession();h&&console.warn("[AuthCallback] getSession returned error",h),u=m}if(!u){await new Promise(h=>setTimeout(h,800));const{data:{session:m}}=await V.auth.getSession();u=m}if(!u?.user)throw new Error("No se pudo establecer la sesin de usuario");console.log("[AuthCallback] Auth success for:",u.user.email);try{window.history.replaceState({},document.title,window.location.pathname)}catch{}if(Y({title:"Bienvenido!",description:`Has iniciado sesin como ${u.user.email}`}),t){const m=await Jm(u.user.id);setTimeout(()=>{t(m==="admin"||m==="super_admin"?"dashboard":"products")},150)}}catch(u){console.error("[AuthCallback] error:",u);const m=u?.message||String(u);o(m),Y({title:"Error de Autenticacin",description:m,variant:"destructive"}),setTimeout(()=>{t&&t("login")},1800)}finally{l&&r(!1)}})(),()=>{l=!1}},[t]),e?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center p-6 bg-white rounded shadow",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-spin mx-auto"}),s.jsx("p",{className:"mt-4",children:"Completando autenticacin..."})]})}):i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center p-6 bg-white rounded shadow",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Error de Autenticacin"}),s.jsx("p",{className:"mt-2 text-red-600",children:i})]})}):null},pn=(t,e)=>i=>{const{user:o,loading:l,checkRole:c,userRole:u}=Et();return l?s.jsx(qw,{}):o?c(e)?s.jsx(t,{...i}):s.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:s.jsxs("div",{className:"glass-effect p-8 rounded-2xl text-center max-w-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Acceso restringido"}),s.jsxs("p",{className:"text-gray-600",children:["No tienes permisos para ver esta pgina. Rol requerido: ",e,". Tu rol: ",u||"ninguno","."]})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:s.jsxs("div",{className:"glass-effect p-8 rounded-2xl text-center max-w-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Autenticacin requerida"}),s.jsx("p",{className:"text-gray-600",children:"Debes iniciar sesin para acceder a esta pgina."})]})})};function m3(){const{visualSettings:t}=Xt();return w.useEffect(()=>{document.title=t.companyName||"PapuEnvos"},[t.companyName]),s.jsxs(VN,{children:[s.jsxs("title",{children:[t.companyName||"PapuEnvos"," - Plataforma de Comercio Digital"]}),s.jsx("meta",{name:"description",content:"Plataforma completa de comercio digital con vendedores independientes, remesas y gestin de ganancias"})]})}const f3=pn(d3,"admin"),h3=pn(QD,"admin"),p3=pn(JD,"admin"),g3=pn(a3,"admin"),y3=pn(c3,"user"),x3=pn(LD,"user"),v3=pn($D,"user"),b3=pn(FD,"user");function w3(){const[t,e]=w.useState(!0),[r,i]=w.useState("home"),[o,l]=w.useState({itemId:null,itemType:null});w.useEffect(()=>{const m=window.location.pathname,h=new URLSearchParams(window.location.search),p=new URLSearchParams(window.location.hash.substring(1));(m==="/auth/callback"||h.has("access_token")||p.has("access_token")||h.has("code"))&&i("auth/callback");const g=m.match(/^\/product\/([^/]+)$/),y=m.match(/^\/combo\/([^/]+)$/);g?(i("product-detail"),l({itemId:g[1],itemType:"product"})):y&&(i("product-detail"),l({itemId:y[1],itemType:"combo"}));const b=setTimeout(()=>{e(!1)},2500);return()=>clearTimeout(b)},[]);const c=(m,h={})=>{if(i(m),m==="product-detail"&&h.itemId&&h.itemType){l({itemId:h.itemId,itemType:h.itemType});const p=`/${h.itemType}/${h.itemId}`;window.history.pushState({},"",p)}else m==="home"&&window.location.pathname!=="/"?window.history.pushState({},"","/"):m!=="home"&&window.location.pathname==="/"&&window.history.pushState({},"",`/${m}`)},u=()=>{switch(r){case"home":return s.jsx(sv,{onNavigate:c});case"products":return s.jsx(GO,{onNavigate:c});case"product-detail":return s.jsx(YO,{onNavigate:c,itemId:o.itemId,itemType:o.itemType});case"remittances":return s.jsx(QO,{onNavigate:c});case"send-remittance":return s.jsx(x3,{onNavigate:c});case"my-remittances":return s.jsx(v3,{onNavigate:c});case"recipients":return s.jsx(b3,{onNavigate:c});case"dashboard":return s.jsx(h3,{onNavigate:c});case"admin":return s.jsx(p3,{onNavigate:c});case"settings":return s.jsx(g3,{onNavigate:c});case"cart":return s.jsx(o3,{onNavigate:c});case"login":return s.jsx(l3,{onNavigate:c});case"user-panel":return s.jsx(y3,{onNavigate:c});case"user-management":return s.jsx(f3,{onNavigate:c});case"auth/callback":return s.jsx(u3,{onNavigate:c});default:return s.jsx(sv,{onNavigate:c})}};return s.jsx(UA,{children:s.jsx(xv,{children:s.jsx(NO,{children:s.jsx(CO,{children:s.jsx($A,{children:s.jsx(ZO,{children:s.jsxs("div",{className:"min-h-screen",children:[s.jsx(m3,{}),s.jsx(Zt,{mode:"wait",children:t?s.jsx(FA,{},"loading"):s.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen",children:[r!=="auth/callback"&&s.jsx(BO,{currentPage:r,onNavigate:c}),s.jsx("main",{className:r!=="auth/callback"?"pt-20":"",children:s.jsx(Zt,{mode:"wait",children:s.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:u()},r)})})]},"main")}),s.jsx(rP,{})]})})})})})})})}gN.createRoot(document.getElementById("root")).render(s.jsx(nt.StrictMode,{children:s.jsx(w3,{})}));
