function A_(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function Os(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function R_(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),r}var xd={exports:{}},ko={},bd={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function O_(){if(jg)return We;jg=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(E){return E===null||typeof E!="object"?null:(E=g&&E[g]||E["@@iterator"],typeof E=="function"?E:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,C={};function j(E,I,X){this.props=E,this.context=I,this.refs=C,this.updater=X||b}j.prototype.isReactComponent={},j.prototype.setState=function(E,I){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,I,"setState")},j.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function R(){}R.prototype=j.prototype;function A(E,I,X){this.props=E,this.context=I,this.refs=C,this.updater=X||b}var N=A.prototype=new R;N.constructor=A,_(N,j.prototype),N.isPureReactComponent=!0;var P=Array.isArray,D=Object.prototype.hasOwnProperty,M={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function Q(E,I,X){var le,be={},Ce=null,ue=null;if(I!=null)for(le in I.ref!==void 0&&(ue=I.ref),I.key!==void 0&&(Ce=""+I.key),I)D.call(I,le)&&!L.hasOwnProperty(le)&&(be[le]=I[le]);var Ne=arguments.length-2;if(Ne===1)be.children=X;else if(1<Ne){for(var Oe=Array(Ne),Y=0;Y<Ne;Y++)Oe[Y]=arguments[Y+2];be.children=Oe}if(E&&E.defaultProps)for(le in Ne=E.defaultProps,Ne)be[le]===void 0&&(be[le]=Ne[le]);return{$$typeof:t,type:E,key:Ce,ref:ue,props:be,_owner:M.current}}function re(E,I){return{$$typeof:t,type:E.type,key:I,ref:E.ref,props:E.props,_owner:E._owner}}function B(E){return typeof E=="object"&&E!==null&&E.$$typeof===t}function ye(E){var I={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(X){return I[X]})}var ne=/\/+/g;function we(E,I){return typeof E=="object"&&E!==null&&E.key!=null?ye(""+E.key):I.toString(36)}function H(E,I,X,le,be){var Ce=typeof E;(Ce==="undefined"||Ce==="boolean")&&(E=null);var ue=!1;if(E===null)ue=!0;else switch(Ce){case"string":case"number":ue=!0;break;case"object":switch(E.$$typeof){case t:case e:ue=!0}}if(ue)return ue=E,be=be(ue),E=le===""?"."+we(ue,0):le,P(be)?(X="",E!=null&&(X=E.replace(ne,"$&/")+"/"),H(be,I,X,"",function(Y){return Y})):be!=null&&(B(be)&&(be=re(be,X+(!be.key||ue&&ue.key===be.key?"":(""+be.key).replace(ne,"$&/")+"/")+E)),I.push(be)),1;if(ue=0,le=le===""?".":le+":",P(E))for(var Ne=0;Ne<E.length;Ne++){Ce=E[Ne];var Oe=le+we(Ce,Ne);ue+=H(Ce,I,X,Oe,be)}else if(Oe=v(E),typeof Oe=="function")for(E=Oe.call(E),Ne=0;!(Ce=E.next()).done;)Ce=Ce.value,Oe=le+we(Ce,Ne++),ue+=H(Ce,I,X,Oe,be);else if(Ce==="object")throw I=String(E),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return ue}function ce(E,I,X){if(E==null)return E;var le=[],be=0;return H(E,le,"","",function(Ce){return I.call(X,Ce,be++)}),le}function G(E){if(E._status===-1){var I=E._result;I=I(),I.then(function(X){(E._status===0||E._status===-1)&&(E._status=1,E._result=X)},function(X){(E._status===0||E._status===-1)&&(E._status=2,E._result=X)}),E._status===-1&&(E._status=0,E._result=I)}if(E._status===1)return E._result.default;throw E._result}var ae={current:null},V={transition:null},oe={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:V,ReactCurrentOwner:M};function ie(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:ce,forEach:function(E,I,X){ce(E,function(){I.apply(this,arguments)},X)},count:function(E){var I=0;return ce(E,function(){I++}),I},toArray:function(E){return ce(E,function(I){return I})||[]},only:function(E){if(!B(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},We.Component=j,We.Fragment=r,We.Profiler=a,We.PureComponent=A,We.StrictMode=s,We.Suspense=h,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,We.act=ie,We.cloneElement=function(E,I,X){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var le=_({},E.props),be=E.key,Ce=E.ref,ue=E._owner;if(I!=null){if(I.ref!==void 0&&(Ce=I.ref,ue=M.current),I.key!==void 0&&(be=""+I.key),E.type&&E.type.defaultProps)var Ne=E.type.defaultProps;for(Oe in I)D.call(I,Oe)&&!L.hasOwnProperty(Oe)&&(le[Oe]=I[Oe]===void 0&&Ne!==void 0?Ne[Oe]:I[Oe])}var Oe=arguments.length-2;if(Oe===1)le.children=X;else if(1<Oe){Ne=Array(Oe);for(var Y=0;Y<Oe;Y++)Ne[Y]=arguments[Y+2];le.children=Ne}return{$$typeof:t,type:E.type,key:be,ref:Ce,props:le,_owner:ue}},We.createContext=function(E){return E={$$typeof:u,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:l,_context:E},E.Consumer=E},We.createElement=Q,We.createFactory=function(E){var I=Q.bind(null,E);return I.type=E,I},We.createRef=function(){return{current:null}},We.forwardRef=function(E){return{$$typeof:d,render:E}},We.isValidElement=B,We.lazy=function(E){return{$$typeof:p,_payload:{_status:-1,_result:E},_init:G}},We.memo=function(E,I){return{$$typeof:m,type:E,compare:I===void 0?null:I}},We.startTransition=function(E){var I=V.transition;V.transition={};try{E()}finally{V.transition=I}},We.unstable_act=ie,We.useCallback=function(E,I){return ae.current.useCallback(E,I)},We.useContext=function(E){return ae.current.useContext(E)},We.useDebugValue=function(){},We.useDeferredValue=function(E){return ae.current.useDeferredValue(E)},We.useEffect=function(E,I){return ae.current.useEffect(E,I)},We.useId=function(){return ae.current.useId()},We.useImperativeHandle=function(E,I,X){return ae.current.useImperativeHandle(E,I,X)},We.useInsertionEffect=function(E,I){return ae.current.useInsertionEffect(E,I)},We.useLayoutEffect=function(E,I){return ae.current.useLayoutEffect(E,I)},We.useMemo=function(E,I){return ae.current.useMemo(E,I)},We.useReducer=function(E,I,X){return ae.current.useReducer(E,I,X)},We.useRef=function(E){return ae.current.useRef(E)},We.useState=function(E){return ae.current.useState(E)},We.useSyncExternalStore=function(E,I,X){return ae.current.useSyncExternalStore(E,I,X)},We.useTransition=function(){return ae.current.useTransition()},We.version="18.3.1",We}var _g;function pc(){return _g||(_g=1,bd.exports=O_()),bd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function M_(){if(Cg)return ko;Cg=1;var t=pc(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,h,m){var p,g={},v=null,b=null;m!==void 0&&(v=""+m),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(b=h.ref);for(p in h)s.call(h,p)&&!l.hasOwnProperty(p)&&(g[p]=h[p]);if(d&&d.defaultProps)for(p in h=d.defaultProps,h)g[p]===void 0&&(g[p]=h[p]);return{$$typeof:e,type:d,key:v,ref:b,props:g,_owner:a.current}}return ko.Fragment=r,ko.jsx=u,ko.jsxs=u,ko}var Sg;function D_(){return Sg||(Sg=1,xd.exports=M_()),xd.exports}var o=D_(),w=pc();const rt=Os(w),Qv=A_({__proto__:null,default:rt},[w]);var Al={},wd={exports:{}},Zt={},jd={exports:{}},_d={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function I_(){return Ng||(Ng=1,(function(t){function e(V,oe){var ie=V.length;V.push(oe);e:for(;0<ie;){var E=ie-1>>>1,I=V[E];if(0<a(I,oe))V[E]=oe,V[ie]=I,ie=E;else break e}}function r(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var oe=V[0],ie=V.pop();if(ie!==oe){V[0]=ie;e:for(var E=0,I=V.length,X=I>>>1;E<X;){var le=2*(E+1)-1,be=V[le],Ce=le+1,ue=V[Ce];if(0>a(be,ie))Ce<I&&0>a(ue,be)?(V[E]=ue,V[Ce]=ie,E=Ce):(V[E]=be,V[le]=ie,E=le);else if(Ce<I&&0>a(ue,ie))V[E]=ue,V[Ce]=ie,E=Ce;else break e}}return oe}function a(V,oe){var ie=V.sortIndex-oe.sortIndex;return ie!==0?ie:V.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var h=[],m=[],p=1,g=null,v=3,b=!1,_=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(V){for(var oe=r(m);oe!==null;){if(oe.callback===null)s(m);else if(oe.startTime<=V)s(m),oe.sortIndex=oe.expirationTime,e(h,oe);else break;oe=r(m)}}function P(V){if(C=!1,N(V),!_)if(r(h)!==null)_=!0,G(D);else{var oe=r(m);oe!==null&&ae(P,oe.startTime-V)}}function D(V,oe){_=!1,C&&(C=!1,R(Q),Q=-1),b=!0;var ie=v;try{for(N(oe),g=r(h);g!==null&&(!(g.expirationTime>oe)||V&&!ye());){var E=g.callback;if(typeof E=="function"){g.callback=null,v=g.priorityLevel;var I=E(g.expirationTime<=oe);oe=t.unstable_now(),typeof I=="function"?g.callback=I:g===r(h)&&s(h),N(oe)}else s(h);g=r(h)}if(g!==null)var X=!0;else{var le=r(m);le!==null&&ae(P,le.startTime-oe),X=!1}return X}finally{g=null,v=ie,b=!1}}var M=!1,L=null,Q=-1,re=5,B=-1;function ye(){return!(t.unstable_now()-B<re)}function ne(){if(L!==null){var V=t.unstable_now();B=V;var oe=!0;try{oe=L(!0,V)}finally{oe?we():(M=!1,L=null)}}else M=!1}var we;if(typeof A=="function")we=function(){A(ne)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ce=H.port2;H.port1.onmessage=ne,we=function(){ce.postMessage(null)}}else we=function(){j(ne,0)};function G(V){L=V,M||(M=!0,we())}function ae(V,oe){Q=j(function(){V(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){_||b||(_=!0,G(D))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(V){switch(v){case 1:case 2:case 3:var oe=3;break;default:oe=v}var ie=v;v=oe;try{return V()}finally{v=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,oe){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ie=v;v=V;try{return oe()}finally{v=ie}},t.unstable_scheduleCallback=function(V,oe,ie){var E=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?E+ie:E):ie=E,V){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ie+I,V={id:p++,callback:oe,priorityLevel:V,startTime:ie,expirationTime:I,sortIndex:-1},ie>E?(V.sortIndex=ie,e(m,V),r(h)===null&&V===r(m)&&(C?(R(Q),Q=-1):C=!0,ae(P,ie-E))):(V.sortIndex=I,e(h,V),_||b||(_=!0,G(D))),V},t.unstable_shouldYield=ye,t.unstable_wrapCallback=function(V){var oe=v;return function(){var ie=v;v=oe;try{return V.apply(this,arguments)}finally{v=ie}}}})(_d)),_d}var kg;function L_(){return kg||(kg=1,jd.exports=I_()),jd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function $_(){if(Eg)return Zt;Eg=1;var t=pc(),e=L_();function r(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(n,i){u(n,i),u(n+"Capture",i)}function u(n,i){for(a[n]=i,n=0;n<i.length;n++)s.add(i[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function v(n){return h.call(g,n)?!0:h.call(p,n)?!1:m.test(n)?g[n]=!0:(p[n]=!0,!1)}function b(n,i,c,f){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _(n,i,c,f){if(i===null||typeof i>"u"||b(n,i,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function C(n,i,c,f,y,x,S){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=n,this.type=i,this.sanitizeURL=x,this.removeEmptyString=S}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];j[i]=new C(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function A(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(R,A);j[i]=new C(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(R,A);j[i]=new C(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(R,A);j[i]=new C(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function N(n,i,c,f){var y=j.hasOwnProperty(i)?j[i]:null;(y!==null?y.type!==0:f||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(_(i,c,y,f)&&(c=null),f||y===null?v(i)&&(c===null?n.removeAttribute(i):n.setAttribute(i,""+c)):y.mustUseProperty?n[y.propertyName]=c===null?y.type===3?!1:"":c:(i=y.attributeName,f=y.attributeNamespace,c===null?n.removeAttribute(i):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,f?n.setAttributeNS(f,i,c):n.setAttribute(i,c))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),M=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),ye=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),V=Symbol.iterator;function oe(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,E;function I(n){if(E===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);E=i&&i[1]||""}return`
`+E+n}var X=!1;function le(n,i){if(!n||X)return"";X=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(J){var f=J}Reflect.construct(n,[],i)}else{try{i.call()}catch(J){f=J}n.call(i.prototype)}else{try{throw Error()}catch(J){f=J}n()}}catch(J){if(J&&f&&typeof J.stack=="string"){for(var y=J.stack.split(`
`),x=f.stack.split(`
`),S=y.length-1,O=x.length-1;1<=S&&0<=O&&y[S]!==x[O];)O--;for(;1<=S&&0<=O;S--,O--)if(y[S]!==x[O]){if(S!==1||O!==1)do if(S--,O--,0>O||y[S]!==x[O]){var $=`
`+y[S].replace(" at new "," at ");return n.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",n.displayName)),$}while(1<=S&&0<=O);break}}}finally{X=!1,Error.prepareStackTrace=c}return(n=n?n.displayName||n.name:"")?I(n):""}function be(n){switch(n.tag){case 5:return I(n.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return n=le(n.type,!1),n;case 11:return n=le(n.type.render,!1),n;case 1:return n=le(n.type,!0),n;default:return""}}function Ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case L:return"Fragment";case M:return"Portal";case re:return"Profiler";case Q:return"StrictMode";case we:return"Suspense";case H:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ye:return(n.displayName||"Context")+".Consumer";case B:return(n._context.displayName||"Context")+".Provider";case ne:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ce:return i=n.displayName||null,i!==null?i:Ce(n.type)||"Memo";case G:i=n._payload,n=n._init;try{return Ce(n(i))}catch{}}return null}function ue(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(i);case 8:return i===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ne(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Oe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Y(n){var i=Oe(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),f=""+n[i];if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,x=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return y.call(this)},set:function(S){f=""+S,x.call(this,S)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function K(n){n._valueTracker||(n._valueTracker=Y(n))}function De(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var c=i.getValue(),f="";return n&&(f=Oe(n)?n.checked?"true":"false":n.value),n=f,n!==c?(i.setValue(n),!0):!1}function _e(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function T(n,i){var c=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??n._wrapperState.initialChecked})}function pe(n,i){var c=i.defaultValue==null?"":i.defaultValue,f=i.checked!=null?i.checked:i.defaultChecked;c=Ne(i.value!=null?i.value:c),n._wrapperState={initialChecked:f,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function te(n,i){i=i.checked,i!=null&&N(n,"checked",i,!1)}function U(n,i){te(n,i);var c=Ne(i.value),f=i.type;if(c!=null)f==="number"?(c===0&&n.value===""||n.value!=c)&&(n.value=""+c):n.value!==""+c&&(n.value=""+c);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Pe(n,i.type,c):i.hasOwnProperty("defaultValue")&&Pe(n,i.type,Ne(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function se(n,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var f=i.type;if(!(f!=="submit"&&f!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,c||i===n.value||(n.value=i),n.defaultValue=i}c=n.name,c!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,c!==""&&(n.name=c)}function Pe(n,i,c){(i!=="number"||_e(n.ownerDocument)!==n)&&(c==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+c&&(n.defaultValue=""+c))}var Z=Array.isArray;function je(n,i,c,f){if(n=n.options,i){i={};for(var y=0;y<c.length;y++)i["$"+c[y]]=!0;for(c=0;c<n.length;c++)y=i.hasOwnProperty("$"+n[c].value),n[c].selected!==y&&(n[c].selected=y),y&&f&&(n[c].defaultSelected=!0)}else{for(c=""+Ne(c),i=null,y=0;y<n.length;y++){if(n[y].value===c){n[y].selected=!0,f&&(n[y].defaultSelected=!0);return}i!==null||n[y].disabled||(i=n[y])}i!==null&&(i.selected=!0)}}function Ie(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Xe(n,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(r(92));if(Z(c)){if(1<c.length)throw Error(r(93));c=c[0]}i=c}i==null&&(i=""),c=i}n._wrapperState={initialValue:Ne(c)}}function bt(n,i){var c=Ne(i.value),f=Ne(i.defaultValue);c!=null&&(c=""+c,c!==n.value&&(n.value=c),i.defaultValue==null&&n.defaultValue!==c&&(n.defaultValue=c)),f!=null&&(n.defaultValue=""+f)}function dt(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Dt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Dt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qe,nr=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,f,y){MSApp.execUnsafeLocalFunction(function(){return n(i,c,f,y)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(qe=qe||document.createElement("div"),qe.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=qe.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Fr(n,i){if(i){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=i;return}}n.textContent=i}var en={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ic=["Webkit","ms","Moz","O"];Object.keys(en).forEach(function(n){Ic.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),en[i]=en[n]})});function va(n,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||en.hasOwnProperty(n)&&en[n]?(""+i).trim():i+"px"}function xa(n,i){n=n.style;for(var c in i)if(i.hasOwnProperty(c)){var f=c.indexOf("--")===0,y=va(c,i[c],f);c==="float"&&(c="cssFloat"),f?n.setProperty(c,y):n[c]=y}}var Lc=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wi(n,i){if(i){if(Lc[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function Hi(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fs=null;function Us(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Bs=null,tn=null,bn=null;function Vs(n){if(n=fo(n)){if(typeof Bs!="function")throw Error(r(280));var i=n.stateNode;i&&(i=Ha(i),Bs(n.stateNode,n.type,i))}}function ba(n){tn?bn?bn.push(n):bn=[n]:tn=n}function wa(){if(tn){var n=tn,i=bn;if(bn=tn=null,Vs(n),i)for(n=0;n<i.length;n++)Vs(i[n])}}function ja(n,i){return n(i)}function _a(){}var rs=!1;function Ca(n,i,c){if(rs)return n(i,c);rs=!0;try{return ja(n,i,c)}finally{rs=!1,(tn!==null||bn!==null)&&(_a(),wa())}}function Cr(n,i){var c=n.stateNode;if(c===null)return null;var f=Ha(c);if(f===null)return null;c=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(r(231,i,typeof c));return c}var wn=!1;if(d)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){wn=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{wn=!1}function $c(n,i,c,f,y,x,S,O,$){var J=Array.prototype.slice.call(arguments,3);try{i.apply(c,J)}catch(fe){this.onError(fe)}}var ss=!1,zs=null,k=!1,z=null,Se={onError:function(n){ss=!0,zs=n}};function ze(n,i,c,f,y,x,S,O,$){ss=!1,zs=null,$c.apply(Se,arguments)}function Ke(n,i,c,f,y,x,S,O,$){if(ze.apply(this,arguments),ss){if(ss){var J=zs;ss=!1,zs=null}else throw Error(r(198));k||(k=!0,z=J)}}function Ze(n){var i=n,c=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(c=i.return),n=i.return;while(n)}return i.tag===3?c:null}function Sa(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Hh(n){if(Ze(n)!==n)throw Error(r(188))}function Bw(n){var i=n.alternate;if(!i){if(i=Ze(n),i===null)throw Error(r(188));return i!==n?null:n}for(var c=n,f=i;;){var y=c.return;if(y===null)break;var x=y.alternate;if(x===null){if(f=y.return,f!==null){c=f;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===c)return Hh(y),n;if(x===f)return Hh(y),i;x=x.sibling}throw Error(r(188))}if(c.return!==f.return)c=y,f=x;else{for(var S=!1,O=y.child;O;){if(O===c){S=!0,c=y,f=x;break}if(O===f){S=!0,f=y,c=x;break}O=O.sibling}if(!S){for(O=x.child;O;){if(O===c){S=!0,c=x,f=y;break}if(O===f){S=!0,f=x,c=y;break}O=O.sibling}if(!S)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?n:i}function Gh(n){return n=Bw(n),n!==null?Kh(n):null}function Kh(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Kh(n);if(i!==null)return i;n=n.sibling}return null}var Qh=e.unstable_scheduleCallback,Yh=e.unstable_cancelCallback,Vw=e.unstable_shouldYield,zw=e.unstable_requestPaint,yt=e.unstable_now,qw=e.unstable_getCurrentPriorityLevel,Fc=e.unstable_ImmediatePriority,Jh=e.unstable_UserBlockingPriority,Na=e.unstable_NormalPriority,Ww=e.unstable_LowPriority,Xh=e.unstable_IdlePriority,ka=null,Ur=null;function Hw(n){if(Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(ka,n,void 0,(n.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:Qw,Gw=Math.log,Kw=Math.LN2;function Qw(n){return n>>>=0,n===0?32:31-(Gw(n)/Kw|0)|0}var Ea=64,Pa=4194304;function Gi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ta(n,i){var c=n.pendingLanes;if(c===0)return 0;var f=0,y=n.suspendedLanes,x=n.pingedLanes,S=c&268435455;if(S!==0){var O=S&~y;O!==0?f=Gi(O):(x&=S,x!==0&&(f=Gi(x)))}else S=c&~y,S!==0?f=Gi(S):x!==0&&(f=Gi(x));if(f===0)return 0;if(i!==0&&i!==f&&(i&y)===0&&(y=f&-f,x=i&-i,y>=x||y===16&&(x&4194240)!==0))return i;if((f&4)!==0&&(f|=c&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=f;0<i;)c=31-Sr(i),y=1<<c,f|=n[c],i&=~y;return f}function Yw(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jw(n,i){for(var c=n.suspendedLanes,f=n.pingedLanes,y=n.expirationTimes,x=n.pendingLanes;0<x;){var S=31-Sr(x),O=1<<S,$=y[S];$===-1?((O&c)===0||(O&f)!==0)&&(y[S]=Yw(O,i)):$<=i&&(n.expiredLanes|=O),x&=~O}}function Uc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Zh(){var n=Ea;return Ea<<=1,(Ea&4194240)===0&&(Ea=64),n}function Bc(n){for(var i=[],c=0;31>c;c++)i.push(n);return i}function Ki(n,i,c){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Sr(i),n[i]=c}function Xw(n,i){var c=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<c;){var y=31-Sr(c),x=1<<y;i[y]=0,f[y]=-1,n[y]=-1,c&=~x}}function Vc(n,i){var c=n.entangledLanes|=i;for(n=n.entanglements;c;){var f=31-Sr(c),y=1<<f;y&i|n[f]&i&&(n[f]|=i),c&=~y}}var Je=0;function em(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var tm,zc,rm,nm,sm,qc=!1,Aa=[],jn=null,_n=null,Cn=null,Qi=new Map,Yi=new Map,Sn=[],Zw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function im(n,i){switch(n){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Qi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yi.delete(i.pointerId)}}function Ji(n,i,c,f,y,x){return n===null||n.nativeEvent!==x?(n={blockedOn:i,domEventName:c,eventSystemFlags:f,nativeEvent:x,targetContainers:[y]},i!==null&&(i=fo(i),i!==null&&zc(i)),n):(n.eventSystemFlags|=f,i=n.targetContainers,y!==null&&i.indexOf(y)===-1&&i.push(y),n)}function ej(n,i,c,f,y){switch(i){case"focusin":return jn=Ji(jn,n,i,c,f,y),!0;case"dragenter":return _n=Ji(_n,n,i,c,f,y),!0;case"mouseover":return Cn=Ji(Cn,n,i,c,f,y),!0;case"pointerover":var x=y.pointerId;return Qi.set(x,Ji(Qi.get(x)||null,n,i,c,f,y)),!0;case"gotpointercapture":return x=y.pointerId,Yi.set(x,Ji(Yi.get(x)||null,n,i,c,f,y)),!0}return!1}function om(n){var i=is(n.target);if(i!==null){var c=Ze(i);if(c!==null){if(i=c.tag,i===13){if(i=Sa(c),i!==null){n.blockedOn=i,sm(n.priority,function(){rm(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ra(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var c=Hc(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(c===null){c=n.nativeEvent;var f=new c.constructor(c.type,c);Fs=f,c.target.dispatchEvent(f),Fs=null}else return i=fo(c),i!==null&&zc(i),n.blockedOn=c,!1;i.shift()}return!0}function am(n,i,c){Ra(n)&&c.delete(i)}function tj(){qc=!1,jn!==null&&Ra(jn)&&(jn=null),_n!==null&&Ra(_n)&&(_n=null),Cn!==null&&Ra(Cn)&&(Cn=null),Qi.forEach(am),Yi.forEach(am)}function Xi(n,i){n.blockedOn===i&&(n.blockedOn=null,qc||(qc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tj)))}function Zi(n){function i(y){return Xi(y,n)}if(0<Aa.length){Xi(Aa[0],n);for(var c=1;c<Aa.length;c++){var f=Aa[c];f.blockedOn===n&&(f.blockedOn=null)}}for(jn!==null&&Xi(jn,n),_n!==null&&Xi(_n,n),Cn!==null&&Xi(Cn,n),Qi.forEach(i),Yi.forEach(i),c=0;c<Sn.length;c++)f=Sn[c],f.blockedOn===n&&(f.blockedOn=null);for(;0<Sn.length&&(c=Sn[0],c.blockedOn===null);)om(c),c.blockedOn===null&&Sn.shift()}var qs=P.ReactCurrentBatchConfig,Oa=!0;function rj(n,i,c,f){var y=Je,x=qs.transition;qs.transition=null;try{Je=1,Wc(n,i,c,f)}finally{Je=y,qs.transition=x}}function nj(n,i,c,f){var y=Je,x=qs.transition;qs.transition=null;try{Je=4,Wc(n,i,c,f)}finally{Je=y,qs.transition=x}}function Wc(n,i,c,f){if(Oa){var y=Hc(n,i,c,f);if(y===null)cu(n,i,f,Ma,c),im(n,f);else if(ej(y,n,i,c,f))f.stopPropagation();else if(im(n,f),i&4&&-1<Zw.indexOf(n)){for(;y!==null;){var x=fo(y);if(x!==null&&tm(x),x=Hc(n,i,c,f),x===null&&cu(n,i,f,Ma,c),x===y)break;y=x}y!==null&&f.stopPropagation()}else cu(n,i,f,null,c)}}var Ma=null;function Hc(n,i,c,f){if(Ma=null,n=Us(f),n=is(n),n!==null)if(i=Ze(n),i===null)n=null;else if(c=i.tag,c===13){if(n=Sa(i),n!==null)return n;n=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Ma=n,null}function lm(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qw()){case Fc:return 1;case Jh:return 4;case Na:case Ww:return 16;case Xh:return 536870912;default:return 16}default:return 16}}var Nn=null,Gc=null,Da=null;function cm(){if(Da)return Da;var n,i=Gc,c=i.length,f,y="value"in Nn?Nn.value:Nn.textContent,x=y.length;for(n=0;n<c&&i[n]===y[n];n++);var S=c-n;for(f=1;f<=S&&i[c-f]===y[x-f];f++);return Da=y.slice(n,1<f?1-f:void 0)}function Ia(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function La(){return!0}function um(){return!1}function sr(n){function i(c,f,y,x,S){this._reactName=c,this._targetInst=y,this.type=f,this.nativeEvent=x,this.target=S,this.currentTarget=null;for(var O in n)n.hasOwnProperty(O)&&(c=n[O],this[O]=c?c(x):x[O]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?La:um,this.isPropagationStopped=um,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=La)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=La)},persist:function(){},isPersistent:La}),i}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=sr(Ws),eo=ie({},Ws,{view:0,detail:0}),sj=sr(eo),Qc,Yc,to,$a=ie({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==to&&(to&&n.type==="mousemove"?(Qc=n.screenX-to.screenX,Yc=n.screenY-to.screenY):Yc=Qc=0,to=n),Qc)},movementY:function(n){return"movementY"in n?n.movementY:Yc}}),dm=sr($a),ij=ie({},$a,{dataTransfer:0}),oj=sr(ij),aj=ie({},eo,{relatedTarget:0}),Jc=sr(aj),lj=ie({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),cj=sr(lj),uj=ie({},Ws,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),dj=sr(uj),fj=ie({},Ws,{data:0}),fm=sr(fj),hj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gj(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=pj[n])?!!i[n]:!1}function Xc(){return gj}var yj=ie({},eo,{key:function(n){if(n.key){var i=hj[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ia(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mj[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(n){return n.type==="keypress"?Ia(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ia(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),vj=sr(yj),xj=ie({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hm=sr(xj),bj=ie({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),wj=sr(bj),jj=ie({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),_j=sr(jj),Cj=ie({},$a,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Sj=sr(Cj),Nj=[9,13,27,32],Zc=d&&"CompositionEvent"in window,ro=null;d&&"documentMode"in document&&(ro=document.documentMode);var kj=d&&"TextEvent"in window&&!ro,mm=d&&(!Zc||ro&&8<ro&&11>=ro),pm=" ",gm=!1;function ym(n,i){switch(n){case"keyup":return Nj.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Hs=!1;function Ej(n,i){switch(n){case"compositionend":return vm(i);case"keypress":return i.which!==32?null:(gm=!0,pm);case"textInput":return n=i.data,n===pm&&gm?null:n;default:return null}}function Pj(n,i){if(Hs)return n==="compositionend"||!Zc&&ym(n,i)?(n=cm(),Da=Gc=Nn=null,Hs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return mm&&i.locale!=="ko"?null:i.data;default:return null}}var Tj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xm(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Tj[n.type]:i==="textarea"}function bm(n,i,c,f){ba(f),i=za(i,"onChange"),0<i.length&&(c=new Kc("onChange","change",null,c,f),n.push({event:c,listeners:i}))}var no=null,so=null;function Aj(n){$m(n,0)}function Fa(n){var i=Js(n);if(De(i))return n}function Rj(n,i){if(n==="change")return i}var wm=!1;if(d){var eu;if(d){var tu="oninput"in document;if(!tu){var jm=document.createElement("div");jm.setAttribute("oninput","return;"),tu=typeof jm.oninput=="function"}eu=tu}else eu=!1;wm=eu&&(!document.documentMode||9<document.documentMode)}function _m(){no&&(no.detachEvent("onpropertychange",Cm),so=no=null)}function Cm(n){if(n.propertyName==="value"&&Fa(so)){var i=[];bm(i,so,n,Us(n)),Ca(Aj,i)}}function Oj(n,i,c){n==="focusin"?(_m(),no=i,so=c,no.attachEvent("onpropertychange",Cm)):n==="focusout"&&_m()}function Mj(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Fa(so)}function Dj(n,i){if(n==="click")return Fa(i)}function Ij(n,i){if(n==="input"||n==="change")return Fa(i)}function Lj(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Nr=typeof Object.is=="function"?Object.is:Lj;function io(n,i){if(Nr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var c=Object.keys(n),f=Object.keys(i);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var y=c[f];if(!h.call(i,y)||!Nr(n[y],i[y]))return!1}return!0}function Sm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Nm(n,i){var c=Sm(n);n=0;for(var f;c;){if(c.nodeType===3){if(f=n+c.textContent.length,n<=i&&f>=i)return{node:c,offset:i-n};n=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Sm(c)}}function km(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?km(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Em(){for(var n=window,i=_e();i instanceof n.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)n=i.contentWindow;else break;i=_e(n.document)}return i}function ru(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function $j(n){var i=Em(),c=n.focusedElem,f=n.selectionRange;if(i!==c&&c&&c.ownerDocument&&km(c.ownerDocument.documentElement,c)){if(f!==null&&ru(c)){if(i=f.start,n=f.end,n===void 0&&(n=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(n,c.value.length);else if(n=(i=c.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var y=c.textContent.length,x=Math.min(f.start,y);f=f.end===void 0?x:Math.min(f.end,y),!n.extend&&x>f&&(y=f,f=x,x=y),y=Nm(c,x);var S=Nm(c,f);y&&S&&(n.rangeCount!==1||n.anchorNode!==y.node||n.anchorOffset!==y.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(y.node,y.offset),n.removeAllRanges(),x>f?(n.addRange(i),n.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),n.addRange(i)))}}for(i=[],n=c;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)n=i[c],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Fj=d&&"documentMode"in document&&11>=document.documentMode,Gs=null,nu=null,oo=null,su=!1;function Pm(n,i,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;su||Gs==null||Gs!==_e(f)||(f=Gs,"selectionStart"in f&&ru(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),oo&&io(oo,f)||(oo=f,f=za(nu,"onSelect"),0<f.length&&(i=new Kc("onSelect","select",null,i,c),n.push({event:i,listeners:f}),i.target=Gs)))}function Ua(n,i){var c={};return c[n.toLowerCase()]=i.toLowerCase(),c["Webkit"+n]="webkit"+i,c["Moz"+n]="moz"+i,c}var Ks={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionend:Ua("Transition","TransitionEnd")},iu={},Tm={};d&&(Tm=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Ba(n){if(iu[n])return iu[n];if(!Ks[n])return n;var i=Ks[n],c;for(c in i)if(i.hasOwnProperty(c)&&c in Tm)return iu[n]=i[c];return n}var Am=Ba("animationend"),Rm=Ba("animationiteration"),Om=Ba("animationstart"),Mm=Ba("transitionend"),Dm=new Map,Im="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(n,i){Dm.set(n,i),l(i,[n])}for(var ou=0;ou<Im.length;ou++){var au=Im[ou],Uj=au.toLowerCase(),Bj=au[0].toUpperCase()+au.slice(1);kn(Uj,"on"+Bj)}kn(Am,"onAnimationEnd"),kn(Rm,"onAnimationIteration"),kn(Om,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(Mm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vj=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function Lm(n,i,c){var f=n.type||"unknown-event";n.currentTarget=c,Ke(f,i,void 0,n),n.currentTarget=null}function $m(n,i){i=(i&4)!==0;for(var c=0;c<n.length;c++){var f=n[c],y=f.event;f=f.listeners;e:{var x=void 0;if(i)for(var S=f.length-1;0<=S;S--){var O=f[S],$=O.instance,J=O.currentTarget;if(O=O.listener,$!==x&&y.isPropagationStopped())break e;Lm(y,O,J),x=$}else for(S=0;S<f.length;S++){if(O=f[S],$=O.instance,J=O.currentTarget,O=O.listener,$!==x&&y.isPropagationStopped())break e;Lm(y,O,J),x=$}}}if(k)throw n=z,k=!1,z=null,n}function ot(n,i){var c=i[pu];c===void 0&&(c=i[pu]=new Set);var f=n+"__bubble";c.has(f)||(Fm(i,n,2,!1),c.add(f))}function lu(n,i,c){var f=0;i&&(f|=4),Fm(c,n,f,i)}var Va="_reactListening"+Math.random().toString(36).slice(2);function lo(n){if(!n[Va]){n[Va]=!0,s.forEach(function(c){c!=="selectionchange"&&(Vj.has(c)||lu(c,!1,n),lu(c,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Va]||(i[Va]=!0,lu("selectionchange",!1,i))}}function Fm(n,i,c,f){switch(lm(i)){case 1:var y=rj;break;case 4:y=nj;break;default:y=Wc}c=y.bind(null,i,c,n),y=void 0,!wn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(y=!0),f?y!==void 0?n.addEventListener(i,c,{capture:!0,passive:y}):n.addEventListener(i,c,!0):y!==void 0?n.addEventListener(i,c,{passive:y}):n.addEventListener(i,c,!1)}function cu(n,i,c,f,y){var x=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var O=f.stateNode.containerInfo;if(O===y||O.nodeType===8&&O.parentNode===y)break;if(S===4)for(S=f.return;S!==null;){var $=S.tag;if(($===3||$===4)&&($=S.stateNode.containerInfo,$===y||$.nodeType===8&&$.parentNode===y))return;S=S.return}for(;O!==null;){if(S=is(O),S===null)return;if($=S.tag,$===5||$===6){f=x=S;continue e}O=O.parentNode}}f=f.return}Ca(function(){var J=x,fe=Us(c),ge=[];e:{var de=Dm.get(n);if(de!==void 0){var ke=Kc,Te=n;switch(n){case"keypress":if(Ia(c)===0)break e;case"keydown":case"keyup":ke=vj;break;case"focusin":Te="focus",ke=Jc;break;case"focusout":Te="blur",ke=Jc;break;case"beforeblur":case"afterblur":ke=Jc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ke=dm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ke=oj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ke=wj;break;case Am:case Rm:case Om:ke=cj;break;case Mm:ke=_j;break;case"scroll":ke=sj;break;case"wheel":ke=Sj;break;case"copy":case"cut":case"paste":ke=dj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ke=hm}var Re=(i&4)!==0,vt=!Re&&n==="scroll",q=Re?de!==null?de+"Capture":null:de;Re=[];for(var F=J,W;F!==null;){W=F;var ve=W.stateNode;if(W.tag===5&&ve!==null&&(W=ve,q!==null&&(ve=Cr(F,q),ve!=null&&Re.push(co(F,ve,W)))),vt)break;F=F.return}0<Re.length&&(de=new ke(de,Te,null,c,fe),ge.push({event:de,listeners:Re}))}}if((i&7)===0){e:{if(de=n==="mouseover"||n==="pointerover",ke=n==="mouseout"||n==="pointerout",de&&c!==Fs&&(Te=c.relatedTarget||c.fromElement)&&(is(Te)||Te[rn]))break e;if((ke||de)&&(de=fe.window===fe?fe:(de=fe.ownerDocument)?de.defaultView||de.parentWindow:window,ke?(Te=c.relatedTarget||c.toElement,ke=J,Te=Te?is(Te):null,Te!==null&&(vt=Ze(Te),Te!==vt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(ke=null,Te=J),ke!==Te)){if(Re=dm,ve="onMouseLeave",q="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(Re=hm,ve="onPointerLeave",q="onPointerEnter",F="pointer"),vt=ke==null?de:Js(ke),W=Te==null?de:Js(Te),de=new Re(ve,F+"leave",ke,c,fe),de.target=vt,de.relatedTarget=W,ve=null,is(fe)===J&&(Re=new Re(q,F+"enter",Te,c,fe),Re.target=W,Re.relatedTarget=vt,ve=Re),vt=ve,ke&&Te)t:{for(Re=ke,q=Te,F=0,W=Re;W;W=Qs(W))F++;for(W=0,ve=q;ve;ve=Qs(ve))W++;for(;0<F-W;)Re=Qs(Re),F--;for(;0<W-F;)q=Qs(q),W--;for(;F--;){if(Re===q||q!==null&&Re===q.alternate)break t;Re=Qs(Re),q=Qs(q)}Re=null}else Re=null;ke!==null&&Um(ge,de,ke,Re,!1),Te!==null&&vt!==null&&Um(ge,vt,Te,Re,!0)}}e:{if(de=J?Js(J):window,ke=de.nodeName&&de.nodeName.toLowerCase(),ke==="select"||ke==="input"&&de.type==="file")var Me=Rj;else if(xm(de))if(wm)Me=Ij;else{Me=Mj;var Le=Oj}else(ke=de.nodeName)&&ke.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(Me=Dj);if(Me&&(Me=Me(n,J))){bm(ge,Me,c,fe);break e}Le&&Le(n,de,J),n==="focusout"&&(Le=de._wrapperState)&&Le.controlled&&de.type==="number"&&Pe(de,"number",de.value)}switch(Le=J?Js(J):window,n){case"focusin":(xm(Le)||Le.contentEditable==="true")&&(Gs=Le,nu=J,oo=null);break;case"focusout":oo=nu=Gs=null;break;case"mousedown":su=!0;break;case"contextmenu":case"mouseup":case"dragend":su=!1,Pm(ge,c,fe);break;case"selectionchange":if(Fj)break;case"keydown":case"keyup":Pm(ge,c,fe)}var $e;if(Zc)e:{switch(n){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Hs?ym(n,c)&&(Ue="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Ue="onCompositionStart");Ue&&(mm&&c.locale!=="ko"&&(Hs||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Hs&&($e=cm()):(Nn=fe,Gc="value"in Nn?Nn.value:Nn.textContent,Hs=!0)),Le=za(J,Ue),0<Le.length&&(Ue=new fm(Ue,n,null,c,fe),ge.push({event:Ue,listeners:Le}),$e?Ue.data=$e:($e=vm(c),$e!==null&&(Ue.data=$e)))),($e=kj?Ej(n,c):Pj(n,c))&&(J=za(J,"onBeforeInput"),0<J.length&&(fe=new fm("onBeforeInput","beforeinput",null,c,fe),ge.push({event:fe,listeners:J}),fe.data=$e))}$m(ge,i)})}function co(n,i,c){return{instance:n,listener:i,currentTarget:c}}function za(n,i){for(var c=i+"Capture",f=[];n!==null;){var y=n,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=Cr(n,c),x!=null&&f.unshift(co(n,x,y)),x=Cr(n,i),x!=null&&f.push(co(n,x,y))),n=n.return}return f}function Qs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Um(n,i,c,f,y){for(var x=i._reactName,S=[];c!==null&&c!==f;){var O=c,$=O.alternate,J=O.stateNode;if($!==null&&$===f)break;O.tag===5&&J!==null&&(O=J,y?($=Cr(c,x),$!=null&&S.unshift(co(c,$,O))):y||($=Cr(c,x),$!=null&&S.push(co(c,$,O)))),c=c.return}S.length!==0&&n.push({event:i,listeners:S})}var zj=/\r\n?/g,qj=/\u0000|\uFFFD/g;function Bm(n){return(typeof n=="string"?n:""+n).replace(zj,`
`).replace(qj,"")}function qa(n,i,c){if(i=Bm(i),Bm(n)!==i&&c)throw Error(r(425))}function Wa(){}var uu=null,du=null;function fu(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var hu=typeof setTimeout=="function"?setTimeout:void 0,Wj=typeof clearTimeout=="function"?clearTimeout:void 0,Vm=typeof Promise=="function"?Promise:void 0,Hj=typeof queueMicrotask=="function"?queueMicrotask:typeof Vm<"u"?function(n){return Vm.resolve(null).then(n).catch(Gj)}:hu;function Gj(n){setTimeout(function(){throw n})}function mu(n,i){var c=i,f=0;do{var y=c.nextSibling;if(n.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(f===0){n.removeChild(y),Zi(i);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=y}while(c);Zi(i)}function En(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function zm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return n;i--}else c==="/$"&&i++}n=n.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),Br="__reactFiber$"+Ys,uo="__reactProps$"+Ys,rn="__reactContainer$"+Ys,pu="__reactEvents$"+Ys,Kj="__reactListeners$"+Ys,Qj="__reactHandles$"+Ys;function is(n){var i=n[Br];if(i)return i;for(var c=n.parentNode;c;){if(i=c[rn]||c[Br]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(n=zm(n);n!==null;){if(c=n[Br])return c;n=zm(n)}return i}n=c,c=n.parentNode}return null}function fo(n){return n=n[Br]||n[rn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Js(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function Ha(n){return n[uo]||null}var gu=[],Xs=-1;function Pn(n){return{current:n}}function at(n){0>Xs||(n.current=gu[Xs],gu[Xs]=null,Xs--)}function nt(n,i){Xs++,gu[Xs]=n.current,n.current=i}var Tn={},It=Pn(Tn),Kt=Pn(!1),os=Tn;function Zs(n,i){var c=n.type.contextTypes;if(!c)return Tn;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===i)return f.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in c)y[x]=i[x];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=y),y}function Qt(n){return n=n.childContextTypes,n!=null}function Ga(){at(Kt),at(It)}function qm(n,i,c){if(It.current!==Tn)throw Error(r(168));nt(It,i),nt(Kt,c)}function Wm(n,i,c){var f=n.stateNode;if(i=i.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var y in f)if(!(y in i))throw Error(r(108,ue(n)||"Unknown",y));return ie({},c,f)}function Ka(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Tn,os=It.current,nt(It,n),nt(Kt,Kt.current),!0}function Hm(n,i,c){var f=n.stateNode;if(!f)throw Error(r(169));c?(n=Wm(n,i,os),f.__reactInternalMemoizedMergedChildContext=n,at(Kt),at(It),nt(It,n)):at(Kt),nt(Kt,c)}var nn=null,Qa=!1,yu=!1;function Gm(n){nn===null?nn=[n]:nn.push(n)}function Yj(n){Qa=!0,Gm(n)}function An(){if(!yu&&nn!==null){yu=!0;var n=0,i=Je;try{var c=nn;for(Je=1;n<c.length;n++){var f=c[n];do f=f(!0);while(f!==null)}nn=null,Qa=!1}catch(y){throw nn!==null&&(nn=nn.slice(n+1)),Qh(Fc,An),y}finally{Je=i,yu=!1}}return null}var ei=[],ti=0,Ya=null,Ja=0,dr=[],fr=0,as=null,sn=1,on="";function ls(n,i){ei[ti++]=Ja,ei[ti++]=Ya,Ya=n,Ja=i}function Km(n,i,c){dr[fr++]=sn,dr[fr++]=on,dr[fr++]=as,as=n;var f=sn;n=on;var y=32-Sr(f)-1;f&=~(1<<y),c+=1;var x=32-Sr(i)+y;if(30<x){var S=y-y%5;x=(f&(1<<S)-1).toString(32),f>>=S,y-=S,sn=1<<32-Sr(i)+y|c<<y|f,on=x+n}else sn=1<<x|c<<y|f,on=n}function vu(n){n.return!==null&&(ls(n,1),Km(n,1,0))}function xu(n){for(;n===Ya;)Ya=ei[--ti],ei[ti]=null,Ja=ei[--ti],ei[ti]=null;for(;n===as;)as=dr[--fr],dr[fr]=null,on=dr[--fr],dr[fr]=null,sn=dr[--fr],dr[fr]=null}var ir=null,or=null,ut=!1,kr=null;function Qm(n,i){var c=gr(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=n,i=n.deletions,i===null?(n.deletions=[c],n.flags|=16):i.push(c)}function Ym(n,i){switch(n.tag){case 5:var c=n.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,ir=n,or=En(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,ir=n,or=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=as!==null?{id:sn,overflow:on}:null,n.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=gr(18,null,null,0),c.stateNode=i,c.return=n,n.child=c,ir=n,or=null,!0):!1;default:return!1}}function bu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wu(n){if(ut){var i=or;if(i){var c=i;if(!Ym(n,i)){if(bu(n))throw Error(r(418));i=En(c.nextSibling);var f=ir;i&&Ym(n,i)?Qm(f,c):(n.flags=n.flags&-4097|2,ut=!1,ir=n)}}else{if(bu(n))throw Error(r(418));n.flags=n.flags&-4097|2,ut=!1,ir=n}}}function Jm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ir=n}function Xa(n){if(n!==ir)return!1;if(!ut)return Jm(n),ut=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!fu(n.type,n.memoizedProps)),i&&(i=or)){if(bu(n))throw Xm(),Error(r(418));for(;i;)Qm(n,i),i=En(i.nextSibling)}if(Jm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"){if(i===0){or=En(n.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}n=n.nextSibling}or=null}}else or=ir?En(n.stateNode.nextSibling):null;return!0}function Xm(){for(var n=or;n;)n=En(n.nextSibling)}function ri(){or=ir=null,ut=!1}function ju(n){kr===null?kr=[n]:kr.push(n)}var Jj=P.ReactCurrentBatchConfig;function ho(n,i,c){if(n=c.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(r(309));var f=c.stateNode}if(!f)throw Error(r(147,n));var y=f,x=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===x?i.ref:(i=function(S){var O=y.refs;S===null?delete O[x]:O[x]=S},i._stringRef=x,i)}if(typeof n!="string")throw Error(r(284));if(!c._owner)throw Error(r(290,n))}return n}function Za(n,i){throw n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Zm(n){var i=n._init;return i(n._payload)}function ep(n){function i(q,F){if(n){var W=q.deletions;W===null?(q.deletions=[F],q.flags|=16):W.push(F)}}function c(q,F){if(!n)return null;for(;F!==null;)i(q,F),F=F.sibling;return null}function f(q,F){for(q=new Map;F!==null;)F.key!==null?q.set(F.key,F):q.set(F.index,F),F=F.sibling;return q}function y(q,F){return q=Fn(q,F),q.index=0,q.sibling=null,q}function x(q,F,W){return q.index=W,n?(W=q.alternate,W!==null?(W=W.index,W<F?(q.flags|=2,F):W):(q.flags|=2,F)):(q.flags|=1048576,F)}function S(q){return n&&q.alternate===null&&(q.flags|=2),q}function O(q,F,W,ve){return F===null||F.tag!==6?(F=hd(W,q.mode,ve),F.return=q,F):(F=y(F,W),F.return=q,F)}function $(q,F,W,ve){var Me=W.type;return Me===L?fe(q,F,W.props.children,ve,W.key):F!==null&&(F.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===G&&Zm(Me)===F.type)?(ve=y(F,W.props),ve.ref=ho(q,F,W),ve.return=q,ve):(ve=_l(W.type,W.key,W.props,null,q.mode,ve),ve.ref=ho(q,F,W),ve.return=q,ve)}function J(q,F,W,ve){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=md(W,q.mode,ve),F.return=q,F):(F=y(F,W.children||[]),F.return=q,F)}function fe(q,F,W,ve,Me){return F===null||F.tag!==7?(F=gs(W,q.mode,ve,Me),F.return=q,F):(F=y(F,W),F.return=q,F)}function ge(q,F,W){if(typeof F=="string"&&F!==""||typeof F=="number")return F=hd(""+F,q.mode,W),F.return=q,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case D:return W=_l(F.type,F.key,F.props,null,q.mode,W),W.ref=ho(q,null,F),W.return=q,W;case M:return F=md(F,q.mode,W),F.return=q,F;case G:var ve=F._init;return ge(q,ve(F._payload),W)}if(Z(F)||oe(F))return F=gs(F,q.mode,W,null),F.return=q,F;Za(q,F)}return null}function de(q,F,W,ve){var Me=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Me!==null?null:O(q,F,""+W,ve);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case D:return W.key===Me?$(q,F,W,ve):null;case M:return W.key===Me?J(q,F,W,ve):null;case G:return Me=W._init,de(q,F,Me(W._payload),ve)}if(Z(W)||oe(W))return Me!==null?null:fe(q,F,W,ve,null);Za(q,W)}return null}function ke(q,F,W,ve,Me){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return q=q.get(W)||null,O(F,q,""+ve,Me);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case D:return q=q.get(ve.key===null?W:ve.key)||null,$(F,q,ve,Me);case M:return q=q.get(ve.key===null?W:ve.key)||null,J(F,q,ve,Me);case G:var Le=ve._init;return ke(q,F,W,Le(ve._payload),Me)}if(Z(ve)||oe(ve))return q=q.get(W)||null,fe(F,q,ve,Me,null);Za(F,ve)}return null}function Te(q,F,W,ve){for(var Me=null,Le=null,$e=F,Ue=F=0,Tt=null;$e!==null&&Ue<W.length;Ue++){$e.index>Ue?(Tt=$e,$e=null):Tt=$e.sibling;var Ye=de(q,$e,W[Ue],ve);if(Ye===null){$e===null&&($e=Tt);break}n&&$e&&Ye.alternate===null&&i(q,$e),F=x(Ye,F,Ue),Le===null?Me=Ye:Le.sibling=Ye,Le=Ye,$e=Tt}if(Ue===W.length)return c(q,$e),ut&&ls(q,Ue),Me;if($e===null){for(;Ue<W.length;Ue++)$e=ge(q,W[Ue],ve),$e!==null&&(F=x($e,F,Ue),Le===null?Me=$e:Le.sibling=$e,Le=$e);return ut&&ls(q,Ue),Me}for($e=f(q,$e);Ue<W.length;Ue++)Tt=ke($e,q,Ue,W[Ue],ve),Tt!==null&&(n&&Tt.alternate!==null&&$e.delete(Tt.key===null?Ue:Tt.key),F=x(Tt,F,Ue),Le===null?Me=Tt:Le.sibling=Tt,Le=Tt);return n&&$e.forEach(function(Un){return i(q,Un)}),ut&&ls(q,Ue),Me}function Re(q,F,W,ve){var Me=oe(W);if(typeof Me!="function")throw Error(r(150));if(W=Me.call(W),W==null)throw Error(r(151));for(var Le=Me=null,$e=F,Ue=F=0,Tt=null,Ye=W.next();$e!==null&&!Ye.done;Ue++,Ye=W.next()){$e.index>Ue?(Tt=$e,$e=null):Tt=$e.sibling;var Un=de(q,$e,Ye.value,ve);if(Un===null){$e===null&&($e=Tt);break}n&&$e&&Un.alternate===null&&i(q,$e),F=x(Un,F,Ue),Le===null?Me=Un:Le.sibling=Un,Le=Un,$e=Tt}if(Ye.done)return c(q,$e),ut&&ls(q,Ue),Me;if($e===null){for(;!Ye.done;Ue++,Ye=W.next())Ye=ge(q,Ye.value,ve),Ye!==null&&(F=x(Ye,F,Ue),Le===null?Me=Ye:Le.sibling=Ye,Le=Ye);return ut&&ls(q,Ue),Me}for($e=f(q,$e);!Ye.done;Ue++,Ye=W.next())Ye=ke($e,q,Ue,Ye.value,ve),Ye!==null&&(n&&Ye.alternate!==null&&$e.delete(Ye.key===null?Ue:Ye.key),F=x(Ye,F,Ue),Le===null?Me=Ye:Le.sibling=Ye,Le=Ye);return n&&$e.forEach(function(T_){return i(q,T_)}),ut&&ls(q,Ue),Me}function vt(q,F,W,ve){if(typeof W=="object"&&W!==null&&W.type===L&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case D:e:{for(var Me=W.key,Le=F;Le!==null;){if(Le.key===Me){if(Me=W.type,Me===L){if(Le.tag===7){c(q,Le.sibling),F=y(Le,W.props.children),F.return=q,q=F;break e}}else if(Le.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===G&&Zm(Me)===Le.type){c(q,Le.sibling),F=y(Le,W.props),F.ref=ho(q,Le,W),F.return=q,q=F;break e}c(q,Le);break}else i(q,Le);Le=Le.sibling}W.type===L?(F=gs(W.props.children,q.mode,ve,W.key),F.return=q,q=F):(ve=_l(W.type,W.key,W.props,null,q.mode,ve),ve.ref=ho(q,F,W),ve.return=q,q=ve)}return S(q);case M:e:{for(Le=W.key;F!==null;){if(F.key===Le)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){c(q,F.sibling),F=y(F,W.children||[]),F.return=q,q=F;break e}else{c(q,F);break}else i(q,F);F=F.sibling}F=md(W,q.mode,ve),F.return=q,q=F}return S(q);case G:return Le=W._init,vt(q,F,Le(W._payload),ve)}if(Z(W))return Te(q,F,W,ve);if(oe(W))return Re(q,F,W,ve);Za(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,F!==null&&F.tag===6?(c(q,F.sibling),F=y(F,W),F.return=q,q=F):(c(q,F),F=hd(W,q.mode,ve),F.return=q,q=F),S(q)):c(q,F)}return vt}var ni=ep(!0),tp=ep(!1),el=Pn(null),tl=null,si=null,_u=null;function Cu(){_u=si=tl=null}function Su(n){var i=el.current;at(el),n._currentValue=i}function Nu(n,i,c){for(;n!==null;){var f=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),n===c)break;n=n.return}}function ii(n,i){tl=n,_u=si=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Yt=!0),n.firstContext=null)}function hr(n){var i=n._currentValue;if(_u!==n)if(n={context:n,memoizedValue:i,next:null},si===null){if(tl===null)throw Error(r(308));si=n,tl.dependencies={lanes:0,firstContext:n}}else si=si.next=n;return i}var cs=null;function ku(n){cs===null?cs=[n]:cs.push(n)}function rp(n,i,c,f){var y=i.interleaved;return y===null?(c.next=c,ku(i)):(c.next=y.next,y.next=c),i.interleaved=c,an(n,f)}function an(n,i){n.lanes|=i;var c=n.alternate;for(c!==null&&(c.lanes|=i),c=n,n=n.return;n!==null;)n.childLanes|=i,c=n.alternate,c!==null&&(c.childLanes|=i),c=n,n=n.return;return c.tag===3?c.stateNode:null}var Rn=!1;function Eu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function np(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ln(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function On(n,i,c){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(Qe&2)!==0){var y=f.pending;return y===null?i.next=i:(i.next=y.next,y.next=i),f.pending=i,an(n,c)}return y=f.interleaved,y===null?(i.next=i,ku(f)):(i.next=y.next,y.next=i),f.interleaved=i,an(n,c)}function rl(n,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var f=i.lanes;f&=n.pendingLanes,c|=f,i.lanes=c,Vc(n,c)}}function sp(n,i){var c=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var y=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var S={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};x===null?y=x=S:x=x.next=S,c=c.next}while(c!==null);x===null?y=x=i:x=x.next=i}else y=x=i;c={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:f.shared,effects:f.effects},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=i:n.next=i,c.lastBaseUpdate=i}function nl(n,i,c,f){var y=n.updateQueue;Rn=!1;var x=y.firstBaseUpdate,S=y.lastBaseUpdate,O=y.shared.pending;if(O!==null){y.shared.pending=null;var $=O,J=$.next;$.next=null,S===null?x=J:S.next=J,S=$;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,O=fe.lastBaseUpdate,O!==S&&(O===null?fe.firstBaseUpdate=J:O.next=J,fe.lastBaseUpdate=$))}if(x!==null){var ge=y.baseState;S=0,fe=J=$=null,O=x;do{var de=O.lane,ke=O.eventTime;if((f&de)===de){fe!==null&&(fe=fe.next={eventTime:ke,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Te=n,Re=O;switch(de=i,ke=c,Re.tag){case 1:if(Te=Re.payload,typeof Te=="function"){ge=Te.call(ke,ge,de);break e}ge=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Re.payload,de=typeof Te=="function"?Te.call(ke,ge,de):Te,de==null)break e;ge=ie({},ge,de);break e;case 2:Rn=!0}}O.callback!==null&&O.lane!==0&&(n.flags|=64,de=y.effects,de===null?y.effects=[O]:de.push(O))}else ke={eventTime:ke,lane:de,tag:O.tag,payload:O.payload,callback:O.callback,next:null},fe===null?(J=fe=ke,$=ge):fe=fe.next=ke,S|=de;if(O=O.next,O===null){if(O=y.shared.pending,O===null)break;de=O,O=de.next,de.next=null,y.lastBaseUpdate=de,y.shared.pending=null}}while(!0);if(fe===null&&($=ge),y.baseState=$,y.firstBaseUpdate=J,y.lastBaseUpdate=fe,i=y.shared.interleaved,i!==null){y=i;do S|=y.lane,y=y.next;while(y!==i)}else x===null&&(y.shared.lanes=0);fs|=S,n.lanes=S,n.memoizedState=ge}}function ip(n,i,c){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var f=n[i],y=f.callback;if(y!==null){if(f.callback=null,f=c,typeof y!="function")throw Error(r(191,y));y.call(f)}}}var mo={},Vr=Pn(mo),po=Pn(mo),go=Pn(mo);function us(n){if(n===mo)throw Error(r(174));return n}function Pu(n,i){switch(nt(go,i),nt(po,n),nt(Vr,mo),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:tt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=tt(i,n)}at(Vr),nt(Vr,i)}function oi(){at(Vr),at(po),at(go)}function op(n){us(go.current);var i=us(Vr.current),c=tt(i,n.type);i!==c&&(nt(po,n),nt(Vr,c))}function Tu(n){po.current===n&&(at(Vr),at(po))}var ft=Pn(0);function sl(n){for(var i=n;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Au=[];function Ru(){for(var n=0;n<Au.length;n++)Au[n]._workInProgressVersionPrimary=null;Au.length=0}var il=P.ReactCurrentDispatcher,Ou=P.ReactCurrentBatchConfig,ds=0,ht=null,Ct=null,Et=null,ol=!1,yo=!1,vo=0,Xj=0;function Lt(){throw Error(r(321))}function Mu(n,i){if(i===null)return!1;for(var c=0;c<i.length&&c<n.length;c++)if(!Nr(n[c],i[c]))return!1;return!0}function Du(n,i,c,f,y,x){if(ds=x,ht=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,il.current=n===null||n.memoizedState===null?r_:n_,n=c(f,y),yo){x=0;do{if(yo=!1,vo=0,25<=x)throw Error(r(301));x+=1,Et=Ct=null,i.updateQueue=null,il.current=s_,n=c(f,y)}while(yo)}if(il.current=cl,i=Ct!==null&&Ct.next!==null,ds=0,Et=Ct=ht=null,ol=!1,i)throw Error(r(300));return n}function Iu(){var n=vo!==0;return vo=0,n}function zr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?ht.memoizedState=Et=n:Et=Et.next=n,Et}function mr(){if(Ct===null){var n=ht.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var i=Et===null?ht.memoizedState:Et.next;if(i!==null)Et=i,Ct=n;else{if(n===null)throw Error(r(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Et===null?ht.memoizedState=Et=n:Et=Et.next=n}return Et}function xo(n,i){return typeof i=="function"?i(n):i}function Lu(n){var i=mr(),c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=n;var f=Ct,y=f.baseQueue,x=c.pending;if(x!==null){if(y!==null){var S=y.next;y.next=x.next,x.next=S}f.baseQueue=y=x,c.pending=null}if(y!==null){x=y.next,f=f.baseState;var O=S=null,$=null,J=x;do{var fe=J.lane;if((ds&fe)===fe)$!==null&&($=$.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),f=J.hasEagerState?J.eagerState:n(f,J.action);else{var ge={lane:fe,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};$===null?(O=$=ge,S=f):$=$.next=ge,ht.lanes|=fe,fs|=fe}J=J.next}while(J!==null&&J!==x);$===null?S=f:$.next=O,Nr(f,i.memoizedState)||(Yt=!0),i.memoizedState=f,i.baseState=S,i.baseQueue=$,c.lastRenderedState=f}if(n=c.interleaved,n!==null){y=n;do x=y.lane,ht.lanes|=x,fs|=x,y=y.next;while(y!==n)}else y===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function $u(n){var i=mr(),c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=n;var f=c.dispatch,y=c.pending,x=i.memoizedState;if(y!==null){c.pending=null;var S=y=y.next;do x=n(x,S.action),S=S.next;while(S!==y);Nr(x,i.memoizedState)||(Yt=!0),i.memoizedState=x,i.baseQueue===null&&(i.baseState=x),c.lastRenderedState=x}return[x,f]}function ap(){}function lp(n,i){var c=ht,f=mr(),y=i(),x=!Nr(f.memoizedState,y);if(x&&(f.memoizedState=y,Yt=!0),f=f.queue,Fu(dp.bind(null,c,f,n),[n]),f.getSnapshot!==i||x||Et!==null&&Et.memoizedState.tag&1){if(c.flags|=2048,bo(9,up.bind(null,c,f,y,i),void 0,null),Pt===null)throw Error(r(349));(ds&30)!==0||cp(c,i,y)}return y}function cp(n,i,c){n.flags|=16384,n={getSnapshot:i,value:c},i=ht.updateQueue,i===null?(i={lastEffect:null,stores:null},ht.updateQueue=i,i.stores=[n]):(c=i.stores,c===null?i.stores=[n]:c.push(n))}function up(n,i,c,f){i.value=c,i.getSnapshot=f,fp(i)&&hp(n)}function dp(n,i,c){return c(function(){fp(i)&&hp(n)})}function fp(n){var i=n.getSnapshot;n=n.value;try{var c=i();return!Nr(n,c)}catch{return!0}}function hp(n){var i=an(n,1);i!==null&&Ar(i,n,1,-1)}function mp(n){var i=zr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:n},i.queue=n,n=n.dispatch=t_.bind(null,ht,n),[i.memoizedState,n]}function bo(n,i,c,f){return n={tag:n,create:i,destroy:c,deps:f,next:null},i=ht.updateQueue,i===null?(i={lastEffect:null,stores:null},ht.updateQueue=i,i.lastEffect=n.next=n):(c=i.lastEffect,c===null?i.lastEffect=n.next=n:(f=c.next,c.next=n,n.next=f,i.lastEffect=n)),n}function pp(){return mr().memoizedState}function al(n,i,c,f){var y=zr();ht.flags|=n,y.memoizedState=bo(1|i,c,void 0,f===void 0?null:f)}function ll(n,i,c,f){var y=mr();f=f===void 0?null:f;var x=void 0;if(Ct!==null){var S=Ct.memoizedState;if(x=S.destroy,f!==null&&Mu(f,S.deps)){y.memoizedState=bo(i,c,x,f);return}}ht.flags|=n,y.memoizedState=bo(1|i,c,x,f)}function gp(n,i){return al(8390656,8,n,i)}function Fu(n,i){return ll(2048,8,n,i)}function yp(n,i){return ll(4,2,n,i)}function vp(n,i){return ll(4,4,n,i)}function xp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function bp(n,i,c){return c=c!=null?c.concat([n]):null,ll(4,4,xp.bind(null,i,n),c)}function Uu(){}function wp(n,i){var c=mr();i=i===void 0?null:i;var f=c.memoizedState;return f!==null&&i!==null&&Mu(i,f[1])?f[0]:(c.memoizedState=[n,i],n)}function jp(n,i){var c=mr();i=i===void 0?null:i;var f=c.memoizedState;return f!==null&&i!==null&&Mu(i,f[1])?f[0]:(n=n(),c.memoizedState=[n,i],n)}function _p(n,i,c){return(ds&21)===0?(n.baseState&&(n.baseState=!1,Yt=!0),n.memoizedState=c):(Nr(c,i)||(c=Zh(),ht.lanes|=c,fs|=c,n.baseState=!0),i)}function Zj(n,i){var c=Je;Je=c!==0&&4>c?c:4,n(!0);var f=Ou.transition;Ou.transition={};try{n(!1),i()}finally{Je=c,Ou.transition=f}}function Cp(){return mr().memoizedState}function e_(n,i,c){var f=Ln(n);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Sp(n))Np(i,c);else if(c=rp(n,i,c,f),c!==null){var y=Vt();Ar(c,n,f,y),kp(c,i,f)}}function t_(n,i,c){var f=Ln(n),y={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Sp(n))Np(i,y);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=i.lastRenderedReducer,x!==null))try{var S=i.lastRenderedState,O=x(S,c);if(y.hasEagerState=!0,y.eagerState=O,Nr(O,S)){var $=i.interleaved;$===null?(y.next=y,ku(i)):(y.next=$.next,$.next=y),i.interleaved=y;return}}catch{}finally{}c=rp(n,i,y,f),c!==null&&(y=Vt(),Ar(c,n,f,y),kp(c,i,f))}}function Sp(n){var i=n.alternate;return n===ht||i!==null&&i===ht}function Np(n,i){yo=ol=!0;var c=n.pending;c===null?i.next=i:(i.next=c.next,c.next=i),n.pending=i}function kp(n,i,c){if((c&4194240)!==0){var f=i.lanes;f&=n.pendingLanes,c|=f,i.lanes=c,Vc(n,c)}}var cl={readContext:hr,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},r_={readContext:hr,useCallback:function(n,i){return zr().memoizedState=[n,i===void 0?null:i],n},useContext:hr,useEffect:gp,useImperativeHandle:function(n,i,c){return c=c!=null?c.concat([n]):null,al(4194308,4,xp.bind(null,i,n),c)},useLayoutEffect:function(n,i){return al(4194308,4,n,i)},useInsertionEffect:function(n,i){return al(4,2,n,i)},useMemo:function(n,i){var c=zr();return i=i===void 0?null:i,n=n(),c.memoizedState=[n,i],n},useReducer:function(n,i,c){var f=zr();return i=c!==void 0?c(i):i,f.memoizedState=f.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},f.queue=n,n=n.dispatch=e_.bind(null,ht,n),[f.memoizedState,n]},useRef:function(n){var i=zr();return n={current:n},i.memoizedState=n},useState:mp,useDebugValue:Uu,useDeferredValue:function(n){return zr().memoizedState=n},useTransition:function(){var n=mp(!1),i=n[0];return n=Zj.bind(null,n[1]),zr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,c){var f=ht,y=zr();if(ut){if(c===void 0)throw Error(r(407));c=c()}else{if(c=i(),Pt===null)throw Error(r(349));(ds&30)!==0||cp(f,i,c)}y.memoizedState=c;var x={value:c,getSnapshot:i};return y.queue=x,gp(dp.bind(null,f,x,n),[n]),f.flags|=2048,bo(9,up.bind(null,f,x,c,i),void 0,null),c},useId:function(){var n=zr(),i=Pt.identifierPrefix;if(ut){var c=on,f=sn;c=(f&~(1<<32-Sr(f)-1)).toString(32)+c,i=":"+i+"R"+c,c=vo++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=Xj++,i=":"+i+"r"+c.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},n_={readContext:hr,useCallback:wp,useContext:hr,useEffect:Fu,useImperativeHandle:bp,useInsertionEffect:yp,useLayoutEffect:vp,useMemo:jp,useReducer:Lu,useRef:pp,useState:function(){return Lu(xo)},useDebugValue:Uu,useDeferredValue:function(n){var i=mr();return _p(i,Ct.memoizedState,n)},useTransition:function(){var n=Lu(xo)[0],i=mr().memoizedState;return[n,i]},useMutableSource:ap,useSyncExternalStore:lp,useId:Cp,unstable_isNewReconciler:!1},s_={readContext:hr,useCallback:wp,useContext:hr,useEffect:Fu,useImperativeHandle:bp,useInsertionEffect:yp,useLayoutEffect:vp,useMemo:jp,useReducer:$u,useRef:pp,useState:function(){return $u(xo)},useDebugValue:Uu,useDeferredValue:function(n){var i=mr();return Ct===null?i.memoizedState=n:_p(i,Ct.memoizedState,n)},useTransition:function(){var n=$u(xo)[0],i=mr().memoizedState;return[n,i]},useMutableSource:ap,useSyncExternalStore:lp,useId:Cp,unstable_isNewReconciler:!1};function Er(n,i){if(n&&n.defaultProps){i=ie({},i),n=n.defaultProps;for(var c in n)i[c]===void 0&&(i[c]=n[c]);return i}return i}function Bu(n,i,c,f){i=n.memoizedState,c=c(f,i),c=c==null?i:ie({},i,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var ul={isMounted:function(n){return(n=n._reactInternals)?Ze(n)===n:!1},enqueueSetState:function(n,i,c){n=n._reactInternals;var f=Vt(),y=Ln(n),x=ln(f,y);x.payload=i,c!=null&&(x.callback=c),i=On(n,x,y),i!==null&&(Ar(i,n,y,f),rl(i,n,y))},enqueueReplaceState:function(n,i,c){n=n._reactInternals;var f=Vt(),y=Ln(n),x=ln(f,y);x.tag=1,x.payload=i,c!=null&&(x.callback=c),i=On(n,x,y),i!==null&&(Ar(i,n,y,f),rl(i,n,y))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var c=Vt(),f=Ln(n),y=ln(c,f);y.tag=2,i!=null&&(y.callback=i),i=On(n,y,f),i!==null&&(Ar(i,n,f,c),rl(i,n,f))}};function Ep(n,i,c,f,y,x,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,x,S):i.prototype&&i.prototype.isPureReactComponent?!io(c,f)||!io(y,x):!0}function Pp(n,i,c){var f=!1,y=Tn,x=i.contextType;return typeof x=="object"&&x!==null?x=hr(x):(y=Qt(i)?os:It.current,f=i.contextTypes,x=(f=f!=null)?Zs(n,y):Tn),i=new i(c,x),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ul,n.stateNode=i,i._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=y,n.__reactInternalMemoizedMaskedChildContext=x),i}function Tp(n,i,c,f){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,f),i.state!==n&&ul.enqueueReplaceState(i,i.state,null)}function Vu(n,i,c,f){var y=n.stateNode;y.props=c,y.state=n.memoizedState,y.refs={},Eu(n);var x=i.contextType;typeof x=="object"&&x!==null?y.context=hr(x):(x=Qt(i)?os:It.current,y.context=Zs(n,x)),y.state=n.memoizedState,x=i.getDerivedStateFromProps,typeof x=="function"&&(Bu(n,i,x,c),y.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(i=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),i!==y.state&&ul.enqueueReplaceState(y,y.state,null),nl(n,c,y,f),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308)}function ai(n,i){try{var c="",f=i;do c+=be(f),f=f.return;while(f);var y=c}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:n,source:i,stack:y,digest:null}}function zu(n,i,c){return{value:n,source:null,stack:c??null,digest:i??null}}function qu(n,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var i_=typeof WeakMap=="function"?WeakMap:Map;function Ap(n,i,c){c=ln(-1,c),c.tag=3,c.payload={element:null};var f=i.value;return c.callback=function(){yl||(yl=!0,id=f),qu(n,i)},c}function Rp(n,i,c){c=ln(-1,c),c.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var y=i.value;c.payload=function(){return f(y)},c.callback=function(){qu(n,i)}}var x=n.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(c.callback=function(){qu(n,i),typeof f!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})}),c}function Op(n,i,c){var f=n.pingCache;if(f===null){f=n.pingCache=new i_;var y=new Set;f.set(i,y)}else y=f.get(i),y===void 0&&(y=new Set,f.set(i,y));y.has(c)||(y.add(c),n=x_.bind(null,n,i,c),i.then(n,n))}function Mp(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Dp(n,i,c,f,y){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=ln(-1,1),i.tag=2,On(c,i,1))),c.lanes|=1),n):(n.flags|=65536,n.lanes=y,n)}var o_=P.ReactCurrentOwner,Yt=!1;function Bt(n,i,c,f){i.child=n===null?tp(i,null,c,f):ni(i,n.child,c,f)}function Ip(n,i,c,f,y){c=c.render;var x=i.ref;return ii(i,y),f=Du(n,i,c,f,x,y),c=Iu(),n!==null&&!Yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~y,cn(n,i,y)):(ut&&c&&vu(i),i.flags|=1,Bt(n,i,f,y),i.child)}function Lp(n,i,c,f,y){if(n===null){var x=c.type;return typeof x=="function"&&!fd(x)&&x.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=x,$p(n,i,x,f,y)):(n=_l(c.type,null,f,i,i.mode,y),n.ref=i.ref,n.return=i,i.child=n)}if(x=n.child,(n.lanes&y)===0){var S=x.memoizedProps;if(c=c.compare,c=c!==null?c:io,c(S,f)&&n.ref===i.ref)return cn(n,i,y)}return i.flags|=1,n=Fn(x,f),n.ref=i.ref,n.return=i,i.child=n}function $p(n,i,c,f,y){if(n!==null){var x=n.memoizedProps;if(io(x,f)&&n.ref===i.ref)if(Yt=!1,i.pendingProps=f=x,(n.lanes&y)!==0)(n.flags&131072)!==0&&(Yt=!0);else return i.lanes=n.lanes,cn(n,i,y)}return Wu(n,i,c,f,y)}function Fp(n,i,c){var f=i.pendingProps,y=f.children,x=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(ci,ar),ar|=c;else{if((c&1073741824)===0)return n=x!==null?x.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,nt(ci,ar),ar|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=x!==null?x.baseLanes:c,nt(ci,ar),ar|=f}else x!==null?(f=x.baseLanes|c,i.memoizedState=null):f=c,nt(ci,ar),ar|=f;return Bt(n,i,y,c),i.child}function Up(n,i){var c=i.ref;(n===null&&c!==null||n!==null&&n.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function Wu(n,i,c,f,y){var x=Qt(c)?os:It.current;return x=Zs(i,x),ii(i,y),c=Du(n,i,c,f,x,y),f=Iu(),n!==null&&!Yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~y,cn(n,i,y)):(ut&&f&&vu(i),i.flags|=1,Bt(n,i,c,y),i.child)}function Bp(n,i,c,f,y){if(Qt(c)){var x=!0;Ka(i)}else x=!1;if(ii(i,y),i.stateNode===null)fl(n,i),Pp(i,c,f),Vu(i,c,f,y),f=!0;else if(n===null){var S=i.stateNode,O=i.memoizedProps;S.props=O;var $=S.context,J=c.contextType;typeof J=="object"&&J!==null?J=hr(J):(J=Qt(c)?os:It.current,J=Zs(i,J));var fe=c.getDerivedStateFromProps,ge=typeof fe=="function"||typeof S.getSnapshotBeforeUpdate=="function";ge||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==f||$!==J)&&Tp(i,S,f,J),Rn=!1;var de=i.memoizedState;S.state=de,nl(i,f,S,y),$=i.memoizedState,O!==f||de!==$||Kt.current||Rn?(typeof fe=="function"&&(Bu(i,c,fe,f),$=i.memoizedState),(O=Rn||Ep(i,c,O,f,de,$,J))?(ge||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=$),S.props=f,S.state=$,S.context=J,f=O):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{S=i.stateNode,np(n,i),O=i.memoizedProps,J=i.type===i.elementType?O:Er(i.type,O),S.props=J,ge=i.pendingProps,de=S.context,$=c.contextType,typeof $=="object"&&$!==null?$=hr($):($=Qt(c)?os:It.current,$=Zs(i,$));var ke=c.getDerivedStateFromProps;(fe=typeof ke=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==ge||de!==$)&&Tp(i,S,f,$),Rn=!1,de=i.memoizedState,S.state=de,nl(i,f,S,y);var Te=i.memoizedState;O!==ge||de!==Te||Kt.current||Rn?(typeof ke=="function"&&(Bu(i,c,ke,f),Te=i.memoizedState),(J=Rn||Ep(i,c,J,f,de,Te,$)||!1)?(fe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Te,$),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Te,$)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||O===n.memoizedProps&&de===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&de===n.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=Te),S.props=f,S.state=Te,S.context=$,f=J):(typeof S.componentDidUpdate!="function"||O===n.memoizedProps&&de===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&de===n.memoizedState||(i.flags|=1024),f=!1)}return Hu(n,i,c,f,x,y)}function Hu(n,i,c,f,y,x){Up(n,i);var S=(i.flags&128)!==0;if(!f&&!S)return y&&Hm(i,c,!1),cn(n,i,x);f=i.stateNode,o_.current=i;var O=S&&typeof c.getDerivedStateFromError!="function"?null:f.render();return i.flags|=1,n!==null&&S?(i.child=ni(i,n.child,null,x),i.child=ni(i,null,O,x)):Bt(n,i,O,x),i.memoizedState=f.state,y&&Hm(i,c,!0),i.child}function Vp(n){var i=n.stateNode;i.pendingContext?qm(n,i.pendingContext,i.pendingContext!==i.context):i.context&&qm(n,i.context,!1),Pu(n,i.containerInfo)}function zp(n,i,c,f,y){return ri(),ju(y),i.flags|=256,Bt(n,i,c,f),i.child}var Gu={dehydrated:null,treeContext:null,retryLane:0};function Ku(n){return{baseLanes:n,cachePool:null,transitions:null}}function qp(n,i,c){var f=i.pendingProps,y=ft.current,x=!1,S=(i.flags&128)!==0,O;if((O=S)||(O=n!==null&&n.memoizedState===null?!1:(y&2)!==0),O?(x=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(y|=1),nt(ft,y&1),n===null)return wu(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(S=f.children,n=f.fallback,x?(f=i.mode,x=i.child,S={mode:"hidden",children:S},(f&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=S):x=Cl(S,f,0,null),n=gs(n,f,c,null),x.return=i,n.return=i,x.sibling=n,i.child=x,i.child.memoizedState=Ku(c),i.memoizedState=Gu,n):Qu(i,S));if(y=n.memoizedState,y!==null&&(O=y.dehydrated,O!==null))return a_(n,i,S,f,O,y,c);if(x){x=f.fallback,S=i.mode,y=n.child,O=y.sibling;var $={mode:"hidden",children:f.children};return(S&1)===0&&i.child!==y?(f=i.child,f.childLanes=0,f.pendingProps=$,i.deletions=null):(f=Fn(y,$),f.subtreeFlags=y.subtreeFlags&14680064),O!==null?x=Fn(O,x):(x=gs(x,S,c,null),x.flags|=2),x.return=i,f.return=i,f.sibling=x,i.child=f,f=x,x=i.child,S=n.child.memoizedState,S=S===null?Ku(c):{baseLanes:S.baseLanes|c,cachePool:null,transitions:S.transitions},x.memoizedState=S,x.childLanes=n.childLanes&~c,i.memoizedState=Gu,f}return x=n.child,n=x.sibling,f=Fn(x,{mode:"visible",children:f.children}),(i.mode&1)===0&&(f.lanes=c),f.return=i,f.sibling=null,n!==null&&(c=i.deletions,c===null?(i.deletions=[n],i.flags|=16):c.push(n)),i.child=f,i.memoizedState=null,f}function Qu(n,i){return i=Cl({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function dl(n,i,c,f){return f!==null&&ju(f),ni(i,n.child,null,c),n=Qu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function a_(n,i,c,f,y,x,S){if(c)return i.flags&256?(i.flags&=-257,f=zu(Error(r(422))),dl(n,i,S,f)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(x=f.fallback,y=i.mode,f=Cl({mode:"visible",children:f.children},y,0,null),x=gs(x,y,S,null),x.flags|=2,f.return=i,x.return=i,f.sibling=x,i.child=f,(i.mode&1)!==0&&ni(i,n.child,null,S),i.child.memoizedState=Ku(S),i.memoizedState=Gu,x);if((i.mode&1)===0)return dl(n,i,S,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var O=f.dgst;return f=O,x=Error(r(419)),f=zu(x,f,void 0),dl(n,i,S,f)}if(O=(S&n.childLanes)!==0,Yt||O){if(f=Pt,f!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(f.suspendedLanes|S))!==0?0:y,y!==0&&y!==x.retryLane&&(x.retryLane=y,an(n,y),Ar(f,n,y,-1))}return dd(),f=zu(Error(r(421))),dl(n,i,S,f)}return y.data==="$?"?(i.flags|=128,i.child=n.child,i=b_.bind(null,n),y._reactRetry=i,null):(n=x.treeContext,or=En(y.nextSibling),ir=i,ut=!0,kr=null,n!==null&&(dr[fr++]=sn,dr[fr++]=on,dr[fr++]=as,sn=n.id,on=n.overflow,as=i),i=Qu(i,f.children),i.flags|=4096,i)}function Wp(n,i,c){n.lanes|=i;var f=n.alternate;f!==null&&(f.lanes|=i),Nu(n.return,i,c)}function Yu(n,i,c,f,y){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:y}:(x.isBackwards=i,x.rendering=null,x.renderingStartTime=0,x.last=f,x.tail=c,x.tailMode=y)}function Hp(n,i,c){var f=i.pendingProps,y=f.revealOrder,x=f.tail;if(Bt(n,i,f.children,c),f=ft.current,(f&2)!==0)f=f&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wp(n,c,i);else if(n.tag===19)Wp(n,c,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(nt(ft,f),(i.mode&1)===0)i.memoizedState=null;else switch(y){case"forwards":for(c=i.child,y=null;c!==null;)n=c.alternate,n!==null&&sl(n)===null&&(y=c),c=c.sibling;c=y,c===null?(y=i.child,i.child=null):(y=c.sibling,c.sibling=null),Yu(i,!1,y,c,x);break;case"backwards":for(c=null,y=i.child,i.child=null;y!==null;){if(n=y.alternate,n!==null&&sl(n)===null){i.child=y;break}n=y.sibling,y.sibling=c,c=y,y=n}Yu(i,!0,c,null,x);break;case"together":Yu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function fl(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function cn(n,i,c){if(n!==null&&(i.dependencies=n.dependencies),fs|=i.lanes,(c&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,c=Fn(n,n.pendingProps),i.child=c,c.return=i;n.sibling!==null;)n=n.sibling,c=c.sibling=Fn(n,n.pendingProps),c.return=i;c.sibling=null}return i.child}function l_(n,i,c){switch(i.tag){case 3:Vp(i),ri();break;case 5:op(i);break;case 1:Qt(i.type)&&Ka(i);break;case 4:Pu(i,i.stateNode.containerInfo);break;case 10:var f=i.type._context,y=i.memoizedProps.value;nt(el,f._currentValue),f._currentValue=y;break;case 13:if(f=i.memoizedState,f!==null)return f.dehydrated!==null?(nt(ft,ft.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?qp(n,i,c):(nt(ft,ft.current&1),n=cn(n,i,c),n!==null?n.sibling:null);nt(ft,ft.current&1);break;case 19:if(f=(c&i.childLanes)!==0,(n.flags&128)!==0){if(f)return Hp(n,i,c);i.flags|=128}if(y=i.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),nt(ft,ft.current),f)break;return null;case 22:case 23:return i.lanes=0,Fp(n,i,c)}return cn(n,i,c)}var Gp,Ju,Kp,Qp;Gp=function(n,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)n.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Ju=function(){},Kp=function(n,i,c,f){var y=n.memoizedProps;if(y!==f){n=i.stateNode,us(Vr.current);var x=null;switch(c){case"input":y=T(n,y),f=T(n,f),x=[];break;case"select":y=ie({},y,{value:void 0}),f=ie({},f,{value:void 0}),x=[];break;case"textarea":y=Ie(n,y),f=Ie(n,f),x=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=Wa)}Wi(c,f);var S;c=null;for(J in y)if(!f.hasOwnProperty(J)&&y.hasOwnProperty(J)&&y[J]!=null)if(J==="style"){var O=y[J];for(S in O)O.hasOwnProperty(S)&&(c||(c={}),c[S]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(a.hasOwnProperty(J)?x||(x=[]):(x=x||[]).push(J,null));for(J in f){var $=f[J];if(O=y?.[J],f.hasOwnProperty(J)&&$!==O&&($!=null||O!=null))if(J==="style")if(O){for(S in O)!O.hasOwnProperty(S)||$&&$.hasOwnProperty(S)||(c||(c={}),c[S]="");for(S in $)$.hasOwnProperty(S)&&O[S]!==$[S]&&(c||(c={}),c[S]=$[S])}else c||(x||(x=[]),x.push(J,c)),c=$;else J==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,O=O?O.__html:void 0,$!=null&&O!==$&&(x=x||[]).push(J,$)):J==="children"?typeof $!="string"&&typeof $!="number"||(x=x||[]).push(J,""+$):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(a.hasOwnProperty(J)?($!=null&&J==="onScroll"&&ot("scroll",n),x||O===$||(x=[])):(x=x||[]).push(J,$))}c&&(x=x||[]).push("style",c);var J=x;(i.updateQueue=J)&&(i.flags|=4)}},Qp=function(n,i,c,f){c!==f&&(i.flags|=4)};function wo(n,i){if(!ut)switch(n.tailMode){case"hidden":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function $t(n){var i=n.alternate!==null&&n.alternate.child===n.child,c=0,f=0;if(i)for(var y=n.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=f,n.childLanes=c,i}function c_(n,i,c){var f=i.pendingProps;switch(xu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(i),null;case 1:return Qt(i.type)&&Ga(),$t(i),null;case 3:return f=i.stateNode,oi(),at(Kt),at(It),Ru(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(Xa(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,kr!==null&&(ld(kr),kr=null))),Ju(n,i),$t(i),null;case 5:Tu(i);var y=us(go.current);if(c=i.type,n!==null&&i.stateNode!=null)Kp(n,i,c,f,y),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!f){if(i.stateNode===null)throw Error(r(166));return $t(i),null}if(n=us(Vr.current),Xa(i)){f=i.stateNode,c=i.type;var x=i.memoizedProps;switch(f[Br]=i,f[uo]=x,n=(i.mode&1)!==0,c){case"dialog":ot("cancel",f),ot("close",f);break;case"iframe":case"object":case"embed":ot("load",f);break;case"video":case"audio":for(y=0;y<ao.length;y++)ot(ao[y],f);break;case"source":ot("error",f);break;case"img":case"image":case"link":ot("error",f),ot("load",f);break;case"details":ot("toggle",f);break;case"input":pe(f,x),ot("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!x.multiple},ot("invalid",f);break;case"textarea":Xe(f,x),ot("invalid",f)}Wi(c,x),y=null;for(var S in x)if(x.hasOwnProperty(S)){var O=x[S];S==="children"?typeof O=="string"?f.textContent!==O&&(x.suppressHydrationWarning!==!0&&qa(f.textContent,O,n),y=["children",O]):typeof O=="number"&&f.textContent!==""+O&&(x.suppressHydrationWarning!==!0&&qa(f.textContent,O,n),y=["children",""+O]):a.hasOwnProperty(S)&&O!=null&&S==="onScroll"&&ot("scroll",f)}switch(c){case"input":K(f),se(f,x,!0);break;case"textarea":K(f),dt(f);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(f.onclick=Wa)}f=y,i.updateQueue=f,f!==null&&(i.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Dt(c)),n==="http://www.w3.org/1999/xhtml"?c==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(c,{is:f.is}):(n=S.createElement(c),c==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,c),n[Br]=i,n[uo]=f,Gp(n,i,!1,!1),i.stateNode=n;e:{switch(S=Hi(c,f),c){case"dialog":ot("cancel",n),ot("close",n),y=f;break;case"iframe":case"object":case"embed":ot("load",n),y=f;break;case"video":case"audio":for(y=0;y<ao.length;y++)ot(ao[y],n);y=f;break;case"source":ot("error",n),y=f;break;case"img":case"image":case"link":ot("error",n),ot("load",n),y=f;break;case"details":ot("toggle",n),y=f;break;case"input":pe(n,f),y=T(n,f),ot("invalid",n);break;case"option":y=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},y=ie({},f,{value:void 0}),ot("invalid",n);break;case"textarea":Xe(n,f),y=Ie(n,f),ot("invalid",n);break;default:y=f}Wi(c,y),O=y;for(x in O)if(O.hasOwnProperty(x)){var $=O[x];x==="style"?xa(n,$):x==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&nr(n,$)):x==="children"?typeof $=="string"?(c!=="textarea"||$!=="")&&Fr(n,$):typeof $=="number"&&Fr(n,""+$):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(a.hasOwnProperty(x)?$!=null&&x==="onScroll"&&ot("scroll",n):$!=null&&N(n,x,$,S))}switch(c){case"input":K(n),se(n,f,!1);break;case"textarea":K(n),dt(n);break;case"option":f.value!=null&&n.setAttribute("value",""+Ne(f.value));break;case"select":n.multiple=!!f.multiple,x=f.value,x!=null?je(n,!!f.multiple,x,!1):f.defaultValue!=null&&je(n,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(n.onclick=Wa)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return $t(i),null;case 6:if(n&&i.stateNode!=null)Qp(n,i,n.memoizedProps,f);else{if(typeof f!="string"&&i.stateNode===null)throw Error(r(166));if(c=us(go.current),us(Vr.current),Xa(i)){if(f=i.stateNode,c=i.memoizedProps,f[Br]=i,(x=f.nodeValue!==c)&&(n=ir,n!==null))switch(n.tag){case 3:qa(f.nodeValue,c,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&qa(f.nodeValue,c,(n.mode&1)!==0)}x&&(i.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Br]=i,i.stateNode=f}return $t(i),null;case 13:if(at(ft),f=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ut&&or!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Xm(),ri(),i.flags|=98560,x=!1;else if(x=Xa(i),f!==null&&f.dehydrated!==null){if(n===null){if(!x)throw Error(r(318));if(x=i.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Br]=i}else ri(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),x=!1}else kr!==null&&(ld(kr),kr=null),x=!0;if(!x)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(ft.current&1)!==0?St===0&&(St=3):dd())),i.updateQueue!==null&&(i.flags|=4),$t(i),null);case 4:return oi(),Ju(n,i),n===null&&lo(i.stateNode.containerInfo),$t(i),null;case 10:return Su(i.type._context),$t(i),null;case 17:return Qt(i.type)&&Ga(),$t(i),null;case 19:if(at(ft),x=i.memoizedState,x===null)return $t(i),null;if(f=(i.flags&128)!==0,S=x.rendering,S===null)if(f)wo(x,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(S=sl(n),S!==null){for(i.flags|=128,wo(x,!1),f=S.updateQueue,f!==null&&(i.updateQueue=f,i.flags|=4),i.subtreeFlags=0,f=c,c=i.child;c!==null;)x=c,n=f,x.flags&=14680066,S=x.alternate,S===null?(x.childLanes=0,x.lanes=n,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,n=S.dependencies,x.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),c=c.sibling;return nt(ft,ft.current&1|2),i.child}n=n.sibling}x.tail!==null&&yt()>ui&&(i.flags|=128,f=!0,wo(x,!1),i.lanes=4194304)}else{if(!f)if(n=sl(S),n!==null){if(i.flags|=128,f=!0,c=n.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),wo(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!ut)return $t(i),null}else 2*yt()-x.renderingStartTime>ui&&c!==1073741824&&(i.flags|=128,f=!0,wo(x,!1),i.lanes=4194304);x.isBackwards?(S.sibling=i.child,i.child=S):(c=x.last,c!==null?c.sibling=S:i.child=S,x.last=S)}return x.tail!==null?(i=x.tail,x.rendering=i,x.tail=i.sibling,x.renderingStartTime=yt(),i.sibling=null,c=ft.current,nt(ft,f?c&1|2:c&1),i):($t(i),null);case 22:case 23:return ud(),f=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(i.flags|=8192),f&&(i.mode&1)!==0?(ar&1073741824)!==0&&($t(i),i.subtreeFlags&6&&(i.flags|=8192)):$t(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function u_(n,i){switch(xu(i),i.tag){case 1:return Qt(i.type)&&Ga(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return oi(),at(Kt),at(It),Ru(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Tu(i),null;case 13:if(at(ft),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));ri()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return at(ft),null;case 4:return oi(),null;case 10:return Su(i.type._context),null;case 22:case 23:return ud(),null;case 24:return null;default:return null}}var hl=!1,Ft=!1,d_=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function li(n,i){var c=n.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){gt(n,i,f)}else c.current=null}function Xu(n,i,c){try{c()}catch(f){gt(n,i,f)}}var Yp=!1;function f_(n,i){if(uu=Oa,n=Em(),ru(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var y=f.anchorOffset,x=f.focusNode;f=f.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var S=0,O=-1,$=-1,J=0,fe=0,ge=n,de=null;t:for(;;){for(var ke;ge!==c||y!==0&&ge.nodeType!==3||(O=S+y),ge!==x||f!==0&&ge.nodeType!==3||($=S+f),ge.nodeType===3&&(S+=ge.nodeValue.length),(ke=ge.firstChild)!==null;)de=ge,ge=ke;for(;;){if(ge===n)break t;if(de===c&&++J===y&&(O=S),de===x&&++fe===f&&($=S),(ke=ge.nextSibling)!==null)break;ge=de,de=ge.parentNode}ge=ke}c=O===-1||$===-1?null:{start:O,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(du={focusedElem:n,selectionRange:c},Oa=!1,Ee=i;Ee!==null;)if(i=Ee,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ee=n;else for(;Ee!==null;){i=Ee;try{var Te=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Re=Te.memoizedProps,vt=Te.memoizedState,q=i.stateNode,F=q.getSnapshotBeforeUpdate(i.elementType===i.type?Re:Er(i.type,Re),vt);q.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var W=i.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ve){gt(i,i.return,ve)}if(n=i.sibling,n!==null){n.return=i.return,Ee=n;break}Ee=i.return}return Te=Yp,Yp=!1,Te}function jo(n,i,c){var f=i.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&n)===n){var x=y.destroy;y.destroy=void 0,x!==void 0&&Xu(i,c,x)}y=y.next}while(y!==f)}}function ml(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&n)===n){var f=c.create;c.destroy=f()}c=c.next}while(c!==i)}}function Zu(n){var i=n.ref;if(i!==null){var c=n.stateNode;switch(n.tag){case 5:n=c;break;default:n=c}typeof i=="function"?i(n):i.current=n}}function Jp(n){var i=n.alternate;i!==null&&(n.alternate=null,Jp(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Br],delete i[uo],delete i[pu],delete i[Kj],delete i[Qj])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Xp(n){return n.tag===5||n.tag===3||n.tag===4}function Zp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Xp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ed(n,i,c){var f=n.tag;if(f===5||f===6)n=n.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(n,i):c.insertBefore(n,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(n,c)):(i=c,i.appendChild(n)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Wa));else if(f!==4&&(n=n.child,n!==null))for(ed(n,i,c),n=n.sibling;n!==null;)ed(n,i,c),n=n.sibling}function td(n,i,c){var f=n.tag;if(f===5||f===6)n=n.stateNode,i?c.insertBefore(n,i):c.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(td(n,i,c),n=n.sibling;n!==null;)td(n,i,c),n=n.sibling}var Rt=null,Pr=!1;function Mn(n,i,c){for(c=c.child;c!==null;)eg(n,i,c),c=c.sibling}function eg(n,i,c){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(ka,c)}catch{}switch(c.tag){case 5:Ft||li(c,i);case 6:var f=Rt,y=Pr;Rt=null,Mn(n,i,c),Rt=f,Pr=y,Rt!==null&&(Pr?(n=Rt,c=c.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)):Rt.removeChild(c.stateNode));break;case 18:Rt!==null&&(Pr?(n=Rt,c=c.stateNode,n.nodeType===8?mu(n.parentNode,c):n.nodeType===1&&mu(n,c),Zi(n)):mu(Rt,c.stateNode));break;case 4:f=Rt,y=Pr,Rt=c.stateNode.containerInfo,Pr=!0,Mn(n,i,c),Rt=f,Pr=y;break;case 0:case 11:case 14:case 15:if(!Ft&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var x=y,S=x.destroy;x=x.tag,S!==void 0&&((x&2)!==0||(x&4)!==0)&&Xu(c,i,S),y=y.next}while(y!==f)}Mn(n,i,c);break;case 1:if(!Ft&&(li(c,i),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(O){gt(c,i,O)}Mn(n,i,c);break;case 21:Mn(n,i,c);break;case 22:c.mode&1?(Ft=(f=Ft)||c.memoizedState!==null,Mn(n,i,c),Ft=f):Mn(n,i,c);break;default:Mn(n,i,c)}}function tg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var c=n.stateNode;c===null&&(c=n.stateNode=new d_),i.forEach(function(f){var y=w_.bind(null,n,f);c.has(f)||(c.add(f),f.then(y,y))})}}function Tr(n,i){var c=i.deletions;if(c!==null)for(var f=0;f<c.length;f++){var y=c[f];try{var x=n,S=i,O=S;e:for(;O!==null;){switch(O.tag){case 5:Rt=O.stateNode,Pr=!1;break e;case 3:Rt=O.stateNode.containerInfo,Pr=!0;break e;case 4:Rt=O.stateNode.containerInfo,Pr=!0;break e}O=O.return}if(Rt===null)throw Error(r(160));eg(x,S,y),Rt=null,Pr=!1;var $=y.alternate;$!==null&&($.return=null),y.return=null}catch(J){gt(y,i,J)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)rg(i,n),i=i.sibling}function rg(n,i){var c=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Tr(i,n),qr(n),f&4){try{jo(3,n,n.return),ml(3,n)}catch(Re){gt(n,n.return,Re)}try{jo(5,n,n.return)}catch(Re){gt(n,n.return,Re)}}break;case 1:Tr(i,n),qr(n),f&512&&c!==null&&li(c,c.return);break;case 5:if(Tr(i,n),qr(n),f&512&&c!==null&&li(c,c.return),n.flags&32){var y=n.stateNode;try{Fr(y,"")}catch(Re){gt(n,n.return,Re)}}if(f&4&&(y=n.stateNode,y!=null)){var x=n.memoizedProps,S=c!==null?c.memoizedProps:x,O=n.type,$=n.updateQueue;if(n.updateQueue=null,$!==null)try{O==="input"&&x.type==="radio"&&x.name!=null&&te(y,x),Hi(O,S);var J=Hi(O,x);for(S=0;S<$.length;S+=2){var fe=$[S],ge=$[S+1];fe==="style"?xa(y,ge):fe==="dangerouslySetInnerHTML"?nr(y,ge):fe==="children"?Fr(y,ge):N(y,fe,ge,J)}switch(O){case"input":U(y,x);break;case"textarea":bt(y,x);break;case"select":var de=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var ke=x.value;ke!=null?je(y,!!x.multiple,ke,!1):de!==!!x.multiple&&(x.defaultValue!=null?je(y,!!x.multiple,x.defaultValue,!0):je(y,!!x.multiple,x.multiple?[]:"",!1))}y[uo]=x}catch(Re){gt(n,n.return,Re)}}break;case 6:if(Tr(i,n),qr(n),f&4){if(n.stateNode===null)throw Error(r(162));y=n.stateNode,x=n.memoizedProps;try{y.nodeValue=x}catch(Re){gt(n,n.return,Re)}}break;case 3:if(Tr(i,n),qr(n),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Zi(i.containerInfo)}catch(Re){gt(n,n.return,Re)}break;case 4:Tr(i,n),qr(n);break;case 13:Tr(i,n),qr(n),y=n.child,y.flags&8192&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(sd=yt())),f&4&&tg(n);break;case 22:if(fe=c!==null&&c.memoizedState!==null,n.mode&1?(Ft=(J=Ft)||fe,Tr(i,n),Ft=J):Tr(i,n),qr(n),f&8192){if(J=n.memoizedState!==null,(n.stateNode.isHidden=J)&&!fe&&(n.mode&1)!==0)for(Ee=n,fe=n.child;fe!==null;){for(ge=Ee=fe;Ee!==null;){switch(de=Ee,ke=de.child,de.tag){case 0:case 11:case 14:case 15:jo(4,de,de.return);break;case 1:li(de,de.return);var Te=de.stateNode;if(typeof Te.componentWillUnmount=="function"){f=de,c=de.return;try{i=f,Te.props=i.memoizedProps,Te.state=i.memoizedState,Te.componentWillUnmount()}catch(Re){gt(f,c,Re)}}break;case 5:li(de,de.return);break;case 22:if(de.memoizedState!==null){ig(ge);continue}}ke!==null?(ke.return=de,Ee=ke):ig(ge)}fe=fe.sibling}e:for(fe=null,ge=n;;){if(ge.tag===5){if(fe===null){fe=ge;try{y=ge.stateNode,J?(x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(O=ge.stateNode,$=ge.memoizedProps.style,S=$!=null&&$.hasOwnProperty("display")?$.display:null,O.style.display=va("display",S))}catch(Re){gt(n,n.return,Re)}}}else if(ge.tag===6){if(fe===null)try{ge.stateNode.nodeValue=J?"":ge.memoizedProps}catch(Re){gt(n,n.return,Re)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===n)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===n)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===n)break e;fe===ge&&(fe=null),ge=ge.return}fe===ge&&(fe=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:Tr(i,n),qr(n),f&4&&tg(n);break;case 21:break;default:Tr(i,n),qr(n)}}function qr(n){var i=n.flags;if(i&2){try{e:{for(var c=n.return;c!==null;){if(Xp(c)){var f=c;break e}c=c.return}throw Error(r(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(Fr(y,""),f.flags&=-33);var x=Zp(n);td(n,x,y);break;case 3:case 4:var S=f.stateNode.containerInfo,O=Zp(n);ed(n,O,S);break;default:throw Error(r(161))}}catch($){gt(n,n.return,$)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function h_(n,i,c){Ee=n,ng(n)}function ng(n,i,c){for(var f=(n.mode&1)!==0;Ee!==null;){var y=Ee,x=y.child;if(y.tag===22&&f){var S=y.memoizedState!==null||hl;if(!S){var O=y.alternate,$=O!==null&&O.memoizedState!==null||Ft;O=hl;var J=Ft;if(hl=S,(Ft=$)&&!J)for(Ee=y;Ee!==null;)S=Ee,$=S.child,S.tag===22&&S.memoizedState!==null?og(y):$!==null?($.return=S,Ee=$):og(y);for(;x!==null;)Ee=x,ng(x),x=x.sibling;Ee=y,hl=O,Ft=J}sg(n)}else(y.subtreeFlags&8772)!==0&&x!==null?(x.return=y,Ee=x):sg(n)}}function sg(n){for(;Ee!==null;){var i=Ee;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ft||ml(5,i);break;case 1:var f=i.stateNode;if(i.flags&4&&!Ft)if(c===null)f.componentDidMount();else{var y=i.elementType===i.type?c.memoizedProps:Er(i.type,c.memoizedProps);f.componentDidUpdate(y,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var x=i.updateQueue;x!==null&&ip(i,x,f);break;case 3:var S=i.updateQueue;if(S!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}ip(i,S,c)}break;case 5:var O=i.stateNode;if(c===null&&i.flags&4){c=O;var $=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&c.focus();break;case"img":$.src&&(c.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var J=i.alternate;if(J!==null){var fe=J.memoizedState;if(fe!==null){var ge=fe.dehydrated;ge!==null&&Zi(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ft||i.flags&512&&Zu(i)}catch(de){gt(i,i.return,de)}}if(i===n){Ee=null;break}if(c=i.sibling,c!==null){c.return=i.return,Ee=c;break}Ee=i.return}}function ig(n){for(;Ee!==null;){var i=Ee;if(i===n){Ee=null;break}var c=i.sibling;if(c!==null){c.return=i.return,Ee=c;break}Ee=i.return}}function og(n){for(;Ee!==null;){var i=Ee;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{ml(4,i)}catch($){gt(i,c,$)}break;case 1:var f=i.stateNode;if(typeof f.componentDidMount=="function"){var y=i.return;try{f.componentDidMount()}catch($){gt(i,y,$)}}var x=i.return;try{Zu(i)}catch($){gt(i,x,$)}break;case 5:var S=i.return;try{Zu(i)}catch($){gt(i,S,$)}}}catch($){gt(i,i.return,$)}if(i===n){Ee=null;break}var O=i.sibling;if(O!==null){O.return=i.return,Ee=O;break}Ee=i.return}}var m_=Math.ceil,pl=P.ReactCurrentDispatcher,rd=P.ReactCurrentOwner,pr=P.ReactCurrentBatchConfig,Qe=0,Pt=null,wt=null,Ot=0,ar=0,ci=Pn(0),St=0,_o=null,fs=0,gl=0,nd=0,Co=null,Jt=null,sd=0,ui=1/0,un=null,yl=!1,id=null,Dn=null,vl=!1,In=null,xl=0,So=0,od=null,bl=-1,wl=0;function Vt(){return(Qe&6)!==0?yt():bl!==-1?bl:bl=yt()}function Ln(n){return(n.mode&1)===0?1:(Qe&2)!==0&&Ot!==0?Ot&-Ot:Jj.transition!==null?(wl===0&&(wl=Zh()),wl):(n=Je,n!==0||(n=window.event,n=n===void 0?16:lm(n.type)),n)}function Ar(n,i,c,f){if(50<So)throw So=0,od=null,Error(r(185));Ki(n,c,f),((Qe&2)===0||n!==Pt)&&(n===Pt&&((Qe&2)===0&&(gl|=c),St===4&&$n(n,Ot)),Xt(n,f),c===1&&Qe===0&&(i.mode&1)===0&&(ui=yt()+500,Qa&&An()))}function Xt(n,i){var c=n.callbackNode;Jw(n,i);var f=Ta(n,n===Pt?Ot:0);if(f===0)c!==null&&Yh(c),n.callbackNode=null,n.callbackPriority=0;else if(i=f&-f,n.callbackPriority!==i){if(c!=null&&Yh(c),i===1)n.tag===0?Yj(lg.bind(null,n)):Gm(lg.bind(null,n)),Hj(function(){(Qe&6)===0&&An()}),c=null;else{switch(em(f)){case 1:c=Fc;break;case 4:c=Jh;break;case 16:c=Na;break;case 536870912:c=Xh;break;default:c=Na}c=gg(c,ag.bind(null,n))}n.callbackPriority=i,n.callbackNode=c}}function ag(n,i){if(bl=-1,wl=0,(Qe&6)!==0)throw Error(r(327));var c=n.callbackNode;if(di()&&n.callbackNode!==c)return null;var f=Ta(n,n===Pt?Ot:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||i)i=jl(n,f);else{i=f;var y=Qe;Qe|=2;var x=ug();(Pt!==n||Ot!==i)&&(un=null,ui=yt()+500,ms(n,i));do try{y_();break}catch(O){cg(n,O)}while(!0);Cu(),pl.current=x,Qe=y,wt!==null?i=0:(Pt=null,Ot=0,i=St)}if(i!==0){if(i===2&&(y=Uc(n),y!==0&&(f=y,i=ad(n,y))),i===1)throw c=_o,ms(n,0),$n(n,f),Xt(n,yt()),c;if(i===6)$n(n,f);else{if(y=n.current.alternate,(f&30)===0&&!p_(y)&&(i=jl(n,f),i===2&&(x=Uc(n),x!==0&&(f=x,i=ad(n,x))),i===1))throw c=_o,ms(n,0),$n(n,f),Xt(n,yt()),c;switch(n.finishedWork=y,n.finishedLanes=f,i){case 0:case 1:throw Error(r(345));case 2:ps(n,Jt,un);break;case 3:if($n(n,f),(f&130023424)===f&&(i=sd+500-yt(),10<i)){if(Ta(n,0)!==0)break;if(y=n.suspendedLanes,(y&f)!==f){Vt(),n.pingedLanes|=n.suspendedLanes&y;break}n.timeoutHandle=hu(ps.bind(null,n,Jt,un),i);break}ps(n,Jt,un);break;case 4:if($n(n,f),(f&4194240)===f)break;for(i=n.eventTimes,y=-1;0<f;){var S=31-Sr(f);x=1<<S,S=i[S],S>y&&(y=S),f&=~x}if(f=y,f=yt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*m_(f/1960))-f,10<f){n.timeoutHandle=hu(ps.bind(null,n,Jt,un),f);break}ps(n,Jt,un);break;case 5:ps(n,Jt,un);break;default:throw Error(r(329))}}}return Xt(n,yt()),n.callbackNode===c?ag.bind(null,n):null}function ad(n,i){var c=Co;return n.current.memoizedState.isDehydrated&&(ms(n,i).flags|=256),n=jl(n,i),n!==2&&(i=Jt,Jt=c,i!==null&&ld(i)),n}function ld(n){Jt===null?Jt=n:Jt.push.apply(Jt,n)}function p_(n){for(var i=n;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var y=c[f],x=y.getSnapshot;y=y.value;try{if(!Nr(x(),y))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $n(n,i){for(i&=~nd,i&=~gl,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var c=31-Sr(i),f=1<<c;n[c]=-1,i&=~f}}function lg(n){if((Qe&6)!==0)throw Error(r(327));di();var i=Ta(n,0);if((i&1)===0)return Xt(n,yt()),null;var c=jl(n,i);if(n.tag!==0&&c===2){var f=Uc(n);f!==0&&(i=f,c=ad(n,f))}if(c===1)throw c=_o,ms(n,0),$n(n,i),Xt(n,yt()),c;if(c===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ps(n,Jt,un),Xt(n,yt()),null}function cd(n,i){var c=Qe;Qe|=1;try{return n(i)}finally{Qe=c,Qe===0&&(ui=yt()+500,Qa&&An())}}function hs(n){In!==null&&In.tag===0&&(Qe&6)===0&&di();var i=Qe;Qe|=1;var c=pr.transition,f=Je;try{if(pr.transition=null,Je=1,n)return n()}finally{Je=f,pr.transition=c,Qe=i,(Qe&6)===0&&An()}}function ud(){ar=ci.current,at(ci)}function ms(n,i){n.finishedWork=null,n.finishedLanes=0;var c=n.timeoutHandle;if(c!==-1&&(n.timeoutHandle=-1,Wj(c)),wt!==null)for(c=wt.return;c!==null;){var f=c;switch(xu(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Ga();break;case 3:oi(),at(Kt),at(It),Ru();break;case 5:Tu(f);break;case 4:oi();break;case 13:at(ft);break;case 19:at(ft);break;case 10:Su(f.type._context);break;case 22:case 23:ud()}c=c.return}if(Pt=n,wt=n=Fn(n.current,null),Ot=ar=i,St=0,_o=null,nd=gl=fs=0,Jt=Co=null,cs!==null){for(i=0;i<cs.length;i++)if(c=cs[i],f=c.interleaved,f!==null){c.interleaved=null;var y=f.next,x=c.pending;if(x!==null){var S=x.next;x.next=y,f.next=S}c.pending=f}cs=null}return n}function cg(n,i){do{var c=wt;try{if(Cu(),il.current=cl,ol){for(var f=ht.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}ol=!1}if(ds=0,Et=Ct=ht=null,yo=!1,vo=0,rd.current=null,c===null||c.return===null){St=1,_o=i,wt=null;break}e:{var x=n,S=c.return,O=c,$=i;if(i=Ot,O.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var J=$,fe=O,ge=fe.tag;if((fe.mode&1)===0&&(ge===0||ge===11||ge===15)){var de=fe.alternate;de?(fe.updateQueue=de.updateQueue,fe.memoizedState=de.memoizedState,fe.lanes=de.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var ke=Mp(S);if(ke!==null){ke.flags&=-257,Dp(ke,S,O,x,i),ke.mode&1&&Op(x,J,i),i=ke,$=J;var Te=i.updateQueue;if(Te===null){var Re=new Set;Re.add($),i.updateQueue=Re}else Te.add($);break e}else{if((i&1)===0){Op(x,J,i),dd();break e}$=Error(r(426))}}else if(ut&&O.mode&1){var vt=Mp(S);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),Dp(vt,S,O,x,i),ju(ai($,O));break e}}x=$=ai($,O),St!==4&&(St=2),Co===null?Co=[x]:Co.push(x),x=S;do{switch(x.tag){case 3:x.flags|=65536,i&=-i,x.lanes|=i;var q=Ap(x,$,i);sp(x,q);break e;case 1:O=$;var F=x.type,W=x.stateNode;if((x.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Dn===null||!Dn.has(W)))){x.flags|=65536,i&=-i,x.lanes|=i;var ve=Rp(x,O,i);sp(x,ve);break e}}x=x.return}while(x!==null)}fg(c)}catch(Me){i=Me,wt===c&&c!==null&&(wt=c=c.return);continue}break}while(!0)}function ug(){var n=pl.current;return pl.current=cl,n===null?cl:n}function dd(){(St===0||St===3||St===2)&&(St=4),Pt===null||(fs&268435455)===0&&(gl&268435455)===0||$n(Pt,Ot)}function jl(n,i){var c=Qe;Qe|=2;var f=ug();(Pt!==n||Ot!==i)&&(un=null,ms(n,i));do try{g_();break}catch(y){cg(n,y)}while(!0);if(Cu(),Qe=c,pl.current=f,wt!==null)throw Error(r(261));return Pt=null,Ot=0,St}function g_(){for(;wt!==null;)dg(wt)}function y_(){for(;wt!==null&&!Vw();)dg(wt)}function dg(n){var i=pg(n.alternate,n,ar);n.memoizedProps=n.pendingProps,i===null?fg(n):wt=i,rd.current=null}function fg(n){var i=n;do{var c=i.alternate;if(n=i.return,(i.flags&32768)===0){if(c=c_(c,i,ar),c!==null){wt=c;return}}else{if(c=u_(c,i),c!==null){c.flags&=32767,wt=c;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{St=6,wt=null;return}}if(i=i.sibling,i!==null){wt=i;return}wt=i=n}while(i!==null);St===0&&(St=5)}function ps(n,i,c){var f=Je,y=pr.transition;try{pr.transition=null,Je=1,v_(n,i,c,f)}finally{pr.transition=y,Je=f}return null}function v_(n,i,c,f){do di();while(In!==null);if((Qe&6)!==0)throw Error(r(327));c=n.finishedWork;var y=n.finishedLanes;if(c===null)return null;if(n.finishedWork=null,n.finishedLanes=0,c===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var x=c.lanes|c.childLanes;if(Xw(n,x),n===Pt&&(wt=Pt=null,Ot=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||vl||(vl=!0,gg(Na,function(){return di(),null})),x=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||x){x=pr.transition,pr.transition=null;var S=Je;Je=1;var O=Qe;Qe|=4,rd.current=null,f_(n,c),rg(c,n),$j(du),Oa=!!uu,du=uu=null,n.current=c,h_(c),zw(),Qe=O,Je=S,pr.transition=x}else n.current=c;if(vl&&(vl=!1,In=n,xl=y),x=n.pendingLanes,x===0&&(Dn=null),Hw(c.stateNode),Xt(n,yt()),i!==null)for(f=n.onRecoverableError,c=0;c<i.length;c++)y=i[c],f(y.value,{componentStack:y.stack,digest:y.digest});if(yl)throw yl=!1,n=id,id=null,n;return(xl&1)!==0&&n.tag!==0&&di(),x=n.pendingLanes,(x&1)!==0?n===od?So++:(So=0,od=n):So=0,An(),null}function di(){if(In!==null){var n=em(xl),i=pr.transition,c=Je;try{if(pr.transition=null,Je=16>n?16:n,In===null)var f=!1;else{if(n=In,In=null,xl=0,(Qe&6)!==0)throw Error(r(331));var y=Qe;for(Qe|=4,Ee=n.current;Ee!==null;){var x=Ee,S=x.child;if((Ee.flags&16)!==0){var O=x.deletions;if(O!==null){for(var $=0;$<O.length;$++){var J=O[$];for(Ee=J;Ee!==null;){var fe=Ee;switch(fe.tag){case 0:case 11:case 15:jo(8,fe,x)}var ge=fe.child;if(ge!==null)ge.return=fe,Ee=ge;else for(;Ee!==null;){fe=Ee;var de=fe.sibling,ke=fe.return;if(Jp(fe),fe===J){Ee=null;break}if(de!==null){de.return=ke,Ee=de;break}Ee=ke}}}var Te=x.alternate;if(Te!==null){var Re=Te.child;if(Re!==null){Te.child=null;do{var vt=Re.sibling;Re.sibling=null,Re=vt}while(Re!==null)}}Ee=x}}if((x.subtreeFlags&2064)!==0&&S!==null)S.return=x,Ee=S;else e:for(;Ee!==null;){if(x=Ee,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:jo(9,x,x.return)}var q=x.sibling;if(q!==null){q.return=x.return,Ee=q;break e}Ee=x.return}}var F=n.current;for(Ee=F;Ee!==null;){S=Ee;var W=S.child;if((S.subtreeFlags&2064)!==0&&W!==null)W.return=S,Ee=W;else e:for(S=F;Ee!==null;){if(O=Ee,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:ml(9,O)}}catch(Me){gt(O,O.return,Me)}if(O===S){Ee=null;break e}var ve=O.sibling;if(ve!==null){ve.return=O.return,Ee=ve;break e}Ee=O.return}}if(Qe=y,An(),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(ka,n)}catch{}f=!0}return f}finally{Je=c,pr.transition=i}}return!1}function hg(n,i,c){i=ai(c,i),i=Ap(n,i,1),n=On(n,i,1),i=Vt(),n!==null&&(Ki(n,1,i),Xt(n,i))}function gt(n,i,c){if(n.tag===3)hg(n,n,c);else for(;i!==null;){if(i.tag===3){hg(i,n,c);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Dn===null||!Dn.has(f))){n=ai(c,n),n=Rp(i,n,1),i=On(i,n,1),n=Vt(),i!==null&&(Ki(i,1,n),Xt(i,n));break}}i=i.return}}function x_(n,i,c){var f=n.pingCache;f!==null&&f.delete(i),i=Vt(),n.pingedLanes|=n.suspendedLanes&c,Pt===n&&(Ot&c)===c&&(St===4||St===3&&(Ot&130023424)===Ot&&500>yt()-sd?ms(n,0):nd|=c),Xt(n,i)}function mg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Pa,Pa<<=1,(Pa&130023424)===0&&(Pa=4194304)));var c=Vt();n=an(n,i),n!==null&&(Ki(n,i,c),Xt(n,c))}function b_(n){var i=n.memoizedState,c=0;i!==null&&(c=i.retryLane),mg(n,c)}function w_(n,i){var c=0;switch(n.tag){case 13:var f=n.stateNode,y=n.memoizedState;y!==null&&(c=y.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(i),mg(n,c)}var pg;pg=function(n,i,c){if(n!==null)if(n.memoizedProps!==i.pendingProps||Kt.current)Yt=!0;else{if((n.lanes&c)===0&&(i.flags&128)===0)return Yt=!1,l_(n,i,c);Yt=(n.flags&131072)!==0}else Yt=!1,ut&&(i.flags&1048576)!==0&&Km(i,Ja,i.index);switch(i.lanes=0,i.tag){case 2:var f=i.type;fl(n,i),n=i.pendingProps;var y=Zs(i,It.current);ii(i,c),y=Du(null,i,f,n,y,c);var x=Iu();return i.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Qt(f)?(x=!0,Ka(i)):x=!1,i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Eu(i),y.updater=ul,i.stateNode=y,y._reactInternals=i,Vu(i,f,n,c),i=Hu(null,i,f,!0,x,c)):(i.tag=0,ut&&x&&vu(i),Bt(null,i,y,c),i=i.child),i;case 16:f=i.elementType;e:{switch(fl(n,i),n=i.pendingProps,y=f._init,f=y(f._payload),i.type=f,y=i.tag=__(f),n=Er(f,n),y){case 0:i=Wu(null,i,f,n,c);break e;case 1:i=Bp(null,i,f,n,c);break e;case 11:i=Ip(null,i,f,n,c);break e;case 14:i=Lp(null,i,f,Er(f.type,n),c);break e}throw Error(r(306,f,""))}return i;case 0:return f=i.type,y=i.pendingProps,y=i.elementType===f?y:Er(f,y),Wu(n,i,f,y,c);case 1:return f=i.type,y=i.pendingProps,y=i.elementType===f?y:Er(f,y),Bp(n,i,f,y,c);case 3:e:{if(Vp(i),n===null)throw Error(r(387));f=i.pendingProps,x=i.memoizedState,y=x.element,np(n,i),nl(i,f,null,c);var S=i.memoizedState;if(f=S.element,x.isDehydrated)if(x={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},i.updateQueue.baseState=x,i.memoizedState=x,i.flags&256){y=ai(Error(r(423)),i),i=zp(n,i,f,c,y);break e}else if(f!==y){y=ai(Error(r(424)),i),i=zp(n,i,f,c,y);break e}else for(or=En(i.stateNode.containerInfo.firstChild),ir=i,ut=!0,kr=null,c=tp(i,null,f,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ri(),f===y){i=cn(n,i,c);break e}Bt(n,i,f,c)}i=i.child}return i;case 5:return op(i),n===null&&wu(i),f=i.type,y=i.pendingProps,x=n!==null?n.memoizedProps:null,S=y.children,fu(f,y)?S=null:x!==null&&fu(f,x)&&(i.flags|=32),Up(n,i),Bt(n,i,S,c),i.child;case 6:return n===null&&wu(i),null;case 13:return qp(n,i,c);case 4:return Pu(i,i.stateNode.containerInfo),f=i.pendingProps,n===null?i.child=ni(i,null,f,c):Bt(n,i,f,c),i.child;case 11:return f=i.type,y=i.pendingProps,y=i.elementType===f?y:Er(f,y),Ip(n,i,f,y,c);case 7:return Bt(n,i,i.pendingProps,c),i.child;case 8:return Bt(n,i,i.pendingProps.children,c),i.child;case 12:return Bt(n,i,i.pendingProps.children,c),i.child;case 10:e:{if(f=i.type._context,y=i.pendingProps,x=i.memoizedProps,S=y.value,nt(el,f._currentValue),f._currentValue=S,x!==null)if(Nr(x.value,S)){if(x.children===y.children&&!Kt.current){i=cn(n,i,c);break e}}else for(x=i.child,x!==null&&(x.return=i);x!==null;){var O=x.dependencies;if(O!==null){S=x.child;for(var $=O.firstContext;$!==null;){if($.context===f){if(x.tag===1){$=ln(-1,c&-c),$.tag=2;var J=x.updateQueue;if(J!==null){J=J.shared;var fe=J.pending;fe===null?$.next=$:($.next=fe.next,fe.next=$),J.pending=$}}x.lanes|=c,$=x.alternate,$!==null&&($.lanes|=c),Nu(x.return,c,i),O.lanes|=c;break}$=$.next}}else if(x.tag===10)S=x.type===i.type?null:x.child;else if(x.tag===18){if(S=x.return,S===null)throw Error(r(341));S.lanes|=c,O=S.alternate,O!==null&&(O.lanes|=c),Nu(S,c,i),S=x.sibling}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===i){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}Bt(n,i,y.children,c),i=i.child}return i;case 9:return y=i.type,f=i.pendingProps.children,ii(i,c),y=hr(y),f=f(y),i.flags|=1,Bt(n,i,f,c),i.child;case 14:return f=i.type,y=Er(f,i.pendingProps),y=Er(f.type,y),Lp(n,i,f,y,c);case 15:return $p(n,i,i.type,i.pendingProps,c);case 17:return f=i.type,y=i.pendingProps,y=i.elementType===f?y:Er(f,y),fl(n,i),i.tag=1,Qt(f)?(n=!0,Ka(i)):n=!1,ii(i,c),Pp(i,f,y),Vu(i,f,y,c),Hu(null,i,f,!0,n,c);case 19:return Hp(n,i,c);case 22:return Fp(n,i,c)}throw Error(r(156,i.tag))};function gg(n,i){return Qh(n,i)}function j_(n,i,c,f){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(n,i,c,f){return new j_(n,i,c,f)}function fd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function __(n){if(typeof n=="function")return fd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ne)return 11;if(n===ce)return 14}return 2}function Fn(n,i){var c=n.alternate;return c===null?(c=gr(n.tag,i,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=i,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&14680064,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,i=n.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c}function _l(n,i,c,f,y,x){var S=2;if(f=n,typeof n=="function")fd(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case L:return gs(c.children,y,x,i);case Q:S=8,y|=8;break;case re:return n=gr(12,c,i,y|2),n.elementType=re,n.lanes=x,n;case we:return n=gr(13,c,i,y),n.elementType=we,n.lanes=x,n;case H:return n=gr(19,c,i,y),n.elementType=H,n.lanes=x,n;case ae:return Cl(c,y,x,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:S=10;break e;case ye:S=9;break e;case ne:S=11;break e;case ce:S=14;break e;case G:S=16,f=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return i=gr(S,c,i,y),i.elementType=n,i.type=f,i.lanes=x,i}function gs(n,i,c,f){return n=gr(7,n,f,i),n.lanes=c,n}function Cl(n,i,c,f){return n=gr(22,n,f,i),n.elementType=ae,n.lanes=c,n.stateNode={isHidden:!1},n}function hd(n,i,c){return n=gr(6,n,null,i),n.lanes=c,n}function md(n,i,c){return i=gr(4,n.children!==null?n.children:[],n.key,i),i.lanes=c,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function C_(n,i,c,f,y){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bc(0),this.expirationTimes=Bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bc(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function pd(n,i,c,f,y,x,S,O,$){return n=new C_(n,i,c,O,$),i===1?(i=1,x===!0&&(i|=8)):i=0,x=gr(3,null,null,i),n.current=x,x.stateNode=n,x.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eu(x),n}function S_(n,i,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:f==null?null:""+f,children:n,containerInfo:i,implementation:c}}function yg(n){if(!n)return Tn;n=n._reactInternals;e:{if(Ze(n)!==n||n.tag!==1)throw Error(r(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Qt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(n.tag===1){var c=n.type;if(Qt(c))return Wm(n,c,i)}return i}function vg(n,i,c,f,y,x,S,O,$){return n=pd(c,f,!0,n,y,x,S,O,$),n.context=yg(null),c=n.current,f=Vt(),y=Ln(c),x=ln(f,y),x.callback=i??null,On(c,x,y),n.current.lanes=y,Ki(n,y,f),Xt(n,f),n}function Sl(n,i,c,f){var y=i.current,x=Vt(),S=Ln(y);return c=yg(c),i.context===null?i.context=c:i.pendingContext=c,i=ln(x,S),i.payload={element:n},f=f===void 0?null:f,f!==null&&(i.callback=f),n=On(y,i,S),n!==null&&(Ar(n,y,S,x),rl(n,y,S)),S}function Nl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<i?c:i}}function gd(n,i){xg(n,i),(n=n.alternate)&&xg(n,i)}function N_(){return null}var bg=typeof reportError=="function"?reportError:function(n){console.error(n)};function yd(n){this._internalRoot=n}kl.prototype.render=yd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));Sl(n,i,null,null)},kl.prototype.unmount=yd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;hs(function(){Sl(null,n,null,null)}),i[rn]=null}};function kl(n){this._internalRoot=n}kl.prototype.unstable_scheduleHydration=function(n){if(n){var i=nm();n={blockedOn:null,target:n,priority:i};for(var c=0;c<Sn.length&&i!==0&&i<Sn[c].priority;c++);Sn.splice(c,0,n),c===0&&om(n)}};function vd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function El(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function wg(){}function k_(n,i,c,f,y){if(y){if(typeof f=="function"){var x=f;f=function(){var J=Nl(S);x.call(J)}}var S=vg(i,f,n,0,null,!1,!1,"",wg);return n._reactRootContainer=S,n[rn]=S.current,lo(n.nodeType===8?n.parentNode:n),hs(),S}for(;y=n.lastChild;)n.removeChild(y);if(typeof f=="function"){var O=f;f=function(){var J=Nl($);O.call(J)}}var $=pd(n,0,!1,null,null,!1,!1,"",wg);return n._reactRootContainer=$,n[rn]=$.current,lo(n.nodeType===8?n.parentNode:n),hs(function(){Sl(i,$,c,f)}),$}function Pl(n,i,c,f,y){var x=c._reactRootContainer;if(x){var S=x;if(typeof y=="function"){var O=y;y=function(){var $=Nl(S);O.call($)}}Sl(i,S,n,y)}else S=k_(c,i,n,y,f);return Nl(S)}tm=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var c=Gi(i.pendingLanes);c!==0&&(Vc(i,c|1),Xt(i,yt()),(Qe&6)===0&&(ui=yt()+500,An()))}break;case 13:hs(function(){var f=an(n,1);if(f!==null){var y=Vt();Ar(f,n,1,y)}}),gd(n,1)}},zc=function(n){if(n.tag===13){var i=an(n,134217728);if(i!==null){var c=Vt();Ar(i,n,134217728,c)}gd(n,134217728)}},rm=function(n){if(n.tag===13){var i=Ln(n),c=an(n,i);if(c!==null){var f=Vt();Ar(c,n,i,f)}gd(n,i)}},nm=function(){return Je},sm=function(n,i){var c=Je;try{return Je=n,i()}finally{Je=c}},Bs=function(n,i,c){switch(i){case"input":if(U(n,c),i=c.name,c.type==="radio"&&i!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var f=c[i];if(f!==n&&f.form===n.form){var y=Ha(f);if(!y)throw Error(r(90));De(f),U(f,y)}}}break;case"textarea":bt(n,c);break;case"select":i=c.value,i!=null&&je(n,!!c.multiple,i,!1)}},ja=cd,_a=hs;var E_={usingClientEntryPoint:!1,Events:[fo,Js,Ha,ba,wa,cd]},No={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P_={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Gh(n),n===null?null:n.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||N_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{ka=Tl.inject(P_),Ur=Tl}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E_,Zt.createPortal=function(n,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(i))throw Error(r(200));return S_(n,i,null,c)},Zt.createRoot=function(n,i){if(!vd(n))throw Error(r(299));var c=!1,f="",y=bg;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=pd(n,1,!1,null,null,c,!1,f,y),n[rn]=i.current,lo(n.nodeType===8?n.parentNode:n),new yd(i)},Zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=Gh(i),n=n===null?null:n.stateNode,n},Zt.flushSync=function(n){return hs(n)},Zt.hydrate=function(n,i,c){if(!El(i))throw Error(r(200));return Pl(null,n,i,!0,c)},Zt.hydrateRoot=function(n,i,c){if(!vd(n))throw Error(r(405));var f=c!=null&&c.hydratedSources||null,y=!1,x="",S=bg;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),i=vg(i,null,n,1,c??null,y,!1,x,S),n[rn]=i.current,lo(n),f)for(n=0;n<f.length;n++)c=f[n],y=c._getVersion,y=y(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,y]:i.mutableSourceEagerHydrationData.push(c,y);return new kl(i)},Zt.render=function(n,i,c){if(!El(i))throw Error(r(200));return Pl(null,n,i,!1,c)},Zt.unmountComponentAtNode=function(n){if(!El(n))throw Error(r(40));return n._reactRootContainer?(hs(function(){Pl(null,null,n,!1,function(){n._reactRootContainer=null,n[rn]=null})}),!0):!1},Zt.unstable_batchedUpdates=cd,Zt.unstable_renderSubtreeIntoContainer=function(n,i,c,f){if(!El(c))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return Pl(n,i,c,!1,f)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Pg;function Yv(){if(Pg)return wd.exports;Pg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wd.exports=$_(),wd.exports}var Tg;function F_(){if(Tg)return Al;Tg=1;var t=Yv();return Al.createRoot=t.createRoot,Al.hydrateRoot=t.hydrateRoot,Al}var U_=F_();const B_=Os(U_);var Cd,Ag;function V_(){if(Ag)return Cd;Ag=1;var t=typeof Element<"u",e=typeof Map=="function",r=typeof Set=="function",s=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function a(l,u){if(l===u)return!0;if(l&&u&&typeof l=="object"&&typeof u=="object"){if(l.constructor!==u.constructor)return!1;var d,h,m;if(Array.isArray(l)){if(d=l.length,d!=u.length)return!1;for(h=d;h--!==0;)if(!a(l[h],u[h]))return!1;return!0}var p;if(e&&l instanceof Map&&u instanceof Map){if(l.size!==u.size)return!1;for(p=l.entries();!(h=p.next()).done;)if(!u.has(h.value[0]))return!1;for(p=l.entries();!(h=p.next()).done;)if(!a(h.value[1],u.get(h.value[0])))return!1;return!0}if(r&&l instanceof Set&&u instanceof Set){if(l.size!==u.size)return!1;for(p=l.entries();!(h=p.next()).done;)if(!u.has(h.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(u)){if(d=l.length,d!=u.length)return!1;for(h=d;h--!==0;)if(l[h]!==u[h])return!1;return!0}if(l.constructor===RegExp)return l.source===u.source&&l.flags===u.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof u.valueOf=="function")return l.valueOf()===u.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof u.toString=="function")return l.toString()===u.toString();if(m=Object.keys(l),d=m.length,d!==Object.keys(u).length)return!1;for(h=d;h--!==0;)if(!Object.prototype.hasOwnProperty.call(u,m[h]))return!1;if(t&&l instanceof Element)return!1;for(h=d;h--!==0;)if(!((m[h]==="_owner"||m[h]==="__v"||m[h]==="__o")&&l.$$typeof)&&!a(l[m[h]],u[m[h]]))return!1;return!0}return l!==l&&u!==u}return Cd=function(u,d){try{return a(u,d)}catch(h){if((h.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw h}},Cd}var z_=V_();const q_=Os(z_);var Sd,Rg;function W_(){if(Rg)return Sd;Rg=1;var t=function(e,r,s,a,l,u,d,h){if(!e){var m;if(r===void 0)m=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[s,a,l,u,d,h],g=0;m=new Error(r.replace(/%s/g,function(){return p[g++]})),m.name="Invariant Violation"}throw m.framesToPop=1,m}};return Sd=t,Sd}var H_=W_();const Og=Os(H_);var Nd,Mg;function G_(){return Mg||(Mg=1,Nd=function(e,r,s,a){var l=s?s.call(a,e,r):void 0;if(l!==void 0)return!!l;if(e===r)return!0;if(typeof e!="object"||!e||typeof r!="object"||!r)return!1;var u=Object.keys(e),d=Object.keys(r);if(u.length!==d.length)return!1;for(var h=Object.prototype.hasOwnProperty.bind(r),m=0;m<u.length;m++){var p=u[m];if(!h(p))return!1;var g=e[p],v=r[p];if(l=s?s.call(a,g,v,p):void 0,l===!1||l===void 0&&g!==v)return!1}return!0}),Nd}var K_=G_();const Q_=Os(K_);var Jv=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(Jv||{}),kd={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Dg=Object.values(Jv),Yf={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Y_=Object.entries(Yf).reduce((t,[e,r])=>(t[r]=e,t),{}),Dr="data-rh",Ri={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Oi=(t,e)=>{for(let r=t.length-1;r>=0;r-=1){const s=t[r];if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}return null},J_=t=>{let e=Oi(t,"title");const r=Oi(t,Ri.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),r&&e)return r.replace(/%s/g,()=>e);const s=Oi(t,Ri.DEFAULT_TITLE);return e||s||void 0},X_=t=>Oi(t,Ri.ON_CHANGE_CLIENT_STATE)||(()=>{}),Ed=(t,e)=>e.filter(r=>typeof r[t]<"u").map(r=>r[t]).reduce((r,s)=>({...r,...s}),{}),Z_=(t,e)=>e.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,s)=>{if(!r.length){const a=Object.keys(s);for(let l=0;l<a.length;l+=1){const d=a[l].toLowerCase();if(t.indexOf(d)!==-1&&s[d])return r.concat(s)}}return r},[]),eC=t=>console&&typeof console.warn=="function"&&console.warn(t),Eo=(t,e,r)=>{const s={};return r.filter(a=>Array.isArray(a[t])?!0:(typeof a[t]<"u"&&eC(`Helmet: ${t} should be of type "Array". Instead found type "${typeof a[t]}"`),!1)).map(a=>a[t]).reverse().reduce((a,l)=>{const u={};l.filter(h=>{let m;const p=Object.keys(h);for(let v=0;v<p.length;v+=1){const b=p[v],_=b.toLowerCase();e.indexOf(_)!==-1&&!(m==="rel"&&h[m].toLowerCase()==="canonical")&&!(_==="rel"&&h[_].toLowerCase()==="stylesheet")&&(m=_),e.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(m=b)}if(!m||!h[m])return!1;const g=h[m].toLowerCase();return s[m]||(s[m]={}),u[m]||(u[m]={}),s[m][g]?!1:(u[m][g]=!0,!0)}).reverse().forEach(h=>a.push(h));const d=Object.keys(u);for(let h=0;h<d.length;h+=1){const m=d[h],p={...s[m],...u[m]};s[m]=p}return a},[]).reverse()},tC=(t,e)=>{if(Array.isArray(t)&&t.length){for(let r=0;r<t.length;r+=1)if(t[r][e])return!0}return!1},rC=t=>({baseTag:Z_(["href"],t),bodyAttributes:Ed("bodyAttributes",t),defer:Oi(t,Ri.DEFER),encode:Oi(t,Ri.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Ed("htmlAttributes",t),linkTags:Eo("link",["rel","href"],t),metaTags:Eo("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Eo("noscript",["innerHTML"],t),onChangeClientState:X_(t),scriptTags:Eo("script",["src","innerHTML"],t),styleTags:Eo("style",["cssText"],t),title:J_(t),titleAttributes:Ed("titleAttributes",t),prioritizeSeoTags:tC(t,Ri.PRIORITIZE_SEO_TAGS)}),Xv=t=>Array.isArray(t)?t.join(""):t,nC=(t,e)=>{const r=Object.keys(t);for(let s=0;s<r.length;s+=1)if(e[r[s]]&&e[r[s]].includes(t[r[s]]))return!0;return!1},Pd=(t,e)=>Array.isArray(t)?t.reduce((r,s)=>(nC(s,e)?r.priority.push(s):r.default.push(s),r),{priority:[],default:[]}):{default:t,priority:[]},Ig=(t,e)=>({...t,[e]:void 0}),sC=["noscript","script","style"],af=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Zv=t=>Object.keys(t).reduce((e,r)=>{const s=typeof t[r]<"u"?`${r}="${t[r]}"`:`${r}`;return e?`${e} ${s}`:s},""),iC=(t,e,r,s)=>{const a=Zv(r),l=Xv(e);return a?`<${t} ${Dr}="true" ${a}>${af(l,s)}</${t}>`:`<${t} ${Dr}="true">${af(l,s)}</${t}>`},oC=(t,e,r=!0)=>e.reduce((s,a)=>{const l=a,u=Object.keys(l).filter(m=>!(m==="innerHTML"||m==="cssText")).reduce((m,p)=>{const g=typeof l[p]>"u"?p:`${p}="${af(l[p],r)}"`;return m?`${m} ${g}`:g},""),d=l.innerHTML||l.cssText||"",h=sC.indexOf(t)===-1;return`${s}<${t} ${Dr}="true" ${u}${h?"/>":`>${d}</${t}>`}`},""),ex=(t,e={})=>Object.keys(t).reduce((r,s)=>{const a=Yf[s];return r[a||s]=t[s],r},e),aC=(t,e,r)=>{const s={key:e,[Dr]:!0},a=ex(r,s);return[rt.createElement("title",a,e)]},Wl=(t,e)=>e.map((r,s)=>{const a={key:s,[Dr]:!0};return Object.keys(r).forEach(l=>{const d=Yf[l]||l;if(d==="innerHTML"||d==="cssText"){const h=r.innerHTML||r.cssText;a.dangerouslySetInnerHTML={__html:h}}else a[d]=r[l]}),rt.createElement(t,a)}),br=(t,e,r=!0)=>{switch(t){case"title":return{toComponent:()=>aC(t,e.title,e.titleAttributes),toString:()=>iC(t,e.title,e.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>ex(e),toString:()=>Zv(e)};default:return{toComponent:()=>Wl(t,e),toString:()=>oC(t,e,r)}}},lC=({metaTags:t,linkTags:e,scriptTags:r,encode:s})=>{const a=Pd(t,kd.meta),l=Pd(e,kd.link),u=Pd(r,kd.script);return{priorityMethods:{toComponent:()=>[...Wl("meta",a.priority),...Wl("link",l.priority),...Wl("script",u.priority)],toString:()=>`${br("meta",a.priority,s)} ${br("link",l.priority,s)} ${br("script",u.priority,s)}`},metaTags:a.default,linkTags:l.default,scriptTags:u.default}},cC=t=>{const{baseTag:e,bodyAttributes:r,encode:s=!0,htmlAttributes:a,noscriptTags:l,styleTags:u,title:d="",titleAttributes:h,prioritizeSeoTags:m}=t;let{linkTags:p,metaTags:g,scriptTags:v}=t,b={toComponent:()=>{},toString:()=>""};return m&&({priorityMethods:b,linkTags:p,metaTags:g,scriptTags:v}=lC(t)),{priority:b,base:br("base",e,s),bodyAttributes:br("bodyAttributes",r,s),htmlAttributes:br("htmlAttributes",a,s),link:br("link",p,s),meta:br("meta",g,s),noscript:br("noscript",l,s),script:br("script",v,s),style:br("style",u,s),title:br("title",{title:d,titleAttributes:h},s)}},lf=cC,Rl=[],tx=!!(typeof window<"u"&&window.document&&window.document.createElement),cf=class{instances=[];canUseDOM=tx;context;value={setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Rl:this.instances,add:t=>{(this.canUseDOM?Rl:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Rl:this.instances).indexOf(t);(this.canUseDOM?Rl:this.instances).splice(e,1)}}};constructor(t,e){this.context=t,this.canUseDOM=e||!1,e||(t.helmet=lf({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},uC={},rx=rt.createContext(uC),nx=class sx extends w.Component{static canUseDOM=tx;helmetData;constructor(e){super(e),this.helmetData=new cf(this.props.context||{},sx.canUseDOM)}render(){return rt.createElement(rx.Provider,{value:this.helmetData.value},this.props.children)}},fi=(t,e)=>{const r=document.head||document.querySelector("head"),s=r.querySelectorAll(`${t}[${Dr}]`),a=[].slice.call(s),l=[];let u;return e&&e.length&&e.forEach(d=>{const h=document.createElement(t);for(const m in d)if(Object.prototype.hasOwnProperty.call(d,m))if(m==="innerHTML")h.innerHTML=d.innerHTML;else if(m==="cssText")h.styleSheet?h.styleSheet.cssText=d.cssText:h.appendChild(document.createTextNode(d.cssText));else{const p=m,g=typeof d[p]>"u"?"":d[p];h.setAttribute(m,g)}h.setAttribute(Dr,"true"),a.some((m,p)=>(u=p,h.isEqualNode(m)))?a.splice(u,1):l.push(h)}),a.forEach(d=>d.parentNode?.removeChild(d)),l.forEach(d=>r.appendChild(d)),{oldTags:a,newTags:l}},uf=(t,e)=>{const r=document.getElementsByTagName(t)[0];if(!r)return;const s=r.getAttribute(Dr),a=s?s.split(","):[],l=[...a],u=Object.keys(e);for(const d of u){const h=e[d]||"";r.getAttribute(d)!==h&&r.setAttribute(d,h),a.indexOf(d)===-1&&a.push(d);const m=l.indexOf(d);m!==-1&&l.splice(m,1)}for(let d=l.length-1;d>=0;d-=1)r.removeAttribute(l[d]);a.length===l.length?r.removeAttribute(Dr):r.getAttribute(Dr)!==u.join(",")&&r.setAttribute(Dr,u.join(","))},dC=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=Xv(t)),uf("title",e)},Lg=(t,e)=>{const{baseTag:r,bodyAttributes:s,htmlAttributes:a,linkTags:l,metaTags:u,noscriptTags:d,onChangeClientState:h,scriptTags:m,styleTags:p,title:g,titleAttributes:v}=t;uf("body",s),uf("html",a),dC(g,v);const b={baseTag:fi("base",r),linkTags:fi("link",l),metaTags:fi("meta",u),noscriptTags:fi("noscript",d),scriptTags:fi("script",m),styleTags:fi("style",p)},_={},C={};Object.keys(b).forEach(j=>{const{newTags:R,oldTags:A}=b[j];R.length&&(_[j]=R),A.length&&(C[j]=b[j].oldTags)}),e&&e(),h(t,_,C)},Po=null,fC=t=>{Po&&cancelAnimationFrame(Po),t.defer?Po=requestAnimationFrame(()=>{Lg(t,()=>{Po=null})}):(Lg(t),Po=null)},hC=fC,$g=class extends w.Component{rendered=!1;shouldComponentUpdate(t){return!Q_(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:e}=this.props.context;let r=null;const s=rC(t.get().map(a=>{const l={...a.props};return delete l.context,l}));nx.canUseDOM?hC(s):lf&&(r=lf(s)),e(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},mC=class extends w.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(t){return!q_(Ig(this.props,"helmetData"),Ig(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,r,s){return{...e,[t.type]:[...e[t.type]||[],{...r,...this.mapNestedChildrenToProps(t,s)}]}}mapObjectTypeChildren(t,e,r,s){switch(t.type){case"title":return{...e,[t.type]:s,titleAttributes:{...r}};case"body":return{...e,bodyAttributes:{...r}};case"html":return{...e,htmlAttributes:{...r}};default:return{...e,[t.type]:{...r}}}}mapArrayTypeChildrenToProps(t,e){let r={...e};return Object.keys(t).forEach(s=>{r={...r,[s]:t[s]}}),r}warnOnInvalidChildren(t,e){return Og(Dg.some(r=>t.type===r),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Dg.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),Og(!e||typeof e=="string"||Array.isArray(e)&&!e.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let r={};return rt.Children.forEach(t,s=>{if(!s||!s.props)return;const{children:a,...l}=s.props,u=Object.keys(l).reduce((h,m)=>(h[Y_[m]||m]=l[m],h),{});let{type:d}=s;switch(typeof d=="symbol"?d=d.toString():this.warnOnInvalidChildren(s,a),d){case"Symbol(react.fragment)":e=this.mapChildrenToProps(a,e);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(s,r,u,a);break;default:e=this.mapObjectTypeChildren(s,e,u,a);break}}),this.mapArrayTypeChildrenToProps(r,e)}render(){const{children:t,...e}=this.props;let r={...e},{helmetData:s}=e;if(t&&(r=this.mapChildrenToProps(t,r)),s&&!(s instanceof cf)){const a=s;s=new cf(a.context,!0),delete r.helmetData}return s?rt.createElement($g,{...r,context:s.value}):rt.createElement(rx.Consumer,null,a=>rt.createElement($g,{...r,context:a}))}};const ix=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),gc=w.createContext({}),yc=w.createContext(null),vc=typeof document<"u",Jf=vc?w.useLayoutEffect:w.useEffect,ox=w.createContext({strict:!1}),Xf=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),pC="framerAppearId",ax="data-"+Xf(pC);function gC(t,e,r,s){const{visualElement:a}=w.useContext(gc),l=w.useContext(ox),u=w.useContext(yc),d=w.useContext(ix).reducedMotion,h=w.useRef();s=s||l.renderer,!h.current&&s&&(h.current=s(t,{visualState:e,parent:a,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const m=h.current;w.useInsertionEffect(()=>{m&&m.update(r,u)});const p=w.useRef(!!(r[ax]&&!window.HandoffComplete));return Jf(()=>{m&&(m.render(),p.current&&m.animationState&&m.animationState.animateChanges())}),w.useEffect(()=>{m&&(m.updateFeatures(),!p.current&&m.animationState&&m.animationState.animateChanges(),p.current&&(p.current=!1,window.HandoffComplete=!0))}),m}function Ei(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function yC(t,e,r){return w.useCallback(s=>{s&&t.mount&&t.mount(s),e&&(s?e.mount(s):e.unmount()),r&&(typeof r=="function"?r(s):Ei(r)&&(r.current=s))},[e])}function Xo(t){return typeof t=="string"||Array.isArray(t)}function xc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Zf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eh=["initial",...Zf];function bc(t){return xc(t.animate)||eh.some(e=>Xo(t[e]))}function lx(t){return!!(bc(t)||t.variants)}function vC(t,e){if(bc(t)){const{initial:r,animate:s}=t;return{initial:r===!1||Xo(r)?r:void 0,animate:Xo(s)?s:void 0}}return t.inherit!==!1?e:{}}function xC(t){const{initial:e,animate:r}=vC(t,w.useContext(gc));return w.useMemo(()=>({initial:e,animate:r}),[Fg(e),Fg(r)])}function Fg(t){return Array.isArray(t)?t.join(" "):t}const Ug={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zo={};for(const t in Ug)Zo[t]={isEnabled:e=>Ug[t].some(r=>!!e[r])};function bC(t){for(const e in t)Zo[e]={...Zo[e],...t[e]}}const th=w.createContext({}),cx=w.createContext({}),wC=Symbol.for("motionComponentSymbol");function jC({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:s,Component:a}){t&&bC(t);function l(d,h){let m;const p={...w.useContext(ix),...d,layoutId:_C(d)},{isStatic:g}=p,v=xC(d),b=s(d,g);if(!g&&vc){v.visualElement=gC(a,b,p,e);const _=w.useContext(cx),C=w.useContext(ox).strict;v.visualElement&&(m=v.visualElement.loadFeatures(p,C,t,_))}return w.createElement(gc.Provider,{value:v},m&&v.visualElement?w.createElement(m,{visualElement:v.visualElement,...p}):null,r(a,d,yC(b,v.visualElement,h),b,g,v.visualElement))}const u=w.forwardRef(l);return u[wC]=a,u}function _C({layoutId:t}){const e=w.useContext(th).id;return e&&t!==void 0?e+"-"+t:t}function CC(t){function e(s,a={}){return jC(t(s,a))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(s,a)=>(r.has(a)||r.set(a,e(a)),r.get(a))})}const SC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rh(t){return typeof t!="string"||t.includes("-")?!1:!!(SC.indexOf(t)>-1||/[A-Z]/.test(t))}const Xl={};function NC(t){Object.assign(Xl,t)}const la=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ms=new Set(la);function ux(t,{layout:e,layoutId:r}){return Ms.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Xl[t]||t==="opacity")}const tr=t=>!!(t&&t.getVelocity),kC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},EC=la.length;function PC(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},s,a){let l="";for(let u=0;u<EC;u++){const d=la[u];if(t[d]!==void 0){const h=kC[d]||d;l+=`${h}(${t[d]}) `}}return e&&!t.z&&(l+="translateZ(0)"),l=l.trim(),a?l=a(t,s?"":l):r&&s&&(l="none"),l}const dx=t=>e=>typeof e=="string"&&e.startsWith(t),fx=dx("--"),df=dx("var(--"),TC=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,AC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Yn=(t,e,r)=>Math.min(Math.max(r,t),e),Ds={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vo={...Ds,transform:t=>Yn(0,1,t)},Ol={...Ds,default:1},zo=t=>Math.round(t*1e5)/1e5,wc=/(-)?([\d]*\.?[\d])+/g,hx=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,RC=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ca(t){return typeof t=="string"}const ua=t=>({test:e=>ca(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),qn=ua("deg"),Kr=ua("%"),Fe=ua("px"),OC=ua("vh"),MC=ua("vw"),Bg={...Kr,parse:t=>Kr.parse(t)/100,transform:t=>Kr.transform(t*100)},Vg={...Ds,transform:Math.round},mx={borderWidth:Fe,borderTopWidth:Fe,borderRightWidth:Fe,borderBottomWidth:Fe,borderLeftWidth:Fe,borderRadius:Fe,radius:Fe,borderTopLeftRadius:Fe,borderTopRightRadius:Fe,borderBottomRightRadius:Fe,borderBottomLeftRadius:Fe,width:Fe,maxWidth:Fe,height:Fe,maxHeight:Fe,size:Fe,top:Fe,right:Fe,bottom:Fe,left:Fe,padding:Fe,paddingTop:Fe,paddingRight:Fe,paddingBottom:Fe,paddingLeft:Fe,margin:Fe,marginTop:Fe,marginRight:Fe,marginBottom:Fe,marginLeft:Fe,rotate:qn,rotateX:qn,rotateY:qn,rotateZ:qn,scale:Ol,scaleX:Ol,scaleY:Ol,scaleZ:Ol,skew:qn,skewX:qn,skewY:qn,distance:Fe,translateX:Fe,translateY:Fe,translateZ:Fe,x:Fe,y:Fe,z:Fe,perspective:Fe,transformPerspective:Fe,opacity:Vo,originX:Bg,originY:Bg,originZ:Fe,zIndex:Vg,fillOpacity:Vo,strokeOpacity:Vo,numOctaves:Vg};function nh(t,e,r,s){const{style:a,vars:l,transform:u,transformOrigin:d}=t;let h=!1,m=!1,p=!0;for(const g in e){const v=e[g];if(fx(g)){l[g]=v;continue}const b=mx[g],_=AC(v,b);if(Ms.has(g)){if(h=!0,u[g]=_,!p)continue;v!==(b.default||0)&&(p=!1)}else g.startsWith("origin")?(m=!0,d[g]=_):a[g]=_}if(e.transform||(h||s?a.transform=PC(t.transform,r,p,s):a.transform&&(a.transform="none")),m){const{originX:g="50%",originY:v="50%",originZ:b=0}=d;a.transformOrigin=`${g} ${v} ${b}`}}const sh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function px(t,e,r){for(const s in e)!tr(e[s])&&!ux(s,r)&&(t[s]=e[s])}function DC({transformTemplate:t},e,r){return w.useMemo(()=>{const s=sh();return nh(s,e,{enableHardwareAcceleration:!r},t),Object.assign({},s.vars,s.style)},[e])}function IC(t,e,r){const s=t.style||{},a={};return px(a,s,t),Object.assign(a,DC(t,e,r)),t.transformValues?t.transformValues(a):a}function LC(t,e,r){const s={},a=IC(t,e,r);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=a,s}const $C=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||$C.has(t)}let gx=t=>!Zl(t);function FC(t){t&&(gx=e=>e.startsWith("on")?!Zl(e):t(e))}try{FC(require("@emotion/is-prop-valid").default)}catch{}function UC(t,e,r){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(gx(a)||r===!0&&Zl(a)||!e&&!Zl(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}function zg(t,e,r){return typeof t=="string"?t:Fe.transform(e+r*t)}function BC(t,e,r){const s=zg(e,t.x,t.width),a=zg(r,t.y,t.height);return`${s} ${a}`}const VC={offset:"stroke-dashoffset",array:"stroke-dasharray"},zC={offset:"strokeDashoffset",array:"strokeDasharray"};function qC(t,e,r=1,s=0,a=!0){t.pathLength=1;const l=a?VC:zC;t[l.offset]=Fe.transform(-s);const u=Fe.transform(e),d=Fe.transform(r);t[l.array]=`${u} ${d}`}function ih(t,{attrX:e,attrY:r,attrScale:s,originX:a,originY:l,pathLength:u,pathSpacing:d=1,pathOffset:h=0,...m},p,g,v){if(nh(t,m,p,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:_,dimensions:C}=t;b.transform&&(C&&(_.transform=b.transform),delete b.transform),C&&(a!==void 0||l!==void 0||_.transform)&&(_.transformOrigin=BC(C,a!==void 0?a:.5,l!==void 0?l:.5)),e!==void 0&&(b.x=e),r!==void 0&&(b.y=r),s!==void 0&&(b.scale=s),u!==void 0&&qC(b,u,d,h,!1)}const yx=()=>({...sh(),attrs:{}}),oh=t=>typeof t=="string"&&t.toLowerCase()==="svg";function WC(t,e,r,s){const a=w.useMemo(()=>{const l=yx();return ih(l,e,{enableHardwareAcceleration:!1},oh(s),t.transformTemplate),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};px(l,t.style,t),a.style={...l,...a.style}}return a}function HC(t=!1){return(r,s,a,{latestValues:l},u)=>{const h=(rh(r)?WC:LC)(s,l,u,r),p={...UC(s,typeof r=="string",t),...h,ref:a},{children:g}=s,v=w.useMemo(()=>tr(g)?g.get():g,[g]);return w.createElement(r,{...p,children:v})}}function vx(t,{style:e,vars:r},s,a){Object.assign(t.style,e,a&&a.getProjectionStyles(s));for(const l in r)t.style.setProperty(l,r[l])}const xx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bx(t,e,r,s){vx(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(xx.has(a)?a:Xf(a),e.attrs[a])}function ah(t,e){const{style:r}=t,s={};for(const a in r)(tr(r[a])||e.style&&tr(e.style[a])||ux(a,t))&&(s[a]=r[a]);return s}function wx(t,e){const r=ah(t,e);for(const s in t)if(tr(t[s])||tr(e[s])){const a=la.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}function lh(t,e,r,s={},a={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,s,a)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,s,a)),e}function jx(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const ec=t=>Array.isArray(t),GC=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),KC=t=>ec(t)?t[t.length-1]||0:t;function Hl(t){const e=tr(t)?t.get():t;return GC(e)?e.toValue():e}function QC({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},s,a,l){const u={latestValues:YC(s,a,l,t),renderState:e()};return r&&(u.mount=d=>r(s,d,u)),u}const _x=t=>(e,r)=>{const s=w.useContext(gc),a=w.useContext(yc),l=()=>QC(t,e,s,a);return r?l():jx(l)};function YC(t,e,r,s){const a={},l=s(t,{});for(const v in l)a[v]=Hl(l[v]);let{initial:u,animate:d}=t;const h=bc(t),m=lx(t);e&&m&&!h&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let p=r?r.initial===!1:!1;p=p||u===!1;const g=p?d:u;return g&&typeof g!="boolean"&&!xc(g)&&(Array.isArray(g)?g:[g]).forEach(b=>{const _=lh(t,b);if(!_)return;const{transitionEnd:C,transition:j,...R}=_;for(const A in R){let N=R[A];if(Array.isArray(N)){const P=p?N.length-1:0;N=N[P]}N!==null&&(a[A]=N)}for(const A in C)a[A]=C[A]}),a}const xt=t=>t;class qg{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function JC(t){let e=new qg,r=new qg,s=0,a=!1,l=!1;const u=new WeakSet,d={schedule:(h,m=!1,p=!1)=>{const g=p&&a,v=g?e:r;return m&&u.add(h),v.add(h)&&g&&a&&(s=e.order.length),h},cancel:h=>{r.remove(h),u.delete(h)},process:h=>{if(a){l=!0;return}if(a=!0,[e,r]=[r,e],r.clear(),s=e.order.length,s)for(let m=0;m<s;m++){const p=e.order[m];p(h),u.has(p)&&(d.schedule(p),t())}a=!1,l&&(l=!1,d.process(h))}};return d}const Ml=["prepare","read","update","preRender","render","postRender"],XC=40;function ZC(t,e){let r=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=Ml.reduce((g,v)=>(g[v]=JC(()=>r=!0),g),{}),u=g=>l[g].process(a),d=()=>{const g=performance.now();r=!1,a.delta=s?1e3/60:Math.max(Math.min(g-a.timestamp,XC),1),a.timestamp=g,a.isProcessing=!0,Ml.forEach(u),a.isProcessing=!1,r&&e&&(s=!1,t(d))},h=()=>{r=!0,s=!0,a.isProcessing||t(d)};return{schedule:Ml.reduce((g,v)=>{const b=l[v];return g[v]=(_,C=!1,j=!1)=>(r||h(),b.schedule(_,C,j)),g},{}),cancel:g=>Ml.forEach(v=>l[v].cancel(g)),state:a,steps:l}}const{schedule:it,cancel:gn,state:Ut,steps:Td}=ZC(typeof requestAnimationFrame<"u"?requestAnimationFrame:xt,!0),e1={useVisualState:_x({scrapeMotionValuesFromProps:wx,createRenderState:yx,onMount:(t,e,{renderState:r,latestValues:s})=>{it.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),it.render(()=>{ih(r,s,{enableHardwareAcceleration:!1},oh(e.tagName),t.transformTemplate),bx(e,r)})}})},t1={useVisualState:_x({scrapeMotionValuesFromProps:ah,createRenderState:sh})};function r1(t,{forwardMotionProps:e=!1},r,s){return{...rh(t)?e1:t1,preloadedFeatures:r,useRender:HC(e),createVisualElement:s,Component:t}}function fn(t,e,r,s={passive:!0}){return t.addEventListener(e,r,s),()=>t.removeEventListener(e,r)}const Cx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function jc(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const n1=t=>e=>Cx(e)&&t(e,jc(e));function hn(t,e,r,s){return fn(t,e,n1(r),s)}const s1=(t,e)=>r=>e(t(r)),Qn=(...t)=>t.reduce(s1);function Sx(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const Wg=Sx("dragHorizontal"),Hg=Sx("dragVertical");function Nx(t){let e=!1;if(t==="y")e=Hg();else if(t==="x")e=Wg();else{const r=Wg(),s=Hg();r&&s?e=()=>{r(),s()}:(r&&r(),s&&s())}return e}function kx(){const t=Nx(!0);return t?(t(),!1):!0}class es{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Gg(t,e){const r="pointer"+(e?"enter":"leave"),s="onHover"+(e?"Start":"End"),a=(l,u)=>{if(l.pointerType==="touch"||kx())return;const d=t.getProps();t.animationState&&d.whileHover&&t.animationState.setActive("whileHover",e),d[s]&&it.update(()=>d[s](l,u))};return hn(t.current,r,a,{passive:!t.getProps()[s]})}class i1 extends es{mount(){this.unmount=Qn(Gg(this.node,!0),Gg(this.node,!1))}unmount(){}}class o1 extends es{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qn(fn(this.node.current,"focus",()=>this.onFocus()),fn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Ex=(t,e)=>e?t===e?!0:Ex(t,e.parentElement):!1;function Ad(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,jc(r))}class a1 extends es{constructor(){super(...arguments),this.removeStartListeners=xt,this.removeEndListeners=xt,this.removeAccessibleListeners=xt,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),l=hn(window,"pointerup",(d,h)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:p,globalTapTarget:g}=this.node.getProps();it.update(()=>{!g&&!Ex(this.node.current,d.target)?p&&p(d,h):m&&m(d,h)})},{passive:!(s.onTap||s.onPointerUp)}),u=hn(window,"pointercancel",(d,h)=>this.cancelPress(d,h),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Qn(l,u),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=l=>{if(l.key!=="Enter"||this.isPressing)return;const u=d=>{d.key!=="Enter"||!this.checkPressEnd()||Ad("up",(h,m)=>{const{onTap:p}=this.node.getProps();p&&it.update(()=>p(h,m))})};this.removeEndListeners(),this.removeEndListeners=fn(this.node.current,"keyup",u),Ad("down",(d,h)=>{this.startPress(d,h)})},r=fn(this.node.current,"keydown",e),s=()=>{this.isPressing&&Ad("cancel",(l,u)=>this.cancelPress(l,u))},a=fn(this.node.current,"blur",s);this.removeAccessibleListeners=Qn(r,a)}}startPress(e,r){this.isPressing=!0;const{onTapStart:s,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&it.update(()=>s(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!kx()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&it.update(()=>s(e,r))}mount(){const e=this.node.getProps(),r=hn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),s=fn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Qn(r,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ff=new WeakMap,Rd=new WeakMap,l1=t=>{const e=ff.get(t.target);e&&e(t)},c1=t=>{t.forEach(l1)};function u1({root:t,...e}){const r=t||document;Rd.has(r)||Rd.set(r,{});const s=Rd.get(r),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(c1,{root:t,...e})),s[a]}function d1(t,e,r){const s=u1(e);return ff.set(t,r),s.observe(t),()=>{ff.delete(t),s.unobserve(t)}}const f1={some:0,all:1};class h1 extends es{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:s,amount:a="some",once:l}=e,u={root:r?r.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:f1[a]},d=h=>{const{isIntersecting:m}=h;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),v=m?p:g;v&&v(h)};return d1(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(m1(e,r))&&this.startObserver()}unmount(){}}function m1({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const p1={inView:{Feature:h1},tap:{Feature:a1},focus:{Feature:o1},hover:{Feature:i1}};function Px(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let s=0;s<r;s++)if(e[s]!==t[s])return!1;return!0}function g1(t){const e={};return t.values.forEach((r,s)=>e[s]=r.get()),e}function y1(t){const e={};return t.values.forEach((r,s)=>e[s]=r.getVelocity()),e}function _c(t,e,r){const s=t.getProps();return lh(s,e,r!==void 0?r:s.custom,g1(t),y1(t))}let ch=xt;const Ps=t=>t*1e3,mn=t=>t/1e3,v1={current:!1},Tx=t=>Array.isArray(t)&&typeof t[0]=="number";function Ax(t){return!!(!t||typeof t=="string"&&Rx[t]||Tx(t)||Array.isArray(t)&&t.every(Ax))}const Fo=([t,e,r,s])=>`cubic-bezier(${t}, ${e}, ${r}, ${s})`,Rx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fo([0,.65,.55,1]),circOut:Fo([.55,0,1,.45]),backIn:Fo([.31,.01,.66,-.59]),backOut:Fo([.33,1.53,.69,.99])};function Ox(t){if(t)return Tx(t)?Fo(t):Array.isArray(t)?t.map(Ox):Rx[t]}function x1(t,e,r,{delay:s=0,duration:a,repeat:l=0,repeatType:u="loop",ease:d,times:h}={}){const m={[e]:r};h&&(m.offset=h);const p=Ox(d);return Array.isArray(p)&&(m.easing=p),t.animate(m,{delay:s,duration:a,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"})}function b1(t,{repeat:e,repeatType:r="loop"}){const s=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[s]}const Mx=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,w1=1e-7,j1=12;function _1(t,e,r,s,a){let l,u,d=0;do u=e+(r-e)/2,l=Mx(u,s,a)-t,l>0?r=u:e=u;while(Math.abs(l)>w1&&++d<j1);return u}function da(t,e,r,s){if(t===e&&r===s)return xt;const a=l=>_1(l,0,1,t,r);return l=>l===0||l===1?l:Mx(a(l),e,s)}const C1=da(.42,0,1,1),S1=da(0,0,.58,1),Dx=da(.42,0,.58,1),N1=t=>Array.isArray(t)&&typeof t[0]!="number",Ix=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Lx=t=>e=>1-t(1-e),uh=t=>1-Math.sin(Math.acos(t)),$x=Lx(uh),k1=Ix(uh),Fx=da(.33,1.53,.69,.99),dh=Lx(Fx),E1=Ix(dh),P1=t=>(t*=2)<1?.5*dh(t):.5*(2-Math.pow(2,-10*(t-1))),T1={linear:xt,easeIn:C1,easeInOut:Dx,easeOut:S1,circIn:uh,circInOut:k1,circOut:$x,backIn:dh,backInOut:E1,backOut:Fx,anticipate:P1},Kg=t=>{if(Array.isArray(t)){ch(t.length===4);const[e,r,s,a]=t;return da(e,r,s,a)}else if(typeof t=="string")return T1[t];return t},fh=(t,e)=>r=>!!(ca(r)&&RC.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),Ux=(t,e,r)=>s=>{if(!ca(s))return s;const[a,l,u,d]=s.match(wc);return{[t]:parseFloat(a),[e]:parseFloat(l),[r]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},A1=t=>Yn(0,255,t),Od={...Ds,transform:t=>Math.round(A1(t))},Ss={test:fh("rgb","red"),parse:Ux("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:s=1})=>"rgba("+Od.transform(t)+", "+Od.transform(e)+", "+Od.transform(r)+", "+zo(Vo.transform(s))+")"};function R1(t){let e="",r="",s="",a="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,r+=r,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const hf={test:fh("#"),parse:R1,transform:Ss.transform},Pi={test:fh("hsl","hue"),parse:Ux("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:s=1})=>"hsla("+Math.round(t)+", "+Kr.transform(zo(e))+", "+Kr.transform(zo(r))+", "+zo(Vo.transform(s))+")"},zt={test:t=>Ss.test(t)||hf.test(t)||Pi.test(t),parse:t=>Ss.test(t)?Ss.parse(t):Pi.test(t)?Pi.parse(t):hf.parse(t),transform:t=>ca(t)?t:t.hasOwnProperty("red")?Ss.transform(t):Pi.transform(t)},pt=(t,e,r)=>-r*t+r*e+t;function Md(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function O1({hue:t,saturation:e,lightness:r,alpha:s}){t/=360,e/=100,r/=100;let a=0,l=0,u=0;if(!e)a=l=u=r;else{const d=r<.5?r*(1+e):r+e-r*e,h=2*r-d;a=Md(h,d,t+1/3),l=Md(h,d,t),u=Md(h,d,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:s}}const Dd=(t,e,r)=>{const s=t*t;return Math.sqrt(Math.max(0,r*(e*e-s)+s))},M1=[hf,Ss,Pi],D1=t=>M1.find(e=>e.test(t));function Qg(t){const e=D1(t);let r=e.parse(t);return e===Pi&&(r=O1(r)),r}const Bx=(t,e)=>{const r=Qg(t),s=Qg(e),a={...r};return l=>(a.red=Dd(r.red,s.red,l),a.green=Dd(r.green,s.green,l),a.blue=Dd(r.blue,s.blue,l),a.alpha=pt(r.alpha,s.alpha,l),Ss.transform(a))};function I1(t){var e,r;return isNaN(t)&&ca(t)&&(((e=t.match(wc))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(hx))===null||r===void 0?void 0:r.length)||0)>0}const Vx={regex:TC,countKey:"Vars",token:"${v}",parse:xt},zx={regex:hx,countKey:"Colors",token:"${c}",parse:zt.parse},qx={regex:wc,countKey:"Numbers",token:"${n}",parse:Ds.parse};function Id(t,{regex:e,countKey:r,token:s,parse:a}){const l=t.tokenised.match(e);l&&(t["num"+r]=l.length,t.tokenised=t.tokenised.replace(e,s),t.values.push(...l.map(a)))}function tc(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Id(r,Vx),Id(r,zx),Id(r,qx),r}function Wx(t){return tc(t).values}function Hx(t){const{values:e,numColors:r,numVars:s,tokenised:a}=tc(t),l=e.length;return u=>{let d=a;for(let h=0;h<l;h++)h<s?d=d.replace(Vx.token,u[h]):h<s+r?d=d.replace(zx.token,zt.transform(u[h])):d=d.replace(qx.token,zo(u[h]));return d}}const L1=t=>typeof t=="number"?0:t;function $1(t){const e=Wx(t);return Hx(t)(e.map(L1))}const Jn={test:I1,parse:Wx,createTransformer:Hx,getAnimatableNone:$1},Gx=(t,e)=>r=>`${r>0?e:t}`;function Kx(t,e){return typeof t=="number"?r=>pt(t,e,r):zt.test(t)?Bx(t,e):t.startsWith("var(")?Gx(t,e):Yx(t,e)}const Qx=(t,e)=>{const r=[...t],s=r.length,a=t.map((l,u)=>Kx(l,e[u]));return l=>{for(let u=0;u<s;u++)r[u]=a[u](l);return r}},F1=(t,e)=>{const r={...t,...e},s={};for(const a in r)t[a]!==void 0&&e[a]!==void 0&&(s[a]=Kx(t[a],e[a]));return a=>{for(const l in s)r[l]=s[l](a);return r}},Yx=(t,e)=>{const r=Jn.createTransformer(e),s=tc(t),a=tc(e);return s.numVars===a.numVars&&s.numColors===a.numColors&&s.numNumbers>=a.numNumbers?Qn(Qx(s.values,a.values),r):Gx(t,e)},ea=(t,e,r)=>{const s=e-t;return s===0?1:(r-t)/s},Yg=(t,e)=>r=>pt(t,e,r);function U1(t){return typeof t=="number"?Yg:typeof t=="string"?zt.test(t)?Bx:Yx:Array.isArray(t)?Qx:typeof t=="object"?F1:Yg}function B1(t,e,r){const s=[],a=r||U1(t[0]),l=t.length-1;for(let u=0;u<l;u++){let d=a(t[u],t[u+1]);if(e){const h=Array.isArray(e)?e[u]||xt:e;d=Qn(h,d)}s.push(d)}return s}function Jx(t,e,{clamp:r=!0,ease:s,mixer:a}={}){const l=t.length;if(ch(l===e.length),l===1)return()=>e[0];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=B1(e,s,a),d=u.length,h=m=>{let p=0;if(d>1)for(;p<t.length-2&&!(m<t[p+1]);p++);const g=ea(t[p],t[p+1],m);return u[p](g)};return r?m=>h(Yn(t[0],t[l-1],m)):h}function V1(t,e){const r=t[t.length-1];for(let s=1;s<=e;s++){const a=ea(0,e,s);t.push(pt(r,1,a))}}function z1(t){const e=[0];return V1(e,t.length-1),e}function q1(t,e){return t.map(r=>r*e)}function W1(t,e){return t.map(()=>e||Dx).splice(0,t.length-1)}function rc({duration:t=300,keyframes:e,times:r,ease:s="easeInOut"}){const a=N1(s)?s.map(Kg):Kg(s),l={done:!1,value:e[0]},u=q1(r&&r.length===e.length?r:z1(e),t),d=Jx(u,e,{ease:Array.isArray(a)?a:W1(e,a)});return{calculatedDuration:t,next:h=>(l.value=d(h),l.done=h>=t,l)}}function Xx(t,e){return e?t*(1e3/e):0}const H1=5;function Zx(t,e,r){const s=Math.max(e-H1,0);return Xx(r-t(s),e-s)}const Ld=.001,G1=.01,K1=10,Q1=.05,Y1=1;function J1({duration:t=800,bounce:e=.25,velocity:r=0,mass:s=1}){let a,l,u=1-e;u=Yn(Q1,Y1,u),t=Yn(G1,K1,mn(t)),u<1?(a=m=>{const p=m*u,g=p*t,v=p-r,b=mf(m,u),_=Math.exp(-g);return Ld-v/b*_},l=m=>{const g=m*u*t,v=g*r+r,b=Math.pow(u,2)*Math.pow(m,2)*t,_=Math.exp(-g),C=mf(Math.pow(m,2),u);return(-a(m)+Ld>0?-1:1)*((v-b)*_)/C}):(a=m=>{const p=Math.exp(-m*t),g=(m-r)*t+1;return-Ld+p*g},l=m=>{const p=Math.exp(-m*t),g=(r-m)*(t*t);return p*g});const d=5/t,h=Z1(a,l,d);if(t=Ps(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const m=Math.pow(h,2)*s;return{stiffness:m,damping:u*2*Math.sqrt(s*m),duration:t}}}const X1=12;function Z1(t,e,r){let s=r;for(let a=1;a<X1;a++)s=s-t(s)/e(s);return s}function mf(t,e){return t*Math.sqrt(1-e*e)}const eS=["duration","bounce"],tS=["stiffness","damping","mass"];function Jg(t,e){return e.some(r=>t[r]!==void 0)}function rS(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Jg(t,tS)&&Jg(t,eS)){const r=J1(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function e0({keyframes:t,restDelta:e,restSpeed:r,...s}){const a=t[0],l=t[t.length-1],u={done:!1,value:a},{stiffness:d,damping:h,mass:m,duration:p,velocity:g,isResolvedFromDuration:v}=rS({...s,velocity:-mn(s.velocity||0)}),b=g||0,_=h/(2*Math.sqrt(d*m)),C=l-a,j=mn(Math.sqrt(d/m)),R=Math.abs(C)<5;r||(r=R?.01:2),e||(e=R?.005:.5);let A;if(_<1){const N=mf(j,_);A=P=>{const D=Math.exp(-_*j*P);return l-D*((b+_*j*C)/N*Math.sin(N*P)+C*Math.cos(N*P))}}else if(_===1)A=N=>l-Math.exp(-j*N)*(C+(b+j*C)*N);else{const N=j*Math.sqrt(_*_-1);A=P=>{const D=Math.exp(-_*j*P),M=Math.min(N*P,300);return l-D*((b+_*j*C)*Math.sinh(M)+N*C*Math.cosh(M))/N}}return{calculatedDuration:v&&p||null,next:N=>{const P=A(N);if(v)u.done=N>=p;else{let D=b;N!==0&&(_<1?D=Zx(A,N,P):D=0);const M=Math.abs(D)<=r,L=Math.abs(l-P)<=e;u.done=M&&L}return u.value=u.done?l:P,u}}}function Xg({keyframes:t,velocity:e=0,power:r=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:u,min:d,max:h,restDelta:m=.5,restSpeed:p}){const g=t[0],v={done:!1,value:g},b=Q=>d!==void 0&&Q<d||h!==void 0&&Q>h,_=Q=>d===void 0?h:h===void 0||Math.abs(d-Q)<Math.abs(h-Q)?d:h;let C=r*e;const j=g+C,R=u===void 0?j:u(j);R!==j&&(C=R-g);const A=Q=>-C*Math.exp(-Q/s),N=Q=>R+A(Q),P=Q=>{const re=A(Q),B=N(Q);v.done=Math.abs(re)<=m,v.value=v.done?R:B};let D,M;const L=Q=>{b(v.value)&&(D=Q,M=e0({keyframes:[v.value,_(v.value)],velocity:Zx(N,Q,v.value),damping:a,stiffness:l,restDelta:m,restSpeed:p}))};return L(0),{calculatedDuration:null,next:Q=>{let re=!1;return!M&&D===void 0&&(re=!0,P(Q),L(Q)),D!==void 0&&Q>D?M.next(Q-D):(!re&&P(Q),v)}}}const nS=t=>{const e=({timestamp:r})=>t(r);return{start:()=>it.update(e,!0),stop:()=>gn(e),now:()=>Ut.isProcessing?Ut.timestamp:performance.now()}},Zg=2e4;function ey(t){let e=0;const r=50;let s=t.next(e);for(;!s.done&&e<Zg;)e+=r,s=t.next(e);return e>=Zg?1/0:e}const sS={decay:Xg,inertia:Xg,tween:rc,keyframes:rc,spring:e0};function nc({autoplay:t=!0,delay:e=0,driver:r=nS,keyframes:s,type:a="keyframes",repeat:l=0,repeatDelay:u=0,repeatType:d="loop",onPlay:h,onStop:m,onComplete:p,onUpdate:g,...v}){let b=1,_=!1,C,j;const R=()=>{j=new Promise(E=>{C=E})};R();let A;const N=sS[a]||rc;let P;N!==rc&&typeof s[0]!="number"&&(P=Jx([0,100],s,{clamp:!1}),s=[0,100]);const D=N({...v,keyframes:s});let M;d==="mirror"&&(M=N({...v,keyframes:[...s].reverse(),velocity:-(v.velocity||0)}));let L="idle",Q=null,re=null,B=null;D.calculatedDuration===null&&l&&(D.calculatedDuration=ey(D));const{calculatedDuration:ye}=D;let ne=1/0,we=1/0;ye!==null&&(ne=ye+u,we=ne*(l+1)-u);let H=0;const ce=E=>{if(re===null)return;b>0&&(re=Math.min(re,E)),b<0&&(re=Math.min(E-we/b,re)),Q!==null?H=Q:H=Math.round(E-re)*b;const I=H-e*(b>=0?1:-1),X=b>=0?I<0:I>we;H=Math.max(I,0),L==="finished"&&Q===null&&(H=we);let le=H,be=D;if(l){const Oe=Math.min(H,we)/ne;let Y=Math.floor(Oe),K=Oe%1;!K&&Oe>=1&&(K=1),K===1&&Y--,Y=Math.min(Y,l+1),!!(Y%2)&&(d==="reverse"?(K=1-K,u&&(K-=u/ne)):d==="mirror"&&(be=M)),le=Yn(0,1,K)*ne}const Ce=X?{done:!1,value:s[0]}:be.next(le);P&&(Ce.value=P(Ce.value));let{done:ue}=Ce;!X&&ye!==null&&(ue=b>=0?H>=we:H<=0);const Ne=Q===null&&(L==="finished"||L==="running"&&ue);return g&&g(Ce.value),Ne&&V(),Ce},G=()=>{A&&A.stop(),A=void 0},ae=()=>{L="idle",G(),C(),R(),re=B=null},V=()=>{L="finished",p&&p(),G(),C()},oe=()=>{if(_)return;A||(A=r(ce));const E=A.now();h&&h(),Q!==null?re=E-Q:(!re||L==="finished")&&(re=E),L==="finished"&&R(),B=re,Q=null,L="running",A.start()};t&&oe();const ie={then(E,I){return j.then(E,I)},get time(){return mn(H)},set time(E){E=Ps(E),H=E,Q!==null||!A||b===0?Q=E:re=A.now()-E/b},get duration(){const E=D.calculatedDuration===null?ey(D):D.calculatedDuration;return mn(E)},get speed(){return b},set speed(E){E===b||!A||(b=E,ie.time=mn(H))},get state(){return L},play:oe,pause:()=>{L="paused",Q=H},stop:()=>{_=!0,L!=="idle"&&(L="idle",m&&m(),ae())},cancel:()=>{B!==null&&ce(B),ae()},complete:()=>{L="finished"},sample:E=>(re=0,ce(E))};return ie}function iS(t){let e;return()=>(e===void 0&&(e=t()),e)}const oS=iS(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),aS=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Dl=10,lS=2e4,cS=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Ax(e.ease);function uS(t,e,{onUpdate:r,onComplete:s,...a}){if(!(oS()&&aS.has(e)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let u=!1,d,h,m=!1;const p=()=>{h=new Promise(N=>{d=N})};p();let{keyframes:g,duration:v=300,ease:b,times:_}=a;if(cS(e,a)){const N=nc({...a,repeat:0,delay:0});let P={done:!1,value:g[0]};const D=[];let M=0;for(;!P.done&&M<lS;)P=N.sample(M),D.push(P.value),M+=Dl;_=void 0,g=D,v=M-Dl,b="linear"}const C=x1(t.owner.current,e,g,{...a,duration:v,ease:b,times:_}),j=()=>{m=!1,C.cancel()},R=()=>{m=!0,it.update(j),d(),p()};return C.onfinish=()=>{m||(t.set(b1(g,a)),s&&s(),R())},{then(N,P){return h.then(N,P)},attachTimeline(N){return C.timeline=N,C.onfinish=null,xt},get time(){return mn(C.currentTime||0)},set time(N){C.currentTime=Ps(N)},get speed(){return C.playbackRate},set speed(N){C.playbackRate=N},get duration(){return mn(v)},play:()=>{u||(C.play(),gn(j))},pause:()=>C.pause(),stop:()=>{if(u=!0,C.playState==="idle")return;const{currentTime:N}=C;if(N){const P=nc({...a,autoplay:!1});t.setWithVelocity(P.sample(N-Dl).value,P.sample(N).value,Dl)}R()},complete:()=>{m||C.finish()},cancel:R}}function dS({keyframes:t,delay:e,onUpdate:r,onComplete:s}){const a=()=>(r&&r(t[t.length-1]),s&&s(),{time:0,speed:1,duration:0,play:xt,pause:xt,stop:xt,then:l=>(l(),Promise.resolve()),cancel:xt,complete:xt});return e?nc({keyframes:[0,1],duration:0,delay:e,onComplete:a}):a()}const fS={type:"spring",stiffness:500,damping:25,restSpeed:10},hS=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),mS={type:"keyframes",duration:.8},pS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},gS=(t,{keyframes:e})=>e.length>2?mS:Ms.has(t)?t.startsWith("scale")?hS(e[1]):fS:pS,pf=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Jn.test(e)||e==="0")&&!e.startsWith("url(")),yS=new Set(["brightness","contrast","saturate","opacity"]);function vS(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=r.match(wc)||[];if(!s)return t;const a=r.replace(s,"");let l=yS.has(e)?1:0;return s!==r&&(l*=100),e+"("+l+a+")"}const xS=/([a-z-]*)\(.*?\)/g,gf={...Jn,getAnimatableNone:t=>{const e=t.match(xS);return e?e.map(vS).join(" "):t}},bS={...mx,color:zt,backgroundColor:zt,outlineColor:zt,fill:zt,stroke:zt,borderColor:zt,borderTopColor:zt,borderRightColor:zt,borderBottomColor:zt,borderLeftColor:zt,filter:gf,WebkitFilter:gf},hh=t=>bS[t];function t0(t,e){let r=hh(t);return r!==gf&&(r=Jn),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const r0=t=>/^0[^.\s]+$/.test(t);function wS(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||r0(t)}function jS(t,e,r,s){const a=pf(e,r);let l;Array.isArray(r)?l=[...r]:l=[null,r];const u=s.from!==void 0?s.from:t.get();let d;const h=[];for(let m=0;m<l.length;m++)l[m]===null&&(l[m]=m===0?u:l[m-1]),wS(l[m])&&h.push(m),typeof l[m]=="string"&&l[m]!=="none"&&l[m]!=="0"&&(d=l[m]);if(a&&h.length&&d)for(let m=0;m<h.length;m++){const p=h[m];l[p]=t0(e,d)}return l}function _S({when:t,delay:e,delayChildren:r,staggerChildren:s,staggerDirection:a,repeat:l,repeatType:u,repeatDelay:d,from:h,elapsed:m,...p}){return!!Object.keys(p).length}function mh(t,e){return t[e]||t.default||t}const CS={skipAnimations:!1},ph=(t,e,r,s={})=>a=>{const l=mh(s,t)||{},u=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-Ps(u);const h=jS(e,t,r,l),m=h[0],p=h[h.length-1],g=pf(t,m),v=pf(t,p);let b={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...l,delay:-d,onUpdate:_=>{e.set(_),l.onUpdate&&l.onUpdate(_)},onComplete:()=>{a(),l.onComplete&&l.onComplete()}};if(_S(l)||(b={...b,...gS(t,b)}),b.duration&&(b.duration=Ps(b.duration)),b.repeatDelay&&(b.repeatDelay=Ps(b.repeatDelay)),!g||!v||v1.current||l.type===!1||CS.skipAnimations)return dS(b);if(!s.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const _=uS(e,t,b);if(_)return _}return nc(b)};function sc(t){return!!(tr(t)&&t.add)}const n0=t=>/^\-?\d*\.?\d+$/.test(t);function gh(t,e){t.indexOf(e)===-1&&t.push(e)}function yh(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class vh{constructor(){this.subscriptions=[]}add(e){return gh(this.subscriptions,e),()=>yh(this.subscriptions,e)}notify(e,r,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,r,s);else for(let l=0;l<a;l++){const u=this.subscriptions[l];u&&u(e,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const SS=t=>!isNaN(parseFloat(t));class NS{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,a=!0)=>{this.prev=this.current,this.current=s;const{delta:l,timestamp:u}=Ut;this.lastUpdated!==u&&(this.timeDelta=l,this.lastUpdated=u,it.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>it.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=SS(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new vh);const s=this.events[e].add(r);return e==="change"?()=>{s(),it.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,s){this.set(r),this.prev=e,this.timeDelta=s}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Xx(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Di(t,e){return new NS(t,e)}const s0=t=>e=>e.test(t),kS={test:t=>t==="auto",parse:t=>t},i0=[Ds,Fe,Kr,qn,MC,OC,kS],To=t=>i0.find(s0(t)),ES=[...i0,zt,Jn],PS=t=>ES.find(s0(t));function TS(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Di(r))}function AS(t,e){const r=_c(t,e);let{transitionEnd:s={},transition:a={},...l}=r?t.makeTargetAnimatable(r,!1):{};l={...l,...s};for(const u in l){const d=KC(l[u]);TS(t,u,d)}}function RS(t,e,r){var s,a;const l=Object.keys(e).filter(d=>!t.hasValue(d)),u=l.length;if(u)for(let d=0;d<u;d++){const h=l[d],m=e[h];let p=null;Array.isArray(m)&&(p=m[0]),p===null&&(p=(a=(s=r[h])!==null&&s!==void 0?s:t.readValue(h))!==null&&a!==void 0?a:e[h]),p!=null&&(typeof p=="string"&&(n0(p)||r0(p))?p=parseFloat(p):!PS(p)&&Jn.test(m)&&(p=t0(h,m)),t.addValue(h,Di(p,{owner:t})),r[h]===void 0&&(r[h]=p),p!==null&&t.setBaseTarget(h,p))}}function OS(t,e){return e?(e[t]||e.default||e).from:void 0}function MS(t,e,r){const s={};for(const a in t){const l=OS(a,e);if(l!==void 0)s[a]=l;else{const u=r.getValue(a);u&&(s[a]=u.get())}}return s}function DS({protectedKeys:t,needsAnimating:e},r){const s=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,s}function IS(t,e){const r=t.get();if(Array.isArray(e)){for(let s=0;s<e.length;s++)if(e[s]!==r)return!0}else return r!==e}function o0(t,e,{delay:r=0,transitionOverride:s,type:a}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:u,...d}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");s&&(l=s);const m=[],p=a&&t.animationState&&t.animationState.getState()[a];for(const g in d){const v=t.getValue(g),b=d[g];if(!v||b===void 0||p&&DS(p,g))continue;const _={delay:r,elapsed:0,...mh(l||{},g)};if(window.HandoffAppearAnimations){const R=t.getProps()[ax];if(R){const A=window.HandoffAppearAnimations(R,g,v,it);A!==null&&(_.elapsed=A,_.isHandoff=!0)}}let C=!_.isHandoff&&!IS(v,b);if(_.type==="spring"&&(v.getVelocity()||_.velocity)&&(C=!1),v.animation&&(C=!1),C)continue;v.start(ph(g,v,b,t.shouldReduceMotion&&Ms.has(g)?{type:!1}:_));const j=v.animation;sc(h)&&(h.add(g),j.then(()=>h.remove(g))),m.push(j)}return u&&Promise.all(m).then(()=>{u&&AS(t,u)}),m}function yf(t,e,r={}){const s=_c(t,e,r.custom);let{transition:a=t.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(a=r.transitionOverride);const l=s?()=>Promise.all(o0(t,s,r)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:p,staggerDirection:g}=a;return LS(t,e,m+h,p,g,r)}:()=>Promise.resolve(),{when:d}=a;if(d){const[h,m]=d==="beforeChildren"?[l,u]:[u,l];return h().then(()=>m())}else return Promise.all([l(),u(r.delay)])}function LS(t,e,r=0,s=0,a=1,l){const u=[],d=(t.variantChildren.size-1)*s,h=a===1?(m=0)=>m*s:(m=0)=>d-m*s;return Array.from(t.variantChildren).sort($S).forEach((m,p)=>{m.notify("AnimationStart",e),u.push(yf(m,e,{...l,delay:r+h(p)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(u)}function $S(t,e){return t.sortNodePosition(e)}function FS(t,e,r={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(l=>yf(t,l,r));s=Promise.all(a)}else if(typeof e=="string")s=yf(t,e,r);else{const a=typeof e=="function"?_c(t,e,r.custom):e;s=Promise.all(o0(t,a,r))}return s.then(()=>t.notify("AnimationComplete",e))}const US=[...Zf].reverse(),BS=Zf.length;function VS(t){return e=>Promise.all(e.map(({animation:r,options:s})=>FS(t,r,s)))}function zS(t){let e=VS(t);const r=WS();let s=!0;const a=(h,m)=>{const p=_c(t,m);if(p){const{transition:g,transitionEnd:v,...b}=p;h={...h,...b,...v}}return h};function l(h){e=h(t)}function u(h,m){const p=t.getProps(),g=t.getVariantContext(!0)||{},v=[],b=new Set;let _={},C=1/0;for(let R=0;R<BS;R++){const A=US[R],N=r[A],P=p[A]!==void 0?p[A]:g[A],D=Xo(P),M=A===m?N.isActive:null;M===!1&&(C=R);let L=P===g[A]&&P!==p[A]&&D;if(L&&s&&t.manuallyAnimateOnMount&&(L=!1),N.protectedKeys={..._},!N.isActive&&M===null||!P&&!N.prevProp||xc(P)||typeof P=="boolean")continue;let re=qS(N.prevProp,P)||A===m&&N.isActive&&!L&&D||R>C&&D,B=!1;const ye=Array.isArray(P)?P:[P];let ne=ye.reduce(a,{});M===!1&&(ne={});const{prevResolvedValues:we={}}=N,H={...we,...ne},ce=G=>{re=!0,b.has(G)&&(B=!0,b.delete(G)),N.needsAnimating[G]=!0};for(const G in H){const ae=ne[G],V=we[G];if(_.hasOwnProperty(G))continue;let oe=!1;ec(ae)&&ec(V)?oe=!Px(ae,V):oe=ae!==V,oe?ae!==void 0?ce(G):b.add(G):ae!==void 0&&b.has(G)?ce(G):N.protectedKeys[G]=!0}N.prevProp=P,N.prevResolvedValues=ne,N.isActive&&(_={..._,...ne}),s&&t.blockInitialAnimation&&(re=!1),re&&(!L||B)&&v.push(...ye.map(G=>({animation:G,options:{type:A,...h}})))}if(b.size){const R={};b.forEach(A=>{const N=t.getBaseTarget(A);N!==void 0&&(R[A]=N)}),v.push({animation:R})}let j=!!v.length;return s&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(j=!1),s=!1,j?e(v):Promise.resolve()}function d(h,m,p){var g;if(r[h].isActive===m)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(b=>{var _;return(_=b.animationState)===null||_===void 0?void 0:_.setActive(h,m)}),r[h].isActive=m;const v=u(p,h);for(const b in r)r[b].protectedKeys={};return v}return{animateChanges:u,setActive:d,setAnimateFunction:l,getState:()=>r}}function qS(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Px(e,t):!1}function ys(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function WS(){return{animate:ys(!0),whileInView:ys(),whileHover:ys(),whileTap:ys(),whileDrag:ys(),whileFocus:ys(),exit:ys()}}class HS extends es{constructor(e){super(e),e.animationState||(e.animationState=zS(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),xc(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let GS=0;class KS extends es{constructor(){super(...arguments),this.id=GS++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:s}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const l=this.node.animationState.setActive("exit",!e,{custom:s??this.node.getProps().custom});r&&!e&&l.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const QS={animation:{Feature:HS},exit:{Feature:KS}},ty=(t,e)=>Math.abs(t-e);function YS(t,e){const r=ty(t.x,e.x),s=ty(t.y,e.y);return Math.sqrt(r**2+s**2)}class a0{constructor(e,r,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Fd(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=YS(g.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:_}=g,{timestamp:C}=Ut;this.history.push({..._,timestamp:C});const{onStart:j,onMove:R}=this.handlers;v||(j&&j(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=$d(v,this.transformPagePoint),it.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:_,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Fd(g.type==="pointercancel"?this.lastMoveEventInfo:$d(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,j),_&&_(g,j)},!Cx(e))return;this.dragSnapToOrigin=l,this.handlers=r,this.transformPagePoint=s,this.contextWindow=a||window;const u=jc(e),d=$d(u,this.transformPagePoint),{point:h}=d,{timestamp:m}=Ut;this.history=[{...h,timestamp:m}];const{onSessionStart:p}=r;p&&p(e,Fd(d,this.history)),this.removeListeners=Qn(hn(this.contextWindow,"pointermove",this.handlePointerMove),hn(this.contextWindow,"pointerup",this.handlePointerUp),hn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gn(this.updatePoint)}}function $d(t,e){return e?{point:e(t.point)}:t}function ry(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Fd({point:t},e){return{point:t,delta:ry(t,l0(e)),offset:ry(t,JS(e)),velocity:XS(e,.1)}}function JS(t){return t[0]}function l0(t){return t[t.length-1]}function XS(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,s=null;const a=l0(t);for(;r>=0&&(s=t[r],!(a.timestamp-s.timestamp>Ps(e)));)r--;if(!s)return{x:0,y:0};const l=mn(a.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const u={x:(a.x-s.x)/l,y:(a.y-s.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function ur(t){return t.max-t.min}function vf(t,e=0,r=.01){return Math.abs(t-e)<=r}function ny(t,e,r,s=.5){t.origin=s,t.originPoint=pt(e.min,e.max,t.origin),t.scale=ur(r)/ur(e),(vf(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=pt(r.min,r.max,t.origin)-t.originPoint,(vf(t.translate)||isNaN(t.translate))&&(t.translate=0)}function qo(t,e,r,s){ny(t.x,e.x,r.x,s?s.originX:void 0),ny(t.y,e.y,r.y,s?s.originY:void 0)}function sy(t,e,r){t.min=r.min+e.min,t.max=t.min+ur(e)}function ZS(t,e,r){sy(t.x,e.x,r.x),sy(t.y,e.y,r.y)}function iy(t,e,r){t.min=e.min-r.min,t.max=t.min+ur(e)}function Wo(t,e,r){iy(t.x,e.x,r.x),iy(t.y,e.y,r.y)}function eN(t,{min:e,max:r},s){return e!==void 0&&t<e?t=s?pt(e,t,s.min):Math.max(t,e):r!==void 0&&t>r&&(t=s?pt(r,t,s.max):Math.min(t,r)),t}function oy(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function tN(t,{top:e,left:r,bottom:s,right:a}){return{x:oy(t.x,r,a),y:oy(t.y,e,s)}}function ay(t,e){let r=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,s]=[s,r]),{min:r,max:s}}function rN(t,e){return{x:ay(t.x,e.x),y:ay(t.y,e.y)}}function nN(t,e){let r=.5;const s=ur(t),a=ur(e);return a>s?r=ea(e.min,e.max-s,t.min):s>a&&(r=ea(t.min,t.max-a,e.min)),Yn(0,1,r)}function sN(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const xf=.35;function iN(t=xf){return t===!1?t=0:t===!0&&(t=xf),{x:ly(t,"left","right"),y:ly(t,"top","bottom")}}function ly(t,e,r){return{min:cy(t,e),max:cy(t,r)}}function cy(t,e){return typeof t=="number"?t:t[e]||0}const uy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ti=()=>({x:uy(),y:uy()}),dy=()=>({min:0,max:0}),jt=()=>({x:dy(),y:dy()});function xr(t){return[t("x"),t("y")]}function c0({top:t,left:e,right:r,bottom:s}){return{x:{min:e,max:r},y:{min:t,max:s}}}function oN({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function aN(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function Ud(t){return t===void 0||t===1}function bf({scale:t,scaleX:e,scaleY:r}){return!Ud(t)||!Ud(e)||!Ud(r)}function bs(t){return bf(t)||u0(t)||t.z||t.rotate||t.rotateX||t.rotateY}function u0(t){return fy(t.x)||fy(t.y)}function fy(t){return t&&t!=="0%"}function ic(t,e,r){const s=t-r,a=e*s;return r+a}function hy(t,e,r,s,a){return a!==void 0&&(t=ic(t,a,s)),ic(t,r,s)+e}function wf(t,e=0,r=1,s,a){t.min=hy(t.min,e,r,s,a),t.max=hy(t.max,e,r,s,a)}function d0(t,{x:e,y:r}){wf(t.x,e.translate,e.scale,e.originPoint),wf(t.y,r.translate,r.scale,r.originPoint)}function lN(t,e,r,s=!1){const a=r.length;if(!a)return;e.x=e.y=1;let l,u;for(let d=0;d<a;d++){l=r[d],u=l.projectionDelta;const h=l.instance;h&&h.style&&h.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Ai(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,d0(t,u)),s&&bs(l.latestValues)&&Ai(t,l.latestValues))}e.x=my(e.x),e.y=my(e.y)}function my(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Hn(t,e){t.min=t.min+e,t.max=t.max+e}function py(t,e,[r,s,a]){const l=e[a]!==void 0?e[a]:.5,u=pt(t.min,t.max,l);wf(t,e[r],e[s],u,e.scale)}const cN=["x","scaleX","originX"],uN=["y","scaleY","originY"];function Ai(t,e){py(t.x,e,cN),py(t.y,e,uN)}function f0(t,e){return c0(aN(t.getBoundingClientRect(),e))}function dN(t,e,r){const s=f0(t,r),{scroll:a}=e;return a&&(Hn(s.x,a.offset.x),Hn(s.y,a.offset.y)),s}const h0=({current:t})=>t?t.ownerDocument.defaultView:null,fN=new WeakMap;class hN{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(jc(p,"page").point)},l=(p,g)=>{const{drag:v,dragPropagation:b,onDragStart:_}=this.getProps();if(v&&!b&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Nx(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xr(j=>{let R=this.getAxisMotionValue(j).get()||0;if(Kr.test(R)){const{projection:A}=this.visualElement;if(A&&A.layout){const N=A.layout.layoutBox[j];N&&(R=ur(N)*(parseFloat(R)/100))}}this.originPoint[j]=R}),_&&it.update(()=>_(p,g),!1,!0);const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},u=(p,g)=>{const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:_,onDrag:C}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:j}=g;if(b&&this.currentDirection===null){this.currentDirection=mN(j),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",g.point,j),this.updateAxis("y",g.point,j),this.visualElement.render(),C&&C(p,g)},d=(p,g)=>this.stop(p,g),h=()=>xr(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new a0(e,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:h0(this.visualElement)})}stop(e,r){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&it.update(()=>l(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,s){const{drag:a}=this.getProps();if(!s||!Il(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=eN(u,this.constraints[e],this.elastic[e])),l.set(u)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,l=this.constraints;r&&Ei(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=tN(a.layoutBox,r):this.constraints=!1,this.elastic=iN(s),l!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&xr(u=>{this.getAxisMotionValue(u)&&(this.constraints[u]=sN(a.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Ei(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=dN(s,a.root,this.visualElement.getTransformPagePoint());let u=rN(a.layout.layoutBox,l);if(r){const d=r(oN(u));this.hasMutatedConstraints=!!d,d&&(u=c0(d))}return u}startAnimation(e){const{drag:r,dragMomentum:s,dragElastic:a,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},m=xr(p=>{if(!Il(p,r,this.currentDirection))return;let g=h&&h[p]||{};u&&(g={min:0,max:0});const v=a?200:1e6,b=a?40:1e7,_={type:"inertia",velocity:s?e[p]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...l,...g};return this.startAxisValueAnimation(p,_)});return Promise.all(m).then(d)}startAxisValueAnimation(e,r){const s=this.getAxisMotionValue(e);return s.start(ph(e,s,0,r))}stopAnimation(){xr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xr(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),s=this.visualElement.getProps(),a=s[r];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){xr(r=>{const{drag:s}=this.getProps();if(!Il(r,s,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(r);if(a&&a.layout){const{min:u,max:d}=a.layout.layoutBox[r];l.set(e[r]-pt(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!Ei(r)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};xr(u=>{const d=this.getAxisMotionValue(u);if(d){const h=d.get();a[u]=nN({min:h,max:h},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),xr(u=>{if(!Il(u,e,null))return;const d=this.getAxisMotionValue(u),{min:h,max:m}=this.constraints[u];d.set(pt(h,m,a[u]))})}addListeners(){if(!this.visualElement.current)return;fN.set(this.visualElement,this);const e=this.visualElement.current,r=hn(e,"pointerdown",h=>{const{drag:m,dragListener:p=!0}=this.getProps();m&&p&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();Ei(h)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),s();const u=fn(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:m})=>{this.isDragging&&m&&(xr(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=h[p].translate,g.set(g.get()+h[p].translate))}),this.visualElement.render())}));return()=>{u(),r(),l(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:u=xf,dragMomentum:d=!0}=e;return{...e,drag:r,dragDirectionLock:s,dragPropagation:a,dragConstraints:l,dragElastic:u,dragMomentum:d}}}function Il(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function mN(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class pN extends es{constructor(e){super(e),this.removeGroupControls=xt,this.removeListeners=xt,this.controls=new hN(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xt}unmount(){this.removeGroupControls(),this.removeListeners()}}const gy=t=>(e,r)=>{t&&it.update(()=>t(e,r))};class gN extends es{constructor(){super(...arguments),this.removePointerDownListener=xt}onPointerDown(e){this.session=new a0(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:h0(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:gy(e),onStart:gy(r),onMove:s,onEnd:(l,u)=>{delete this.session,a&&it.update(()=>a(l,u))}}}mount(){this.removePointerDownListener=hn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function yN(){const t=w.useContext(yc);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:s}=t,a=w.useId();return w.useEffect(()=>s(a),[]),!e&&r?[!1,()=>r&&r(a)]:[!0]}const Gl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yy(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ao={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Fe.test(t))t=parseFloat(t);else return t;const r=yy(t,e.target.x),s=yy(t,e.target.y);return`${r}% ${s}%`}},vN={correct:(t,{treeScale:e,projectionDelta:r})=>{const s=t,a=Jn.parse(t);if(a.length>5)return s;const l=Jn.createTransformer(t),u=typeof a[0]!="number"?1:0,d=r.x.scale*e.x,h=r.y.scale*e.y;a[0+u]/=d,a[1+u]/=h;const m=pt(d,h,.5);return typeof a[2+u]=="number"&&(a[2+u]/=m),typeof a[3+u]=="number"&&(a[3+u]/=m),l(a)}};class xN extends rt.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:s,layoutId:a}=this.props,{projection:l}=e;NC(bN),l&&(r.group&&r.group.add(l),s&&s.register&&a&&s.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Gl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:s,drag:a,isPresent:l}=this.props,u=s.projection;return u&&(u.isPresent=l,a||e.layoutDependency!==r||r===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?u.promote():u.relegate()||it.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function m0(t){const[e,r]=yN(),s=w.useContext(th);return rt.createElement(xN,{...t,layoutGroup:s,switchLayoutGroup:w.useContext(cx),isPresent:e,safeToRemove:r})}const bN={borderRadius:{...Ao,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ao,borderTopRightRadius:Ao,borderBottomLeftRadius:Ao,borderBottomRightRadius:Ao,boxShadow:vN},p0=["TopLeft","TopRight","BottomLeft","BottomRight"],wN=p0.length,vy=t=>typeof t=="string"?parseFloat(t):t,xy=t=>typeof t=="number"||Fe.test(t);function jN(t,e,r,s,a,l){a?(t.opacity=pt(0,r.opacity!==void 0?r.opacity:1,_N(s)),t.opacityExit=pt(e.opacity!==void 0?e.opacity:1,0,CN(s))):l&&(t.opacity=pt(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,s));for(let u=0;u<wN;u++){const d=`border${p0[u]}Radius`;let h=by(e,d),m=by(r,d);if(h===void 0&&m===void 0)continue;h||(h=0),m||(m=0),h===0||m===0||xy(h)===xy(m)?(t[d]=Math.max(pt(vy(h),vy(m),s),0),(Kr.test(m)||Kr.test(h))&&(t[d]+="%")):t[d]=m}(e.rotate||r.rotate)&&(t.rotate=pt(e.rotate||0,r.rotate||0,s))}function by(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const _N=g0(0,.5,$x),CN=g0(.5,.95,xt);function g0(t,e,r){return s=>s<t?0:s>e?1:r(ea(t,e,s))}function wy(t,e){t.min=e.min,t.max=e.max}function yr(t,e){wy(t.x,e.x),wy(t.y,e.y)}function jy(t,e,r,s,a){return t-=e,t=ic(t,1/r,s),a!==void 0&&(t=ic(t,1/a,s)),t}function SN(t,e=0,r=1,s=.5,a,l=t,u=t){if(Kr.test(e)&&(e=parseFloat(e),e=pt(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=pt(l.min,l.max,s);t===l&&(d-=e),t.min=jy(t.min,e,r,d,a),t.max=jy(t.max,e,r,d,a)}function _y(t,e,[r,s,a],l,u){SN(t,e[r],e[s],e[a],e.scale,l,u)}const NN=["x","scaleX","originX"],kN=["y","scaleY","originY"];function Cy(t,e,r,s){_y(t.x,e,NN,r?r.x:void 0,s?s.x:void 0),_y(t.y,e,kN,r?r.y:void 0,s?s.y:void 0)}function Sy(t){return t.translate===0&&t.scale===1}function y0(t){return Sy(t.x)&&Sy(t.y)}function EN(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function v0(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Ny(t){return ur(t.x)/ur(t.y)}class PN{constructor(){this.members=[]}add(e){gh(this.members,e),e.scheduleRender()}remove(e){if(yh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(a=>e===a);if(r===0)return!1;let s;for(let a=r;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,r){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,r&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:s}=e;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ky(t,e,r){let s="";const a=t.x.translate/e.x,l=t.y.translate/e.y;if((a||l)&&(s=`translate3d(${a}px, ${l}px, 0) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:h,rotateX:m,rotateY:p}=r;h&&(s+=`rotate(${h}deg) `),m&&(s+=`rotateX(${m}deg) `),p&&(s+=`rotateY(${p}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(s+=`scale(${u}, ${d})`),s||"none"}const TN=(t,e)=>t.depth-e.depth;class AN{constructor(){this.children=[],this.isDirty=!1}add(e){gh(this.children,e),this.isDirty=!0}remove(e){yh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(TN),this.isDirty=!1,this.children.forEach(e)}}function RN(t,e){const r=performance.now(),s=({timestamp:a})=>{const l=a-r;l>=e&&(gn(s),t(l-e))};return it.read(s,!0),()=>gn(s)}function ON(t){window.MotionDebug&&window.MotionDebug.record(t)}function MN(t){return t instanceof SVGElement&&t.tagName!=="svg"}function DN(t,e,r){const s=tr(t)?t:Di(t);return s.start(ph("",s,e,r)),s.animation}const Ey=["","X","Y","Z"],IN={visibility:"hidden"},Py=1e3;let LN=0;const ws={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function x0({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(u={},d=e?.()){this.id=LN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ws.totalNodes=ws.resolvedTargetDeltas=ws.recalculatedProjection=0,this.nodes.forEach(UN),this.nodes.forEach(WN),this.nodes.forEach(HN),this.nodes.forEach(BN),ON(ws)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new AN)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new vh),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const h=this.eventHandlers.get(u);h&&h.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=MN(u),this.instance=u;const{layoutId:h,layout:m,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(m||h)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=RN(v,250),Gl.hasAnimatedSinceResize&&(Gl.hasAnimatedSinceResize=!1,this.nodes.forEach(Ay))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||m)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:b,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||p.getDefaultTransition()||JN,{onLayoutAnimationStart:j,onLayoutAnimationComplete:R}=p.getProps(),A=!this.targetLayout||!v0(this.targetLayout,_)||b,N=!v&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||v&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,N);const P={...mh(C,"layout"),onPlay:j,onComplete:R};(p.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else v||Ay(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,gn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GN),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ty);return}this.isUpdating||this.nodes.forEach(zN),this.isUpdating=!1,this.nodes.forEach(qN),this.nodes.forEach($N),this.nodes.forEach(FN),this.clearAllSnapshots();const d=performance.now();Ut.delta=Yn(0,1e3/60,d-Ut.timestamp),Ut.timestamp=d,Ut.isProcessing=!0,Td.update.process(Ut),Td.preRender.process(Ut),Td.render.process(Ut),Ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(VN),this.sharedNodes.forEach(KN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,it.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){it.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d&&(this.scroll={animationId:this.root.animationId,phase:u,isRoot:s(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform,d=this.projectionDelta&&!y0(this.projectionDelta),h=this.getTransformTemplate(),m=h?h(this.latestValues,""):void 0,p=m!==this.prevTransformTemplateValue;u&&(d||bs(this.latestValues)||p)&&(a(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return u&&(h=this.removeTransform(h)),XN(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return jt();const d=u.measureViewportBox(),{scroll:h}=this.root;return h&&(Hn(d.x,h.offset.x),Hn(d.y,h.offset.y)),d}removeElementScroll(u){const d=jt();yr(d,u);for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:p,options:g}=m;if(m!==this.root&&p&&g.layoutScroll){if(p.isRoot){yr(d,u);const{scroll:v}=this.root;v&&(Hn(d.x,-v.offset.x),Hn(d.y,-v.offset.y))}Hn(d.x,p.offset.x),Hn(d.y,p.offset.y)}}return d}applyTransform(u,d=!1){const h=jt();yr(h,u);for(let m=0;m<this.path.length;m++){const p=this.path[m];!d&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Ai(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),bs(p.latestValues)&&Ai(h,p.latestValues)}return bs(this.latestValues)&&Ai(h,this.latestValues),h}removeTransform(u){const d=jt();yr(d,u);for(let h=0;h<this.path.length;h++){const m=this.path[h];if(!m.instance||!bs(m.latestValues))continue;bf(m.latestValues)&&m.updateSnapshot();const p=jt(),g=m.measurePageBox();yr(p,g),Cy(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,p)}return bs(this.latestValues)&&Cy(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var d;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Ut.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),Wo(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yr(this.target,this.layout.layoutBox),d0(this.target,this.targetDelta)):yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),Wo(this.relativeTargetOrigin,this.target,b.target),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ws.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||bf(this.parent.latestValues)||u0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const d=this.getLead(),h=!!this.resumingFrom||this!==d;let m=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Ut.timestamp&&(m=!1),m)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;yr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;lN(this.layoutCorrected,this.treeScale,this.path,h),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox);const{target:_}=d;if(!_){this.projectionTransform&&(this.projectionDelta=Ti(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ti(),this.projectionDeltaWithTransform=Ti());const C=this.projectionTransform;qo(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=ky(this.projectionDelta,this.treeScale),(this.projectionTransform!==C||this.treeScale.x!==v||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),ws.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(u,d=!1){const h=this.snapshot,m=h?h.latestValues:{},p={...this.latestValues},g=Ti();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const v=jt(),b=h?h.source:void 0,_=this.layout?this.layout.source:void 0,C=b!==_,j=this.getStack(),R=!j||j.members.length<=1,A=!!(C&&!R&&this.options.crossfade===!0&&!this.path.some(YN));this.animationProgress=0;let N;this.mixTargetDelta=P=>{const D=P/1e3;Ry(g.x,u.x,D),Ry(g.y,u.y,D),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wo(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QN(this.relativeTarget,this.relativeTargetOrigin,v,D),N&&EN(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=jt()),yr(N,this.relativeTarget)),C&&(this.animationValues=p,jN(p,m,this.latestValues,D,A,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(gn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=it.update(()=>{Gl.hasAnimatedSinceResize=!0,this.currentAnimation=DN(0,Py,{...u,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Py),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:h,layout:m,latestValues:p}=u;if(!(!d||!h||!m)){if(this!==u&&this.layout&&m&&b0(this.options.animationType,this.layout.layoutBox,m.layoutBox)){h=this.target||jt();const g=ur(this.layout.layoutBox.x);h.x.min=u.target.x.min,h.x.max=h.x.min+g;const v=ur(this.layout.layoutBox.y);h.y.min=u.target.y.min,h.y.max=h.y.min+v}yr(d,h),Ai(d,p),qo(this.projectionDeltaWithTransform,this.layoutCorrected,d,p)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new PN),this.sharedNodes.get(u).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:d}=this.options;return d?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:d}=this.options;return d?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:h}={}){const m=this.getStack();m&&m.promote(this,h),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:h}=u;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(d=!0),!d)return;const m={};for(let p=0;p<Ey.length;p++){const g="rotate"+Ey[p];h[g]&&(m[g]=h[g],u.setStaticValue(g,0))}u.render();for(const p in m)u.setStaticValue(p,m[p]);u.scheduleRender()}getProjectionStyles(u){var d,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return IN;const m={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=Hl(u?.pointerEvents)||"",m.transform=p?p(this.latestValues,""):"none",m;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=Hl(u?.pointerEvents)||""),this.hasProjected&&!bs(this.latestValues)&&(C.transform=p?p({},""):"none",this.hasProjected=!1),C}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),m.transform=ky(this.projectionDeltaWithTransform,this.treeScale,v),p&&(m.transform=p(v,m.transform));const{x:b,y:_}=this.projectionDelta;m.transformOrigin=`${b.origin*100}% ${_.origin*100}% 0`,g.animationValues?m.opacity=g===this?(h=(d=v.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:m.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const C in Xl){if(v[C]===void 0)continue;const{correct:j,applyTo:R}=Xl[C],A=m.transform==="none"?v[C]:j(v[C],g);if(R){const N=R.length;for(let P=0;P<N;P++)m[R[P]]=A}else m[C]=A}return this.options.layoutId&&(m.pointerEvents=g===this?Hl(u?.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(Ty),this.root.sharedNodes.clear()}}}function $N(t){t.updateLayout()}function FN(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=t.layout,{animationType:l}=t.options,u=r.source!==t.layout.source;l==="size"?xr(g=>{const v=u?r.measuredBox[g]:r.layoutBox[g],b=ur(v);v.min=s[g].min,v.max=v.min+b}):b0(l,r.layoutBox,s)&&xr(g=>{const v=u?r.measuredBox[g]:r.layoutBox[g],b=ur(s[g]);v.max=v.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const d=Ti();qo(d,s,r.layoutBox);const h=Ti();u?qo(h,t.applyTransform(a,!0),r.measuredBox):qo(h,s,r.layoutBox);const m=!y0(d);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:b}=g;if(v&&b){const _=jt();Wo(_,r.layoutBox,v.layoutBox);const C=jt();Wo(C,s,b.layoutBox),v0(_,C)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=_,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:h,layoutDelta:d,hasLayoutChanged:m,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function UN(t){ws.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function BN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function VN(t){t.clearSnapshot()}function Ty(t){t.clearMeasurements()}function zN(t){t.isLayoutDirty=!1}function qN(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ay(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function WN(t){t.resolveTargetDelta()}function HN(t){t.calcProjection()}function GN(t){t.resetRotation()}function KN(t){t.removeLeadSnapshot()}function Ry(t,e,r){t.translate=pt(e.translate,0,r),t.scale=pt(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function Oy(t,e,r,s){t.min=pt(e.min,r.min,s),t.max=pt(e.max,r.max,s)}function QN(t,e,r,s){Oy(t.x,e.x,r.x,s),Oy(t.y,e.y,r.y,s)}function YN(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const JN={duration:.45,ease:[.4,0,.1,1]},My=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Dy=My("applewebkit/")&&!My("chrome/")?Math.round:xt;function Iy(t){t.min=Dy(t.min),t.max=Dy(t.max)}function XN(t){Iy(t.x),Iy(t.y)}function b0(t,e,r){return t==="position"||t==="preserve-aspect"&&!vf(Ny(e),Ny(r),.2)}const ZN=x0({attachResizeListener:(t,e)=>fn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Bd={current:void 0},w0=x0({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Bd.current){const t=new ZN({});t.mount(window),t.setOptions({layoutScroll:!0}),Bd.current=t}return Bd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ek={pan:{Feature:gN},drag:{Feature:pN,ProjectionNode:w0,MeasureLayout:m0}},tk=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function rk(t){const e=tk.exec(t);if(!e)return[,];const[,r,s]=e;return[r,s]}function jf(t,e,r=1){const[s,a]=rk(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const u=l.trim();return n0(u)?parseFloat(u):u}else return df(a)?jf(a,e,r+1):a}function nk(t,{...e},r){const s=t.current;if(!(s instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(a=>{const l=a.get();if(!df(l))return;const u=jf(l,s);u&&a.set(u)});for(const a in e){const l=e[a];if(!df(l))continue;const u=jf(l,s);u&&(e[a]=u,r||(r={}),r[a]===void 0&&(r[a]=l))}return{target:e,transitionEnd:r}}const sk=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),j0=t=>sk.has(t),ik=t=>Object.keys(t).some(j0),Ly=t=>t===Ds||t===Fe,$y=(t,e)=>parseFloat(t.split(", ")[e]),Fy=(t,e)=>(r,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/);if(a)return $y(a[1],e);{const l=s.match(/^matrix\((.+)\)$/);return l?$y(l[1],t):0}},ok=new Set(["x","y","z"]),ak=la.filter(t=>!ok.has(t));function lk(t){const e=[];return ak.forEach(r=>{const s=t.getValue(r);s!==void 0&&(e.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ii={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Fy(4,13),y:Fy(5,14)};Ii.translateX=Ii.x;Ii.translateY=Ii.y;const ck=(t,e,r)=>{const s=e.measureViewportBox(),a=e.current,l=getComputedStyle(a),{display:u}=l,d={};u==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(m=>{d[m]=Ii[m](s,l)}),e.render();const h=e.measureViewportBox();return r.forEach(m=>{const p=e.getValue(m);p&&p.jump(d[m]),t[m]=Ii[m](h,l)}),t},uk=(t,e,r={},s={})=>{e={...e},s={...s};const a=Object.keys(e).filter(j0);let l=[],u=!1;const d=[];if(a.forEach(h=>{const m=t.getValue(h);if(!t.hasValue(h))return;let p=r[h],g=To(p);const v=e[h];let b;if(ec(v)){const _=v.length,C=v[0]===null?1:0;p=v[C],g=To(p);for(let j=C;j<_&&v[j]!==null;j++)b?ch(To(v[j])===b):b=To(v[j])}else b=To(v);if(g!==b)if(Ly(g)&&Ly(b)){const _=m.get();typeof _=="string"&&m.set(parseFloat(_)),typeof v=="string"?e[h]=parseFloat(v):Array.isArray(v)&&b===Fe&&(e[h]=v.map(parseFloat))}else g?.transform&&b?.transform&&(p===0||v===0)?p===0?m.set(b.transform(p)):e[h]=g.transform(v):(u||(l=lk(t),u=!0),d.push(h),s[h]=s[h]!==void 0?s[h]:e[h],m.jump(v))}),d.length){const h=d.indexOf("height")>=0?window.pageYOffset:null,m=ck(e,t,d);return l.length&&l.forEach(([p,g])=>{t.getValue(p).set(g)}),t.render(),vc&&h!==null&&window.scrollTo({top:h}),{target:m,transitionEnd:s}}else return{target:e,transitionEnd:s}};function dk(t,e,r,s){return ik(e)?uk(t,e,r,s):{target:e,transitionEnd:s}}const fk=(t,e,r,s)=>{const a=nk(t,e,s);return e=a.target,s=a.transitionEnd,dk(t,e,r,s)},_f={current:null},_0={current:!1};function hk(){if(_0.current=!0,!!vc)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>_f.current=t.matches;t.addListener(e),e()}else _f.current=!1}function mk(t,e,r){const{willChange:s}=e;for(const a in e){const l=e[a],u=r[a];if(tr(l))t.addValue(a,l),sc(s)&&s.add(a);else if(tr(u))t.addValue(a,Di(l,{owner:t})),sc(s)&&s.remove(a);else if(u!==l)if(t.hasValue(a)){const d=t.getValue(a);!d.hasAnimated&&d.set(l)}else{const d=t.getStaticValue(a);t.addValue(a,Di(d!==void 0?d:l,{owner:t}))}}for(const a in r)e[a]===void 0&&t.removeValue(a);return e}const Uy=new WeakMap,C0=Object.keys(Zo),pk=C0.length,By=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],gk=eh.length;class yk{constructor({parent:e,props:r,presenceContext:s,reducedMotionConfig:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>it.render(this.render,!1,!0);const{latestValues:d,renderState:h}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=r.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=r,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=u,this.isControllingVariants=bc(r),this.isVariantNode=lx(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...p}=this.scrapeMotionValuesFromProps(r,{});for(const g in p){const v=p[g];d[g]!==void 0&&tr(v)&&(v.set(d[g],!1),sc(m)&&m.add(g))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,Uy.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),_0.current||hk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_f.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Uy.delete(this.current),this.projection&&this.projection.unmount(),gn(this.notifyUpdate),gn(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const s=Ms.has(e),a=r.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&it.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),l=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{a(),l()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},s,a,l){let u,d;for(let h=0;h<pk;h++){const m=C0[h],{isEnabled:p,Feature:g,ProjectionNode:v,MeasureLayout:b}=Zo[m];v&&(u=v),p(r)&&(!this.features[m]&&g&&(this.features[m]=new g(this)),b&&(d=b))}if((this.type==="html"||this.type==="svg")&&!this.projection&&u){this.projection=new u(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:m,drag:p,dragConstraints:g,layoutScroll:v,layoutRoot:b}=r;this.projection.setOptions({layoutId:h,layout:m,alwaysMeasureLayout:!!p||g&&Ei(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:l,layoutScroll:v,layoutRoot:b})}return d}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<By.length;s++){const a=By[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l=e["on"+a];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=mk(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const r={};for(let s=0;s<gk;s++){const a=eh[s],l=this.props[a];(Xo(l)||l===!1)&&(r[a]=l)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&r!==void 0&&(s=Di(r,{owner:this}),this.addValue(e,s)),s}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:s}=this.props,a=typeof s=="string"||typeof s=="object"?(r=lh(this.props,s))===null||r===void 0?void 0:r[e]:void 0;if(s&&a!==void 0)return a;const l=this.getBaseTargetFromProps(this.props,e);return l!==void 0&&!tr(l)?l:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new vh),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class S0 extends yk{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:s}){delete r[e],delete s[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...s},{transformValues:a},l){let u=MS(s,e||{},this);if(a&&(r&&(r=a(r)),s&&(s=a(s)),u&&(u=a(u))),l){RS(this,s,u);const d=fk(this,s,u,r);r=d.transitionEnd,s=d.target}return{transition:e,transitionEnd:r,...s}}}function vk(t){return window.getComputedStyle(t)}class xk extends S0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(Ms.has(r)){const s=hh(r);return s&&s.default||0}else{const s=vk(e),a=(fx(r)?s.getPropertyValue(r):s[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:r}){return f0(e,r)}build(e,r,s,a){nh(e,r,s,a.transformTemplate)}scrapeMotionValuesFromProps(e,r){return ah(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;tr(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,s,a){vx(e,r,s,a)}}class bk extends S0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Ms.has(r)){const s=hh(r);return s&&s.default||0}return r=xx.has(r)?r:Xf(r),e.getAttribute(r)}measureInstanceViewportBox(){return jt()}scrapeMotionValuesFromProps(e,r){return wx(e,r)}build(e,r,s,a){ih(e,r,s,this.isSVGTag,a.transformTemplate)}renderInstance(e,r,s,a){bx(e,r,s,a)}mount(e){this.isSVGTag=oh(e.tagName),super.mount(e)}}const wk=(t,e)=>rh(t)?new bk(e,{enableHardwareAcceleration:!1}):new xk(e,{enableHardwareAcceleration:!0}),jk={layout:{ProjectionNode:w0,MeasureLayout:m0}},_k={...QS,...p1,...ek,...jk},me=CC((t,e)=>r1(t,e,_k,wk));function N0(){const t=w.useRef(!1);return Jf(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function Ck(){const t=N0(),[e,r]=w.useState(0),s=w.useCallback(()=>{t.current&&r(e+1)},[e]);return[w.useCallback(()=>it.postRender(s),[s]),e]}class Sk extends w.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Nk({children:t,isPresent:e}){const r=w.useId(),s=w.useRef(null),a=w.useRef({width:0,height:0,top:0,left:0});return w.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:h}=a.current;if(e||!s.current||!l||!u)return;s.current.dataset.motionPopId=r;const m=document.createElement("style");return document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            top: ${d}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),w.createElement(Sk,{isPresent:e,childRef:s,sizeRef:a},w.cloneElement(t,{ref:s}))}const Vd=({children:t,initial:e,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:l,mode:u})=>{const d=jx(kk),h=w.useId(),m=w.useMemo(()=>({id:h,initial:e,isPresent:r,custom:a,onExitComplete:p=>{d.set(p,!0);for(const g of d.values())if(!g)return;s&&s()},register:p=>(d.set(p,!1),()=>d.delete(p))}),l?void 0:[r]);return w.useMemo(()=>{d.forEach((p,g)=>d.set(g,!1))},[r]),w.useEffect(()=>{!r&&!d.size&&s&&s()},[r]),u==="popLayout"&&(t=w.createElement(Nk,{isPresent:r},t)),w.createElement(yc.Provider,{value:m},t)};function kk(){return new Map}function Ek(t){return w.useEffect(()=>()=>t(),[])}const js=t=>t.key||"";function Pk(t,e){t.forEach(r=>{const s=js(r);e.set(s,r)})}function Tk(t){const e=[];return w.Children.forEach(t,r=>{w.isValidElement(r)&&e.push(r)}),e}const pn=({children:t,custom:e,initial:r=!0,onExitComplete:s,exitBeforeEnter:a,presenceAffectsLayout:l=!0,mode:u="sync"})=>{const d=w.useContext(th).forceRender||Ck()[0],h=N0(),m=Tk(t);let p=m;const g=w.useRef(new Map).current,v=w.useRef(p),b=w.useRef(new Map).current,_=w.useRef(!0);if(Jf(()=>{_.current=!1,Pk(m,b),v.current=p}),Ek(()=>{_.current=!0,b.clear(),g.clear()}),_.current)return w.createElement(w.Fragment,null,p.map(A=>w.createElement(Vd,{key:js(A),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:l,mode:u},A)));p=[...p];const C=v.current.map(js),j=m.map(js),R=C.length;for(let A=0;A<R;A++){const N=C[A];j.indexOf(N)===-1&&!g.has(N)&&g.set(N,void 0)}return u==="wait"&&g.size&&(p=[]),g.forEach((A,N)=>{if(j.indexOf(N)!==-1)return;const P=b.get(N);if(!P)return;const D=C.indexOf(N);let M=A;if(!M){const L=()=>{g.delete(N);const Q=Array.from(b.keys()).filter(re=>!j.includes(re));if(Q.forEach(re=>b.delete(re)),v.current=m.filter(re=>{const B=js(re);return B===N||Q.includes(B)}),!g.size){if(h.current===!1)return;d(),s&&s()}};M=w.createElement(Vd,{key:js(P),isPresent:!1,onExitComplete:L,custom:e,presenceAffectsLayout:l,mode:u},P),g.set(N,M)}p.splice(D,0,M)}),p=p.map(A=>{const N=A.key;return g.has(N)?A:w.createElement(Vd,{key:js(A),isPresent:!0,presenceAffectsLayout:l,mode:u},A)}),w.createElement(w.Fragment,null,g.size?p:p.map(A=>w.cloneElement(A)))};function k0(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=k0(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function E0(){for(var t,e,r=0,s="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=k0(t))&&(s&&(s+=" "),s+=e);return s}function Ak(){for(var t=0,e,r,s="";t<arguments.length;)(e=arguments[t++])&&(r=P0(e))&&(s&&(s+=" "),s+=r);return s}function P0(t){if(typeof t=="string")return t;for(var e,r="",s=0;s<t.length;s++)t[s]&&(e=P0(t[s]))&&(r&&(r+=" "),r+=e);return r}var xh="-";function Rk(t){var e=Mk(t),r=t.conflictingClassGroups,s=t.conflictingClassGroupModifiers,a=s===void 0?{}:s;function l(d){var h=d.split(xh);return h[0]===""&&h.length!==1&&h.shift(),T0(h,e)||Ok(d)}function u(d,h){var m=r[d]||[];return h&&a[d]?[].concat(m,a[d]):m}return{getClassGroupId:l,getConflictingClassGroupIds:u}}function T0(t,e){if(t.length===0)return e.classGroupId;var r=t[0],s=e.nextPart.get(r),a=s?T0(t.slice(1),s):void 0;if(a)return a;if(e.validators.length!==0){var l=t.join(xh);return e.validators.find(function(u){var d=u.validator;return d(l)})?.classGroupId}}var Vy=/^\[(.+)\]$/;function Ok(t){if(Vy.test(t)){var e=Vy.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function Mk(t){var e=t.theme,r=t.prefix,s={nextPart:new Map,validators:[]},a=Ik(Object.entries(t.classGroups),r);return a.forEach(function(l){var u=l[0],d=l[1];Cf(d,s,u,e)}),s}function Cf(t,e,r,s){t.forEach(function(a){if(typeof a=="string"){var l=a===""?e:zy(e,a);l.classGroupId=r;return}if(typeof a=="function"){if(Dk(a)){Cf(a(s),e,r,s);return}e.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(function(u){var d=u[0],h=u[1];Cf(h,zy(e,d),r,s)})})}function zy(t,e){var r=t;return e.split(xh).forEach(function(s){r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r}function Dk(t){return t.isThemeGetter}function Ik(t,e){return e?t.map(function(r){var s=r[0],a=r[1],l=a.map(function(u){return typeof u=="string"?e+u:typeof u=="object"?Object.fromEntries(Object.entries(u).map(function(d){var h=d[0],m=d[1];return[e+h,m]})):u});return[s,l]}):t}function Lk(t){if(t<1)return{get:function(){},set:function(){}};var e=0,r=new Map,s=new Map;function a(l,u){r.set(l,u),e++,e>t&&(e=0,s=r,r=new Map)}return{get:function(u){var d=r.get(u);if(d!==void 0)return d;if((d=s.get(u))!==void 0)return a(u,d),d},set:function(u,d){r.has(u)?r.set(u,d):a(u,d)}}}var A0="!";function $k(t){var e=t.separator||":",r=e.length===1,s=e[0],a=e.length;return function(u){for(var d=[],h=0,m=0,p,g=0;g<u.length;g++){var v=u[g];if(h===0){if(v===s&&(r||u.slice(g,g+a)===e)){d.push(u.slice(m,g)),m=g+a;continue}if(v==="/"){p=g;continue}}v==="["?h++:v==="]"&&h--}var b=d.length===0?u:u.substring(m),_=b.startsWith(A0),C=_?b.substring(1):b,j=p&&p>m?p-m:void 0;return{modifiers:d,hasImportantModifier:_,baseClassName:C,maybePostfixModifierPosition:j}}}function Fk(t){if(t.length<=1)return t;var e=[],r=[];return t.forEach(function(s){var a=s[0]==="[";a?(e.push.apply(e,r.sort().concat([s])),r=[]):r.push(s)}),e.push.apply(e,r.sort()),e}function Uk(t){return{cache:Lk(t.cacheSize),splitModifiers:$k(t),...Rk(t)}}var Bk=/\s+/;function Vk(t,e){var r=e.splitModifiers,s=e.getClassGroupId,a=e.getConflictingClassGroupIds,l=new Set;return t.trim().split(Bk).map(function(u){var d=r(u),h=d.modifiers,m=d.hasImportantModifier,p=d.baseClassName,g=d.maybePostfixModifierPosition,v=s(g?p.substring(0,g):p),b=!!g;if(!v){if(!g)return{isTailwindClass:!1,originalClassName:u};if(v=s(p),!v)return{isTailwindClass:!1,originalClassName:u};b=!1}var _=Fk(h).join(":"),C=m?_+A0:_;return{isTailwindClass:!0,modifierId:C,classGroupId:v,originalClassName:u,hasPostfixModifier:b}}).reverse().filter(function(u){if(!u.isTailwindClass)return!0;var d=u.modifierId,h=u.classGroupId,m=u.hasPostfixModifier,p=d+h;return l.has(p)?!1:(l.add(p),a(h,m).forEach(function(g){return l.add(d+g)}),!0)}).reverse().map(function(u){return u.originalClassName}).join(" ")}function zk(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var s,a,l,u=d;function d(m){var p=e[0],g=e.slice(1),v=g.reduce(function(b,_){return _(b)},p());return s=Uk(v),a=s.cache.get,l=s.cache.set,u=h,h(m)}function h(m){var p=a(m);if(p)return p;var g=Vk(m,s);return l(m,g),g}return function(){return u(Ak.apply(null,arguments))}}function lt(t){var e=function(s){return s[t]||[]};return e.isThemeGetter=!0,e}var R0=/^\[(?:([a-z-]+):)?(.+)\]$/i,qk=/^\d+\/\d+$/,Wk=new Set(["px","full","screen"]),Hk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Gk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Kk=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Rr(t){return Ns(t)||Wk.has(t)||qk.test(t)||Sf(t)}function Sf(t){return Is(t,"length",eE)}function Qk(t){return Is(t,"size",O0)}function Yk(t){return Is(t,"position",O0)}function Jk(t){return Is(t,"url",tE)}function Ll(t){return Is(t,"number",Ns)}function Ns(t){return!Number.isNaN(Number(t))}function Xk(t){return t.endsWith("%")&&Ns(t.slice(0,-1))}function Ro(t){return qy(t)||Is(t,"number",qy)}function Ge(t){return R0.test(t)}function Oo(){return!0}function Bn(t){return Hk.test(t)}function Zk(t){return Is(t,"",rE)}function Is(t,e,r){var s=R0.exec(t);return s?s[1]?s[1]===e:r(s[2]):!1}function eE(t){return Gk.test(t)}function O0(){return!1}function tE(t){return t.startsWith("url(")}function qy(t){return Number.isInteger(Number(t))}function rE(t){return Kk.test(t)}function nE(){var t=lt("colors"),e=lt("spacing"),r=lt("blur"),s=lt("brightness"),a=lt("borderColor"),l=lt("borderRadius"),u=lt("borderSpacing"),d=lt("borderWidth"),h=lt("contrast"),m=lt("grayscale"),p=lt("hueRotate"),g=lt("invert"),v=lt("gap"),b=lt("gradientColorStops"),_=lt("gradientColorStopPositions"),C=lt("inset"),j=lt("margin"),R=lt("opacity"),A=lt("padding"),N=lt("saturate"),P=lt("scale"),D=lt("sepia"),M=lt("skew"),L=lt("space"),Q=lt("translate"),re=function(){return["auto","contain","none"]},B=function(){return["auto","hidden","clip","visible","scroll"]},ye=function(){return["auto",Ge,e]},ne=function(){return[Ge,e]},we=function(){return["",Rr]},H=function(){return["auto",Ns,Ge]},ce=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},G=function(){return["solid","dashed","dotted","double","none"]},ae=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},V=function(){return["start","end","center","between","around","evenly","stretch"]},oe=function(){return["","0",Ge]},ie=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},E=function(){return[Ns,Ll]},I=function(){return[Ns,Ge]};return{cacheSize:500,theme:{colors:[Oo],spacing:[Rr],blur:["none","",Bn,Ge],brightness:E(),borderColor:[t],borderRadius:["none","","full",Bn,Ge],borderSpacing:ne(),borderWidth:we(),contrast:E(),grayscale:oe(),hueRotate:I(),invert:oe(),gap:ne(),gradientColorStops:[t],gradientColorStopPositions:[Xk,Sf],inset:ye(),margin:ye(),opacity:E(),padding:ne(),saturate:E(),scale:E(),sepia:oe(),skew:I(),space:ne(),translate:ne()},classGroups:{aspect:[{aspect:["auto","square","video",Ge]}],container:["container"],columns:[{columns:[Bn]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(ce(),[Ge])}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:re()}],"overscroll-x":[{"overscroll-x":re()}],"overscroll-y":[{"overscroll-y":re()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ro]}],basis:[{basis:ye()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ge]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",Ro]}],"grid-cols":[{"grid-cols":[Oo]}],"col-start-end":[{col:["auto",{span:["full",Ro]},Ge]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Oo]}],"row-start-end":[{row:["auto",{span:[Ro]},Ge]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ge]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal"].concat(V())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(V(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(V(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[A]}],px:[{px:[A]}],py:[{py:[A]}],ps:[{ps:[A]}],pe:[{pe:[A]}],pt:[{pt:[A]}],pr:[{pr:[A]}],pb:[{pb:[A]}],pl:[{pl:[A]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ge,e]}],"min-w":[{"min-w":["min","max","fit",Ge,Rr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Bn]},Bn,Ge]}],h:[{h:[Ge,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ge,Rr]}],"max-h":[{"max-h":[Ge,e,"min","max","fit"]}],"font-size":[{text:["base",Bn,Sf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ll]}],"font-family":[{font:[Oo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ge]}],"line-clamp":[{"line-clamp":["none",Ns,Ll]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ge,Rr]}],"list-image":[{"list-image":["none",Ge]}],"list-style-type":[{list:["none","disc","decimal",Ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[R]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[R]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(G(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Rr]}],"underline-offset":[{"underline-offset":["auto",Ge,Rr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[R]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(ce(),[Yk])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Qk]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Jk]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[R]}],"border-style":[{border:[].concat(G(),["hidden"])}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[R]}],"divide-style":[{divide:G()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(G())}],"outline-offset":[{"outline-offset":[Ge,Rr]}],"outline-w":[{outline:[Rr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[R]}],"ring-offset-w":[{"ring-offset":[Rr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Bn,Zk]}],"shadow-color":[{shadow:[Oo]}],opacity:[{opacity:[R]}],"mix-blend":[{"mix-blend":ae()}],"bg-blend":[{"bg-blend":ae()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Bn,Ge]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[g]}],saturate:[{saturate:[N]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[R]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ge]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",Ge]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Ro,Ge]}],"translate-x":[{"translate-x":[Q]}],"translate-y":[{"translate-y":[Q]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ge]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Rr,Ll]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var sE=zk(nE);function Ls(...t){return sE(E0(t))}var Cc=Yv();const iE=Os(Cc);function kt(t,e,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t?.(a),r===!1||!a.defaultPrevented)return e?.(a)}}function Wy(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function M0(...t){return e=>{let r=!1;const s=t.map(a=>{const l=Wy(a,e);return!r&&typeof l=="function"&&(r=!0),l});if(r)return()=>{for(let a=0;a<s.length;a++){const l=s[a];typeof l=="function"?l():Wy(t[a],null)}}}}function Ir(...t){return w.useCallback(M0(...t),t)}function fa(t,e=[]){let r=[];function s(l,u){const d=w.createContext(u),h=r.length;r=[...r,u];const m=g=>{const{scope:v,children:b,..._}=g,C=v?.[t]?.[h]||d,j=w.useMemo(()=>_,Object.values(_));return o.jsx(C.Provider,{value:j,children:b})};m.displayName=l+"Provider";function p(g,v){const b=v?.[t]?.[h]||d,_=w.useContext(b);if(_)return _;if(u!==void 0)return u;throw new Error(`\`${g}\` must be used within \`${l}\``)}return[m,p]}const a=()=>{const l=r.map(u=>w.createContext(u));return function(d){const h=d?.[t]||l;return w.useMemo(()=>({[`__scope${t}`]:{...d,[t]:h}}),[d,h])}};return a.scopeName=t,[s,oE(a,...e)]}function oE(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const s=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const u=s.reduce((d,{useScope:h,scopeName:m})=>{const g=h(l)[`__scope${m}`];return{...d,...g}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return r.scopeName=e.scopeName,r}function oc(t){const e=lE(t),r=w.forwardRef((s,a)=>{const{children:l,...u}=s,d=w.Children.toArray(l),h=d.find(uE);if(h){const m=h.props.children,p=d.map(g=>g===h?w.Children.count(m)>1?w.Children.only(null):w.isValidElement(m)?m.props.children:null:g);return o.jsx(e,{...u,ref:a,children:w.isValidElement(m)?w.cloneElement(m,void 0,p):null})}return o.jsx(e,{...u,ref:a,children:l})});return r.displayName=`${t}.Slot`,r}var aE=oc("Slot");function lE(t){const e=w.forwardRef((r,s)=>{const{children:a,...l}=r;if(w.isValidElement(a)){const u=fE(a),d=dE(l,a.props);return a.type!==w.Fragment&&(d.ref=s?M0(s,u):u),w.cloneElement(a,d)}return w.Children.count(a)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var D0=Symbol("radix.slottable");function cE(t){const e=({children:r})=>o.jsx(o.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=D0,e}function uE(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===D0}function dE(t,e){const r={...e};for(const s in e){const a=t[s],l=e[s];/^on[A-Z]/.test(s)?a&&l?r[s]=(...d)=>{const h=l(...d);return a(...d),h}:a&&(r[s]=a):s==="style"?r[s]={...a,...l}:s==="className"&&(r[s]=[a,l].filter(Boolean).join(" "))}return{...t,...r}}function fE(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function hE(t){const e=t+"CollectionProvider",[r,s]=fa(e),[a,l]=r(e,{collectionRef:{current:null},itemMap:new Map}),u=C=>{const{scope:j,children:R}=C,A=rt.useRef(null),N=rt.useRef(new Map).current;return o.jsx(a,{scope:j,itemMap:N,collectionRef:A,children:R})};u.displayName=e;const d=t+"CollectionSlot",h=oc(d),m=rt.forwardRef((C,j)=>{const{scope:R,children:A}=C,N=l(d,R),P=Ir(j,N.collectionRef);return o.jsx(h,{ref:P,children:A})});m.displayName=d;const p=t+"CollectionItemSlot",g="data-radix-collection-item",v=oc(p),b=rt.forwardRef((C,j)=>{const{scope:R,children:A,...N}=C,P=rt.useRef(null),D=Ir(j,P),M=l(p,R);return rt.useEffect(()=>(M.itemMap.set(P,{ref:P,...N}),()=>void M.itemMap.delete(P))),o.jsx(v,{[g]:"",ref:D,children:A})});b.displayName=p;function _(C){const j=l(t+"CollectionConsumer",C);return rt.useCallback(()=>{const A=j.collectionRef.current;if(!A)return[];const N=Array.from(A.querySelectorAll(`[${g}]`));return Array.from(j.itemMap.values()).sort((M,L)=>N.indexOf(M.ref.current)-N.indexOf(L.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:u,Slot:m,ItemSlot:b},_,s]}var mE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mt=mE.reduce((t,e)=>{const r=oc(`Primitive.${e}`),s=w.forwardRef((a,l)=>{const{asChild:u,...d}=a,h=u?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(h,{...d,ref:l})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function I0(t,e){t&&Cc.flushSync(()=>t.dispatchEvent(e))}function yn(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...r)=>e.current?.(...r),[])}function pE(t,e=globalThis?.document){const r=yn(t);w.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[r,e])}var gE="DismissableLayer",Nf="dismissableLayer.update",yE="dismissableLayer.pointerDownOutside",vE="dismissableLayer.focusOutside",Hy,L0=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bh=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:u,onDismiss:d,...h}=t,m=w.useContext(L0),[p,g]=w.useState(null),v=p?.ownerDocument??globalThis?.document,[,b]=w.useState({}),_=Ir(e,L=>g(L)),C=Array.from(m.layers),[j]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),R=C.indexOf(j),A=p?C.indexOf(p):-1,N=m.layersWithOutsidePointerEventsDisabled.size>0,P=A>=R,D=bE(L=>{const Q=L.target,re=[...m.branches].some(B=>B.contains(Q));!P||re||(a?.(L),u?.(L),L.defaultPrevented||d?.())},v),M=wE(L=>{const Q=L.target;[...m.branches].some(B=>B.contains(Q))||(l?.(L),u?.(L),L.defaultPrevented||d?.())},v);return pE(L=>{A===m.layers.size-1&&(s?.(L),!L.defaultPrevented&&d&&(L.preventDefault(),d()))},v),w.useEffect(()=>{if(p)return r&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Hy=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),Gy(),()=>{r&&m.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Hy)}},[p,v,r,m]),w.useEffect(()=>()=>{p&&(m.layers.delete(p),m.layersWithOutsidePointerEventsDisabled.delete(p),Gy())},[p,m]),w.useEffect(()=>{const L=()=>b({});return document.addEventListener(Nf,L),()=>document.removeEventListener(Nf,L)},[]),o.jsx(Mt.div,{...h,ref:_,style:{pointerEvents:N?P?"auto":"none":void 0,...t.style},onFocusCapture:kt(t.onFocusCapture,M.onFocusCapture),onBlurCapture:kt(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:kt(t.onPointerDownCapture,D.onPointerDownCapture)})});bh.displayName=gE;var xE="DismissableLayerBranch",$0=w.forwardRef((t,e)=>{const r=w.useContext(L0),s=w.useRef(null),a=Ir(e,s);return w.useEffect(()=>{const l=s.current;if(l)return r.branches.add(l),()=>{r.branches.delete(l)}},[r.branches]),o.jsx(Mt.div,{...t,ref:a})});$0.displayName=xE;function bE(t,e=globalThis?.document){const r=yn(t),s=w.useRef(!1),a=w.useRef(()=>{});return w.useEffect(()=>{const l=d=>{if(d.target&&!s.current){let h=function(){F0(yE,r,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=h,e.addEventListener("click",a.current,{once:!0})):h()}else e.removeEventListener("click",a.current);s.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",l),e.removeEventListener("click",a.current)}},[e,r]),{onPointerDownCapture:()=>s.current=!0}}function wE(t,e=globalThis?.document){const r=yn(t),s=w.useRef(!1);return w.useEffect(()=>{const a=l=>{l.target&&!s.current&&F0(vE,r,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Gy(){const t=new CustomEvent(Nf);document.dispatchEvent(t)}function F0(t,e,r,{discrete:s}){const a=r.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),s?I0(a,l):a.dispatchEvent(l)}var jE=bh,_E=$0,jr=globalThis?.document?w.useLayoutEffect:()=>{},CE="Portal",wh=w.forwardRef((t,e)=>{const{container:r,...s}=t,[a,l]=w.useState(!1);jr(()=>l(!0),[]);const u=r||a&&globalThis?.document?.body;return u?iE.createPortal(o.jsx(Mt.div,{...s,ref:e}),u):null});wh.displayName=CE;function SE(t,e){return w.useReducer((r,s)=>e[r][s]??r,t)}var Sc=t=>{const{present:e,children:r}=t,s=NE(e),a=typeof r=="function"?r({present:s.isPresent}):w.Children.only(r),l=Ir(s.ref,kE(a));return typeof r=="function"||s.isPresent?w.cloneElement(a,{ref:l}):null};Sc.displayName="Presence";function NE(t){const[e,r]=w.useState(),s=w.useRef(null),a=w.useRef(t),l=w.useRef("none"),u=t?"mounted":"unmounted",[d,h]=SE(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const m=$l(s.current);l.current=d==="mounted"?m:"none"},[d]),jr(()=>{const m=s.current,p=a.current;if(p!==t){const v=l.current,b=$l(m);t?h("MOUNT"):b==="none"||m?.display==="none"?h("UNMOUNT"):h(p&&v!==b?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,h]),jr(()=>{if(e){let m;const p=e.ownerDocument.defaultView??window,g=b=>{const C=$l(s.current).includes(CSS.escape(b.animationName));if(b.target===e&&C&&(h("ANIMATION_END"),!a.current)){const j=e.style.animationFillMode;e.style.animationFillMode="forwards",m=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=j)})}},v=b=>{b.target===e&&(l.current=$l(s.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(m),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:w.useCallback(m=>{s.current=m?getComputedStyle(m):null,r(m)},[])}}function $l(t){return t?.animationName||"none"}function kE(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var EE=Qv[" useInsertionEffect ".trim().toString()]||jr;function U0({prop:t,defaultProp:e,onChange:r=()=>{},caller:s}){const[a,l,u]=PE({defaultProp:e,onChange:r}),d=t!==void 0,h=d?t:a;{const p=w.useRef(t!==void 0);w.useEffect(()=>{const g=p.current;g!==d&&console.warn(`${s} is changing from ${g?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=d},[d,s])}const m=w.useCallback(p=>{if(d){const g=TE(p)?p(t):p;g!==t&&u.current?.(g)}else l(p)},[d,t,l,u]);return[h,m]}function PE({defaultProp:t,onChange:e}){const[r,s]=w.useState(t),a=w.useRef(r),l=w.useRef(e);return EE(()=>{l.current=e},[e]),w.useEffect(()=>{a.current!==r&&(l.current?.(r),a.current=r)},[r,a]),[r,s,l]}function TE(t){return typeof t=="function"}var AE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),RE="VisuallyHidden",Nc=w.forwardRef((t,e)=>o.jsx(Mt.span,{...t,ref:e,style:{...AE,...t.style}}));Nc.displayName=RE;var OE=Nc,jh="ToastProvider",[_h,ME,DE]=hE("Toast"),[B0]=fa("Toast",[DE]),[IE,kc]=B0(jh),V0=t=>{const{__scopeToast:e,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:l=50,children:u}=t,[d,h]=w.useState(null),[m,p]=w.useState(0),g=w.useRef(!1),v=w.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${jh}\`. Expected non-empty \`string\`.`),o.jsx(_h.Provider,{scope:e,children:o.jsx(IE,{scope:e,label:r,duration:s,swipeDirection:a,swipeThreshold:l,toastCount:m,viewport:d,onViewportChange:h,onToastAdd:w.useCallback(()=>p(b=>b+1),[]),onToastRemove:w.useCallback(()=>p(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:v,children:u})})};V0.displayName=jh;var z0="ToastViewport",LE=["F8"],kf="toast.viewportPause",Ef="toast.viewportResume",q0=w.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:s=LE,label:a="Notifications ({hotkey})",...l}=t,u=kc(z0,r),d=ME(r),h=w.useRef(null),m=w.useRef(null),p=w.useRef(null),g=w.useRef(null),v=Ir(e,g,u.onViewportChange),b=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=u.toastCount>0;w.useEffect(()=>{const j=R=>{s.length!==0&&s.every(N=>R[N]||R.code===N)&&g.current?.focus()};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[s]),w.useEffect(()=>{const j=h.current,R=g.current;if(_&&j&&R){const A=()=>{if(!u.isClosePausedRef.current){const M=new CustomEvent(kf);R.dispatchEvent(M),u.isClosePausedRef.current=!0}},N=()=>{if(u.isClosePausedRef.current){const M=new CustomEvent(Ef);R.dispatchEvent(M),u.isClosePausedRef.current=!1}},P=M=>{!j.contains(M.relatedTarget)&&N()},D=()=>{j.contains(document.activeElement)||N()};return j.addEventListener("focusin",A),j.addEventListener("focusout",P),j.addEventListener("pointermove",A),j.addEventListener("pointerleave",D),window.addEventListener("blur",A),window.addEventListener("focus",N),()=>{j.removeEventListener("focusin",A),j.removeEventListener("focusout",P),j.removeEventListener("pointermove",A),j.removeEventListener("pointerleave",D),window.removeEventListener("blur",A),window.removeEventListener("focus",N)}}},[_,u.isClosePausedRef]);const C=w.useCallback(({tabbingDirection:j})=>{const A=d().map(N=>{const P=N.ref.current,D=[P,...YE(P)];return j==="forwards"?D:D.reverse()});return(j==="forwards"?A.reverse():A).flat()},[d]);return w.useEffect(()=>{const j=g.current;if(j){const R=A=>{const N=A.altKey||A.ctrlKey||A.metaKey;if(A.key==="Tab"&&!N){const D=document.activeElement,M=A.shiftKey;if(A.target===j&&M){m.current?.focus();return}const re=C({tabbingDirection:M?"backwards":"forwards"}),B=re.findIndex(ye=>ye===D);zd(re.slice(B+1))?A.preventDefault():M?m.current?.focus():p.current?.focus()}};return j.addEventListener("keydown",R),()=>j.removeEventListener("keydown",R)}},[d,C]),o.jsxs(_E,{ref:h,role:"region","aria-label":a.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&o.jsx(Pf,{ref:m,onFocusFromOutsideViewport:()=>{const j=C({tabbingDirection:"forwards"});zd(j)}}),o.jsx(_h.Slot,{scope:r,children:o.jsx(Mt.ol,{tabIndex:-1,...l,ref:v})}),_&&o.jsx(Pf,{ref:p,onFocusFromOutsideViewport:()=>{const j=C({tabbingDirection:"backwards"});zd(j)}})]})});q0.displayName=z0;var W0="ToastFocusProxy",Pf=w.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=t,l=kc(W0,r);return o.jsx(Nc,{tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:u=>{const d=u.relatedTarget;!l.viewport?.contains(d)&&s()}})});Pf.displayName=W0;var ha="Toast",$E="toast.swipeStart",FE="toast.swipeMove",UE="toast.swipeCancel",BE="toast.swipeEnd",H0=w.forwardRef((t,e)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:l,...u}=t,[d,h]=U0({prop:s,defaultProp:a??!0,onChange:l,caller:ha});return o.jsx(Sc,{present:r||d,children:o.jsx(qE,{open:d,...u,ref:e,onClose:()=>h(!1),onPause:yn(t.onPause),onResume:yn(t.onResume),onSwipeStart:kt(t.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:kt(t.onSwipeMove,m=>{const{x:p,y:g}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:kt(t.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:kt(t.onSwipeEnd,m=>{const{x:p,y:g}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),h(!1)})})})});H0.displayName=ha;var[VE,zE]=B0(ha,{onClose(){}}),qE=w.forwardRef((t,e)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:l,onClose:u,onEscapeKeyDown:d,onPause:h,onResume:m,onSwipeStart:p,onSwipeMove:g,onSwipeCancel:v,onSwipeEnd:b,..._}=t,C=kc(ha,r),[j,R]=w.useState(null),A=Ir(e,H=>R(H)),N=w.useRef(null),P=w.useRef(null),D=a||C.duration,M=w.useRef(0),L=w.useRef(D),Q=w.useRef(0),{onToastAdd:re,onToastRemove:B}=C,ye=yn(()=>{j?.contains(document.activeElement)&&C.viewport?.focus(),u()}),ne=w.useCallback(H=>{!H||H===1/0||(window.clearTimeout(Q.current),M.current=new Date().getTime(),Q.current=window.setTimeout(ye,H))},[ye]);w.useEffect(()=>{const H=C.viewport;if(H){const ce=()=>{ne(L.current),m?.()},G=()=>{const ae=new Date().getTime()-M.current;L.current=L.current-ae,window.clearTimeout(Q.current),h?.()};return H.addEventListener(kf,G),H.addEventListener(Ef,ce),()=>{H.removeEventListener(kf,G),H.removeEventListener(Ef,ce)}}},[C.viewport,D,h,m,ne]),w.useEffect(()=>{l&&!C.isClosePausedRef.current&&ne(D)},[l,D,C.isClosePausedRef,ne]),w.useEffect(()=>(re(),()=>B()),[re,B]);const we=w.useMemo(()=>j?Z0(j):null,[j]);return C.viewport?o.jsxs(o.Fragment,{children:[we&&o.jsx(WE,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:we}),o.jsx(VE,{scope:r,onClose:ye,children:Cc.createPortal(o.jsx(_h.ItemSlot,{scope:r,children:o.jsx(jE,{asChild:!0,onEscapeKeyDown:kt(d,()=>{C.isFocusedToastEscapeKeyDownRef.current||ye(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Mt.li,{tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":C.swipeDirection,..._,ref:A,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:kt(t.onKeyDown,H=>{H.key==="Escape"&&(d?.(H.nativeEvent),H.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,ye()))}),onPointerDown:kt(t.onPointerDown,H=>{H.button===0&&(N.current={x:H.clientX,y:H.clientY})}),onPointerMove:kt(t.onPointerMove,H=>{if(!N.current)return;const ce=H.clientX-N.current.x,G=H.clientY-N.current.y,ae=!!P.current,V=["left","right"].includes(C.swipeDirection),oe=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,ie=V?oe(0,ce):0,E=V?0:oe(0,G),I=H.pointerType==="touch"?10:2,X={x:ie,y:E},le={originalEvent:H,delta:X};ae?(P.current=X,Fl(FE,g,le,{discrete:!1})):Ky(X,C.swipeDirection,I)?(P.current=X,Fl($E,p,le,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(ce)>I||Math.abs(G)>I)&&(N.current=null)}),onPointerUp:kt(t.onPointerUp,H=>{const ce=P.current,G=H.target;if(G.hasPointerCapture(H.pointerId)&&G.releasePointerCapture(H.pointerId),P.current=null,N.current=null,ce){const ae=H.currentTarget,V={originalEvent:H,delta:ce};Ky(ce,C.swipeDirection,C.swipeThreshold)?Fl(BE,b,V,{discrete:!0}):Fl(UE,v,V,{discrete:!0}),ae.addEventListener("click",oe=>oe.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),WE=t=>{const{__scopeToast:e,children:r,...s}=t,a=kc(ha,e),[l,u]=w.useState(!1),[d,h]=w.useState(!1);return KE(()=>u(!0)),w.useEffect(()=>{const m=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(m)},[]),d?null:o.jsx(wh,{asChild:!0,children:o.jsx(Nc,{...s,children:l&&o.jsxs(o.Fragment,{children:[a.label," ",r]})})})},HE="ToastTitle",G0=w.forwardRef((t,e)=>{const{__scopeToast:r,...s}=t;return o.jsx(Mt.div,{...s,ref:e})});G0.displayName=HE;var GE="ToastDescription",K0=w.forwardRef((t,e)=>{const{__scopeToast:r,...s}=t;return o.jsx(Mt.div,{...s,ref:e})});K0.displayName=GE;var Q0="ToastAction",Y0=w.forwardRef((t,e)=>{const{altText:r,...s}=t;return r.trim()?o.jsx(X0,{altText:r,asChild:!0,children:o.jsx(Ch,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Q0}\`. Expected non-empty \`string\`.`),null)});Y0.displayName=Q0;var J0="ToastClose",Ch=w.forwardRef((t,e)=>{const{__scopeToast:r,...s}=t,a=zE(J0,r);return o.jsx(X0,{asChild:!0,children:o.jsx(Mt.button,{type:"button",...s,ref:e,onClick:kt(t.onClick,a.onClose)})})});Ch.displayName=J0;var X0=w.forwardRef((t,e)=>{const{__scopeToast:r,altText:s,...a}=t;return o.jsx(Mt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:e})});function Z0(t){const e=[];return Array.from(t.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),QE(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",l=s.dataset.radixToastAnnounceExclude==="";if(!a)if(l){const u=s.dataset.radixToastAnnounceAlt;u&&e.push(u)}else e.push(...Z0(s))}}),e}function Fl(t,e,r,{discrete:s}){const a=r.originalEvent.currentTarget,l=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),s?I0(a,l):a.dispatchEvent(l)}var Ky=(t,e,r=0)=>{const s=Math.abs(t.x),a=Math.abs(t.y),l=s>a;return e==="left"||e==="right"?l&&s>r:!l&&a>r};function KE(t=()=>{}){const e=yn(t);jr(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[e])}function QE(t){return t.nodeType===t.ELEMENT_NODE}function YE(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function zd(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var JE=V0,eb=q0,tb=H0,rb=G0,nb=K0,sb=Y0,ib=Ch;const Qy=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Yy=E0,ob=(t,e)=>r=>{var s;if(e?.variants==null)return Yy(t,r?.class,r?.className);const{variants:a,defaultVariants:l}=e,u=Object.keys(a).map(m=>{const p=r?.[m],g=l?.[m];if(p===null)return null;const v=Qy(p)||Qy(g);return a[m][v]}),d=r&&Object.entries(r).reduce((m,p)=>{let[g,v]=p;return v===void 0||(m[g]=v),m},{}),h=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((m,p)=>{let{class:g,className:v,...b}=p;return Object.entries(b).every(_=>{let[C,j]=_;return Array.isArray(j)?j.includes({...l,...d}[C]):{...l,...d}[C]===j})?[...m,g,v]:m},[]);return Yy(t,u,h,r?.class,r?.className)};var XE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ae=(t,e)=>{const r=w.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:u,children:d,...h},m)=>w.createElement("svg",{ref:m,...XE,width:a,height:a,stroke:s,strokeWidth:u?Number(l)*24/Number(a):l,className:`lucide lucide-${ZE(t)}`,...h},[...e.map(([p,g])=>w.createElement(p,g)),...(Array.isArray(d)?d:[d])||[]]));return r.displayName=`${t}`,r},Ci=Ae("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Si=Ae("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),e2=Ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),t2=Ae("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Jy=Ae("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),Kl=Ae("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Xy=Ae("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),r2=Ae("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Zy=Ae("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ab=Ae("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ks=Ae("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ac=Ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),lb=Ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Sh=Ae("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Nh=Ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),n2=Ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Li=Ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ev=Ae("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),s2=Ae("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Qr=Ae("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),i2=Ae("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ta=Ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cb=Ae("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ub=Ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),db=Ae("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),o2=Ae("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),a2=Ae("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),fb=Ae("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Mo=Ae("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),l2=Ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),hb=Ae("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),c2=Ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),u2=Ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),d2=Ae("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),f2=Ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Uo=Ae("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),h2=Ae("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Jr=Ae("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),qd=Ae("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Ql=Ae("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),m2=Ae("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Ts=Ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Mr=Ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Gn=Ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),kh=Ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),p2=Ae("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),g2=Ae("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),y2=Ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),v2=Ae("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Wd=Ae("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),wr=Ae("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),ra=Ae("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Ho=Ae("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),x2=Ae("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Go=Ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Yl=Ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Tf=Ae("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),mb=Ae("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),b2=Ae("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),w2=Ae("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),j2=Ae("Users2",[["path",{d:"M14 19a6 6 0 0 0-12 0",key:"vej9p1"}],["circle",{cx:"8",cy:"9",r:"4",key:"143rtg"}],["path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8",key:"hqbn22"}]]),Ec=Ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Es=Ae("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),_r=Ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_2=JE,pb=rt.forwardRef(({className:t,...e},r)=>o.jsx(eb,{ref:r,className:Ls("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));pb.displayName=eb.displayName;const C2=ob("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),gb=rt.forwardRef(({className:t,variant:e,...r},s)=>o.jsx(tb,{ref:s,className:Ls(C2({variant:e}),t),...r}));gb.displayName=tb.displayName;const S2=rt.forwardRef(({className:t,...e},r)=>o.jsx(sb,{ref:r,className:Ls("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));S2.displayName=sb.displayName;const yb=rt.forwardRef(({className:t,...e},r)=>o.jsx(ib,{ref:r,className:Ls("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),...e,children:o.jsx(_r,{className:"h-4 w-4"})}));yb.displayName=ib.displayName;const vb=rt.forwardRef(({className:t,...e},r)=>o.jsx(rb,{ref:r,className:Ls("text-sm font-semibold",t),...e}));vb.displayName=rb.displayName;const xb=rt.forwardRef(({className:t,...e},r)=>o.jsx(nb,{ref:r,className:Ls("text-sm opacity-90",t),...e}));xb.displayName=nb.displayName;const N2=1;let Hd=0;function k2(){return Hd=(Hd+1)%Number.MAX_VALUE,Hd.toString()}const qt={state:{toasts:[]},listeners:[],getState:()=>qt.state,setState:t=>{typeof t=="function"?qt.state=t(qt.state):qt.state={...qt.state,...t},qt.listeners.forEach(e=>e(qt.state))},subscribe:t=>(qt.listeners.push(t),()=>{qt.listeners=qt.listeners.filter(e=>e!==t)})},he=({...t})=>{const e=k2(),r=a=>qt.setState(l=>({...l,toasts:l.toasts.map(u=>u.id===e?{...u,...a}:u)})),s=()=>qt.setState(a=>({...a,toasts:a.toasts.filter(l=>l.id!==e)}));return qt.setState(a=>({...a,toasts:[{...t,id:e,dismiss:s},...a.toasts].slice(0,N2)})),{id:e,dismiss:s,update:r}};function E2(){const[t,e]=w.useState(qt.getState());return w.useEffect(()=>qt.subscribe(s=>{e(s)}),[]),w.useEffect(()=>{const r=[];return t.toasts.forEach(s=>{if(s.duration===1/0)return;const a=setTimeout(()=>{s.dismiss()},s.duration||5e3);r.push(a)}),()=>{r.forEach(s=>clearTimeout(s))}},[t.toasts]),{toast:he,toasts:t.toasts}}function P2(){const{toasts:t}=E2();return o.jsxs(_2,{children:[t.map(({id:e,title:r,description:s,action:a,dismiss:l,...u})=>o.jsxs(gb,{...u,children:[o.jsxs("div",{className:"grid gap-1",children:[r&&o.jsx(vb,{children:r}),s&&o.jsx(xb,{children:s})]}),a,o.jsx(yb,{})]},e)),o.jsx(pb,{})]})}const T2="modulepreload",A2=function(t){return"/"+t},tv={},Bi=function(e,r,s){let a=Promise.resolve();if(r&&r.length>0){let m=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var u=m;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");a=m(r.map(p=>{if(p=A2(p),p in tv)return;tv[p]=!0;const g=p.endsWith(".css"),v=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":T2,g||(b.as="script"),b.crossOrigin="",b.href=p,h&&b.setAttribute("nonce",h),document.head.appendChild(b),g)return new Promise((_,C)=>{b.addEventListener("load",_),b.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return a.then(d=>{for(const h of d||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},R2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Bi(async()=>{const{default:s}=await Promise.resolve().then(()=>Vi);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class Eh extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class rv extends Eh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class nv extends Eh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class sv extends Eh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Af;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Af||(Af={}));var O2=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(s.next(p))}catch(g){u(g)}}function h(p){try{m(s.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):a(p.value).then(d,h)}m((s=s.apply(t,e||[])).next())})};class M2{constructor(e,{headers:r={},customFetch:s,region:a=Af.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=R2(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return O2(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:u,signal:d}=r;let h={},{region:m}=r;m||(m=this.region);const p=new URL(`${this.url}/${e}`);m&&m!=="any"&&(h["x-region"]=m,p.searchParams.set("forceFunctionRegion",m));let g;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)));const v=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:g,signal:d}).catch(j=>{throw j.name==="AbortError"?j:new rv(j)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new nv(v);if(!v.ok)throw new sv(v);let _=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),C;return _==="application/json"?C=yield v.json():_==="application/octet-stream"?C=yield v.blob():_==="text/event-stream"?C=v:_==="multipart/form-data"?C=yield v.formData():C=yield v.text(),{data:C,error:null,response:v}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new rv(a)}:{data:null,error:a,response:a instanceof sv||a instanceof nv?a.context:void 0}}})}}var At={},hi={},mi={},pi={},gi={},yi={},D2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},$i=D2();const I2=$i.fetch,bb=$i.fetch.bind($i),wb=$i.Headers,L2=$i.Request,$2=$i.Response,Vi=Object.freeze(Object.defineProperty({__proto__:null,Headers:wb,Request:L2,Response:$2,default:bb,fetch:I2},Symbol.toStringTag,{value:"Module"})),F2=R_(Vi);var Ul={},iv;function jb(){if(iv)return Ul;iv=1,Object.defineProperty(Ul,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ul.default=t,Ul}var ov;function _b(){if(ov)return yi;ov=1;var t=yi&&yi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(yi,"__esModule",{value:!0});const e=t(F2),r=t(jb());class s{constructor(l){var u,d;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(d=l.isMaybeSingle)!==null&&d!==void 0?d:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,g,v,b;let _=null,C=null,j=null,R=m.status,A=m.statusText;if(m.ok){if(this.method!=="HEAD"){const M=await m.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?C=M:C=JSON.parse(M))}const P=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),D=(v=m.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");P&&D&&D.length>1&&(j=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(_={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,j=null,R=406,A="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const P=await m.text();try{_=JSON.parse(P),Array.isArray(_)&&m.status===404&&(C=[],_=null,R=200,A="OK")}catch{m.status===404&&P===""?(R=204,A="No Content"):_={message:P}}if(_&&this.isMaybeSingle&&(!((b=_?.details)===null||b===void 0)&&b.includes("0 rows"))&&(_=null,R=200,A="OK"),_&&this.shouldThrowOnError)throw new r.default(_)}return{error:_,data:C,count:j,status:R,statusText:A}});return this.shouldThrowOnError||(h=h.catch(m=>{var p,g,v;return{error:{message:`${(p=m?.name)!==null&&p!==void 0?p:"FetchError"}: ${m?.message}`,details:`${(g=m?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(v=m?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(l,u)}returns(){return this}overrideTypes(){return this}}return yi.default=s,yi}var av;function Cb(){if(av)return gi;av=1;var t=gi&&gi.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(gi,"__esModule",{value:!0});const e=t(_b());class r extends e.default{select(a){let l=!1;const u=(a??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:u,foreignTable:d,referencedTable:h=d}={}){const m=h?`${h}.order`:"order",p=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${p?`${p},`:""}${a}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,l,{foreignTable:u,referencedTable:d=u}={}){const h=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${a}`),this.url.searchParams.set(m,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:u=!1,buffers:d=!1,wal:h=!1,format:m="text"}={}){var p;const g=[a?"analyze":null,l?"verbose":null,u?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${v}"; options=${g};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return gi.default=r,gi}var lv;function Ph(){if(lv)return pi;lv=1;var t=pi&&pi.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(pi,"__esModule",{value:!0});const e=t(Cb());class r extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const u=Array.from(new Set(l)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:u,type:d}={}){let h="";d==="plain"?h="pl":d==="phrase"?h="ph":d==="websearch"&&(h="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${h}fts${m}.${l}`),this}match(a){return Object.entries(a).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(a,l,u){return this.url.searchParams.append(a,`not.${l}.${u}`),this}or(a,{foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,l,u){return this.url.searchParams.append(a,`${l}.${u}`),this}}return pi.default=r,pi}var cv;function Sb(){if(cv)return mi;cv=1;var t=mi&&mi.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(mi,"__esModule",{value:!0});const e=t(Ph());class r{constructor(a,{headers:l={},schema:u,fetch:d}){this.url=a,this.headers=new Headers(l),this.schema=u,this.fetch=d}select(a,{head:l=!1,count:u}={}){const d=l?"HEAD":"GET";let h=!1;const m=(a??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join("");return this.url.searchParams.set("select",m),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:u=!0}={}){var d;const h="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(m.length>0){const p=[...new Set(m)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:u=!1,count:d,defaultToNull:h=!0}={}){var m;const p="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(g.length>0){const v=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:l}={}){var u;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:a}={}){var l;const u="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return mi.default=r,mi}var uv;function U2(){if(uv)return hi;uv=1;var t=hi&&hi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(hi,"__esModule",{value:!0});const e=t(Sb()),r=t(Ph());class s{constructor(l,{headers:u={},schema:d,fetch:h}={}){this.url=l,this.headers=new Headers(u),this.schemaName=d,this.fetch=h}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:h=!1,count:m}={}){var p;let g;const v=new URL(`${this.url}/rpc/${l}`);let b;d||h?(g=d?"HEAD":"GET",Object.entries(u).filter(([C,j])=>j!==void 0).map(([C,j])=>[C,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([C,j])=>{v.searchParams.append(C,j)})):(g="POST",b=u);const _=new Headers(this.headers);return m&&_.set("Prefer",`count=${m}`),new r.default({method:g,url:v,headers:_,schema:this.schemaName,body:b,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return hi.default=s,hi}var dv;function B2(){if(dv)return At;dv=1;var t=At&&At.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(At,"__esModule",{value:!0}),At.PostgrestError=At.PostgrestBuilder=At.PostgrestTransformBuilder=At.PostgrestFilterBuilder=At.PostgrestQueryBuilder=At.PostgrestClient=void 0;const e=t(U2());At.PostgrestClient=e.default;const r=t(Sb());At.PostgrestQueryBuilder=r.default;const s=t(Ph());At.PostgrestFilterBuilder=s.default;const a=t(Cb());At.PostgrestTransformBuilder=a.default;const l=t(_b());At.PostgrestBuilder=l.default;const u=t(jb());return At.PostgrestError=u.default,At.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:u.default},At}var V2=B2();const z2=Os(V2),{PostgrestClient:q2,PostgrestQueryBuilder:$4,PostgrestFilterBuilder:F4,PostgrestTransformBuilder:U4,PostgrestBuilder:B4,PostgrestError:V4}=z2;class W2{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const H2="2.15.5",G2=`realtime-js/${H2}`,K2="1.0.0",Rf=1e4,Q2=1e3,Y2=100;var Ko;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ko||(Ko={}));var Nt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Nt||(Nt={}));var Or;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Or||(Or={}));var Of;(function(t){t.websocket="websocket"})(Of||(Of={}));var Cs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Cs||(Cs={}));class J2{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const a=r.getUint8(1),l=r.getUint8(2);let u=this.HEADER_LENGTH+2;const d=s.decode(e.slice(u,u+a));u=u+a;const h=s.decode(e.slice(u,u+l));u=u+l;const m=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:d,event:h,payload:m}}}class Nb{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var st;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(st||(st={}));const fv=(t,e,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((l,u)=>(l[u]=X2(u,t,e,a),l),{})},X2=(t,e,r,s)=>{const a=e.find(d=>d.name===t),l=a?.type,u=r[t];return l&&!s.includes(l)?kb(l,u):Mf(u)},kb=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return rP(e,r)}switch(t){case st.bool:return Z2(e);case st.float4:case st.float8:case st.int2:case st.int4:case st.int8:case st.numeric:case st.oid:return eP(e);case st.json:case st.jsonb:return tP(e);case st.timestamp:return nP(e);case st.abstime:case st.date:case st.daterange:case st.int4range:case st.int8range:case st.money:case st.reltime:case st.text:case st.time:case st.timestamptz:case st.timetz:case st.tsrange:case st.tstzrange:return Mf(e);default:return Mf(e)}},Mf=t=>t,Z2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},eP=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},tP=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},rP=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let l;const u=t.slice(1,r);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>kb(e,d))}return t},nP=t=>typeof t=="string"?t.replace(" ","T"):t,Eb=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Gd{constructor(e,r,s={},a=Rf){this.channel=e,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(hv||(hv={}));class Qo{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qo.syncState(this.state,a,l,u),this.pendingDiffs.forEach(h=>{this.state=Qo.syncDiff(this.state,h,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Qo.syncDiff(this.state,a,l,u),d())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,a){const l=this.cloneDeep(e),u=this.transformState(r),d={},h={};return this.map(l,(m,p)=>{u[m]||(h[m]=p)}),this.map(u,(m,p)=>{const g=l[m];if(g){const v=p.map(j=>j.presence_ref),b=g.map(j=>j.presence_ref),_=p.filter(j=>b.indexOf(j.presence_ref)<0),C=g.filter(j=>v.indexOf(j.presence_ref)<0);_.length>0&&(d[m]=_),C.length>0&&(h[m]=C)}else d[m]=p}),this.syncDiff(l,{joins:d,leaves:h},s,a)}static syncDiff(e,r,s,a){const{joins:l,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(d,h)=>{var m;const p=(m=e[d])!==null&&m!==void 0?m:[];if(e[d]=this.cloneDeep(h),p.length>0){const g=e[d].map(b=>b.presence_ref),v=p.filter(b=>g.indexOf(b.presence_ref)<0);e[d].unshift(...v)}s(d,p,h)}),this.map(u,(d,h)=>{let m=e[d];if(!m)return;const p=h.map(g=>g.presence_ref);m=m.filter(g=>p.indexOf(g.presence_ref)<0),e[d]=m,a(d,m,h),m.length===0&&delete e[d]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const a=e[s];return"metas"in a?r[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[s]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(mv||(mv={}));var Yo;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Yo||(Yo={}));var dn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(dn||(dn={}));class Th{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gd(this,Or.join,this.params,this.timeout),this.rejoinTimer=new Nb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Or.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Qo(this),this.broadcastEndpointURL=Eb(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Nt.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,m=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(b=>b.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[Yo.PRESENCE]&&this.bindings[Yo.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,g={},v={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(dn.CHANNEL_ERROR,b)),this._onClose(()=>e?.(dn.CLOSED)),this.updateJoinPayload(Object.assign({config:v},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var _;if(this.socket.setAuth(),b===void 0){e?.(dn.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,j=(_=C?.length)!==null&&_!==void 0?_:0,R=[];for(let A=0;A<j;A++){const N=C[A],{filter:{event:P,schema:D,table:M,filter:L}}=N,Q=b&&b[A];if(Q&&Q.event===P&&Q.schema===D&&Q.table===M&&Q.filter===L)R.push(Object.assign(Object.assign({},N),{id:Q.id}));else{this.unsubscribe(),this.state=Nt.errored,e?.(dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(dn.SUBSCRIBED);return}}).receive("error",b=>{this.state=Nt.errored,e?.(dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===Nt.joined&&e===Yo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async send(e,r={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,h;const m=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Nt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Or.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Gd(this,Or.leave,{},e),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nt.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(l),u}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Gd(this,e,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Y2){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var a,l;const u=e.toLocaleLowerCase(),{close:d,error:h,leave:m,join:p}=Or;if(s&&[d,h,m,p].indexOf(u)>=0&&s!==this._joinRef())return;let v=this._onMessage(u,r,s);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var _,C,j;return((_=b.filter)===null||_===void 0?void 0:_.event)==="*"||((j=(C=b.filter)===null||C===void 0?void 0:C.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===u}).map(b=>b.callback(v,s)):(l=this.bindings[u])===null||l===void 0||l.filter(b=>{var _,C,j,R,A,N;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const P=b.id,D=(_=b.filter)===null||_===void 0?void 0:_.event;return P&&((C=r.ids)===null||C===void 0?void 0:C.includes(P))&&(D==="*"||D?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const P=(A=(R=b?.filter)===null||R===void 0?void 0:R.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return P==="*"||P===((N=r?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:C,table:j,commit_timestamp:R,type:A,errors:N}=_;v=Object.assign(Object.assign({},{schema:C,table:j,commit_timestamp:R,eventType:A,new:{},old:{},errors:N}),this._getPayloadRecords(_))}b.callback(v,s)})}_isClosed(){return this.state===Nt.closed}_isJoined(){return this.state===Nt.joined}_isJoining(){return this.state===Nt.joining}_isLeaving(){return this.state===Nt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const a=e.toLocaleLowerCase(),l={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Th.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Or.close,{},e)}_onError(e){this._on(Or.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=fv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=fv(e.columns,e.old_record)),r}}const Kd=()=>{},Bl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sP=[1e3,2e3,5e3,1e4],iP=1e4,oP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aP{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rf,this.transport=null,this.heartbeatIntervalMs=Bl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Kd,this.ref=0,this.reconnectTimer=null,this.logger=Kd,this.conn=null,this.sendBuffer=[],this.serializer=new J2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...u)=>Bi(async()=>{const{default:d}=await Promise.resolve().then(()=>Vi);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Of.websocket}`,this.httpEndpoint=Eb(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=W2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:K2}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ko.connecting:return Cs.Connecting;case Ko.open:return Cs.Open;case Ko.closing:return Cs.Closing;default:return Cs.Closed}}isConnected(){return this.connectionState()===Cs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Th(`realtime:${e}`,r,this);return this.channels.push(l),l}}push(e){const{topic:r,event:s,payload:a,ref:l}=e,u=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${r} ${s} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Q2,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Bl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:u}=r,d=u?`(${u})`:"",h=l.status||"";this.log("receive",`${h} ${s} ${a} ${d}`.trim(),l),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(a,l,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Or.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${s}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([oP],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:G2};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Or.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Nb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,a,l,u,d,h,m,p;if(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:Rf,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Bl.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Kd,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(g=>sP[g-1]||iP),this.encode=(m=e?.encode)!==null&&m!==void 0?m:((g,v)=>v(JSON.stringify(g))),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Ah extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _t(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class lP extends Ah{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Df extends Ah{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var cP=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(s.next(p))}catch(g){u(g)}}function h(p){try{m(s.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):a(p.value).then(d,h)}m((s=s.apply(t,e||[])).next())})};const Pb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Bi(async()=>{const{default:s}=await Promise.resolve().then(()=>Vi);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},uP=()=>cP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bi(()=>Promise.resolve().then(()=>Vi),void 0)).Response:Response}),If=t=>{if(Array.isArray(t))return t.map(r=>If(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=If(s)}),e},dP=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var $s=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(s.next(p))}catch(g){u(g)}}function h(p){try{m(s.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):a(p.value).then(d,h)}m((s=s.apply(t,e||[])).next())})};const Qd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fP=(t,e,r)=>$s(void 0,void 0,void 0,function*(){const s=yield uP();t instanceof s&&!r?.noResolveJson?t.json().then(a=>{const l=t.status||500,u=a?.statusCode||l+"";e(new lP(Qd(a),l,u))}).catch(a=>{e(new Df(Qd(a),a))}):e(new Df(Qd(t),t))}),hP=(t,e,r,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!s?a:(dP(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function ma(t,e,r,s,a,l){return $s(this,void 0,void 0,function*(){return new Promise((u,d)=>{t(r,hP(e,s,a,l)).then(h=>{if(!h.ok)throw h;return s?.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>fP(h,d,s))})})}function lc(t,e,r,s){return $s(this,void 0,void 0,function*(){return ma(t,"GET",e,r,s)})}function Hr(t,e,r,s,a){return $s(this,void 0,void 0,function*(){return ma(t,"POST",e,s,a,r)})}function Lf(t,e,r,s,a){return $s(this,void 0,void 0,function*(){return ma(t,"PUT",e,s,a,r)})}function mP(t,e,r,s){return $s(this,void 0,void 0,function*(){return ma(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Tb(t,e,r,s,a){return $s(this,void 0,void 0,function*(){return ma(t,"DELETE",e,s,a,r)})}var pP=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(s.next(p))}catch(g){u(g)}}function h(p){try{m(s.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):a(p.value).then(d,h)}m((s=s.apply(t,e||[])).next())})};class gP{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return pP(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_t(e))return{data:null,error:e};throw e}})}}var yP=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(s.next(p))}catch(g){u(g)}}function h(p){try{m(s.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):a(p.value).then(d,h)}m((s=s.apply(t,e||[])).next())})};class vP{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}asStream(){return new gP(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.execute().then(e,r)}execute(){return yP(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_t(e))return{data:null,error:e};throw e}})}}var er=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(s.next(p))}catch(g){u(g)}}function h(p){try{m(s.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):a(p.value).then(d,h)}m((s=s.apply(t,e||[])).next())})};const xP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bP{constructor(e,r={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=Pb(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,a){return er(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},pv),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),h&&l.append("metadata",this.encodeMetadata(h)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",u.cacheControl),h&&l.append("metadata",this.encodeMetadata(h))):(l=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const m=this._removeEmptyFolders(r),p=this._getFinalPath(m),g=yield(e=="PUT"?Lf:Hr)(this.fetch,`${this.url}/object/${p}`,l,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:g.Id,fullPath:g.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(_t(l))return{data:null,error:l};throw l}})}upload(e,r,s){return er(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,a){return er(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",r);try{let h;const m=Object.assign({upsert:pv.upsert},a),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",m.cacheControl)):(h=s,p["cache-control"]=`max-age=${m.cacheControl}`,p["content-type"]=m.contentType);const g=yield Lf(this.fetch,d.toString(),h,{headers:p});return{data:{path:l,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(_t(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,r){return er(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);r?.upsert&&(a["x-upsert"]="true");const l=yield Hr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(this.url+l.url),d=u.searchParams.get("token");if(!d)throw new Ah("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_t(s))return{data:null,error:s};throw s}})}update(e,r,s){return er(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return er(this,void 0,void 0,function*(){try{return{data:yield Hr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_t(a))return{data:null,error:a};throw a}})}copy(e,r,s){return er(this,void 0,void 0,function*(){try{return{data:{path:(yield Hr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_t(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,s){return er(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield Hr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_t(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,s){return er(this,void 0,void 0,function*(){try{const a=yield Hr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_t(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof r?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(r?.transform||{}),u=l?`?${l}`:"",d=this._getFinalPath(e),h=()=>lc(this.fetch,`${this.url}/${a}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new vP(h,this.shouldThrowOnError)}info(e){return er(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield lc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:If(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_t(s))return{data:null,error:s};throw s}})}exists(e){return er(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield mP(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_t(s)&&s instanceof Df){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),a=[],l=r?.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&a.push(l);const d=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&a.push(h);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${m}`)}}}remove(e){return er(this,void 0,void 0,function*(){try{return{data:yield Tb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}list(e,r,s){return er(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},xP),r),{prefix:e||""});return{data:yield Hr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_t(a))return{data:null,error:a};throw a}})}listV2(e,r){return er(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Hr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_t(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const wP="2.12.2",jP={"X-Client-Info":`storage-js/${wP}`};var vi=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(s.next(p))}catch(g){u(g)}}function h(p){try{m(s.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):a(p.value).then(d,h)}m((s=s.apply(t,e||[])).next())})};class _P{constructor(e,r={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},jP),r),this.fetch=Pb(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return vi(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_t(e))return{data:null,error:e};throw e}})}getBucket(e){return vi(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return vi(this,void 0,void 0,function*(){try{return{data:yield Hr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_t(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return vi(this,void 0,void 0,function*(){try{return{data:yield Lf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_t(s))return{data:null,error:s};throw s}})}emptyBucket(e){return vi(this,void 0,void 0,function*(){try{return{data:yield Hr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}deleteBucket(e){return vi(this,void 0,void 0,function*(){try{return{data:yield Tb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}}class CP extends _P{constructor(e,r={},s,a){super(e,r,s,a)}from(e){return new bP(this.url,this.headers,e,this.fetch)}}const SP="2.58.0";let Bo="";typeof Deno<"u"?Bo="deno":typeof document<"u"?Bo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bo="react-native":Bo="node";const NP={"X-Client-Info":`supabase-js-${Bo}/${SP}`},kP={headers:NP},EP={schema:"public"},PP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TP={};var AP=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(s.next(p))}catch(g){u(g)}}function h(p){try{m(s.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):a(p.value).then(d,h)}m((s=s.apply(t,e||[])).next())})};const RP=t=>{let e;return t?e=t:typeof fetch>"u"?e=bb:e=fetch,(...r)=>e(...r)},OP=()=>typeof Headers>"u"?wb:Headers,MP=(t,e,r)=>{const s=RP(r),a=OP();return(l,u)=>AP(void 0,void 0,void 0,function*(){var d;const h=(d=yield e())!==null&&d!==void 0?d:t;let m=new a(u?.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),s(l,Object.assign(Object.assign({},u),{headers:m}))})};var DP=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(s.next(p))}catch(g){u(g)}}function h(p){try{m(s.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):a(p.value).then(d,h)}m((s=s.apply(t,e||[])).next())})};function IP(t){return t.endsWith("/")?t:t+"/"}function LP(t,e){var r,s;const{db:a,auth:l,realtime:u,global:d}=t,{db:h,auth:m,realtime:p,global:g}=e,v={db:Object.assign(Object.assign({},h),a),auth:Object.assign(Object.assign({},m),l),realtime:Object.assign(Object.assign({},p),u),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(r=g?.headers)!==null&&r!==void 0?r:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>DP(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function $P(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(IP(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ab="2.72.0",Ni=30*1e3,$f=3,Yd=$f*Ni,FP="http://localhost:9999",UP="supabase.auth.token",BP={"X-Client-Info":`gotrue-js/${Ab}`},Ff="X-Supabase-Api-Version",Rb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},VP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zP=600*1e3;class Rh extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Ve(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class qP extends Rh{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function WP(t){return Ve(t)&&t.name==="AuthApiError"}class Ob extends Rh{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class ts extends Rh{constructor(e,r,s,a){super(e,s,a),this.name=r,this.status=s}}class Wn extends ts{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function HP(t){return Ve(t)&&t.name==="AuthSessionMissingError"}class Do extends ts{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vl extends ts{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zl extends ts{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function GP(t){return Ve(t)&&t.name==="AuthImplicitGrantRedirectError"}class gv extends ts{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Uf extends ts{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Jd(t){return Ve(t)&&t.name==="AuthRetryableFetchError"}class yv extends ts{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Bf extends ts{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const cc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vv=` 	
\r=`.split(""),KP=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<vv.length;e+=1)t[vv[e].charCodeAt(0)]=-2;for(let e=0;e<cc.length;e+=1)t[cc[e].charCodeAt(0)]=e;return t})();function xv(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(cc[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(cc[s]),e.queuedBits-=6}}function Mb(t,e,r){const s=KP[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function bv(t){const e=[],r=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=u=>{JP(u,s,r)};for(let u=0;u<t.length;u+=1)Mb(t.charCodeAt(u),a,l);return e.join("")}function QP(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function YP(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}QP(s,e)}}function JP(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function XP(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Mb(t.charCodeAt(a),r,s);return new Uint8Array(e)}function ZP(t){const e=[];return YP(t,r=>e.push(r)),new Uint8Array(e)}function eT(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>xv(a,r,s)),xv(null,r,s),e.join("")}function tT(t){return Math.round(Date.now()/1e3)+t}function rT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const vr=()=>typeof window<"u"&&typeof document<"u",vs={tested:!1,writable:!1},Db=()=>{if(!vr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vs.tested)return vs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vs.tested=!0,vs.writable=!0}catch{vs.tested=!0,vs.writable=!1}return vs.writable};function nT(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return r.searchParams.forEach((s,a)=>{e[a]=s}),e}const Ib=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Bi(async()=>{const{default:s}=await Promise.resolve().then(()=>Vi);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},sT=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ki=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},xs=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Vn=async(t,e)=>{await t.removeItem(e)};class Pc{constructor(){this.promise=new Pc.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Pc.promiseConstructor=Promise;function Xd(t){const e=t.split(".");if(e.length!==3)throw new Bf("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!VP.test(e[s]))throw new Bf("JWT not in base64url format");return{header:JSON.parse(bv(e[0])),payload:JSON.parse(bv(e[1])),signature:XP(e[2]),raw:{header:e[0],payload:e[1]}}}async function iT(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function oT(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){a(u);return}}})()})}function aT(t){return("0"+t.toString(16)).substr(-2)}function lT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let l=0;l<56;l++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,aT).join("")}async function cT(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function uT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await cT(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xi(t,e,r=!1){const s=lT();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await ki(t,`${e}-code-verifier`,a);const l=await uT(s);return[l,s===l?"plain":"s256"]}const dT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fT(t){const e=t.headers.get(Ff);if(!e||!e.match(dT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function hT(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mT(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function bi(t){if(!pT.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zd(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wv(t){return JSON.parse(JSON.stringify(t))}var gT=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r};const _s=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yT=[502,503,504];async function jv(t){var e;if(!sT(t))throw new Uf(_s(t),0);if(yT.includes(t.status))throw new Uf(_s(t),t.status);let r;try{r=await t.json()}catch(l){throw new Ob(_s(l),l)}let s;const a=fT(t);if(a&&a.getTime()>=Rb["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new yv(_s(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Wn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new yv(_s(r),t.status,r.weak_password.reasons);throw new qP(_s(r),t.status||500,s)}const vT=(t,e,r,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function He(t,e,r,s){var a;const l=Object.assign({},s?.headers);l[Ff]||(l[Ff]=Rb["2024-01-01"].name),s?.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await xT(t,e,r+d,{headers:l,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(h):{data:Object.assign({},h),error:null}}async function xT(t,e,r,s,a,l){const u=vT(e,s,a,l);let d;try{d=await t(r,Object.assign({},u))}catch(h){throw console.error(h),new Uf(_s(h),0)}if(d.ok||await jv(d),s?.noResolveJson)return d;try{return await d.json()}catch(h){await jv(h)}}function Wr(t){var e;let r=null;_T(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=tT(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function _v(t){const e=Wr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Kn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function bT(t){return{data:t,error:null}}function wT(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:l}=t,u=gT(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:l},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function jT(t){return t}function _T(t){return t.access_token&&t.refresh_token&&t.expires_in}const ef=["global","local","others"];var CT=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r};class ST{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Ib(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=ef[0]){if(ef.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ef.join(", ")}`);try{return await He(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ve(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await He(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Kn})}catch(s){if(Ve(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=CT(e,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await He(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:wT,redirectTo:r?.redirectTo})}catch(r){if(Ve(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await He(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kn})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,a,l,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},p=await He(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:jT});if(p.error)throw p.error;const g=await p.json(),v=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(h=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(_=>{const C=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(_.split(";")[1].split("=")[1]);m[`${j}Page`]=C}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(Ve(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){bi(e);try{return await He(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kn})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){bi(e);try{return await He(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Kn})}catch(s){if(Ve(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){bi(e);try{return await He(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Kn})}catch(s){if(Ve(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){bi(e.userId);try{const{data:r,error:s}=await He(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _deleteFactor(e){bi(e.userId),bi(e.id);try{return{data:await He(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}}function Cv(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function NT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const wi={debug:!!(globalThis&&Db()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class kT extends Lb{}async function ET(t,e,r){wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),wi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw wi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new kT(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wi.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function $b(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function PT(t){return parseInt(t,16)}function TT(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function AT(t){var e;const{chainId:r,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:h,resources:m,scheme:p,uri:g,version:v}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=$b(t.address),_=p?`${p}://${s}`:s,C=t.statement?`${t.statement}
`:"",j=`${_} wants you to sign in with your Ethereum account:
${b}

${C}`;let R=`URI: ${g}
Version: ${v}
Chain ID: ${r}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(a&&(R+=`
Expiration Time: ${a.toISOString()}`),d&&(R+=`
Not Before: ${d.toISOString()}`),h&&(R+=`
Request ID: ${h}`),m){let A=`
Resources:`;for(const N of m){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);A+=`
- ${N}`}R+=A}return`${j}
${R}`}NT();const RT={url:FP,storageKey:UP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:BP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Sv(t,e,r){return await r()}const ji={};class na{constructor(e){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=na.nextInstanceID,na.nextInstanceID+=1,this.instanceID>0&&vr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},RT),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new ST({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Ib(a.fetch),this.lock=a.lock||Sv,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:vr()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=ET:this.lock=Sv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Db()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cv(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Cv(this.memoryStorage)),vr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=ji[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ji[this.storageKey]=Object.assign(Object.assign({},ji[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ji[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ji[this.storageKey]=Object.assign(Object.assign({},ji[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ab}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=nT(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),vr()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(r,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),GP(l)){const h=(e=l.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ve(r)?{error:r}:{error:new Ob("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,a;try{const l=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Wr}),{data:u,error:d}=l;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(l){if(Ve(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var r,s,a;try{let l;if("email"in e){const{email:p,password:g,options:v}=e;let b=null,_=null;this.flowType==="pkce"&&([b,_]=await xi(this.storage,this.storageKey)),l=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:p,password:g,data:(r=v?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:_},xform:Wr})}else if("phone"in e){const{phone:p,password:g,options:v}=e;l=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(s=v?.data)!==null&&s!==void 0?s:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Wr})}else throw new Vl("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(l){if(Ve(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let r;if("email"in e){const{email:l,password:u,options:d}=e;r=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_v})}else if("phone"in e){const{phone:l,password:u,options:d}=e;r=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_v})}else throw new Vl("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Do}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,a,l,u,d,h,m,p,g,v;let b,_;if("message"in e)b=e.message,_=e.signature;else{const{chain:C,wallet:j,statement:R,options:A}=e;let N;if(vr())if(typeof j=="object")N=j;else{const re=window;if("ethereum"in re&&typeof re.ethereum=="object"&&"request"in re.ethereum&&typeof re.ethereum.request=="function")N=re.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=j}const P=new URL((r=A?.url)!==null&&r!==void 0?r:window.location.href),D=await N.request({method:"eth_requestAccounts"}).then(re=>re).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=$b(D[0]);let L=(s=A?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!L){const re=await N.request({method:"eth_chainId"});L=PT(re)}const Q={domain:P.host,address:M,statement:R,uri:P.href,version:"1",chainId:L,nonce:(a=A?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(l=A?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=A?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=A?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=A?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(p=A?.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=AT(Q),_=await N.request({method:"personal_sign",params:[TT(b),M]})}try{const{data:C,error:j}=await He(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:_},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Wr});if(j)throw j;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Do}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:j})}catch(C){if(Ve(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(e){var r,s,a,l,u,d,h,m,p,g,v,b;let _,C;if("message"in e)_=e.message,C=e.signature;else{const{chain:j,wallet:R,statement:A,options:N}=e;let P;if(vr())if(typeof R=="object")P=R;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))P=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=R}const D=new URL((r=N?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in P&&P.signIn){const M=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),A?{statement:A}:null));let L;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")L=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)L=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)_=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),C=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${D.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(a=(s=N?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=N?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((u=N?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((d=N?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((h=N?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((m=N?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((g=(p=N?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...N.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const M=await P.signMessage(new TextEncoder().encode(_),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=M}}try{const{data:j,error:R}=await He(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:eT(C)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Wr});if(R)throw R;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Do}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:R})}catch(j){if(Ve(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const r=await xs(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:l,error:u}=await He(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Wr});if(await Vn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Do}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(Ve(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:r,provider:s,token:a,access_token:l,nonce:u}=e,d=await He(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Wr}),{data:h,error:m}=d;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Do}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:m})}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,a,l,u;try{if("email"in e){const{email:d,options:h}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await xi(this.storage,this.storageKey));const{error:g}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(s=h?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:m,code_challenge_method:p},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:d,options:h}=e,{data:m,error:p}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=h?.data)!==null&&a!==void 0?a:{},create_user:(l=h?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(u=h?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:p}}throw new Vl("You must provide either an email or phone number.")}catch(d){if(Ve(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var r,s;try{let a,l;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await He(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Wr});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,m=u.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(a){if(Ve(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,s,a;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await xi(this.storage,this.storageKey)),await He(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:bT})}catch(l){if(Ve(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Wn;const{error:a}=await He(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Ve(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:u}=await He(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:u,error:d}=await He(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Vl("You must provide either an email or phone number and a type")}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Yd:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await xs(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Zd()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,m,p)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,m,p))})}return{data:{session:e},error:null}}const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kn}):await this._useSession(async r=>{var s,a,l;const{data:u,error:d}=r;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wn}:await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Kn})})}catch(r){if(Ve(r))return HP(r)&&(await this._removeSession(),await Vn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Wn;const u=a.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await xi(this.storage,this.storageKey));const{data:m,error:p}=await He(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:Kn});if(p)throw p;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(Ve(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Wn;const r=Date.now()/1e3;let s=r,a=!0,l=null;const{payload:u}=Xd(e.access_token);if(u.exp&&(s=u.exp,a=s<=r),a){const{session:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(r){if(Ve(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:u,error:d}=r;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Wn;const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!vr())throw new zl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new gv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gv("No code detected.");const{data:A,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:d,expires_at:h,token_type:m}=e;if(!l||!d||!u||!m)throw new zl("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(d);let v=p+g;h&&(v=parseInt(h));const b=v-p;b*1e3<=Ni&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const _=v-g;p-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,p):p-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,p);const{data:C,error:j}=await this._getUser(l);if(j)throw j;const R={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:g,expires_at:v,refresh_token:u,token_type:m,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:e.type},error:null}}catch(s){if(Ve(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await xs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return{error:l};const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(WP(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Vn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=rT(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,a;try{const{data:{session:l},error:u}=r;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await xi(this.storage,this.storageKey,!0));try{return await He(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(Ve(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:a}=await this._useSession(async l=>{var u,d,h,m,p;const{data:g,error:v}=l;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await He(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(m=g.session)===null||m===void 0?void 0:m.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return vr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(Ve(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,a;const{data:l,error:u}=r;if(u)throw u;return await He(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await oT(async a=>(a>0&&await iT(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await He(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Wr})),(a,l)=>{const u=200*Math.pow(2,a);return l&&Jd(l)&&Date.now()+u-s<Ni})}catch(s){if(this._debug(r,"error",s),Ve(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),vr()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await xs(this.storage,this.storageKey);if(a&&this.userStorage){let u=await xs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await ki(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u?.user)!==null&&e!==void 0?e:Zd()}else if(a&&!a.user&&!a.user){const u=await xs(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await Vn(this.storage,this.storageKey+"-user"),await ki(this.storage,this.storageKey,a)):a.user=Zd()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Yd;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Yd}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Jd(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(a.access_token);!d&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Wn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Pc;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Wn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={session:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(a,"error",l),Ve(l)){const u={session:null,error:l};return Jd(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,r)}catch(h){l.push(h)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await ki(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const l=wv(a);await ki(this.storage,this.storageKey,l)}else{const a=wv(r);await ki(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Vn(this.storage,this.storageKey),await Vn(this.storage,this.storageKey+"-code-verifier"),await Vn(this.storage,this.storageKey+"-user"),this.userStorage&&await Vn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ni);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Ni);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ni}ms, refresh threshold is ${$f} ticks`),a<=$f&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Lb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!vr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await xi(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(d.toString())}if(s?.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;return l?{data:null,error:l}:await He(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,a;const{data:l,error:u}=r;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:m}=await He(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((a=h?.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return{data:null,error:l};const{data:u,error:d}=await He(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;return l?{data:null,error:l}:await He(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=e?.factors||[],a=s.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=s.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:s,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Xd(a.access_token);let d=null;u.aal&&(d=u.aal);let h=d;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(h="aal2");const p=u.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(d=>d.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+zP>a)return s;const{data:l,error:u}=await He(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:b,error:_}=await this.getSession();if(_||!b.session)return{data:null,error:_};s=b.session.access_token}const{header:a,payload:l,signature:u,raw:{header:d,payload:h}}=Xd(s);r?.allowExpired||hT(l.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:l,header:a,signature:u},error:null}}const p=mT(a.alg),g=await crypto.subtle.importKey("jwk",m,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,u,ZP(`${d}.${h}`)))throw new Bf("Invalid JWT signature");return{data:{claims:l,header:a,signature:u},error:null}}catch(s){if(Ve(s))return{data:null,error:s};throw s}}}na.nextInstanceID=0;const OT=na;class MT extends OT{constructor(e){super(e)}}var DT=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(s.next(p))}catch(g){u(g)}}function h(p){try{m(s.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):a(p.value).then(d,h)}m((s=s.apply(t,e||[])).next())})};class IT{constructor(e,r,s){var a,l,u;this.supabaseUrl=e,this.supabaseKey=r;const d=$P(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:EP,realtime:TP,auth:Object.assign(Object.assign({},PP),{storageKey:h}),global:kP},p=LP(s??{},m);this.storageKey=(a=p.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=p.global.headers)!==null&&l!==void 0?l:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=p.auth)!==null&&u!==void 0?u:{},this.headers,p.global.fetch),this.fetch=MP(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new q2(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new CP(this.storageUrl.href,this.headers,this.fetch,s?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new M2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return DT(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:u,flowType:d,lock:h,debug:m},p,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new MT({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),p),storageKey:u,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:l,flowType:d,lock:h,debug:m,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new aP(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s?.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const LT=(t,e,r)=>new IT(t,e,r);function $T(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}$T()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const FT="https://qcwnlbpultscerwdnzbm.supabase.co",UT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFjd25sYnB1bHRzY2Vyd2RuemJtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzOTU0NzUsImV4cCI6MjA3Mzk3MTQ3NX0.-2FMT_IxLPwnJXY3rm2sL6GwTklKJCAo2J50BdUbQFo",ee=LT(FT,UT,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"papuenvios-auth",flowType:"pkce",debug:!1},db:{schema:"public"},global:{headers:{"x-client-info":"papuenvios-web"}}}),Oh=1e4,BT=3e4,Fb=async(t,e=Oh,r="op")=>{let s;const a=new Promise((l,u)=>{s=setTimeout(()=>u(new Error(`${r} timed out after ${e}ms`)),e)});try{return await Promise.race([t,a])}finally{clearTimeout(s)}},Vf=new Map,VT=t=>{if(!t)return null;const e=Vf.get(t);return e?Date.now()-e.ts>BT?(Vf.delete(t),null):e.role:null},Ub=(t,e)=>{t&&Vf.set(t,{role:e,ts:Date.now()})},Bb=async(t,{timeoutMs:e=Oh}={})=>{if(!t)return null;try{const r=await Fb(ee.from("user_profiles").select("id, user_id, email, role, is_enabled, full_name, avatar_url, created_at, updated_at").eq("id",t).single(),e,"getUserProfile");if(r?.error)return console.warn("[supabase] getUserProfile error:",r.error),null;const s=r?.data??r;return s?.role&&Ub(t,s.role),s??null}catch(r){return console.warn("[supabase] getUserProfile failed:",r.message||r),null}},zf=async(t,{timeoutMs:e=Oh}={})=>{if(!t)return null;const r=VT(t);if(r)return r;const a=(await Bb(t,{timeoutMs:e}))?.role??null;return a&&Ub(t,a),a},zT=Object.freeze(Object.defineProperty({__proto__:null,getUserProfile:Bb,getUserRole:zf,supabase:ee,withTimeout:Fb},Symbol.toStringTag,{value:"Module"})),qT=async(t,e="Query")=>{try{const{data:r,error:s}=await t();if(s)throw s;return{data:r,error:null}}catch(r){return console.error(`[${e}] Error:`,r),{data:null,error:r}}},Vb=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),uc=()=>new Date().toISOString(),WT=["jtheoden@gmail.com","jtheoden@googlemail.com"],HT={PAYMENT_PROOF:5*1024*1024},GT=["image/jpeg","image/png","image/jpg","image/webp"],Nv={PROFILE_FETCH:5e3,INIT_AUTH:1e4,DEFAULT_QUERY:1e4,CAROUSEL_SLIDE:5e3},As={PRODUCT_PROFIT_MARGIN:40,COMBO_PROFIT_MARGIN:35,MIN_STOCK_ALERT:10,DISPLAY_ORDER:0},ct={PENDING:"pending",PROCESSING:"processing",SHIPPED:"shipped",DELIVERED:"delivered",COMPLETED:"completed",CANCELLED:"cancelled"},Wt={PENDING:"pending",VALIDATED:"validated",REJECTED:"rejected"},kv=async()=>{try{const{data:t,error:e}=await ee.from("products").select(`
        *,
        category:product_categories(id, name_es, name_en, slug)
      `).eq("is_active",!0).order("created_at",{ascending:!1});if(e)throw e;const r=(t||[]).map(d=>d.id),{data:s}=await ee.from("inventory").select("product_id, quantity, available_quantity, expiry_date").in("product_id",r).eq("is_active",!0).order("created_at",{ascending:!1}),a={},l={};return(s||[]).forEach(d=>{a[d.product_id]||(a[d.product_id]=0),a[d.product_id]+=d.available_quantity||0,!l[d.product_id]&&d.expiry_date&&(l[d.product_id]=d.expiry_date)}),{data:(t||[]).map(d=>({...d,stock:a[d.id]||0,expiry_date:l[d.id]||null})),error:null}}catch(t){return console.error("Error fetching products:",t),{data:null,error:t}}},KT=async t=>{try{console.log(" createProduct called with:",t);const{data:e,error:r}=await ee.from("products").insert([{sku:t.sku||`SKU-${Date.now()}`,name_es:t.name,name_en:t.name,description_es:t.description_es||"",description_en:t.description_en||"",category_id:t.category_id,base_price:parseFloat(t.basePrice),base_currency_id:t.base_currency_id,profit_margin:parseFloat(t.profitMargin||As.PRODUCT_PROFIT_MARGIN),min_stock_alert:t.min_stock_alert?parseInt(t.min_stock_alert):As.MIN_STOCK_ALERT,image_url:t.image||null,image_file:t.image||null,is_active:!0}]).select().single();if(r)throw r;if(console.log(" Product created:",e),t.stock&&parseInt(t.stock)>0){console.log(" Creating inventory with stock:",t.stock);const s={product_id:e.id,quantity:parseInt(t.stock),batch_number:`BATCH-${Date.now()}`,is_active:!0};t.expiryDate&&(s.expiry_date=t.expiryDate);const{error:a}=await ee.from("inventory").insert([s]);a?console.error(" Error creating inventory:",a):console.log(" Inventory created successfully")}else console.log(" No stock to create, stock value:",t.stock);return{data:e,error:null}}catch(e){return console.error(" Error creating product:",e),{data:null,error:e}}},QT=async(t,e)=>{try{console.log(" updateProduct called for:",t,"with data:",e);const r={name_es:e.name,name_en:e.name,description_es:e.description_es||"",description_en:e.description_en||"",category_id:e.category_id,base_price:parseFloat(e.basePrice),profit_margin:parseFloat(e.profitMargin||As.PRODUCT_PROFIT_MARGIN),min_stock_alert:e.min_stock_alert!==void 0?parseInt(e.min_stock_alert):As.MIN_STOCK_ALERT,updated_at:uc()};e.image&&(r.image_url=e.image,r.image_file=e.image),console.log(" Sending update to products table:",r);const{data:s,error:a}=await ee.from("products").update(r).eq("id",t).select().single();if(a)throw a;if(console.log(" Product updated:",s),e.stock!==void 0||e.expiryDate!==void 0){const{data:l}=await ee.from("inventory").select("id").eq("product_id",t).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1),u=l&&l.length>0?l[0]:null;if(u){const d={updated_at:uc()};e.stock!==void 0&&(d.quantity=parseInt(e.stock)),e.expiryDate!==void 0&&(d.expiry_date=e.expiryDate||null);const{error:h}=await ee.from("inventory").update(d).eq("id",u.id);h&&console.error("Error updating inventory:",h)}else if(e.stock!==void 0&&parseInt(e.stock)>0){const d={product_id:t,quantity:parseInt(e.stock),batch_number:`BATCH-${Date.now()}`,is_active:!0};e.expiryDate&&(d.expiry_date=e.expiryDate);const{error:h}=await ee.from("inventory").insert([d]);h&&console.error("Error creating inventory:",h)}}return{data:s,error:null}}catch(r){return console.error("Error updating product:",r),{data:null,error:r}}},YT=async()=>{try{const{data:t,error:e}=await ee.from("product_categories").select("id, slug, name_es, name_en, description_es, description_en, display_order, is_active").eq("is_active",!0).order("display_order",{ascending:!0});if(e)throw e;return{data:t||[],error:null}}catch(t){return console.error("Error fetching categories:",t),{data:null,error:t}}},JT=async t=>{try{const{data:e,error:r}=await ee.from("product_categories").insert([{name_es:t.es,name_en:t.en,description_es:t.description_es||"",description_en:t.description_en||"",slug:Vb(t.es),is_active:!0,display_order:As.DISPLAY_ORDER}]).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error creating category:",e),{data:null,error:e}}},XT=async(t,e)=>{try{const{data:r,error:s}=await ee.from("product_categories").update({name_es:e.es,name_en:e.en,description_es:e.description_es||"",description_en:e.description_en||"",slug:Vb(e.es),updated_at:uc()}).eq("id",t).select().single();if(s)throw s;return{data:r,error:null}}catch(r){return console.error("Error updating category:",r),{data:null,error:r}}},ZT=async t=>{try{const{error:e}=await ee.from("product_categories").update({is_active:!1}).eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error deleting category:",e),{data:null,error:e}}},eA=async(t=!1)=>qT(async()=>{let e=ee.from("combo_products").select(`
          *,
          items:combo_items(
            quantity,
            product:products(id, name_es, name_en, base_price)
          )
        `);return t||(e=e.eq("is_active",!0)),await e.order("created_at",{ascending:!1})},"Get combos"),tA=async t=>{try{let e=0;if(t.productsWithQuantities&&t.productsWithQuantities.length>0){const a=t.productsWithQuantities.map(u=>u.productId),{data:l}=await ee.from("products").select("id, base_price").in("id",a);l&&(e=t.productsWithQuantities.reduce((u,d)=>{const h=l.find(m=>m.id===d.productId);return h?u+parseFloat(h.base_price)*d.quantity:u},0))}const{data:r,error:s}=await ee.from("combo_products").insert([{name_es:t.name,name_en:t.name,description_es:t.description||"",description_en:t.description||"",image_url:t.image||null,base_total_price:e,profit_margin:parseFloat(t.profitMargin||As.COMBO_PROFIT_MARGIN),is_active:!0}]).select().single();if(s)throw s;if(t.productsWithQuantities&&t.productsWithQuantities.length>0){const a=t.productsWithQuantities.map(u=>({combo_id:r.id,product_id:u.productId,quantity:u.quantity})),{error:l}=await ee.from("combo_items").insert(a);if(l)throw l}return{data:r,error:null}}catch(e){return console.error("Error creating combo:",e),{data:null,error:e}}},rA=async(t,e)=>{try{let r;if(e.productsWithQuantities&&e.productsWithQuantities.length>0){const u=e.productsWithQuantities.map(h=>h.productId),{data:d}=await ee.from("products").select("id, base_price").in("id",u);d&&(r=e.productsWithQuantities.reduce((h,m)=>{const p=d.find(g=>g.id===m.productId);return p?h+parseFloat(p.base_price)*m.quantity:h},0))}const s={name_es:e.name,name_en:e.name,description_es:e.description||"",description_en:e.description||"",profit_margin:parseFloat(e.profitMargin||As.COMBO_PROFIT_MARGIN),updated_at:uc()};e.image&&(s.image_url=e.image),r!==void 0&&(s.base_total_price=r);const{data:a,error:l}=await ee.from("combo_products").update(s).eq("id",t).select().single();if(l)throw l;if(e.productsWithQuantities&&(await ee.from("combo_items").delete().eq("combo_id",t),e.productsWithQuantities.length>0)){const u=e.productsWithQuantities.map(h=>({combo_id:t,product_id:h.productId,quantity:h.quantity})),{error:d}=await ee.from("combo_items").insert(u);if(d)throw d}return{data:a,error:null}}catch(r){return console.error("Error updating combo:",r),{data:null,error:r}}},zb=async(t=!1)=>{try{let e=ee.from("testimonials").select("*").order("created_at",{ascending:!1});t||(e=e.eq("is_visible",!0));const{data:r,error:s}=await e;if(s)throw s;if(r&&r.length>0){const a=[...new Set(r.map(d=>d.user_id))],{data:l}=await ee.from("user_profiles").select("user_id, full_name, avatar_url").in("user_id",a),u={};l&&l.forEach(d=>{u[d.user_id]=d}),r.forEach(d=>{const h=u[d.user_id];d.user_name=h?.full_name||"Usuario",d.user_avatar=h?.avatar_url||d.user_photo})}return{data:r,error:null}}catch(e){return console.error("Error fetching testimonials:",e),{data:null,error:e}}},nA=async t=>{try{const{data:e,error:r}=await ee.from("testimonials").insert([{user_id:t.user_id,order_id:t.order_id||null,rating:t.rating,comment:t.comment,user_photo:t.user_photo||null,is_visible:!1,is_featured:!1}]).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error creating testimonial:",e),{data:null,error:e}}},sA=async(t,e)=>{try{const{data:r,error:s}=await ee.from("testimonials").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(s)throw s;return{data:r,error:null}}catch(r){return console.error("Error updating testimonial:",r),{data:null,error:r}}},iA=async(t,e)=>{try{const{data:r,error:s}=await ee.from("testimonials").update({is_visible:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(s)throw s;return{data:r,error:null}}catch(r){return console.error("Error toggling testimonial visibility:",r),{data:null,error:r}}},oA=async(t,e)=>{try{const{data:r,error:s}=await ee.from("testimonials").update({is_featured:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(s)throw s;return{data:r,error:null}}catch(r){return console.error("Error toggling testimonial featured status:",r),{data:null,error:r}}},aA=async t=>{try{const{data:e,error:r}=await ee.from("testimonials").select("*").eq("user_id",t).maybeSingle();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching user testimonial:",e),{data:null,error:e}}},qb=async(t=!1)=>{try{let e=ee.from("carousel_slides").select("*").order("display_order",{ascending:!0});t&&(e=e.eq("is_active",!0));const{data:r,error:s}=await e;if(s)throw s;return{data:r,error:null}}catch(e){return console.error("Error fetching carousel slides:",e),{data:null,error:e}}},lA=async t=>{try{const{data:e}=await ee.from("carousel_slides").select("display_order").order("display_order",{ascending:!1}).limit(1),r=e&&e.length>0?e[0].display_order+1:0,{data:s,error:a}=await ee.from("carousel_slides").insert([{title_es:t.title_es||"",title_en:t.title_en||"",subtitle_es:t.subtitle_es||null,subtitle_en:t.subtitle_en||null,image_url:t.image_url||null,image_file:t.image_file||null,link_url:t.link_url||null,display_order:t.display_order??r,is_active:t.is_active??!0}]).select().single();if(a)throw a;return{data:s,error:null}}catch(e){return console.error("Error creating carousel slide:",e),{data:null,error:e}}},Ev=async(t,e)=>{try{const{data:r,error:s}=await ee.from("carousel_slides").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(s)throw s;return{data:r,error:null}}catch(r){return console.error("Error updating carousel slide:",r),{data:null,error:r}}},cA=async t=>{try{const{error:e}=await ee.from("carousel_slides").delete().eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error hard deleting carousel slide:",e),{data:null,error:e}}},uA=async()=>{try{const{data:t,error:e}=await ee.from("carousel_slides").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(e)throw e;return{data:t,error:null}}catch(t){return console.error("Error fetching active carousel slides:",t),{data:null,error:t}}},Wb=w.createContext(),Io=(t,e)=>{const[r,s]=w.useState(()=>{try{const l=window.localStorage.getItem(t);return l?JSON.parse(l):e}catch(l){return console.log(l),e}});return[r,l=>{try{const u=l instanceof Function?l(r):l;s(u),window.localStorage.setItem(t,JSON.stringify(u))}catch(u){console.log(u)}}]},dA=({children:t})=>{const[e,r]=w.useState([]),[s,a]=w.useState([]),[l,u]=w.useState([]),[d,h]=w.useState([]),[m,p]=w.useState([]),[g,v]=w.useState(!0),[b,_]=w.useState(null),[C,j]=Io("cart",[]),[R,A]=Io("zelleAccounts",[{id:1,email:"payment1@example.com",name:"Main Sales",forProducts:!0,forRemittances:!1,active:!0,payments:{weekly:12,monthly:50,yearly:600,total:1500}},{id:2,email:"remit@example.com",name:"Remittances Only",forProducts:!1,forRemittances:!0,active:!0,payments:{weekly:5,monthly:20,yearly:250,total:400}}]),[N,P]=Io("financialSettings",{usdToLocal:36.5,currencies:[{code:"USD",name:"US Dollar",rate:1,symbol:"$"},{code:"EUR",name:"Euro",rate:.92,symbol:""}],productProfit:40,comboProfit:35,remittanceProfit:5,shippingType:"undetermined",shippingFixedAmount:0,shippingFreeThreshold:100}),[D,M]=Io("notificationSettings",{whatsapp:"",whatsappGroup:"",adminEmail:""}),[L,Q]=Io("visualSettings",{logo:"",favicon:"",companyName:"PapuEnvos",primaryColor:"#2563eb",secondaryColor:"#9333ea",useGradient:!0,headerBgColor:"#ffffff",headerTextColor:"#1f2937",headingColor:"#1f2937",useHeadingGradient:!0,buttonBgColor:"#2563eb",buttonTextColor:"#ffffff",buttonHoverBgColor:"#1d4ed8",destructiveBgColor:"#dc2626",destructiveTextColor:"#ffffff",destructiveHoverBgColor:"#b91c1c",accentColor:"#9333ea",pageBgColor:"#f9fafb",cardBgColor:"#ffffff"}),re=async()=>{try{_(null);const{data:E,error:I}=await kv();if(I)throw I;r(E||[])}catch(E){console.error("Error refreshing products:",E),_(E.message)}},B=async()=>{try{_(null);const{data:E,error:I}=await YT();if(I)throw I;u(E||[])}catch(E){console.error("Error refreshing categories:",E),_(E.message)}},ye=async(E=!1)=>{try{const{data:I,error:X}=await eA(E);if(X)throw X;const{data:le}=await kv(),be={};(le||[]).forEach(ue=>{be[ue.id]=ue});const Ce=(I||[]).map(ue=>{const Ne={},Oe=ue.items?.map(K=>(Ne[K.product.id]=K.quantity,K.product.id))||[];let Y=!1;for(const K of Oe){const De=be[K],_e=Ne[K]||1,T=De?.stock||0;if(T===0||T<_e){Y=!0;break}}return Y&&ue.is_active&&ee.from("combo_products").update({is_active:!1}).eq("id",ue.id).then(()=>console.log(`Combo ${ue.id} auto-deactivated due to insufficient stock`)),{id:ue.id,name:ue.name_es,description:ue.description_es,image:ue.image_url,products:Oe,productQuantities:Ne,items:ue.items||[],profitMargin:ue.profit_margin,baseTotalPrice:ue.base_total_price,is_active:Y?!1:ue.is_active}});a(Ce)}catch(I){console.error("Error refreshing combos:",I)}},ne=async(E=!1)=>{try{_(null);const{data:I,error:X}=await zb(E);if(X)throw X;h(I||[])}catch(I){console.error("Error refreshing testimonials:",I),_(I)}},we=async(E=!1)=>{try{_(null);const{data:I,error:X}=await qb(E);if(X)throw X;p(I||[])}catch(I){console.error("Error refreshing carousel slides:",I),_(I)}};w.useEffect(()=>{(async()=>{v(!0),await Promise.all([re(),B(),ye(),ne(!1),we(!1)]),v(!1)})()},[]);const H=E=>r(I=>[...I,E]),ce=E=>r(I=>I.map(X=>X.id===E.id?E:X)),G=E=>{j(I=>I.find(le=>le.id===E.id)?I.map(le=>le.id===E.id?{...le,quantity:le.quantity+1}:le):[...I,{...E,quantity:1}])},ae=E=>j(I=>I.filter(X=>X.id!==E)),ie={products:e,addProduct:H,updateProduct:ce,refreshProducts:re,combos:s,setCombos:a,refreshCombos:ye,cart:C,addToCart:G,removeFromCart:ae,updateCartQuantity:(E,I)=>{if(I<=0){ae(E);return}j(X=>X.map(le=>le.id===E?{...le,quantity:I}:le))},clearCart:()=>j([]),categories:l,setCategories:u,refreshCategories:B,testimonials:d,setTestimonials:h,refreshTestimonials:ne,carouselSlides:m,setCarouselSlides:p,refreshCarouselSlides:we,zelleAccounts:R,setZelleAccounts:A,financialSettings:N,setFinancialSettings:P,notificationSettings:D,setNotificationSettings:M,visualSettings:L,setVisualSettings:Q,loading:g,error:b,exchangeRate:N.currencies.find(E=>E.code==="USD")?.rate||1};return o.jsx(Wb.Provider,{value:ie,children:t})},Ht=()=>{const t=w.useContext(Wb);if(t===void 0)throw new Error("useBusiness must be used within a BusinessProvider");return t},fA=()=>{const{visualSettings:t}=Ht();return o.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center z-50",style:{background:t.useGradient?`linear-gradient(to bottom right, ${t.primaryColor}, ${t.secondaryColor})`:t.primaryColor},children:o.jsxs("div",{className:"text-center",children:[o.jsx(me.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"mb-8",children:o.jsxs("div",{className:"relative",children:[o.jsxs(me.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-24 h-24 mx-auto mb-4 relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white/20"}),o.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white border-t-transparent animate-spin"})]}),o.jsxs(me.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"flex justify-center space-x-4 mb-6",children:[o.jsx(me.div,{animate:{y:[0,-10,0]},transition:{duration:1.5,repeat:1/0,delay:0},children:o.jsx(wr,{className:"w-8 h-8 text-white"})}),o.jsx(me.div,{animate:{y:[0,-10,0]},transition:{duration:1.5,repeat:1/0,delay:.2},children:o.jsx(Qr,{className:"w-8 h-8 text-white"})}),o.jsx(me.div,{animate:{y:[0,-10,0]},transition:{duration:1.5,repeat:1/0,delay:.4},children:o.jsx(db,{className:"w-8 h-8 text-white"})})]})]})}),o.jsx(me.h1,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},className:"text-4xl font-bold text-white mb-4",children:t.companyName||"PapuEnvos"}),o.jsx(me.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},className:"text-xl text-white/80 mb-8",children:"Cargando tu plataforma de comercio digital..."}),o.jsx(me.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:2,delay:1},className:"w-64 h-2 rounded-full mx-auto overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.2)"},children:o.jsx(me.div,{initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"h-full w-1/3",style:{background:t.useGradient?`linear-gradient(to right, transparent, ${t.secondaryColor}, transparent)`:`linear-gradient(to right, transparent, ${t.primaryColor}, transparent)`}})})]})})};class hA extends rt.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r)}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:o.jsxs("div",{className:"glass-effect p-8 rounded-2xl text-center max-w-lg",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Something went wrong"}),o.jsx("p",{className:"text-gray-600 mb-4",children:this.state.error?.message||"An unexpected error occurred"}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Reload Page"})]})}):this.props.children}}var tf={exports:{}},rf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function mA(){if(Pv)return rf;Pv=1;var t=pc();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var r=typeof Object.is=="function"?Object.is:e,s=t.useState,a=t.useEffect,l=t.useLayoutEffect,u=t.useDebugValue;function d(g,v){var b=v(),_=s({inst:{value:b,getSnapshot:v}}),C=_[0].inst,j=_[1];return l(function(){C.value=b,C.getSnapshot=v,h(C)&&j({inst:C})},[g,b,v]),a(function(){return h(C)&&j({inst:C}),g(function(){h(C)&&j({inst:C})})},[g]),u(b),b}function h(g){var v=g.getSnapshot;g=g.value;try{var b=v();return!r(g,b)}catch{return!0}}function m(g,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return rf.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,rf}var Tv;function pA(){return Tv||(Tv=1,tf.exports=mA()),tf.exports}var gA=pA();function yA(){return gA.useSyncExternalStore(vA,()=>!0,()=>!1)}function vA(){return()=>{}}var Mh="Avatar",[xA]=fa(Mh),[bA,Hb]=xA(Mh),Gb=w.forwardRef((t,e)=>{const{__scopeAvatar:r,...s}=t,[a,l]=w.useState("idle");return o.jsx(bA,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:l,children:o.jsx(Mt.span,{...s,ref:e})})});Gb.displayName=Mh;var Kb="AvatarImage",Qb=w.forwardRef((t,e)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...l}=t,u=Hb(Kb,r),d=wA(s,l),h=yn(m=>{a(m),u.onImageLoadingStatusChange(m)});return jr(()=>{d!=="idle"&&h(d)},[d,h]),d==="loaded"?o.jsx(Mt.img,{...l,ref:e,src:s}):null});Qb.displayName=Kb;var Yb="AvatarFallback",Jb=w.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:s,...a}=t,l=Hb(Yb,r),[u,d]=w.useState(s===void 0);return w.useEffect(()=>{if(s!==void 0){const h=window.setTimeout(()=>d(!0),s);return()=>window.clearTimeout(h)}},[s]),u&&l.imageLoadingStatus!=="loaded"?o.jsx(Mt.span,{...a,ref:e}):null});Jb.displayName=Yb;function Av(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function wA(t,{referrerPolicy:e,crossOrigin:r}){const s=yA(),a=w.useRef(null),l=s?(a.current||(a.current=new window.Image),a.current):null,[u,d]=w.useState(()=>Av(l,t));return jr(()=>{d(Av(l,t))},[l,t]),jr(()=>{const h=g=>()=>{d(g)};if(!l)return;const m=h("loaded"),p=h("error");return l.addEventListener("load",m),l.addEventListener("error",p),e&&(l.referrerPolicy=e),typeof r=="string"&&(l.crossOrigin=r),()=>{l.removeEventListener("load",m),l.removeEventListener("error",p)}},[l,r,e]),u}var jA=Gb,_A=Qb,CA=Jb,SA=Qv[" useId ".trim().toString()]||(()=>{}),NA=0;function kA(t){const[e,r]=w.useState(SA());return jr(()=>{r(s=>s??String(NA++))},[t]),e?`radix-${e}`:""}const EA=["top","right","bottom","left"],Xn=Math.min,lr=Math.max,dc=Math.round,ql=Math.floor,Yr=t=>({x:t,y:t}),PA={left:"right",right:"left",bottom:"top",top:"bottom"},TA={start:"end",end:"start"};function qf(t,e,r){return lr(t,Xn(e,r))}function vn(t,e){return typeof t=="function"?t(e):t}function xn(t){return t.split("-")[0]}function zi(t){return t.split("-")[1]}function Dh(t){return t==="x"?"y":"x"}function Ih(t){return t==="y"?"height":"width"}const AA=new Set(["top","bottom"]);function Gr(t){return AA.has(xn(t))?"y":"x"}function Lh(t){return Dh(Gr(t))}function RA(t,e,r){r===void 0&&(r=!1);const s=zi(t),a=Lh(t),l=Ih(a);let u=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(u=fc(u)),[u,fc(u)]}function OA(t){const e=fc(t);return[Wf(t),e,Wf(e)]}function Wf(t){return t.replace(/start|end/g,e=>TA[e])}const Rv=["left","right"],Ov=["right","left"],MA=["top","bottom"],DA=["bottom","top"];function IA(t,e,r){switch(t){case"top":case"bottom":return r?e?Ov:Rv:e?Rv:Ov;case"left":case"right":return e?MA:DA;default:return[]}}function LA(t,e,r,s){const a=zi(t);let l=IA(xn(t),r==="start",s);return a&&(l=l.map(u=>u+"-"+a),e&&(l=l.concat(l.map(Wf)))),l}function fc(t){return t.replace(/left|right|bottom|top/g,e=>PA[e])}function $A(t){return{top:0,right:0,bottom:0,left:0,...t}}function Xb(t){return typeof t!="number"?$A(t):{top:t,right:t,bottom:t,left:t}}function hc(t){const{x:e,y:r,width:s,height:a}=t;return{width:s,height:a,top:r,left:e,right:e+s,bottom:r+a,x:e,y:r}}function Mv(t,e,r){let{reference:s,floating:a}=t;const l=Gr(e),u=Lh(e),d=Ih(u),h=xn(e),m=l==="y",p=s.x+s.width/2-a.width/2,g=s.y+s.height/2-a.height/2,v=s[d]/2-a[d]/2;let b;switch(h){case"top":b={x:p,y:s.y-a.height};break;case"bottom":b={x:p,y:s.y+s.height};break;case"right":b={x:s.x+s.width,y:g};break;case"left":b={x:s.x-a.width,y:g};break;default:b={x:s.x,y:s.y}}switch(zi(e)){case"start":b[u]-=v*(r&&m?-1:1);break;case"end":b[u]+=v*(r&&m?-1:1);break}return b}const FA=async(t,e,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:l=[],platform:u}=r,d=l.filter(Boolean),h=await(u.isRTL==null?void 0:u.isRTL(e));let m=await u.getElementRects({reference:t,floating:e,strategy:a}),{x:p,y:g}=Mv(m,s,h),v=s,b={},_=0;for(let C=0;C<d.length;C++){const{name:j,fn:R}=d[C],{x:A,y:N,data:P,reset:D}=await R({x:p,y:g,initialPlacement:s,placement:v,strategy:a,middlewareData:b,rects:m,platform:u,elements:{reference:t,floating:e}});p=A??p,g=N??g,b={...b,[j]:{...b[j],...P}},D&&_<=50&&(_++,typeof D=="object"&&(D.placement&&(v=D.placement),D.rects&&(m=D.rects===!0?await u.getElementRects({reference:t,floating:e,strategy:a}):D.rects),{x:p,y:g}=Mv(m,v,h)),C=-1)}return{x:p,y:g,placement:v,strategy:a,middlewareData:b}};async function sa(t,e){var r;e===void 0&&(e={});const{x:s,y:a,platform:l,rects:u,elements:d,strategy:h}=t,{boundary:m="clippingAncestors",rootBoundary:p="viewport",elementContext:g="floating",altBoundary:v=!1,padding:b=0}=vn(e,t),_=Xb(b),j=d[v?g==="floating"?"reference":"floating":g],R=hc(await l.getClippingRect({element:(r=await(l.isElement==null?void 0:l.isElement(j)))==null||r?j:j.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:m,rootBoundary:p,strategy:h})),A=g==="floating"?{x:s,y:a,width:u.floating.width,height:u.floating.height}:u.reference,N=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),P=await(l.isElement==null?void 0:l.isElement(N))?await(l.getScale==null?void 0:l.getScale(N))||{x:1,y:1}:{x:1,y:1},D=hc(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:A,offsetParent:N,strategy:h}):A);return{top:(R.top-D.top+_.top)/P.y,bottom:(D.bottom-R.bottom+_.bottom)/P.y,left:(R.left-D.left+_.left)/P.x,right:(D.right-R.right+_.right)/P.x}}const UA=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:s,placement:a,rects:l,platform:u,elements:d,middlewareData:h}=e,{element:m,padding:p=0}=vn(t,e)||{};if(m==null)return{};const g=Xb(p),v={x:r,y:s},b=Lh(a),_=Ih(b),C=await u.getDimensions(m),j=b==="y",R=j?"top":"left",A=j?"bottom":"right",N=j?"clientHeight":"clientWidth",P=l.reference[_]+l.reference[b]-v[b]-l.floating[_],D=v[b]-l.reference[b],M=await(u.getOffsetParent==null?void 0:u.getOffsetParent(m));let L=M?M[N]:0;(!L||!await(u.isElement==null?void 0:u.isElement(M)))&&(L=d.floating[N]||l.floating[_]);const Q=P/2-D/2,re=L/2-C[_]/2-1,B=Xn(g[R],re),ye=Xn(g[A],re),ne=B,we=L-C[_]-ye,H=L/2-C[_]/2+Q,ce=qf(ne,H,we),G=!h.arrow&&zi(a)!=null&&H!==ce&&l.reference[_]/2-(H<ne?B:ye)-C[_]/2<0,ae=G?H<ne?H-ne:H-we:0;return{[b]:v[b]+ae,data:{[b]:ce,centerOffset:H-ce-ae,...G&&{alignmentOffset:ae}},reset:G}}}),BA=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,s;const{placement:a,middlewareData:l,rects:u,initialPlacement:d,platform:h,elements:m}=e,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:C=!0,...j}=vn(t,e);if((r=l.arrow)!=null&&r.alignmentOffset)return{};const R=xn(a),A=Gr(d),N=xn(d)===d,P=await(h.isRTL==null?void 0:h.isRTL(m.floating)),D=v||(N||!C?[fc(d)]:OA(d)),M=_!=="none";!v&&M&&D.push(...LA(d,C,_,P));const L=[d,...D],Q=await sa(e,j),re=[];let B=((s=l.flip)==null?void 0:s.overflows)||[];if(p&&re.push(Q[R]),g){const H=RA(a,u,P);re.push(Q[H[0]],Q[H[1]])}if(B=[...B,{placement:a,overflows:re}],!re.every(H=>H<=0)){var ye,ne;const H=(((ye=l.flip)==null?void 0:ye.index)||0)+1,ce=L[H];if(ce&&(!(g==="alignment"?A!==Gr(ce):!1)||B.every(V=>Gr(V.placement)===A?V.overflows[0]>0:!0)))return{data:{index:H,overflows:B},reset:{placement:ce}};let G=(ne=B.filter(ae=>ae.overflows[0]<=0).sort((ae,V)=>ae.overflows[1]-V.overflows[1])[0])==null?void 0:ne.placement;if(!G)switch(b){case"bestFit":{var we;const ae=(we=B.filter(V=>{if(M){const oe=Gr(V.placement);return oe===A||oe==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(oe=>oe>0).reduce((oe,ie)=>oe+ie,0)]).sort((V,oe)=>V[1]-oe[1])[0])==null?void 0:we[0];ae&&(G=ae);break}case"initialPlacement":G=d;break}if(a!==G)return{reset:{placement:G}}}return{}}}};function Dv(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Iv(t){return EA.some(e=>t[e]>=0)}const VA=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:s="referenceHidden",...a}=vn(t,e);switch(s){case"referenceHidden":{const l=await sa(e,{...a,elementContext:"reference"}),u=Dv(l,r.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:Iv(u)}}}case"escaped":{const l=await sa(e,{...a,altBoundary:!0}),u=Dv(l,r.floating);return{data:{escapedOffsets:u,escaped:Iv(u)}}}default:return{}}}}},Zb=new Set(["left","top"]);async function zA(t,e){const{placement:r,platform:s,elements:a}=t,l=await(s.isRTL==null?void 0:s.isRTL(a.floating)),u=xn(r),d=zi(r),h=Gr(r)==="y",m=Zb.has(u)?-1:1,p=l&&h?-1:1,g=vn(e,t);let{mainAxis:v,crossAxis:b,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return d&&typeof _=="number"&&(b=d==="end"?_*-1:_),h?{x:b*p,y:v*m}:{x:v*m,y:b*p}}const qA=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,s;const{x:a,y:l,placement:u,middlewareData:d}=e,h=await zA(e,t);return u===((r=d.offset)==null?void 0:r.placement)&&(s=d.arrow)!=null&&s.alignmentOffset?{}:{x:a+h.x,y:l+h.y,data:{...h,placement:u}}}}},WA=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:s,placement:a}=e,{mainAxis:l=!0,crossAxis:u=!1,limiter:d={fn:j=>{let{x:R,y:A}=j;return{x:R,y:A}}},...h}=vn(t,e),m={x:r,y:s},p=await sa(e,h),g=Gr(xn(a)),v=Dh(g);let b=m[v],_=m[g];if(l){const j=v==="y"?"top":"left",R=v==="y"?"bottom":"right",A=b+p[j],N=b-p[R];b=qf(A,b,N)}if(u){const j=g==="y"?"top":"left",R=g==="y"?"bottom":"right",A=_+p[j],N=_-p[R];_=qf(A,_,N)}const C=d.fn({...e,[v]:b,[g]:_});return{...C,data:{x:C.x-r,y:C.y-s,enabled:{[v]:l,[g]:u}}}}}},HA=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:s,placement:a,rects:l,middlewareData:u}=e,{offset:d=0,mainAxis:h=!0,crossAxis:m=!0}=vn(t,e),p={x:r,y:s},g=Gr(a),v=Dh(g);let b=p[v],_=p[g];const C=vn(d,e),j=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(h){const N=v==="y"?"height":"width",P=l.reference[v]-l.floating[N]+j.mainAxis,D=l.reference[v]+l.reference[N]-j.mainAxis;b<P?b=P:b>D&&(b=D)}if(m){var R,A;const N=v==="y"?"width":"height",P=Zb.has(xn(a)),D=l.reference[g]-l.floating[N]+(P&&((R=u.offset)==null?void 0:R[g])||0)+(P?0:j.crossAxis),M=l.reference[g]+l.reference[N]+(P?0:((A=u.offset)==null?void 0:A[g])||0)-(P?j.crossAxis:0);_<D?_=D:_>M&&(_=M)}return{[v]:b,[g]:_}}}},GA=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,s;const{placement:a,rects:l,platform:u,elements:d}=e,{apply:h=()=>{},...m}=vn(t,e),p=await sa(e,m),g=xn(a),v=zi(a),b=Gr(a)==="y",{width:_,height:C}=l.floating;let j,R;g==="top"||g==="bottom"?(j=g,R=v===(await(u.isRTL==null?void 0:u.isRTL(d.floating))?"start":"end")?"left":"right"):(R=g,j=v==="end"?"top":"bottom");const A=C-p.top-p.bottom,N=_-p.left-p.right,P=Xn(C-p[j],A),D=Xn(_-p[R],N),M=!e.middlewareData.shift;let L=P,Q=D;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(Q=N),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(L=A),M&&!v){const B=lr(p.left,0),ye=lr(p.right,0),ne=lr(p.top,0),we=lr(p.bottom,0);b?Q=_-2*(B!==0||ye!==0?B+ye:lr(p.left,p.right)):L=C-2*(ne!==0||we!==0?ne+we:lr(p.top,p.bottom))}await h({...e,availableWidth:Q,availableHeight:L});const re=await u.getDimensions(d.floating);return _!==re.width||C!==re.height?{reset:{rects:!0}}:{}}}};function Tc(){return typeof window<"u"}function qi(t){return ew(t)?(t.nodeName||"").toLowerCase():"#document"}function cr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Zr(t){var e;return(e=(ew(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ew(t){return Tc()?t instanceof Node||t instanceof cr(t).Node:!1}function Lr(t){return Tc()?t instanceof Element||t instanceof cr(t).Element:!1}function Xr(t){return Tc()?t instanceof HTMLElement||t instanceof cr(t).HTMLElement:!1}function Lv(t){return!Tc()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof cr(t).ShadowRoot}const KA=new Set(["inline","contents"]);function pa(t){const{overflow:e,overflowX:r,overflowY:s,display:a}=$r(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+r)&&!KA.has(a)}const QA=new Set(["table","td","th"]);function YA(t){return QA.has(qi(t))}const JA=[":popover-open",":modal"];function Ac(t){return JA.some(e=>{try{return t.matches(e)}catch{return!1}})}const XA=["transform","translate","scale","rotate","perspective"],ZA=["transform","translate","scale","rotate","perspective","filter"],eR=["paint","layout","strict","content"];function $h(t){const e=Fh(),r=Lr(t)?$r(t):t;return XA.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||ZA.some(s=>(r.willChange||"").includes(s))||eR.some(s=>(r.contain||"").includes(s))}function tR(t){let e=Zn(t);for(;Xr(e)&&!Fi(e);){if($h(e))return e;if(Ac(e))return null;e=Zn(e)}return null}function Fh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const rR=new Set(["html","body","#document"]);function Fi(t){return rR.has(qi(t))}function $r(t){return cr(t).getComputedStyle(t)}function Rc(t){return Lr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Zn(t){if(qi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Lv(t)&&t.host||Zr(t);return Lv(e)?e.host:e}function tw(t){const e=Zn(t);return Fi(e)?t.ownerDocument?t.ownerDocument.body:t.body:Xr(e)&&pa(e)?e:tw(e)}function ia(t,e,r){var s;e===void 0&&(e=[]),r===void 0&&(r=!0);const a=tw(t),l=a===((s=t.ownerDocument)==null?void 0:s.body),u=cr(a);if(l){const d=Hf(u);return e.concat(u,u.visualViewport||[],pa(a)?a:[],d&&r?ia(d):[])}return e.concat(a,ia(a,[],r))}function Hf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function rw(t){const e=$r(t);let r=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const a=Xr(t),l=a?t.offsetWidth:r,u=a?t.offsetHeight:s,d=dc(r)!==l||dc(s)!==u;return d&&(r=l,s=u),{width:r,height:s,$:d}}function Uh(t){return Lr(t)?t:t.contextElement}function Mi(t){const e=Uh(t);if(!Xr(e))return Yr(1);const r=e.getBoundingClientRect(),{width:s,height:a,$:l}=rw(e);let u=(l?dc(r.width):r.width)/s,d=(l?dc(r.height):r.height)/a;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const nR=Yr(0);function nw(t){const e=cr(t);return!Fh()||!e.visualViewport?nR:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sR(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==cr(t)?!1:e}function Rs(t,e,r,s){e===void 0&&(e=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),l=Uh(t);let u=Yr(1);e&&(s?Lr(s)&&(u=Mi(s)):u=Mi(t));const d=sR(l,r,s)?nw(l):Yr(0);let h=(a.left+d.x)/u.x,m=(a.top+d.y)/u.y,p=a.width/u.x,g=a.height/u.y;if(l){const v=cr(l),b=s&&Lr(s)?cr(s):s;let _=v,C=Hf(_);for(;C&&s&&b!==_;){const j=Mi(C),R=C.getBoundingClientRect(),A=$r(C),N=R.left+(C.clientLeft+parseFloat(A.paddingLeft))*j.x,P=R.top+(C.clientTop+parseFloat(A.paddingTop))*j.y;h*=j.x,m*=j.y,p*=j.x,g*=j.y,h+=N,m+=P,_=cr(C),C=Hf(_)}}return hc({width:p,height:g,x:h,y:m})}function Oc(t,e){const r=Rc(t).scrollLeft;return e?e.left+r:Rs(Zr(t)).left+r}function sw(t,e){const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-Oc(t,r),a=r.top+e.scrollTop;return{x:s,y:a}}function iR(t){let{elements:e,rect:r,offsetParent:s,strategy:a}=t;const l=a==="fixed",u=Zr(s),d=e?Ac(e.floating):!1;if(s===u||d&&l)return r;let h={scrollLeft:0,scrollTop:0},m=Yr(1);const p=Yr(0),g=Xr(s);if((g||!g&&!l)&&((qi(s)!=="body"||pa(u))&&(h=Rc(s)),Xr(s))){const b=Rs(s);m=Mi(s),p.x=b.x+s.clientLeft,p.y=b.y+s.clientTop}const v=u&&!g&&!l?sw(u,h):Yr(0);return{width:r.width*m.x,height:r.height*m.y,x:r.x*m.x-h.scrollLeft*m.x+p.x+v.x,y:r.y*m.y-h.scrollTop*m.y+p.y+v.y}}function oR(t){return Array.from(t.getClientRects())}function aR(t){const e=Zr(t),r=Rc(t),s=t.ownerDocument.body,a=lr(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),l=lr(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let u=-r.scrollLeft+Oc(t);const d=-r.scrollTop;return $r(s).direction==="rtl"&&(u+=lr(e.clientWidth,s.clientWidth)-a),{width:a,height:l,x:u,y:d}}const $v=25;function lR(t,e){const r=cr(t),s=Zr(t),a=r.visualViewport;let l=s.clientWidth,u=s.clientHeight,d=0,h=0;if(a){l=a.width,u=a.height;const p=Fh();(!p||p&&e==="fixed")&&(d=a.offsetLeft,h=a.offsetTop)}const m=Oc(s);if(m<=0){const p=s.ownerDocument,g=p.body,v=getComputedStyle(g),b=p.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,_=Math.abs(s.clientWidth-g.clientWidth-b);_<=$v&&(l-=_)}else m<=$v&&(l+=m);return{width:l,height:u,x:d,y:h}}const cR=new Set(["absolute","fixed"]);function uR(t,e){const r=Rs(t,!0,e==="fixed"),s=r.top+t.clientTop,a=r.left+t.clientLeft,l=Xr(t)?Mi(t):Yr(1),u=t.clientWidth*l.x,d=t.clientHeight*l.y,h=a*l.x,m=s*l.y;return{width:u,height:d,x:h,y:m}}function Fv(t,e,r){let s;if(e==="viewport")s=lR(t,r);else if(e==="document")s=aR(Zr(t));else if(Lr(e))s=uR(e,r);else{const a=nw(t);s={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return hc(s)}function iw(t,e){const r=Zn(t);return r===e||!Lr(r)||Fi(r)?!1:$r(r).position==="fixed"||iw(r,e)}function dR(t,e){const r=e.get(t);if(r)return r;let s=ia(t,[],!1).filter(d=>Lr(d)&&qi(d)!=="body"),a=null;const l=$r(t).position==="fixed";let u=l?Zn(t):t;for(;Lr(u)&&!Fi(u);){const d=$r(u),h=$h(u);!h&&d.position==="fixed"&&(a=null),(l?!h&&!a:!h&&d.position==="static"&&!!a&&cR.has(a.position)||pa(u)&&!h&&iw(t,u))?s=s.filter(p=>p!==u):a=d,u=Zn(u)}return e.set(t,s),s}function fR(t){let{element:e,boundary:r,rootBoundary:s,strategy:a}=t;const u=[...r==="clippingAncestors"?Ac(e)?[]:dR(e,this._c):[].concat(r),s],d=u[0],h=u.reduce((m,p)=>{const g=Fv(e,p,a);return m.top=lr(g.top,m.top),m.right=Xn(g.right,m.right),m.bottom=Xn(g.bottom,m.bottom),m.left=lr(g.left,m.left),m},Fv(e,d,a));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function hR(t){const{width:e,height:r}=rw(t);return{width:e,height:r}}function mR(t,e,r){const s=Xr(e),a=Zr(e),l=r==="fixed",u=Rs(t,!0,l,e);let d={scrollLeft:0,scrollTop:0};const h=Yr(0);function m(){h.x=Oc(a)}if(s||!s&&!l)if((qi(e)!=="body"||pa(a))&&(d=Rc(e)),s){const b=Rs(e,!0,l,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else a&&m();l&&!s&&a&&m();const p=a&&!s&&!l?sw(a,d):Yr(0),g=u.left+d.scrollLeft-h.x-p.x,v=u.top+d.scrollTop-h.y-p.y;return{x:g,y:v,width:u.width,height:u.height}}function nf(t){return $r(t).position==="static"}function Uv(t,e){if(!Xr(t)||$r(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Zr(t)===r&&(r=r.ownerDocument.body),r}function ow(t,e){const r=cr(t);if(Ac(t))return r;if(!Xr(t)){let a=Zn(t);for(;a&&!Fi(a);){if(Lr(a)&&!nf(a))return a;a=Zn(a)}return r}let s=Uv(t,e);for(;s&&YA(s)&&nf(s);)s=Uv(s,e);return s&&Fi(s)&&nf(s)&&!$h(s)?r:s||tR(t)||r}const pR=async function(t){const e=this.getOffsetParent||ow,r=this.getDimensions,s=await r(t.floating);return{reference:mR(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function gR(t){return $r(t).direction==="rtl"}const yR={convertOffsetParentRelativeRectToViewportRelativeRect:iR,getDocumentElement:Zr,getClippingRect:fR,getOffsetParent:ow,getElementRects:pR,getClientRects:oR,getDimensions:hR,getScale:Mi,isElement:Lr,isRTL:gR};function aw(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function vR(t,e){let r=null,s;const a=Zr(t);function l(){var d;clearTimeout(s),(d=r)==null||d.disconnect(),r=null}function u(d,h){d===void 0&&(d=!1),h===void 0&&(h=1),l();const m=t.getBoundingClientRect(),{left:p,top:g,width:v,height:b}=m;if(d||e(),!v||!b)return;const _=ql(g),C=ql(a.clientWidth-(p+v)),j=ql(a.clientHeight-(g+b)),R=ql(p),N={rootMargin:-_+"px "+-C+"px "+-j+"px "+-R+"px",threshold:lr(0,Xn(1,h))||1};let P=!0;function D(M){const L=M[0].intersectionRatio;if(L!==h){if(!P)return u();L?u(!1,L):s=setTimeout(()=>{u(!1,1e-7)},1e3)}L===1&&!aw(m,t.getBoundingClientRect())&&u(),P=!1}try{r=new IntersectionObserver(D,{...N,root:a.ownerDocument})}catch{r=new IntersectionObserver(D,N)}r.observe(t)}return u(!0),l}function xR(t,e,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:h=!1}=s,m=Uh(t),p=a||l?[...m?ia(m):[],...ia(e)]:[];p.forEach(R=>{a&&R.addEventListener("scroll",r,{passive:!0}),l&&R.addEventListener("resize",r)});const g=m&&d?vR(m,r):null;let v=-1,b=null;u&&(b=new ResizeObserver(R=>{let[A]=R;A&&A.target===m&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var N;(N=b)==null||N.observe(e)})),r()}),m&&!h&&b.observe(m),b.observe(e));let _,C=h?Rs(t):null;h&&j();function j(){const R=Rs(t);C&&!aw(C,R)&&r(),C=R,_=requestAnimationFrame(j)}return r(),()=>{var R;p.forEach(A=>{a&&A.removeEventListener("scroll",r),l&&A.removeEventListener("resize",r)}),g?.(),(R=b)==null||R.disconnect(),b=null,h&&cancelAnimationFrame(_)}}const bR=qA,wR=WA,jR=BA,_R=GA,CR=VA,Bv=UA,SR=HA,NR=(t,e,r)=>{const s=new Map,a={platform:yR,...r},l={...a.platform,_c:s};return FA(t,e,{...a,platform:l})};var kR=typeof document<"u",ER=function(){},Jl=kR?w.useLayoutEffect:ER;function mc(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,s,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(s=r;s--!==0;)if(!mc(t[s],e[s]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(e).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(e,a[s]))return!1;for(s=r;s--!==0;){const l=a[s];if(!(l==="_owner"&&t.$$typeof)&&!mc(t[l],e[l]))return!1}return!0}return t!==t&&e!==e}function lw(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Vv(t,e){const r=lw(t);return Math.round(e*r)/r}function sf(t){const e=w.useRef(t);return Jl(()=>{e.current=t}),e}function PR(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:l,floating:u}={},transform:d=!0,whileElementsMounted:h,open:m}=t,[p,g]=w.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=w.useState(s);mc(v,s)||b(s);const[_,C]=w.useState(null),[j,R]=w.useState(null),A=w.useCallback(V=>{V!==M.current&&(M.current=V,C(V))},[]),N=w.useCallback(V=>{V!==L.current&&(L.current=V,R(V))},[]),P=l||_,D=u||j,M=w.useRef(null),L=w.useRef(null),Q=w.useRef(p),re=h!=null,B=sf(h),ye=sf(a),ne=sf(m),we=w.useCallback(()=>{if(!M.current||!L.current)return;const V={placement:e,strategy:r,middleware:v};ye.current&&(V.platform=ye.current),NR(M.current,L.current,V).then(oe=>{const ie={...oe,isPositioned:ne.current!==!1};H.current&&!mc(Q.current,ie)&&(Q.current=ie,Cc.flushSync(()=>{g(ie)}))})},[v,e,r,ye,ne]);Jl(()=>{m===!1&&Q.current.isPositioned&&(Q.current.isPositioned=!1,g(V=>({...V,isPositioned:!1})))},[m]);const H=w.useRef(!1);Jl(()=>(H.current=!0,()=>{H.current=!1}),[]),Jl(()=>{if(P&&(M.current=P),D&&(L.current=D),P&&D){if(B.current)return B.current(P,D,we);we()}},[P,D,we,B,re]);const ce=w.useMemo(()=>({reference:M,floating:L,setReference:A,setFloating:N}),[A,N]),G=w.useMemo(()=>({reference:P,floating:D}),[P,D]),ae=w.useMemo(()=>{const V={position:r,left:0,top:0};if(!G.floating)return V;const oe=Vv(G.floating,p.x),ie=Vv(G.floating,p.y);return d?{...V,transform:"translate("+oe+"px, "+ie+"px)",...lw(G.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:oe,top:ie}},[r,d,G.floating,p.x,p.y]);return w.useMemo(()=>({...p,update:we,refs:ce,elements:G,floatingStyles:ae}),[p,we,ce,G,ae])}const TR=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:s,padding:a}=typeof t=="function"?t(r):t;return s&&e(s)?s.current!=null?Bv({element:s.current,padding:a}).fn(r):{}:s?Bv({element:s,padding:a}).fn(r):{}}}},AR=(t,e)=>({...bR(t),options:[t,e]}),RR=(t,e)=>({...wR(t),options:[t,e]}),OR=(t,e)=>({...SR(t),options:[t,e]}),MR=(t,e)=>({...jR(t),options:[t,e]}),DR=(t,e)=>({..._R(t),options:[t,e]}),IR=(t,e)=>({...CR(t),options:[t,e]}),LR=(t,e)=>({...TR(t),options:[t,e]});var $R="Arrow",cw=w.forwardRef((t,e)=>{const{children:r,width:s=10,height:a=5,...l}=t;return o.jsx(Mt.svg,{...l,ref:e,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});cw.displayName=$R;var FR=cw;function UR(t){const[e,r]=w.useState(void 0);return jr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let u,d;if("borderBoxSize"in l){const h=l.borderBoxSize,m=Array.isArray(h)?h[0]:h;u=m.inlineSize,d=m.blockSize}else u=t.offsetWidth,d=t.offsetHeight;r({width:u,height:d})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else r(void 0)},[t]),e}var Bh="Popper",[uw,dw]=fa(Bh),[BR,fw]=uw(Bh),hw=t=>{const{__scopePopper:e,children:r}=t,[s,a]=w.useState(null);return o.jsx(BR,{scope:e,anchor:s,onAnchorChange:a,children:r})};hw.displayName=Bh;var mw="PopperAnchor",pw=w.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:s,...a}=t,l=fw(mw,r),u=w.useRef(null),d=Ir(e,u),h=w.useRef(null);return w.useEffect(()=>{const m=h.current;h.current=s?.current||u.current,m!==h.current&&l.onAnchorChange(h.current)}),s?null:o.jsx(Mt.div,{...a,ref:d})});pw.displayName=mw;var Vh="PopperContent",[VR,zR]=uw(Vh),gw=w.forwardRef((t,e)=>{const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:l="center",alignOffset:u=0,arrowPadding:d=0,avoidCollisions:h=!0,collisionBoundary:m=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:_,...C}=t,j=fw(Vh,r),[R,A]=w.useState(null),N=Ir(e,ue=>A(ue)),[P,D]=w.useState(null),M=UR(P),L=M?.width??0,Q=M?.height??0,re=s+(l!=="center"?"-"+l:""),B=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},ye=Array.isArray(m)?m:[m],ne=ye.length>0,we={padding:B,boundary:ye.filter(WR),altBoundary:ne},{refs:H,floatingStyles:ce,placement:G,isPositioned:ae,middlewareData:V}=PR({strategy:"fixed",placement:re,whileElementsMounted:(...ue)=>xR(...ue,{animationFrame:b==="always"}),elements:{reference:j.anchor},middleware:[AR({mainAxis:a+Q,alignmentAxis:u}),h&&RR({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?OR():void 0,...we}),h&&MR({...we}),DR({...we,apply:({elements:ue,rects:Ne,availableWidth:Oe,availableHeight:Y})=>{const{width:K,height:De}=Ne.reference,_e=ue.floating.style;_e.setProperty("--radix-popper-available-width",`${Oe}px`),_e.setProperty("--radix-popper-available-height",`${Y}px`),_e.setProperty("--radix-popper-anchor-width",`${K}px`),_e.setProperty("--radix-popper-anchor-height",`${De}px`)}}),P&&LR({element:P,padding:d}),HR({arrowWidth:L,arrowHeight:Q}),v&&IR({strategy:"referenceHidden",...we})]}),[oe,ie]=xw(G),E=yn(_);jr(()=>{ae&&E?.()},[ae,E]);const I=V.arrow?.x,X=V.arrow?.y,le=V.arrow?.centerOffset!==0,[be,Ce]=w.useState();return jr(()=>{R&&Ce(window.getComputedStyle(R).zIndex)},[R]),o.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ce,transform:ae?ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:be,"--radix-popper-transform-origin":[V.transformOrigin?.x,V.transformOrigin?.y].join(" "),...V.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(VR,{scope:r,placedSide:oe,onArrowChange:D,arrowX:I,arrowY:X,shouldHideArrow:le,children:o.jsx(Mt.div,{"data-side":oe,"data-align":ie,...C,ref:N,style:{...C.style,animation:ae?void 0:"none"}})})})});gw.displayName=Vh;var yw="PopperArrow",qR={top:"bottom",right:"left",bottom:"top",left:"right"},vw=w.forwardRef(function(e,r){const{__scopePopper:s,...a}=e,l=zR(yw,s),u=qR[l.placedSide];return o.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:o.jsx(FR,{...a,ref:r,style:{...a.style,display:"block"}})})});vw.displayName=yw;function WR(t){return t!==null}var HR=t=>({name:"transformOrigin",options:t,fn(e){const{placement:r,rects:s,middlewareData:a}=e,u=a.arrow?.centerOffset!==0,d=u?0:t.arrowWidth,h=u?0:t.arrowHeight,[m,p]=xw(r),g={start:"0%",center:"50%",end:"100%"}[p],v=(a.arrow?.x??0)+d/2,b=(a.arrow?.y??0)+h/2;let _="",C="";return m==="bottom"?(_=u?g:`${v}px`,C=`${-h}px`):m==="top"?(_=u?g:`${v}px`,C=`${s.floating.height+h}px`):m==="right"?(_=`${-h}px`,C=u?g:`${b}px`):m==="left"&&(_=`${s.floating.width+h}px`,C=u?g:`${b}px`),{data:{x:_,y:C}}}});function xw(t){const[e,r="center"]=t.split("-");return[e,r]}var GR=hw,KR=pw,QR=gw,YR=vw,[Mc]=fa("Tooltip",[dw]),Dc=dw(),bw="TooltipProvider",JR=700,Gf="tooltip.open",[XR,zh]=Mc(bw),ww=t=>{const{__scopeTooltip:e,delayDuration:r=JR,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:l}=t,u=w.useRef(!0),d=w.useRef(!1),h=w.useRef(0);return w.useEffect(()=>{const m=h.current;return()=>window.clearTimeout(m)},[]),o.jsx(XR,{scope:e,isOpenDelayedRef:u,delayDuration:r,onOpen:w.useCallback(()=>{window.clearTimeout(h.current),u.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>u.current=!0,s)},[s]),isPointerInTransitRef:d,onPointerInTransitChange:w.useCallback(m=>{d.current=m},[]),disableHoverableContent:a,children:l})};ww.displayName=bw;var oa="Tooltip",[ZR,ga]=Mc(oa),jw=t=>{const{__scopeTooltip:e,children:r,open:s,defaultOpen:a,onOpenChange:l,disableHoverableContent:u,delayDuration:d}=t,h=zh(oa,t.__scopeTooltip),m=Dc(e),[p,g]=w.useState(null),v=kA(),b=w.useRef(0),_=u??h.disableHoverableContent,C=d??h.delayDuration,j=w.useRef(!1),[R,A]=U0({prop:s,defaultProp:a??!1,onChange:L=>{L?(h.onOpen(),document.dispatchEvent(new CustomEvent(Gf))):h.onClose(),l?.(L)},caller:oa}),N=w.useMemo(()=>R?j.current?"delayed-open":"instant-open":"closed",[R]),P=w.useCallback(()=>{window.clearTimeout(b.current),b.current=0,j.current=!1,A(!0)},[A]),D=w.useCallback(()=>{window.clearTimeout(b.current),b.current=0,A(!1)},[A]),M=w.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{j.current=!0,A(!0),b.current=0},C)},[C,A]);return w.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),o.jsx(GR,{...m,children:o.jsx(ZR,{scope:e,contentId:v,open:R,stateAttribute:N,trigger:p,onTriggerChange:g,onTriggerEnter:w.useCallback(()=>{h.isOpenDelayedRef.current?M():P()},[h.isOpenDelayedRef,M,P]),onTriggerLeave:w.useCallback(()=>{_?D():(window.clearTimeout(b.current),b.current=0)},[D,_]),onOpen:P,onClose:D,disableHoverableContent:_,children:r})})};jw.displayName=oa;var Kf="TooltipTrigger",_w=w.forwardRef((t,e)=>{const{__scopeTooltip:r,...s}=t,a=ga(Kf,r),l=zh(Kf,r),u=Dc(r),d=w.useRef(null),h=Ir(e,d,a.onTriggerChange),m=w.useRef(!1),p=w.useRef(!1),g=w.useCallback(()=>m.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),o.jsx(KR,{asChild:!0,...u,children:o.jsx(Mt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:h,onPointerMove:kt(t.onPointerMove,v=>{v.pointerType!=="touch"&&!p.current&&!l.isPointerInTransitRef.current&&(a.onTriggerEnter(),p.current=!0)}),onPointerLeave:kt(t.onPointerLeave,()=>{a.onTriggerLeave(),p.current=!1}),onPointerDown:kt(t.onPointerDown,()=>{a.open&&a.onClose(),m.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:kt(t.onFocus,()=>{m.current||a.onOpen()}),onBlur:kt(t.onBlur,a.onClose),onClick:kt(t.onClick,a.onClose)})})});_w.displayName=Kf;var qh="TooltipPortal",[eO,tO]=Mc(qh,{forceMount:void 0}),Cw=t=>{const{__scopeTooltip:e,forceMount:r,children:s,container:a}=t,l=ga(qh,e);return o.jsx(eO,{scope:e,forceMount:r,children:o.jsx(Sc,{present:r||l.open,children:o.jsx(wh,{asChild:!0,container:a,children:s})})})};Cw.displayName=qh;var Ui="TooltipContent",Sw=w.forwardRef((t,e)=>{const r=tO(Ui,t.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...l}=t,u=ga(Ui,t.__scopeTooltip);return o.jsx(Sc,{present:s||u.open,children:u.disableHoverableContent?o.jsx(Nw,{side:a,...l,ref:e}):o.jsx(rO,{side:a,...l,ref:e})})}),rO=w.forwardRef((t,e)=>{const r=ga(Ui,t.__scopeTooltip),s=zh(Ui,t.__scopeTooltip),a=w.useRef(null),l=Ir(e,a),[u,d]=w.useState(null),{trigger:h,onClose:m}=r,p=a.current,{onPointerInTransitChange:g}=s,v=w.useCallback(()=>{d(null),g(!1)},[g]),b=w.useCallback((_,C)=>{const j=_.currentTarget,R={x:_.clientX,y:_.clientY},A=oO(R,j.getBoundingClientRect()),N=aO(R,A),P=lO(C.getBoundingClientRect()),D=uO([...N,...P]);d(D),g(!0)},[g]);return w.useEffect(()=>()=>v(),[v]),w.useEffect(()=>{if(h&&p){const _=j=>b(j,p),C=j=>b(j,h);return h.addEventListener("pointerleave",_),p.addEventListener("pointerleave",C),()=>{h.removeEventListener("pointerleave",_),p.removeEventListener("pointerleave",C)}}},[h,p,b,v]),w.useEffect(()=>{if(u){const _=C=>{const j=C.target,R={x:C.clientX,y:C.clientY},A=h?.contains(j)||p?.contains(j),N=!cO(R,u);A?v():N&&(v(),m())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[h,p,u,m,v]),o.jsx(Nw,{...t,ref:l})}),[nO,sO]=Mc(oa,{isInside:!1}),iO=cE("TooltipContent"),Nw=w.forwardRef((t,e)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:l,onPointerDownOutside:u,...d}=t,h=ga(Ui,r),m=Dc(r),{onClose:p}=h;return w.useEffect(()=>(document.addEventListener(Gf,p),()=>document.removeEventListener(Gf,p)),[p]),w.useEffect(()=>{if(h.trigger){const g=v=>{v.target?.contains(h.trigger)&&p()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[h.trigger,p]),o.jsx(bh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:g=>g.preventDefault(),onDismiss:p,children:o.jsxs(QR,{"data-state":h.stateAttribute,...m,...d,ref:e,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(iO,{children:s}),o.jsx(nO,{scope:r,isInside:!0,children:o.jsx(OE,{id:h.contentId,role:"tooltip",children:a||s})})]})})});Sw.displayName=Ui;var kw="TooltipArrow",Ew=w.forwardRef((t,e)=>{const{__scopeTooltip:r,...s}=t,a=Dc(r);return sO(kw,r).isInside?null:o.jsx(YR,{...a,...s,ref:e})});Ew.displayName=kw;function oO(t,e){const r=Math.abs(e.top-t.y),s=Math.abs(e.bottom-t.y),a=Math.abs(e.right-t.x),l=Math.abs(e.left-t.x);switch(Math.min(r,s,a,l)){case l:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function aO(t,e,r=5){const s=[];switch(e){case"top":s.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":s.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":s.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":s.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return s}function lO(t){const{top:e,right:r,bottom:s,left:a}=t;return[{x:a,y:e},{x:r,y:e},{x:r,y:s},{x:a,y:s}]}function cO(t,e){const{x:r,y:s}=t;let a=!1;for(let l=0,u=e.length-1;l<e.length;u=l++){const d=e[l],h=e[u],m=d.x,p=d.y,g=h.x,v=h.y;p>s!=v>s&&r<(g-m)*(s-p)/(v-p)+m&&(a=!a)}return a}function uO(t){const e=t.slice();return e.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),dO(e)}function dO(t){if(t.length<=1)return t.slice();const e=[];for(let s=0;s<t.length;s++){const a=t[s];for(;e.length>=2;){const l=e[e.length-1],u=e[e.length-2];if((l.x-u.x)*(a.y-u.y)>=(l.y-u.y)*(a.x-u.x))e.pop();else break}e.push(a)}e.pop();const r=[];for(let s=t.length-1;s>=0;s--){const a=t[s];for(;r.length>=2;){const l=r[r.length-1],u=r[r.length-2];if((l.x-u.x)*(a.y-u.y)>=(l.y-u.y)*(a.x-u.x))r.pop();else break}r.push(a)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var fO=ww,hO=jw,mO=_w,pO=Cw,gO=Sw,yO=Ew;function vO({user:t,className:e}){if(!t)return null;const r="https://api.dicebear.com/7.x/avataaars/svg?seed="+encodeURIComponent(t.email),s=t.user_metadata?.name||t.email,a=t.user_metadata?.avatar_url||r;return o.jsx(fO,{children:o.jsxs(hO,{children:[o.jsx(mO,{asChild:!0,children:o.jsxs(jA,{className:`relative inline-flex h-8 w-8 ${e}`,children:[o.jsx(_A,{src:a,className:"h-full w-full rounded-full object-cover",alt:s}),o.jsx(CA,{className:"flex h-full w-full items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:s.charAt(0).toUpperCase()})]})}),o.jsx(pO,{children:o.jsxs(gO,{className:"rounded-md bg-white px-3 py-1.5 text-sm text-gray-900 shadow-md dark:bg-gray-800 dark:text-gray-100",sideOffset:5,children:[s,o.jsx(yO,{className:"fill-current text-white dark:text-gray-800"})]})})]})})}const xO=ob("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xe=rt.forwardRef(({className:t,variant:e,size:r,asChild:s=!1,...a},l)=>{const u=s?aE:"button";return o.jsx(u,{className:Ls(xO({variant:e,size:r,className:t})),ref:l,...a})});xe.displayName="Button";const Pw=w.createContext(),bO={es:{nav:{home:"Inicio",products:"Productos",remittances:"Remesas",admin:"Administracin",dashboard:"Panel de Control",settings:"Configuracin",cart:"Carrito",userPanel:"Mi Panel",userManagement:"Gestin de Usuarios"},home:{hero:{cta:{products:"Ver Productos"}},features:{title:"Funcionalidades Principales",subtitle:"Todo lo que necesitas para hacer crecer tu negocio digital",products:{title:"Venta de Productos",description:"Plataforma completa para vendedores independientes con clculo automtico de precios"},remittances:{title:"Remesas a Cuba",description:"Enva dinero a Cuba desde USA y Espaa de forma rpida y segura"},analytics:{title:"Panel de Ganancias",description:"Visualiza tus ganancias diarias y mensuales en tiempo real"},vendors:{title:"Gestin de Vendedores",description:"Herramientas completas para que vendedores independientes gestionen su inventario"}},testimonials:{title:"Lo que dicen nuestros clientes",subtitle:"Experiencias reales de usuarios satisfechos con nuestra plataforma."}},products:{title:"Catlogo de Productos",subtitle:"Descubre productos y combos para enviar a Cuba con precios competitivos",searchPlaceholder:"Buscar productos...",categories:{all:"Todas las Categoras"},exchangeRate:"Tasa de Cambio Actual",addToCart:"Agregar al Carrito",vendor:"Vendedor",noProducts:"No se encontraron productos",noProductsDesc:"Intenta con otros trminos de bsqueda o categoras",addProduct:"Agregar Producto",addedToCart:"Producto agregado",addedToCartDesc:"se agreg al carrito exitosamente",detail:{previous:"Anterior",next:"Siguiente",backToProducts:" Volver a Productos",backToCombos:" Volver a Combos",continueToProducts:"Continuar a Productos ",continueToCombos:"Continuar a Combos ",price:"Precio",basePrice:"Precio Base",category:"Categora",description:"Descripcin",stock:"Stock Disponible",expiryDate:"Fecha de Vencimiento",currency:"Moneda",includedProducts:"Productos Incluidos",profitMargin:"Margen de Ganancia",comboDetails:"Detalles del Combo",productDetails:"Detalles del Producto",inStock:"En Stock",outOfStock:"Agotado",units:"unidades"}},remittances:{title:"Remesas a Cuba",subtitle:"Enva dinero a Cuba desde USA y Espaa de forma rpida y segura",calculator:"Calculadora de Remesas",amount:"Cantidad a Enviar (USD)",country:"Pas de Destino",selectCountry:"Seleccionar pas...",currentRate:"Tasa Actual",popular:"Popular",rate:"Tasa",fee:"Comisin",time:"Tiempo",youReceive:"Recibes",send:"Enviar",howItWorks:"Cmo Funciona?",step1:{title:"Selecciona el Pas",description:"Elige el pas de destino y la cantidad a enviar"},step2:{title:"Confirma los Datos",description:"Verifica la informacin del destinatario"},step3:{title:"Recibe Confirmacin",description:"El dinero llega en el tiempo estimado"},recipient:{title:"Datos del Destinatario",deliveryMethod:"Mtodo de Entrega",cash:"Efectivo",transfer:"Transferencia",currency:"Moneda",fullName:"Nombre Completo",bankName:"Nombre del Banco",accountNumber:"Nmero de Cuenta",confirm:"Confirmar y Enviar"}},vendor:{title:"Gestin de la Plataforma",subtitle:"Gestiona productos, categoras, combos y ms.",tabs:{inventory:"Inventario",categories:"Categoras",combos:"Combos",management:"Gestin"},actions:{addProduct:"Agregar Producto",createCombo:"Crear Combo"},addProduct:{title:"Agregar Nuevo Producto",editTitle:"Editar Producto",cancel:"Cancelar",name:"Nombre del Producto",namePlaceholder:"Ej: iPhone 15 Pro Max",description:"Descripcin",descriptionPlaceholder:"Describe las caractersticas principales...",category:"Categora",basePrice:"Precio Base",currency:"Moneda",image:"Imagen del Producto",upload:"Subir archivo",finalPrice:"Precio Final",save:"Guardar Producto"},inventory:{product:"Producto",stock:"Existencias",price:"Precio Final",expiryDate:"Fecha de Caducidad"},categories:{manage:"Gestionar Categoras",new:"Nueva categora",name_es:"Nombre (ES)",name_en:"Nombre (EN)",id:"ID"},combos:{title:"Gestin de Combos",new:"Crear Nuevo Combo",edit:"Editar Combo",name:"Nombre del Combo",profitMargin:"Margen de Ganancia (%)",shipping:"Envo",free:"Gratis",discount:"Descuento (%)",paid:"Pagado",shippingCost:"Costo de Envo",products:"Productos en el Combo",addProduct:"Agregar Producto",basePrice:"Precio Base Total",finalPrice:"Precio Final",coverImage:"Imagen de Portada",save:"Guardar Combo"},management:{title:"Gestin General",payments:"Gestin de Pagos",testimonials:"Gestin de Testimonios",users:"Gestin de Usuarios",show:"Mostrar",hide:"Ocultar",activate:"Activar",deactivate:"Desactivar",delete:"Eliminar"},validation:{error:"Error de Validacin",fillFields:"Por favor completa todos los campos requeridos"},productAdded:"Producto agregado exitosamente",productUpdated:"Producto actualizado exitosamente",categoryAdded:"Categora agregada",categoryRemoved:"Categora eliminada",comboAdded:"Combo creado exitosamente",comboUpdated:"Combo actualizado exitosamente"},dashboard:{title:"Panel de Control",subtitle:"Visualizacin completa de ganancias y mtricas del negocio",privateAccess:"Acceso Privado",adminOnly:"Esta seccin es solo para administradores.",refresh:"Actualizar",stats:{dailyRevenue:"Ingresos Diarios",monthlyRevenue:"Ingresos Mensuales",dailyProfit:"Ganancia Diaria",monthlyProfit:"Ganancia Mensual",totalProducts:"Total de Productos",totalCombos:"Total de Combos",pendingOrders:"Pedidos Pendientes",completedOrders:"Pedidos Completados",totalUsers:"Total de Usuarios",activeProducts:"Productos Activos",siteVisits:"Visitas al Sitio"},profitBreakdown:"Desglose de Ganancias",dailyBreakdown:"Desglose Diario",monthlyBreakdown:"Desglose Mensual",grossRevenue:"Ingresos Brutos",costs:"Costos",netProfit:"Ganancia Neta",profitMargin:"Margen de Ganancia",orderSummary:"Resumen de Pedidos",pending:"Pendientes",completed:"Completados",overviewTab:"Resumen General",ordersTab:"Historial de rdenes",orderStatus:{paymentPending:"Pago Pendiente",paymentValidated:"Pago Validado",processing:"En Procesamiento",shipped:"Enviado",delivered:"Entregado",cancelled:"Cancelado",totalActive:"Total Activas"},analyticsTitle:"Anlisis y Estadsticas",selectCurrency:"Seleccionar Moneda",expirationWarning:{title:"Alerta de Caducidad",description:"Hay {count} producto(s) prximos a caducar en los siguientes 30 das."},visits:{title:"Visitas al Sitio",weekly:"Semanal",monthly:"Mensual",yearly:"Anual",total:"Total",thisWeek:"Esta Semana",thisMonth:"Este Mes",thisYear:"Este Ao",allTime:"Histrico"}},settings:{title:"Ajustes Generales",subtitle:"Gestiona la configuracin clave de tu plataforma.",financial:{title:"Ajustes Financieros",usdToLocal:"USD a Moneda Nacional",productProfit:"Ganancia Productos (%)",comboProfit:"Ganancia Combos (%)",remittanceProfit:"Ganancia Remesas (%)",save:"Guardar Ajustes",currencies:"Gestin de Monedas",addCurrency:"Agregar Moneda",code:"Cdigo (ej: USD, EUR, CUP)",nameES:"Nombre (Espaol)",nameEN:"Nombre (Ingls)",rate:"Tasa vs USD",symbol:"Smbolo",active:"Activa",updateCurrency:"Actualizar Moneda",currencyCreated:"Moneda creada",currencyUpdated:"Moneda actualizada",currencyDeleted:"Moneda eliminada"},zelle:{title:"Cuentas Zelle",add:"Agregar Cuenta Zelle",email:"Email",name:"Nombre",assignTo:"Asignar a",products:"Venta de Productos",remittances:"Remesas",active:"Activa"},visual:{title:"Ajustes Visuales",logo:"Logo del Sitio",favicon:"Favicon",slides:"Diapositivas de Portada",addSlide:"Agregar Diapositiva",image:"Imagen (URL o Archivo)",imageType:"Tipo de Imagen",url:"URL",upload:"Subir",mainText:"Texto Principal",secondaryText:"Texto Secundario",text_es:"Texto (ES)",text_en:"Texto (EN)",linkUrl:"Enlace (URL)",order:"Orden",active:"Activa",save:"Guardar Ajustes"},notifications:{title:"Ajustes de Notificacin",whatsapp:"Nmero de WhatsApp para Notificaciones",adminEmail:"Email de Administracin para Notificaciones",save:"Guardar Ajustes"},saveSuccess:"Ajustes guardados exitosamente"},cart:{title:"Tu Carrito de Compras",empty:"Tu carrito est vaco.",browse:"Explorar productos",summary:"Resumen del Pedido",subtotal:"Subtotal",shipping:"Envo",free:"Gratis",total:"Total",checkout:"Proceder al Pago",payment:{title:"Realizar Pago",instructionsTitle:"Instrucciones de Pago",instructions:"Copia el ID de la compra y pgalo en la descripcin de la transferencia Zelle. Enva el comprobante a info@papuenvios.com o sbelo directamente aqu. El pago estar sujeto a validacin.",accountInfo:"Datos de la Cuenta Zelle",purchaseId:"ID de la Compra",copy:"Copiado",amount:"Monto a Pagar",uploadProof:"Subir Comprobante de Pago",confirm:"Confirmar Pago",recipientTitle:"Datos de Entrega/Destinatario"}},auth:{login:"Iniciar Sesin",loginTitle:"Bienvenido de Nuevo",loginSubtitle:"Inicia sesin para acceder a tu cuenta.",email:"Correo Electrnico",password:"Contrasea",loginWithGoogle:"Iniciar Sesin con Google",or:"O",loginSuccess:"Inicio de sesin exitoso!",loginError:"Credenciales invlidas. Por favor, intenta de nuevo.",logoutSuccess:"Sesin cerrada exitosamente.",loginRequired:"Inicio de Sesin Requerido",loginToCheckout:"Por favor, inicia sesin para continuar con el pago."},userPanel:{title:"Mi Panel de Usuario",welcome:"Bienvenido, {name}",myOrders:"Mis Pedidos",noOrders:"An no tienes pedidos.",status:{pending:"Pendiente",validated:"Validado",rejected:"Rechazado"}},adminOrders:{title:"Historial de rdenes",subtitle:"Gestin completa de todas las rdenes del sistema",stats:{total:"Total",pending:"Pendientes",validated:"Validadas",rejected:"Rechazadas",completed:"Completadas",revenue:"Ingresos"},filters:{title:"Filtros de Bsqueda",clear:"Limpiar Filtros",search:"Buscar",searchPlaceholder:"Orden, usuario, email o producto...",status:"Estado de la Orden",allStatuses:"Todos los Estados",orderType:"Tipo de Orden",allTypes:"Todos",startDate:"Fecha Inicio",endDate:"Fecha Fin",apply:"Aplicar Filtros"},table:{order:"Orden",user:"Usuario",date:"Fecha",type:"Tipo",items:"Items",total:"Total",paymentStatus:{label:"Estado Pago",pending:"Pago Pendiente",validated:"Pago Validado (Listo para Procesar)",rejected:"Pago Rechazado"},orderStatus:{label:"Estado Orden",pending:"Pendiente",processing:"En Procesamiento",shipped:"Enviado",delivered:"Entregado",completed:"Completado",cancelled:"Cancelado"},actions:"Acciones"},types:{products:"Productos",remittance:"Remesa",mixed:"Mixto"},actions:{view:"Ver",start:"Iniciar",ship:"Enviar",proof:"Evidencia",complete:"Completar",cancel:"Cancelar",processing:"Procesando...",loading:"Cargando...",completing:"Completando..."},messages:{noOrders:"No se encontraron rdenes",retry:"Reintentar",confirmStart:"Iniciar procesamiento de la orden {orderNumber}?",confirmComplete:"Marcar la orden {orderNumber} como completada?",confirmCancel:"Est seguro de cancelar esta orden? Esta accin liberar el inventario reservado.",enterTracking:"Ingrese nmero de tracking (opcional) para la orden {orderNumber}:",enterCancelReason:"Ingrese razn de cancelacin para la orden {orderNumber}:",cancelReasonRequired:"Debe especificar una razn para cancelar",startSuccess:'Orden movida a estado "En Procesamiento"',shipSuccess:'Orden marcada como "Enviada"',deliverSuccess:'Evidencia de entrega subida exitosamente. Orden marcada como "Entregada"',completeSuccess:"Orden completada exitosamente",cancelSuccess:"Orden cancelada exitosamente",error:"Error",selectImage:"Seleccione una imagen de evidencia",invalidImage:"Por favor seleccione una imagen vlida",imageTooLarge:"El archivo es muy grande. Mximo 5MB"},deliveryModal:{title:"Subir Evidencia de Entrega",orderLabel:"Orden:",customerLabel:"Cliente:",selectPhoto:"Seleccionar Foto de Evidencia",clickToUpload:"Click para subir",dragHere:"o arrastra aqu",fileTypes:"PNG, JPG, JPEG (MAX. 5MB)",imageLoaded:'Imagen cargada. Haga click en "Subir Evidencia" para confirmar.',note:"Nota:",noteText:'Al subir la evidencia, la orden se marcar automticamente como "Entregada". El cliente podr ver la foto de evidencia.',cancel:"Cancelar",submit:"Subir Evidencia",uploading:"Subiendo..."},days:{singular:"da",plural:"das"},modals:{confirm:"Confirmar",cancel:"Cancelar",submit:"Enviar",startTitle:"Iniciar Procesamiento",completeTitle:"Completar Orden",cancelTitle:"Cancelar Orden",trackingTitle:"Nmero de Tracking",cancelReasonTitle:"Razn de Cancelacin"}},users:{management:"Gestin de Usuarios",managementDescription:"Administra roles y permisos de usuarios de la plataforma",fetchError:"Error al cargar usuarios",roleUpdated:"Rol actualizado",roleUpdatedSuccess:"El rol del usuario se actualiz correctamente",roleUpdateError:"Error al actualizar rol",userEnabled:"Usuario habilitado",userDisabled:"Usuario deshabilitado",statusUpdateSuccess:"El estado del usuario se actualiz correctamente",statusUpdateError:"Error al actualizar estado",cannotModifySuperAdmin:"No se puede modificar al super administrador",superAdmin:"Super Admin",noUsers:"No hay usuarios",enable:"Habilitar",disable:"Deshabilitar",delete:"Eliminar",deleteUser:"Eliminar usuario",enableUser:"Activar usuario",disableUser:"Desactivar usuario",userDeleted:"Usuario eliminado",userDeletedSuccess:"El usuario ha sido eliminado exitosamente.",deleteError:"Error al eliminar",confirmDelete:"Ests seguro de que deseas eliminar a {email}? Esta accin no se puede deshacer.",protected:"Protegido",refresh:"Actualizar",loadingUsers:"Cargando usuarios...",noUsersFound:"No se encontraron usuarios",total:"Total",rolesPermissions:{title:"Roles y Permisos",userDesc:"Acceso bsico al sistema",adminDesc:"Gestin de productos, combos e inventario",superAdminDesc:"Acceso total + gestin de usuarios"},securityNote:{title:"Nota de seguridad",superAdminProtected:"Los Super Admins estn protegidos y no pueden ser editados ni eliminados",onlySuperAdminManage:"Solo Super Admins pueden gestionar roles y eliminar usuarios",deletionPermanent:"La eliminacin de usuarios es permanente y no se puede deshacer"},roles:{user:"Usuario",admin:"Administrador",super_admin:"Super Administrador"},table:{email:"Correo Electrnico",name:"Nombre",role:"Rol",status:"Estado",actions:"Acciones",active:"Activo",inactive:"Inactivo",createdAt:"Fecha de Registro"}}},en:{nav:{home:"Home",products:"Products",remittances:"Remittances",admin:"Administration",dashboard:"Control Panel",settings:"Settings",cart:"Cart",userPanel:"My Panel",userManagement:"User Management"},home:{hero:{cta:{products:"View Products"}},features:{title:"Key Features",subtitle:"Everything you need to grow your digital business",products:{title:"Product Sales",description:"Complete platform for independent vendors with automatic price calculation"},remittances:{title:"Remittances to Cuba",description:"Send money to Cuba from USA and Spain quickly and securely"},analytics:{title:"Profit Dashboard",description:"View your daily and monthly profits in real-time"},vendors:{title:"Vendor Management",description:"Complete tools for independent vendors to manage their inventory"}},testimonials:{title:"What our customers say",subtitle:"Real experiences from users satisfied with our platform."}},products:{title:"Product Catalog",subtitle:"Discover exclusive products and combos to send to Cuba with competitive prices",searchPlaceholder:"Search products...",categories:{all:"All Categories"},exchangeRate:"Current Exchange Rate",addToCart:"Add to Cart",vendor:"Vendor",noProducts:"No products found",noProductsDesc:"Try different search terms or categories",addProduct:"Add Product",addedToCart:"Product added",addedToCartDesc:"was successfully added to cart",detail:{previous:"Previous",next:"Next",backToProducts:" Back to Products",backToCombos:" Back to Combos",continueToProducts:"Continue to Products ",continueToCombos:"Continue to Combos ",price:"Price",basePrice:"Base Price",category:"Category",description:"Description",stock:"Available Stock",expiryDate:"Expiry Date",currency:"Currency",includedProducts:"Included Products",profitMargin:"Profit Margin",comboDetails:"Combo Details",productDetails:"Product Details",inStock:"In Stock",outOfStock:"Out of Stock",units:"units"}},remittances:{title:"Remittances to Cuba",subtitle:"Send money to Cuba from USA and Spain quickly and securely",calculator:"Remittance Calculator",amount:"Amount to Send (USD)",country:"Destination Country",selectCountry:"Select country...",currentRate:"Current Rate",popular:"Popular",rate:"Rate",fee:"Fee",time:"Time",youReceive:"You Receive",send:"Send",howItWorks:"How It Works?",step1:{title:"Select Country",description:"Choose destination country and amount to send"},step2:{title:"Confirm Details",description:"Verify recipient information"},step3:{title:"Receive Confirmation",description:"Money arrives within estimated time"},recipient:{title:"Recipient Details",deliveryMethod:"Delivery Method",cash:"Cash",transfer:"Transfer",currency:"Currency",fullName:"Full Name",bankName:"Bank Name",accountNumber:"Account Number",confirm:"Confirm & Send"}},vendor:{title:"Platform Management",subtitle:"Manage products, categories, combos, and more.",tabs:{inventory:"Inventory",categories:"Categories",combos:"Combos",management:"Management"},actions:{addProduct:"Add Product",createCombo:"Create Combo"},addProduct:{title:"Add New Product",editTitle:"Edit Product",cancel:"Cancel",name:"Product Name",namePlaceholder:"Ex: iPhone 15 Pro Max",description:"Description",descriptionPlaceholder:"Describe main features...",category:"Category",basePrice:"Base Price",currency:"Currency",image:"Product Image",upload:"Upload file",finalPrice:"Final Price",save:"Save Product"},inventory:{product:"Product",stock:"Stock",price:"Final Price",expiryDate:"Expiry Date"},categories:{manage:"Manage Categories",new:"New category",name_es:"Name (ES)",name_en:"Name (EN)",id:"ID"},combos:{title:"Combo Management",new:"Create New Combo",edit:"Edit Combo",name:"Combo Name",profitMargin:"Profit Margin (%)",shipping:"Shipping",free:"Free",discount:"Discount (%)",paid:"Paid",shippingCost:"Shipping Cost",products:"Products in Combo",addProduct:"Add Product",basePrice:"Total Base Price",finalPrice:"Final Price",coverImage:"Cover Image",save:"Save Combo"},management:{title:"General Management",payments:"Payment Management",testimonials:"Testimonial Management",users:"User Management",show:"Show",hide:"Hide",activate:"Activate",deactivate:"Deactivate",delete:"Delete"},validation:{error:"Validation Error",fillFields:"Please fill all required fields"},productAdded:"Product added successfully",productUpdated:"Product updated successfully",categoryAdded:"Category added",categoryRemoved:"Category removed",comboAdded:"Combo created successfully",comboUpdated:"Combo updated successfully"},dashboard:{title:"Control Panel",subtitle:"Complete visualization of profits and business metrics",privateAccess:"Private Access",adminOnly:"This section is for administrators only.",refresh:"Refresh",stats:{dailyRevenue:"Daily Revenue",monthlyRevenue:"Monthly Revenue",dailyProfit:"Daily Profit",monthlyProfit:"Monthly Profit",totalProducts:"Total Products",totalCombos:"Total Combos",pendingOrders:"Pending Orders",completedOrders:"Completed Orders",totalUsers:"Total Users",activeProducts:"Active Products",siteVisits:"Site Visits"},profitBreakdown:"Profit Breakdown",dailyBreakdown:"Daily Breakdown",monthlyBreakdown:"Monthly Breakdown",grossRevenue:"Gross Revenue",costs:"Costs",netProfit:"Net Profit",profitMargin:"Profit Margin",orderSummary:"Order Summary",pending:"Pending",completed:"Completed",overviewTab:"Overview",ordersTab:"Order History",orderStatus:{paymentPending:"Payment Pending",paymentValidated:"Payment Validated",processing:"Processing",shipped:"Shipped",delivered:"Delivered",cancelled:"Cancelled",totalActive:"Total Active"},analyticsTitle:"Analytics & Statistics",selectCurrency:"Select Currency",expirationWarning:{title:"Expiration Alert",description:"There are {count} product(s) nearing expiration in the next 30 days."},visits:{title:"Site Visits",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly",total:"Total",thisWeek:"This Week",thisMonth:"This Month",thisYear:"This Year",allTime:"All Time"}},settings:{title:"General Settings",subtitle:"Manage the key settings of your platform.",financial:{title:"Financial Settings",usdToLocal:"USD to Local Currency",productProfit:"Product Profit (%)",comboProfit:"Combo Profit (%)",remittanceProfit:"Remittance Profit (%)",save:"Save Settings",currencies:"Currency Management",addCurrency:"Add Currency",code:"Code (e.g: USD, EUR, CUP)",nameES:"Name (Spanish)",nameEN:"Name (English)",rate:"Rate vs USD",symbol:"Symbol",active:"Active",updateCurrency:"Update Currency",currencyCreated:"Currency created",currencyUpdated:"Currency updated",currencyDeleted:"Currency deleted"},zelle:{title:"Zelle Accounts",add:"Add Zelle Account",email:"Email",name:"Name",assignTo:"Assign to",products:"Product Sales",remittances:"Remittances",active:"Active"},visual:{title:"Visual Settings",logo:"Site Logo",favicon:"Favicon",slides:"Homepage Slides",addSlide:"Add Slide",image:"Image (URL or File)",imageType:"Image Type",url:"URL",upload:"Upload",mainText:"Main Text",secondaryText:"Secondary Text",text_es:"Text (ES)",text_en:"Text (EN)",active:"Active",save:"Save Settings"},notifications:{title:"Notification Settings",whatsapp:"WhatsApp Number for Notifications",adminEmail:"Admin Email for Notifications",save:"Save Settings"},saveSuccess:"Settings saved successfully"},cart:{title:"Your Shopping Cart",empty:"Your cart is empty.",browse:"Browse products",summary:"Order Summary",subtotal:"Subtotal",shipping:"Shipping",free:"Free",total:"Total",checkout:"Proceed to Checkout",payment:{title:"Make Payment",instructionsTitle:"Payment Instructions",instructions:"Copy the purchase ID and paste it into the Zelle transfer description. Send the receipt to info@papuenvios.com or upload it directly here. The payment will be subject to validation.",accountInfo:"Zelle Account Details",purchaseId:"Purchase ID",copy:"Copied",amount:"Amount to Pay",uploadProof:"Upload Payment Proof",confirm:"Confirm Payment",recipientTitle:"Delivery/Recipient Details"}},auth:{login:"Login",loginTitle:"Welcome Back",loginSubtitle:"Log in to access your account.",email:"Email",password:"Password",loginWithGoogle:"Login with Google",or:"Or",loginSuccess:"Login successful!",loginError:"Invalid credentials. Please try again.",logoutSuccess:"Logged out successfully.",loginRequired:"Login Required",loginToCheckout:"Please log in to continue to checkout."},userPanel:{title:"My User Panel",welcome:"Welcome, {name}",myOrders:"My Orders",noOrders:"You have no orders yet.",status:{pending:"Pending",validated:"Validated",rejected:"Rejected"}},adminOrders:{title:"Order History",subtitle:"Complete management of all system orders",stats:{total:"Total",pending:"Pending",validated:"Validated",rejected:"Rejected",completed:"Completed",revenue:"Revenue"},filters:{title:"Search Filters",clear:"Clear Filters",search:"Search",searchPlaceholder:"Order, user, email or product...",status:"Order Status",allStatuses:"All Statuses",orderType:"Order Type",allTypes:"All",startDate:"Start Date",endDate:"End Date",apply:"Apply Filters"},table:{order:"Order",user:"User",date:"Date",type:"Type",items:"Items",total:"Total",paymentStatus:{label:"Payment Status",pending:"Payment Pending",validated:"Payment Validated (Ready to Process)",rejected:"Payment Rejected"},orderStatus:{label:"Order Status",pending:"Pending",processing:"Processing",shipped:"Shipped",delivered:"Delivered",completed:"Completed",cancelled:"Cancelled"},actions:"Actions"},types:{products:"Products",remittance:"Remittance",mixed:"Mixed"},actions:{view:"View",start:"Start",ship:"Ship",proof:"Proof",complete:"Complete",cancel:"Cancel",processing:"Processing...",loading:"Loading...",completing:"Completing..."},messages:{noOrders:"No orders found",retry:"Retry",confirmStart:"Start processing order {orderNumber}?",confirmComplete:"Mark order {orderNumber} as completed?",confirmCancel:"Are you sure you want to cancel this order? This action will release reserved inventory.",enterTracking:"Enter tracking number (optional) for order {orderNumber}:",enterCancelReason:"Enter cancellation reason for order {orderNumber}:",cancelReasonRequired:"You must specify a reason for cancellation",startSuccess:'Order moved to "Processing" status',shipSuccess:'Order marked as "Shipped"',deliverSuccess:'Delivery proof uploaded successfully. Order marked as "Delivered"',completeSuccess:"Order completed successfully",cancelSuccess:"Order cancelled successfully",error:"Error",selectImage:"Select proof image",invalidImage:"Please select a valid image",imageTooLarge:"File is too large. Maximum 5MB"},deliveryModal:{title:"Upload Delivery Proof",orderLabel:"Order:",customerLabel:"Customer:",selectPhoto:"Select Proof Photo",clickToUpload:"Click to upload",dragHere:"or drag here",fileTypes:"PNG, JPG, JPEG (MAX. 5MB)",imageLoaded:'Image loaded. Click "Upload Proof" to confirm.',note:"Note:",noteText:'When uploading proof, the order will be automatically marked as "Delivered". The customer will be able to see the proof photo.',cancel:"Cancel",submit:"Upload Proof",uploading:"Uploading..."},days:{singular:"day",plural:"days"},modals:{confirm:"Confirm",cancel:"Cancel",submit:"Submit",startTitle:"Start Processing",completeTitle:"Complete Order",cancelTitle:"Cancel Order",trackingTitle:"Tracking Number",cancelReasonTitle:"Cancellation Reason"}},users:{management:"User Management",managementDescription:"Manage platform user roles and permissions",fetchError:"Error loading users",roleUpdated:"Role updated",roleUpdatedSuccess:"User role was updated successfully",roleUpdateError:"Error updating role",userEnabled:"User enabled",userDisabled:"User disabled",statusUpdateSuccess:"User status was updated successfully",statusUpdateError:"Error updating status",cannotModifySuperAdmin:"Cannot modify super administrator",superAdmin:"Super Admin",noUsers:"No users",enable:"Enable",disable:"Disable",delete:"Delete",deleteUser:"Delete user",enableUser:"Enable user",disableUser:"Disable user",userDeleted:"User deleted",userDeletedSuccess:"User has been deleted successfully.",deleteError:"Error deleting",confirmDelete:"Are you sure you want to delete {email}? This action cannot be undone.",protected:"Protected",refresh:"Refresh",loadingUsers:"Loading users...",noUsersFound:"No users found",total:"Total",rolesPermissions:{title:"Roles & Permissions",userDesc:"Basic system access",adminDesc:"Product, combo and inventory management",superAdminDesc:"Full access + user management"},securityNote:{title:"Security Note",superAdminProtected:"Super Admins are protected and cannot be edited or deleted",onlySuperAdminManage:"Only Super Admins can manage roles and delete users",deletionPermanent:"User deletion is permanent and cannot be undone"},roles:{user:"User",admin:"Administrator",super_admin:"Super Administrator"},table:{email:"Email",name:"Name",role:"Role",status:"Status",actions:"Actions",active:"Active",inactive:"Inactive",createdAt:"Registration Date"}}}},wO=({children:t})=>{const[e,r]=w.useState("es"),s=(a,l={})=>{const u=a.split(".");let d=bO[e];for(const h of u)d=d?.[h];return typeof d=="string"?Object.entries(l).reduce((h,[m,p])=>h.replace(`{${m}}`,p),d):d||a};return o.jsx(Pw.Provider,{value:{language:e,setLanguage:r,t:s},children:t})},Gt=()=>{const t=w.useContext(Pw);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},Tw=()=>{const[t,e]=w.useState(null);w.useEffect(()=>{try{const d=localStorage.getItem("visualSettings");d&&e(JSON.parse(d))}catch(d){console.error("Error loading visual settings:",d)}},[]);const r=t?.primaryColor||"#2563eb",s=t?.secondaryColor||"#9333ea",a=t?.useGradient!==void 0?t.useGradient:!0,l=t?.pageBgColor||"#f9fafb",u=a?{background:`linear-gradient(to right, ${r}, ${s})`}:{backgroundColor:l};return o.jsx("div",{className:"min-h-screen flex items-center justify-center",style:u,children:o.jsx(me.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.3,ease:[0,.71,.2,1.01],scale:{type:"spring",damping:5,stiffness:100,restDelta:.001}},className:"p-8 rounded-2xl shadow-xl",style:{backgroundColor:t?.cardBgColor||"#ffffff"},children:o.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:`${r} transparent transparent transparent`}}),o.jsx("p",{className:"font-medium",style:{color:t?.textPrimaryColor||"#4b5563"},children:"Authenticating..."})]})})})},Aw=w.createContext(),jO=({children:t})=>{const[e,r]=w.useState(null),[s,a]=w.useState(null),[l,u]=w.useState(!0),[d,h]=w.useState(!0),m=w.useRef(!0),p=async N=>{try{const{data:P,error:D}=await Promise.race([ee.from("user_profiles").select("role, is_enabled, avatar_url, full_name, email").eq("id",N).single(),new Promise((M,L)=>setTimeout(()=>L(new Error("Profile fetch timeout")),Nv.PROFILE_FETCH))]);return D?(console.warn("[Auth] Profile fetch error:",D),null):P}catch(P){return console.warn("[Auth] Profile fetch failed:",P.message),null}},g=async N=>{if(!N?.user){r(null),a(null),u(!0);return}const P=N.user.id;console.log("[Auth] Updating user state for:",N.user.email);const D=await p(P);if(!D){console.warn("[Auth] Profile not found, using session data as fallback"),r(N.user),a("user"),u(!0);return}if(D.is_enabled===!1){console.warn("[Auth] Account is disabled"),r(null),a(null),u(!1);try{await ee.auth.signOut(),he({title:"Cuenta deshabilitada",description:"Tu cuenta ha sido deshabilitada. Contacta al soporte.",variant:"destructive"})}catch(M){console.error("[Auth] Error signing out disabled user:",M)}return}r({...N.user,profile:D}),a(D.role||"user"),u(!0),console.log("[Auth] User state updated successfully. Role:",D.role),v(P,N.user,D)},v=async(N,P,D)=>{try{const M=P.user_metadata?.avatar_url||P.user_metadata?.picture,L=P.user_metadata?.full_name||P.user_metadata?.name,Q={};if(M&&M!==D.avatar_url&&(Q.avatar_url=M),L&&L!==D.full_name&&(Q.full_name=L),Object.keys(Q).length>0){const{error:re}=await ee.from("user_profiles").update(Q).eq("id",N);re&&console.warn("[Auth] Metadata sync error (non-critical):",re)}}catch(M){console.warn("[Auth] Metadata sync failed (non-critical):",M)}};w.useEffect(()=>{m.current=!0;const N=setTimeout(()=>{m.current&&d&&(console.warn("[Auth] Init timeout - clearing loading state"),h(!1))},Nv.INIT_AUTH),P=async()=>{console.log("[Auth] Initializing..."),h(!0);try{const{data:{session:M},error:L}=await ee.auth.getSession();if(L){console.error("[Auth] getSession error:",L),h(!1);return}M&&await g(M)}catch(M){console.error("[Auth] Init error:",M)}finally{clearTimeout(N),m.current&&h(!1)}},{data:D}=ee.auth.onAuthStateChange(async(M,L)=>{if(console.log("[Auth] State change:",M),!!m.current){if(M==="SIGNED_OUT"){r(null),a(null),u(!0);return}L&&await g(L)}});return P(),()=>{m.current=!1,clearTimeout(N),D?.subscription&&D.subscription.unsubscribe()}},[]);const b=async(N,P)=>{try{const{data:D,error:M}=await ee.auth.signInWithPassword({email:N,password:P});if(M)throw M;return D?.session?(await g(D.session),!0):!1}catch(D){return console.error("[Auth] login error",D),he({title:"Error de inicio de sesin",description:D.message||String(D),variant:"destructive"}),!1}},_=async()=>{try{await ee.auth.signOut();const{data:N,error:P}=await ee.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(P)throw P;N?.url&&window.location.replace(N.url)}catch(N){console.error("[Auth] signInWithGoogle error",N),he({title:"Error",description:N.message||String(N),variant:"destructive"})}},C=async()=>{try{const{error:N}=await ee.auth.signOut();if(N)throw N;r(null),a(null),u(!0)}catch(N){console.error("[Auth] logout error",N),he({title:"Error al cerrar sesin",description:N.message||String(N),variant:"destructive"})}},j=N=>N?s?s==="super_admin"||s==="admin"&&N!=="super_admin"?!0:s===N:!1:!0,R=WT.includes(e?.email),A={user:e,loading:d,isAuthenticated:!!e&&l,userRole:s,isEnabled:l,isSuperAdmin:s==="super_admin"||R,isAdmin:s==="admin"||s==="super_admin"||R,checkRole:j,login:b,signInWithGoogle:_,logout:C,supabaseClient:ee};return o.jsx(Aw.Provider,{value:A,children:d?o.jsx(Tw,{}):t})},rr=()=>{const t=w.useContext(Aw);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},_O=async()=>{const t=new Date().toISOString().slice(0,10).replace(/-/g,""),e=Date.now().toString().slice(-5),r=Math.floor(Math.random()*100).toString().padStart(2,"0"),s=`${e}${r}`.slice(0,5),a=`ORD-${t}-${s}`,{data:l}=await ee.from("orders").select("order_number").eq("order_number",a).maybeSingle();if(l){const u=(Date.now()%1e3).toString().padStart(3,"0");return`ORD-${t}-${e.slice(-2)}${u}`}return a},CO=async(t,e)=>{try{const s={order_number:await _O(),user_id:t.userId,order_type:t.orderType||"product",status:"pending",subtotal:t.subtotal,discount_amount:t.discountAmount||0,shipping_cost:t.shippingCost||0,tax_amount:t.taxAmount||0,total_amount:t.totalAmount,currency_id:t.currencyId,shipping_address:t.shippingAddress||null,recipient_info:t.recipientInfo||null,delivery_instructions:t.deliveryInstructions||"",payment_method:t.paymentMethod||"zelle",payment_status:"pending",payment_reference:t.paymentReference||"",payment_proof_url:t.paymentProofUrl||null,shipping_zone_id:t.shippingZoneId||null,zelle_account_id:t.zelleAccountId||null,notes:t.notes||"",offer_id:t.offerId||null},{data:a,error:l}=await ee.from("orders").insert(s).select().single();if(l)throw l;const u=e.map(m=>({order_id:a.id,item_type:m.itemType,item_id:m.itemId,item_name_es:m.nameEs,item_name_en:m.nameEn,quantity:m.quantity,unit_price:m.unitPrice,total_price:m.totalPrice,inventory_id:m.inventoryId||null,remittance_amount:m.remittanceAmount||null,exchange_rate:m.exchangeRate||null,recipient_data:m.recipientData||null})),{data:d,error:h}=await ee.from("order_items").insert(u).select();if(h)throw h;for(const m of e)m.itemType==="product"&&m.inventoryId&&await SO(m.inventoryId,m.quantity);return{success:!0,order:{...a,items:d}}}catch(r){return console.error("Error creating order:",r),{success:!1,error:r.message}}},SO=async(t,e)=>{try{const{data:r,error:s}=await ee.from("inventory").select("reserved_quantity").eq("id",t).single();if(s)throw s;const a=(r.reserved_quantity||0)+e,{error:l}=await ee.from("inventory").update({reserved_quantity:a}).eq("id",t);if(l)throw l;return await ee.from("inventory_movements").insert({inventory_id:t,movement_type:"reserved",quantity_change:-e,reference_type:"order",notes:"Reserved for order"}),{success:!0}}catch(r){return console.error("Error reserving inventory:",r),{success:!1,error:r.message}}},Rw=async(t,e)=>{try{const{data:r,error:s}=await ee.from("inventory").select("reserved_quantity").eq("id",t).single();if(s)throw s;const a=Math.max(0,(r.reserved_quantity||0)-e),{error:l}=await ee.from("inventory").update({reserved_quantity:a}).eq("id",t);if(l)throw l;return await ee.from("inventory_movements").insert({inventory_id:t,movement_type:"released",quantity_change:e,reference_type:"order",notes:"Released from rejected/cancelled order"}),{success:!0}}catch(r){return console.error("Error releasing inventory:",r),{success:!1,error:r.message}}},zv=async(t,e)=>{try{const{data:r,error:s}=await ee.from("inventory").select("quantity, reserved_quantity").eq("id",t).single();if(s)throw s;const a=r.quantity-e,l=Math.max(0,(r.reserved_quantity||0)-e),{error:u}=await ee.from("inventory").update({quantity:a,reserved_quantity:l}).eq("id",t);if(u)throw u;return await ee.from("inventory_movements").insert({inventory_id:t,movement_type:"sold",quantity_change:-e,reference_type:"order",notes:"Sold - payment validated"}),{success:!0}}catch(r){return console.error("Error reducing inventory:",r),{success:!1,error:r.message}}},NO=async(t,e={})=>{try{let r=ee.from("orders").select(`
        *,
        order_items (*),
        currencies (code, symbol),
        shipping_zones (province_name, shipping_cost)
      `).eq("user_id",t).order("created_at",{ascending:!1});e.status&&(r=r.eq("status",e.status)),e.payment_status&&(r=r.eq("payment_status",e.payment_status));const{data:s,error:a}=await r;if(a)throw a;return{success:!0,orders:s||[]}}catch(r){return console.error("Error fetching user orders:",r),{success:!1,error:r.message,orders:[]}}},kO=async t=>{try{const{data:e,error:r}=await ee.from("orders").select(`
        *,
        order_items (*),
        currencies (code, symbol),
        shipping_zones (province_name, shipping_cost)
      `).eq("id",t).single();if(r)throw r;if(e&&e.user_id){const{data:s,error:a}=await ee.from("user_profiles").select("user_id, full_name, email").eq("user_id",e.user_id).single();!a&&s&&(e.user_profiles=s)}return{success:!0,order:e}}catch(e){return console.error("Error fetching order:",e),{success:!1,error:e.message}}},Ow=async(t={})=>{try{let e=ee.from("orders").select(`
        *,
        order_items (*),
        currencies (code, symbol),
        shipping_zones (province_name, shipping_cost)
      `).order("created_at",{ascending:!1});t.status&&(e=e.eq("status",t.status)),t.payment_status&&(e=e.eq("payment_status",t.payment_status)),t.order_type&&(e=e.eq("order_type",t.order_type));const{data:r,error:s}=await e;if(s)throw s;if(r&&r.length>0){const a=[...new Set(r.map(d=>d.user_id))],{data:l,error:u}=await ee.from("user_profiles").select("user_id, full_name, email").in("user_id",a);if(!u&&l){const d={};l.forEach(h=>{d[h.user_id]=h}),r.forEach(h=>{h.user_profiles=d[h.user_id]||null})}}return{success:!0,orders:r||[]}}catch(e){return console.error("Error fetching all orders:",e),{success:!1,error:e.message,orders:[]}}},EO=async()=>{try{const{data:t,error:e}=await ee.rpc("get_pending_orders_count");if(e)throw e;return{success:!0,count:t||0}}catch(t){return console.error("Error fetching pending orders count:",t),{success:!1,count:0}}},PO=async(t,e)=>{try{const{data:r,error:s}=await ee.from("orders").select("*, order_items (*)").eq("id",t).single();if(s)throw s;const{data:a,error:l}=await ee.from("orders").update({payment_status:"validated",status:"processing",validated_by:e,validated_at:new Date().toISOString()}).eq("id",t).select().single();if(l)throw l;for(const u of r.order_items)if(u.item_type==="product"&&u.inventory_id)await zv(u.inventory_id,u.quantity);else if(u.item_type==="combo"&&u.item_id){const{data:d}=await ee.from("combo_items").select("product_id, quantity").eq("combo_id",u.item_id);if(d)for(const h of d){const{data:m}=await ee.from("products").select("inventory_id").eq("id",h.product_id).single();m?.inventory_id&&await zv(m.inventory_id,u.quantity*h.quantity)}}return await ee.from("order_status_history").insert({order_id:t,previous_status:r.status,new_status:"processing",changed_by:e,notes:"Payment validated by admin"}),{success:!0,order:a}}catch(r){return console.error("Error validating payment:",r),{success:!1,error:r.message}}},TO=async(t,e,r)=>{try{const{data:s,error:a}=await ee.from("orders").select("*, order_items (*)").eq("id",t).single();if(a)throw a;const{data:l,error:u}=await ee.from("orders").update({payment_status:"rejected",status:"cancelled",validated_by:e,validated_at:new Date().toISOString(),rejection_reason:r}).eq("id",t).select().single();if(u)throw u;for(const d of s.order_items)d.item_type==="product"&&d.inventory_id&&await Rw(d.inventory_id,d.quantity);return await ee.from("order_status_history").insert({order_id:t,previous_status:s.status,new_status:"cancelled",changed_by:e,notes:`Payment rejected: ${r}`}),{success:!0,order:l}}catch(s){return console.error("Error rejecting payment:",s),{success:!1,error:s.message}}},AO=async(t,e)=>{try{let r="jpg";t.name?r=t.name.split(".").pop():t.type&&(r={"image/jpeg":"jpg","image/jpg":"jpg","image/png":"png","image/webp":"webp","image/gif":"gif"}[t.type]||"jpg");const a=`payment-proofs/${`payment-proof-${e}-${Date.now()}.${r}`}`,{data:l,error:u}=await ee.storage.from("order-documents").upload(a,t,{cacheControl:"3600",upsert:!1});if(u)throw u;const{data:d}=ee.storage.from("order-documents").getPublicUrl(a),{error:h}=await ee.from("orders").update({payment_proof_url:d.publicUrl}).eq("id",e);if(h)throw h;return{success:!0,url:d.publicUrl}}catch(r){return console.error("Error uploading payment proof:",r),{success:!1,error:r.message}}},RO=async(t,e)=>{try{const{data:r,error:s}=await ee.from("orders").select("id, order_number, status, payment_status").eq("id",t).single();if(s)throw s;if(r.payment_status!=="validated")return{success:!1,error:"Payment must be validated before processing"};const{data:a,error:l}=await ee.from("orders").update({status:"processing",processing_started_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t).select().single();if(l)throw l;return{success:!0,order:a}}catch(r){return console.error("Error starting order processing:",r),{success:!1,error:r.message}}},OO=async(t,e,r="")=>{try{const{data:s,error:a}=await ee.from("orders").select("id, order_number, status").eq("id",t).single();if(a)throw a;if(s.status!=="processing")return{success:!1,error:"Order must be in processing status"};const l={status:"shipped",shipped_at:new Date().toISOString(),updated_at:new Date().toISOString()};r&&(l.notes=s.notes?`${s.notes}

Tracking: ${r}`:`Tracking: ${r}`);const{data:u,error:d}=await ee.from("orders").update(l).eq("id",t).select().single();if(d)throw d;return{success:!0,order:u}}catch(s){return console.error("Error marking order as shipped:",s),{success:!1,error:s.message}}},MO=async(t,e,r)=>{try{const{data:s,error:a}=await ee.from("orders").select("id, order_number, status").eq("id",t).single();if(a)throw a;if(s.status!=="shipped")return{success:!1,error:"Order must be in shipped status"};const l=`delivery-proof-${t}-${Date.now()}.jpg`,{data:u,error:d}=await ee.storage.from("payment-proofs").upload(l,e,{cacheControl:"3600",upsert:!1});if(d)throw d;const{data:h}=ee.storage.from("payment-proofs").getPublicUrl(l),{data:m,error:p}=await ee.from("orders").update({status:"delivered",delivered_at:new Date().toISOString(),delivery_proof_url:h.publicUrl,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(p)throw p;return{success:!0,order:m}}catch(s){return console.error("Error marking order as delivered:",s),{success:!1,error:s.message}}},DO=async t=>{try{const{data:e,error:r}=await ee.from("orders").select("id, order_number, status").eq("id",t).single();if(r)throw r;if(e.status!=="delivered")return{success:!1,error:"Order must be in delivered status"};const{data:s,error:a}=await ee.from("orders").update({status:"completed",completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw a;return{success:!0,order:s}}catch(e){return console.error("Error completing order:",e),{success:!1,error:e.message}}},IO=t=>{if(!t||t.status!=="processing"||!t.processing_started_at)return null;const e=new Date,r=new Date(t.processing_started_at),s=Math.abs(e-r);return Math.ceil(s/(1e3*60*60*24))},LO=async(t,e,r)=>{try{const{data:s,error:a}=await ee.from("orders").select("*, order_items(*)").eq("id",t).single();if(a)throw a;for(const d of s.order_items)d.inventory_id&&await Rw(d.inventory_id,d.quantity);const{data:l,error:u}=await ee.from("orders").update({status:"cancelled",rejection_reason:r,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(u)throw u;return{success:!0,order:l}}catch(s){return console.error("Error cancelling order:",s),{success:!1,error:s.message}}},$O=({currentPage:t,onNavigate:e})=>{const[r,s]=w.useState(!1),[a,l]=w.useState(!1),[u,d]=w.useState(0),{language:h,setLanguage:m,t:p}=Gt(),{cart:g,visualSettings:v}=Ht(),{user:b,isAdmin:_,userRole:C}=rr(),j=[{id:"home",icon:wr,label:p("nav.home")},{id:"products",icon:wr,label:p("nav.products")},{id:"remittances",icon:Qr,label:p("nav.remittances")}],R=[{id:"dashboard",icon:Kl,label:p("nav.dashboard")},{id:"admin",icon:a2,label:p("nav.admin")},{id:"user-management",icon:Ec,label:p("nav.userManagement")},{id:"settings",icon:y2,label:p("nav.settings")}],{logout:A}=rr(),N=()=>{A(),he({title:p("auth.logoutSuccess")}),e("home")},P=()=>{e("login")},D=L=>{e(L),l(!1),s(!1)};w.useEffect(()=>{if(C==="admin"||C==="super_admin"){M();const L=setInterval(M,3e4);return()=>clearInterval(L)}},[C]);const M=async()=>{try{const L=await EO();L.success&&d(L.count||0)}catch(L){console.error("Error loading pending orders:",L)}};return o.jsx(me.header,{initial:{y:-100},animate:{y:0},className:"fixed top-0 left-0 right-0 z-40 backdrop-blur-md shadow-sm",style:{backgroundColor:v.headerBgColor||"rgba(255, 255, 255, 0.8)",color:v.headerTextColor||"#1f2937"},children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs(me.div,{whileHover:{scale:1.05},className:"flex items-center space-x-2 cursor-pointer",onClick:()=>D("home"),children:[v.logo?o.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:o.jsx("img",{src:v.logo,alt:v.companyName||"Logo",className:"max-w-full max-h-full object-contain"})}):o.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:v.useGradient?`linear-gradient(to right, ${v.primaryColor||"#2563eb"}, ${v.secondaryColor||"#9333ea"})`:v.primaryColor||"#2563eb"},children:o.jsx(wr,{className:"w-5 h-5 text-white"})}),o.jsx("span",{className:"text-xl font-bold",style:{backgroundImage:v.useGradient?`linear-gradient(to right, ${v.primaryColor||"#2563eb"}, ${v.secondaryColor||"#9333ea"})`:`linear-gradient(to right, ${v.primaryColor||"#2563eb"}, ${v.primaryColor||"#2563eb"})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:v.companyName||"PapuEnvos"})]}),o.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[j.map(L=>o.jsxs(xe,{variant:t===L.id?"default":"ghost",size:"sm",onClick:()=>D(L.id),className:"flex items-center space-x-2",style:t===L.id?{background:v.useGradient?`linear-gradient(to right, ${v.primaryColor||"#2563eb"}, ${v.secondaryColor||"#9333ea"})`:v.buttonBgColor||"#2563eb",color:v.buttonTextColor||"#ffffff",border:"none"}:{color:v.headerTextColor||"#1f2937"},children:[o.jsx(L.icon,{className:"w-4 h-4"}),o.jsx("span",{children:L.label})]},L.id)),_&&o.jsxs("div",{className:"relative",children:[o.jsxs(xe,{variant:R.some(L=>t===L.id)?"default":"ghost",size:"sm",onClick:()=>l(!a),className:"flex items-center space-x-2",style:R.some(L=>t===L.id)?{background:v.useGradient?`linear-gradient(to right, ${v.primaryColor||"#2563eb"}, ${v.secondaryColor||"#9333ea"})`:v.buttonBgColor||"#2563eb",color:v.buttonTextColor||"#ffffff",border:"none"}:{color:v.headerTextColor||"#1f2937"},children:[o.jsx(v2,{className:"w-4 h-4"}),o.jsx("span",{children:"Admin"}),o.jsx(lb,{className:`w-3 h-3 transition-transform ${a?"rotate-180":""}`})]}),o.jsx(pn,{children:a&&o.jsx(me.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-56 rounded-xl shadow-xl overflow-hidden backdrop-blur-md",style:{backgroundColor:v.headerBgColor||"rgba(255, 255, 255, 0.95)",color:v.headerTextColor||"#1f2937"},children:R.map(L=>{const re=v.headerBgColor==="#ffffff"||!v.headerBgColor?`${v.primaryColor}15`:`${v.headerBgColor}40`,B=t===L.id?{backgroundColor:re,color:v.primaryColor||"#2563eb"}:{};return o.jsxs(xe,{variant:"ghost",size:"sm",onClick:()=>D(L.id),className:"w-full justify-start flex items-center space-x-2 rounded-none hover:opacity-100",style:{...B,color:v.headerTextColor||"#1f2937"},onMouseEnter:ye=>{t!==L.id&&(ye.currentTarget.style.backgroundColor=re)},onMouseLeave:ye=>{t!==L.id&&(ye.currentTarget.style.backgroundColor="transparent")},children:[o.jsx(L.icon,{className:"w-4 h-4"}),o.jsx("span",{children:L.label})]},L.id)})})})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs(xe,{variant:"outline",size:"sm",onClick:()=>m(h==="es"?"en":"es"),className:"hidden sm:flex items-center space-x-2",style:{borderColor:v.primaryColor||"#2563eb",color:v.primaryColor||"#2563eb"},children:[o.jsx(db,{className:"w-4 h-4"}),o.jsx("span",{children:h.toUpperCase()})]}),C!=="admin"&&C!=="super_admin"&&o.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>e("cart"),children:o.jsxs("div",{className:"relative",children:[o.jsx(ra,{className:"w-5 h-5"}),g.length>0&&o.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:g.reduce((L,Q)=>L+Q.quantity,0)})]})}),b?o.jsxs(o.Fragment,{children:[o.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>e("user-panel"),className:"relative",children:o.jsxs("div",{className:"relative",children:[o.jsx(vO,{user:b}),(C==="admin"||C==="super_admin")&&u>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold shadow-lg",children:u})]})}),o.jsx(xe,{variant:"ghost",size:"icon",onClick:N,children:o.jsx(c2,{className:"w-5 h-5"})})]}):o.jsx(xe,{variant:"ghost",size:"icon",onClick:P,children:o.jsx(hb,{className:"w-5 h-5"})}),o.jsx(xe,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>s(!r),children:r?o.jsx(_r,{className:"w-5 h-5"}):o.jsx(f2,{className:"w-5 h-5"})})]})]}),o.jsx(pn,{children:r&&o.jsx(me.nav,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-white/20 py-4",children:o.jsxs("div",{className:"flex flex-col space-y-2",children:[j.map(L=>o.jsxs(xe,{variant:t===L.id?"default":"ghost",size:"sm",onClick:()=>D(L.id),className:"flex items-center space-x-2 justify-start",style:t===L.id?{background:v.useGradient?`linear-gradient(to right, ${v.primaryColor||"#2563eb"}, ${v.secondaryColor||"#9333ea"})`:v.buttonBgColor||"#2563eb",color:v.buttonTextColor||"#ffffff",border:"none"}:{color:v.headerTextColor||"#1f2937"},children:[o.jsx(L.icon,{className:"w-4 h-4"}),o.jsx("span",{children:L.label})]},L.id)),_&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"pt-2 pb-1 px-2 text-xs font-semibold uppercase opacity-70",style:{color:v.headerTextColor||"#6b7280"},children:"Administracin"}),R.map(L=>o.jsxs(xe,{variant:t===L.id?"default":"ghost",size:"sm",onClick:()=>D(L.id),className:"flex items-center space-x-2 justify-start",style:t===L.id?{background:v.useGradient?`linear-gradient(to right, ${v.primaryColor||"#2563eb"}, ${v.secondaryColor||"#9333ea"})`:v.buttonBgColor||"#2563eb",color:v.buttonTextColor||"#ffffff",border:"none"}:{color:v.headerTextColor||"#1f2937"},children:[o.jsx(L.icon,{className:"w-4 h-4"}),o.jsx("span",{children:L.label})]},L.id))]})]})})})]})})},mt=t=>t?{background:t.useGradient?`linear-gradient(to right, ${t.primaryColor||"#2563eb"}, ${t.secondaryColor||"#9333ea"})`:t.buttonBgColor||t.primaryColor||"#2563eb",color:t.buttonTextColor||"#ffffff",border:"none"}:{},et=t=>t?t.useHeadingGradient||t.useGradient?{backgroundImage:`linear-gradient(to right, ${t.primaryColor||"#2563eb"}, ${t.secondaryColor||"#9333ea"})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}:{color:t.headingColor||t.primaryColor||"#1f2937"}:{},Be=(t,e="primary")=>{if(!t)return{};const r={primary:{color:t.textPrimaryColor||"#1f2937"},secondary:{color:t.textSecondaryColor||"#6b7280"},muted:{color:t.textMutedColor||"#9ca3af"}};return r[e]||r.primary},Mw=(t,e="default")=>{if(!t)return{};const r={default:{backgroundColor:t.pillBgColor||"#e5e7eb",color:t.pillTextColor||"#374151"},success:{backgroundColor:`${t.successColor||"#10b981"}20`,color:t.successColor||"#10b981",borderColor:t.successColor||"#10b981"},warning:{backgroundColor:`${t.warningColor||"#f59e0b"}20`,color:t.warningColor||"#f59e0b",borderColor:t.warningColor||"#f59e0b"},error:{backgroundColor:`${t.errorColor||"#ef4444"}20`,color:t.errorColor||"#ef4444",borderColor:t.errorColor||"#ef4444"},info:{backgroundColor:`${t.primaryColor||"#2563eb"}20`,color:t.primaryColor||"#2563eb",borderColor:t.primaryColor||"#2563eb"}};return r[e]||r.default},of=(t,e)=>{if(!e)return{};const s={validated:"success",pending:"warning",rejected:"error",cancelled:"default",processing:"info",completed:"success"}[t]||"default";return Mw(e,s)},Lo=t=>t?{backgroundColor:t.inputBgColor||"#ffffff",borderColor:t.inputBorderColor||"#d1d5db",color:t.textPrimaryColor||"#1f2937"}:{},FO=(t,e="info")=>{if(!t)return{};const r={success:{backgroundColor:`${t.successColor||"#10b981"}10`,borderColor:t.successColor||"#10b981",color:t.successColor||"#10b981"},warning:{backgroundColor:`${t.warningColor||"#f59e0b"}10`,borderColor:t.warningColor||"#f59e0b",color:t.warningColor||"#f59e0b"},error:{backgroundColor:`${t.errorColor||"#ef4444"}10`,borderColor:t.errorColor||"#ef4444",color:t.errorColor||"#ef4444"},info:{backgroundColor:`${t.primaryColor||"#2563eb"}10`,borderColor:t.primaryColor||"#2563eb",color:t.primaryColor||"#2563eb"}};return r[e]||r.info},qv=({onNavigate:t})=>{const{t:e,language:r}=Gt(),{visualSettings:s}=Ht(),{isAdmin:a}=rr(),[l,u]=w.useState([]),[d,h]=w.useState([]),m=[{icon:wr,title:e("home.features.products.title"),description:e("home.features.products.description"),action:()=>t("products")},{icon:Qr,title:e("home.features.remittances.title"),description:e("home.features.remittances.description"),action:()=>t("remittances")},{icon:Yl,title:e("home.features.analytics.title"),description:e("home.features.analytics.description"),action:()=>t("dashboard"),admin:!0},{icon:Ec,title:e("home.features.vendors.title"),description:e("home.features.vendors.description"),action:()=>t("admin"),admin:!0}].filter(_=>!_.admin||a),[p,g]=w.useState(0);w.useEffect(()=>{(async()=>{const C=await zb(!1);C.data&&h(C.data)})()},[]),w.useEffect(()=>{(async()=>{try{const{data:C,error:j}=await uA();if(j)throw j;u(C||[])}catch(C){console.error("Error loading carousel slides:",C),u([])}})()},[]);const v=()=>{g(_=>_===l.length-1?0:_+1)},b=()=>{g(_=>_===0?l.length-1:_-1)};return w.useEffect(()=>{if(l.length>1){const _=setInterval(v,5e3);return()=>clearInterval(_)}},[l.length]),o.jsxs("div",{className:"min-h-screen",children:[o.jsx("section",{className:"relative h-[60vh] md:h-[80vh] w-full overflow-hidden",children:l.length>0?o.jsxs(o.Fragment,{children:[o.jsx(pn,{initial:!1,children:o.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},style:{backgroundImage:`url(${l[p]?.image_url||l[p]?.image_file})`},className:"absolute inset-0 bg-cover bg-center",children:o.jsx("div",{className:"absolute inset-0 bg-black/50"})},p)}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-center text-white p-4",children:[o.jsx(me.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-4xl md:text-6xl font-bold mb-4",children:r==="es"?l[p]?.title_es:l[p]?.title_en},`main-${p}`),o.jsx(me.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-lg md:text-xl max-w-2xl mx-auto mb-8",children:r==="es"?l[p]?.subtitle_es:l[p]?.subtitle_en},`secondary-${p}`),o.jsx(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"flex flex-col sm:flex-row gap-4 justify-center",children:o.jsxs(xe,{size:"lg",onClick:()=>t("products"),className:"px-8 py-3 text-lg",style:{background:s.useGradient?`linear-gradient(to right, ${s.primaryColor||"#2563eb"}, ${s.secondaryColor||"#9333ea"})`:s.buttonBgColor||"#2563eb",color:s.buttonTextColor||"#ffffff",border:"none"},children:[o.jsx(wr,{className:"w-5 h-5 mr-2"}),e("home.hero.cta.products")]})})]}),l.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:b,className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-white/20 rounded-full hover:bg-white/40 transition-colors",children:o.jsx(Sh,{className:"h-6 w-6 text-white"})}),o.jsx("button",{onClick:v,className:"absolute right-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-white/20 rounded-full hover:bg-white/40 transition-colors",children:o.jsx(Nh,{className:"h-6 w-6 text-white"})}),o.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-20 flex gap-2",children:l.map((_,C)=>o.jsx("div",{onClick:()=>g(C),className:`w-3 h-3 rounded-full cursor-pointer transition-colors ${p===C?"bg-white":"bg-white/50"}`},C))})]})]}):o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:s.useGradient?`linear-gradient(to right, ${s.primaryColor||"#2563eb"}, ${s.secondaryColor||"#9333ea"})`:s.primaryColor||"#2563eb"},children:o.jsxs("div",{className:"text-center text-white p-4",children:[o.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:e("home.hero.title")}),o.jsx("p",{className:"text-lg md:text-xl max-w-2xl mx-auto mb-8",children:e("home.hero.subtitle")}),o.jsxs(xe,{size:"lg",onClick:()=>t("products"),className:"px-8 py-3 text-lg",style:{backgroundColor:s.cardBgColor||"#ffffff",color:s.primaryColor||"#2563eb",border:"none"},children:[o.jsx(wr,{className:"w-5 h-5 mr-2"}),e("home.hero.cta.products")]})]})})}),o.jsx("section",{className:"py-20 px-4",children:o.jsxs("div",{className:"container mx-auto",children:[o.jsxs(me.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[o.jsx("h2",{className:"text-4xl font-bold mb-4",style:et(s),children:e("home.features.title")}),o.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e("home.features.subtitle")})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:m.map((_,C)=>o.jsxs(me.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:C*.1},className:"glass-effect p-6 rounded-2xl hover-lift cursor-pointer group",onClick:_.action,children:[o.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",style:{background:s.useGradient?`linear-gradient(to right, ${s.primaryColor||"#2563eb"}, ${s.secondaryColor||"#9333ea"})`:s.primaryColor||"#2563eb"},children:o.jsx(_.icon,{className:"w-6 h-6 text-white"})}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:_.title}),o.jsx("p",{className:"text-gray-600",children:_.description})]},C))})]})}),o.jsx("section",{className:"py-20 px-4 bg-slate-100/50",children:o.jsxs("div",{className:"container mx-auto",children:[o.jsxs(me.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[o.jsx("h2",{className:"text-4xl font-bold mb-4",style:et(s),children:e("home.testimonials.title")}),o.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e("home.testimonials.subtitle")})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.length>0?d.map(_=>o.jsxs(me.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.5},className:"glass-effect p-6 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("img",{className:"w-12 h-12 rounded-full mr-4 object-cover",alt:_.user_name||"User",src:_.user_avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(_.user_name||"U")}&background=random`}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:_.user_name}),o.jsxs("div",{className:"flex",children:[[...Array(_.rating)].map((C,j)=>o.jsx(Ho,{className:"w-4 h-4 text-yellow-400 fill-current"},j)),[...Array(5-_.rating)].map((C,j)=>o.jsx(Ho,{className:"w-4 h-4 text-gray-300"},j))]})]})]}),o.jsxs("p",{className:"text-gray-600 italic",children:['"',_.comment,'"']})]},_.id)):o.jsx("p",{className:"text-gray-500 col-span-full text-center",children:r==="es"?"An no hay testimonios disponibles":"No testimonials available yet"})})]})})]})},Qf="product-images",UO=async(t,e)=>{try{const r=t.name.split(".").pop(),s=`${e}.${r}`,{error:a}=await ee.storage.from(Qf).upload(s,t,{cacheControl:"3600",upsert:!0});if(a)throw a;const{data:{publicUrl:l}}=ee.storage.from(Qf).getPublicUrl(s);return{publicUrl:l}}catch(r){throw console.error("Error uploading image:",r),r}},BO=async t=>{try{const{error:e}=await ee.storage.from(Qf).remove([t]);if(e)throw e}catch(e){throw console.error("Error deleting image:",e),e}},Dw={product:{maxSizeMB:2,maxWidth:800,maxHeight:800,aspectRatio:1,quality:.85,formats:["image/jpeg","image/png","image/webp"]},combo:{maxSizeMB:2,maxWidth:800,maxHeight:800,aspectRatio:1,quality:.85,formats:["image/jpeg","image/png","image/webp"]},carousel:{maxSizeMB:3,maxWidth:1920,maxHeight:1080,aspectRatio:16/9,quality:.9,formats:["image/jpeg","image/png","image/webp"]},carouselMobile:{maxSizeMB:1.5,maxWidth:800,maxHeight:1200,aspectRatio:2/3,quality:.85,formats:["image/jpeg","image/png","image/webp"]},logo:{maxSizeMB:2,maxWidth:400,maxHeight:400,aspectRatio:1,quality:.95,formats:["image/png","image/svg+xml","image/webp"]},payment_proof:{maxSizeMB:5,maxWidth:2e3,maxHeight:2e3,aspectRatio:null,quality:.85,formats:["image/jpeg","image/png","image/webp"]}},Iw=(t,e="product")=>{const r=Dw[e],s=[];if(!t)return s.push("No se seleccion ningn archivo"),{valid:!1,errors:s};r.formats.includes(t.type)||s.push(`Formato no vlido. Use: ${r.formats.map(l=>l.split("/")[1]).join(", ")}`);const a=t.size/(1024*1024);return a>r.maxSizeMB&&s.push(`Tamao muy grande (${a.toFixed(2)}MB). Mximo: ${r.maxSizeMB}MB`),{valid:s.length===0,errors:s,sizeMB:a.toFixed(2)}},VO=t=>new Promise((e,r)=>{const s=new FileReader;s.onload=a=>{const l=new Image;l.onload=()=>e(l),l.onerror=r,l.src=a.target.result},s.onerror=r,s.readAsDataURL(t)}),Lw=async(t,e="product")=>{const r=Dw[e],s=Iw(t,e);if(!s.valid)throw new Error(s.errors.join(`
`));try{if(t.type==="image/svg+xml"){const M=await new Promise((Q,re)=>{const B=new FileReader;B.onloadend=()=>Q(B.result),B.onerror=re,B.readAsDataURL(t)}),L=t.size/(1024*1024);return{success:!0,base64:M,blob:t,metadata:{originalSize:L.toFixed(2)+"MB",finalSize:L.toFixed(2)+"MB",compression:"0%",originalDimensions:"Vector",finalDimensions:"Vector",format:"SVG",quality:"100%"}}}const a=await VO(t);let{width:l,height:u}=a;const d=l/u,h=r.aspectRatio;let m=l,p=u,g=0,v=0;h&&Math.abs(d-h)>.01&&(d>h?(m=u*h,g=(l-m)/2):(p=l/h,v=(u-p)/2));let b=m,_=p;if(b>r.maxWidth){const M=r.maxWidth/b;b=r.maxWidth,_=_*M}if(_>r.maxHeight){const M=r.maxHeight/_;_=r.maxHeight,b=b*M}const C=document.createElement("canvas");C.width=b,C.height=_;const j=C.getContext("2d");j.imageSmoothingEnabled=!0,j.imageSmoothingQuality="high",j.drawImage(a,g,v,m,p,0,0,b,_);const R=await new Promise(M=>{C.toBlob(M,"image/jpeg",r.quality)}),A=await new Promise(M=>{const L=new FileReader;L.onloadend=()=>M(L.result),L.readAsDataURL(R)}),N=t.size/(1024*1024),P=R.size/(1024*1024),D=((1-P/N)*100).toFixed(1);return{success:!0,base64:A,blob:R,metadata:{originalSize:N.toFixed(2)+"MB",finalSize:P.toFixed(2)+"MB",compression:D+"%",originalDimensions:`${a.width}x${a.height}`,finalDimensions:`${b}x${_}`,format:"JPEG",quality:r.quality*100+"%"}}}catch(a){throw console.error("Error processing image:",a),new Error("Error al procesar la imagen: "+a.message)}},aa=async(t,e="product",r=null)=>{try{r&&r({stage:"validating",progress:10});const s=Iw(t,e);if(!s.valid)return{success:!1,errors:s.errors};r&&r({stage:"processing",progress:50});const a=await Lw(t,e);return r&&r({stage:"complete",progress:100}),a}catch(s){return{success:!1,errors:[s.message]}}},zO=({onNavigate:t})=>{const{t:e,language:r}=Gt(),{user:s,isAdmin:a}=rr(),{products:l,combos:u,categories:d,addToCart:h,financialSettings:m,refreshProducts:p,visualSettings:g}=Ht(),[v,b]=w.useState(""),[_,C]=w.useState("all"),[j,R]=w.useState([]),[A,N]=w.useState([]),[P,D]=w.useState(!1),[M,L]=w.useState(0),[Q,re]=w.useState(null),[B,ye]=w.useState(null),[ne,we]=w.useState([]),[H,ce]=w.useState(null),[G,ae]=w.useState({}),V=w.useRef(null),[oe,ie]=w.useState(!1),[E,I]=w.useState(!1),X=w.useCallback(async(K,De)=>{const _e=K.target.files[0];if(_e)try{D(!0),L(0);const T=await aa(_e,"product",se=>L(se.progress));if(!T.success){he({title:"Error de validacin",description:T.errors.join(`
`),variant:"destructive"});return}ye(T.base64);const pe=`product-${De}-${Date.now()}.jpg`,{publicUrl:te}=await UO(T.blob,pe),{error:U}=await ee.from("products").update({image_url:te}).eq("id",De);if(U)throw U;await p(),he({title:e("products.imageUploaded"),description:`${e("products.imageUploadedSuccess")} (${T.metadata.compression} compresin)`})}catch(T){console.error("Error uploading image:",T),he({title:e("products.imageUploadError"),description:T.message,variant:"destructive"})}finally{D(!1),L(0),ye(null)}},[e,p]),le=w.useCallback(async(K,De)=>{if(De)try{const _e=De.split("/").pop();await BO(_e);const{error:T}=await ee.from("products").update({image_url:null}).eq("id",K);if(T)throw T;await p(),he({title:e("products.imageDeleted"),description:e("products.imageDeletedSuccess")})}catch(_e){console.error("Error deleting image:",_e),he({title:e("products.imageDeleteError"),description:_e.message,variant:"destructive"})}},[e,p]);w.useEffect(()=>{(async()=>{try{const{data:De,error:_e}=await ee.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(_e)throw _e;we(De||[]);const T=De?.find(se=>se.is_base);T&&ce(T.id);const{data:pe,error:te}=await ee.from("exchange_rates").select("*").eq("is_active",!0);if(te)throw te;const U={};(pe||[]).forEach(se=>{U[`${se.from_currency_id}-${se.to_currency_id}`]=se.rate}),ae(U)}catch(De){console.error("Error loading currencies:",De)}})()},[]),w.useEffect(()=>{let K=l;a||(K=K.filter(_e=>(_e.stock!==void 0?_e.stock:0)>0)),v&&(K=K.filter(_e=>(_e.name_es||_e.name||"").toLowerCase().includes(v.toLowerCase())||(_e.name_en||"").toLowerCase().includes(v.toLowerCase()))),_!=="all"&&(K=K.filter(_e=>_e.category?.id===_||_e.category_id===_)),R(K);let De=u||[];a||(De=De.filter(_e=>_e.is_active!==!1)),v&&(De=De.filter(_e=>_e.name.toLowerCase().includes(v.toLowerCase()))),N(De)},[l,u,v,_,a]);const be=K=>{h(K),he({title:e("products.addedToCart"),description:`${K.name_es||K.name} ${e("products.addedToCartDesc")}`})},Ce=K=>{if(V.current){const _e=K==="left"?V.current.scrollLeft-400:V.current.scrollLeft+400;V.current.scrollTo({left:_e,behavior:"smooth"})}},ue=()=>{if(V.current){const{scrollLeft:K,scrollWidth:De,clientWidth:_e}=V.current;ie(K>0),I(K<De-_e-10)}};w.useEffect(()=>{ue();const K=V.current;if(K)return K.addEventListener("scroll",ue),()=>K.removeEventListener("scroll",ue)},[A]);const Ne=(K,De,_e)=>{if(!K||!De||!_e||De===_e)return K;const T=`${De}-${_e}`,pe=G[T];return pe?parseFloat(K)*pe:K},Oe=K=>{if(!K||!H)return"0.00";const De=parseFloat(K.final_price||K.base_price||0),_e=K.base_currency_id;return _e?Ne(De,_e,H).toFixed(2):De.toFixed(2)},Y=K=>{if(!K||!H)return"0.00";let De=0;(K.products||[]).forEach(pe=>{const te=l.find(U=>U.id===pe);if(te){const U=parseFloat(te.base_price||0),se=te.base_currency_id,Pe=K.productQuantities?.[pe]||1;let Z=U;se&&se!==H&&(Z=Ne(U,se,H)),De+=Z*Pe}});const _e=parseFloat(K.profitMargin||m.comboProfit)/100;return(De*(1+_e)).toFixed(2)};return o.jsx("div",{className:"min-h-screen py-8 px-4",children:o.jsxs("div",{className:"container mx-auto",children:[o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",style:et(g),children:e("products.title")}),o.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e("products.subtitle")})]}),o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect p-6 rounded-2xl mb-8",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(kh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",placeholder:e("products.searchPlaceholder"),value:v,onChange:K=>b(K.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ub,{className:"w-5 h-5 text-gray-400"}),o.jsxs("select",{value:_,onChange:K=>C(K.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"all",children:e("products.categories.all")}),d.map(K=>o.jsx("option",{value:K.id,children:r==="es"?K.name_es:K.name_en},K.id))]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:r==="es"?"Moneda:":"Currency:"}),o.jsx("select",{value:H||"",onChange:K=>ce(K.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:ne.map(K=>o.jsxs("option",{value:K.id,children:[K.code," (",K.symbol,")"]},K.id))})]})]})}),A.length>0&&o.jsxs(o.Fragment,{children:[o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-4",children:o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",style:et(g),children:" Combos Especiales"}),A.length>3&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx(xe,{variant:"outline",size:"sm",onClick:()=>Ce("left"),disabled:!oe,className:"rounded-full w-10 h-10 p-0",children:o.jsx(Sh,{className:"w-5 h-5"})}),o.jsx(xe,{variant:"outline",size:"sm",onClick:()=>Ce("right"),disabled:!E,className:"rounded-full w-10 h-10 p-0",children:o.jsx(Nh,{className:"w-5 h-5"})})]})]})}),o.jsx("style",{children:`
              .combos-carousel::-webkit-scrollbar {
                display: none;
              }
            `}),o.jsx("div",{ref:V,className:"combos-carousel flex gap-6 mb-12 overflow-x-auto pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:A.map((K,De)=>{const T=(()=>{let te=0;(K.products||[]).forEach(Z=>{const je=l.find(Ie=>Ie.id===Z);if(je){const Ie=parseFloat(je.base_price||0),Xe=Ne(Ie,je.base_currency_id,H),bt=K.productQuantities?.[Z]||1,dt=parseFloat(m.productProfit||40)/100,Dt=Xe*(1+dt);te+=Dt*bt}});const U=parseFloat(Y(K)),se=te-U,Pe=te>0?(se/te*100).toFixed(0):0;return{savings:se.toFixed(2),percent:Pe}})(),pe=ne.find(te=>te.id===H)?.symbol||"$";return o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:De*.1},className:"glass-effect rounded-2xl overflow-hidden hover-lift group border-2 border-purple-200 cursor-pointer flex-shrink-0",style:{width:"300px"},onClick:()=>t("product-detail",{itemId:K.id,itemType:"combo"}),children:[o.jsxs("div",{className:"aspect-square bg-gradient-to-br from-purple-100 to-pink-100 relative",children:[K.image?o.jsx("img",{src:K.image,alt:K.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(Jr,{className:"w-20 h-20 text-purple-300"})}),T.savings>0&&o.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-2 rounded-lg shadow-lg animate-pulse",children:o.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[o.jsx("span",{className:"text-[10px] opacity-90",children:r==="es"?"AHORRA":"SAVE"}),o.jsxs("span",{className:"text-sm",children:[pe,T.savings]}),o.jsxs("span",{className:"text-[10px] bg-white bg-opacity-20 px-2 rounded-full mt-0.5",children:["-",T.percent,"%"]})]})}),o.jsx("div",{className:"absolute top-2 right-2 bg-purple-600 text-white text-xs font-bold px-3 py-1 rounded-full",children:"COMBO"})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-bold text-lg mb-2",children:K.name}),o.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[K.products?.length||0," productos incluidos"]}),o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{children:[o.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[ne.find(te=>te.id===H)?.symbol||"$",Y(K)]}),o.jsx("p",{className:"text-xs text-gray-500",children:ne.find(te=>te.id===H)?.code||"USD"})]})}),o.jsxs(xe,{onClick:te=>{te.stopPropagation(),be({...K,type:"combo"})},className:"w-full",style:{background:g.useGradient?`linear-gradient(to right, ${g.primaryColor||"#2563eb"}, ${g.secondaryColor||"#9333ea"})`:g.buttonBgColor||"#2563eb",color:g.buttonTextColor||"#ffffff",border:"none"},children:[o.jsx(ra,{className:"w-4 h-4 mr-2"}),e("products.addToCart")]})]})]},`combo-${K.id}`)})})]}),j.length>0&&o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-4",children:o.jsx("h2",{className:"text-2xl font-bold mb-4",style:et(g),children:" Productos"})}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:j.map((K,De)=>o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:De*.1},className:"glass-effect rounded-2xl overflow-hidden hover-lift group cursor-pointer",onClick:()=>t("product-detail",{itemId:K.id,itemType:"product"}),children:[o.jsxs("div",{className:"aspect-square bg-gray-100 relative group",children:[B&&Q===K.id?o.jsx("img",{className:"w-full h-full object-cover",alt:e("products.preview"),src:B}):o.jsx("img",{className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",alt:K.name_es||K.name,src:K.image_url||"https://images.unsplash.com/photo-1646193186132-7976c1670e81"}),a&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center z-10",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("label",{className:"cursor-pointer",children:[o.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:_e=>{_e.stopPropagation(),re(K.id),X(_e,K.id)}}),o.jsx(xe,{variant:"secondary",size:"sm",className:"bg-white hover:bg-gray-100",onClick:_e=>_e.stopPropagation(),children:o.jsx(mb,{className:"w-4 h-4"})})]}),K.image_url&&o.jsx(xe,{variant:"destructive",size:"sm",onClick:_e=>{_e.stopPropagation(),le(K.id,K.image_url)},children:o.jsx(_r,{className:"w-4 h-4"})})]})}),P&&Q===K.id&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10",children:o.jsx("div",{className:"w-full max-w-[80%] bg-white rounded-lg p-4",children:o.jsx("div",{className:"h-2 bg-gray-200 rounded",children:o.jsx("div",{className:"h-full rounded transition-all duration-300",style:{width:`${M}%`,background:g.useGradient?`linear-gradient(to right, ${g.primaryColor}, ${g.secondaryColor})`:g.primaryColor}})})})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:K.name_es||K.name}),K.category&&o.jsx("p",{className:"text-sm text-gray-500 mb-2",children:r==="es"?K.category.name_es:K.category.name_en}),o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{children:[o.jsxs("div",{className:"text-xl font-bold text-green-600",children:[ne.find(_e=>_e.id===H)?.symbol||"$",Oe(K)]}),o.jsx("p",{className:"text-xs text-gray-500",children:ne.find(_e=>_e.id===H)?.code||"USD"})]})}),o.jsxs(xe,{onClick:_e=>{_e.stopPropagation(),be(K)},className:"w-full",style:{background:g.useGradient?`linear-gradient(to right, ${g.primaryColor||"#2563eb"}, ${g.secondaryColor||"#9333ea"})`:g.buttonBgColor||"#2563eb",color:g.buttonTextColor||"#ffffff",border:"none"},children:[o.jsx(ra,{className:"w-4 h-4 mr-2"}),e("products.addToCart")]})]})]},K.id))}),j.length===0&&o.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[o.jsx(Jr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:e("products.noProducts")}),o.jsx("p",{className:"text-gray-500",children:e("products.noProductsDesc")})]})]})})},qO=({product:t,selectedCurrency:e,currencySymbol:r,currencyCode:s,convertPrice:a,quantity:l=1})=>{const[u,d]=w.useState(!1),{language:h}=Gt(),{visualSettings:m}=Ht(),p=()=>{const v=parseFloat(t.final_price||t.base_price||0),b=t.base_currency_id;return!b||b===e?v.toFixed(2):a(v,b,e).toFixed(2)},g=()=>(parseFloat(p())*l).toFixed(2);return o.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-gray-200 last:border-0",children:[o.jsx(me.div,{className:"flex-shrink-0 cursor-pointer relative",onClick:()=>d(!u),whileHover:{scale:1.05},whileTap:{scale:.95},children:o.jsx(me.div,{animate:{width:u?"120px":"60px",height:u?"120px":"60px"},transition:{duration:.3,ease:"easeInOut"},className:"rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:o.jsx("img",{src:t.image_url||"https://images.unsplash.com/photo-1646193186132-7976c1670e81",alt:t.name_es||t.name,className:"w-full h-full object-cover"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-gray-800",children:t.name_es||t.name}),t.category&&o.jsx("p",{className:"text-xs text-gray-500",children:h==="es"?t.category.name_es:t.category.name_en}),o.jsx("p",{className:"text-sm font-semibold",style:et(m),children:h==="es"?`Cantidad: ${l}`:`Quantity: ${l}`})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[r,p()," ",h==="es"?"c/u":"each"]}),o.jsxs("p",{className:"font-semibold text-gray-800",children:["Total:"," ",r,g()]}),o.jsx("p",{className:"text-xs text-gray-500",children:s})]})]})},WO=({onNavigate:t,itemId:e,itemType:r})=>{const{t:s,language:a}=Gt(),{products:l,combos:u,categories:d,addToCart:h,financialSettings:m,visualSettings:p}=Ht(),{isAdmin:g}=rr(),[v,b]=w.useState(null),[_,C]=w.useState(0),[j,R]=w.useState([]),[A,N]=w.useState(!1),[P,D]=w.useState([]),[M,L]=w.useState(null),[Q,re]=w.useState({});w.useEffect(()=>{(async()=>{try{const{data:I,error:X}=await ee.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(X)throw X;D(I||[]);const le=I?.find(Ne=>Ne.is_base);le&&L(le.id);const{data:be,error:Ce}=await ee.from("exchange_rates").select("*").eq("is_active",!0);if(Ce)throw Ce;const ue={};(be||[]).forEach(Ne=>{ue[`${Ne.from_currency_id}-${Ne.to_currency_id}`]=Ne.rate}),re(ue)}catch(I){console.error("Error loading currencies:",I)}})()},[]),w.useEffect(()=>{const E=r==="combo"?u:l;R(E);const I=E.findIndex(X=>X.id===e);I!==-1&&(C(I),b(E[I]))},[e,r,l,u]);const B=(E,I,X)=>{if(!E||!I||!X||I===X)return E;const le=`${I}-${X}`,be=Q[le];return be?parseFloat(E)*be:E},ye=(E,I)=>{if(!E||!M)return"0.00";if(I){const X=parseFloat(E.final_price||E.base_price||0),le=E.base_currency_id;return le?B(X,le,M).toFixed(2):X.toFixed(2)}else{let X=0;(E.products||[]).forEach(be=>{const Ce=l.find(ue=>ue.id===be);if(Ce){const ue=parseFloat(Ce.base_price||0),Ne=Ce.base_currency_id,Oe=E.productQuantities?.[be]||1;let Y=ue;Ne&&Ne!==M&&(Y=B(ue,Ne,M)),X+=Y*Oe}});const le=parseFloat(E.profitMargin||m.comboProfit)/100;return(X*(1+le)).toFixed(2)}},ne=()=>{if(_>0){const E=j[_-1];C(_-1),b(E),N(!1)}else N(!0)},we=()=>{if(_<j.length-1){const E=j[_+1];C(_+1),b(E),N(!1)}else N(!0)},H=()=>{const E=!v?.products;if(E&&_===j.length-1){if(u.length>0){const I=u[0];R(u),C(0),b(I),N(!1)}}else if(E&&_===0){if(u.length>0){const I=u[u.length-1];R(u),C(u.length-1),b(I),N(!1)}}else if(!E&&_===j.length-1){if(l.length>0){const I=l[0];R(l),C(0),b(I),N(!1)}}else if(!E&&_===0&&l.length>0){const I=l[l.length-1];R(l),C(l.length-1),b(I),N(!1)}},ce=()=>{const E=parseFloat(ye(v,ae)),I=P.find(le=>le.id===M),X={...v,displayed_price:E,displayed_currency_code:I?.code||"USD",displayed_currency_id:M};h(X),he({title:s("products.addedToCart"),description:`${v.name_es||v.name} ${s("products.addedToCartDesc")}`})},G=E=>{const I=d.find(X=>X.id===E);return I?a==="es"?I.name_es||I.es:I.name_en||I.en:""};if(!v)return o.jsx("div",{className:"min-h-screen py-8 px-4 flex items-center justify-center",children:o.jsx("p",{className:"text-gray-500",children:s("products.noProducts")})});const ae=!v.products,V=ye(v,ae),oe=P.find(E=>E.id===M)?.symbol||"$",ie=P.find(E=>E.id===M)?.code||"USD";return o.jsx("div",{className:"min-h-screen py-8 px-4",children:o.jsxs("div",{className:"container mx-auto max-w-6xl",children:[o.jsx(me.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:()=>t("products"),className:"mb-6 flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:s(ae?"products.detail.backToProducts":"products.detail.backToCombos")}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[o.jsxs(me.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"relative",children:[o.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-gray-100 relative",children:[v.image_url||v.image?o.jsx("img",{src:v.image_url||v.image,alt:v.name_es||v.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(Jr,{className:"w-24 h-24 text-gray-300"})}),!ae&&o.jsx("div",{className:"absolute top-4 right-4 bg-purple-600 text-white text-sm font-bold px-4 py-2 rounded-full",children:"COMBO"})]}),o.jsxs("div",{className:"flex items-center justify-between mt-6",children:[o.jsxs(xe,{onClick:ne,variant:"outline",size:"lg",disabled:_===0&&r==="combo"&&l.length===0,className:"flex items-center gap-2",children:[o.jsx(Sh,{className:"w-5 h-5"}),s("products.detail.previous")]}),o.jsxs(xe,{onClick:we,variant:"outline",size:"lg",disabled:_===j.length-1&&r==="combo"&&l.length===0,className:"flex items-center gap-2",children:[s("products.detail.next"),o.jsx(Nh,{className:"w-5 h-5"})]})]}),A&&(()=>{const E=!v?.products;return o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4",children:o.jsxs(xe,{onClick:H,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",size:"lg",children:[E&&(_===j.length-1||_===0)&&s("products.detail.continueToCombos"),!E&&(_===j.length-1||_===0)&&s("products.detail.continueToProducts"),o.jsx(e2,{className:"w-5 h-5 ml-2"})]})})})()]}),o.jsxs(me.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",style:et(p),children:v.name_es||v.name}),ae&&(v.category_id||v.category)&&o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-4",children:[o.jsx(x2,{className:"w-4 h-4"}),o.jsx("span",{children:G(v.category_id||v.category)})]})]}),o.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"text-sm text-gray-600",children:a==="es"?"Mostrar en:":"Display in:"}),o.jsx("select",{value:M||"",onChange:E=>L(E.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:P.map(E=>o.jsxs("option",{value:E.id,children:[E.code," (",E.symbol,")"]},E.id))})]}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsxs("span",{className:"text-4xl font-bold",style:et(p),children:[oe,V]}),o.jsx("span",{className:"text-gray-500",children:ie})]})]}),(v.description_es||v.description_en||v.description)&&o.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[o.jsx("h3",{className:"font-semibold text-lg mb-2",children:s("products.detail.description")}),o.jsx("p",{className:"text-gray-600",children:a==="es"?v.description_es||v.description:v.description_en||v.description})]}),ae&&o.jsxs("div",{className:"space-y-4",children:[v.stock!==void 0&&o.jsxs("div",{className:"flex items-center justify-between glass-effect p-4 rounded-xl",children:[o.jsxs("span",{className:"text-gray-600",children:[s("products.detail.stock"),":"]}),o.jsx("span",{className:`font-semibold ${v.stock>0?"text-green-600":"text-red-600"}`,children:v.stock>0?`${v.stock} ${s("products.detail.units")}`:s("products.detail.outOfStock")})]}),v.expiryDate&&o.jsxs("div",{className:"flex items-center justify-between glass-effect p-4 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[o.jsx(Calendar,{className:"w-4 h-4"}),o.jsxs("span",{children:[s("products.detail.expiryDate"),":"]})]}),o.jsx("span",{className:"font-semibold",children:v.expiryDate})]})]}),!ae&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"glass-effect p-6 rounded-xl bg-gradient-to-r from-purple-50 to-pink-50",children:[o.jsx("h3",{className:"font-semibold text-lg mb-3",style:et(p),children:a==="es"?" Ahorra con este combo!":" Save with this combo!"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"bg-white bg-opacity-50 p-3 rounded-lg space-y-1",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:a==="es"?"Comprando por separado:":"Buying separately:"}),(v.products||[]).map(E=>{const I=l.find(Oe=>Oe.id===E);if(!I)return null;const X=parseFloat(I.base_price||0),le=B(X,I.base_currency_id,M),be=v.productQuantities?.[E]||1,Ce=parseFloat(m.productProfit||40)/100,Ne=le*(1+Ce)*be;return o.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[o.jsxs("span",{children:[I.name_es||I.name,"  ",be]}),o.jsxs("span",{children:[oe,Ne.toFixed(2)]})]},E)}),o.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-300",children:[o.jsx("span",{className:"font-semibold text-gray-700",children:"Total:"}),o.jsxs("span",{className:"text-lg font-semibold line-through text-gray-500",children:[oe,(()=>{let E=0;return(v.products||[]).forEach(I=>{const X=l.find(le=>le.id===I);if(X){const le=parseFloat(X.base_price||0),be=B(le,X.base_currency_id,M),Ce=v.productQuantities?.[I]||1,ue=parseFloat(m.productProfit||40)/100,Ne=be*(1+ue);E+=Ne*Ce}}),E.toFixed(2)})()]})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-purple-200",children:[o.jsx("span",{className:"text-lg font-bold",style:et(p),children:a==="es"?"Precio del combo:":"Combo price:"}),o.jsxs("span",{className:"text-2xl font-bold",style:et(p),children:[oe,V]})]}),o.jsx("div",{className:"text-center pt-2",children:o.jsxs("span",{className:"inline-block bg-green-100 px-4 py-2 rounded-full text-sm font-semibold",style:et(p),children:[a==="es"?"Ahorras ":"You save ",oe,(()=>{let E=0;return(v.products||[]).forEach(X=>{const le=l.find(be=>be.id===X);if(le){const be=parseFloat(le.base_price||0),Ce=B(be,le.base_currency_id,M),ue=v.productQuantities?.[X]||1,Ne=parseFloat(m.productProfit||40)/100,Oe=Ce*(1+Ne);E+=Oe*ue}}),(E-parseFloat(V)).toFixed(2)})(),"!"]})})]})]}),o.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[o.jsx("h3",{className:"font-semibold text-lg mb-3",children:s("products.detail.includedProducts")}),o.jsx("div",{className:"space-y-3",children:v.products?.map(E=>{const I=l.find(le=>le.id===E),X=v.productQuantities?.[E]||1;return I?o.jsx(qO,{product:I,selectedCurrency:M,currencySymbol:oe,currencyCode:ie,convertPrice:B,quantity:X},E):null})})]}),g&&v.profitMargin&&o.jsxs("div",{className:"flex items-center justify-between glass-effect p-4 rounded-xl border-2 border-purple-200",children:[o.jsxs("span",{className:"text-gray-600",children:[s("products.detail.profitMargin"),":"]}),o.jsxs("span",{className:"font-semibold text-purple-600",children:[v.profitMargin,"%"]})]})]}),o.jsxs(xe,{onClick:ce,size:"lg",className:"w-full text-lg py-6",style:mt(p),children:[o.jsx(ra,{className:"w-5 h-5 mr-2"}),s("products.addToCart")]})]})]})]})})},Wh=async()=>{try{return{success:!0,configs:Wv()}}catch(t){return console.error("Error fetching remittance configs:",t),{success:!1,configs:Wv(),error:t.message}}},Wv=()=>[{id:"temp-mn",currency:"MN",name:"Moneda Nacional",enabled:!0,paymentMethods:[{id:"cash",name:"Efectivo",enabled:!0},{id:"transfer",name:"Transferencia",enabled:!0}],isNew:!0},{id:"temp-usd",currency:"USD",name:"Dlar Estadounidense",enabled:!0,paymentMethods:[{id:"cash",name:"Efectivo",enabled:!0},{id:"card_transfer",name:"Transferencia Tarjeta Clsica",enabled:!0}],isNew:!0},{id:"temp-mlc",currency:"MLC",name:"Moneda Libremente Convertible",enabled:!0,paymentMethods:[{id:"card",name:"Tarjeta MLC",enabled:!0}],isNew:!0}],HO=async t=>{try{return console.warn("Remittance config save not implemented yet"),{success:!0,config:t}}catch(e){return console.error("Error saving remittance config:",e),{success:!1,error:e.message}}},GO=async()=>{try{const t=await Wh();return t.success?{success:!0,configs:t.configs.filter(r=>r.enabled!==!1)}:t}catch(t){return console.error("Error fetching enabled remittance configs:",t),{success:!1,configs:[],error:t.message}}},KO=async t=>{try{const e=await Wh();if(!e.success)return{success:!1,methods:[],error:e.error};const r=e.configs.find(a=>a.currency===t);return r?{success:!0,methods:r.paymentMethods?.filter(a=>a.enabled!==!1)||[]}:{success:!1,methods:[],error:"Currency not found"}}catch(e){return console.error("Error fetching payment methods:",e),{success:!1,methods:[],error:e.message}}},QO=({onNavigate:t})=>{const{t:e,language:r}=Gt(),{visualSettings:s}=Ht(),[a,l]=w.useState(""),[u,d]=w.useState(""),[h,m]=w.useState("offers"),[p,g]=w.useState(null),[v,b]=w.useState({deliveryMethod:"transfer",currency:"USD",fullName:"",bankName:"",accountNumber:""}),[_,C]=w.useState([]),[j,R]=w.useState([]),[A,N]=w.useState(!1);w.useEffect(()=>{P()},[]),w.useEffect(()=>{v.currency&&D(v.currency)},[v.currency]);const P=async()=>{N(!0);try{const B=await GO();B.success&&(C(B.configs),B.configs.length>0&&!v.currency&&b(ye=>({...ye,currency:B.configs[0].currency})))}catch(B){console.error("Error loading remittance configs:",B)}finally{N(!1)}},D=async B=>{try{const ye=await KO(B);ye.success&&(R(ye.methods),ye.methods.length>0&&b(ne=>({...ne,deliveryMethod:ye.methods[0].id})))}catch(ye){console.error("Error loading payment methods:",ye)}},M=[{id:1,country:"Cuba",rate:120,fee:5,time:"2-4 hours",popular:!0,currency:"CUP"}],L=B=>{g(B),m("recipient")},Q=()=>{he({title:" Esta funcionalidad no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "}),m("offers"),l("")},re=B=>a?(parseFloat(a)*B.rate-B.fee).toFixed(2):0;return h==="recipient"?o.jsx("div",{className:"container mx-auto max-w-2xl py-8 px-4",children:o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl",children:[o.jsx("h1",{className:"text-3xl font-bold mb-6",style:et(s),children:e("remittances.recipient.title")}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:r==="es"?"Moneda":"Currency"}),o.jsx("select",{value:v.currency,onChange:B=>b({...v,currency:B.target.value}),className:"input-style w-full",style:Lo(s),children:_.map(B=>o.jsxs("option",{value:B.currency,children:[B.currency," - ",B.name]},B.currency))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:r==="es"?"Mtodo de Pago":"Payment Method"}),o.jsx("select",{value:v.deliveryMethod,onChange:B=>b({...v,deliveryMethod:B.target.value}),className:"input-style w-full",style:Lo(s),children:j.map(B=>o.jsx("option",{value:B.id,children:B.name},B.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:e("remittances.recipient.fullName")}),o.jsx("input",{type:"text",placeholder:e("remittances.recipient.fullName"),value:v.fullName,onChange:B=>b({...v,fullName:B.target.value}),className:"input-style w-full",style:Lo(s)})]}),(v.deliveryMethod==="transfer"||v.deliveryMethod==="card_transfer")&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:e("remittances.recipient.bankName")}),o.jsx("input",{type:"text",placeholder:e("remittances.recipient.bankName"),value:v.bankName,onChange:B=>b({...v,bankName:B.target.value}),className:"input-style w-full",style:Lo(s)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:v.deliveryMethod==="card_transfer"?r==="es"?"Nmero de Tarjeta":"Card Number":e("remittances.recipient.accountNumber")}),o.jsx("input",{type:"text",placeholder:v.deliveryMethod==="card_transfer"?r==="es"?"Nmero de Tarjeta":"Card Number":e("remittances.recipient.accountNumber"),value:v.accountNumber,onChange:B=>b({...v,accountNumber:B.target.value}),className:"input-style w-full",style:Lo(s)})]})]}),v.deliveryMethod==="cash"&&o.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:`${s.primaryColor||"#2563eb"}10`,borderColor:s.primaryColor||"#2563eb",borderWidth:"1px",borderStyle:"solid"},children:o.jsx("p",{className:"text-sm",children:r==="es"?"El destinatario recoger el efectivo en el punto de entrega especificado.":"The recipient will pick up cash at the specified delivery point."})})]}),o.jsxs("div",{className:"flex justify-between mt-6",children:[o.jsx(xe,{variant:"outline",onClick:()=>m("offers"),children:e("vendor.addProduct.cancel")}),o.jsx(xe,{onClick:Q,style:mt(s),children:e("remittances.recipient.confirm")})]})]})}):o.jsx("div",{className:"min-h-screen py-8 px-4",children:o.jsxs("div",{className:"container mx-auto",children:[o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",style:et(s),children:e("remittances.title")}),o.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e("remittances.subtitle")})]}),o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect p-8 rounded-2xl mb-8",children:o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsx("input",{type:"number",value:a,onChange:B=>l(B.target.value),placeholder:e("remittances.amount"),className:"input-style w-full"}),o.jsxs("select",{value:u,onChange:B=>d(B.target.value),className:"input-style w-full",children:[o.jsx("option",{value:"",children:e("remittances.selectCountry")}),M.map(B=>o.jsx("option",{value:B.country,children:B.country},B.id))]})]})}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map((B,ye)=>o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:ye*.1},className:`glass-effect rounded-2xl p-6 hover-lift relative ${B.popular?"ring-2 ring-blue-500":""}`,children:[B.popular&&o.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:o.jsx("span",{className:"bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-semibold",children:e("remittances.popular")})}),o.jsx("h3",{className:"text-lg font-semibold text-center mb-4",children:B.country}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:[e("remittances.rate"),":"]}),o.jsx("span",{className:"font-semibold",children:B.rate.toFixed(2)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:[e("remittances.fee"),":"]}),o.jsxs("span",{className:"font-semibold",children:["$",B.fee]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:[e("remittances.time"),":"]}),o.jsxs("span",{className:"font-semibold flex items-center",children:[o.jsx(Li,{className:"w-4 h-4 mr-1"}),B.time]})]}),a&&o.jsx("div",{className:"border-t pt-3 mt-3",children:o.jsxs("div",{className:"flex justify-between text-lg font-bold",style:{color:s.accentColor||"#22c55e"},children:[o.jsxs("span",{children:[e("remittances.youReceive"),":"]}),o.jsxs("span",{children:[re(B)," ",B.currency||"USD"]})]})})]}),o.jsxs(xe,{onClick:()=>L(B),className:"w-full",disabled:!a,style:mt(s),children:[o.jsx(p2,{className:"w-4 h-4 mr-2"}),e("remittances.send")]})]},B.id))})]})})},$w=(t,e,r="es")=>e===Wt.VALIDATED?r==="es"?"Validado":"Validated":e===Wt.REJECTED?r==="es"?"Rechazado":"Rejected":e===Wt.PENDING?r==="es"?"Pendiente":"Pending":t===ct.PROCESSING?r==="es"?"En proceso":"Processing":t===ct.COMPLETED?r==="es"?"Completado":"Completed":r==="es"?"Pendiente":"Pending",YO=(t,e)=>e===Wt.VALIDATED||t===ct.COMPLETED?o.jsx(ks,{className:"h-4 w-4"}):e===Wt.REJECTED||t===ct.CANCELLED?o.jsx(Es,{className:"h-4 w-4"}):o.jsx(Li,{className:"h-4 w-4"}),JO=()=>{const{t}=Gt(),{user:e}=rr(),[r,s]=w.useState([]),[a,l]=w.useState(!0),[u,d]=w.useState(null),[h,m]=w.useState(null),[p,g]=w.useState(null),[v,b]=w.useState({searchQuery:"",combined_status:"",order_type:"",startDate:"",endDate:"",userId:"",productId:""}),[_,C]=w.useState(!1),[j,R]=w.useState(null),[A,N]=w.useState(!1),[P,D]=w.useState(!1),[M,L]=w.useState(null),[Q,re]=w.useState(null),[B,ye]=w.useState({show:!1,title:"",message:"",onConfirm:null}),[ne,we]=w.useState({show:!1,title:"",message:"",defaultValue:"",onConfirm:null}),[H,ce]=w.useState(null);w.useEffect(()=>{G()},[]);const G=async()=>{l(!0),d(null);try{const U={};if(v.combined_status)switch(v.combined_status){case"payment_pending":U.payment_status=Wt.PENDING;break;case"payment_validated":U.payment_status=Wt.VALIDATED,U.status=ct.PENDING;break;case"processing":U.status=ct.PROCESSING;break;case"shipped":U.status=ct.SHIPPED;break;case"delivered":U.status=ct.DELIVERED;break;case"completed":U.status=ct.COMPLETED;break;case"cancelled":U.status=ct.CANCELLED;break;case"rejected":U.payment_status=Wt.REJECTED;break}v.order_type&&(U.order_type=v.order_type);const se=await Ow(U);se.success?s(se.orders||[]):d(se.error||"Error loading orders")}catch(U){console.error("Error loading orders:",U),d("Error loading orders")}finally{l(!1)}},ae=w.useMemo(()=>{let U=[...r];if(v.searchQuery){const se=v.searchQuery.toLowerCase();U=U.filter(Pe=>{const Z=Pe.order_number?.toLowerCase()||"",je=Pe.user_name?.toLowerCase()||"",Ie=Pe.user_email?.toLowerCase()||"",Xe=Pe.order_items?.map(bt=>(bt.item_name_es||"").toLowerCase()).join(" ")||"";return Z.includes(se)||je.includes(se)||Ie.includes(se)||Xe.includes(se)})}if(v.startDate){const se=new Date(v.startDate);se.setHours(0,0,0,0),U=U.filter(Pe=>new Date(Pe.created_at)>=se)}if(v.endDate){const se=new Date(v.endDate);se.setHours(23,59,59,999),U=U.filter(Pe=>new Date(Pe.created_at)<=se)}return v.userId&&(U=U.filter(se=>se.user_id===v.userId)),v.productId&&(U=U.filter(se=>se.order_items?.some(Pe=>Pe.item_id===v.productId))),U},[r,v]),V=w.useMemo(()=>({total:ae.length,pending:ae.filter(U=>U.payment_status===Wt.PENDING).length,validated:ae.filter(U=>U.payment_status===Wt.VALIDATED).length,rejected:ae.filter(U=>U.payment_status===Wt.REJECTED).length,completed:ae.filter(U=>U.status===ct.COMPLETED).length,totalRevenue:ae.filter(U=>U.payment_status===Wt.VALIDATED).reduce((U,se)=>U+(se.total_amount||0),0)}),[ae]),oe=()=>{b({searchQuery:"",combined_status:"",order_type:"",startDate:"",endDate:"",userId:"",productId:""}),G()},ie=(U,se)=>{b(Pe=>({...Pe,[U]:se}))},E=()=>{G()},I=U=>{R(U),N(!0)},X=async U=>{Y(t("adminOrders.modals.startTitle"),t("adminOrders.messages.confirmStart").replace("{orderNumber}",U.order_number),async()=>{g(U.id);try{const se=await RO(U.id,e.id);se.success?(T(t("adminOrders.messages.startSuccess"),"success"),G()):T(`${t("adminOrders.messages.error")}: ${se.error}`,"error")}catch(se){console.error("Error starting processing:",se),T(t("adminOrders.messages.error"),"error")}finally{g(null)}})},le=async U=>{De(t("adminOrders.modals.trackingTitle"),t("adminOrders.messages.enterTracking").replace("{orderNumber}",U.order_number),"",async se=>{g(U.id);try{const Pe=await OO(U.id,e.id,se);Pe.success?(T(t("adminOrders.messages.shipSuccess"),"success"),G()):T(`${t("adminOrders.messages.error")}: ${Pe.error}`,"error")}catch(Pe){console.error("Error marking as shipped:",Pe),T(t("adminOrders.messages.error"),"error")}finally{g(null)}})},be=U=>{R(U),D(!0)},Ce=U=>{const se=U.target.files[0];if(!se)return;if(!se.type.startsWith("image/")){T(t("adminOrders.messages.invalidImage"),"error");return}if(se.size>5*1024*1024){T(t("adminOrders.messages.imageTooLarge"),"error");return}L(se);const Pe=new FileReader;Pe.onloadend=()=>{re(Pe.result)},Pe.readAsDataURL(se)},ue=async()=>{if(!M||!j){T(t("adminOrders.messages.selectImage"),"error");return}g(j.id);try{const U=await MO(j.id,M,e.id);U.success?(T(t("adminOrders.messages.deliverSuccess"),"success"),D(!1),L(null),re(null),R(null),G()):T(`${t("adminOrders.messages.error")}: ${U.error}`,"error")}catch(U){console.error("Error uploading delivery proof:",U),T(t("adminOrders.messages.error"),"error")}finally{g(null)}},Ne=async U=>{Y(t("adminOrders.modals.completeTitle"),t("adminOrders.messages.confirmComplete").replace("{orderNumber}",U.order_number),async()=>{g(U.id);try{const se=await DO(U.id);se.success?(T(t("adminOrders.messages.completeSuccess"),"success"),G()):T(`${t("adminOrders.messages.error")}: ${se.error}`,"error")}catch(se){console.error("Error completing order:",se),T(t("adminOrders.messages.error"),"error")}finally{g(null)}})},Oe=async U=>{De(t("adminOrders.modals.cancelReasonTitle"),t("adminOrders.messages.enterCancelReason").replace("{orderNumber}",U.order_number),"",async se=>{if(!se||se.trim()===""){T(t("adminOrders.messages.cancelReasonRequired"),"error");return}Y(t("adminOrders.modals.cancelTitle"),t("adminOrders.messages.confirmCancel"),async()=>{g(U.id);try{const Pe=await LO(U.id,e.id,se);Pe.success?(T(t("adminOrders.messages.cancelSuccess"),"success"),G()):T(`${t("adminOrders.messages.error")}: ${Pe.error}`,"error")}catch(Pe){console.error("Error cancelling order:",Pe),T(t("adminOrders.messages.error"),"error")}finally{g(null)}})})},Y=(U,se,Pe)=>{ye({show:!0,title:U,message:se,onConfirm:Pe})},K=()=>{ye({show:!1,title:"",message:"",onConfirm:null})},De=(U,se,Pe,Z)=>{we({show:!0,title:U,message:se,defaultValue:Pe,onConfirm:Z})},_e=()=>{we({show:!1,title:"",message:"",defaultValue:"",onConfirm:null})},T=(U,se="success")=>{ce({message:U,type:se}),setTimeout(()=>ce(null),4e3)},pe=U=>U?new Date(U).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",te=(U,se="USD")=>U?new Intl.NumberFormat("en-US",{style:"currency",currency:se}).format(U):"0.00";return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("adminOrders.title")}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t("adminOrders.subtitle")})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:()=>C(!_),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${_?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[o.jsx(ub,{className:"h-4 w-4"}),t("adminOrders.filters.title").replace(" de Bsqueda",""),_?o.jsx(n2,{className:"h-4 w-4"}):o.jsx(lb,{className:"h-4 w-4"})]}),o.jsxs("button",{onClick:G,disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[o.jsx(Mr,{className:`h-4 w-4 ${a?"animate-spin":""}`}),t("dashboard.refresh")]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[o.jsx(_i,{label:t("adminOrders.stats.total"),value:V.total,icon:cb,color:"blue"}),o.jsx(_i,{label:t("adminOrders.stats.pending"),value:V.pending,icon:Li,color:"yellow"}),o.jsx(_i,{label:t("adminOrders.stats.validated"),value:V.validated,icon:ks,color:"green"}),o.jsx(_i,{label:t("adminOrders.stats.rejected"),value:V.rejected,icon:Es,color:"red"}),o.jsx(_i,{label:t("adminOrders.stats.completed"),value:V.completed,icon:Jr,color:"purple"}),o.jsx(_i,{label:t("adminOrders.stats.revenue"),value:te(V.totalRevenue),icon:Qr,color:"green",isAmount:!0})]}),o.jsx(pn,{children:_&&o.jsxs(me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t("adminOrders.filters.title")}),o.jsxs("button",{onClick:oe,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900",children:[o.jsx(_r,{className:"h-4 w-4"}),t("adminOrders.filters.clear")]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"lg:col-span-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(kh,{className:"h-4 w-4 inline mr-2"}),t("adminOrders.filters.search")]}),o.jsx("input",{type:"text",placeholder:t("adminOrders.filters.searchPlaceholder"),value:v.searchQuery,onChange:U=>ie("searchQuery",U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("adminOrders.filters.status")}),o.jsxs("select",{value:v.combined_status,onChange:U=>ie("combined_status",U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:t("adminOrders.filters.allStatuses")}),o.jsxs("option",{value:"payment_pending",children:[" ",t("adminOrders.table.paymentStatus.pending")]}),o.jsxs("option",{value:"payment_validated",children:[" ",t("adminOrders.table.paymentStatus.validated")]}),o.jsxs("option",{value:"processing",children:[" ",t("adminOrders.table.orderStatus.processing")]}),o.jsxs("option",{value:"shipped",children:[" ",t("adminOrders.table.orderStatus.shipped")]}),o.jsxs("option",{value:"delivered",children:[" ",t("adminOrders.table.orderStatus.delivered")]}),o.jsxs("option",{value:"completed",children:[" ",t("adminOrders.table.orderStatus.completed")]}),o.jsxs("option",{value:"cancelled",children:[" ",t("adminOrders.table.orderStatus.cancelled")]}),o.jsxs("option",{value:"rejected",children:[" ",t("adminOrders.table.paymentStatus.rejected")]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("adminOrders.filters.orderType")}),o.jsxs("select",{value:v.order_type,onChange:U=>ie("order_type",U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:t("adminOrders.filters.allTypes")}),o.jsx("option",{value:"product",children:t("adminOrders.types.products")}),o.jsx("option",{value:"remittance",children:t("adminOrders.types.remittance")}),o.jsx("option",{value:"mixed",children:t("adminOrders.types.mixed")})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Zy,{className:"h-4 w-4 inline mr-2"}),t("adminOrders.filters.startDate")]}),o.jsx("input",{type:"date",value:v.startDate,onChange:U=>ie("startDate",U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Zy,{className:"h-4 w-4 inline mr-2"}),t("adminOrders.filters.endDate")]}),o.jsx("input",{type:"date",value:v.endDate,onChange:U=>ie("endDate",U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx("button",{onClick:E,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("adminOrders.filters.apply")})})]})}),o.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(Mr,{className:"h-8 w-8 animate-spin text-blue-600"})}):u?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-red-600",children:[o.jsx(Es,{className:"h-12 w-12 mb-4"}),o.jsx("p",{children:u}),o.jsx("button",{onClick:G,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:t("adminOrders.messages.retry")})]}):ae.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[o.jsx(Jr,{className:"h-12 w-12 mb-4"}),o.jsx("p",{children:t("adminOrders.messages.noOrders")})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.order")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.user")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.date")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.type")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.items")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.total")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.paymentStatus.label")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.orderStatus.label")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("adminOrders.table.actions")})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ae.map(U=>o.jsx(XO,{order:U,onViewDetails:I,onStartProcessing:X,onMarkAsShipped:le,onUploadDeliveryProof:be,onCompleteOrder:Ne,onCancelOrder:Oe,formatDate:pe,formatCurrency:te,actionLoading:p,t},U.id))})]})})}),A&&j&&o.jsx(ZO,{order:j,onClose:()=>{N(!1),R(null)},formatDate:pe,formatCurrency:te}),P&&j&&o.jsx(e4,{order:j,onClose:()=>{D(!1),R(null),L(null),re(null)},onFileChange:Ce,onSubmit:ue,preview:Q,loading:p===j.id,t}),o.jsx(t4,{show:B.show,title:B.title,message:B.message,onConfirm:()=>{B.onConfirm&&B.onConfirm(),K()},onCancel:K,t}),o.jsx(r4,{show:ne.show,title:ne.title,message:ne.message,defaultValue:ne.defaultValue,onConfirm:U=>{ne.onConfirm&&ne.onConfirm(U),_e()},onCancel:_e,t}),H&&o.jsx(n4,{message:H.message,type:H.type,onClose:()=>ce(null)})]})},_i=({label:t,value:e,icon:r,color:s,isAmount:a})=>{const l={blue:"bg-blue-50 text-blue-700 border-blue-200",green:"bg-green-50 text-green-700 border-green-200",yellow:"bg-yellow-50 text-yellow-700 border-yellow-200",red:"bg-red-50 text-red-700 border-red-200",purple:"bg-purple-50 text-purple-700 border-purple-200"};return o.jsxs("div",{className:`rounded-lg border p-4 ${l[s]}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:t}),o.jsx(r,{className:"h-4 w-4"})]}),o.jsx("div",{className:`text-2xl font-bold ${a?"text-lg":""}`,children:e})]})},XO=({order:t,onViewDetails:e,onStartProcessing:r,onMarkAsShipped:s,onUploadDeliveryProof:a,onCompleteOrder:l,onCancelOrder:u,formatDate:d,formatCurrency:h,actionLoading:m,t:p})=>{const g=t.status===ct.PROCESSING?IO(t):null,v=()=>{const b=m===t.id;return t.payment_status===Wt.VALIDATED&&t.status===ct.PENDING?o.jsxs("button",{onClick:()=>r(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(m2,{className:"h-3 w-3"}),p(b?"adminOrders.actions.processing":"adminOrders.actions.start")]}):t.status===ct.PROCESSING?o.jsxs("button",{onClick:()=>s(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white text-xs font-medium rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(Tf,{className:"h-3 w-3"}),p(b?"adminOrders.actions.processing":"adminOrders.actions.ship")]}):t.status===ct.SHIPPED?o.jsxs("button",{onClick:()=>a(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(ab,{className:"h-3 w-3"}),p(b?"adminOrders.actions.loading":"adminOrders.actions.proof")]}):t.status===ct.DELIVERED?o.jsxs("button",{onClick:()=>l(t),disabled:b,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(ac,{className:"h-3 w-3"}),p(b?"adminOrders.actions.completing":"adminOrders.actions.complete")]}):t.status===ct.COMPLETED||t.status===ct.CANCELLED?o.jsx("span",{className:"text-xs text-gray-500 italic",children:t.status===ct.COMPLETED?p("adminOrders.table.orderStatus.completed"):p("adminOrders.table.orderStatus.cancelled")}):o.jsx("span",{className:"text-xs text-gray-400",children:"-"})};return o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.order_number})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-gray-900",children:t.user_name||"N/A"}),o.jsx("div",{className:"text-xs text-gray-500",children:t.user_email||""})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:d(t.created_at)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[t.order_type==="product"?o.jsx(Jr,{className:"h-3 w-3"}):t.order_type==="remittance"?o.jsx(Qr,{className:"h-3 w-3"}):o.jsx(wr,{className:"h-3 w-3"}),t.order_type==="product"?p("adminOrders.types.products"):t.order_type==="remittance"?p("adminOrders.types.remittance"):p("adminOrders.types.mixed")]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900",children:[t.order_items?.length||0," items"]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h(t.total_amount,t.currencies?.code)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${t.payment_status===Wt.VALIDATED?"bg-green-100 text-green-700":t.payment_status===Wt.REJECTED?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[YO(t.status,t.payment_status),$w(t.status,t.payment_status,"es")]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${t.status===ct.COMPLETED?"bg-green-100 text-green-700":t.status===ct.CANCELLED?"bg-red-100 text-red-700":t.status===ct.SHIPPED?"bg-purple-100 text-purple-700":t.status===ct.DELIVERED?"bg-teal-100 text-teal-700":"bg-blue-100 text-blue-700"}`,children:t.status}),g!==null&&o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${g>5?"bg-red-100 text-red-700":g>3?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:[o.jsx(Li,{className:"h-3 w-3"}),g," ",p(g===1?"adminOrders.days.singular":"adminOrders.days.plural")]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{onClick:()=>e(t),className:"text-blue-600 hover:text-blue-900 inline-flex items-center gap-1",title:p("adminOrders.actions.view"),children:o.jsx(ta,{className:"h-4 w-4"})}),v(),t.status!==ct.COMPLETED&&t.status!==ct.CANCELLED&&o.jsx("button",{onClick:()=>u(t),disabled:m===t.id,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:p("adminOrders.actions.cancel"),children:o.jsx(t2,{className:"h-4 w-4"})})]})})]})},ZO=({order:t,onClose:e,formatDate:r,formatCurrency:s})=>o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Detalles de Orden: ",t.order_number]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:o.jsx(_r,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(zn,{label:"Nmero de Orden",value:t.order_number}),o.jsx(zn,{label:"Fecha",value:r(t.created_at)}),o.jsx(zn,{label:"Usuario",value:t.user_name||"N/A"}),o.jsx(zn,{label:"Email",value:t.user_email||"N/A"}),o.jsx(zn,{label:"Tipo de Orden",value:t.order_type}),o.jsx(zn,{label:"Estado de Pago",value:$w(t.status,t.payment_status,"es")}),o.jsx(zn,{label:"Estado de Orden",value:t.status}),o.jsx(zn,{label:"Mtodo de Pago",value:t.payment_method})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Items de la Orden"}),o.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Producto"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Cantidad"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Precio Unit."}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Total"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:t.order_items?.map((a,l)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:a.item_name_es||a.item_name_en}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:a.quantity}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s(a.unit_price,t.currencies?.code)}),o.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s(a.total_price,t.currencies?.code)})]},l))})]})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),o.jsx("span",{className:"font-medium",children:s(t.subtotal,t.currencies?.code)})]}),t.shipping_cost>0&&o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Envo:"}),o.jsx("span",{className:"font-medium",children:s(t.shipping_cost,t.currencies?.code)})]}),t.discount_amount>0&&o.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[o.jsx("span",{children:"Descuento:"}),o.jsxs("span",{className:"font-medium",children:["-",s(t.discount_amount,t.currencies?.code)]})]}),o.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200",children:[o.jsx("span",{children:"Total:"}),o.jsx("span",{children:s(t.total_amount,t.currencies?.code)})]})]}),t.shipping_address&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Informacin de Envo"}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Direccin:"})," ",t.shipping_address]}),t.recipient_info&&o.jsxs(o.Fragment,{children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Destinatario:"})," ",t.recipient_info.name]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Telfono:"})," ",t.recipient_info.phone]})]}),t.delivery_instructions&&o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Instrucciones:"})," ",t.delivery_instructions]})]})]}),t.payment_proof_url&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Comprobante de Pago"}),o.jsx("img",{src:t.payment_proof_url,alt:"Comprobante de pago",className:"max-w-full h-auto rounded-lg border border-gray-200"})]}),t.notes&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Notas"}),o.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-4",children:t.notes})]}),t.rejection_reason&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-red-900 mb-2",children:"Razn de Rechazo"}),o.jsx("p",{className:"text-sm text-red-700",children:t.rejection_reason})]})]}),o.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end",children:o.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cerrar"})})]})}),zn=({label:t,value:e})=>o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:t}),o.jsx("dd",{className:"text-sm text-gray-900 font-medium",children:e})]}),e4=({order:t,onClose:e,onFileChange:r,onSubmit:s,preview:a,loading:l,t:u})=>o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-lg",children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[" ",u("adminOrders.deliveryModal.title")]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",disabled:l,children:o.jsx(_r,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsxs("p",{className:"text-sm text-blue-900",children:[o.jsx("strong",{children:u("adminOrders.deliveryModal.orderLabel")})," ",t.order_number]}),o.jsxs("p",{className:"text-sm text-blue-900",children:[o.jsx("strong",{children:u("adminOrders.deliveryModal.customerLabel")})," ",t.user_name]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:u("adminOrders.deliveryModal.selectPhoto")}),o.jsx("div",{className:"flex items-center justify-center w-full",children:o.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[a?o.jsx("img",{src:a,alt:"Preview",className:"max-h-44 rounded-lg object-contain"}):o.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[o.jsx(o2,{className:"h-12 w-12 text-gray-400 mb-3"}),o.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[o.jsx("span",{className:"font-semibold",children:u("adminOrders.deliveryModal.clickToUpload")})," ",u("adminOrders.deliveryModal.dragHere")]}),o.jsx("p",{className:"text-xs text-gray-500",children:u("adminOrders.deliveryModal.fileTypes")})]}),o.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:r,disabled:l})]})})]}),a&&o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-sm text-green-700",children:[" ",u("adminOrders.deliveryModal.imageLoaded")]})}),o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-xs text-yellow-800",children:[o.jsx("strong",{children:u("adminOrders.deliveryModal.note")})," ",u("adminOrders.deliveryModal.noteText")]})})]}),o.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[o.jsx("button",{onClick:e,disabled:l,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:u("adminOrders.deliveryModal.cancel")}),o.jsx("button",{onClick:s,disabled:l||!a,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2",children:l?o.jsxs(o.Fragment,{children:[o.jsx(Mr,{className:"h-4 w-4 animate-spin"}),u("adminOrders.deliveryModal.uploading")]}):o.jsxs(o.Fragment,{children:[o.jsx(ab,{className:"h-4 w-4"}),u("adminOrders.deliveryModal.submit")]})})]})]})}),t4=({show:t,title:e,message:r,onConfirm:s,onCancel:a,t:l})=>t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 rounded-t-lg",children:o.jsx("h3",{className:"text-xl font-bold text-white",children:e})}),o.jsx("div",{className:"p-6",children:o.jsx("p",{className:"text-gray-700 text-base",children:r})}),o.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[o.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:l("adminOrders.modals.cancel")}),o.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:l("adminOrders.modals.confirm")})]})]})}):null,r4=({show:t,title:e,message:r,defaultValue:s,onConfirm:a,onCancel:l,t:u})=>{const[d,h]=w.useState(s||"");if(w.useEffect(()=>{t&&h(s||"")},[t,s]),!t)return null;const m=()=>{a(d)},p=g=>{g.key==="Enter"&&m()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[o.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4 rounded-t-lg",children:o.jsx("h3",{className:"text-xl font-bold text-white",children:e})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("p",{className:"text-gray-700 text-base",children:r}),o.jsx("input",{type:"text",value:d,onChange:g=>h(g.target.value),onKeyPress:p,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",autoFocus:!0})]}),o.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[o.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:u("adminOrders.modals.cancel")}),o.jsx("button",{onClick:m,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:u("adminOrders.modals.submit")})]})]})})},n4=({message:t,type:e,onClose:r})=>{if(!t)return null;const s={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500",warning:"bg-yellow-500"},a={success:"",error:"",info:"",warning:""};return o.jsx(me.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 right-4 z-50 max-w-md",children:o.jsxs("div",{className:`${s[e]} text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3`,children:[o.jsx("span",{className:"text-2xl",children:a[e]}),o.jsx("p",{className:"flex-1 font-medium",children:t}),o.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 transition-colors",children:o.jsx(_r,{className:"h-5 w-5"})})]})})},s4=({onNavigate:t})=>{const{t:e}=Gt(),{products:r,combos:s,financialSettings:a,visualSettings:l}=Ht(),{user:u,isAdmin:d,isSuperAdmin:h}=rr(),[m,p]=w.useState("overview"),[g,v]=w.useState({totalProducts:0,totalCombos:0,totalUsers:0,pendingOrders:0,completedOrders:0,dailyRevenue:0,monthlyRevenue:0,loading:!0}),[b,_]=w.useState({weekly:0,monthly:0,yearly:0,total:0,loading:!0}),[C,j]=w.useState([]),[R,A]=w.useState(null),[N,P]=w.useState(1),D=ce=>{if(!ce.expiryDate)return!1;const G=new Date,V=new Date(ce.expiryDate)-G,oe=Math.ceil(V/(1e3*60*60*24));return oe<=30&&oe>0},M=r.filter(D);w.useEffect(()=>{(async()=>{const{data:G}=await ee.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(G){j(G);const ae=G.find(V=>V.is_base);ae&&(A(ae.id),P(1))}})()},[]),w.useEffect(()=>{if(R&&C.length>0){const ce=C.find(G=>G.id===R);ce&&P(ce.exchange_rate||1)}},[R,C]);const L=async()=>{try{_(ae=>({...ae,loading:!0}));const{data:ce,error:G}=await ee.from("site_visits").select("visit_time");if(G){console.warn("Visit tracking not configured:",G.message),_({weekly:0,monthly:0,yearly:0,total:0,loading:!1,unavailable:!0});return}if(ce){const ae=new Date,V=new Date(ae-10080*60*1e3),oe=new Date(ae-720*60*60*1e3),ie=new Date(ae-365*24*60*60*1e3),E=ce.filter(be=>new Date(be.visit_time)>=V).length,I=ce.filter(be=>new Date(be.visit_time)>=oe).length,X=ce.filter(be=>new Date(be.visit_time)>=ie).length,le=ce.length;_({weekly:E,monthly:I,yearly:X,total:le,loading:!1,unavailable:!1})}}catch(ce){console.error("Error fetching visit stats:",ce),_({weekly:0,monthly:0,yearly:0,total:0,loading:!1,unavailable:!0})}},Q=async()=>{try{v(U=>({...U,loading:!0}));const[ce,G,ae,V]=await Promise.all([ee.from("products").select("id",{count:"exact",head:!0}),ee.from("combo_products").select("id",{count:"exact",head:!0}),ee.from("user_profiles").select("id",{count:"exact",head:!0}),ee.from("orders").select("id, status, payment_status, total_amount, created_at")]),oe=ce.count||0,ie=G.count||0,E=ae.count||0,I=V.data||[],X=I.filter(U=>U.payment_status==="pending").length,le=I.filter(U=>U.payment_status==="validated"&&U.status==="pending").length,be=I.filter(U=>U.status==="processing").length,Ce=I.filter(U=>U.status==="shipped").length,ue=I.filter(U=>U.status==="delivered").length,Ne=I.filter(U=>U.status==="completed").length,Oe=I.filter(U=>U.status==="cancelled").length,Y=X+le+be+Ce+ue,K=X+le,De=new Date,_e=new Date(De-1440*60*1e3),T=new Date(De-720*60*60*1e3),pe=I.filter(U=>new Date(U.created_at)>=_e&&["delivered","completed","processing"].includes(U.status)).reduce((U,se)=>U+(parseFloat(se.total_amount)||0),0),te=I.filter(U=>new Date(U.created_at)>=T&&["delivered","completed","processing"].includes(U.status)).reduce((U,se)=>U+(parseFloat(se.total_amount)||0),0);v({totalProducts:oe,totalCombos:ie,totalUsers:E,pendingOrders:K,completedOrders:Ne,paymentPending:X,paymentValidated:le,processing:be,shipped:Ce,delivered:ue,cancelled:Oe,totalActive:Y,dailyRevenue:pe,monthlyRevenue:te,loading:!1})}catch(ce){console.error("Error fetching dashboard stats:",ce),v(G=>({...G,loading:!1}))}};w.useEffect(()=>{u&&(d||h)&&(Q(),L())},[u,d,h]);const re=g.dailyRevenue*(a.productProfit/100),B=g.monthlyRevenue*(a.productProfit/100),ye=C.find(ce=>ce.id===R),ne=ye?.symbol||"$",we=ye?.code||"USD",H=ce=>(ce*N).toFixed(2);return!u||!d&&!h?o.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 px-4",children:o.jsxs(me.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-effect p-8 rounded-2xl max-w-md w-full text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-500 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(j2,{className:"w-8 h-8 text-white"})}),o.jsx("h2",{className:"text-2xl font-bold mb-2",style:et(l),children:e("dashboard.privateAccess")}),o.jsx("p",{className:"text-gray-600",children:e("dashboard.adminOnly")})]})}):o.jsx("div",{className:"min-h-screen py-8 px-4",children:o.jsxs("div",{className:"container mx-auto",children:[o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"flex justify-between items-start mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",style:et(l),children:e("dashboard.title")}),o.jsx("p",{className:"text-xl text-gray-600",children:e("dashboard.subtitle")})]}),m==="overview"&&o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[e("dashboard.selectCurrency"),":"]}),o.jsx("select",{value:R||"",onChange:ce=>A(ce.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:C.map(ce=>o.jsxs("option",{value:ce.id,children:[ce.code," (",ce.symbol,")"]},ce.id))})]}),o.jsxs("button",{onClick:()=>{Q(),L()},disabled:g.loading,className:"flex items-center gap-2 px-4 py-2 bg-white rounded-xl shadow hover:shadow-md transition-shadow",children:[o.jsx(Mr,{className:`w-4 h-4 ${g.loading?"animate-spin":""}`}),o.jsx("span",{className:"text-sm font-medium",children:e("dashboard.refresh")})]})]})]}),o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex items-center gap-4 mb-8 border-b border-gray-200",children:[o.jsxs("button",{onClick:()=>p("overview"),className:`flex items-center gap-2 px-6 py-3 font-medium transition-all ${m==="overview"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[o.jsx(Kl,{className:"h-5 w-5"}),e("dashboard.overviewTab")]}),o.jsxs("button",{onClick:()=>p("orders"),className:`flex items-center gap-2 px-6 py-3 font-medium transition-all ${m==="orders"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[o.jsx(fb,{className:"h-5 w-5"}),e("dashboard.ordersTab")]})]}),m==="overview"&&o.jsxs(o.Fragment,{children:[M.length>0&&o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-lg mb-8",role:"alert",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"py-1",children:o.jsx(Si,{className:"h-6 w-6 text-yellow-500 mr-4"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:e("dashboard.expirationWarning.title")}),o.jsx("p",{className:"text-sm",children:e("dashboard.expirationWarning.description",{count:M.length})})]})]})}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[{title:e("dashboard.stats.dailyRevenue"),value:g.dailyRevenue,icon:Qr,color:"from-green-500 to-emerald-600"},{title:e("dashboard.stats.monthlyRevenue"),value:g.monthlyRevenue,icon:Yl,color:"from-blue-500 to-cyan-600"},{title:e("dashboard.stats.dailyProfit"),value:re,icon:Kl,color:"from-purple-500 to-pink-600"},{title:e("dashboard.stats.monthlyProfit"),value:B,icon:Yl,color:"from-orange-500 to-red-600"}].map((ce,G)=>o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:G*.1},className:"glass-effect p-6 rounded-2xl hover-lift",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${ce.color} rounded-xl flex items-center justify-center`,children:o.jsx(ce.icon,{className:"w-6 h-6 text-white"})})}),o.jsxs("h3",{className:"text-2xl font-bold mb-1",children:[ne,H(ce.value)," ",we]}),o.jsx("p",{className:"text-gray-600 text-sm",children:ce.title})]},G))}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[{title:e("dashboard.stats.totalProducts"),value:g.totalProducts,icon:Jr},{title:e("dashboard.stats.totalCombos"),value:g.totalCombos,icon:Ec},{title:e("dashboard.stats.pendingOrders"),value:g.pendingOrders,icon:Kl},{title:e("dashboard.stats.totalUsers"),value:g.totalUsers,icon:ta}].map((ce,G)=>o.jsx(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4+G*.1},className:"glass-effect p-6 rounded-2xl hover-lift",children:o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center mr-3",children:o.jsx(ce.icon,{className:"w-5 h-5 text-gray-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold",children:ce.value}),o.jsx("p",{className:"text-gray-600 text-sm",children:ce.title})]})]})},G))}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"glass-effect p-8 rounded-2xl",children:[o.jsx("h3",{className:"text-2xl font-semibold mb-6",children:e("dashboard.profitBreakdown")}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold mb-2",children:e("dashboard.dailyBreakdown")}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:[e("dashboard.grossRevenue"),":"]}),o.jsxs("span",{className:"font-semibold",children:[ne,H(g.dailyRevenue)," ",we]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:[e("dashboard.costs"),":"]}),o.jsxs("span",{className:"font-semibold text-red-600",children:["-",ne,H(g.dailyRevenue-re)," ",we]})]}),o.jsxs("div",{className:"flex justify-between border-t pt-2 mt-1",children:[o.jsxs("span",{children:[e("dashboard.netProfit"),":"]}),o.jsxs("span",{className:"font-bold text-green-600",children:[ne,H(re)," ",we]})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsxs("span",{children:[e("dashboard.profitMargin"),":"]}),o.jsxs("span",{children:[a.productProfit,"%"]})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold mb-2",children:e("dashboard.monthlyBreakdown")}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:[e("dashboard.grossRevenue"),":"]}),o.jsxs("span",{className:"font-semibold",children:[ne,H(g.monthlyRevenue)," ",we]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:[e("dashboard.costs"),":"]}),o.jsxs("span",{className:"font-semibold text-red-600",children:["-",ne,H(g.monthlyRevenue-B)," ",we]})]}),o.jsxs("div",{className:"flex justify-between border-t pt-2 mt-1",children:[o.jsxs("span",{children:[e("dashboard.netProfit"),":"]}),o.jsxs("span",{className:"font-bold text-green-600",children:[ne,H(B)," ",we]})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsxs("span",{children:[e("dashboard.profitMargin"),":"]}),o.jsxs("span",{children:[a.productProfit,"%"]})]})]})]})]})]}),o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"glass-effect p-8 rounded-2xl",children:[o.jsxs("h3",{className:"text-2xl font-semibold mb-6",children:[" ",e("dashboard.orderSummary")]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center bg-yellow-50 p-3 rounded-lg border-l-4 border-yellow-500",children:[o.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.paymentPending")]}),o.jsx("span",{className:"text-lg font-bold text-yellow-600",children:g.paymentPending||0})]}),o.jsxs("div",{className:"flex justify-between items-center bg-green-50 p-3 rounded-lg border-l-4 border-green-500",children:[o.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.paymentValidated")]}),o.jsx("span",{className:"text-lg font-bold text-green-600",children:g.paymentValidated||0})]}),o.jsxs("div",{className:"flex justify-between items-center bg-blue-50 p-3 rounded-lg border-l-4 border-blue-500",children:[o.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.processing")]}),o.jsx("span",{className:"text-lg font-bold text-blue-600",children:g.processing||0})]}),o.jsxs("div",{className:"flex justify-between items-center bg-purple-50 p-3 rounded-lg border-l-4 border-purple-500",children:[o.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.shipped")]}),o.jsx("span",{className:"text-lg font-bold text-purple-600",children:g.shipped||0})]}),o.jsxs("div",{className:"flex justify-between items-center bg-teal-50 p-3 rounded-lg border-l-4 border-teal-500",children:[o.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.delivered")]}),o.jsx("span",{className:"text-lg font-bold text-teal-600",children:g.delivered||0})]}),o.jsxs("div",{className:"flex justify-between items-center bg-green-100 p-3 rounded-lg border-l-4 border-green-600",children:[o.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.completed")]}),o.jsx("span",{className:"text-lg font-bold text-green-700",children:g.completedOrders||0})]}),o.jsxs("div",{className:"flex justify-between items-center bg-red-50 p-3 rounded-lg border-l-4 border-red-500",children:[o.jsxs("span",{className:"font-semibold",children:[" ",e("dashboard.orderStatus.cancelled")]}),o.jsx("span",{className:"text-lg font-bold text-red-600",children:g.cancelled||0})]}),o.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg border-t-2 border-gray-300 mt-2",children:[o.jsxs("span",{className:"font-bold",children:[" ",e("dashboard.orderStatus.totalActive")]}),o.jsx("span",{className:"text-xl font-bold text-gray-800",children:g.totalActive||0})]})]})]})]}),o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"mt-8",children:[o.jsx("h2",{className:"text-3xl font-bold mb-6",style:et(l),children:e("dashboard.analyticsTitle")}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"glass-effect p-8 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-2xl font-semibold",children:e("dashboard.visits.title")}),o.jsx(ta,{className:"w-8 h-8 text-blue-500"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.thisWeek")}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:b.weekly})]}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.thisMonth")}),o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b.monthly})]}),o.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.thisYear")}),o.jsx("p",{className:"text-2xl font-bold text-orange-600",children:b.yearly})]}),o.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border-2 border-green-500",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-1",children:e("dashboard.visits.allTime")}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.total})]})]})]}),o.jsxs("div",{className:"glass-effect p-8 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-2xl font-semibold",children:e("dashboard.stats.siteVisits")}),o.jsx(Yl,{className:"w-8 h-8 text-green-500"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:e("dashboard.visits.weekly")}),o.jsx("p",{className:"text-xs text-gray-500",children:e("dashboard.visits.thisWeek")})]}),o.jsx("p",{className:"text-xl font-bold text-blue-600",children:b.weekly})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:e("dashboard.visits.monthly")}),o.jsx("p",{className:"text-xs text-gray-500",children:e("dashboard.visits.thisMonth")})]}),o.jsx("p",{className:"text-xl font-bold text-purple-600",children:b.monthly})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-2 border-green-500",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:e("dashboard.visits.total")}),o.jsx("p",{className:"text-xs text-gray-500",children:e("dashboard.visits.allTime")})]}),o.jsx("p",{className:"text-xl font-bold text-green-600",children:b.total})]})]})]})]})]})]}),m==="orders"&&o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:o.jsx(JO,{})})]})})},i4=()=>{const{t,language:e}=Gt(),{products:r,refreshProducts:s,financialSettings:a,categories:l,refreshCategories:u,combos:d,refreshCombos:h,testimonials:m,refreshTestimonials:p,visualSettings:g}=Ht(),[v,b]=w.useState([]),[_,C]=w.useState(null),[j,R]=w.useState(null),[A,N]=w.useState({});w.useEffect(()=>{const T=async()=>{const{data:te}=await ee.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(te){b(te);const se=te.find(Pe=>Pe.is_base);se&&(C(se.id),R(se.id))}const{data:U}=await ee.from("exchange_rates").select("*").eq("is_active",!0);if(U){const se={};U.forEach(Pe=>{se[`${Pe.from_currency_id}-${Pe.to_currency_id}`]=Pe.rate}),N(se)}},pe=async()=>{await p(!0),await h(!0)};T(),pe()},[]);const[P,D]=w.useState("inventory"),[M,L]=w.useState(null),[Q,re]=w.useState(null),[B,ye]=w.useState({dbId:null,es:"",en:"",description_es:"",description_en:""}),[ne,we]=w.useState(null),H=(T,pe,te,U=null)=>{T==="product"?L(se=>({...se,[pe]:te})):T==="combo"&&re(U?se=>({...se,[pe]:{...se[pe],[U]:te}}):se=>({...se,[pe]:te}))},ce=()=>{L({id:null,name:"",description_es:"",description_en:"",basePrice:"",base_currency_id:_||"",category:"",stock:"",min_stock_alert:"",expiryDate:"",image:""}),we(null)},G=T=>{L({id:T.id,name:T.name_es||T.name,description_es:T.description_es||"",description_en:T.description_en||"",basePrice:T.base_price||T.basePrice||"",profitMargin:T.profit_margin||40,base_currency_id:T.base_currency_id||_||"",category:T.category?.id||T.category_id||"",stock:T.stock||"",min_stock_alert:T.min_stock_alert||"",expiryDate:T.expiry_date||T.expiryDate||"",image:T.image_url||T.image_file||T.image||"",sku:T.sku||""}),we(T.image_url||T.image_file||T.image||null)},ae=async T=>{const pe=T.target.files?.[0];if(pe)try{const te=await aa(pe,"product");if(!te.success){he({title:"Error de validacin",description:te.errors.join(`
`),variant:"destructive"});return}we(te.base64),L(U=>({...U,image:te.base64})),he({title:"Imagen optimizada",description:`${te.metadata.originalDimensions}  ${te.metadata.finalDimensions} (${te.metadata.compression} compresin)`})}catch(te){console.error("Error processing product image:",te),he({title:"Error al procesar imagen",description:te.message,variant:"destructive"})}},V=async()=>{if(!M.name||!M.basePrice||!M.category){he({title:t("vendor.validation.error"),description:t("vendor.validation.fillFields"),variant:"destructive"});return}if(!M.base_currency_id){he({title:"Error",description:e==="es"?"Debe seleccionar una moneda":"You must select a currency",variant:"destructive"});return}try{if(!l.find(te=>te.id===M.category)){he({title:"Error",description:"Categora no vlida",variant:"destructive"});return}const pe={name:M.name,description_es:M.description_es||"",description_en:M.description_en||"",basePrice:parseFloat(M.basePrice),stock:parseInt(M.stock||0,10),min_stock_alert:parseInt(M.min_stock_alert||10,10),profitMargin:parseFloat(M.profitMargin||40),category_id:M.category,base_currency_id:M.base_currency_id,image:M.image||"",sku:M.sku||`SKU-${Date.now()}`,slug:M.name.toLowerCase().replace(/\s+/g,"-"),expiryDate:M.expiryDate||null};if(console.log(" Saving product with data:",pe),console.log(" Stock value:",pe.stock,typeof pe.stock),console.log(" Category ID:",pe.category_id,typeof pe.category_id),console.log(" Expiry Date:",pe.expiryDate,typeof pe.expiryDate),M.id){const{error:te}=await QT(M.id,pe);if(te)throw te;he({title:t("vendor.productUpdated")})}else{const{error:te}=await KT(pe);if(te)throw te;he({title:t("vendor.productAdded")})}await s(),L(null),we(null)}catch(T){console.error("Error saving product:",T),he({title:"Error",description:T.message,variant:"destructive"})}},oe=async()=>{if(!B.es||!B.en){he({title:"Error",description:e==="es"?"Por favor complete los campos de nombre en ambos idiomas":"Please complete the name fields in both languages",variant:"destructive"});return}try{if(B.dbId){const{error:T}=await XT(B.dbId,{es:B.es,en:B.en,description_es:B.description_es,description_en:B.description_en});if(T)throw T;he({title:e==="es"?"Categora actualizada":"Category Updated",description:e==="es"?"La categora se actualiz exitosamente":"The category was successfully updated"})}else{const{error:T}=await JT({es:B.es,en:B.en,description_es:B.description_es,description_en:B.description_en});if(T)throw T;he({title:e==="es"?"Categora creada":"Category Created",description:e==="es"?"La categora se cre exitosamente":"The category was successfully created"})}await u(),ye({dbId:null,es:"",en:"",description_es:"",description_en:""})}catch(T){console.error("Error saving category:",T),he({title:"Error",description:T.message||(e==="es"?"Error al guardar la categora":"Error saving category"),variant:"destructive"})}},ie=T=>{ye({dbId:T.id,es:T.name_es||T.es,en:T.name_en||T.en,description_es:T.description_es||"",description_en:T.description_en||""})},E=async T=>{if(confirm(e==="es"?"Est seguro de que desea eliminar esta categora?":"Are you sure you want to delete this category?"))try{const{error:te}=await ZT(T);if(te)throw te;await u(),he({title:e==="es"?"Categora eliminada":"Category Deleted",description:e==="es"?"La categora se elimin exitosamente":"The category was successfully deleted"})}catch(te){console.error("Error deleting category:",te),he({title:"Error",description:te.message||(e==="es"?"Error al eliminar la categora":"Error deleting category"),variant:"destructive"})}},[I,X]=w.useState(null),le=()=>{re({id:null,name:"",profitMargin:"",shipping:{type:"paid",value:0},products:[],productQuantities:{},image:""}),X(null)},be=T=>{const pe={},te=[];T.items&&T.items.length>0&&T.items.forEach(U=>{te.push(U.product.id),pe[U.product.id]=U.quantity||1}),re({...T,products:te,productQuantities:pe}),X(T.image_url||T.image||null)},Ce=async T=>{const pe=T.target.files?.[0];if(pe)try{const te=await aa(pe,"combo");if(!te.success){he({title:"Error de validacin",description:te.errors.join(`
`),variant:"destructive"});return}X(te.base64),re(U=>({...U,image:te.base64})),he({title:"Imagen optimizada",description:`${te.metadata.originalDimensions}  ${te.metadata.finalDimensions} (${te.metadata.compression} compresin)`})}catch(te){console.error("Error processing combo image:",te),he({title:"Error al procesar imagen",description:te.message,variant:"destructive"})}},ue=T=>{re(pe=>{const te=pe.products.includes(T),U=te?pe.products.filter(Pe=>Pe!==T):[...pe.products,T],se={...pe.productQuantities};return te?delete se[T]:se[T]=1,{...pe,products:U,productQuantities:se}})},Ne=(T,pe)=>{re(te=>({...te,productQuantities:{...te.productQuantities,[T]:parseInt(pe)||1}}))},Oe=async()=>{if(!Q.name){he({title:t("vendor.validation.error"),description:t("vendor.validation.fillFields"),variant:"destructive"});return}try{const T=(Q.products||[]).map(te=>({productId:te,quantity:Q.productQuantities[te]||1})),pe={name:Q.name,description:Q.description||"",image:Q.image||"",productsWithQuantities:T,profitMargin:parseFloat(Q.profitMargin||a.comboProfit),slug:Q.name.toLowerCase().replace(/\s+/g,"-")};if(Q.id){const{error:te}=await rA(Q.id,pe);if(te)throw te;he({title:t("vendor.comboUpdated")})}else{const{error:te}=await tA(pe);if(te)throw te;he({title:t("vendor.comboAdded")})}await h(!0),re(null),X(null)}catch(T){console.error("Error saving combo:",T),he({title:"Error",description:T.message,variant:"destructive"})}},Y=(T,pe,te)=>{if(!T||!pe||!te||pe===te)return T;const U=`${pe}-${te}`,se=A[U];return se?parseFloat(T)*se:T},K=T=>{if(!T||!j)return{base:0,final:0};let pe=0;(T.products||[]).forEach(se=>{const Pe=r.find(Z=>Z.id===se);if(Pe){const Z=parseFloat(Pe.base_price||0),je=Pe.base_currency_id,Ie=T.productQuantities?.[se]||1;let Xe=Z;je&&je!==j&&(Xe=Y(Z,je,j)),pe+=Xe*Ie}});const te=parseFloat(T.profitMargin||a.comboProfit)/100,U=pe*(1+te);return{base:pe.toFixed(2),final:U.toFixed(2)}},De=async(T,pe)=>{try{const{error:te}=await iA(T,!pe);if(te)throw te;he({title:e==="es"?"Actualizado":"Updated",description:e==="es"?`Testimonio ${pe?"oculto":"visible"}`:`Testimonial ${pe?"hidden":"visible"}`}),await p(!0)}catch(te){console.error("Error toggling testimonial visibility:",te),he({title:"Error",description:te.message||(e==="es"?"Error al actualizar testimonio":"Error updating testimonial"),variant:"destructive"})}},_e=async(T,pe)=>{try{const{error:te}=await oA(T,!pe);if(te)throw te;he({title:e==="es"?"Actualizado":"Updated",description:e==="es"?`Testimonio ${pe?"normal":"destacado"}`:`Testimonial ${pe?"unfeatured":"featured"}`}),await p(!0)}catch(te){console.error("Error toggling testimonial featured status:",te),he({title:"Error",description:te.message||(e==="es"?"Error al destacar testimonio":"Error featuring testimonial"),variant:"destructive"})}};return o.jsxs("div",{className:"container mx-auto py-8 px-4",children:[o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",style:et(g),children:t("vendor.title")}),o.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:t("vendor.subtitle")})]}),o.jsxs("div",{className:"flex justify-center mb-8 border-b",children:[o.jsxs(xe,{variant:P==="inventory"?"default":"ghost",onClick:()=>D("inventory"),className:"rounded-b-none",style:P==="inventory"?mt(g):{},children:[o.jsx(Jr,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.inventory")]}),o.jsxs(xe,{variant:P==="categories"?"default":"ghost",onClick:()=>D("categories"),className:"rounded-b-none",style:P==="categories"?mt(g):{},children:[o.jsx(fb,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.categories")]}),o.jsxs(xe,{variant:P==="combos"?"default":"ghost",onClick:()=>D("combos"),className:"rounded-b-none",style:P==="combos"?mt(g):{},children:[o.jsx(r2,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.combos")]}),o.jsxs(xe,{variant:P==="management"?"default":"ghost",onClick:()=>D("management"),className:"rounded-b-none",style:P==="management"?mt(g):{},children:[o.jsx(g2,{className:"mr-2 h-4 w-4"}),t("vendor.tabs.management")]})]}),P==="inventory"&&o.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},children:[o.jsx("div",{className:"flex justify-end mb-6",children:o.jsxs(xe,{onClick:ce,style:mt(g),children:[o.jsx(Ts,{className:"mr-2 h-4 w-4"}),t("vendor.actions.addProduct")]})}),M&&o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl mb-12",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-6",children:M.id?t("vendor.addProduct.editTitle"):t("vendor.addProduct.title")}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("vendor.addProduct.name")," *"]}),o.jsx("input",{type:"text",value:M.name,onChange:T=>H("product","name",T.target.value),placeholder:t("vendor.addProduct.namePlaceholder"),className:"w-full input-style",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("vendor.addProduct.category")," *"]}),o.jsxs("select",{value:M.category,onChange:T=>H("product","category",T.target.value),className:"w-full input-style",required:!0,children:[o.jsx("option",{value:"",children:e==="es"?"Seleccionar categora":"Select category"}),l.map(T=>o.jsx("option",{value:T.id,children:e==="es"?T.name_es:T.name_en},T.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripcin (Espaol)":"Description (Spanish)"}),o.jsx("textarea",{value:M.description_es,onChange:T=>H("product","description_es",T.target.value),placeholder:e==="es"?"Descripcin del producto en espaol":"Product description in Spanish",rows:3,className:"w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripcin (Ingls)":"Description (English)"}),o.jsx("textarea",{value:M.description_en,onChange:T=>H("product","description_en",T.target.value),placeholder:e==="es"?"Descripcin del producto en ingls":"Product description in English",rows:3,className:"w-full input-style"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("vendor.addProduct.basePrice")," *"]}),o.jsx("input",{type:"number",step:"0.01",value:M.basePrice,onChange:T=>H("product","basePrice",T.target.value),placeholder:"0.00",className:"w-full input-style",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.addProduct.currency")}),o.jsx("select",{value:M.base_currency_id,onChange:T=>H("product","base_currency_id",T.target.value),className:"w-full input-style",children:v.map(T=>o.jsxs("option",{value:T.id,children:[T.code," - ",e==="es"?T.name_es:T.name_en]},T.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.inventory.stock")}),o.jsx("input",{type:"number",value:M.stock,onChange:T=>H("product","stock",T.target.value),placeholder:"0",className:"w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Alerta de Stock Mnimo":"Minimum Stock Alert"}),o.jsx("input",{type:"number",value:M.min_stock_alert,onChange:T=>H("product","min_stock_alert",T.target.value),placeholder:"10",className:"w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.inventory.expiryDate")}),o.jsx("input",{type:"date",value:M.expiryDate,onChange:T=>H("product","expiryDate",T.target.value),className:"w-full input-style"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.addProduct.image")}),ne&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Vista Previa:":"Preview:"}),o.jsx("div",{className:"aspect-square max-w-sm mx-auto rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:o.jsx("img",{src:ne,alt:"Preview",className:"w-full h-full object-cover"})})]}),o.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:ae,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Recomendado: imagen cuadrada (1:1), mx 5MB":"Recommended: square image (1:1), max 5MB"})]})]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[o.jsx(xe,{variant:"outline",onClick:()=>L(null),children:t("vendor.addProduct.cancel")}),o.jsxs(xe,{onClick:V,style:mt(g),children:[o.jsx(Gn,{className:"w-4 h-4 mr-2"}),t("vendor.addProduct.save")]})]})]}),o.jsx("div",{className:"glass-effect rounded-2xl overflow-hidden",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-4",children:t("vendor.inventory.product")}),o.jsx("th",{className:"p-4",children:e==="es"?"Categora":"Category"}),o.jsx("th",{className:"p-4",children:e==="es"?"Moneda":"Currency"}),o.jsx("th",{className:"p-4",children:t("vendor.inventory.stock")}),o.jsx("th",{className:"p-4",children:t("vendor.inventory.price")}),o.jsx("th",{className:"p-4",children:t("vendor.inventory.expiryDate")}),o.jsx("th",{})]})}),o.jsx("tbody",{children:r.map(T=>{const pe=v.find(Ie=>Ie.id===T.base_currency_id),te=T.stock!==void 0?T.stock:0,U=T.min_stock_alert||10,se=te===0,Pe=te>0&&te<=U,je=(Ie=>{if(!Ie)return null;const Xe=new Date,bt=new Date(Ie),dt=Math.ceil((bt-Xe)/(1e3*60*60*24)),Dt=dt/30;return dt<0?{status:"expired",color:"bg-red-50",icon:Ci,iconColor:"text-red-600",days:dt}:Dt<=1?{status:"critical",color:"bg-pink-50",icon:Ci,iconColor:"text-red-500",days:dt}:Dt<=3?{status:"warning",color:"bg-yellow-50",icon:Si,iconColor:"text-yellow-600",days:dt}:{status:"ok",color:"",icon:null,iconColor:"",days:dt}})(T.expiry_date||T.expiryDate);return o.jsxs("tr",{className:`border-b last:border-none ${je?.color||""} ${se?"opacity-60":""}`,children:[o.jsx("td",{className:`p-4 font-medium ${se?"line-through text-gray-400":""}`,children:T.name_es||T.name||"Sin nombre"}),o.jsx("td",{className:"p-4 text-gray-600",children:T.category?e==="es"?T.category.name_es:T.category.name_en:"Sin categora"}),o.jsx("td",{className:"p-4 text-center",children:o.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:pe?.code||"USD"})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:se?"line-through text-gray-400":"",children:te}),se&&o.jsx(Ci,{className:"h-4 w-4 text-red-600",title:e==="es"?"Sin stock":"Out of stock"}),Pe&&o.jsx(Si,{className:"h-4 w-4 text-orange-500",title:e==="es"?"Stock bajo":"Low stock"})]})}),o.jsxs("td",{className:"p-4",children:[pe?.symbol||"$",T.final_price?Number(T.final_price).toFixed(2):T.base_price?Number(T.base_price).toFixed(2):"0.00"]}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:T.expiry_date||T.expiryDate?new Date(T.expiry_date||T.expiryDate).toLocaleDateString():"N/A"}),je?.icon&&o.jsx(je.icon,{className:`h-4 w-4 ${je.iconColor}`,title:je.status==="expired"?e==="es"?"Expirado":"Expired":e==="es"?`${je.days} das restantes`:`${je.days} days left`})]})}),o.jsx("td",{className:"p-4 text-right",children:o.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>G(T),children:o.jsx(Ql,{className:"h-4 w-4"})})})]},T.id)})})]})})]}),P==="categories"&&o.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"glass-effect p-8 rounded-2xl mb-8",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-6",children:B.dbId?e==="es"?"Editar Categora":"Edit Category":e==="es"?"Nueva Categora":"New Category"}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Nombre (Espaol) *":"Name (Spanish) *"}),o.jsx("input",{type:"text",value:B.es,onChange:T=>ye({...B,es:T.target.value}),placeholder:e==="es"?"Ej: Electrnica":"Ex: Electronics",className:"input-style w-full",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Nombre (Ingls) *":"Name (English) *"}),o.jsx("input",{type:"text",value:B.en,onChange:T=>ye({...B,en:T.target.value}),placeholder:e==="es"?"Ej: Electronics":"Ex: Electronics",className:"input-style w-full",required:!0})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripcin (Espaol)":"Description (Spanish)"}),o.jsx("textarea",{value:B.description_es,onChange:T=>ye({...B,description_es:T.target.value}),placeholder:e==="es"?"Descripcin opcional...":"Optional description...",className:"input-style w-full",rows:"3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Descripcin (Ingls)":"Description (English)"}),o.jsx("textarea",{value:B.description_en,onChange:T=>ye({...B,description_en:T.target.value}),placeholder:e==="es"?"Descripcin opcional...":"Optional description...",className:"input-style w-full",rows:"3"})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(xe,{onClick:oe,style:mt(g),children:B.dbId?o.jsxs(o.Fragment,{children:[o.jsx(Gn,{className:"mr-2 h-4 w-4"}),e==="es"?"Actualizar Categora":"Update Category"]}):o.jsxs(o.Fragment,{children:[o.jsx(Ts,{className:"mr-2 h-4 w-4"}),e==="es"?"Crear Categora":"Create Category"]})}),B.dbId&&o.jsxs(xe,{variant:"outline",onClick:()=>ye({dbId:null,es:"",en:"",description_es:"",description_en:""}),children:[o.jsx(_r,{className:"mr-2 h-4 w-4"}),e==="es"?"Cancelar":"Cancel"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:e==="es"?"Categoras Existentes":"Existing Categories"}),l.length===0?o.jsx("p",{className:"text-gray-500 text-center py-8",children:e==="es"?"No hay categoras an":"No categories yet"}):o.jsx("ul",{className:"space-y-2",children:l.map(T=>o.jsxs("li",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("span",{className:"font-semibold",children:e==="es"?T.name_es||T.es:T.name_en||T.en}),o.jsxs("span",{className:"text-gray-500 text-sm",children:["(",T.slug,")"]})]}),(T.description_es||T.description_en)&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e==="es"?T.description_es:T.description_en})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>ie(T),children:o.jsx(Ql,{className:"h-4 w-4"})}),o.jsx(xe,{variant:"destructive",size:"icon",onClick:()=>E(T.id),style:{backgroundColor:g.destructiveBgColor||"#dc2626",color:g.destructiveTextColor||"#ffffff"},onMouseEnter:pe=>pe.currentTarget.style.backgroundColor=g.destructiveHoverBgColor||"#b91c1c",onMouseLeave:pe=>pe.currentTarget.style.backgroundColor=g.destructiveBgColor||"#dc2626",children:o.jsx(Go,{className:"h-4 w-4"})})]})]},T.id))})]})]}),P==="combos"&&o.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:e==="es"?"Moneda:":"Currency:"}),o.jsx("select",{value:j||"",onChange:T=>R(T.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:v.map(T=>o.jsxs("option",{value:T.id,children:[T.code," (",T.symbol,")"]},T.id))})]}),o.jsxs(xe,{onClick:le,style:mt(g),children:[o.jsx(Ts,{className:"mr-2 h-4 w-4"}),t("vendor.combos.new")]})]}),Q&&o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl mb-12",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-6",children:Q.id?t("vendor.combos.edit"):t("vendor.combos.new")}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("input",{type:"text",value:Q.name,onChange:T=>H("combo","name",T.target.value),placeholder:t("vendor.combos.name"),className:"w-full input-style mb-4"}),o.jsx("input",{type:"number",value:Q.profitMargin,onChange:T=>H("combo","profitMargin",T.target.value),placeholder:`${t("vendor.combos.profitMargin")} (def: ${a.comboProfit}%)`,className:"w-full input-style mb-4"}),I&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Vista Previa:":"Preview:"}),o.jsx("div",{className:"aspect-square max-w-sm mx-auto rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:o.jsx("img",{src:I,alt:"Preview",className:"w-full h-full object-cover"})})]}),o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("vendor.combos.coverImage")}),o.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:Ce,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 mb-4"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:t("vendor.combos.products")}),o.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2 p-2 border rounded-lg",children:r.map(T=>{const pe=T.stock!==void 0?T.stock:0,te=T.min_stock_alert||10,U=pe===0,se=pe>0&&pe<=te,Pe=Q.productQuantities[T.id]||1,Z=Q.products.includes(T.id)&&pe<Pe;return o.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${U?"bg-red-50 border border-red-200":se||Z?"bg-yellow-50 border border-yellow-200":"border border-transparent"}`,children:[o.jsx("input",{type:"checkbox",id:`p-${T.id}`,checked:Q.products.includes(T.id),onChange:()=>ue(T.id),disabled:U,className:"flex-shrink-0"}),o.jsx("label",{htmlFor:`p-${T.id}`,className:`cursor-pointer flex-1 ${U?"text-gray-400 line-through":""}`,children:T.name_es||T.name}),U&&o.jsx(Ci,{className:"h-4 w-4 text-red-600 flex-shrink-0",title:e==="es"?"Sin stock":"Out of stock"}),se&&!U&&o.jsx(Si,{className:"h-4 w-4 text-orange-500 flex-shrink-0",title:e==="es"?`Stock: ${pe}`:`Stock: ${pe}`}),Z&&o.jsx(Si,{className:"h-4 w-4 text-orange-600 flex-shrink-0",title:e==="es"?`Insuficiente: ${pe} disponible, ${Pe} requerido`:`Insufficient: ${pe} available, ${Pe} required`}),Q.products.includes(T.id)&&o.jsx("input",{type:"number",min:"1",value:Q.productQuantities[T.id]||1,onChange:je=>Ne(T.id,je.target.value),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Cant."})]},T.id)})})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsxs("div",{className:"glass-effect p-3 rounded-lg text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:[t("vendor.combos.basePrice"),":"]}),o.jsxs("span",{className:"font-semibold",children:[v.find(T=>T.id===j)?.symbol||"$",K(Q).base," ",v.find(T=>T.id===j)?.code||"USD"]})]}),o.jsxs("div",{className:"flex justify-between font-semibold",children:[o.jsxs("span",{children:[t("vendor.combos.finalPrice"),":"]}),o.jsxs("span",{className:"text-blue-600",children:[v.find(T=>T.id===j)?.symbol||"$",K(Q).final," ",v.find(T=>T.id===j)?.code||"USD"]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[o.jsx(xe,{variant:"outline",onClick:()=>re(null),children:t("vendor.addProduct.cancel")}),o.jsxs(xe,{onClick:Oe,style:mt(g),children:[o.jsx(Gn,{className:"w-4 h-4 mr-2"}),t("vendor.combos.save")]})]})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(T=>{const pe=(T.products||[]).reduce((je,Ie)=>{const Xe=T.productQuantities?.[Ie]||1;return je+Xe},0),te=[];(T.products||[]).forEach(je=>{const Ie=r.find(dt=>dt.id===je),Xe=T.productQuantities?.[je]||1,bt=Ie?.stock||0;bt===0?te.push({productName:Ie?.name_es||Ie?.name||"Unknown",issue:"out_of_stock",required:Xe,available:0}):bt<Xe&&te.push({productName:Ie?.name_es||Ie?.name||"Unknown",issue:"insufficient",required:Xe,available:bt})});const U=T.is_active===!1||te.length>0,se=K(T),Pe=v.find(je=>je.id===j)?.symbol||"$",Z=v.find(je=>je.id===j)?.code||"USD";return o.jsxs("div",{className:`glass-effect p-4 rounded-lg relative ${U?"border-2 border-red-300":""}`,children:[U&&o.jsxs("div",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded flex items-center gap-1",children:[o.jsx(Ci,{className:"h-3 w-3"}),e==="es"?"DESACTIVADO":"DEACTIVATED"]}),o.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>be(T),className:"absolute top-2 right-2",children:o.jsx(Ql,{className:"h-4 w-4"})}),o.jsx("h3",{className:`font-bold pr-8 ${U?"line-through text-gray-500 mt-8":""}`,children:T.name_es||T.name}),o.jsxs("p",{className:"text-sm text-gray-600",children:[pe," ",e==="es"?"elementos":"items"," (",T.products?.length||0," ",e==="es"?"productos":"products",")"]}),U&&te.length>0&&o.jsxs("div",{className:"mt-2 p-2 bg-red-100 border border-red-300 rounded text-xs",children:[o.jsx("p",{className:"font-semibold text-red-800 mb-1",children:e==="es"?"Problemas de stock:":"Stock issues:"}),o.jsx("ul",{className:"space-y-1",children:te.map((je,Ie)=>o.jsxs("li",{className:"flex items-start gap-1 text-red-700",children:[o.jsx(Si,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),o.jsxs("span",{children:[o.jsxs("strong",{children:[je.productName,":"]})," ",je.issue==="out_of_stock"?e==="es"?"Sin stock":"Out of stock":`Insuf. (Req: ${je.required}, ${e==="es"?"Disp:":"Avail:"} ${je.available})`]})]},Ie))})]}),o.jsxs("div",{className:"mt-2 space-y-1",children:[o.jsxs("p",{className:`text-sm ${U?"text-gray-400 line-through":"text-gray-500"}`,children:["Base:"," ",Pe,se.base," ",Z]}),o.jsxs("p",{className:`text-lg font-bold ${U?"text-gray-400 line-through":"text-green-600"}`,children:["Final:"," ",Pe,se.final," ",Z]})]})]},T.id)})})]}),P==="management"&&o.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:t("vendor.management.testimonials")}),o.jsx("div",{className:"glass-effect p-4 rounded-lg space-y-2",children:m.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:e==="es"?"No hay testimonios an":"No testimonials yet"}):m.map(T=>o.jsxs("div",{className:"flex justify-between items-center p-3 border-b hover:bg-gray-50 transition-colors",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsxs("p",{className:"font-semibold",children:[e==="es"?"Usuario":"User"," #",T.user_id?.substring(0,8)]}),T.is_featured&&o.jsx(ac,{className:"w-4 h-4 text-purple-500",title:e==="es"?"Destacado":"Featured"}),o.jsx("span",{className:"text-yellow-500",children:"".repeat(T.rating)})]}),o.jsxs("p",{className:"text-sm italic text-gray-600",children:['"',T.comment,'"']}),T.user_photo&&o.jsx("img",{src:T.user_photo,alt:"User",className:"w-8 h-8 rounded-full mt-2"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(xe,{size:"sm",variant:T.is_featured?"default":"outline",onClick:()=>_e(T.id,T.is_featured),title:e==="es"?"Destacar/Quitar destaque":"Feature/Unfeature",children:T.is_featured?o.jsxs(o.Fragment,{children:[o.jsx(ac,{className:"mr-2 h-4 w-4"}),e==="es"?"Destacado":"Featured"]}):o.jsxs(o.Fragment,{children:[o.jsx(_r,{className:"mr-2 h-4 w-4"}),"Normal"]})}),o.jsx(xe,{size:"sm",variant:T.is_visible?"default":"outline",onClick:()=>De(T.id,T.is_visible),children:T.is_visible?o.jsxs(o.Fragment,{children:[o.jsx(ta,{className:"mr-2 h-4 w-4"}),t("vendor.management.hide")]}):o.jsxs(o.Fragment,{children:[o.jsx(i2,{className:"mr-2 h-4 w-4"}),t("vendor.management.show")]})})]})]},T.id))})]})})]})},o4=({onNavigate:t})=>{const{t:e}=Gt(),{user:r,isAdmin:s,isSuperAdmin:a,userRole:l}=rr();return console.log("AdminPage Access Check:",{user:r?.email,isAdmin:s,isSuperAdmin:a,userRole:l}),!r||!s&&!a?o.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 px-4",children:o.jsxs(me.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-effect p-8 rounded-2xl max-w-md w-full text-center",children:[o.jsx("h2",{className:"text-2xl font-bold gradient-text mb-2",children:e("dashboard.privateAccess")}),o.jsx("p",{className:"text-gray-600",children:e("dashboard.adminOnly")})]})}):o.jsx("div",{children:o.jsx(i4,{onNavigate:t})})},Fw=async()=>{try{const{data:t,error:e}=await ee.from("currencies").select("*").eq("is_active",!0).order("code",{ascending:!0});if(e)throw e;return{data:t||[],error:null}}catch(t){return console.error("Error fetching currencies:",t),{data:[],error:t}}},a4=async t=>{try{const{data:e,error:r}=await ee.from("currencies").insert([{code:t.code.toUpperCase(),name_es:t.name_es,name_en:t.name_en,symbol:t.symbol,is_base:t.is_base||!1,is_active:!0}]).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error creating currency:",e),{data:null,error:e}}},l4=async(t,e)=>{try{const{data:r,error:s}=await ee.from("currencies").update({name_es:e.name_es,name_en:e.name_en,symbol:e.symbol,is_base:e.is_base!==void 0?e.is_base:!1,is_active:e.is_active!==void 0?e.is_active:!0,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(s)throw s;return{data:r,error:null}}catch(r){return console.error("Error updating currency:",r),{data:null,error:r}}},c4=async t=>{try{const{error:e}=await ee.from("currencies").update({is_active:!1}).eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error deleting currency:",e),{data:!1,error:e}}},u4=async(t,e)=>{try{if(t===e)return{data:1,error:null};const{data:r,error:s}=await ee.from("currencies").select("id, code").in("code",[t,e]).eq("is_active",!0);if(s)throw s;if(!r||r.length!==2)throw new Error("One or both currencies not found");const a=r.find(p=>p.code===t),l=r.find(p=>p.code===e),{data:u,error:d}=await ee.from("exchange_rates").select("rate").eq("from_currency_id",a.id).eq("to_currency_id",l.id).eq("is_active",!0).order("effective_date",{ascending:!1}).limit(1).maybeSingle();if(d)throw d;if(u)return{data:parseFloat(u.rate),error:null};const{data:h,error:m}=await ee.from("exchange_rates").select("rate").eq("from_currency_id",l.id).eq("to_currency_id",a.id).eq("is_active",!0).order("effective_date",{ascending:!1}).limit(1).maybeSingle();if(m)throw m;return h?{data:1/parseFloat(h.rate),error:null}:(console.warn(`No exchange rate found for ${t} to ${e}, using 1:1`),{data:1,error:null})}catch(r){return console.error("Error getting exchange rate:",r),{data:null,error:r}}},Hv=async(t,e,r)=>{try{const{data:s,error:a}=await u4(e,r);if(a)throw a;return{data:t*s,error:null}}catch(s){return console.error("Error converting currency:",s),{data:null,error:s}}},d4=async()=>{try{const t=await fetch("https://api.exchangerate-api.com/v4/latest/USD");if(!t.ok)throw new Error("Failed to fetch exchange rates");const e=await t.json();return{data:{EUR:1/(e.rates.EUR||1),GBP:1/(e.rates.GBP||1),CAD:1/(e.rates.CAD||1),MXN:1/(e.rates.MXN||1),USD:1},error:null}}catch(t){return console.error("Error fetching official rates:",t),{data:null,error:t}}},f4=async()=>{try{const{data:t,error:e}=await ee.from("exchange_rates").select(`
        id,
        rate,
        effective_date,
        is_active,
        from_currency:from_currency_id(id, code, name_es, name_en, symbol),
        to_currency:to_currency_id(id, code, name_es, name_en, symbol)
      `).eq("is_active",!0).order("effective_date",{ascending:!1});if(e)throw e;return{data:t||[],error:null}}catch(t){return console.error("Error fetching exchange rates:",t),{data:[],error:t}}},Gv=async t=>{try{const{data:e,error:r}=await ee.from("exchange_rates").upsert({from_currency_id:t.fromCurrencyId,to_currency_id:t.toCurrencyId,rate:parseFloat(t.rate),effective_date:t.effectiveDate||new Date().toISOString().split("T")[0],is_active:!0},{onConflict:"from_currency_id,to_currency_id,effective_date"}).select().single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error saving exchange rate:",e),{data:null,error:e}}},h4=async t=>{try{const{error:e}=await ee.from("exchange_rates").update({is_active:!1}).eq("id",t);if(e)throw e;return{data:!0,error:null}}catch(e){return console.error("Error deleting exchange rate:",e),{data:!1,error:e}}},m4=async()=>{try{const{data:t,error:e}=await ee.from("shipping_zones").select("*").eq("is_active",!0).order("province_name",{ascending:!0});if(e)throw e;return{success:!0,zones:t||[]}}catch(t){return console.error("Error fetching active shipping zones:",t),{success:!1,error:t.message,zones:[]}}},p4=async()=>{try{const{data:t,error:e}=await ee.from("shipping_zones").select("*").order("province_name",{ascending:!0});if(e)throw e;return{success:!0,zones:t||[]}}catch(t){return console.error("Error fetching all shipping zones:",t),{success:!1,error:t.message,zones:[]}}},g4=async t=>{try{const{data:e,error:r}=await ee.from("shipping_zones").select("*").eq("province_name",t).eq("is_active",!0).single();if(r)throw r;return{success:!0,zone:e}}catch(e){return console.error("Error fetching shipping zone by province:",e),{success:!1,error:e.message}}},y4=async(t,e=0)=>{try{const r=await g4(t);if(!r.success)return{success:!1,error:"Province not found",cost:0,freeShipping:!1};const s=r.zone;return s.free_shipping?{success:!0,cost:0,freeShipping:!0,zone:s}:{success:!0,cost:parseFloat(s.shipping_cost),freeShipping:!1,zone:s}}catch(r){return console.error("Error calculating shipping cost:",r),{success:!1,error:r.message,cost:0,freeShipping:!1}}},v4=async t=>{try{const e={province_name:t.provinceName,shipping_cost:parseFloat(t.shippingCost||0),is_active:t.isActive!==void 0?t.isActive:!0,free_shipping:t.freeShipping||!1},{data:r,error:s}=await ee.from("shipping_zones").insert(e).select().single();if(s)throw s;return{success:!0,zone:r}}catch(e){return console.error("Error creating shipping zone:",e),{success:!1,error:e.message}}},x4=async(t,e)=>{try{const r={};e.provinceName!==void 0&&(r.province_name=e.provinceName),e.shippingCost!==void 0&&(r.shipping_cost=parseFloat(e.shippingCost)),e.isActive!==void 0&&(r.is_active=e.isActive),e.freeShipping!==void 0&&(r.free_shipping=e.freeShipping),e.deliveryDays!==void 0&&(r.delivery_days=parseInt(e.deliveryDays)),e.transportCost!==void 0&&(r.transport_cost=parseFloat(e.transportCost)),e.deliveryNote!==void 0&&(r.delivery_note=e.deliveryNote),r.updated_at=new Date().toISOString();const{data:s,error:a}=await ee.from("shipping_zones").update(r).eq("id",t).select().single();if(a)throw a;return{success:!0,zone:s}}catch(r){return console.error("Error updating shipping zone:",r),{success:!1,error:r.message}}},Uw=[{id:"pinar_del_rio",name:"Pinar del Ro",municipalities:["Consolacin del Sur","Guane","La Palma","Los Palacios","Mantua","Minas de Matahambre","Pinar del Ro","San Juan y Martnez","San Luis","Sandino","Viales"]},{id:"artemisa",name:"Artemisa",municipalities:["Alquzar","Artemisa","Baha Honda","Bauta","Caimito","Candelaria","Guanajay","Gira de Melena","Mariel","San Antonio de los Baos","San Cristbal"]},{id:"la_habana",name:"La Habana",municipalities:["Arroyo Naranjo","Boyeros","Centro Habana","Cerro","Cotorro","Diez de Octubre","Guanabacoa","Habana del Este","Habana Vieja","La Lisa","Marianao","Playa","Plaza de la Revolucin","Regla","San Miguel del Padrn"]},{id:"mayabeque",name:"Mayabeque",municipalities:["Bataban","Bejucal","Gines","Jaruco","Madruga","Melena del Sur","Nueva Paz","Quivicn","San Jos de las Lajas","San Nicols","Santa Cruz del Norte"]},{id:"matanzas",name:"Matanzas",municipalities:["Calimete","Crdenas","Cinaga de Zapata","Coln","Jagey Grande","Jovellanos","Limonar","Los Arabos","Mart","Matanzas","Pedro Betancourt","Perico","Unin de Reyes"]},{id:"cienfuegos",name:"Cienfuegos",municipalities:["Abreus","Aguada de Pasajeros","Cienfuegos","Cruces","Cumanayagua","Palmira","Rodas","Santa Isabel de las Lajas"]},{id:"villa_clara",name:"Villa Clara",municipalities:["Caibarin","Camajuan","Cifuentes","Corralillo","Encrucijada","Manicaragua","Placetas","Quemado de Gines","Ranchuelo","Remedios","Sagua la Grande","Santa Clara","Santo Domingo"]},{id:"sancti_spiritus",name:"Sancti Spritus",municipalities:["Cabaigun","Fomento","Jatibonico","La Sierpe","Sancti Spritus","Taguasco","Trinidad","Yaguajay"]},{id:"ciego_de_avila",name:"Ciego de vila",municipalities:["Baragu","Bolivia","Chambas","Ciego de vila","Ciro Redondo","Florencia","Majagua","Morn","Primero de Enero","Venezuela"]},{id:"camaguey",name:"Camagey",municipalities:["Camagey","Carlos Manuel de Cspedes","Esmeralda","Florida","Guimaro","Jimagay","Minas","Najasa","Nuevitas","Santa Cruz del Sur","Sibanic","Sierra de Cubitas","Vertientes"]},{id:"las_tunas",name:"Las Tunas",municipalities:["Amancio","Colombia","Jess Menndez","Jobabo","Las Tunas","Majibacoa","Manat","Puerto Padre"]},{id:"holguin",name:"Holgun",municipalities:["Antilla","Bguanos","Banes","Cacocum","Calixto Garca","Cueto","Frank Pas","Gibara","Holgun","Mayar","Moa","Rafael Freyre","Sagua de Tnamo","Urbano Noris"]},{id:"granma",name:"Granma",municipalities:["Bartolom Mas","Bayamo","Buey Arriba","Campechuela","Cauto Cristo","Guisa","Jiguan","Manzanillo","Media Luna","Niquero","Piln","Ro Cauto","Yara"]},{id:"santiago_de_cuba",name:"Santiago de Cuba",municipalities:["Contramaestre","Guam","Mella","Palma Soriano","San Luis","Santiago de Cuba","Segundo Frente","Songo-La Maya","Tercer Frente"]},{id:"guantanamo",name:"Guantnamo",municipalities:["Baracoa","Caimanera","El Salvador","Guantnamo","Imas","Mais","Manuel Tames","Niceto Prez","San Antonio del Sur","Yateras"]},{id:"isla_de_la_juventud",name:"Isla de la Juventud",municipalities:["Isla de la Juventud"]}],b4=t=>{const e=Uw.find(r=>r.name===t);return e?e.municipalities:[]},w4=()=>Uw.map(t=>t.name),j4=()=>{const{t,language:e}=Gt(),{financialSettings:r,setFinancialSettings:s,notificationSettings:a,setNotificationSettings:l,visualSettings:u,setVisualSettings:d,zelleAccounts:h,setZelleAccounts:m}=Ht(),{user:p,isAdmin:g}=rr(),[v,b]=w.useState("financiero"),[_,C]=w.useState(r),[j,R]=w.useState(a),[A,N]=w.useState(u),[P,D]=w.useState({companyName:u.companyName||"PapuEnvos",logo:u.logo||"",primaryColor:u.primaryColor||"#2563eb",secondaryColor:u.secondaryColor||"#9333ea",useGradient:u.useGradient!==void 0?u.useGradient:!0,headerBgColor:u.headerBgColor||"#ffffff",headerTextColor:u.headerTextColor||"#1f2937",headingColor:u.headingColor||"#1f2937",useHeadingGradient:u.useHeadingGradient!==void 0?u.useHeadingGradient:!0,buttonBgColor:u.buttonBgColor||"#2563eb",buttonTextColor:u.buttonTextColor||"#ffffff",buttonHoverBgColor:u.buttonHoverBgColor||"#1d4ed8",destructiveBgColor:u.destructiveBgColor||"#dc2626",destructiveTextColor:u.destructiveTextColor||"#ffffff",destructiveHoverBgColor:u.destructiveHoverBgColor||"#b91c1c",accentColor:u.accentColor||"#9333ea",pageBgColor:u.pageBgColor||"#f9fafb",cardBgColor:u.cardBgColor||"#ffffff"}),[M,L]=w.useState(u.logo||""),[Q,re]=w.useState([]),[B,ye]=w.useState(null),[ne,we]=w.useState(null),[H,ce]=w.useState(!1),[G,ae]=w.useState({code:"",name_es:"",name_en:"",symbol:"",is_base:!1}),[V,oe]=w.useState({}),[ie,E]=w.useState([]),[I,X]=w.useState(!1),[le,be]=w.useState(null),[Ce,ue]=w.useState(null),[Ne,Oe]=w.useState({}),[Y,K]=w.useState([]),[De,_e]=w.useState(!1),[T,pe]=w.useState(null),[te,U]=w.useState([]),[se,Pe]=w.useState(!1),[Z,je]=w.useState(null),[Ie,Xe]=w.useState([]),[bt,dt]=w.useState(!1),[Dt,tt]=w.useState(!1),[qe,nr]=w.useState({fromCurrencyId:"",toCurrencyId:"",rate:"",effectiveDate:new Date().toISOString().split("T")[0]});w.useEffect(()=>{en(),Fr(),rs(),Fs(),Bs(),Vs()},[]);const Fr=async()=>{ce(!0);try{const{data:k,error:z}=await d4();if(z)throw z;we(k)}catch(k){console.error("Error loading official rates:",k)}finally{ce(!1)}};if(!p||!g)return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 px-4",children:o.jsxs(me.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-effect p-8 rounded-2xl max-w-md w-full text-center",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",style:et(u),children:t("dashboard.privateAccess")}),o.jsx("p",{className:"text-gray-600",children:t("dashboard.adminOnly")})]})});const en=async()=>{try{const{data:k,error:z}=await Fw();if(z)throw z;re(k||[])}catch(k){console.error("Error loading currencies:",k),he({title:"Error",description:e==="es"?"Error al cargar monedas":"Error loading currencies",variant:"destructive"})}},Ic=()=>{s(_),he({title:t("settings.saveSuccess")})},va=async()=>{if(!G.code||!G.name_es||!G.name_en||!G.symbol){he({title:"Error",description:e==="es"?"Por favor complete todos los campos":"Please fill all fields",variant:"destructive"});return}try{const{supabase:k}=await Bi(async()=>{const{supabase:Se}=await Promise.resolve().then(()=>zT);return{supabase:Se}},void 0);G.is_base&&await k.from("currencies").update({is_base:!1}).eq("is_base",!0).neq("id",B?.id||"00000000-0000-0000-0000-000000000000");let z;if(B){const{data:Se,error:ze}=await l4(B.id,G);if(ze)throw ze;z=Se,he({title:e==="es"?"Moneda actualizada":"Currency Updated",description:e==="es"?"La moneda se actualiz exitosamente":"Currency was updated successfully"})}else{const{data:Se,error:ze}=await a4(G);if(ze)throw ze;z=Se,he({title:e==="es"?"Moneda creada":"Currency Created",description:e==="es"?"La moneda se cre exitosamente":"Currency was created successfully"})}ae({code:"",name_es:"",name_en:"",symbol:"",is_base:!1}),ye(null),await en()}catch(k){console.error("Error saving currency:",k),he({title:"Error",description:k.message,variant:"destructive"})}},xa=async k=>{ye(k),ae({code:k.code,name_es:k.name_es,name_en:k.name_en,symbol:k.symbol,is_base:k.is_base||!1})},Lc=async k=>{if(confirm(e==="es"?"Est seguro de que desea eliminar esta moneda? Esto tambin eliminar sus tasas de cambio.":"Are you sure you want to delete this currency? This will also remove its exchange rates."))try{await ee.from("exchange_rates").update({is_active:!1}).or(`from_currency_id.eq.${k},to_currency_id.eq.${k}`);const{error:Se}=await c4(k);if(Se)throw Se;he({title:e==="es"?"Moneda eliminada":"Currency Deleted",description:e==="es"?"La moneda y sus tasas de cambio se eliminaron exitosamente":"Currency and its exchange rates were deleted successfully"}),await en()}catch(Se){console.error("Error deleting currency:",Se),he({title:"Error",description:Se.message,variant:"destructive"})}},Wi=()=>{ye(null),ae({code:"",name_es:"",name_en:"",symbol:"",is_base:!1})},Hi=()=>{l(j),he({title:t("settings.saveSuccess")})},Fs=async()=>{_e(!0);try{const k=await p4();if(k.success){const z=w4(),Se=k.zones.map(Ze=>Ze.province_name),ze=z.filter(Ze=>!Se.includes(Ze)),Ke=[...k.zones,...ze.map(Ze=>({id:`temp-${Ze}`,province_name:Ze,shipping_cost:0,is_active:!1,free_shipping:!1,is_new:!0}))];K(Ke.sort((Ze,Sa)=>Ze.province_name.localeCompare(Sa.province_name)))}}catch(k){console.error("Error loading shipping zones:",k),he({title:e==="es"?"Error al cargar zonas":"Error loading zones",description:k.message,variant:"destructive"})}finally{_e(!1)}},Us=async(k,z)=>{pe(k);try{const Se=Y.find(ze=>ze.id===k);Se.is_new?(await v4({provinceName:Se.province_name,shippingCost:z.shipping_cost??Se.shipping_cost,isActive:z.is_active??Se.is_active??!0,freeShipping:z.free_shipping??Se.free_shipping??!1})).success&&(await Fs(),he({title:e==="es"?" Zona creada":" Zone created"})):(await x4(k,{shippingCost:z.shipping_cost,isActive:z.is_active,freeShipping:z.free_shipping})).success&&(K(Ke=>Ke.map(Ze=>Ze.id===k?{...Ze,...z}:Ze)),he({title:e==="es"?" Zona actualizada":" Zone updated"}))}catch(Se){console.error("Error updating shipping zone:",Se),he({title:e==="es"?"Error al guardar":"Save error",description:Se.message,variant:"destructive"})}finally{pe(null)}},Bs=async()=>{Pe(!0);try{const k=await Wh();k.success&&U(k.configs)}catch(k){console.error("Error loading remittance configs:",k),he({title:e==="es"?"Error al cargar configuracin":"Error loading config",description:k.message,variant:"destructive"})}finally{Pe(!1)}},tn=async(k,z)=>{je(k);try{const ze={...te.find(Ze=>Ze.id===k),...z};(await HO(ze)).success&&(await Bs(),he({title:e==="es"?" Configuracin guardada":" Configuration saved"}))}catch(Se){console.error("Error updating remittance config:",Se),he({title:e==="es"?"Error al guardar":"Save error",description:Se.message,variant:"destructive"})}finally{je(null)}},bn=async(k,z)=>{const ze=te.find(Ke=>Ke.id===k).paymentMethods.map(Ke=>Ke.id===z?{...Ke,enabled:!Ke.enabled}:Ke);await tn(k,{paymentMethods:ze})},Vs=async()=>{dt(!0);try{const{data:k,error:z}=await f4();!z&&k&&Xe(k)}catch(k){console.error("Error loading exchange rates:",k)}finally{dt(!1)}},ba=async()=>{if(!qe.fromCurrencyId||!qe.toCurrencyId||!qe.rate){he({title:e==="es"?"Datos incompletos":"Incomplete data",description:e==="es"?"Por favor complete todos los campos":"Please fill all fields",variant:"destructive"});return}if(qe.fromCurrencyId===qe.toCurrencyId){he({title:"Error",description:e==="es"?"Las monedas deben ser diferentes":"Currencies must be different",variant:"destructive"});return}try{const k=await Gv(qe);if(k.error)throw k.error;const z={fromCurrencyId:qe.toCurrencyId,toCurrencyId:qe.fromCurrencyId,rate:(1/parseFloat(qe.rate)).toString(),effectiveDate:qe.effectiveDate},Se=await Gv(z);if(Se.error)throw Se.error;await Vs(),tt(!1),nr({fromCurrencyId:"",toCurrencyId:"",rate:"",effectiveDate:new Date().toISOString().split("T")[0]}),he({title:e==="es"?" Tasas guardadas":" Rates saved",description:e==="es"?"La tasa de cambio y su inversa se guardaron correctamente":"Exchange rate and its inverse saved successfully"})}catch(k){console.error("Error saving rate:",k),he({title:e==="es"?"Error al guardar":"Save error",description:k.message,variant:"destructive"})}},wa=async k=>{if(confirm(e==="es"?"Eliminar esta tasa?":"Delete this rate?"))try{const z=await h4(k);if(z.error)throw z.error;await Vs(),he({title:e==="es"?" Tasa eliminada":" Rate deleted"})}catch(z){console.error("Error deleting rate:",z),he({title:"Error",description:z.message,variant:"destructive"})}},ja=async k=>{const z=k.target.files?.[0];if(z)try{const Se=await aa(z,"logo");if(!Se.success){he({title:e==="es"?"Error de validacin":"Validation error",description:Se.errors.join(`
`),variant:"destructive"});return}L(Se.base64),D(ze=>({...ze,logo:Se.base64})),he({title:e==="es"?"Logo cargado":"Logo uploaded",description:e==="es"?`${Se.metadata.originalDimensions}  ${Se.metadata.finalDimensions}`:`${Se.metadata.originalDimensions}  ${Se.metadata.finalDimensions}`})}catch(Se){console.error("Error processing logo:",Se),he({title:e==="es"?"Error al procesar imagen":"Error processing image",description:Se.message,variant:"destructive"})}},_a=()=>{d({...u,...P}),document.title=P.companyName,he({title:t("settings.saveSuccess"),description:e==="es"?"Personalizacin guardada. Recarga la pgina para ver todos los cambios.":"Customization saved. Reload the page to see all changes."})},rs=async()=>{X(!0);try{const{data:k,error:z}=await qb();if(z)throw z;E(k||[])}catch(k){console.error("Error loading carousel slides:",k),he({title:"Error al cargar diapositivas",description:k.message,variant:"destructive"})}finally{X(!1)}},Ca=async()=>{try{const{data:k,error:z}=await lA({title_es:"",title_en:"",subtitle_es:"",subtitle_en:"",image_url:"",link_url:"",is_active:!1});if(z)throw z;await rs(),he({title:e==="es"?"Diapositiva creada":"Slide created",description:e==="es"?"Nueva diapositiva agregada exitosamente":"New slide added successfully"})}catch(k){console.error("Error creating slide:",k),he({title:"Error",description:k.message,variant:"destructive"})}},Cr=async(k,z)=>{try{be(k),ue(null);const{error:Se}=await Ev(k,z);if(Se)throw Se;E(ze=>ze.map(Ke=>Ke.id===k?{...Ke,...z}:Ke)),be(null),ue(k),setTimeout(()=>ue(null),1500)}catch(Se){console.error("Error updating slide:",Se),be(null),he({title:"Error al actualizar",description:Se.message,variant:"destructive"})}},wn=(k,z,Se)=>{E(Ke=>Ke.map(Ze=>Ze.id===k?{...Ze,[z]:Se}:Ze)),Ne[k]&&clearTimeout(Ne[k]);const ze=setTimeout(()=>{Cr(k,{[z]:Se})},800);Oe(Ke=>({...Ke,[k]:ze}))},ns=async k=>{if(confirm(e==="es"?"Eliminar esta diapositiva?":"Delete this slide?"))try{const{error:z}=await cA(k);if(z)throw z;await rs(),oe(Se=>{const ze={...Se};return delete ze[k],ze}),he({title:e==="es"?"Diapositiva eliminada":"Slide deleted",description:e==="es"?"La diapositiva fue eliminada exitosamente":"Slide was deleted successfully"})}catch(z){console.error("Error deleting slide:",z),he({title:"Error",description:z.message,variant:"destructive"})}},$c=async(k,z)=>{try{be(k),ue(null);const{error:Se}=await Ev(k,{display_order:parseInt(z)});if(Se)throw Se;E(ze=>ze.map(Ke=>Ke.id===k?{...Ke,display_order:parseInt(z)}:Ke).sort((Ke,Ze)=>(Ke.display_order??0)-(Ze.display_order??0))),be(null),ue(k),setTimeout(()=>ue(null),1500)}catch(Se){console.error("Error updating slide order:",Se),be(null),he({title:"Error",description:Se.message,variant:"destructive"})}},ss=async(k,z)=>{const Se=z.target.files?.[0];if(Se)try{const ze=await aa(Se,"carousel");if(!ze.success){he({title:"Error de validacin",description:ze.errors.join(`
`),variant:"destructive"});return}await Cr(k,{image_url:ze.base64}),oe(Ke=>({...Ke,[k]:ze.base64})),he({title:"Imagen optimizada",description:`${ze.metadata.originalDimensions}  ${ze.metadata.finalDimensions} (${ze.metadata.compression} compresin)`})}catch(ze){console.error("Error processing slide image:",ze),he({title:"Error al procesar imagen",description:ze.message,variant:"destructive"})}},zs=[{id:"financiero",label:e==="es"?"Financiero":"Financial",icon:Qr,color:"#2563eb"},{id:"envios",label:e==="es"?"Envos":"Shipping",icon:Tf,color:"#f59e0b"},{id:"remesas",label:e==="es"?"Remesas":"Remittances",icon:Jy,color:"#06b6d4"},{id:"visual",label:"Visual",icon:qd,color:"#9333ea"},{id:"contenido",label:e==="es"?"Contenido":"Content",icon:Xy,color:"#10b981"}];return o.jsx("div",{className:"min-h-screen py-8 px-4",children:o.jsxs("div",{className:"container mx-auto max-w-7xl",children:[o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",style:et(u),children:t("settings.title")}),o.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:t("settings.subtitle")})]}),o.jsx("div",{className:"flex gap-2 mb-8 border-b pb-2",children:zs.map(k=>o.jsxs("button",{onClick:()=>b(k.id),className:`flex items-center gap-2 px-6 py-3 rounded-t-lg font-medium transition-all ${v===k.id?"bg-white shadow-md border-b-2":"bg-gray-50 hover:bg-gray-100 text-gray-600"}`,style:v===k.id?{borderBottomColor:k.color,color:k.color}:{},children:[o.jsx(k.icon,{className:"h-5 w-5"}),k.label]},k.id))}),o.jsxs("div",{className:"space-y-12",children:[v==="financiero"&&o.jsxs(o.Fragment,{children:[o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[o.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[o.jsx(Qr,{className:"mr-3 text-blue-600"}),t("settings.financial.title")]}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsx("input",{type:"number",value:_.usdToLocal,onChange:k=>C({..._,usdToLocal:parseFloat(k.target.value)}),placeholder:t("settings.financial.usdToLocal"),className:"input-style"}),o.jsx("input",{type:"number",value:_.productProfit,onChange:k=>C({..._,productProfit:parseFloat(k.target.value)}),placeholder:t("settings.financial.productProfit"),className:"input-style"}),o.jsx("input",{type:"number",value:_.comboProfit,onChange:k=>C({..._,comboProfit:parseFloat(k.target.value)}),placeholder:t("settings.financial.comboProfit"),className:"input-style"}),o.jsx("input",{type:"number",value:_.remittanceProfit,onChange:k=>C({..._,remittanceProfit:parseFloat(k.target.value)}),placeholder:t("settings.financial.remittanceProfit"),className:"input-style"})]}),o.jsxs("div",{className:"border-t pt-6 mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:e==="es"?"Configuracin de Envo":"Shipping Configuration"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Tipo de Envo":"Shipping Type"}),o.jsxs("select",{value:_.shippingType||"undetermined",onChange:k=>C({..._,shippingType:k.target.value}),className:"input-style w-full",children:[o.jsx("option",{value:"free",children:e==="es"?"Gratis":"Free"}),o.jsx("option",{value:"fixed",children:e==="es"?"Tarifa Fija":"Fixed Rate"}),o.jsx("option",{value:"undetermined",children:e==="es"?"Por Determinar (segn ubicacin)":"To Be Determined (based on location)"}),o.jsx("option",{value:"calculated",children:e==="es"?"Calculado (con umbral gratis)":"Calculated (with free threshold)"})]})]}),_.shippingType==="fixed"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Costo Fijo de Envo ($)":"Fixed Shipping Cost ($)"}),o.jsx("input",{type:"number",step:"0.01",value:_.shippingFixedAmount||0,onChange:k=>C({..._,shippingFixedAmount:parseFloat(k.target.value)}),placeholder:"0.00",className:"input-style w-full"})]}),(_.shippingType==="calculated"||_.shippingType==="undetermined")&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Umbral para Envo Gratis ($)":"Free Shipping Threshold ($)"}),o.jsx("input",{type:"number",step:"0.01",value:_.shippingFreeThreshold||100,onChange:k=>C({..._,shippingFreeThreshold:parseFloat(k.target.value)}),placeholder:"100.00",className:"input-style w-full"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Pedidos superiores a este monto tendrn envo gratis":"Orders above this amount will have free shipping"})]})]}),o.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:o.jsxs("p",{className:"text-sm text-gray-700",children:[_.shippingType==="free"&&(e==="es"?" Envo gratis: No se cobrar envo en ningn pedido":" Free shipping: No shipping charge on any order"),_.shippingType==="fixed"&&(e==="es"?" Tarifa fija: Se cobrar el mismo monto de envo en todos los pedidos":" Fixed rate: Same shipping amount will be charged on all orders"),_.shippingType==="undetermined"&&(e==="es"?' Por determinar: El costo de envo se mostrar como "Por determinar" y se calcular segn la ubicacin del destinatario':' To be determined: Shipping cost will show as "To be determined" and will be calculated based on recipient location'),_.shippingType==="calculated"&&(e==="es"?" Calculado: Envo gratis si el pedido supera el umbral, de lo contrario se determinar segn ubicacin":" Calculated: Free shipping if order exceeds threshold, otherwise determined by location")]})})]}),o.jsxs("div",{className:"border-t pt-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-xl font-semibold",children:t("settings.financial.currencies")}),o.jsxs(xe,{onClick:Fr,disabled:H,variant:"outline",size:"sm",children:[o.jsx(Qr,{className:"w-4 h-4 mr-2"}),H?e==="es"?"Cargando...":"Loading...":e==="es"?"Cargar Tasas Oficiales":"Load Official Rates"]})]}),ne&&o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:[o.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:e==="es"?"Tasas Oficiales (Referencia)":"Official Rates (Reference)"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm",children:Object.entries(ne).map(([k,z])=>o.jsxs("div",{className:"bg-white p-2 rounded flex justify-between",children:[o.jsxs("span",{className:"font-bold",children:[k,":"]}),o.jsx("span",{className:"font-mono",children:Number(z).toFixed(4)})]},k))}),o.jsx("p",{className:"text-xs text-gray-600 mt-2",children:e==="es"?"Tasas de referencia. Configure las tasas de cambio en la seccin de Exchange Rates.":"Reference rates. Configure exchange rates in the Exchange Rates section."})]}),o.jsx("div",{className:"space-y-2 mb-6",children:Q.map(k=>o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"font-bold w-16",children:k.code}),o.jsx("span",{className:"flex-1",children:e==="es"?k.name_es:k.name_en}),o.jsx("span",{className:"w-12 text-center",children:k.symbol}),k.is_base&&o.jsx("span",{className:"text-xs text-white px-2 py-1 rounded font-semibold",style:{background:u.useGradient?`linear-gradient(to right, ${u.primaryColor}, ${u.secondaryColor})`:u.primaryColor},children:"Base"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(xe,{variant:"outline",size:"icon",onClick:()=>xa(k),children:o.jsx(Ql,{className:"h-4 w-4"})}),o.jsx(xe,{variant:"destructive",size:"icon",onClick:()=>Lc(k.id),children:o.jsx(Go,{className:"h-4 w-4"})})]})]},k.id))}),o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[o.jsx("h4",{className:"text-lg font-semibold mb-3",children:B?e==="es"?"Editar Moneda":"Edit Currency":e==="es"?"Nueva Moneda":"New Currency"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.code")}),o.jsx("input",{value:G.code,onChange:k=>ae({...G,code:k.target.value.toUpperCase()}),placeholder:"USD",className:"input-style w-full",maxLength:3,disabled:B!==null})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.nameES")}),o.jsx("input",{value:G.name_es,onChange:k=>ae({...G,name_es:k.target.value}),placeholder:"Dlar",className:"input-style w-full"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.nameEN")}),o.jsx("input",{value:G.name_en,onChange:k=>ae({...G,name_en:k.target.value}),placeholder:"Dollar",className:"input-style w-full"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:t("settings.financial.symbol")}),o.jsx("input",{value:G.symbol,onChange:k=>ae({...G,symbol:k.target.value}),placeholder:"$",className:"input-style w-full",maxLength:3})]})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:G.is_base,onChange:k=>ae({...G,is_base:k.target.checked}),className:"rounded"}),o.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Moneda Base":"Base Currency"})]}),o.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e==="es"?'La moneda base se usa como referencia. Configure las tasas de cambio en la seccin "Tasas de Cambio".':'The base currency is used as reference. Configure exchange rates in the "Exchange Rates" section.'})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(xe,{onClick:va,className:"flex-1",style:mt(u),children:B?o.jsxs(o.Fragment,{children:[o.jsx(Gn,{className:"h-4 w-4 mr-2"}),t("settings.financial.updateCurrency")]}):o.jsxs(o.Fragment,{children:[o.jsx(Ts,{className:"h-4 w-4 mr-2"}),t("settings.financial.addCurrency")]})}),B&&o.jsx(xe,{variant:"outline",onClick:Wi,children:e==="es"?"Cancelar":"Cancel"})]})]})]}),o.jsx("div",{className:"mt-6 text-right",children:o.jsxs(xe,{onClick:Ic,style:mt(u),children:[o.jsx(Gn,{className:"mr-2 h-4 w-4"}),t("settings.financial.save")]})})]}),o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"glass-effect p-6 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-2xl font-bold",style:et(u),children:e==="es"?"Tasas de Cambio":"Exchange Rates"}),o.jsxs(xe,{onClick:()=>tt(!Dt),style:mt(u),children:[o.jsx(Ts,{className:"h-4 w-4 mr-2"}),e==="es"?"Nueva Tasa":"New Rate"]})]}),o.jsx("p",{className:"text-gray-600 mb-6",children:e==="es"?"Configure las tasas de cambio entre diferentes monedas. Las tasas se usan para convertir precios y totales.":"Configure exchange rates between different currencies. Rates are used to convert prices and totals."}),Dt&&o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[o.jsx("h4",{className:"text-lg font-semibold mb-3",children:e==="es"?"Nueva Tasa de Cambio":"New Exchange Rate"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:e==="es"?"Desde Moneda":"From Currency"}),o.jsxs("select",{value:qe.fromCurrencyId,onChange:k=>nr({...qe,fromCurrencyId:k.target.value}),className:"input-style w-full",children:[o.jsx("option",{value:"",children:e==="es"?"Seleccionar...":"Select..."}),Q.map(k=>o.jsxs("option",{value:k.id,children:[k.code," - ",e==="es"?k.name_es:k.name_en]},k.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:e==="es"?"Hacia Moneda":"To Currency"}),o.jsxs("select",{value:qe.toCurrencyId,onChange:k=>nr({...qe,toCurrencyId:k.target.value}),className:"input-style w-full",children:[o.jsx("option",{value:"",children:e==="es"?"Seleccionar...":"Select..."}),Q.map(k=>o.jsxs("option",{value:k.id,children:[k.code," - ",e==="es"?k.name_es:k.name_en]},k.id))]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:e==="es"?"Tasa":"Rate"}),ne&&qe.toCurrencyId&&(()=>{const k=Q.find(Se=>Se.id===qe.toCurrencyId),z=Q.find(Se=>Se.id===qe.fromCurrencyId);return k&&z&&ne[k.code]?o.jsxs("span",{className:"text-xs text-blue-600",children:["Ref: ",ne[k.code].toFixed(6)]}):null})()]}),o.jsx("input",{type:"number",step:"0.000001",value:qe.rate,onChange:k=>nr({...qe,rate:k.target.value}),placeholder:"1.0",className:"input-style w-full"}),ne&&qe.toCurrencyId&&(()=>{const k=Q.find(z=>z.id===qe.toCurrencyId);return k&&ne[k.code]?o.jsx("button",{type:"button",onClick:()=>nr({...qe,rate:ne[k.code].toString()}),className:"text-xs text-blue-600 hover:text-blue-800 underline mt-1",children:e==="es"?"Usar tasa oficial":"Use official rate"}):null})()]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:e==="es"?"Fecha Efectiva":"Effective Date"}),o.jsx("input",{type:"date",value:qe.effectiveDate,onChange:k=>nr({...qe,effectiveDate:k.target.value}),className:"input-style w-full"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(xe,{onClick:ba,className:"flex-1",style:mt(u),children:[o.jsx(Gn,{className:"h-4 w-4 mr-2"}),e==="es"?"Guardar Tasa":"Save Rate"]}),o.jsx(xe,{variant:"outline",onClick:()=>{tt(!1),nr({fromCurrencyId:"",toCurrencyId:"",rate:"",effectiveDate:new Date().toISOString().split("T")[0]})},children:e==="es"?"Cancelar":"Cancel"})]})]}),bt?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):Ie.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:e==="es"?"No hay tasas de cambio configuradas. Cree una nueva tasa usando el botn de arriba.":"No exchange rates configured. Create a new rate using the button above."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left py-2 px-3",children:e==="es"?"Desde":"From"}),o.jsx("th",{className:"text-left py-2 px-3",children:e==="es"?"Hacia":"To"}),o.jsx("th",{className:"text-right py-2 px-3",children:e==="es"?"Tasa":"Rate"}),o.jsx("th",{className:"text-left py-2 px-3",children:e==="es"?"Fecha":"Date"}),o.jsx("th",{className:"text-center py-2 px-3",children:e==="es"?"Acciones":"Actions"})]})}),o.jsx("tbody",{children:Ie.map(k=>o.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[o.jsxs("td",{className:"py-2 px-3",children:[o.jsx("span",{className:"font-bold",children:k.from_currency.code}),o.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e==="es"?k.from_currency.name_es:k.from_currency.name_en})]}),o.jsxs("td",{className:"py-2 px-3",children:[o.jsx("span",{className:"font-bold",children:k.to_currency.code}),o.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e==="es"?k.to_currency.name_es:k.to_currency.name_en})]}),o.jsx("td",{className:"text-right py-2 px-3 font-mono",children:Number(k.rate).toFixed(6)}),o.jsx("td",{className:"py-2 px-3 text-sm text-gray-600",children:new Date(k.effective_date).toLocaleDateString(e==="es"?"es-ES":"en-US")}),o.jsx("td",{className:"py-2 px-3",children:o.jsx("div",{className:"flex justify-center",children:o.jsx(xe,{variant:"destructive",size:"icon",onClick:()=>wa(k.id),children:o.jsx(Go,{className:"h-4 w-4"})})})})]},k.id))})]})})]})]}),v==="visual"&&o.jsx(o.Fragment,{children:o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[o.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[o.jsx(qd,{className:"mr-3 text-purple-600"}),t("settings.visual.title")]}),o.jsxs("div",{className:"mb-8 pb-8 border-b",children:[o.jsxs("h3",{className:"text-xl font-semibold mb-6 flex items-center",children:[o.jsx(qd,{className:"mr-3 text-indigo-600"}),e==="es"?"Personalizacin de Apariencia":"Appearance Customization"]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:e==="es"?"Logo de la Empresa":"Company Logo"}),M&&o.jsx("div",{className:"mb-4 flex justify-center",children:o.jsx("div",{className:"relative w-40 h-40 rounded-lg overflow-hidden border-2 border-gray-300 bg-white p-2 flex items-center justify-center",children:o.jsx("img",{src:M,alt:"Logo preview",className:"max-w-full max-h-full object-contain"})})}),o.jsx("input",{type:"file",accept:"image/png,image/svg+xml,image/webp",onChange:ja,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Recomendado: PNG o SVG con fondo transparente, 200x200px, mx 2MB":"Recommended: PNG or SVG with transparent background, 200x200px, max 2MB"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Nombre de la Empresa":"Company Name"}),o.jsx("input",{type:"text",value:P.companyName,onChange:k=>D(z=>({...z,companyName:k.target.value})),placeholder:"PapuEnvos",className:"w-full input-style"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Se mostrar en el encabezado y en el ttulo de la pgina":"Will be displayed in the header and page title"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color Primario":"Primary Color"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.primaryColor,onChange:k=>D(z=>({...z,primaryColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.primaryColor,onChange:k=>D(z=>({...z,primaryColor:k.target.value})),placeholder:"#2563eb",className:"flex-1 input-style font-mono text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color Secundario":"Secondary Color"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.secondaryColor,onChange:k=>D(z=>({...z,secondaryColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.secondaryColor,onChange:k=>D(z=>({...z,secondaryColor:k.target.value})),placeholder:"#9333ea",className:"flex-1 input-style font-mono text-sm"})]})]})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:P.useGradient,onChange:k=>D(z=>({...z,useGradient:k.target.checked})),className:"rounded w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Usar gradiente en elementos de marca":"Use gradient in brand elements"})]})}),o.jsxs("div",{className:"border-t pt-6 mt-6",children:[o.jsx("h4",{className:"text-lg font-semibold mb-4",children:e==="es"?"Colores del Encabezado":"Header Colors"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Fondo":"Background Color"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.headerBgColor,onChange:k=>D(z=>({...z,headerBgColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.headerBgColor,onChange:k=>D(z=>({...z,headerBgColor:k.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Texto":"Text Color"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.headerTextColor,onChange:k=>D(z=>({...z,headerTextColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.headerTextColor,onChange:k=>D(z=>({...z,headerTextColor:k.target.value})),placeholder:"#1f2937",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),o.jsxs("div",{className:"border-t pt-6 mt-6",children:[o.jsx("h4",{className:"text-lg font-semibold mb-2",children:e==="es"?"Ttulos y Encabezados":"Headings and Titles"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e==="es"?"Colores para ttulos principales de pginas y secciones":"Colors for main page and section titles"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Ttulos":"Heading Color"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.headingColor,onChange:k=>D(z=>({...z,headingColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.headingColor,onChange:k=>D(z=>({...z,headingColor:k.target.value})),placeholder:"#1f2937",className:"flex-1 input-style font-mono text-sm"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Color slido cuando el gradiente est desactivado":"Solid color when gradient is disabled"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:P.useHeadingGradient,onChange:k=>D(z=>({...z,useHeadingGradient:k.target.checked})),className:"rounded w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Usar gradiente de marca en ttulos":"Use brand gradient in headings"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Aplica el gradiente de colores primario y secundario a los ttulos principales":"Applies the primary and secondary color gradient to main headings"})]})]})]}),o.jsxs("div",{className:"border-t pt-6 mt-6",children:[o.jsx("h4",{className:"text-lg font-semibold mb-4",children:e==="es"?"Colores de Botones":"Button Colors"}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo del Botn":"Button Background"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.buttonBgColor,onChange:k=>D(z=>({...z,buttonBgColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.buttonBgColor,onChange:k=>D(z=>({...z,buttonBgColor:k.target.value})),placeholder:"#2563eb",className:"flex-1 input-style font-mono text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Texto del Botn":"Button Text"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.buttonTextColor,onChange:k=>D(z=>({...z,buttonTextColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.buttonTextColor,onChange:k=>D(z=>({...z,buttonTextColor:k.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Hover del Botn":"Button Hover"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.buttonHoverBgColor,onChange:k=>D(z=>({...z,buttonHoverBgColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.buttonHoverBgColor,onChange:k=>D(z=>({...z,buttonHoverBgColor:k.target.value})),placeholder:"#1d4ed8",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),o.jsxs("div",{className:"border-t pt-6 mt-6",children:[o.jsx("h4",{className:"text-lg font-semibold mb-2",children:e==="es"?"Botones Destructivos (Eliminar)":"Destructive Buttons (Delete)"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e==="es"?"Colores para acciones peligrosas como eliminar elementos":"Colors for dangerous actions like deleting items"}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo":"Background"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.destructiveBgColor,onChange:k=>D(z=>({...z,destructiveBgColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.destructiveBgColor,onChange:k=>D(z=>({...z,destructiveBgColor:k.target.value})),placeholder:"#dc2626",className:"flex-1 input-style font-mono text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Texto":"Text"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.destructiveTextColor,onChange:k=>D(z=>({...z,destructiveTextColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.destructiveTextColor,onChange:k=>D(z=>({...z,destructiveTextColor:k.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hover"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.destructiveHoverBgColor,onChange:k=>D(z=>({...z,destructiveHoverBgColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.destructiveHoverBgColor,onChange:k=>D(z=>({...z,destructiveHoverBgColor:k.target.value})),placeholder:"#b91c1c",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),o.jsxs("div",{className:"border-t pt-6 mt-6",children:[o.jsx("h4",{className:"text-lg font-semibold mb-4",children:e==="es"?"Colores Adicionales":"Additional Colors"}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Color de Acento":"Accent Color"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.accentColor,onChange:k=>D(z=>({...z,accentColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.accentColor,onChange:k=>D(z=>({...z,accentColor:k.target.value})),placeholder:"#9333ea",className:"flex-1 input-style font-mono text-sm"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Para badges, enlaces y elementos destacados":"For badges, links and highlighted elements"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo de Pgina":"Page Background"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.pageBgColor,onChange:k=>D(z=>({...z,pageBgColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.pageBgColor,onChange:k=>D(z=>({...z,pageBgColor:k.target.value})),placeholder:"#f9fafb",className:"flex-1 input-style font-mono text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Fondo de Tarjetas":"Card Background"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:P.cardBgColor,onChange:k=>D(z=>({...z,cardBgColor:k.target.value})),className:"h-12 w-20 rounded border border-gray-300 cursor-pointer"}),o.jsx("input",{type:"text",value:P.cardBgColor,onChange:k=>D(z=>({...z,cardBgColor:k.target.value})),placeholder:"#ffffff",className:"flex-1 input-style font-mono text-sm"})]})]})]})]}),o.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:e==="es"?"Vista Previa:":"Preview:"}),o.jsx("div",{className:"mb-4 p-4 rounded-lg shadow-md",style:{backgroundColor:P.headerBgColor},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[M?o.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:o.jsx("img",{src:M,alt:"Logo preview",className:"max-w-full max-h-full object-contain"})}):o.jsx("div",{className:"w-6 h-6 rounded flex items-center justify-center",style:{background:P.useGradient?`linear-gradient(to right, ${P.primaryColor}, ${P.secondaryColor})`:P.primaryColor},children:o.jsx(wr,{className:"w-4 h-4 text-white"})}),o.jsx("span",{className:"text-lg font-bold",style:{backgroundImage:P.useGradient?`linear-gradient(to right, ${P.primaryColor}, ${P.secondaryColor})`:`linear-gradient(to right, ${P.primaryColor}, ${P.primaryColor})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:P.companyName||"PapuEnvos"})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-sm",style:{color:P.headerTextColor},children:e==="es"?"Men":"Menu"})})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex gap-4 flex-wrap",children:[o.jsx("div",{className:"px-6 py-3 rounded-lg font-semibold transition-colors",style:{backgroundColor:P.buttonBgColor,color:P.buttonTextColor},onMouseEnter:k=>k.currentTarget.style.backgroundColor=P.buttonHoverBgColor,onMouseLeave:k=>k.currentTarget.style.backgroundColor=P.buttonBgColor,children:e==="es"?"Botn Estndar":"Standard Button"}),o.jsx("div",{className:"px-6 py-3 rounded-lg font-semibold text-white",style:{background:P.useGradient?`linear-gradient(to right, ${P.primaryColor}, ${P.secondaryColor})`:P.primaryColor},children:e==="es"?"Botn con Gradiente":"Gradient Button"}),o.jsx("div",{className:"px-6 py-3 rounded-lg font-semibold transition-colors",style:{backgroundColor:P.destructiveBgColor,color:P.destructiveTextColor},onMouseEnter:k=>k.currentTarget.style.backgroundColor=P.destructiveHoverBgColor,onMouseLeave:k=>k.currentTarget.style.backgroundColor=P.destructiveBgColor,children:e==="es"?"Botn Eliminar":"Delete Button"})]}),o.jsxs("div",{className:"flex gap-4 flex-wrap items-center",children:[o.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:`${P.accentColor}20`,color:P.accentColor},children:e==="es"?"Badge de Acento":"Accent Badge"}),o.jsx("span",{className:"font-semibold bg-clip-text text-transparent",style:{backgroundImage:P.useGradient?`linear-gradient(to right, ${P.primaryColor}, ${P.secondaryColor})`:`linear-gradient(to right, ${P.primaryColor}, ${P.primaryColor})`},children:e==="es"?"Texto con Gradiente":"Gradient Text"})]})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs(xe,{onClick:_a,style:mt(u),children:[o.jsx(Gn,{className:"mr-2 h-4 w-4"}),e==="es"?"Guardar Personalizacin":"Save Customization"]})})]})]}),o.jsxs("div",{className:"border-t pt-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-xl font-semibold",children:t("settings.visual.slides")}),o.jsxs(xe,{onClick:Ca,style:mt(u),children:[o.jsx(Ts,{className:"mr-2 h-4 w-4"}),t("settings.visual.addSlide")]})]}),o.jsx("div",{className:"space-y-4",children:I?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-gray-500",children:e==="es"?"Cargando diapositivas...":"Loading slides..."})}):ie.length===0?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-gray-500",children:e==="es"?"No hay diapositivas. Agrega una para comenzar.":"No slides. Add one to get started."})}):ie.map(k=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[le===k.id&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 mb-2 bg-blue-50 p-2 rounded",children:[o.jsx(Mr,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{className:"font-medium",children:e==="es"?"Guardando...":"Saving..."})]}),Ce===k.id&&le!==k.id&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 mb-2 bg-green-50 p-2 rounded",children:[o.jsx(ac,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:e==="es"?"Guardado ":"Saved "})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("settings.visual.order")}),o.jsx("input",{type:"number",value:k.display_order??0,onChange:z=>$c(k.id,z.target.value),className:"w-full input-style",min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("settings.visual.linkUrl")}),o.jsx("input",{type:"url",value:k.link_url||"",onChange:z=>Cr(k.id,{link_url:z.target.value}),placeholder:"https://...",className:"w-full input-style"})]})]}),(k.image_url||V[k.id])&&o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:e==="es"?"Vista Previa:":"Preview:"}),o.jsx("div",{className:"relative w-full aspect-[16/9] max-w-2xl rounded-lg overflow-hidden border-2 border-gray-300 bg-gray-100",children:o.jsx("img",{src:V[k.id]||k.image_url,alt:"Preview",className:"w-full h-full object-cover"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("settings.visual.image")}),o.jsx("input",{type:"url",value:k.image_url||"",onChange:z=>Cr(k.id,{image_url:z.target.value}),placeholder:"https://... or upload below",className:"w-full input-style mb-2"}),o.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:z=>ss(k.id,z),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e==="es"?"Recomendado: 1920x1080px (16:9), mx 5MB":"Recommended: 1920x1080px (16:9), max 5MB"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.mainText")," (ES)"]}),o.jsx("input",{type:"text",value:k.title_es||"",onChange:z=>wn(k.id,"title_es",z.target.value),placeholder:"Ttulo principal en espaol",className:"w-full input-style"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.mainText")," (EN)"]}),o.jsx("input",{type:"text",value:k.title_en||"",onChange:z=>wn(k.id,"title_en",z.target.value),placeholder:"Main title in English",className:"w-full input-style"})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.secondaryText")," (ES)"]}),o.jsx("input",{type:"text",value:k.subtitle_es||"",onChange:z=>wn(k.id,"subtitle_es",z.target.value),placeholder:"Subttulo en espaol",className:"w-full input-style"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("settings.visual.secondaryText")," (EN)"]}),o.jsx("input",{type:"text",value:k.subtitle_en||"",onChange:z=>wn(k.id,"subtitle_en",z.target.value),placeholder:"Subtitle in English",className:"w-full input-style"})]})]}),o.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:`slide-active-${k.id}`,checked:k.is_active??!0,onChange:z=>Cr(k.id,{is_active:z.target.checked})}),o.jsx("label",{htmlFor:`slide-active-${k.id}`,className:"text-sm font-medium",children:t("settings.visual.active")})]}),o.jsxs(xe,{variant:"destructive",size:"sm",onClick:()=>ns(k.id),children:[o.jsx(Go,{className:"h-4 w-4 mr-2"}),e==="es"?"Eliminar":"Delete"]})]})]},k.id))})]})]})}),v==="envios"&&o.jsx(o.Fragment,{children:o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[o.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[o.jsx(Tf,{className:"mr-3",style:{color:u.primaryColor||"#2563eb"}}),e==="es"?"Zonas de Envo":"Shipping Zones"]}),o.jsx("p",{className:"text-sm text-gray-600 mb-6",children:e==="es"?"Configura el costo de envo por provincia. Las provincias con costo $0 no aparecern en el selector de envo.":"Configure shipping cost by province. Provinces with $0 cost will not appear in the shipping selector."}),De?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(Mr,{className:"h-6 w-6 animate-spin",style:{color:u.primaryColor}})}):o.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Y.map(k=>o.jsxs("div",{className:"p-4 border rounded-lg",style:{borderColor:k.is_active?u.primaryColor||"#2563eb":"#e5e7eb",backgroundColor:k.is_active?`${u.primaryColor||"#2563eb"}08`:"transparent"},children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(d2,{className:"h-4 w-4",style:{color:u.primaryColor}}),o.jsx("span",{className:"font-medium",children:k.province_name})]}),T===k.id&&o.jsx(Mr,{className:"h-4 w-4 animate-spin",style:{color:u.primaryColor}})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:k.free_shipping||!1,onChange:z=>Us(k.id,{...k,free_shipping:z.target.checked,shipping_cost:z.target.checked?0:k.shipping_cost,is_active:!0}),className:"rounded"}),o.jsx("span",{className:"text-sm",children:e==="es"?"Envo Gratis":"Free Shipping"})]}),!k.free_shipping&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:e==="es"?"Costo de envo ($)":"Shipping cost ($)"}),o.jsx("input",{type:"number",min:"0",step:"0.01",value:k.shipping_cost||0,onChange:z=>{const Se=parseFloat(z.target.value)||0;K(ze=>ze.map(Ke=>Ke.id===k.id?{...Ke,shipping_cost:Se}:Ke))},onBlur:z=>{const Se=parseFloat(z.target.value)||0;Se!==k.shipping_cost&&Us(k.id,{...k,shipping_cost:Se,is_active:Se>0})},className:"input-style w-full text-sm",placeholder:"0.00"})]}),o.jsx("div",{className:"flex items-center gap-2 text-xs",children:k.free_shipping?o.jsx("span",{className:"px-2 py-1 rounded",style:{backgroundColor:`${u.successColor||"#10b981"}20`,color:u.successColor||"#10b981"},children:e==="es"?" Gratis":" Free"}):k.shipping_cost>0?o.jsx("span",{className:"px-2 py-1 rounded",style:{backgroundColor:`${u.primaryColor||"#2563eb"}20`,color:u.primaryColor||"#2563eb"},children:e==="es"?" Activo":" Active"}):o.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-500",children:e==="es"?"No disponible":"Not available"})})]})]},k.id))})]})}),v==="remesas"&&o.jsx(o.Fragment,{children:o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[o.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[o.jsx(Jy,{className:"mr-3",style:{color:u.primaryColor||"#2563eb"}}),e==="es"?"Configuracin de Remesas":"Remittance Configuration"]}),o.jsx("p",{className:"text-sm text-gray-600 mb-6",children:e==="es"?"Configure las monedas y mtodos de pago disponibles para las remesas.":"Configure available currencies and payment methods for remittances."}),se?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(Mr,{className:"animate-spin h-6 w-6 text-gray-400"})}):o.jsx("div",{className:"space-y-6",children:te.map(k=>o.jsxs("div",{className:"border rounded-lg p-6",style:{borderColor:u.borderColor||"#e5e7eb"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:u.useGradient?`linear-gradient(to right, ${u.primaryColor||"#2563eb"}, ${u.secondaryColor||"#9333ea"})`:u.primaryColor||"#2563eb"},children:o.jsx("span",{className:"text-white font-bold text-sm",children:k.currency})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg",children:k.name}),o.jsxs("p",{className:"text-xs text-gray-500",children:[k.currency==="MN"&&(e==="es"?"Moneda Nacional":"National Currency"),k.currency==="USD"&&(e==="es"?"Dlar Estadounidense":"US Dollar"),k.currency==="MLC"&&(e==="es"?"Moneda Libremente Convertible":"Freely Convertible Currency")]})]})]}),Z===k.id&&o.jsx(Mr,{className:"animate-spin h-5 w-5 text-gray-400"})]}),o.jsxs("label",{className:"flex items-center gap-2 mb-4 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:k.enabled!==!1,onChange:z=>tn(k.id,{enabled:z.target.checked}),className:"rounded"}),o.jsx("span",{className:"text-sm font-medium",children:e==="es"?"Habilitar esta moneda":"Enable this currency"})]}),k.enabled!==!1&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-3",children:e==="es"?"Mtodos de Pago Disponibles:":"Available Payment Methods:"}),o.jsx("div",{className:"space-y-2",children:k.paymentMethods?.map(z=>o.jsxs("label",{className:"flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",style:{borderColor:u.borderColor||"#e5e7eb"},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"checkbox",checked:z.enabled!==!1,onChange:()=>bn(k.id,z.id),className:"rounded"}),o.jsx(s2,{className:"h-4 w-4 text-gray-400"}),o.jsx("span",{className:"text-sm font-medium",children:z.name})]}),z.enabled!==!1?o.jsx("span",{className:"text-xs px-2 py-1 rounded",style:{backgroundColor:`${u.successColor||"#10b981"}20`,color:u.successColor||"#10b981"},children:e==="es"?" Activo":" Active"}):o.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-500",children:e==="es"?"Desactivado":"Disabled"})]},z.id))})]}),o.jsx("div",{className:"mt-4 pt-4 border-t",style:{borderColor:u.borderColor||"#e5e7eb"},children:o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[o.jsx("span",{children:e==="es"?"Mtodos activos:":"Active methods:"}),o.jsxs("span",{className:"font-semibold",children:[k.paymentMethods?.filter(z=>z.enabled!==!1).length||0," / ",k.paymentMethods?.length||0]})]})})]},k.id))})]})}),v==="contenido"&&o.jsx(o.Fragment,{children:o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect p-8 rounded-2xl",children:[o.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[o.jsx(Xy,{className:"mr-3 text-green-600"}),t("settings.notifications.title")]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:t("settings.notifications.whatsapp")}),o.jsx("input",{type:"tel",value:j.whatsapp,onChange:k=>R({...j,whatsapp:k.target.value}),placeholder:"+1234567890",className:"w-full input-style"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Nmero de WhatsApp para soporte individual":"WhatsApp number for individual support"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:e==="es"?"Grupo de WhatsApp":"WhatsApp Group"}),o.jsx("input",{type:"text",value:j.whatsappGroup,onChange:k=>R({...j,whatsappGroup:k.target.value}),placeholder:"https://chat.whatsapp.com/xxxxx",className:"w-full input-style"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"URL del grupo de WhatsApp para notificaciones de pedidos":"WhatsApp group URL for order notifications"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:t("settings.notifications.adminEmail")}),o.jsx("input",{type:"email",value:j.adminEmail,onChange:k=>R({...j,adminEmail:k.target.value}),placeholder:"admin@example.com",className:"w-full input-style"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==="es"?"Email para recibir notificaciones de nuevos pedidos":"Email to receive new order notifications"})]})]}),o.jsx("div",{className:"mt-6 text-right",children:o.jsxs(xe,{onClick:Hi,style:mt(u),children:[o.jsx(Gn,{className:"mr-2 h-4 w-4"}),t("settings.notifications.save")]})})]})})]})]})})},_4=t=>{if(!t)return"";let e=t.replace(/\D/g,"");return e.startsWith("1")?e=e.substring(1):e.startsWith("53")||e.startsWith("0")&&(e=e.substring(1)),e},Jo=(t,e="")=>{const r=_4(t),s=encodeURIComponent(e);return`https://wa.me/${r}?text=${s}`},C4=(t,e,r="es")=>{if(!e){console.error("Admin WhatsApp number not configured"),alert("Nmero de WhatsApp del administrador no configurado. Contacte al soporte.");return}const s=t.order_items?.map((u,d)=>`${d+1}. ${u.item_name_es||u.item_name_en} (x${u.quantity})`).join(`
   `)||"Sin items",a={es:` *Nueva Orden Registrada*

 *Orden:* ${t.order_number}
 *Cliente:* ${t.user_name||t.user_profile?.full_name||"N/A"}
 *Email:* ${t.user_email||t.user_profile?.email||"N/A"}

 *Items:*
   ${s}

 *Total:* ${t.total_amount} ${t.currency?.code||t.currencies?.code||"USD"}
 *Mtodo de Pago:* ${t.payment_method||"N/A"}
 *Provincia:* ${t.shipping_zone?.province_name||t.shipping_address||"N/A"}

 *Ver en sistema:*
${window.location.origin}/dashboard?tab=orders

_Mensaje desde PapuEnvos_`,en:` *New Order Registered*

 *Order:* ${t.order_number}
 *Customer:* ${t.user_name||t.user_profile?.full_name||"N/A"}
 *Email:* ${t.user_email||t.user_profile?.email||"N/A"}

 *Items:*
   ${s}

 *Total:* ${t.total_amount} ${t.currency?.code||t.currencies?.code||"USD"}
 *Payment Method:* ${t.payment_method||"N/A"}
 *Province:* ${t.shipping_zone?.province_name||t.shipping_address||"N/A"}

 *View in system:*
${window.location.origin}/dashboard?tab=orders

_Message from PapuEnvos_`},l=Jo(e,a[r]||a.es);window.open(l,"_blank")},S4=({onNavigate:t})=>{const{t:e,language:r}=Gt(),{cart:s,updateCartQuantity:a,removeFromCart:l,clearCart:u,financialSettings:d,zelleAccounts:h,visualSettings:m,businessInfo:p,notificationSettings:g}=Ht(),{isAuthenticated:v,user:b}=rr(),[_,C]=w.useState("cart"),[j,R]=w.useState({fullName:"",phone:"",province:"",municipality:"",address:""}),[A,N]=w.useState(null),[P,D]=w.useState(null),[M,L]=w.useState(!1),[Q,re]=w.useState(!1),[B,ye]=w.useState([]),[ne,we]=w.useState([]),[H,ce]=w.useState(0),[G,ae]=w.useState("USD"),[V,oe]=w.useState([]),[ie,E]=w.useState(null),[I,X]=w.useState(null),[le,be]=w.useState(null),Ce=w.useCallback(Z=>{if(Z.displayed_price&&Z.displayed_currency_code)return Z.displayed_currency_code===G,parseFloat(Z.displayed_price);if(Z.calculated_price_usd)return parseFloat(Z.calculated_price_usd);if(Z.products){const je=parseFloat(Z.baseTotalPrice||0),Ie=parseFloat(Z.profitMargin||d.comboProfit||35)/100;return je*(1+Ie)}else{const je=parseFloat(Z.base_price||Z.basePrice||0),Ie=parseFloat(d.productProfit||40)/100;return je*(1+Ie)}},[G,d.comboProfit,d.productProfit]),ue=w.useMemo(()=>s.reduce((Z,je)=>Z+Ce(je)*je.quantity,0),[s,Ce]);w.useEffect(()=>{Ne(),Oe()},[]),w.useEffect(()=>{if(j.province){const Z=b4(j.province);we(Z),R(je=>({...je,municipality:""}))}else we([])},[j.province]),w.useEffect(()=>{j.province&&K(j.province)},[j.province,ue]),w.useEffect(()=>{Y()},[G,ue,H]);const Ne=async()=>{try{const Z=await m4();if(console.log("Shipping zones loaded:",Z),Z.success){const je=(Z.zones||[]).filter(Ie=>{const Xe=parseFloat(Ie.shipping_cost||0);return Ie.free_shipping===!0||Xe>0});ye(je),console.log("Zones set:",je.length)}}catch(Z){console.error("Error loading shipping zones:",Z)}},Oe=async()=>{try{const{data:Z,error:je}=await Fw();!je&&Z&&oe(Z)}catch(Z){console.error("Error loading currencies:",Z)}},Y=async()=>{if(G==="USD"){E(ue),X(H),be(ue+H);return}try{const{data:Z,error:je}=await Hv(ue,"USD",G),{data:Ie,error:Xe}=await Hv(H,"USD",G);!je&&!Xe?(E(Z),X(Ie),be(Z+Ie)):(E(ue),X(H),be(ue+H))}catch(Z){console.error("Error converting currency:",Z),E(ue),X(H),be(ue+H)}},K=async Z=>{try{const je=await y4(Z,ue);je.success&&ce(je.cost)}catch(je){console.error("Error calculating shipping:",je),ce(0)}},De=(ue+H).toFixed(2),_e=`PO-${Date.now()}`,T=h.find(Z=>Z.forProducts&&Z.active),pe=()=>{if(!v){he({title:e("auth.loginRequired"),description:e("auth.loginToCheckout"),variant:"destructive"});return}C("recipient")},te=()=>{C("payment")},U=Z=>{navigator.clipboard.writeText(Z),he({title:`${Z} ${e("cart.payment.copy")}!`})},se=async Z=>{const je=Z.target.files?.[0];if(je){if(!GT.includes(je.type)){he({title:r==="es"?"Tipo de archivo invlido":"Invalid file type",description:r==="es"?"Solo se permiten imgenes JPG, PNG o WebP":"Only JPG, PNG or WebP images are allowed",variant:"destructive"});return}if(je.size>HT.PAYMENT_PROOF){he({title:r==="es"?"Archivo muy grande":"File too large",description:r==="es"?"El tamao mximo es 5MB":"Maximum size is 5MB",variant:"destructive"});return}L(!0);try{const Ie=await Lw(je,"payment_proof");if(!Ie.success)throw new Error(Ie.error||"Error processing image");D(Ie.base64),N(Ie.blob),he({title:r==="es"?" Comprobante cargado":" Proof uploaded",description:r==="es"?"La imagen se ha cargado correctamente":"Image uploaded successfully"})}catch(Ie){console.error("Error uploading payment proof:",Ie),he({title:r==="es"?"Error al cargar":"Upload error",description:Ie.message,variant:"destructive"})}finally{L(!1)}}},Pe=async()=>{if(!A){he({title:r==="es"?"Comprobante requerido":"Proof required",description:r==="es"?"Por favor sube el comprobante de pago":"Please upload payment proof",variant:"destructive"});return}if(!b){he({title:r==="es"?"Error de autenticacin":"Authentication error",description:r==="es"?"Por favor inicia sesin para continuar":"Please log in to continue",variant:"destructive"});return}re(!0);try{const Z=V.find(tt=>tt.code===G);if(!Z)throw new Error("Currency not found");const je=B.find(tt=>tt.province_name===j.province);console.log("Creating order with:",{userId:b.id,currencyId:Z.id,shippingZoneId:je?.id,zelleAccountId:h?.[0]?.id});const Ie=s.map(tt=>({itemType:tt.type||"product",itemId:tt.id,nameEs:tt.name_es||tt.name,nameEn:tt.name_en||tt.name,quantity:tt.quantity,unitPrice:Ce(tt),totalPrice:Ce(tt)*tt.quantity,inventoryId:tt.inventory_id||null})),Xe={userId:b.id,orderType:"product",subtotal:ue,shippingCost:H,totalAmount:ue+H,currencyId:Z.id,recipientInfo:JSON.stringify(j),paymentMethod:"zelle",shippingZoneId:je?.id||null,zelleAccountId:null},bt=await CO(Xe,Ie);if(!bt.success)throw new Error(bt.error||"Error creating order");const dt=bt.order,Dt=await AO(A,dt.id);if(Dt.success||console.error("Error uploading payment proof:",Dt.error),p?.whatsapp){const tt={...dt,order_items:Ie.map(qe=>({item_name_es:r==="es"?qe.name:qe.nameEn||qe.name,item_name_en:qe.nameEn||qe.name,quantity:qe.quantity})),user_name:j.fullName};C4(tt,p.whatsapp,r)}he({title:r==="es"?" Pedido confirmado":" Order confirmed",description:r==="es"?`Tu pedido ${dt.order_number} ha sido creado. Recibirs una notificacin cuando sea validado.`:`Your order ${dt.order_number} has been created. You'll receive a notification when it's validated.`}),u(),t("user-panel")}catch(Z){console.error("Error confirming payment:",Z),he({title:r==="es"?"Error al procesar":"Processing error",description:Z.message||(r==="es"?"No se pudo procesar tu pedido. Por favor intenta de nuevo.":"Could not process your order. Please try again."),variant:"destructive"})}finally{re(!1)}};return _==="recipient"?o.jsx("div",{className:"container mx-auto max-w-2xl py-8 px-4",children:o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl",children:[o.jsx("h1",{className:"text-3xl font-bold mb-6",style:et(m),children:r==="es"?"Datos de Entrega":"Delivery Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-2",children:[r==="es"?"Nombre completo":"Full name"," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",placeholder:r==="es"?"Ingrese el nombre completo del destinatario":"Enter recipient full name",value:j.fullName,onChange:Z=>R({...j,fullName:Z.target.value}),className:"input-style w-full",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-2",children:[r==="es"?"Telfono":"Phone"," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"tel",placeholder:r==="es"?"Ej: +53 5 234 5678":"Ex: +53 5 234 5678",value:j.phone,onChange:Z=>R({...j,phone:Z.target.value}),className:"input-style w-full",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-2",children:[r==="es"?"Provincia":"Province"," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:j.province,onChange:Z=>R({...j,province:Z.target.value}),className:"input-style w-full",required:!0,children:[o.jsx("option",{value:"",children:r==="es"?"Seleccione una provincia":"Select a province"}),B.map(Z=>o.jsxs("option",{value:Z.province_name,children:[Z.province_name,Z.free_shipping||parseFloat(Z.shipping_cost)===0?` - ${r==="es"?"Envo Gratis":"Free Shipping"}`:` - $${parseFloat(Z.shipping_cost).toFixed(2)}`]},Z.id))]})]}),j.province&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-2",children:[r==="es"?"Municipio":"Municipality"," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:j.municipality,onChange:Z=>R({...j,municipality:Z.target.value}),className:"input-style w-full",required:!0,children:[o.jsx("option",{value:"",children:r==="es"?"Seleccione un municipio":"Select a municipality"}),ne.map(Z=>o.jsx("option",{value:Z,children:Z},Z))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-2",children:[r==="es"?"Direccin completa":"Full address"," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{placeholder:r==="es"?"Calle, nmero, entre calles, edificio, apartamento, etc.":"Street, number, between streets, building, apartment, etc.",value:j.address,onChange:Z=>R({...j,address:Z.target.value}),className:"input-style w-full min-h-[100px]",required:!0})]}),j.province&&o.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[o.jsx("p",{className:"text-sm font-medium mb-1",children:r==="es"?"Costo de envo":"Shipping cost"}),o.jsx("p",{className:"text-lg font-bold",style:{color:m.primaryColor},children:H===0?r==="es"?"Envo Gratis!":"Free Shipping!":`$${H.toFixed(2)}`})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx(xe,{variant:"outline",onClick:()=>C("cart"),className:"flex-1",children:r==="es"?"Atrs":"Back"}),o.jsx(xe,{onClick:te,style:mt(m),className:"flex-1",disabled:!j.fullName||!j.phone||!j.province||!j.municipality||!j.address,children:r==="es"?"Continuar al Pago":"Continue to Payment"})]})]})}):_==="payment"?o.jsx("div",{className:"container mx-auto max-w-2xl py-8 px-4",children:o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"glass-effect p-8 rounded-2xl",children:[o.jsx("h1",{className:"text-3xl font-bold mb-6",style:et(m),children:e("cart.payment.title")}),o.jsxs("div",{className:"p-4 rounded-lg mb-6",style:FO(m,"info"),children:[o.jsx("h2",{className:"font-semibold text-lg mb-2",children:e("cart.payment.instructionsTitle")}),o.jsx("p",{className:"text-sm",children:e("cart.payment.instructions")})]}),T?o.jsxs("div",{className:"mb-6 space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:e("cart.payment.accountInfo")}),o.jsxs("p",{children:[o.jsx("strong",{children:"Email:"})," ",T.email]}),o.jsxs("p",{children:[o.jsxs("strong",{children:[e("settings.zelle.name"),":"]})," ",T.name]})]}):o.jsx("p",{className:"text-red-500",children:"No Zelle account available."}),o.jsxs("div",{className:"mb-6 space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("p",{children:[e("cart.payment.purchaseId"),": ",o.jsx("strong",{className:"font-mono",children:_e})]}),o.jsxs(xe,{onClick:()=>U(_e),variant:"outline",children:[o.jsx(ev,{className:"mr-2 h-4 w-4"}),e("cart.payment.copy")]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("p",{children:[e("cart.payment.amount"),": ",o.jsxs("strong",{className:"text-2xl",style:{color:m.successColor||"#10b981"},children:["$",De]})]}),o.jsxs(xe,{onClick:()=>U(De),variant:"outline",children:[o.jsx(ev,{className:"mr-2 h-4 w-4"}),e("cart.payment.copy")]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{className:"block text-sm font-medium mb-2",children:[e("cart.payment.uploadProof")," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),P?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2",style:{borderColor:m.successColor||"#10b981"},children:[o.jsx("img",{src:P,alt:"Payment proof",className:"w-full h-64 object-contain bg-gray-50"}),o.jsx("div",{className:"absolute top-2 right-2 p-2 rounded-full",style:{backgroundColor:m.successColor||"#10b981"},children:o.jsx(ks,{className:"h-5 w-5 text-white"})})]}),o.jsxs(xe,{variant:"outline",onClick:()=>{N(null),D(null)},className:"w-full",children:[o.jsx(_r,{className:"mr-2 h-4 w-4"}),r==="es"?"Cambiar imagen":"Change image"]})]}):o.jsxs("label",{className:"cursor-pointer",children:[o.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",onChange:se,className:"hidden",disabled:M}),o.jsx("div",{className:"flex justify-center px-6 py-8 border-2 border-dashed rounded-lg hover:border-gray-400 transition-colors",style:{borderColor:m.borderColor||"#d1d5db"},children:o.jsxs("div",{className:"space-y-2 text-center",children:[o.jsx(mb,{className:"mx-auto h-12 w-12",style:{color:M?m.primaryColor:"#9ca3af"}}),o.jsx("div",{className:"text-sm",children:M?o.jsx("p",{className:"font-medium",style:{color:m.primaryColor},children:r==="es"?"Procesando imagen...":"Processing image..."}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"font-medium",style:{color:m.primaryColor},children:r==="es"?"Haz clic para subir":"Click to upload"}),o.jsx("p",{className:"text-gray-500",children:r==="es"?"JPG, PNG o WebP (mx. 5MB)":"JPG, PNG or WebP (max 5MB)"})]})})]})})]})]}),p?.whatsapp&&o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[o.jsx("p",{className:"text-sm text-gray-700 mb-3",children:r==="es"?"Tienes dudas sobre el pago? Contctanos por WhatsApp":"Questions about payment? Contact us via WhatsApp"}),o.jsxs(xe,{variant:"outline",className:"w-full border-green-600 text-green-600 hover:bg-green-50",onClick:()=>{const Z=r==="es"?`Hola! Tengo una consulta sobre mi pago. Total: ${V.find(je=>je.code===G)?.symbol||"$"}${le!==null?le.toFixed(2):(ue+H).toFixed(2)} ${G}`:`Hello! I have a question about my payment. Total: ${V.find(je=>je.code===G)?.symbol||"$"}${le!==null?le.toFixed(2):(ue+H).toFixed(2)} ${G}`;window.open(Jo(p.whatsapp,Z),"_blank")},children:[o.jsx(Uo,{className:"mr-2 h-5 w-5"}),r==="es"?"Contactar por WhatsApp":"Contact via WhatsApp"]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(xe,{variant:"outline",onClick:()=>C("recipient"),className:"flex-1",disabled:Q,children:r==="es"?"Atrs":"Back"}),o.jsx(xe,{onClick:Pe,className:"flex-1",size:"lg",style:mt(m),disabled:!A||M||Q,children:Q?r==="es"?"Procesando...":"Processing...":e("cart.payment.confirm")})]})]})}):o.jsx("div",{className:"min-h-screen py-8 px-4",children:o.jsxs("div",{className:"container mx-auto",children:[o.jsx(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:o.jsx("h1",{className:"text-4xl font-bold mb-4",style:et(m),children:e("cart.title")})}),s.length===0?o.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[o.jsx(ra,{className:"w-24 h-24 text-gray-300 mx-auto mb-6"}),o.jsx("h2",{className:"text-2xl font-semibold text-gray-600 mb-4",children:e("cart.empty")}),o.jsx(xe,{onClick:()=>t("products"),style:mt(m),children:e("cart.browse")})]}):o.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-2 space-y-4",children:s.map(Z=>{const je=Ce(Z),Ie=je*Z.quantity,Xe=r==="es"?Z.name_es||Z.name||"Producto":Z.name_en||Z.name||"Product",bt=Z.image_url||Z.image||"https://images.unsplash.com/photo-1635865165118-917ed9e20936",dt=!!Z.products,Dt=G==="USD"?1:ie!==null?ie/ue:1,tt=je*Dt,qe=Ie*Dt,nr=V.find(Fr=>Fr.code===G)?.symbol||"$";return o.jsx(me.div,{layout:!0,className:"glass-effect p-4 rounded-2xl",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("img",{className:"w-24 h-24 rounded-lg object-cover flex-shrink-0",alt:Xe,src:bt}),o.jsxs("div",{className:"flex-grow min-w-0",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-1",children:[Xe,dt&&o.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"COMBO"})]}),o.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[r==="es"?"Precio unitario: ":"Unit price: ",o.jsxs("span",{className:"font-semibold",style:{color:m.accentColor||"#9333ea"},children:[nr,tt.toFixed(2)," ",G]})]}),o.jsxs("p",{className:"text-base font-bold text-gray-900",children:["Subtotal: ",nr,qe.toFixed(2)," ",G]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsx(xe,{size:"icon",variant:"outline",onClick:()=>a(Z.id,Z.quantity-1),className:"h-8 w-8",children:o.jsx(h2,{className:"h-4 w-4"})}),o.jsx("span",{className:"w-8 text-center font-semibold",children:Z.quantity}),o.jsx(xe,{size:"icon",variant:"outline",onClick:()=>a(Z.id,Z.quantity+1),className:"h-8 w-8",children:o.jsx(Ts,{className:"h-4 w-4"})})]}),o.jsx(xe,{size:"icon",variant:"ghost",onClick:()=>l(Z.id),className:"flex-shrink-0",children:o.jsx(_r,{className:"h-5 w-5 text-red-500"})})]})},Z.id)})}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-2xl space-y-6",children:[o.jsx("h2",{className:"text-2xl font-semibold",children:e("cart.summary")}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:r==="es"?"Moneda":"Currency"}),o.jsx("select",{value:G,onChange:Z=>ae(Z.target.value),className:"input-style w-full",children:V.length>0?V.map(Z=>o.jsxs("option",{value:Z.code,children:[Z.code," - ",r==="es"?Z.name_es:Z.name_en]},Z.code)):o.jsxs(o.Fragment,{children:[o.jsx("option",{value:"USD",children:"USD - Dlar Estadounidense"}),o.jsx("option",{value:"EUR",children:"EUR - Euro"}),o.jsx("option",{value:"CUP",children:"CUP - Peso Cubano"})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:e("cart.subtotal")}),o.jsxs("span",{className:"font-semibold",children:[V.find(Z=>Z.code===G)?.symbol||"$",ie!==null?ie.toFixed(2):ue.toFixed(2)," ",G]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:e("cart.shipping")}),o.jsx("span",{className:"text-sm font-semibold",children:(I!==null?I:H)===0?r==="es"?"Gratis":"Free":`${V.find(Z=>Z.code===G)?.symbol||"$"}${(I!==null?I:H).toFixed(2)} ${G}`})]}),o.jsx("div",{className:"border-t my-2"}),o.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[o.jsx("span",{children:e("cart.total")}),o.jsxs("span",{style:{color:m.primaryColor||"#2563eb"},children:[V.find(Z=>Z.code===G)?.symbol||"$",le!==null?le.toFixed(2):(ue+H).toFixed(2)," ",G]})]})]}),o.jsx(xe,{onClick:pe,className:"w-full",size:"lg",style:mt(m),children:e("cart.checkout")})]})})]})]})})},N4=({onNavigate:t})=>{const{t:e}=Gt(),{login:r,signInWithGoogle:s,userRole:a}=rr(),{visualSettings:l}=Ht(),[u,d]=w.useState(""),[h,m]=w.useState(""),p=async()=>{try{console.log("Attempting login with:",{email:u});const v=await r(u,h);console.log("Login attempt result:",v),v&&(console.log("Login successful"),he({title:"Login Successful",description:"Welcome back!",variant:"default"}),setTimeout(()=>{t(a==="admin"||a==="super_admin"?"dashboard":"products")},100))}catch(v){console.error("Login error:",v),he({title:"Login Error",description:v.message||"An unexpected error occurred",variant:"destructive"})}},g=async()=>{try{he({title:"Connecting to Google...",description:"Please wait while we redirect you.",variant:"default"}),await s();const v=he({title:"Redirecting...",description:"Please complete the sign in process with Google.",variant:"default"});setTimeout(()=>{v.dismiss()},2e3)}catch(v){console.error("Google login error:",v),he({title:"Login Error",description:v.message||"Failed to sign in with Google",variant:"destructive"})}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs(me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-2xl",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold",style:et(l),children:e("auth.loginTitle")}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:e("auth.loginSubtitle")})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(u2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"email",autoComplete:"email",required:!0,value:u,onChange:v=>d(v.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("auth.email")})]}),o.jsxs("div",{className:"relative",children:[o.jsx(l2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"password",autoComplete:"current-password",required:!0,value:h,onChange:v=>m(v.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("auth.password")})]}),o.jsx("div",{children:o.jsxs(xe,{onClick:p,className:"w-full group relative flex justify-center py-3 px-4",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.buttonBgColor||"#2563eb",color:l.buttonTextColor||"#ffffff",border:"none"},children:[o.jsx(hb,{className:"w-5 h-5 mr-2"}),e("auth.login")]})}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-300"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 bg-white text-gray-500",children:e("auth.or")})})]}),o.jsx("div",{children:o.jsxs(xe,{onClick:g,variant:"outline",className:"w-full group relative flex justify-center py-3 px-4",style:{borderColor:l.primaryColor||"#2563eb",color:l.primaryColor||"#2563eb"},children:[o.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:o.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 126 21.2 172.9 56.9L368.7 128C338.8 102.3 298.2 88 248 88c-86.5 0-157.2 70.2-157.2 156.8s70.7 156.8 157.2 156.8c99.9 0 133-67.8 138.3-103.3H248v-67.3h239.1c1.3 12.2 2.2 24.2 2.2 36.8z"})}),e("auth.loginWithGoogle")]})}),o.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Admin: admin@test.com / test123 ",o.jsx("br",{}),"User: user@test.com / test123"]})]})]})})},k4=({onNavigate:t})=>{const{user:e,userRole:r}=rr(),{t:s,language:a}=Gt(),{visualSettings:l,businessInfo:u}=Ht(),[d,h]=w.useState([]),[m,p]=w.useState(!0),[g,v]=w.useState(null),[b,_]=w.useState(!1),[C,j]=w.useState(!1),[R,A]=w.useState(null),[N,P]=w.useState(0),[D,M]=w.useState(""),[L,Q]=w.useState(!1),[re,B]=w.useState(!1),[ye,ne]=w.useState(!1),[we,H]=w.useState(""),[ce,G]=w.useState(null);w.useEffect(()=>{if(!e){t("login");return}V(),r!=="admin"&&r!=="super_admin"&&ae()},[e,r]);const ae=async()=>{if(e?.id)try{const Y=await aA(e.id);Y.data&&(A(Y.data),P(Y.data.rating),M(Y.data.comment||""))}catch(Y){console.error("Error loading testimonial:",Y)}},V=async()=>{if(e?.id){console.log("[UserPanel] Loading orders for role:",r),p(!0);try{if(r==="admin"||r==="super_admin"){console.log("[UserPanel] Loading pending orders for admin");const Y=await Ow({payment_status:"pending"});console.log("[UserPanel] Admin orders result:",Y),Y.success&&h(Y.orders)}else{console.log("[UserPanel] Loading user orders for regular user");const Y=await NO(e.id);console.log("[UserPanel] User orders result:",Y),Y.success&&h(Y.orders)}}catch(Y){console.error("Error loading orders:",Y)}finally{p(!1)}}},oe=async Y=>{j(!0),_(!0);try{const K=await kO(Y);console.log("[UserPanel] Order details loaded:",K),K.success&&(v(K.order),console.log("[UserPanel] Selected order payment_status:",K.order?.payment_status),console.log("[UserPanel] Payment proof URL:",K.order?.payment_proof_url),console.log("[UserPanel] Current userRole:",r))}catch(K){console.error("Error loading order details:",K)}finally{j(!1)}},ie=async Y=>{G(Y),B(!0)},E=async()=>{j(!0),B(!1);try{(await PO(ce,e.id)).success&&(await V(),_(!1),v(null))}catch(Y){console.error("Error validating payment:",Y)}finally{j(!1),G(null)}},I=async Y=>{G(Y),H(""),ne(!0)},X=async()=>{if(we.trim()){j(!0),ne(!1);try{(await TO(ce,e.id,we)).success&&(await V(),_(!1),v(null))}catch(Y){console.error("Error rejecting payment:",Y)}finally{j(!1),G(null),H("")}}},le=async()=>{if(N===0){alert(a==="es"?"Por favor selecciona una calificacin":"Please select a rating");return}Q(!0);try{const Y={user_id:e.id,rating:N,comment:D.trim()};let K;R?K=await sA(R.id,{rating:N,comment:D.trim()}):K=await nA(Y),K.data&&(A(K.data),alert(a==="es"?"Gracias por tu testimonio! Ser revisado por nuestro equipo.":"Thank you for your testimonial! It will be reviewed by our team."))}catch(Y){console.error("Error saving testimonial:",Y),alert(a==="es"?"Error al guardar el testimonio":"Error saving testimonial")}finally{Q(!1)}},be=(Y,K)=>K==="validated"||Y==="completed"?o.jsx(ks,{className:"h-5 w-5",style:{color:l.successColor||"#10b981"}}):K==="rejected"||Y==="cancelled"?o.jsx(Es,{className:"h-5 w-5",style:{color:l.errorColor||"#ef4444"}}):K==="pending"||Y==="pending"?o.jsx(Li,{className:"h-5 w-5",style:{color:l.warningColor||"#f59e0b"}}):o.jsx(Li,{className:"h-5 w-5",style:{color:l.textSecondaryColor||"#6b7280"}}),Ce=(Y,K)=>K==="validated"?a==="es"?"Validado":"Validated":K==="rejected"?a==="es"?"Rechazado":"Rejected":K==="pending"?a==="es"?"Pendiente":"Pending":Y==="processing"?a==="es"?"En proceso":"Processing":Y==="completed"?a==="es"?"Completado":"Completed":a==="es"?"Pendiente":"Pending",ue=Y=>{switch(Y){case"product":return o.jsx(Jr,{className:"h-4 w-4"});case"combo":return o.jsx(wr,{className:"h-4 w-4"});case"remittance":return o.jsx(Qr,{className:"h-4 w-4"});default:return o.jsx(Jr,{className:"h-4 w-4"})}},Ne=Y=>{switch(Y){case"product":return a==="es"?"Producto":"Product";case"combo":return"Combo";case"remittance":return a==="es"?"Remesa":"Remittance";default:return Y}};if(!e)return null;const Oe=e?.profile?.full_name||e?.user_metadata?.full_name||e?.user_metadata?.name||"Usuario";return o.jsxs("div",{className:"min-h-screen py-8 px-4",children:[o.jsxs("div",{className:"container mx-auto max-w-6xl",children:[o.jsxs(me.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",style:et(l),children:s("userPanel.title")}),o.jsx("p",{className:"text-xl",style:Be(l,"secondary"),children:a==="es"?`Bienvenido, ${Oe}`:`Welcome, ${Oe}`})]}),u?.whatsapp&&o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:o.jsxs("div",{className:"p-4 rounded-xl border flex items-center justify-between bg-white",style:{borderColor:"#10b981"},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:o.jsx(Uo,{className:"h-5 w-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",style:Be(l,"primary"),children:a==="es"?"Necesitas ayuda?":"Need help?"}),o.jsx("p",{className:"text-sm",style:Be(l,"muted"),children:a==="es"?"Ante dudas contactar a soporte va WhatsApp":"Contact support via WhatsApp for any questions"})]})]}),o.jsxs(xe,{onClick:()=>{const Y=a==="es"?`Hola! Soy ${Oe}. Necesito ayuda con mi cuenta.`:`Hello! I'm ${Oe}. I need help with my account.`;window.open(Jo(u.whatsapp,Y),"_blank")},className:"bg-green-600 hover:bg-green-700 text-white",children:[o.jsx(Uo,{className:"h-4 w-4 mr-2"}),a==="es"?"Contactar":"Contact"]})]})}),o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-8 rounded-2xl bg-white shadow-lg border border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-2xl font-semibold flex items-center",style:Be(l,"primary"),children:[o.jsx("div",{className:"p-2 rounded-lg mr-3",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.primaryColor||"#2563eb"},children:o.jsx(wr,{className:"h-5 w-5 text-white"})}),r==="admin"||r==="super_admin"?a==="es"?"Pedidos Pendientes":"Pending Orders":s("userPanel.myOrders")]}),r!=="admin"&&r!=="super_admin"&&u?.whatsapp&&o.jsxs(xe,{size:"default",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{const Y=a==="es"?`Hola! Soy ${Oe}. Necesito ayuda con mis pedidos.`:`Hello! I'm ${Oe}. I need help with my orders.`;window.open(Jo(u.whatsapp,Y),"_blank","noopener,noreferrer")},title:a==="es"?"Contactar por WhatsApp":"Contact via WhatsApp",children:[o.jsx(Uo,{className:"h-4 w-4 mr-2"}),a==="es"?"Contactar":"Contact"]})]}),m?o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx(Mo,{className:"h-8 w-8 animate-spin",style:{color:l.primaryColor}})}):d.length>0?o.jsx("div",{className:"space-y-4",children:d.map(Y=>o.jsx(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 border rounded-lg hover:shadow-md transition-all cursor-pointer",style:{borderColor:l.borderColor||"#e5e7eb"},onClick:()=>oe(Y.id),children:o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[o.jsxs("div",{className:"flex-1 min-w-[200px]",children:[o.jsx("p",{className:"font-semibold mb-1",style:Be(l,"primary"),children:Y.order_number}),(r==="admin"||r==="super_admin")&&Y.user_profiles&&o.jsxs("p",{className:"text-sm font-medium mb-1",style:Be(l,"secondary"),children:[" ",Y.user_profiles.full_name||Y.user_profiles.email]}),o.jsx("p",{className:"text-sm",style:Be(l,"muted"),children:new Date(Y.created_at).toLocaleDateString(a==="es"?"es-ES":"en-US",{year:"numeric",month:"long",day:"numeric"})}),Y.shipping_zones&&o.jsxs("p",{className:"text-xs mt-1",style:Be(l,"muted"),children:[" ",Y.shipping_zones.province_name]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-lg font-bold mb-1",style:{color:l.primaryColor},children:["$",parseFloat(Y.total_amount).toFixed(2)," ",Y.currencies?.code||"USD"]}),o.jsxs("p",{className:"text-xs",style:Be(l,"muted"),children:[Y.order_items?.length||0," ",a==="es"?"artculos":"items"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"px-3 py-1.5 rounded-full flex items-center gap-2 text-sm font-medium",style:of(Y.payment_status||Y.status,l),children:[be(Y.status,Y.payment_status),o.jsx("span",{children:Ce(Y.status,Y.payment_status)})]}),r!=="admin"&&r!=="super_admin"&&u?.whatsapp&&(Y.payment_status==="pending"||Y.status==="processing"||Y.status==="pending")&&o.jsx(xe,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:K=>{K.stopPropagation();const De=Ce(Y.status,Y.payment_status),_e=a==="es"?`Hola! Soy ${Oe}. Tengo una consulta sobre mi pedido ${Y.order_number} (Estado: ${De}, Total: $${parseFloat(Y.total_amount).toFixed(2)} ${Y.currencies?.code||"USD"}).`:`Hello! I'm ${Oe}. I have a question about my order ${Y.order_number} (Status: ${De}, Total: $${parseFloat(Y.total_amount).toFixed(2)} ${Y.currencies?.code||"USD"}).`;window.open(Jo(u.whatsapp,_e),"_blank","noopener,noreferrer")},title:a==="es"?"Consultar sobre este pedido":"Ask about this order",children:o.jsx(Uo,{className:"h-3 w-3"})}),o.jsx(xe,{size:"sm",variant:"ghost",children:o.jsx(ta,{className:"h-4 w-4"})})]})]})},Y.id))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(wr,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),o.jsx("p",{className:"text-lg mb-2",style:Be(l,"secondary"),children:s("userPanel.noOrders")}),o.jsx("p",{className:"text-sm",style:Be(l,"muted"),children:a==="es"?"Comienza a comprar para ver tus pedidos aqu":"Start shopping to see your orders here"})]})]}),r!=="admin"&&r!=="super_admin"&&o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"p-8 rounded-2xl mt-6 bg-white shadow-lg border border-gray-200",children:[o.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",style:Be(l,"primary"),children:[o.jsx("div",{className:"p-2 rounded-lg mr-3",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.primaryColor||"#2563eb"},children:o.jsx(Ho,{className:"h-5 w-5 text-white"})}),a==="es"?"Califica tu Experiencia":"Rate Your Experience"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:Be(l,"primary"),children:a==="es"?"Calificacin":"Rating"}),o.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(Y=>o.jsx("button",{type:"button",onClick:()=>P(Y),className:"transition-transform hover:scale-110",children:o.jsx(Ho,{className:"h-8 w-8",fill:Y<=N?l.primaryColor||"#2563eb":"none",stroke:Y<=N?l.primaryColor||"#2563eb":"#d1d5db"})},Y))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:Be(l,"primary"),children:a==="es"?"Comentario (opcional)":"Comment (optional)"}),o.jsx("textarea",{value:D,onChange:Y=>M(Y.target.value),placeholder:a==="es"?"Comparte tu experiencia con nosotros...":"Share your experience with us...",rows:4,className:"w-full px-4 py-2 rounded-lg border resize-none",style:{borderColor:l.borderColor||"#e5e7eb",backgroundColor:l.inputBgColor||"#ffffff",color:l.textPrimaryColor||"#1f2937"}})]}),R&&o.jsx("div",{className:"p-3 rounded-lg text-sm",style:{backgroundColor:R.is_visible?`${l.successColor||"#10b981"}20`:`${l.warningColor||"#f59e0b"}20`,color:R.is_visible?l.successColor||"#10b981":l.warningColor||"#f59e0b"},children:R.is_visible?a==="es"?" Tu testimonio ha sido publicado":" Your testimonial has been published":a==="es"?" Tu testimonio est pendiente de aprobacin":" Your testimonial is pending approval"}),o.jsx(xe,{onClick:le,disabled:L||N===0,className:"w-full",style:{background:l.useGradient?`linear-gradient(to right, ${l.primaryColor||"#2563eb"}, ${l.secondaryColor||"#9333ea"})`:l.primaryColor||"#2563eb",color:"#ffffff"},children:L?o.jsxs(o.Fragment,{children:[o.jsx(Mo,{className:"h-4 w-4 mr-2 animate-spin"}),a==="es"?"Guardando...":"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Ho,{className:"h-4 w-4 mr-2"}),R?a==="es"?"Actualizar Testimonio":"Update Testimonial":a==="es"?"Enviar Testimonio":"Submit Testimonial"]})})]})]})]}),o.jsx(pn,{children:b&&o.jsxs(o.Fragment,{children:[o.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40",onClick:()=>{_(!1),v(null)}}),o.jsx(me.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:Y=>Y.stopPropagation(),children:o.jsxs("div",{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto p-6 rounded-2xl shadow-2xl bg-white border border-gray-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",style:et(l),children:a==="es"?"Detalles del Pedido":"Order Details"}),g&&o.jsx("p",{className:"text-sm",style:Be(l,"muted"),children:g.order_number})]}),o.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>{_(!1),v(null)},children:o.jsx(_r,{className:"h-5 w-5"})})]}),C?o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx(Mo,{className:"h-8 w-8 animate-spin",style:{color:l.primaryColor}})}):g?o.jsxs("div",{className:"space-y-6",children:[(r==="admin"||r==="super_admin")&&g.user_profiles&&o.jsxs("div",{className:"p-4 rounded-lg border",style:{borderColor:l.borderColor||"#e5e7eb",backgroundColor:`${l.primaryColor}10`},children:[o.jsx("h4",{className:"text-sm font-semibold mb-2",style:Be(l,"primary"),children:a==="es"?"Datos del Cliente":"Customer Information"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",style:Be(l,"muted"),children:a==="es"?"Nombre:":"Name:"})," ",o.jsx("span",{style:Be(l,"primary"),children:g.user_profiles.full_name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",style:Be(l,"muted"),children:"Email:"})," ",o.jsx("span",{style:Be(l,"primary"),children:g.user_profiles.email||"N/A"})]}),g.shipping_phone&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",style:Be(l,"muted"),children:a==="es"?"Telfono:":"Phone:"})," ",o.jsx("span",{style:Be(l,"primary"),children:g.shipping_phone})]}),g.shipping_address&&o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"font-medium",style:Be(l,"muted"),children:a==="es"?"Direccin:":"Address:"})," ",o.jsx("span",{style:Be(l,"primary"),children:g.shipping_address})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium mb-1",style:Be(l,"muted"),children:a==="es"?"Fecha":"Date"}),o.jsx("p",{className:"text-sm",style:Be(l,"primary"),children:new Date(g.created_at).toLocaleDateString(a==="es"?"es-ES":"en-US")})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium mb-1",style:Be(l,"muted"),children:a==="es"?"Estado":"Status"}),o.jsx("div",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium",style:of(g.payment_status||g.status,l),children:Ce(g.status,g.payment_status)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium mb-1",style:Be(l,"muted"),children:a==="es"?"Provincia":"Province"}),o.jsx("p",{className:"text-sm",style:Be(l,"primary"),children:g.shipping_zones?.province_name||"N/A"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium mb-1",style:Be(l,"muted"),children:"Total"}),o.jsxs("p",{className:"text-lg font-bold",style:{color:l.primaryColor},children:["$",parseFloat(g.total_amount).toFixed(2)," ",g.currencies?.code||"USD"]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold mb-3",style:Be(l,"primary"),children:a==="es"?"Artculos":"Items"}),o.jsx("div",{className:"space-y-3",children:g.order_items?.map((Y,K)=>o.jsx("div",{className:"p-3 rounded-lg border",style:{borderColor:l.borderColor||"#e5e7eb"},children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 flex-shrink-0 overflow-hidden",children:o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:ue(Y.item_type)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium mb-1",style:Be(l,"primary"),children:a==="es"?Y.item_name_es:Y.item_name_en}),o.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",style:Be(l,"muted"),children:[o.jsx("span",{className:"px-2 py-0.5 rounded",style:Mw(l,"info"),children:Ne(Y.item_type)}),o.jsxs("span",{children:[a==="es"?"Cantidad":"Qty",": ",Y.quantity]})]}),o.jsxs("p",{className:"text-xs",style:Be(l,"muted"),children:["$",parseFloat(Y.unit_price).toFixed(2),"  ",Y.quantity]})]}),o.jsx("div",{className:"text-right flex-shrink-0",children:o.jsxs("p",{className:"text-base font-bold",style:Be(l,"primary"),children:["$",parseFloat(Y.total_price).toFixed(2)]})})]})},K))})]}),o.jsx("div",{className:"border-t pt-4",style:{borderColor:l.borderColor||"#e5e7eb"},children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{style:Be(l,"secondary"),children:"Subtotal"}),o.jsxs("span",{className:"font-semibold",style:Be(l,"primary"),children:["$",parseFloat(g.subtotal).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{style:Be(l,"secondary"),children:a==="es"?"Envo":"Shipping"}),o.jsx("span",{className:"font-semibold",style:Be(l,"primary"),children:parseFloat(g.shipping_cost)===0?a==="es"?"Gratis":"Free":`$${parseFloat(g.shipping_cost).toFixed(2)}`})]}),o.jsx("div",{className:"border-t pt-2 mt-2",style:{borderColor:l.borderColor||"#e5e7eb"},children:o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-lg font-bold",style:Be(l,"primary"),children:"Total"}),o.jsxs("span",{className:"text-xl font-bold",style:{color:l.primaryColor},children:["$",parseFloat(g.total_amount).toFixed(2)," ",g.currencies?.code||"USD"]})]})})]})})]}),o.jsx("div",{children:g.payment_proof_url?o.jsxs("div",{className:"sticky top-4",children:[o.jsx("h4",{className:"text-lg font-semibold mb-3",style:Be(l,"primary"),children:a==="es"?"Comprobante de Pago":"Payment Proof"}),o.jsx("div",{className:"rounded-lg border overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",style:{borderColor:l.borderColor||"#e5e7eb"},onClick:()=>window.open(g.payment_proof_url,"_blank"),children:o.jsx("img",{src:g.payment_proof_url,alt:"Payment proof",className:"w-full h-auto object-contain max-h-[600px] bg-gray-50",onError:Y=>{console.error("[UserPanel] Error loading payment proof image:",g.payment_proof_url),Y.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><rect fill="%23f3f4f6" width="400" height="300"/><text x="50%" y="50%" font-family="Arial" font-size="16" fill="%236b7280" text-anchor="middle">Error al cargar imagen</text></svg>'}})}),o.jsx("p",{className:"text-xs text-center mt-2",style:Be(l,"muted"),children:a==="es"?"Click para ver en tamao completo":"Click to view full size"})]}):o.jsxs("div",{className:"sticky top-4 p-6 rounded-lg border-2 border-dashed text-center",style:{borderColor:l.borderColor||"#e5e7eb"},children:[o.jsx(cb,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),o.jsx("p",{className:"text-sm",style:Be(l,"muted"),children:a==="es"?"Sin comprobante de pago":"No payment proof"})]})})]}),g.rejection_reason&&o.jsxs("div",{className:"p-4 rounded-lg",style:of("rejected",l),children:[o.jsx("p",{className:"font-medium mb-1",children:a==="es"?"Motivo de Rechazo":"Rejection Reason"}),o.jsx("p",{className:"text-sm",children:g.rejection_reason})]}),(r==="admin"||r==="super_admin")&&g.payment_status==="pending"&&o.jsxs("div",{className:"flex gap-3 pt-4 border-t",style:{borderColor:l.borderColor||"#e5e7eb"},children:[o.jsxs(xe,{onClick:()=>ie(g.id),disabled:C,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[o.jsx(ks,{className:"h-4 w-4 mr-2"}),a==="es"?"Validar Pago":"Validate Payment"]}),o.jsxs(xe,{onClick:()=>I(g.id),disabled:C,variant:"destructive",className:"flex-1",children:[o.jsx(Es,{className:"h-4 w-4 mr-2"}),a==="es"?"Rechazar":"Reject"]})]})]}):null]})})]})}),o.jsx(pn,{children:re&&o.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>B(!1),children:o.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:Y=>Y.stopPropagation(),className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ks,{className:"h-8 w-8 text-green-600"})}),o.jsx("h3",{className:"text-2xl font-bold mb-2",style:Be(l,"primary"),children:a==="es"?"Validar Pago?":"Validate Payment?"}),o.jsx("p",{className:"text-gray-600",children:a==="es"?"Esto aprobar el pedido y actualizar el inventario":"This will approve the order and update inventory"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(xe,{onClick:()=>B(!1),variant:"outline",className:"flex-1",disabled:C,children:a==="es"?"Cancelar":"Cancel"}),o.jsxs(xe,{onClick:E,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",disabled:C,children:[C?o.jsx(Mo,{className:"h-4 w-4 animate-spin mr-2"}):o.jsx(ks,{className:"h-4 w-4 mr-2"}),a==="es"?"Confirmar":"Confirm"]})]})]})})}),o.jsx(pn,{children:ye&&o.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>ne(!1),children:o.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:Y=>Y.stopPropagation(),className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Es,{className:"h-8 w-8 text-red-600"})}),o.jsx("h3",{className:"text-2xl font-bold mb-2",style:Be(l,"primary"),children:a==="es"?"Rechazar Pago":"Reject Payment"}),o.jsx("p",{className:"text-gray-600 mb-4",children:a==="es"?"Por favor indica el motivo del rechazo":"Please indicate the reason for rejection"})]}),o.jsx("textarea",{value:we,onChange:Y=>H(Y.target.value),placeholder:a==="es"?"Motivo del rechazo...":"Rejection reason...",className:"w-full p-3 border rounded-lg mb-4 min-h-[100px] focus:ring-2 focus:ring-red-500 focus:border-transparent",style:{borderColor:l.borderColor||"#e5e7eb"}}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(xe,{onClick:()=>ne(!1),variant:"outline",className:"flex-1",disabled:C,children:a==="es"?"Cancelar":"Cancel"}),o.jsxs(xe,{onClick:X,variant:"destructive",className:"flex-1",disabled:C||!we.trim(),children:[C?o.jsx(Mo,{className:"h-4 w-4 animate-spin mr-2"}):o.jsx(Es,{className:"h-4 w-4 mr-2"}),a==="es"?"Rechazar":"Reject"]})]})]})})})]})},$o=["jtheoden@gmail.com","jtheoden@googlemail.com"],E4=()=>{const{t}=Gt(),{user:e}=rr(),{visualSettings:r}=Ht(),[s,a]=w.useState([]),[l,u]=w.useState(!0),[d,h]=w.useState(""),m=async()=>{u(!0);try{const{data:j,error:R}=await ee.from("user_profiles").select("id, email, role, is_enabled, full_name, avatar_url, created_at").order("created_at",{ascending:!1});if(R)throw R;a(j||[])}catch(j){console.error("Error fetching users:",j),he({title:t("users.fetchError"),description:j.message,variant:"destructive"})}finally{u(!1)}};w.useEffect(()=>{m()},[]);const p=async(j,R)=>{try{const A=s.find(P=>P.id===j);if($o.includes(A?.email))throw new Error(t("users.cannotModifySuperAdmin"));const{error:N}=await ee.from("user_profiles").update({role:R}).eq("id",j);if(N)throw N;await m(),he({title:t("users.roleUpdated"),description:t("users.roleUpdatedSuccess")})}catch(A){console.error("Error updating user role:",A),he({title:t("users.roleUpdateError"),description:A.message,variant:"destructive"})}},g=async(j,R)=>{try{const A=s.find(P=>P.id===j);if($o.includes(A?.email))throw new Error(t("users.cannotModifySuperAdmin"));const{error:N}=await ee.from("user_profiles").update({is_enabled:R}).eq("id",j);if(N)throw N;await m(),he({title:t(R?"users.userEnabled":"users.userDisabled"),description:t("users.statusUpdateSuccess")})}catch(A){console.error("Error updating user status:",A),he({title:t("users.statusUpdateError"),description:A.message,variant:"destructive"})}},v=async j=>{const R=s.find(N=>N.id===j);if($o.includes(R?.email)){he({title:t("users.deleteError"),description:t("users.cannotModifySuperAdmin"),variant:"destructive"});return}const A=t("users.confirmDelete",{email:R?.email});if(window.confirm(A))try{const{error:N}=await ee.from("user_profiles").delete().eq("id",j);if(N)throw N;const{error:P}=await ee.auth.admin.deleteUser(j);P&&console.warn("Could not delete from auth.users:",P),await m(),he({title:t("users.userDeleted"),description:t("users.userDeletedSuccess")})}catch(N){console.error("Error deleting user:",N),he({title:t("users.deleteError"),description:N.message,variant:"destructive"})}},b=$o.includes(e?.email),_=s.filter(j=>j.email?.toLowerCase().includes(d.toLowerCase())||j.full_name?.toLowerCase().includes(d.toLowerCase())),C=j=>{switch(j){case"super_admin":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return o.jsx("div",{className:"min-h-screen py-8 px-4",children:o.jsxs("div",{className:"container mx-auto max-w-7xl",children:[o.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",style:et(r),children:t("users.management")}),o.jsx("p",{className:"text-gray-600",children:t("users.managementDescription")})]}),o.jsxs(xe,{onClick:m,disabled:l,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[o.jsx(Mr,{className:`w-4 h-4 ${l?"animate-spin":""}`}),t("users.refresh")]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[o.jsxs("div",{className:"relative w-full sm:w-96",children:[o.jsx(kh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:`${t("users.table.email")}, ${t("users.table.name")}...`,value:d,onChange:j=>h(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"flex gap-4 text-sm",children:[o.jsxs("div",{className:"px-4 py-2 glass-effect rounded-xl",children:[o.jsxs("span",{className:"text-gray-600",children:[t("users.total"),":"]}),o.jsx("span",{className:"ml-2 font-bold",children:s.length})]}),o.jsxs("div",{className:"px-4 py-2 glass-effect rounded-xl",children:[o.jsxs("span",{className:"text-gray-600",children:[t("users.table.active"),":"]}),o.jsx("span",{className:"ml-2 font-bold text-green-600",children:s.filter(j=>j.is_enabled).length})]})]})]})]}),o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect rounded-2xl overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.email")}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.name")}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.role")}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.status")}),o.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("users.table.actions")})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:l?o.jsx("tr",{children:o.jsxs("td",{colSpan:"5",className:"px-6 py-12 text-center",children:[o.jsx(Mr,{className:"w-8 h-8 animate-spin mx-auto text-gray-400 mb-2"}),o.jsx("p",{className:"text-gray-500",children:t("users.loadingUsers")})]})}):_.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:"5",className:"px-6 py-12 text-center",children:[o.jsx(Ec,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),o.jsx("p",{className:"text-gray-500",children:t(d?"users.noUsersFound":"users.noUsers")})]})}):_.map((j,R)=>{const A=$o.includes(j.email);return o.jsxs(me.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:R*.05},className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:o.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-semibold",children:j.email?.charAt(0).toUpperCase()})}),o.jsx("div",{className:"ml-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.email})})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-900",children:j.full_name||"-"})}),o.jsx("td",{className:"px-6 py-4",children:A?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[o.jsx(Wd,{className:"w-3 h-3 mr-1"}),t("users.superAdmin")]}):b?o.jsxs("select",{value:j.role||"user",onChange:N=>p(j.id,N.target.value),className:`px-3 py-1 rounded-full text-xs font-medium border-0 focus:ring-2 focus:ring-blue-500 ${C(j.role)}`,children:[o.jsx("option",{value:"user",children:t("users.roles.user")}),o.jsx("option",{value:"admin",children:t("users.roles.admin")})]}):o.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${C(j.role)}`,children:t(`users.roles.${j.role||"user"}`)})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${j.is_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.is_enabled?t("users.table.active"):t("users.table.inactive")})}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[!A&&b&&o.jsxs(o.Fragment,{children:[o.jsx(xe,{variant:j.is_enabled?"outline":"default",size:"sm",onClick:()=>g(j.id,!j.is_enabled),className:"flex items-center gap-2",title:j.is_enabled?t("users.disableUser"):t("users.enableUser"),children:j.is_enabled?o.jsxs(o.Fragment,{children:[o.jsx(w2,{className:"w-4 h-4"}),t("users.disable")]}):o.jsxs(o.Fragment,{children:[o.jsx(b2,{className:"w-4 h-4"}),t("users.enable")]})}),o.jsxs(xe,{variant:"outline",size:"sm",onClick:()=>v(j.id),className:"flex items-center gap-2",style:{backgroundColor:r.destructiveBgColor||"#dc2626",color:r.destructiveTextColor||"#ffffff",borderColor:r.destructiveBgColor||"#dc2626"},onMouseEnter:N=>N.currentTarget.style.backgroundColor=r.destructiveHoverBgColor||"#b91c1c",onMouseLeave:N=>N.currentTarget.style.backgroundColor=r.destructiveBgColor||"#dc2626",title:t("users.deleteUser"),children:[o.jsx(Go,{className:"w-4 h-4"}),t("users.delete")]})]}),A&&o.jsxs("span",{className:"text-xs text-gray-400 italic flex items-center gap-1",children:[o.jsx(Wd,{className:"w-3 h-3"}),t("users.protected")]})]})})]},j.id)})})]})})}),o.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Wd,{className:"w-5 h-5 text-blue-600 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsxs("p",{className:"font-semibold mb-1",children:[t("users.rolesPermissions.title"),":"]}),o.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[o.jsxs("li",{children:[o.jsxs("strong",{children:[t("users.roles.user"),":"]})," ",t("users.rolesPermissions.userDesc")]}),o.jsxs("li",{children:[o.jsxs("strong",{children:[t("users.roles.admin"),":"]})," ",t("users.rolesPermissions.adminDesc")]}),o.jsxs("li",{children:[o.jsxs("strong",{children:[t("users.roles.super_admin"),":"]})," ",t("users.rolesPermissions.superAdminDesc")]})]})]})]})}),o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"p-4 bg-amber-50 border border-amber-200 rounded-xl",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Ci,{className:"w-5 h-5 text-amber-600 mt-0.5"}),o.jsxs("div",{className:"text-sm text-amber-800",children:[o.jsxs("p",{className:"font-semibold mb-1",children:[t("users.securityNote.title"),":"]}),o.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[o.jsx("li",{children:t("users.securityNote.superAdminProtected")}),o.jsx("li",{children:t("users.securityNote.onlySuperAdminManage")}),o.jsx("li",{children:t("users.securityNote.deletionPermanent")})]})]})]})})]})]})})},Kv="papuenvios_supabase_auth_handled",P4=({onNavigate:t})=>{const[e,r]=w.useState(!0),[s,a]=w.useState(null);return w.useEffect(()=>{let l=!0;return(async()=>{try{if(console.log("[AuthCallback] start handling callback",{href:window.location.href,hash:window.location.hash,search:window.location.search}),sessionStorage.getItem(Kv)==="1"){console.warn("[AuthCallback] already handled in this session"),l&&r(!1);const{data:{session:h}}=await ee.auth.getSession();if(h?.user&&t){const m=await zf(h.user.id);t(m==="admin"||m==="super_admin"?"dashboard":"products")}return}sessionStorage.setItem(Kv,"1");let d=null;if(typeof ee.auth.getSessionFromUrl=="function"){const{data:h,error:m}=await ee.auth.getSessionFromUrl({storeSession:!0});m?console.warn("[AuthCallback] getSessionFromUrl returned error",m):d=h?.session}if(!d){const{data:{session:h},error:m}=await ee.auth.getSession();m&&console.warn("[AuthCallback] getSession returned error",m),d=h}if(!d){await new Promise(m=>setTimeout(m,800));const{data:{session:h}}=await ee.auth.getSession();d=h}if(!d?.user)throw new Error("No se pudo establecer la sesin de usuario");console.log("[AuthCallback] Auth success for:",d.user.email);try{window.history.replaceState({},document.title,window.location.pathname)}catch{}if(he({title:"Bienvenido!",description:`Has iniciado sesin como ${d.user.email}`}),t){const h=await zf(d.user.id);setTimeout(()=>{t(h==="admin"||h==="super_admin"?"dashboard":"products")},150)}}catch(d){console.error("[AuthCallback] error:",d);const h=d?.message||String(d);a(h),he({title:"Error de Autenticacin",description:h,variant:"destructive"}),setTimeout(()=>{t&&t("login")},1800)}finally{l&&r(!1)}})(),()=>{l=!1}},[t]),e?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center p-6 bg-white rounded shadow",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-spin mx-auto"}),o.jsx("p",{className:"mt-4",children:"Completando autenticacin..."})]})}):s?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center p-6 bg-white rounded shadow",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Error de Autenticacin"}),o.jsx("p",{className:"mt-2 text-red-600",children:s})]})}):null},ya=(t,e)=>s=>{const{user:a,loading:l,checkRole:u,userRole:d}=rr();return l?o.jsx(Tw,{}):a?u(e)?o.jsx(t,{...s}):o.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:o.jsxs("div",{className:"glass-effect p-8 rounded-2xl text-center max-w-lg",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Acceso restringido"}),o.jsxs("p",{className:"text-gray-600",children:["No tienes permisos para ver esta pgina. Rol requerido: ",e,". Tu rol: ",d||"ninguno","."]})]})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:o.jsxs("div",{className:"glass-effect p-8 rounded-2xl text-center max-w-lg",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Autenticacin requerida"}),o.jsx("p",{className:"text-gray-600",children:"Debes iniciar sesin para acceder a esta pgina."})]})})};function T4(){const{visualSettings:t}=Ht();return w.useEffect(()=>{document.title=t.companyName||"PapuEnvos"},[t.companyName]),o.jsxs(mC,{children:[o.jsxs("title",{children:[t.companyName||"PapuEnvos"," - Plataforma de Comercio Digital"]}),o.jsx("meta",{name:"description",content:"Plataforma completa de comercio digital con vendedores independientes, remesas y gestin de ganancias"})]})}const A4=ya(E4,"admin"),R4=ya(s4,"admin"),O4=ya(o4,"admin"),M4=ya(j4,"admin"),D4=ya(k4,"user");function I4(){const[t,e]=w.useState(!0),[r,s]=w.useState("home"),[a,l]=w.useState({itemId:null,itemType:null});w.useEffect(()=>{const h=window.location.pathname,m=new URLSearchParams(window.location.search),p=new URLSearchParams(window.location.hash.substring(1));(h==="/auth/callback"||m.has("access_token")||p.has("access_token")||m.has("code"))&&s("auth/callback");const g=h.match(/^\/product\/([^/]+)$/),v=h.match(/^\/combo\/([^/]+)$/);g?(s("product-detail"),l({itemId:g[1],itemType:"product"})):v&&(s("product-detail"),l({itemId:v[1],itemType:"combo"}));const b=setTimeout(()=>{e(!1)},2500);return()=>clearTimeout(b)},[]);const u=(h,m={})=>{if(s(h),h==="product-detail"&&m.itemId&&m.itemType){l({itemId:m.itemId,itemType:m.itemType});const p=`/${m.itemType}/${m.itemId}`;window.history.pushState({},"",p)}else h==="home"&&window.location.pathname!=="/"?window.history.pushState({},"","/"):h!=="home"&&window.location.pathname==="/"&&window.history.pushState({},"",`/${h}`)},d=()=>{switch(r){case"home":return o.jsx(qv,{onNavigate:u});case"products":return o.jsx(zO,{onNavigate:u});case"product-detail":return o.jsx(WO,{onNavigate:u,itemId:a.itemId,itemType:a.itemType});case"remittances":return o.jsx(QO,{onNavigate:u});case"dashboard":return o.jsx(R4,{onNavigate:u});case"admin":return o.jsx(O4,{onNavigate:u});case"settings":return o.jsx(M4,{onNavigate:u});case"cart":return o.jsx(S4,{onNavigate:u});case"login":return o.jsx(N4,{onNavigate:u});case"user-panel":return o.jsx(D4,{onNavigate:u});case"user-management":return o.jsx(A4,{onNavigate:u});case"auth/callback":return o.jsx(P4,{onNavigate:u});default:return o.jsx(qv,{onNavigate:u})}};return o.jsx(hA,{children:o.jsx(nx,{children:o.jsx(wO,{children:o.jsx(jO,{children:o.jsx(dA,{children:o.jsxs("div",{className:"min-h-screen",children:[o.jsx(T4,{}),o.jsx(pn,{mode:"wait",children:t?o.jsx(fA,{},"loading"):o.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen",children:[r!=="auth/callback"&&o.jsx($O,{currentPage:r,onNavigate:u}),o.jsx("main",{className:r!=="auth/callback"?"pt-20":"",children:o.jsx(pn,{mode:"wait",children:o.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:d()},r)})})]},"main")}),o.jsx(P2,{})]})})})})})})}B_.createRoot(document.getElementById("root")).render(o.jsx(rt.StrictMode,{children:o.jsx(I4,{})}));
